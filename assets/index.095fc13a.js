function Qm(J,Q){return Q.forEach(function(c){c&&typeof c!="string"&&!Array.isArray(c)&&Object.keys(c).forEach(function(R){if(R!=="default"&&!(R in J)){var e=Object.getOwnPropertyDescriptor(c,R);Object.defineProperty(J,R,e.get?e:{enumerable:!0,get:function(){return c[R]}})}})}),Object.freeze(J)}const qm=function(){const Q=document.createElement("link").relList;if(Q&&Q.supports&&Q.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))R(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&R(g)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function R(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}};qm();var je=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function tT(J){return J&&J.__esModule&&Object.prototype.hasOwnProperty.call(J,"default")?J.default:J}var Xf={exports:{}},Yf={exports:{}},Bh={exports:{}},zf={exports:{}},Vo={exports:{}};(function(J,Q){(function(c,R){J.exports=R()})(je,function(){var c={},R=function(t,r,T,$){t=t+" was deprecated in "+r+" and will be deleted in "+T+".",$&&(t+=`
Use `+$+" instead."),console.warn(t)},e=function(t,r){o(),Kr=setTimeout(function(){r&&r.handleRightClick(t)},nm)},o=function(){Kr&&(clearTimeout(Kr),Kr=0)},g=function(){zr=null},l=function(t){return!t.type.startsWith("pointer")||t instanceof PointerEvent&&i(t)},h=function(t){return`${t.pointerId}`},i=function(t){const r=h(t);return zr?zr===r:t.type==="pointerdown"?(zr=r,!0):!1},s=function(t){if(R("setClientFromTouch()","version 9","version 10"),t.type.startsWith("touch")&&t.changedTouches){const r=t.changedTouches[0];t.clientX=r.clientX,t.clientY=r.clientY}},n=function(t){return R("isMouseOrTouchEvent()","version 9","version 10"),t.type.startsWith("touch")||t.type.startsWith("mouse")||t.type.startsWith("pointer")},d=function(t){return R("isTouchEvent()","version 9","version 10"),t.type.startsWith("touch")||t.type.startsWith("pointer")},a=function(t){R("splitEventByTouches()","version 9","version 10");const r=[];if(t.changedTouches)for(let T=0;T<t.changedTouches.length;T++)r[T]={type:t.type,changedTouches:[t.changedTouches[T]],target:t.target,stopPropagation(){t.stopPropagation()},preventDefault(){t.preventDefault()}};else r.push(t);return r},u=function(t,r,T,$,A,F){function z(q){(A||l(q))&&(T?$.call(T,q):$(q))}if(F!==void 0&&R("The opt_noPreventDefault argument of conditionalBind","version 9","version 10"),F=[],r in Ts)for(let q=0;q<Ts[r].length;q++){const ct=Ts[r][q];t.addEventListener(ct,z,!1),F.push([t,ct,z])}else t.addEventListener(r,z,!1),F.push([t,r,z]);return F},f=function(t,r,T,$){function A(z){T?$.call(T,z):$(z)}const F=[];if(r in Ts)for(let z=0;z<Ts[r].length;z++){const q=Ts[r][z];t.addEventListener(q,A,!1),F.push([t,q,A])}else t.addEventListener(r,A,!1),F.push([t,r,A]);return F},p=function(t){const r=t[t.length-1][2];for(;t.length;){const T=t.pop();T[0].removeEventListener(T[1],T[2],!1)}return r},v=function(t){if(t.target instanceof HTMLElement){if(t.target.isContentEditable||t.target.getAttribute("data-is-text-input")==="true")return!0;if(t.target instanceof HTMLInputElement)return t=t.target,t.type==="text"||t.type==="number"||t.type==="email"||t.type==="password"||t.type==="search"||t.type==="tel"||t.type==="url";if(t.target instanceof HTMLTextAreaElement)return!0}return!1},m=function(t){return t.ctrlKey&&Ha?!0:t.button===2},E=function(t,r,T){const $=r.createSVGPoint();return $.x=t.clientX,$.y=t.clientY,T||(T=r.getScreenCTM().inverse()),$.matrixTransform(T)},x=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*kc,y:t.deltaY*kc};case 2:return{x:t.deltaX*Hc,y:t.deltaY*Hc}}},y=function(t){return Ws[t]||null},S=function(){const t=[];for(const r in Ws)t.push(Ws[r]);return t},C=function(t){Ws[t.id]=t},I=function(t){delete Ws[t.id]},O=function(){return Vc},M=function(t){Vc=t},L=function(){return Wa},P=function(t){Wa=t},b=function(){return Wc},B=function(t){Wc=t},U=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;const r=t.getParentSvg(),T=t.getCachedParentSvgSize();var $=r.parentElement;if($ instanceof HTMLElement){var A=$.offsetWidth;$=$.offsetHeight,T.width!==A&&(r.setAttribute("width",A+"px"),t.setCachedParentSvgSize(A,null)),T.height!==$&&(r.setAttribute("height",$+"px"),t.setCachedParentSvgSize(null,$)),t.resize()}},H=function(t,r){const T=Object.create(null),$=t.getDescendants(!0);r&&(t=t.getNextBlock())&&(t=$.indexOf(t),$.splice(t,$.length-t));for(let A=0,F;F=$[A];A++)T[F.type]?T[F.type]++:T[F.type]=1;return T},Y=function(t){return function(){this.jsonInit(t)}},j=function(t){Xa.defineBlocksWithJsonArrayInternal(t)},_=function(t){D(w(t))},w=function(t){const r={};for(let T=0;T<t.length;T++){const $=t[T];if(!$){console.warn(`Block definition #${T} in JSON array is ${$}. Skipping`);continue}const A=$.type;A?r[A]={init:Y($)}:console.warn(`Block definition #${T} in JSON array is missing a type attribute. Skipping.`)}return r},D=function(t){for(const r of Object.keys(t)){const T=t[r];r in Xe&&console.warn(`Block definiton "${r}" overwrites previous definition.`),Xe[r]=T}},N=function(t,r,T){t=document.createElementNS(Xs,String(t));for(const $ in r)t.setAttribute($,`${r[$]}`);return T&&T.appendChild(t),t},G=function(t,r){return r=r.split(" "),r.every(T=>t.classList.contains(T))?!1:(t.classList.add(...r),!0)},k=function(t,r){t.classList.remove(...r.split(" "))},V=function(t,r){return r=r.split(" "),r.every(T=>!t.classList.contains(T))?!1:(t.classList.remove(...r),!0)},X=function(t,r){return t.classList.contains(r)},K=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},tt=function(t,r){const T=r.nextSibling;if(r=r.parentNode,!r)throw Error("Reference node has no parent.");T?r.insertBefore(t,T):r.appendChild(t)},st=function(t,r){return!!(t.compareDocumentPosition(r)&Li.DOCUMENT_POSITION_CONTAINED_BY)},rt=function(t,r){t.style.transform=r,t.style["-webkit-transform"]=r},ht=function(){Ya++,vi||(vi=Object.create(null))},ut=function(){Ya--,Ya||(vi=null)},mt=function(t){const r=t.textContent+`
`+t.className.baseVal;let T;if(vi&&(T=vi[r]))return T;try{T=t.getComputedTextLength()}catch{return 8*t.textContent.length}return vi&&(vi[r]=T),T},pt=function(t,r,T,$){return Tt(t,r+"pt",T,$)},Tt=function(t,r,T,$){const A=t.textContent;t=A+`
`+t.className.baseVal;var F;return vi&&(F=vi[t])||(Zr||(F=document.createElement("canvas"),F.className="blocklyComputeCanvas",document.body.appendChild(F),Zr=F.getContext("2d")),Zr.font=T+" "+r+" "+$,F=A?Zr.measureText(A).width:0,vi&&(vi[t]=F)),F},Nt=function(t,r,T,$){const A=document.createElement("span");A.style.font=T+" "+r+" "+$,A.textContent=t,t=document.createElement("div"),t.style.width="1px",t.style.height="0",r=document.createElement("div"),r.setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),r.appendChild(A),r.appendChild(t),document.body.appendChild(r),T={height:0,baseline:0};try{r.style.alignItems="baseline",T.baseline=t.offsetTop-A.offsetTop,r.style.alignItems="flex-end",T.height=t.offsetTop-A.offsetTop}finally{document.body.removeChild(r)}return T},Ct=function(t){return t*Math.PI/180},$t=function(t){return 180*t/Math.PI},vt=function(t,r,T){if(T<t){const $=T;T=t,t=$}return Math.max(t,Math.min(r,T))},Ht=function(t){return Xc.getSizeInternal(t)},At=function(t){if(se(t,"display")!=="none")return Dt(t);const r=t.style,T=r.display,$=r.visibility,A=r.position;r.visibility="hidden",r.position="absolute",r.display="inline";const F=t.offsetWidth;return t=t.offsetHeight,r.display=T,r.position=A,r.visibility=$,new Ie(F,t)},Dt=function(t){return new Ie(t.offsetWidth,t.offsetHeight)},se=function(t,r){return t=window.getComputedStyle(t),t[r]||t.getPropertyValue(r)},$e=function(t,r){return R("Blockly.utils.style.getCascadedStyle","version 9","version 10"),t.currentStyle?t.currentStyle[r]:""},zt=function(t){const r=new Et(0,0);t=t.getBoundingClientRect();var T=document.documentElement;return T=new Et(window.pageXOffset||T.scrollLeft,window.pageYOffset||T.scrollTop),r.x=t.left+T.x,r.y=t.top+T.y,r},Bt=function(){const t=document.body,r=document.documentElement;return new Et(t.scrollLeft||r.scrollLeft,t.scrollTop||r.scrollTop)},ee=function(t){const r=parseFloat(se(t,"borderLeftWidth")),T=parseFloat(se(t,"borderRightWidth")),$=parseFloat(se(t,"borderTopWidth"));return t=parseFloat(se(t,"borderBottomWidth")),new de($,t,r,T)},ft=function(t,r,T){t=ie(t,r,T),r.scrollLeft=t.x,r.scrollTop=t.y},ie=function(t,r,T){var $=zt(t),A=zt(r),F=ee(r);const z=$.x-A.x-F.left;return $=$.y-A.y-F.top,A=Dt(t),t=r.clientWidth-A.width,A=r.clientHeight-A.height,F=r.scrollLeft,r=r.scrollTop,T?(F+=z-t/2,r+=$-A/2):(F+=Math.min(z,Math.max(z-t,0)),r+=Math.min($,Math.max($-A,0))),new Et(F,r)},ye=function(){_t||(_t=document.createElement("div"),_t.className="blocklyDropDownDiv",(b()||document.body).appendChild(_t),Ks=document.createElement("div"),Ks.className="blocklyDropDownContent",_t.appendChild(Ks),ys=document.createElement("div"),ys.className="blocklyDropDownArrow",_t.appendChild(ys),_t.style.opacity="0",_t.style.transition="transform "+qr+"s, opacity "+qr+"s",_t.addEventListener("focusin",function(){G(_t,"blocklyFocused")}),_t.addEventListener("focusout",function(){V(_t,"blocklyFocused")}))},Ae=function(t){_a=t},He=function(){return ss},De=function(){return Ks},ne=function(){Ks.textContent="",Ks.style.width=""},W=function(t,r){_t.style.backgroundColor=t,_t.style.borderColor=r},Z=function(t,r,T,$){return Kt(at(r),t,T,$)},it=function(t,r,T){return zc=!0,Kt(lt(t),t,r,T)},at=function(t){var r=t.getSvgRoot();const T=t.workspace.scale,$=t.height*T;return t=t.width*T,r=zt(r),new de(r.y,r.y+$,r.x,r.x+t)},lt=function(t){return t=t.getScaledBBox(),new de(t.top,t.bottom,t.left,t.right)},Kt=function(t,r,T,$){const A=t.left+(t.right-t.left)/2,F=t.bottom;t=t.top,$&&(t+=$),$=r.getSourceBlock();let z=$.workspace;for(;z.options.parentWorkspace;)z=z.options.parentWorkspace;return Ae(z.getParentSvg().parentNode),fs(r,$.RTL,A,F,A,t,T)},fs=function(t,r,T,$,A,F,z){return ss=t,xs=z||null,_t.style.direction=r?"rtl":"ltr",t=O(),Ys=t.getRenderer().getClassName(),zs=t.getTheme().getClassName(),Ys&&G(_t,Ys),zs&&G(_t,zs),zh(T,$,A,F)},Wh=function(t,r,T,$){return t=xr(t,T.left,T.right,$.width),{initialX:t.divX,initialY:r,finalX:t.divX,finalY:r+Ka,arrowX:t.arrowX,arrowY:-(Ln/2+za),arrowAtTop:!0,arrowVisible:!0}},Xh=function(t,r,T,$){return t=xr(t,T.left,T.right,$.width),{initialX:t.divX,initialY:r-$.height,finalX:t.divX,finalY:r-$.height-Ka,arrowX:t.arrowX,arrowY:$.height-2*za-Ln/2,arrowAtTop:!1,arrowVisible:!0}},xp=function(t,r,T){return t=xr(t,r.left,r.right,T.width),{initialX:t.divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},xr=function(t,r,T,$){return r=vt(r,t-$/2,T-$),t=t-Ln/2-r,T=Yc,t=vt(T,t,$-T-Ln),{arrowX:t,divX:r}},Yh=function(){return!!ss},xn=function(t,r){return ss===t?(r?Ii():jo(),!0):!1},jo=function(){_t.style.transform="translate(0, 0)",_t.style.opacity="0",ja=setTimeout(function(){Ii()},1e3*qr),xs&&(xs(),xs=null)},Ii=function(){Yh()&&(ja&&clearTimeout(ja),_t.style.transform="",_t.style.left="",_t.style.top="",_t.style.opacity="0",_t.style.display="none",_t.style.backgroundColor="",_t.style.borderColor="",xs&&(xs(),xs=null),ne(),ss=null,Ys&&(V(_t,Ys),Ys=""),zs&&(V(_t,zs),zs=""),O().markFocused())},zh=function(t,r,T,$){t=Ja.getPositionMetrics(t,r,T,$),t.arrowVisible?(ys.style.display="",ys.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",ys.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):ys.style.display="none",r=Math.floor(t.initialX),T=Math.floor(t.initialY),$=Math.floor(t.finalX);const A=Math.floor(t.finalY);return _t.style.left=r+"px",_t.style.top=T+"px",_t.style.display="block",_t.style.opacity="1",_t.style.transform="translate("+($-r)+"px,"+(A-T)+"px)",!!t.arrowAtTop},yp=function(){if(ss){var t=ss.getSourceBlock();t=zc?lt(ss):at(t);const r=t.left+(t.right-t.left)/2;zh(r,t.bottom,r,t.top)}else jo()},Ut=function(t,r,T,$){if(!(t instanceof gt)&&typeof t!="string"||String(t).trim()==="")throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),typeof r!="string"||r.trim()==="")throw Error('Invalid name "'+r+'". The name must be a non-empty string.');const A=r.toLowerCase();if(!T)throw Error("Can not register a null value");let F=ns[t],z=to[t];if(F||(F=ns[t]=Object.create(null),z=to[t]=Object.create(null)),Sp(t,T),!$&&F[A])throw Error('Name "'+A+'" with type "'+t+'" already registered.');F[A]=T,z[A]=r},Sp=function(t,r){switch(t){case String(gt.FIELD):if(typeof r.fromJson!="function")throw Error('Type "'+t+'" must have a fromJson function')}},yr=function(t,r){t=String(t).toLowerCase(),r=r.toLowerCase();const T=ns[t];T&&T[r]?(delete ns[t][r],delete to[t][r]):console.warn("Unable to unregister ["+r+"]["+t+"] from the registry.")},Kh=function(t,r,T){t=String(t).toLowerCase(),r=r.toLowerCase();const $=ns[t];if(!$||!$[r]){if(r="Unable to find ["+r+"]["+t+"] in the registry.",T)throw Error(r+" You must require or register a "+t+" plugin.");return console.warn(r),null}return $[r]},jh=function(t,r){return t=String(t).toLowerCase(),r=r.toLowerCase(),(t=ns[t])?!!t[r]:!1},ws=function(t,r,T){return Kh(t,r,T)},Sr=function(t,r,T){return Kh(t,r,T)},_o=function(t,r,T){t=String(t).toLowerCase();var $=ns[t];if(!$){if($=`Unable to find [${t}] in the registry.`,T)throw Error(`${$} You must require or register a ${t} plugin.`);return console.warn($),null}if(!r)return $;t=to[t],T=Object.create(null),r=Object.keys($);for(let A=0;A<r.length;A++){const F=r[A];T[t[F]]=$[F]}return T},ni=function(t,r,T){return r=r.plugins[t.toString()]||Wi,typeof r=="function"?r:ws(t,r,T)},yn=function(){return"blockly-"+(am++).toString(36)},ui=function(){return jc.genUid()},_e=function(t){Mn=t},ci=function(){return Mn},It=function(t){qa.fireInternal(t)},Cp=function(t){Se()&&(Qs.length||setTimeout(_h,0),Qs.push(t))},_h=function(){const t=Cr(Qs,!0);Qs.length=0;for(let r=0,T;T=t[r];r++){if(!T.workspaceId)continue;const $=y(T.workspaceId);$&&$.fireChangeListener(T)}},Cr=function(t,r){t=t.slice(),r||t.reverse();const T=[],$=Object.create(null);for(let z=0,q;q=t[z];z++)if(!q.isNull()){var A=[q.isUiEvent?Dn:q.type,q.blockId,q.workspaceId].join(" "),F=$[A];const ct=F?F.event:null;F?q.type===Fe&&F.index===z-1?(A=q,ct.newParentId=A.newParentId,ct.newInputName=A.newInputName,ct.newCoordinate=A.newCoordinate,F.index=z):q.type===Re&&q.element===ct.element&&q.name===ct.name?ct.newValue=q.newValue:q.type===Cs?(F=q,ct.viewTop=F.viewTop,ct.viewLeft=F.viewLeft,ct.scale=F.scale,ct.oldScale=F.oldScale):(q.type!==os||ct.type!==Xi)&&($[A]={event:q,index:z},T.push(q)):($[A]={event:q,index:z},T.push(q))}t=T.filter(function(z){return!z.isNull()}),r||t.reverse();for(let z=1,q;q=t[z];z++)q.type===Re&&q.element==="mutation"&&t.unshift(t.splice(z,1)[0]);return t},Jo=function(){for(let t=0,r;r=Qs[t];t++)r.recordUndo=!1},Te=function(){Za++},Ee=function(){Za--},Se=function(){return Za===0},oe=function(){return _c},Pt=function(t){qa.setGroupInternal(t)},Rp=function(t){_c=typeof t=="boolean"?t?ui():"":t},Rr=function(t){const r=[];t=t.getDescendants(!1);for(let T=0,$;$=t[T];T++)r[T]=$.id;return r},Jh=function(t,r){var T=Ot(t.type);if(!T)throw Error("Unknown event type.");return $p(T)?T.fromJson(t,r):(T=new T,T.fromJson(t),T.workspaceId=r.id,T)},$p=function(t){return Object.getOwnPropertyDescriptors(t).fromJson&&typeof t.fromJson=="function"},Ot=function(t){const r=ws(gt.EVENT,t);if(!r)throw Error(`Event type ${t} not found in registry.`);return r},Zo=function(t){if((t.type===Fe||t.type===Le)&&t.workspaceId){var r=y(t.workspaceId);if(!t.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(t=r.getBlockById(t.blockId)){const T=Mn;try{Mn=!1;const $=t.getParent();if($&&$.isEnabled()){const A=t.getDescendants(!1);for(let F=0,z;z=A[F];F++)z.setEnabled(!0)}else if((t.outputConnection||t.previousConnection)&&!r.isDragging())do t.setEnabled(!1),t=t.getNextBlock();while(t)}finally{Mn=T}}}},Ip=function(t){({document:$s=$s,DOMParser:ho=ho,XMLSerializer:uo=uo}=t)},Op=function(){return R("Blockly.utils.xml.getDocument","version 9","version 10"),$s},Ap=function(t){R("Blockly.utils.xml.setDocument","version 9","version 10"),$s=t},qt=function(t){return $s.createElementNS(tl,t)},ts=function(t){return $s.createTextNode(t)},Zh=function(t){return new ho().parseFromString(t,"text/xml")},Qh=function(t){return new uo().serializeToString(t)},$r=function(t,r){Jc(t,r)},Lp=function(t){Jc=t},Qo=function(t,r){qc.confirmInternal(t,r)},Mp=function(t,r){Zc(t,r)},Pp=function(t){Zc=t},qo=function(t,r,T){Qc(t,r,T)},Dp=function(t){Qc=t},ta=function(t){t=t.getAllBlocks(!1);const r=new Set;for(let T=0;T<t.length;T++){const $=t[T].getVarModels();if($)for(let A=0;A<$.length;A++){const F=$[A];F.getId()&&r.add(F)}}return Array.from(r.values())},bp=function(t){t=t.getAllBlocks(!1);const r=new Set;for(let $=0,A;A=t[$];$++){var T=A.getDeveloperVariables;if(T){T=T();for(let F=0;F<T.length;F++)r.add(T[F])}}return Array.from(r.values())},ea=function(t){let r=[];const T=document.createElement("button");return T.setAttribute("text","%{BKY_NEW_VARIABLE}"),T.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function($){Sn($.getTargetWorkspace())}),r.push(T),t=qh(t),r=r.concat(t)},qh=function(t){t=t.getVariablesOfType("");const r=[];if(0<t.length){var T=t[t.length-1];if(Xe.variables_set){var $=qt("block");$.setAttribute("type","variables_set"),$.setAttribute("gap",Xe.math_change?"8":"24"),$.appendChild(Bs(T)),r.push($)}if(Xe.math_change&&($=qt("block"),$.setAttribute("type","math_change"),$.setAttribute("gap",Xe.variables_get?"20":"8"),$.appendChild(Bs(T)),T=Be('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),$.appendChild(T),r.push($)),Xe.variables_get){t.sort(kn.compareByName);for(let A=0,F;F=t[A];A++)T=qt("block"),T.setAttribute("type","variables_get"),T.setAttribute("gap","8"),T.appendChild(Bs(F)),r.push(T)}}return r},tu=function(t){return sl.generateUniqueNameInternal(t)},Np=function(t){return ia(fo.charAt(0),t.getAllVariableNames())},ia=function(t,r){if(!r.length)return t;const T=fo;let $="",A=T.indexOf(t);for(;;){let F=!1;for(let z=0;z<r.length;z++)if(r[z].toLowerCase()===t){F=!0;break}if(!F)break;A++,A===T.length&&(A=0,$=`${Number($)+1}`),t=T.charAt(A)+$}return t},Sn=function(t,r,T){function $(F){sa(bt.NEW_VARIABLE_TITLE,F,function(z){if(z){const q=iu(z,t);if(q){let ct;q.type===A?ct=bt.VARIABLE_ALREADY_EXISTS.replace("%1",q.name):(ct=bt.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,ct=ct.replace("%1",q.name).replace("%2",q.type)),$r(ct,function(){$(z)})}else t.createVariable(z,A),r&&r(z)}else r&&r(null)})}const A=T||"";$("")},eu=function(t,r,T){function $(A){const F=bt.RENAME_VARIABLE_TITLE.replace("%1",r.name);sa(F,A,function(z){if(z){var q=wp(z,r.type,t);q?(q=bt.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",q.name).replace("%2",q.type),$r(q,function(){$(z)})):(t.renameVariableById(r.getId(),z),T&&T(z))}else T&&T(null)})}$("")},sa=function(t,r,T){qo(t,r,function($){$&&($=$.replace(/[\s\xa0]+/g," ").trim(),$===bt.RENAME_VARIABLE||$===bt.NEW_VARIABLE)&&($=null),T($)})},wp=function(t,r,T){T=T.getVariableMap().getAllVariables(),t=t.toLowerCase();for(let $=0,A;A=T[$];$++)if(A.name.toLowerCase()===t&&A.type!==r)return A;return null},iu=function(t,r){r=r.getVariableMap().getAllVariables(),t=t.toLowerCase();for(let T=0,$;$=r[T];T++)if($.name.toLowerCase()===t)return $;return null},Bs=function(t){const r=qt("field");return r.setAttribute("name","VAR"),r.setAttribute("id",t.getId()),r.setAttribute("variabletype",t.type),t=ts(t.name),r.appendChild(t),r},Ir=function(t,r,T,$){let A=Or(t,r,T,$);return A||(A=Bp(t,r,T,$)),A},Or=function(t,r,T,$){const A=t.getPotentialVariableMap();let F=null;if(r&&(F=t.getVariableById(r),!F&&A&&(F=A.getVariableById(r)),F))return F;if(T){if($===void 0)throw Error("Tried to look up a variable by name without a type");F=t.getVariable(T,$),!F&&A&&(F=A.getVariable(T,$))}return F},Bp=function(t,r,T,$){const A=t.getPotentialVariableMap();return T||(T=tu(t.isFlyout?t.targetWorkspace:t)),A?A.createVariable(T,$,r):t.createVariable(T,$,r)},na=function(t,r){t=t.getAllVariables();const T=[];if(r.length!==t.length)for(let $=0;$<t.length;$++){const A=t[$];r.indexOf(A)===-1&&T.push(A)}return T},di=function(t){if(rl)throw Error("CSS already injected");ol+=`
`+t},su=function(t,r){rl||(rl=!0,t&&(t=r.replace(/[\\/]$/,""),r=ol.replace(/<<<PATH>>>/g,t),ol="",t=document.createElement("style"),t.id="blockly-common-style",r=document.createTextNode(r),t.appendChild(r),document.head.insertBefore(t,document.head.firstChild)))},fi=function(t){const r=new Et(0,0);var T=t.x&&t.getAttribute("x");const $=t.y&&t.getAttribute("y");return T&&(r.x=parseInt(T)),$&&(r.y=parseInt($)),(T=(T=t.getAttribute("transform"))&&T.match(td))&&(r.x+=Number(T[1]),T[3]&&(r.y+=Number(T[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(ed))&&(r.x+=Number(t[1]),t[3]&&(r.y+=Number(t[3]))),r},Ar=function(t){let r=0,T=0;for(;t;){const $=fi(t);if(r+=$.x,T+=$.y,(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;t=t.parentNode}return new Et(r,T)},nu=function(){return R("Blockly.utils.svgMath.is3dSupported","version 9","version 10"),!0},ra=function(){const t=Bt();return new de(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},oa=function(){const t=document.documentElement,r=window;return new Et(r.pageXOffset||t.scrollLeft,r.pageYOffset||t.scrollTop)},ru=function(t,r){var T=r.x;r=r.y;const $=t.getInjectionDiv().getBoundingClientRect();return T=new Et(T-$.left,r-$.top),r=t.getOriginOffsetInPixels(),Et.difference(T,r).scale(1/t.scale)},Fp=function(t,r){const T=qt("xml");var $=ou(ta(t));$.hasChildNodes()&&T.appendChild($),$=t.getTopComments(!0);for(let A=0;A<$.length;A++)T.appendChild($[A].toXmlWithXY(r));for(t=t.getTopBlocks(!0),$=0;$<t.length;$++)T.appendChild(Lr(t[$],r));return T},ou=function(t){const r=qt("variables");for(let T=0;T<t.length;T++){const $=t[T],A=qt("variable");A.appendChild(ts($.name)),$.type&&A.setAttribute("type",$.type),A.id=$.getId(),r.appendChild(A)}return r},Lr=function(t,r){if(t.isInsertionMarker()&&(t=t.getChildren(!1)[0],!t))return new DocumentFragment;let T=0;t.workspace.RTL&&(T=t.workspace.getWidth()),r=ps(t,r);const $=t.getRelativeToSurfaceXY();return r.setAttribute("x",Math.round(t.workspace.RTL?T-$.x:$.x)),r.setAttribute("y",Math.round($.y)),r},Gp=function(t){if(t.isSerializable()){const r=qt("field");return r.setAttribute("name",t.name||""),t.toXml(r)}return null},Up=function(t,r){for(let T=0;T<t.inputList.length;T++){const $=t.inputList[T];for(let A=0;A<$.fieldRow.length;A++){const F=Gp($.fieldRow[A]);F&&r.appendChild(F)}}},ps=function(t,r){if(t.isInsertionMarker())return(r=t.getChildren(!1)[0])?ps(r):new DocumentFragment;const T=qt(t.isShadow()?"shadow":"block");if(T.setAttribute("type",t.type),r||T.setAttribute("id",t.id),t.mutationToDom){var $=t.mutationToDom();$&&($.hasChildNodes()||$.hasAttributes())&&T.appendChild($)}if(Up(t,T),$=t.getCommentText()){var A=t.commentModel.size,F=t.commentModel.pinned,z=qt("comment");z.appendChild(ts($)),z.setAttribute("pinned",F),z.setAttribute("h",A.height),z.setAttribute("w",A.width),T.appendChild(z)}for(t.data&&($=qt("data"),$.appendChild(ts(t.data)),T.appendChild($)),$=0;$<t.inputList.length;$++){A=t.inputList[$];var q=void 0;if(F=!0,A.type!==kt.DUMMY){z=A.connection.targetBlock(),A.type===kt.VALUE?q=qt("value"):A.type===kt.STATEMENT&&(q=qt("statement"));const xt=A.connection.getShadowDom();!xt||z&&z.isShadow()||q.appendChild(au(xt,r)),z&&(z=ps(z,r),z.nodeType===Li.ELEMENT_NODE&&(q.appendChild(z),F=!1)),q.setAttribute("name",A.name),F||T.appendChild(q)}}t.inputsInline!==void 0&&t.inputsInline!==t.inputsInlineDefault&&T.setAttribute("inline",t.inputsInline.toString()),t.isCollapsed()&&T.setAttribute("collapsed","true"),t.isEnabled()||T.setAttribute("disabled","true"),t.isDeletable()||t.isShadow()||T.setAttribute("deletable","false"),t.isMovable()||t.isShadow()||T.setAttribute("movable","false"),t.isEditable()||T.setAttribute("editable","false"),q=t.getNextBlock();let ct;return q&&($=ps(q,r),$.nodeType===Li.ELEMENT_NODE&&(ct=qt("next"),ct.appendChild($),T.appendChild(ct))),t=t.nextConnection&&t.nextConnection.getShadowDom(),!t||q&&q.isShadow()||ct.appendChild(au(t,r)),T},au=function(t,r){let T=t=t.cloneNode(!0),$;for(;T;)if(r&&T.nodeName==="shadow"&&T.removeAttribute("id"),T.firstChild)T=T.firstChild;else{for(;T&&!T.nextSibling;){$=T,T=T.parentNode;let A;$.nodeType===Li.TEXT_NODE&&$.data.trim()===""&&((A=T)==null?void 0:A.firstChild)!==$&&K($)}T&&($=T,T=T.nextSibling,$.nodeType===Li.TEXT_NODE&&$.data.trim()===""&&K($))}return t},ri=function(t){return Qh(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},kp=function(t){t=ri(t).split("<");let r="";for(let T=1;T<t.length;T++){const $=t[T];$[0]==="/"&&(r=r.substring(2)),t[T]=r+"<"+$,$[0]!=="/"&&$.slice(-2)!=="/>"&&(r+="  ")}return t=t.join(`
`),t=t.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),t.replace(/^\n/,"")},Be=function(t){const r=Zh(t);if(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return r.documentElement},Hp=function(t,r){return r.setResizesEnabled(!1),r.clear(),t=Cn(t,r),r.setResizesEnabled(!0),t},Cn=function(t,r){let T=0;r.RTL&&(T=r.getWidth());const $=[];ht();const A=oe();A||Pt(!0),r.setResizesEnabled&&r.setResizesEnabled(!1);let F=!0;try{for(let z=0,q;q=t.childNodes[z];z++){const ct=q.nodeName.toLowerCase(),xt=q;if(ct==="block"||ct==="shadow"&&!ci()){const Yt=Fs(xt,r);$.push(Yt.id);const le=xt.hasAttribute("x")?parseInt(xt.getAttribute("x")):10,ii=xt.hasAttribute("y")?parseInt(xt.getAttribute("y")):10;isNaN(le)||isNaN(ii)||Yt.moveBy(r.RTL?T-le:le,ii),F=!1}else{if(ct==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(ct==="comment")r.rendered?Ne.fromXmlRendered(xt,r,T):Di.fromXml(xt,r);else if(ct==="variables"){if(F)lu(xt,r);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");F=!1}}}}finally{A||Pt(!1),ut()}return r.setResizesEnabled&&r.setResizesEnabled(!0),It(new(Ot(Zs))(r)),$},Vp=function(t,r){if(!r.getBlocksBoundingBox)return Cn(t,r);var T=r.getBlocksBoundingBox();if(t=Cn(t,r),T&&T.top!==T.bottom){var $=T.bottom;T=r.RTL?T.right:T.left;var A=1/0;let F=-1/0,z=1/0;for(let q=0;q<t.length;q++){const ct=r.getBlockById(t[q]).getRelativeToSurfaceXY();ct.y<z&&(z=ct.y),ct.x<A&&(A=ct.x),ct.x>F&&(F=ct.x)}for($=$-z+10,T=r.RTL?T-F:T-A,A=0;A<t.length;A++)r.getBlockById(t[A]).moveBy(T,$)}return t},Fs=function(t,r){Te();var T=r.getAllVariables();let $;try{if($=aa(t,r),r.rendered){const A=$,F=$.getDescendants(!1);A.setConnectionTracking(!1);for(let z=F.length-1;0<=z;z--)F[z].initSvg();for(let z=F.length-1;0<=z;z--)F[z].render(!1);setTimeout(function(){A.disposed||A.setConnectionTracking(!0)},1),A.updateDisabled(),r.resizeContents()}else{const A=$.getDescendants(!1);for(let F=A.length-1;0<=F;F--)A[F].initModel()}}finally{Ee()}if(Se()){for(t=na(r,T),r=0;r<t.length;r++)T=t[r],It(new(Ot(Ss))(T));It(new(Ot(Le))($))}return $},lu=function(t,r){for(let T=0;T<t.children.length;T++){const $=t.children[T],A=$.getAttribute("type"),F=$.getAttribute("id");r.createVariable($.textContent,A,F)}},Wp=function(t){const r={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let T=0;T<t.children.length;T++){const $=t.children[T];if($.nodeType!==Li.TEXT_NODE)switch($.nodeName.toLowerCase()){case"mutation":r.mutation.push($);break;case"comment":r.comment.push($);break;case"data":r.data.push($);break;case"title":case"field":r.field.push($);break;case"value":case"statement":r.input.push($);break;case"next":r.next.push($);break;default:console.warn("Ignoring unknown tag: "+$.nodeName)}}return r},Xp=function(t,r){let T=!1;for(let $=0;$<t.length;$++){const A=t[$];r.domToMutation&&(r.domToMutation(A),r.initSvg&&(T=!0))}return T},Yp=function(t,r){for(let $=0;$<t.length;$++){var T=t[$];const A=T.textContent,F=T.getAttribute("pinned")==="true",z=parseInt(T.getAttribute("w"));if(T=parseInt(T.getAttribute("h")),r.setCommentText(A),r.commentModel.pinned=F,isNaN(z)||isNaN(T)||(r.commentModel.size=new Ie(z,T)),F&&r.getCommentIcon&&!r.isInFlyout){const q=r;setTimeout(function(){q.getCommentIcon().setVisible(!0)},1)}}},zp=function(t,r){for(let T=0;T<t.length;T++)r.data=t[T].textContent},Kp=function(t,r){for(let T=0;T<t.length;T++){const $=t[T],A=$.getAttribute("name");Jp(r,A,$)}},hu=function(t){const r={childBlockElement:null,childShadowElement:null};for(let T=0;T<t.childNodes.length;T++){const $=t.childNodes[T];$.nodeType===Li.ELEMENT_NODE&&($.nodeName.toLowerCase()==="block"?r.childBlockElement=$:$.nodeName.toLowerCase()==="shadow"&&(r.childShadowElement=$))}return r},jp=function(t,r,T,$){for(let F=0;F<t.length;F++){var A=t[F];const z=A.getAttribute("name"),q=T.getInput(z);if(!q){console.warn("Ignoring non-existent input "+z+" in block "+$);break}if(A=hu(A),A.childBlockElement){if(!q.connection)throw TypeError("Input connection does not exist.");aa(A.childBlockElement,r,q.connection,!1)}if(A.childShadowElement){let ct;(ct=q.connection)==null||ct.setShadowDom(A.childShadowElement)}}},_p=function(t,r,T){for(let $=0;$<t.length;$++){const A=hu(t[$]);if(A.childBlockElement){if(!T.nextConnection)throw TypeError("Next statement does not exist.");if(T.nextConnection.isConnected())throw TypeError("Next statement is already connected.");aa(A.childBlockElement,r,T.nextConnection,!0)}A.childShadowElement&&T.nextConnection&&T.nextConnection.setShadowDom(A.childShadowElement)}},aa=function(t,r,T,$){const A=t.getAttribute("type");if(!A)throw TypeError("Block type unspecified: "+t.outerHTML);var F=t.getAttribute("id");F=r.newBlock(A,F);const z=Wp(t),q=Xp(z.mutation,F);if(Yp(z.comment,F),zp(z.data,F),T)if($)if(F.previousConnection)T.connect(F.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(F.outputConnection)T.connect(F.outputConnection);else if(F.previousConnection)T.connect(F.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Kp(z.field,F),jp(z.input,r,F,A),_p(z.next,r,F),q&&F.initSvg(),(r=t.getAttribute("inline"))&&F.setInputsInline(r==="true"),(r=t.getAttribute("disabled"))&&F.setEnabled(r!=="true"&&r!=="disabled"),(r=t.getAttribute("deletable"))&&F.setDeletable(r==="true"),(r=t.getAttribute("movable"))&&F.setMovable(r==="true"),(r=t.getAttribute("editable"))&&F.setEditable(r==="true"),(r=t.getAttribute("collapsed"))&&F.setCollapsed(r==="true"),t.nodeName.toLowerCase()==="shadow"){for(t=F.getChildren(!1),r=0;r<t.length;r++)if(!t[r].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(F.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");F.setShadow(!0)}return F},Jp=function(t,r,T){const $=t.getField(r);$?$.fromXml(T):console.warn("Ignoring non-existent field "+r+" in block "+t.type)},Zp=function(t){for(let r=0;r<t.childNodes.length;r++){const T=t.childNodes[r];if(T.nodeName.toLowerCase()==="next"){t.removeChild(T);break}}},Qp=function(t,r){return R("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),t.startsWith(r)},Mr=function(t){return t.length?t.reduce(function(r,T){return r.length<T.length?r:T}).length:0},uu=function(t,r){if(!t.length)return 0;if(t.length===1)return t[0].length;let T=0;r=r||Mr(t);let $;for($=0;$<r;$++){for(var A=t[0][$],F=1;F<t.length;F++)if(A!==t[F][$])return T;A===" "&&(T=$+1)}for(A=1;A<t.length;A++)if((F=t[A][$])&&F!==" ")return T;return r},cu=function(t,r){if(!t.length)return 0;if(t.length===1)return t[0].length;let T=0;r=r||Mr(t);let $;for($=0;$<r;$++){for(var A=t[0].substr(-$-1,1),F=1;F<t.length;F++)if(A!==t[F].substr(-$-1,1))return T;A===" "&&(T=$+1)}for(A=1;A<t.length;A++)if((F=t[A].charAt(t[A].length-$-1))&&F!==" ")return T;return r},du=function(t,r){t=t.split(`
`);for(let T=0;T<t.length;T++)t[T]=qp(t[T],r);return t.join(`
`)},qp=function(t,r){if(t.length<=r)return t;const T=t.trim().split(/\s+/);for(var $=0;$<T.length;$++)T[$].length>r&&(r=T[$].length);var A=-1/0;let F,z=1;do{$=A,F=t,t=[],A=T.length/z;let q=1;for(let ct=0;ct<T.length-1;ct++)q<(ct+1.5)/A?(q++,t[ct]=!0):t[ct]=!1;t=fu(T,t,r),A=la(T,t,r),t=tv(T,t),z++}while(A>$);return F},la=function(t,r,T){const $=[0],A=[];for(var F=0;F<t.length;F++)$[$.length-1]+=t[F].length,r[F]===!0?($.push(0),A.push(t[F].charAt(t[F].length-1))):r[F]===!1&&$[$.length-1]++;for(t=Math.max(...$),r=0,F=0;F<$.length;F++)r-=2*Math.pow(Math.abs(T-$[F]),1.5),r-=Math.pow(t-$[F],1.5),".?!".indexOf(A[F])!==-1?r+=T/3:",;)]}".indexOf(A[F])!==-1&&(r+=T/4);return 1<$.length&&$[$.length-1]<=$[$.length-2]&&(r+=.5),r},fu=function(t,r,T){let $=la(t,r,T),A;for(let F=0;F<r.length-1;F++){if(r[F]===r[F+1])continue;const z=[].concat(r);z[F]=!z[F],z[F+1]=!z[F+1];const q=la(t,z,T);q>$&&($=q,A=z)}return A?fu(t,A,T):r},tv=function(t,r){const T=[];for(let $=0;$<t.length;$++)T.push(t[$]),r[$]!==void 0&&T.push(r[$]?`
`:" ");return T.join("")},pu=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},ev=function(t){vo=t},iv=function(){return vo},sv=function(){return Vn},nv=function(){return ge},Rn=function(t){if(t=vu(t)){for(t=t.tooltip;typeof t=="function";)t=t();if(typeof t!="string")throw Error("Tooltip function must return a string.");return t}return""},vu=function(t){for(;t&&t.tooltip;){if(typeof t.tooltip=="string"||typeof t.tooltip=="function")return t;t=t.tooltip}return null},gu=function(){ge||(ge=document.createElement("div"),ge.className="blocklyTooltipDiv",(b()||document.body).appendChild(ge))},Pr=function(t){t.mouseOverWrapper_=f(t,"pointerover",null,rv),t.mouseOutWrapper_=f(t,"pointerout",null,ov),t.addEventListener("pointermove",mu,!1)},Dr=function(t){t&&(p(t.mouseOverWrapper_),p(t.mouseOutWrapper_),t.removeEventListener("pointermove",mu))},rv=function(t){tn||(t=vu(t.currentTarget),ai!==t&&(vs(),Xn=null,ai=t),clearTimeout(sd))},ov=function(t){tn||(sd=setTimeout(function(){Xn=ai=null,vs()},1),clearTimeout(Wn))},mu=function(t){if(ai&&ai.tooltip&&!tn)if(Vn){const r=ll-t.pageX;t=hl-t.pageY,Math.sqrt(r*r+t*t)>nd&&vs()}else Xn!==ai&&(clearTimeout(Wn),ll=t.pageX,hl=t.pageY,Wn=setTimeout(uv,rd))},Tu=function(){Xn=ai=null,vs()},vs=function(){Vn&&(Vn=!1,ge&&(ge.style.display="none")),Wn&&clearTimeout(Wn)},Eu=function(){vs(),tn=!0},xu=function(){tn=!1},av=function(){ge&&ai&&(typeof vo=="function"?vo(ge,ai):lv())},lv=function(){var t=Rn(ai);t=du(t,id),t=t.split(`
`);for(let r=0;r<t.length;r++){const T=document.createElement("div");T.appendChild(document.createTextNode(t[r])),ge.appendChild(T)}},hv=function(t){const r=document.documentElement.clientWidth,T=document.documentElement.clientHeight;let $=ll;$=t?$-(ul+ge.offsetWidth):$+ul;let A=hl+cl;return A+ge.offsetHeight>T+window.scrollY&&(A-=ge.offsetHeight+2*cl),t?$=Math.max(go-window.scrollX,$):$+ge.offsetWidth>r+window.scrollX-2*go&&($=r-ge.offsetWidth-2*go),{x:$,y:A}},uv=function(){if(!tn&&(Xn=ai,ge)){ge.textContent="",av();var t=ai.RTL;ge.style.direction=t?"rtl":"ltr",ge.style.display="block",Vn=!0;var{x:r,y:T}=hv(t);ge.style.left=r+"px",ge.style.top=T+"px"}},yu=function(){return dl},cv=function(t){dl=t},Su=function(){return fl},dv=function(t){fl=t},gs=function(t){t=String(t).toLowerCase().trim();var r=od[t];if(r||(r=t.substring(0,2)==="0x"?"#"+t.substring(2):t,r=r[0]==="#"?r:"#"+r,/^#[0-9a-f]{6}$/.test(r)))return r;if(/^#[0-9a-f]{3}$/.test(r))return["#",r[1],r[1],r[2],r[2],r[3],r[3]].join("");var T=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return T&&(t=Number(T[1]),r=Number(T[2]),T=Number(T[3]),0<=t&&256>t&&0<=r&&256>r&&0<=T&&256>T)?br(t,r,T):null},br=function(t,r,T){return r=t<<16|r<<8|T,16>t?"#"+(16777216|r).toString(16).substr(1):"#"+r.toString(16)},ha=function(t){return t=gs(t),t?(t=parseInt(t.substr(1),16),[t>>16,t>>8&255,t&255]):[0,0,0]},ua=function(t,r,T){let $=0,A=0,F=0;if(r===0)F=A=$=T;else{const z=Math.floor(t/60),q=t/60-z;t=T*(1-r);const ct=T*(1-r*q);switch(r=T*(1-r*(1-q)),z){case 1:$=ct,A=T,F=t;break;case 2:$=t,A=T,F=r;break;case 3:$=t,A=ct,F=T;break;case 4:$=r,A=t,F=T;break;case 5:$=T,A=t,F=ct;break;case 6:case 0:$=T,A=r,F=t}}return br(Math.floor($),Math.floor(A),Math.floor(F))},Gs=function(t,r,T){return t=gs(t),!t||(r=gs(r),!r)?null:(t=ha(t),r=ha(r),br(Math.round(r[0]+T*(t[0]-r[0])),Math.round(r[1]+T*(t[1]-r[1])),Math.round(r[2]+T*(t[2]-r[2]))))},ca=function(t){return ua(t,dl,255*fl)},da=function(t,r){const T=[];var $=t.split("");$.push("");var A=0;t=[];let F=null;for(let ct=0;ct<$.length;ct++){var z=$[ct];if(A===0)z==="%"?((A=t.join(""))&&T.push(A),t.length=0,A=1):t.push(z);else if(A===1)z==="%"?(t.push(z),A=0):r&&"0"<=z&&"9">=z?(A=2,F=z,(z=t.join(""))&&T.push(z),t.length=0):z==="{"?A=3:(t.push("%",z),A=0);else if(A===2)if("0"<=z&&"9">=z)F+=z;else{var q=void 0;T.push(parseInt((q=F)!=null?q:"",10)),ct--,A=0}else A===3&&(z===""?(t.splice(0,0,"%{"),ct--,A=0):z!=="}"?t.push(z):(A=t.join(""),/[A-Z]\w*/i.test(A)?(z=A.toUpperCase(),(z=z.startsWith("BKY_")?z.substring(4):null)&&z in bt?(A=bt[z],typeof A=="string"?Array.prototype.push.apply(T,da(A,r)):r?T.push(String(A)):T.push(A)):T.push("%{"+A+"}")):T.push("%{"+A+"}"),A=t.length=0))}for((r=t.join(""))&&T.push(r),q=[],t.length=0,$=0;$<T.length;$++)typeof T[$]=="string"?t.push(T[$]):((r=t.join(""))&&q.push(r),t.length=0,q.push(T[$]));return(r=t.join(""))&&q.push(r),t.length=0,q},fa=function(t){return da(t,!0)},ce=function(t){return typeof t!="string"?t:(t=da(t,!1),t.length?String(t[0]):"")},Nr=function(t){let r=!0;const T=bt,$=t.match(/%{BKY_[A-Z]\w*}/ig);if($)for(let A=0;A<$.length;A++){const F=$[A].toUpperCase();T[F.slice(6,-1)]===void 0&&(console.warn("No message string for "+$[A]+" in "+t),r=!1)}return r},Us=function(t){const r=typeof t=="string"?ce(t):t;var T=Number(r);if(!isNaN(T)&&0<=T&&360>=T)return{hue:T,hex:ua(T,yu(),255*Su())};if(T=gs(r))return{hue:null,hex:T};throw T='Invalid colour: "'+r+'"',t!==r&&(T+=' (from "'+t+'")'),Error(T)},ks=function(){return Ti},fv=function(t){Ti=t},Cu=function(){Ti||(Ti=document.createElement("div"),Ti.className="blocklyWidgetDiv",(b()||document.body).appendChild(Ti))},pa=function(t,r,T){Oi(),mo=t,To=T,(t=Ti)&&(t.style.direction=r?"rtl":"ltr",t.style.display="block",r=O(),en=r.getRenderer().getClassName(),sn=r.getTheme().getClassName(),en&&G(t,en),sn&&G(t,sn))},Oi=function(){if(Ru()){mo=null;var t=Ti;t&&(t.style.display="none",t.style.left="",t.style.top="",To&&To(),To=null,t.textContent="",en&&(V(t,en),en=""),sn&&(V(t,sn),sn=""),O().markFocused())}},Ru=function(){return!!mo},va=function(t){mo===t&&Oi()},$u=function(t,r,T){Ti.style.left=t+"px",Ti.style.top=r+"px",Ti.style.height=T+"px"},Iu=function(t,r,T,$){const A=vv(t,r,T);t=pv(t,r,T,$),0>A?$u(t,0,T.height+A):$u(t,A,T.height)},pv=function(t,r,T,$){return $?Math.min(Math.max(r.right-T.width,t.left),t.right-T.width):Math.max(Math.min(r.left,t.right-T.width),t.left)},vv=function(t,r,T){return r.bottom+T.height>=t.bottom?r.top-T.height:r.bottom},oi=function(t,r){Ut(gt.FIELD,t,r)},gv=function(t){yr(gt.FIELD,t)},ga=function(t){return ad.fromJsonInternal(t)},mv=function(t){const r=Sr(gt.FIELD,t.type);if(r){if(typeof r.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return r.fromJson(t)}return console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},Ai=function(t,r){t.setAttribute(dm,r)},he=function(t,r,T){Array.isArray(T)&&(T=T.join(" ")),t.setAttribute(cm+r,`${T}`)},Tv=function(t){return t!==Wt.SKIP_SETUP},Ev=function(t){let r=!1;const T=t.map(([z,q])=>typeof z=="string"?[ce(z),q]:(r=!0,[z.alt!==null?Object.assign({},z,{alt:ce(z.alt)}):Object.assign({},z),q]));if(r||2>t.length)return{options:T};var $=T.map(([z])=>z),A=Mr($);t=uu($,A);const F=cu($,A);return!t&&!F||A<=t+F?{options:T}:(A=t?$[0].substring(0,t-1):void 0,$=F?$[0].substr(1-F):void 0,{options:xv(T,t,F),prefix:A,suffix:$})},xv=function(t,r,T){return t.map(([$,A])=>[$.substring(r,$.length-T),A])},Ou=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");let r=!1;for(let T=0;T<t.length;T++){const $=t[T];Array.isArray($)?typeof $[1]!="string"?(r=!0,console.error("Invalid option["+T+"]: Each FieldDropdown option id must be a string. Found "+$[1]+" in: ",$)):$[0]&&typeof $[0]!="string"&&typeof $[0].src!="string"&&(r=!0,console.error("Invalid option["+T+"]: Each FieldDropdown option must have a string label or image description. Found"+$[0]+" in: ",$)):(r=!0,console.error("Invalid option["+T+"]: Each FieldDropdown option must be an array. Found: ",$))}if(r)throw TypeError("Found invalid FieldDropdown options.")},yv=function(t,r){R("Blockly.utils.object.inherits","version 9","version 10"),t.superClass_=r.prototype,Object.setPrototypeOf(t,r),t.prototype=Object.create(r.prototype),t.prototype.constructor=t},Sv=function(t,r){R("Blockly.utils.object.mixin","May 2022","May 2023","Object.assign");for(const T in r)t[T]=r[T]},es=function(t,r){for(const T in r)t[T]=r[T]!==null&&typeof r[T]=="object"?es(t[T]||Object.create(null),r[T]):r[T];return t},Cv=function(t){return R("Blockly.utils.object.values","version 9","version 10","Object.values"),Object.values(t)},wr=function(t){return t?((t instanceof Element||typeof t=="string")&&(t=Lu(t),t=Iv(t)),Rv(t),t):null},Rv=function(t){const r=t.kind;if(t=t.contents,r&&r!==hd&&r!==El)throw Error("Invalid toolbox kind "+r+". Please supply either "+hd+" or "+El);if(!t)throw Error("Toolbox must have a contents attribute.")},Br=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:Ea(t):[]},ma=function(t){return ud.hasCategoriesInternal(t)},$v=function(t){if(!t)return!1;const r=t.kind;return r?r===El:!!t.contents.filter(function(T){return T.kind.toUpperCase()==="CATEGORY"}).length},Ta=function(t){return t&&t.contents?!!t.contents.filter(function(r){return r.kind.toUpperCase()==="CATEGORY"}).length:!1},Iv=function(t){const r={contents:Ea(t)};return t instanceof Node&&Au(t,r),r},Ea=function(t){const r=[];let T=t.childNodes;T||(T=t);for(let $=0,A;A=T[$];$++){if(!A.tagName)continue;t={};const F=A.tagName.toUpperCase();t.kind=F,F==="BLOCK"?t.blockxml=A:A.childNodes&&0<A.childNodes.length&&(t.contents=Ea(A)),Au(A,t),r.push(t)}return r},Au=function(t,r){for(let T=0;T<t.attributes.length;T++){const $=t.attributes[T];-1<$.nodeName.indexOf("css-")?(r.cssconfig=r.cssconfig||{},r.cssconfig[$.nodeName.replace("css-","")]=$.value):r[$.nodeName]=$.value}},Lu=function(t){let r=null;if(t)if(typeof t=="string"){if(r=Be(t),r.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else t instanceof Element&&(r=t);return r},Fr=function(t,r){if(typeof t!="string"||t.trim()==="")throw Error('Error: Invalid extension name "'+t+'"');if(nn[t])throw Error('Error: Extension "'+t+'" is already registered.');if(typeof r!="function")throw Error('Error: Extension "'+t+'" must be a function');nn[t]=r},Ov=function(t,r){if(!r||typeof r!="object")throw Error('Error: Mixin "'+t+'" must be a object');Fr(t,function(){this.mixin(r)})},Av=function(t,r,T,$){const A='Error when registering mutator "'+t+'": ';Du(A,r);const F=Pu(r,A);if(T&&typeof T!="function")throw Error(A+'Extension "'+t+'" is not a function');Fr(t,function(){F&&this.setMutator(new c.Mutator$$module$build$src$core$mutator($||[],this)),this.mixin(r),T&&T.apply(this)})},Lv=function(t){Mu(t)?delete nn[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},Mu=function(t){return!!nn[t]},xa=function(t,r,T){const $=nn[t];if(typeof $!="function")throw Error('Error: Extension "'+t+'" not found.');let A;if(T?Mv(t,r):A=Sa(r),$.apply(r),T)Du('Error after applying mutator "'+t+'": ',r);else if(!bv(A,r))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},Mv=function(t,r){if(Sa(r).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+r.id)},Pv=function(t,r){return ya(t.mutationToDom,t.domToMutation,r+" mutationToDom/domToMutation")},Dv=function(t,r){return ya(t.saveExtraState,t.loadExtraState,r+" saveExtraState/loadExtraState")},Pu=function(t,r){return ya(t.compose,t.decompose,r+" compose/decompose")},ya=function(t,r,T){if(t&&r){if(typeof t!="function"||typeof r!="function")throw Error(T+" must be a function");return!0}if(!t&&!r)return!1;throw Error(T+"Must have both or neither functions")},Du=function(t,r){const T=Pv(r,t),$=Dv(r,t);if(!T&&!$)throw Error(t+"Mutations must contain either XML hooks, or JSON hooks, or both");Pu(r,t)},Sa=function(t){const r=[];return t.domToMutation!==void 0&&r.push(t.domToMutation),t.mutationToDom!==void 0&&r.push(t.mutationToDom),t.saveExtraState!==void 0&&r.push(t.saveExtraState),t.loadExtraState!==void 0&&r.push(t.loadExtraState),t.compose!==void 0&&r.push(t.compose),t.decompose!==void 0&&r.push(t.decompose),r},bv=function(t,r){if(r=Sa(r),r.length!==t.length)return!1;for(let T=0;T<r.length;T++)if(t[T]!==r[T])return!1;return!0},Gr=function(t){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")t();else{const r=setInterval(function(){document.readyState==="complete"&&(clearInterval(r),t())},10)}},Nv=function(t,r){const T=[];return typeof document=="object"&&Gr(function(){for(const $ in r)Nr(r[$])}),function(){this.type&&T.indexOf(this.type)===-1&&(wv(this,t,r),T.push(this.type)),this.setTooltip(function(){var $=String(this.getFieldValue(t));let A=r[$];return A===null?T.indexOf(this.type)===-1&&($="No tooltip mapping for value "+$+" of field "+t,this.type!==null&&($+=" of block type "+this.type),console.warn($+".")):A=ce(A),A}.bind(this))}},wv=function(t,r,T){var $=t.getField(r);if($ instanceof xi&&!$.isOptionListDynamic()){$=$.getOptions();for(let A=0;A<$.length;A++){const F=$[A][1];T[F]===null&&console.warn("No tooltip mapping for value "+F+" of field "+r+" of block type "+t.type)}}},Bv=function(t,r){return typeof document=="object"&&Gr(function(){Nr(t)}),function(){this.setTooltip(function(){const T=this.getField(r);return ce(t).replace("%1",T?T.getText():"")}.bind(this))}},Fv=function(){const t=this.tooltip;this.setTooltip(function(){const r=this.getParent();return r&&r.getInputsInline()&&r.tooltip||t}.bind(this))},Ve=function(t,r){return r=t.indexOf(r),r===-1?!1:(t.splice(r,1),!0)},Lt=function(t,r){return" "+t+","+r+" "},Je=function(t,r){return" "+t+r.join("")},be=function(t,r){return" M "+t+","+r+" "},ae=function(t,r){return" m "+t+","+r+" "},Ui=function(t,r){return" l "+t+","+r+" "},$n=function(t){return" l"+t.join("")},St=function(t,r){return" "+t+" "+r+" "},ve=function(t,r,T,$){return t+" "+T+" "+T+" "+r+$},Gv=function(t){return R("Blockly.utils.getRelativeXY","December 2021","December 2022","Blockly.utils.svgMath.getRelativeXY"),fi(t)},Uv=function(t){return R("Blockly.utils.getInjectionDivXY_","December 2021","December 2022","Blockly.utils.svgMath.getInjectionDivXY"),Ar(t)},kv=function(t){return R("Blockly.utils.tokenizeInterpolation","December 2021","December 2022","Blockly.utils.parsing.tokenizeInterpolation"),fa(t)},Hv=function(t){return R("Blockly.utils.replaceMessageReferences","December 2021","December 2022","Blockly.utils.parsing.replaceMessageReferences"),ce(t)},Vv=function(t){return R("Blockly.utils.checkMessageReferences","December 2021","December 2022","Blockly.utils.parsing.checkMessageReferences"),Nr(t)},Wv=function(){return R("Blockly.utils.is3dSupported","December 2021","December 2022","Blockly.utils.svgMath.is3dSupported"),nu()},Xv=function(){return R("Blockly.utils.getViewportBBox","December 2021","December 2022","Blockly.utils.svgMath.getViewportBBox"),ra()},Yv=function(t,r){return R("Blockly.utils.arrayRemove","December 2021","December 2022","Blockly.array.removeElem"),Ve(t,r)},zv=function(){return R("Blockly.utils.getDocumentScroll","December 2021","December 2022","Blockly.utils.svgMath.getDocumentScroll"),oa()},Kv=function(t,r){return R("Blockly.utils.getBlockTypeCounts","December 2021","December 2022","Blockly.common.getBlockTypeCounts"),H(t,r)},jv=function(t,r){return R("Blockly.utils.screenToWsCoordinates","December 2021","December 2022","Blockly.utils.svgMath.screenToWsCoordinates"),ru(t,r)},_v=function(t){return R("Blockly.utils.parseBlockColour","December 2021","December 2022","Blockly.utils.parsing.parseBlockColour"),Us(t)},Jv=function(t){R("Blockly.utils.runAfterPageLoad","December 2021","December 2022"),Gr(t)},Ca=function(t,r){Ut(gt.SERIALIZER,t,r)},Zv=function(t){yr(gt.SERIALIZER,t)},ki=function(t,{addCoordinates:r=!1,addInputBlocks:T=!0,addNextBlocks:$=!0,doFullSerialization:A=!0}={}){if(t.isInsertionMarker())return null;const F={type:t.type,id:t.id};return r&&qv(t,F),Qv(t,F),tg(t,F),eg(t,F),ig(t,F,A),T&&sg(t,F,A),$&&ng(t,F,A),F},Qv=function(t,r){t.isCollapsed()&&(r.collapsed=!0),t.isEnabled()||(r.enabled=!1),t.inputsInline!==void 0&&t.inputsInline!==t.inputsInlineDefault&&(r.inline=t.inputsInline),t.data&&(r.data=t.data)},qv=function(t,r){const T=t.workspace;t=t.getRelativeToSurfaceXY(),r.x=Math.round(T.RTL?T.getWidth()-t.x:t.x),r.y=Math.round(t.y)},tg=function(t,r){t.saveExtraState?(t=t.saveExtraState(),t!==null&&(r.extraState=t)):t.mutationToDom&&(t=t.mutationToDom(),t!==null&&(r.extraState=ri(t).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},eg=function(t,r){t.getCommentText()&&(r.icons={comment:{text:t.getCommentText(),pinned:t.commentModel.pinned,height:Math.round(t.commentModel.size.height),width:Math.round(t.commentModel.size.width)}})},ig=function(t,r,T){const $=Object.create(null);for(let A=0;A<t.inputList.length;A++){const F=t.inputList[A];for(let z=0;z<F.fieldRow.length;z++){const q=F.fieldRow[z];q.isSerializable()&&($[q.name]=q.saveState(T))}}Object.keys($).length&&(r.fields=$)},sg=function(t,r,T){const $=Object.create(null);for(let A=0;A<t.inputList.length;A++){const F=t.inputList[A];if(F.type===kt.DUMMY)continue;const z=bu(F.connection,T);z&&($[F.name]=z)}Object.keys($).length&&(r.inputs=$)},ng=function(t,r,T){t.nextConnection&&(t=bu(t.nextConnection,T))&&(r.next=t)},bu=function(t,r){const T=t.getShadowState(!0);if(t=t.targetBlock(),!T&&!t)return null;const $=Object.create(null);return T&&($.shadow=T),t&&!t.isShadow()&&($.block=ki(t,{doFullSerialization:r})),$},ms=function(t,r,{recordUndo:T=!1}={}){return Ra(t,r,{recordUndo:T})},Ra=function(t,r,{parentConnection:T,isShadow:$=!1,recordUndo:A=!1}={}){const F=ci();_e(A),(A=oe())||Pt(!0),Te();const z=Nu(t,r,{parentConnection:T,isShadow:$});return Ee(),It(new(Ot(Le))(z)),Pt(A),_e(F),r.rendered&&setTimeout(()=>{z.disposed||z.setConnectionTracking(!0)},1),z},Nu=function(t,r,{parentConnection:T,isShadow:$=!1}={}){if(!t.type)throw new fd(t);const A=r.newBlock(t.type,t.id);return A.setShadow($),rg(A,t),og(A,t),ag(A,t),lg(T,A,t),hg(A,t),ug(A,t),cg(A,t),dg(A,t),fg(A,r.rendered),A},rg=function(t,r){let T=r.x===void 0?0:r.x;r=r.y===void 0?0:r.y;const $=t.workspace;T=$.RTL?$.getWidth()-T:T,t.moveBy(T,r)},og=function(t,r){r.collapsed&&t.setCollapsed(!0),r.enabled===!1&&t.setEnabled(!1),r.inline!==void 0&&t.setInputsInline(r.inline),r.data!==void 0&&(t.data=r.data)},ag=function(t,r){r.extraState&&(t.loadExtraState?t.loadExtraState(r.extraState):t.domToMutation&&t.domToMutation(Be(r.extraState)))},lg=function(t,r,T){if(t){if(t.getSourceBlock().isShadow()&&!r.isShadow())throw new vd(T);if(t.type===kt.VALUE){var $=r.outputConnection;if(!$)throw new Jn("output",r,T)}else if($=r.previousConnection,!$)throw new Jn("previous",r,T);if(!t.connect($)){const A=r.workspace.connectionChecker;throw new pd(A.getErrorMessage(A.canConnectWithReason($,t,!1),$,t),t.type===kt.VALUE?"output connection":"previous connection",r,T)}}},hg=function(t,r){r.icons&&(r=r.icons.comment)&&(t.setCommentText(r.text),"pinned"in r&&(t.commentModel.pinned=r.pinned),"width"in r&&"height"in r&&(t.commentModel.size=new Ie(r.width,r.height)),r.pinned&&t.rendered&&!t.isInFlyout&&setTimeout(()=>t.getCommentIcon().setVisible(!0),1))},ug=function(t,r){if(r.fields){var T=Object.keys(r.fields);for(let $=0;$<T.length;$++){const A=T[$],F=r.fields[A],z=t.getField(A);z?z.loadState(F):console.warn(`Ignoring non-existant field ${A} in block ${t.type}`)}}},cg=function(t,r){if(r.inputs){var T=Object.keys(r.inputs);for(let $=0;$<T.length;$++){const A=T[$],F=t.getInput(A);if(!F||!F.connection)throw new Jn(A,t,r);wu(F.connection,r.inputs[A])}}},dg=function(t,r){if(r.next){if(!t.nextConnection)throw new Jn("next",t,r);wu(t.nextConnection,r.next)}},wu=function(t,r){r.shadow&&t.setShadowState(r.shadow),r.block&&Nu(r.block,t.getSourceBlock().workspace,{parentConnection:t})},fg=function(t,r){if(r)for(t.setConnectionTracking(!1),t.initSvg(),t.render(!1),t=t.getIcons(),r=0;r<t.length;r++)t[r].computeIconLocation();else t.initModel()},pg=function(t,r){if(!t||!r)throw Error("Cannot connect null connections.");t.targetConnection=r,r.targetConnection=t},vg=function(t,r){let T=null;r=r.outputConnection;const $=r.getConnectionChecker();for(let A=0,F;F=t.inputList[A];A++){const z=F.connection;if(z&&$.canConnect(r,z,!1)){if(T)return null;T=z}}return T},gg=function(t,r){let T;for(;T=vg(t,r);)if(t=T.targetBlock(),!t||t.isShadow())return T;return null},Ur=function(t){let r=t.outputConnection;return(!r||t.previousConnection&&t.previousConnection.isConnected())&&(r=t.previousConnection),r},Bu=function(t){const r=t.workspace;var T=t.getSvgRoot();r.getAudioManager().play("delete");const $=r.getSvgXY(T);T=T.cloneNode(!0),T.setAttribute("transform","translate("+$.x+","+$.y+")"),r.getParentSvg().appendChild(T),Fu(T,{x:$.x,y:$.y,width:t.width,height:t.height},r.RTL,new Date,r.scale)},Fu=function(t,r,T,$,A){const F=(new Date().getTime()-$.getTime())/150;1<F?K(t):(t.setAttribute("transform","translate("+(r.x+(T?-1:1)*r.width*A/2*F)+","+(r.y+r.height*A*F)+") scale("+(1-F)*A+")"),setTimeout(Fu,10,t,r,T,$,A))},Gu=function(t){const r=t.workspace,T=r.scale;if(r.getAudioManager().play("click"),!(1>T)){var $=r.getSvgXY(t.getSvgRoot());t.outputConnection?($.x+=(t.RTL?3:-3)*T,$.y+=13*T):t.previousConnection&&($.x+=(t.RTL?-23:23)*T,$.y+=3*T),t=N(nt.CIRCLE,{cx:$.x,cy:$.y,r:0,fill:"none",stroke:"#888","stroke-width":10},r.getParentSvg()),Uu(t,new Date,T)}},Uu=function(t,r,T){const $=(new Date().getTime()-r.getTime())/150;1<$?K(t):(t.setAttribute("r",(25*$*T).toString()),t.style.opacity=(1-$).toString(),So=setTimeout(Uu,10,t,r,T))},ku=function(t){if(In(),t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var r=t.getHeightWidth().height;r=Math.atan(10/r)/Math.PI*180,t.RTL||(r*=-1),tr=t.getSvgRoot(),Hu(tr,r,new Date)}},Hu=function(t,r,T){const $=(new Date().getTime()-T.getTime())/200;let A="";1>=$&&(A=`skewX(${Math.round(Math.sin($*Math.PI*3)*(1-$)*r)})`,So=setTimeout(Hu,10,t,r,T)),t.skew_=A,t.setAttribute("transform",t.translate_+t.skew_)},In=function(){if(tr){So&&clearTimeout(So);const t=tr;t.skew_="",t.setAttribute("transform",t.translate_),tr=null}},On=function(t){Il.copyInternal(t)},mg=function(t){ji=t.toCopyData()},$a=function(){if(!ji)return null;let t=ji.source;return t.isFlyout&&(t=t.targetWorkspace),ji.typeCounts&&t.isCapacityAvailable(ji.typeCounts)?t.paste(ji.saveInfo):null},kr=function(t){return Il.duplicateInternal(t)},Tg=function(t){const r=ji;On(t);let T,$,A;return t=(A=(T=t.toCopyData())==null||($=T.source)==null?void 0:$.paste(ji.saveInfo))!=null?A:null,ji=r,t},Vu=function(){return sr},Wu=function(t){sr=t},Hr=function(t,r,T){if(pa(Ol,T,Xu),r.length){var $=Eg(r,T);nr=$,xg($,t,T),setTimeout(function(){$.focus()},1),sr=null}else Vr()},Eg=function(t,r){const T=new pl;T.setRole(Ke.MENU);for(let $=0;$<t.length;$++){const A=t[$],F=new vl(A.text);F.setRightToLeft(r),F.setRole(Ke.MENUITEM),T.addChild(F),F.setEnabled(A.enabled),A.enabled&&F.onAction(function(){Vr(),A.callback(A.scope)},{})}return T},xg=function(t,r,T){const $=ra();r=new de(r.clientY+$.top,r.clientY+$.top,r.clientX+$.left,r.clientX+$.left),yg(t);const A=t.getSize();T&&(r.left+=A.width,r.right+=A.width,$.left+=A.width,$.right+=A.width),Iu($,r,A,T),t.focus()},yg=function(t){var r=ks();if(!r)throw Error("Attempting to create a context menu when widget div is null");r=t.render(r),G(r,"blocklyContextMenu"),u(r,"contextmenu",null,Sg),t.focus()},Sg=function(t){t.preventDefault(),t.stopPropagation()},Vr=function(){va(Ol),sr=null},Xu=function(){nr&&(nr.dispose(),nr=null)},Cg=function(t,r){return()=>{Te();let T;try{T=Fs(r,t.workspace);const $=t.getRelativeToSurfaceXY();$.x=t.RTL?$.x-c.config$$module$build$src$core$config.snapRadius:$.x+c.config$$module$build$src$core$config.snapRadius,$.y+=2*c.config$$module$build$src$core$config.snapRadius,T.moveBy($.x,$.y)}finally{Ee()}Se()&&!T.isShadow()&&It(new(Ot(Le))(T)),T.select()}},Yu=function(t){return{text:bt.REMOVE_COMMENT,enabled:!0,callback:function(){Pt(!0),t.dispose(),Pt(!1)}}},zu=function(t){return{text:bt.DUPLICATE_COMMENT,enabled:!0,callback:function(){kr(t)}}},Rg=function(t,r){const T={enabled:!0};return T.text=bt.ADD_COMMENT,T.callback=function(){const $=new Ne(t,bt.WORKSPACE_COMMENT_DEFAULT_TEXT,Ne.DEFAULT_SIZE,Ne.DEFAULT_SIZE);var A=t.getInjectionDiv().getBoundingClientRect();A=new Et(r.clientX-A.left,r.clientY-A.top);const F=t.getOriginOffsetInPixels();A=Et.difference(A,F),A.scale(1/t.scale),$.moveBy(A.x,A.y),t.rendered&&($.initSvg(),$.render(),$.select())},T},Ia=function(t,r,T,$,A,F){const z=F.scrollbar&&F.scrollbar.canScrollVertically();return t.horizontal===ln.LEFT?(T=A.absoluteMetrics.left+T,z&&F.RTL&&(T+=ue.scrollbarThickness)):(T=A.absoluteMetrics.left+A.viewMetrics.width-r.width-T,z&&!F.RTL&&(T-=ue.scrollbarThickness)),t.vertical===_i.TOP?t=A.absoluteMetrics.top+$:(t=A.absoluteMetrics.top+A.viewMetrics.height-r.height-$,F.scrollbar&&F.scrollbar.canScrollHorizontally()&&(t-=ue.scrollbarThickness)),new de(t,t+r.height,T,T+r.width)},Oa=function(t,r){return{horizontal:r.toolboxMetrics.position===Ft.LEFT||t.horizontalLayout&&!t.RTL?ln.RIGHT:ln.LEFT,vertical:r.toolboxMetrics.position===Ft.BOTTOM?_i.TOP:_i.BOTTOM}},Aa=function(t,r,T,$){const A=t.left,F=t.right-t.left,z=t.bottom-t.top;for(let q=0;q<$.length;q++){const ct=$[q];t.intersects(ct)&&(t=T===hs.UP?ct.top-z-r:ct.bottom+r,t=new de(t,t+z,A,A+F),q=-1)}return t},Ku=function(){te.registry.register({name:Ni.ESCAPE,preconditionFn(t){return!t.options.readOnly},callback(t){return t.hideChaff(),!0},keyCodes:[Rt.ESC]})},ju=function(){te.registry.register({name:Ni.DELETE,preconditionFn(t){const r=L();return!t.options.readOnly&&r!=null&&r.isDeletable()},callback(t,r){return r.preventDefault(),bi.inProgress()?!1:(L().checkAndDelete(),!0)},keyCodes:[Rt.DELETE,Rt.BACKSPACE]})},_u=function(){const t=te.registry.createSerializedKey(Rt.C,[Rt.CTRL]),r=te.registry.createSerializedKey(Rt.C,[Rt.ALT]),T=te.registry.createSerializedKey(Rt.C,[Rt.META]);te.registry.register({name:Ni.COPY,preconditionFn($){const A=L();return!$.options.readOnly&&!bi.inProgress()&&A!=null&&A.isDeletable()&&A.isMovable()},callback($,A){return A.preventDefault(),$.hideChaff(),On(L()),!0},keyCodes:[t,r,T]})},Ju=function(){const t=te.registry.createSerializedKey(Rt.X,[Rt.CTRL]),r=te.registry.createSerializedKey(Rt.X,[Rt.ALT]),T=te.registry.createSerializedKey(Rt.X,[Rt.META]);te.registry.register({name:Ni.CUT,preconditionFn($){const A=L();return!$.options.readOnly&&!bi.inProgress()&&A!=null&&A instanceof li&&A.isDeletable()&&A.isMovable()&&!A.workspace.isFlyout},callback(){const $=L();return $?(On($),$.checkAndDelete(),!0):!1},keyCodes:[t,r,T]})},Zu=function(){const t=te.registry.createSerializedKey(Rt.V,[Rt.CTRL]),r=te.registry.createSerializedKey(Rt.V,[Rt.ALT]),T=te.registry.createSerializedKey(Rt.V,[Rt.META]);te.registry.register({name:Ni.PASTE,preconditionFn($){return!$.options.readOnly&&!bi.inProgress()},callback(){return!!$a()},keyCodes:[t,r,T]})},Qu=function(){const t=te.registry.createSerializedKey(Rt.Z,[Rt.CTRL]),r=te.registry.createSerializedKey(Rt.Z,[Rt.ALT]),T=te.registry.createSerializedKey(Rt.Z,[Rt.META]);te.registry.register({name:Ni.UNDO,preconditionFn($){return!$.options.readOnly&&!bi.inProgress()},callback($){return $.hideChaff(),$.undo(!1),!0},keyCodes:[t,r,T]})},qu=function(){const t=te.registry.createSerializedKey(Rt.Z,[Rt.SHIFT,Rt.CTRL]),r=te.registry.createSerializedKey(Rt.Z,[Rt.SHIFT,Rt.ALT]),T=te.registry.createSerializedKey(Rt.Z,[Rt.SHIFT,Rt.META]),$=te.registry.createSerializedKey(Rt.Y,[Rt.CTRL]);te.registry.register({name:Ni.REDO,preconditionFn(A){return!bi.inProgress()&&!A.options.readOnly},callback(A){return A.hideChaff(),A.undo(!0),!0},keyCodes:[t,r,T,$]})},tc=function(){Ku(),ju(),_u(),Ju(),Zu(),Qu(),qu()},Hs=function(t){return t.startPublishing!==void 0&&t.stopPublishing!==void 0},$g=function(t){return t.doProcedureUpdate!==void 0},is=function(t){for(const r of t.getAllBlocks(!1))$g(r)&&r.doProcedureUpdate()},La=function(t){const r=t.getBlocksByType("procedures_defnoreturn",!1).map(function(T){return T.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(T){return T.getProcedureDef()}),r.sort(ec),t.sort(ec),[r,t]},ec=function(t,r){return t[0].localeCompare(r[0],void 0,{sensitivity:"base"})},ic=function(t,r){if(r.isInFlyout)return t;for(t=t||bt.UNNAMED_KEY||"unnamed";!Ig(t,r.workspace,r);){const T=t.match(/^(.*?)(\d+)$/);t=T?T[1]+(parseInt(T[2])+1):t+"2"}return t},Ig=function(t,r,T){return!sc(t,r,T)},sc=function(t,r,T){r=r.getAllBlocks(!1);for(let A=0;A<r.length;A++)if(r[A]!==T){var $=r[A];if($.getProcedureDef&&($=$.getProcedureDef(),hi.equals($[0],t)))return!0}return!1},Og=function(t){var r=this.getSourceBlock();if(!r)throw new me;t=t.trim();const T=ic(t,r),$=this.getValue();if($!==t&&$!==T)for(t=r.workspace.getAllBlocks(!1),r=0;r<t.length;r++){const A=t[r];A.renameProcedure&&A.renameProcedure($,T)}return T},Ma=function(t){function r(F,z){for(let ct=0;ct<F.length;ct++){var q=F[ct][0];const xt=F[ct][1],Yt=qt("block");Yt.setAttribute("type",z),Yt.setAttribute("gap","16");const le=qt("mutation");for(le.setAttribute("name",q),Yt.appendChild(le),q=0;q<xt.length;q++){const ii=qt("arg");ii.setAttribute("name",xt[q]),le.appendChild(ii)}T.push(Yt)}}const T=[];if(Xe.procedures_defnoreturn){var $=qt("block");$.setAttribute("type","procedures_defnoreturn"),$.setAttribute("gap","16");var A=qt("field");A.setAttribute("name","NAME"),A.appendChild(ts(bt.PROCEDURES_DEFNORETURN_PROCEDURE)),$.appendChild(A),T.push($)}return Xe.procedures_defreturn&&($=qt("block"),$.setAttribute("type","procedures_defreturn"),$.setAttribute("gap","16"),A=qt("field"),A.setAttribute("name","NAME"),A.appendChild(ts(bt.PROCEDURES_DEFRETURN_PROCEDURE)),$.appendChild(A),T.push($)),Xe.procedures_ifreturn&&($=qt("block"),$.setAttribute("type","procedures_ifreturn"),$.setAttribute("gap","16"),T.push($)),T.length&&T[T.length-1].setAttribute("gap","24"),t=La(t),r(t[0],"procedures_callnoreturn"),r(t[1],"procedures_callreturn"),T},nc=function(t){var r=[],T=t.getBlocksByType("procedures_mutatorarg",!1);for(let F=0,z;z=T[F];F++)r.push(z.getFieldValue("NAME"));T=qt("xml");const $=qt("block");$.setAttribute("type","procedures_mutatorarg");const A=qt("field");A.setAttribute("name","NAME"),r=ia(Vl,r),r=ts(r),A.appendChild(r),$.appendChild(A),T.appendChild($),t.updateToolbox(T)},rc=function(t){if(t.type===Xi&&t.bubbleType==="mutator"&&t.isOpen&&t.blockId){t=y(t.workspaceId).getBlockById(t.blockId);var r=t.type;(r==="procedures_defnoreturn"||r==="procedures_defreturn")&&(t=t.mutator.getWorkspace(),nc(t),t.addChangeListener(Ag))}},Ag=function(t){(t.type===Le||t.type===Pi||t.type===Re)&&(t=y(t.workspaceId),nc(t))},oc=function(t,r){const T=[];r=r.getAllBlocks(!1);for(let A=0;A<r.length;A++){var $=r[A];$.getProcedureCall&&($=$.getProcedureCall())&&hi.equals($,t)&&T.push(r[A])}return T},Lg=function(t){const r=ci();var T=t.getProcedureDef()[0];const $=t.mutationToDom(!0);t=oc(T,t.workspace);for(let F=0,z;z=t[F];F++){T=(T=z.mutationToDom())&&ri(T),z.domToMutation&&z.domToMutation($);var A=z.mutationToDom();A=A&&ri(A),T!==A&&(_e(!1),It(new(Ot(Re))(z,"mutation",null,T,A)),_e(r))}},Mg=function(t,r){r=r.getAllBlocks(!1);for(let $=0;$<r.length;$++){var T=r[$];if(T.getProcedureDef&&(T=T.getProcedureDef())&&hi.equals(T[0],t))return r[$]}return null},ac=function(t){return t.isDynamic},Wr=function(){return kd},Pg=function(){R("Blockly.blockRendering.debug.stopDebugger()","version 8","version 10","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),kd=!1},An=function(t,r){Ut(gt.RENDERER,t,r)},Dg=function(t){yr(gt.RENDERER,t)},bg=function(){R("Blockly.blockRendering.stopDebugger()","September 2021","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),Pg()},lc=function(t,r,T){return t=new(ws(gt.RENDERER,t))(t),t.init(r,T),t},hc=function(t){Sn(t.getTargetWorkspace(),void 0,"String")},uc=function(t){Sn(t.getTargetWorkspace(),void 0,"Number")},cc=function(t){Sn(t.getTargetWorkspace(),void 0,"Colour")},Pa=function(t){let r=[],T=document.createElement("button");return T.setAttribute("text",bt.NEW_STRING_VARIABLE),T.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),r.push(T),T=document.createElement("button"),T.setAttribute("text",bt.NEW_NUMBER_VARIABLE),T.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),r.push(T),T=document.createElement("button"),T.setAttribute("text",bt.NEW_COLOUR_VARIABLE),T.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),r.push(T),t.registerButtonCallback("CREATE_VARIABLE_STRING",hc),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",uc),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",cc),t=dc(t),r=r.concat(t)},dc=function(t){t=t.getAllVariables();const r=[];if(0<t.length){if(Xe.variables_set_dynamic){var T=t[t.length-1];const $=qt("block");$.setAttribute("type","variables_set_dynamic"),$.setAttribute("gap","24"),$.appendChild(Bs(T)),r.push($)}if(Xe.variables_get_dynamic){t.sort(kn.compareByName);for(let $=0,A;A=t[$];$++)T=qt("block"),T.setAttribute("type","variables_get_dynamic"),T.setAttribute("gap","8"),T.appendChild(Bs(A)),r.push(T)}}return r},Ng=function(t){t.resizeContents()},wg=function(t){const r=Object.create(null),T=_o(gt.SERIALIZER,!0);for(const $ in T){let A;const F=(A=T[$])==null?void 0:A.save(t);F&&(r[$]=F)}return r},Bg=function(t,r,{recordUndo:T=!1}={}){var $=_o(gt.SERIALIZER,!0);if($){$=Object.entries($).sort((F,z)=>z[1].priority-F[1].priority);var A=ci();_e(T),(T=oe())||Pt(!0),ht(),r instanceof Ci&&r.setResizesEnabled(!1);for(const[,F]of $.reverse()){let z;(z=F)==null||z.clear(r)}for(let[F,z]of $.reverse())if(t[F]){let q;(q=z)==null||q.load(t[F],r)}r instanceof Ci&&r.setResizesEnabled(!0),ut(),It(new(Ot(Zs))(r)),Pt(T),_e(A)}},Da=function(t){const r={id:t.getId(),name:t.getName(),returnTypes:t.getReturnTypes()};return t.getParameters().length&&(r.parameters=t.getParameters().map(T=>ba(T))),r},ba=function(t){const r={id:t.getId(),name:t.getName()};return t.getTypes().length&&(r.types=t.getTypes()),r},Na=function(t,r,T,$){if(t=new t($,T.name,T.id).setReturnTypes(T.returnTypes),!T.parameters)return t;for(const[A,F]of T.parameters.entries())t.insertParameter(wa(r,F,$),A);return t},wa=function(t,r,T){return t=new t(T,r.name,r.id),r.types&&t.setTypes(r.types),t},Xr=function(t,r,T){const $=T.getBoundingRectangle(),A=$.right-$.left,F=vt(r.top,$.top,r.top+r.height-($.bottom-$.top))-$.top;let z=r.left;return r=r.left+r.width-A,t.RTL?z=Math.min(r,z):r=Math.max(z,r),(t=vt(z,$.left,r)-$.left)||F?(T.moveBy(t,F),!0):!1},fc=function(t){return r=>{var T=t.getMetricsManager();if(T.hasFixedEdges()&&!t.isDragging()){var $;if(Qa.indexOf(($=r.type)!=null?$:"")!==-1){$=T.getScrollMetrics(!0);const A=Fg(t,r);A&&(T=oe(),Pt(r.group),Xr(t,$,A)&&!r.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),T!==null&&Pt(T))}else r.type===Cs&&r.scale&&r.oldScale&&r.scale>r.oldScale&&Ba(t)}}},Fg=function(t,r){let T=null;switch(r.type){case Le:case Fe:(T=t.getBlockById(r.blockId))&&(T=T.getRootBlock());break;case Rs:case Yi:T=t.getCommentById(r.commentId)}return T},Ba=function(t){var r=t.getMetricsManager();if(r.hasFixedEdges()&&!t.isDragging()){r=r.getScrollMetrics(!0);var T=t.getTopBoundedElements();for(let $=0,A;A=T[$];$++)Xr(t,r,A)}},Gg=function(t,r){if(typeof t=="string"&&(t=document.getElementById(t)||document.querySelector(t)),!t||!st(document,t))throw Error("Error: container is not in current document.");r=new yi(r||{});const T=document.createElement("div");T.className="injectionDiv",T.tabIndex=0,he(T,re.LABEL,bt.WORKSPACE_ARIA_LABEL),t.appendChild(T),t=Ug(T,r);const $=new Sf(T),A=new yf(T),F=kg(t,r,$,A);return Hg(F),M(F),U(F),T.addEventListener("focusin",function(){M(F)}),F},Ug=function(t,r){t.setAttribute("dir","LTR"),su(r.hasCss,r.pathToMedia),t=N(nt.SVG,{xmlns:Xs,"xmlns:html":pi,"xmlns:xlink":Ye,version:"1.1",class:"blocklySvg",tabindex:"0"},t);const T=N(nt.DEFS,{},t),$=String(Math.random()).substring(2);return r.gridPattern=Hl.createDom($,r.gridOptions,T),t},kg=function(t,r,T,$){r.parentWorkspace=null,r=new Ci(r,T,$),T=r.options,r.scale=T.zoomOptions.startScale,t.appendChild(r.createDom("blocklyMainBackground")),$=r.getInjectionDiv();var A=r.getRenderer().getClassName();return A&&G($,A),(A=r.getTheme().getClassName())&&G($,A),!T.hasCategories&&T.languageTree&&($=r.addFlyout(nt.SVG),tt($,t)),T.hasTrashcan&&r.addTrashcan(),T.zoomOptions&&T.zoomOptions.controls&&r.addZoomControls(),r.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),r.translate(0,0),r.addChangeListener(fc(r)),U(r),Cu(),ye(),gu(),r},Hg=function(t){const r=t.options;var T=t.getParentSvg();if(u(T.parentNode,"contextmenu",null,function($){v($)||$.preventDefault()}),T=u(window,"resize",null,function(){t.hideChaff(!0),U(t),Ba(t)}),t.setResizeHandlerWrapper(T),Wg(),r.languageTree){T=t.getToolbox();const $=t.getFlyout(!0);T?T.init():$&&($.init(t),$.show(r.languageTree),typeof $.scrollToStart=="function"&&$.scrollToStart())}r.hasTrashcan&&t.trashcan.init(),r.zoomOptions&&r.zoomOptions.controls&&t.zoomControls_.init(),r.moveOptions&&r.moveOptions.scrollbars?(t.scrollbar=new sh(t,r.moveOptions.scrollbars===!0||!!r.moveOptions.scrollbars.horizontal,r.moveOptions.scrollbars===!0||!!r.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),r.hasSounds&&Xg(r.pathToMedia,t)},Vg=function(t){const r=O();r&&!(v(t)||r.rendered&&!r.isVisible())&&te.registry.onKeyDown(r,t)},Wg=function(){Cf||(u(document,"scroll",null,function(){const t=S();for(let r=0,T;T=t[r];r++)T instanceof Ci&&T.updateInverseScreenCTM()}),u(document,"keydown",null,Vg),f(document,"touchend",null,o),f(document,"touchcancel",null,o),Vs&&u(window,"orientationchange",document,function(){U(O())})),Cf=!0},Xg=function(t,r){function T(){for(;A.length;)p(A.pop());$.preload()}const $=r.getAudioManager();$.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),$.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),$.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");const A=[];A.push(u(document,"pointermove",null,T,!0)),A.push(u(document,"touchstart",null,T,!0))},pc=function(t,r,T){if(t=t.getProcedureMap().get(r),!t)throw Error("Cannot rename the parameter of a procedure that does not exist in the procedure map");return t.getParameters().find($=>$.getId()===T)},vc=function(){Zt.registry.register({displayText(){return bt.UNDO},preconditionFn(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback(t){t.workspace.undo(!1)},scopeType:Zt.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},gc=function(){Zt.registry.register({displayText(){return bt.REDO},preconditionFn(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback(t){t.workspace.undo(!0)},scopeType:Zt.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},mc=function(){Zt.registry.register({displayText(){return bt.CLEAN_UP},preconditionFn(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(t){t.workspace.cleanUp()},scopeType:Zt.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Tc=function(t,r){function T(F){A--,F.setCollapsed(t),A===0&&Pt(!1)}let $=0,A=0;Pt(!0);for(let F=0;F<r.length;F++){let z=r[F];for(;z;)A++,setTimeout(T.bind(null,z),$),z=z.getNextBlock(),$+=10}},Ec=function(){Zt.registry.register({displayText(){return bt.COLLAPSE_ALL},preconditionFn(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(let r=0;r<t.length;r++){let T=t[r];for(;T;){if(!T.isCollapsed())return"enabled";T=T.getNextBlock()}}return"disabled"}return"hidden"},callback(t){Tc(!0,t.workspace.getTopBlocks(!0))},scopeType:Zt.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},xc=function(){Zt.registry.register({displayText(){return bt.EXPAND_ALL},preconditionFn(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(let r=0;r<t.length;r++){let T=t[r];for(;T;){if(T.isCollapsed())return"enabled";T=T.getNextBlock()}}return"disabled"}return"hidden"},callback(t){Tc(!1,t.workspace.getTopBlocks(!0))},scopeType:Zt.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},yc=function(t,r){if(t.isDeletable())Array.prototype.push.apply(r,t.getDescendants(!1));else{t=t.getChildren(!1);for(let T=0;T<t.length;T++)yc(t[T],r)}},Fa=function(t){const r=[];t=t.getTopBlocks(!0);for(let T=0;T<t.length;T++)yc(t[T],r);return r},Yr=function(t,r){Pt(r);const T=t.shift();T&&(T.isDeadOrDying()?Yr(t,r):(T.dispose(!1,!0),setTimeout(Yr,10,t,r))),Pt(!1)},Sc=function(){Zt.registry.register({displayText(t){return t.workspace?(t=Fa(t.workspace).length,t===1?bt.DELETE_BLOCK:bt.DELETE_X_BLOCKS.replace("%1",String(t))):""},preconditionFn(t){return t.workspace&&0<Fa(t.workspace).length?"enabled":"disabled"},callback(t){if(t.workspace){t.workspace.cancelCurrentGesture();var r=Fa(t.workspace),T=ui();2>r.length?Yr(r,T):Qo(bt.DELETE_ALL_BLOCKS.replace("%1",String(r.length)),function($){$&&Yr(r,T)})}},scopeType:Zt.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Yg=function(){vc(),gc(),mc(),Ec(),xc(),Sc()},Cc=function(){Zt.registry.register({displayText(){return bt.DUPLICATE_BLOCK},preconditionFn(t){return t=t.block,!t.isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback(t){t.block&&kr(t.block)},scopeType:Zt.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},Rc=function(){Zt.registry.register({displayText(t){return t.block.getCommentIcon()?bt.REMOVE_COMMENT:bt.ADD_COMMENT},preconditionFn(t){return t=t.block,!t.isInFlyout&&t.workspace.options.comments&&!t.isCollapsed()&&t.isEditable()?"enabled":"hidden"},callback(t){t=t.block,t.getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:Zt.ScopeType.BLOCK,id:"blockComment",weight:2})},$c=function(){Zt.registry.register({displayText(t){return t.block.getInputsInline()?bt.EXTERNAL_INPUTS:bt.INLINE_INPUTS},preconditionFn(t){if(t=t.block,!t.isInFlyout&&t.isMovable()&&!t.isCollapsed()){for(let r=1;r<t.inputList.length;r++)if(t.inputList[r-1].type!==kt.STATEMENT&&t.inputList[r].type!==kt.STATEMENT)return"enabled"}return"hidden"},callback(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:Zt.ScopeType.BLOCK,id:"blockInline",weight:3})},Ic=function(){Zt.registry.register({displayText(t){return t.block.isCollapsed()?bt.EXPAND_BLOCK:bt.COLLAPSE_BLOCK},preconditionFn(t){return t=t.block,!t.isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:Zt.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Oc=function(){Zt.registry.register({displayText(t){return t.block.isEnabled()?bt.DISABLE_BLOCK:bt.ENABLE_BLOCK},preconditionFn(t){return t=t.block,!t.isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(t){t=t.block;const r=oe();r||Pt(!0),t.setEnabled(!t.isEnabled()),r||Pt(!1)},scopeType:Zt.ScopeType.BLOCK,id:"blockDisable",weight:5})},Ac=function(){Zt.registry.register({displayText(t){var r=t.block;return t=r.getDescendants(!1).length,(r=r.getNextBlock())&&(t-=r.getDescendants(!1).length),t===1?bt.DELETE_BLOCK:bt.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback(t){t.block&&t.block.checkAndDelete()},scopeType:Zt.ScopeType.BLOCK,id:"blockDelete",weight:6})},Lc=function(){Zt.registry.register({displayText(){return bt.HELP},preconditionFn(t){return t=t.block,(typeof t.helpUrl=="function"?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback(t){t.block.showHelp()},scopeType:Zt.ScopeType.BLOCK,id:"blockHelp",weight:7})},zg=function(){Cc(),Rc(),$c(),Ic(),Oc(),Ac(),Lc()},Mc=function(){Yg(),zg()},Kg=function(t){const r=[];t=t.getDescendants(!1);for(let T=0,$;$=t[T];T++){const A=$.getIcons();for(let F=0;F<A.length;F++){const z={location:A[F].getIconLocation(),icon:A[F]};r.push(z)}}return r},jg=function(t){O().hideChaff(t)},_g=function(t){R("Blockly.resizeSvgContents","December 2021","December 2022","Blockly.WorkspaceSvg.resizeSvgContents"),Ng(t)},Jg=function(t){R("Blockly.copy","December 2021","December 2022","Blockly.clipboard.copy"),On(t)},Zg=function(){return R("Blockly.paste","December 2021","December 2022","Blockly.clipboard.paste"),!!$a()},Qg=function(t){R("Blockly.duplicate","December 2021","December 2022","Blockly.clipboard.duplicate"),kr(t)},qg=function(t){return R("Blockly.isNumber","December 2021","December 2022","Blockly.utils.string.isNumber"),pu(t)},tm=function(t){return R("Blockly.hueToHex","December 2021","December 2022","Blockly.utils.colour.hueToHex"),ca(t)},em=function(t,r,T,$){return R("Blockly.bindEvent_","December 2021","December 2022","Blockly.browserEvents.bind"),f(t,r,T,$)},im=function(t){return R("Blockly.unbindEvent_","December 2021","December 2022","Blockly.browserEvents.unbind"),p(t)},sm=function(t,r,T,$,A,F){return R("Blockly.bindEventWithChecks_","December 2021","December 2022","Blockly.browserEvents.conditionalBind"),u(t,r,T,$,A)},Mt=Mt||{};Mt.scope={},Mt.ASSUME_ES5=!1,Mt.ASSUME_NO_NATIVE_MAP=!1,Mt.ASSUME_NO_NATIVE_SET=!1,Mt.SIMPLE_FROUND_POLYFILL=!1,Mt.ISOLATE_POLYFILLS=!1,Mt.FORCE_POLYFILL_PROMISE=!1,Mt.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,Mt.defineProperty=Mt.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(t,r,T){return t==Array.prototype||t==Object.prototype||(t[r]=T.value),t},Mt.getGlobal=function(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof je=="object"&&je];for(var r=0;r<t.length;++r){var T=t[r];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")},Mt.global=Mt.getGlobal(this),Mt.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",Mt.TRUST_ES6_POLYFILLS=!Mt.ISOLATE_POLYFILLS||Mt.IS_SYMBOL_NATIVE,Mt.polyfills={},Mt.propertyToPolyfillSymbol={},Mt.POLYFILL_PREFIX="$jscp$",Mt.polyfill=function(t,r,T,$){r&&(Mt.ISOLATE_POLYFILLS?Mt.polyfillIsolated(t,r,T,$):Mt.polyfillUnisolated(t,r,T,$))},Mt.polyfillUnisolated=function(t,r,T,$){for(T=Mt.global,t=t.split("."),$=0;$<t.length-1;$++){var A=t[$];if(!(A in T))return;T=T[A]}t=t[t.length-1],$=T[t],r=r($),r!=$&&r!=null&&Mt.defineProperty(T,t,{configurable:!0,writable:!0,value:r})},Mt.polyfillIsolated=function(t,r,T,$){var A=t.split(".");t=A.length===1,$=A[0],$=!t&&$ in Mt.polyfills?Mt.polyfills:Mt.global;for(var F=0;F<A.length-1;F++){var z=A[F];if(!(z in $))return;$=$[z]}A=A[A.length-1],T=Mt.IS_SYMBOL_NATIVE&&T==="es6"?$[A]:null,r=r(T),r!=null&&(t?Mt.defineProperty(Mt.polyfills,A,{configurable:!0,writable:!0,value:r}):r!==T&&(Mt.propertyToPolyfillSymbol[A]===void 0&&(T=1e9*Math.random()>>>0,Mt.propertyToPolyfillSymbol[A]=Mt.IS_SYMBOL_NATIVE?Mt.global.Symbol(A):Mt.POLYFILL_PREFIX+T+"$"+A),Mt.defineProperty($,Mt.propertyToPolyfillSymbol[A],{configurable:!0,writable:!0,value:r})))},Mt.polyfill("globalThis",function(t){return t||Mt.global},"es_2020","es3"),Mt.polyfill("Object.getOwnPropertyDescriptors",function(t){return t||function(r){for(var T={},$=Reflect.ownKeys(r),A=0;A<$.length;A++)T[$[A]]=Object.getOwnPropertyDescriptor(r,$[A]);return T}},"es8","es5"),Mt.arrayIteratorImpl=function(t){var r=0;return function(){return r<t.length?{done:!1,value:t[r++]}:{done:!0}}},Mt.arrayIterator=function(t){return{next:Mt.arrayIteratorImpl(t)}},Mt.initSymbol=function(){},Mt.iteratorPrototype=function(t){return t={next:t},t[Symbol.iterator]=function(){return this},t},Mt.iteratorFromArray=function(t,r){t instanceof String&&(t+="");var T=0,$=!1,A={next:function(){if(!$&&T<t.length){var F=T++;return{value:r(F,t[F]),done:!1}}return $=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A},Mt.polyfill("Array.prototype.values",function(t){return t||function(){return Mt.iteratorFromArray(this,function(r,T){return T})}},"es8","es3"),Mt.owns=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},Mt.polyfill("Object.values",function(t){return t||function(r){var T=[],$;for($ in r)Mt.owns(r,$)&&T.push(r[$]);return T}},"es8","es3"),Mt.polyfill("Array.prototype.flat",function(t){return t||function(r){r=r===void 0?1:r;for(var T=[],$=0;$<this.length;$++){var A=this[$];Array.isArray(A)&&0<r?(A=Array.prototype.flat.call(A,r-1),T.push.apply(T,A)):T.push(A)}return T}},"es9","es5"),Mt.polyfill("Object.entries",function(t){return t||function(r){var T=[],$;for($ in r)Mt.owns(r,$)&&T.push([$,r[$]]);return T}},"es8","es3");var We=We||{};We.global=globalThis||root,We.define=function(t,r){return r},We.DEBUG=!1,We.DISALLOW_TEST_ONLY_CODE=!We.DEBUG,We.provide=function(t){},We.module=function(t){},We.module.get=function(t){},We.module.declareLegacyNamespace=function(){},We.setTestOnly=function(t){if(We.DISALLOW_TEST_ONLY_CODE)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},We.require=function(t){},We.requireType=function(t){};var Ce={};Ce.warn=R;var nm=750,Pc="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),zr=null,Ts={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Kr=0,Ze={};Ze.TOUCH_ENABLED=Pc,Ze.TOUCH_MAP=Ts,Ze.checkTouchIdentifier=i,Ze.clearTouchIdentifier=g,Ze.getTouchIdentifierFromEvent=h,Ze.isMouseOrTouchEvent=n,Ze.isTouchEvent=d,Ze.longStart=e,Ze.longStop=o,Ze.setClientFromTouch=s,Ze.shouldHandleEvent=l,Ze.splitEventByTouches=a;var Ga,Dc,bc,Nc,jr,_r,Ua,wc,Bc,Fc;(function(t){function r($){return T.indexOf($.toUpperCase())!==-1}Ga=t;const T=Ga.toUpperCase();Dc=r("JavaFX"),bc=r("WebKit"),Nc=r("Gecko")&&!bc,jr=r("Android"),t=globalThis.navigator&&globalThis.navigator.maxTouchPoints,_r=r("iPad")||r("Macintosh")&&0<t,Ua=r("iPhone")&&!_r,wc=r("Macintosh"),Bc=_r||jr&&!r("Mobile")||r("Silk"),Fc=!Bc&&(Ua||jr)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var rm=Ga,Gc=Dc,ka=Nc,Jr=jr,Vs=_r,Uc=Ua,Ha=wc,Va=Fc,Hi={};Hi.ANDROID=Jr,Hi.GECKO=ka,Hi.IPAD=Vs,Hi.IPHONE=Uc,Hi.JavaFx=Gc,Hi.MAC=Ha,Hi.MOBILE=Va,Hi.raw=rm;var kc=40,Hc=125,Vi={};Vi.bind=f,Vi.conditionalBind=u,Vi.getScrollDeltaPixels=x,Vi.isRightButton=m,Vi.isTargetInput=v,Vi.mouseToSvg=E,Vi.unbind=p;var Xe=Object.create(null),Ws,Vc,Wa,Wc,Es,Xa;Ws=Object.create(null),Wa=null,Es=[],Xa={defineBlocksWithJsonArrayInternal:_},c.module$build$src$core$common={},c.module$build$src$core$common.TEST_ONLY=Xa,c.module$build$src$core$common.createBlockDefinitionsFromJsonArray=w,c.module$build$src$core$common.defineBlocks=D,c.module$build$src$core$common.defineBlocksWithJsonArray=j,c.module$build$src$core$common.draggingConnections=Es,c.module$build$src$core$common.getAllWorkspaces=S,c.module$build$src$core$common.getBlockTypeCounts=H,c.module$build$src$core$common.getMainWorkspace=O,c.module$build$src$core$common.getParentContainer=b,c.module$build$src$core$common.getSelected=L,c.module$build$src$core$common.getWorkspaceById=y,c.module$build$src$core$common.registerWorkspace=C,c.module$build$src$core$common.setMainWorkspace=M,c.module$build$src$core$common.setParentContainer=B,c.module$build$src$core$common.setSelected=P,c.module$build$src$core$common.svgResize=U,c.module$build$src$core$common.unregisterWorkpace=I;var Xs="http://www.w3.org/2000/svg",pi="http://www.w3.org/1999/xhtml",Ye="http://www.w3.org/1999/xlink",Li;(function(t){t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE",t[t.DOCUMENT_POSITION_CONTAINED_BY=16]="DOCUMENT_POSITION_CONTAINED_BY"})(Li||(Li={}));var vi=null,Ya=0,Zr=null,xe={};xe.HTML_NS=pi,xe.NodeType=Li,xe.SVG_NS=Xs,xe.XLINK_NS=Ye,xe.addClass=G,xe.containsNode=st,xe.createSvgElement=N,xe.getFastTextWidth=pt,xe.getFastTextWidthWithSizeString=Tt,xe.getTextWidth=mt,xe.hasClass=X,xe.insertAfter=tt,xe.measureFontMetrics=Nt,xe.removeClass=V,xe.removeClasses=k,xe.removeNode=K,xe.setCssTransform=rt,xe.startTextWidthCache=ht,xe.stopTextWidthCache=ut;var Qr={};Qr.clamp=vt,Qr.toDegrees=$t,Qr.toRadians=Ct;var de=class{constructor(t,r,T,$){this.top=t,this.bottom=r,this.left=T,this.right=$}contains(t,r){return t>=this.left&&t<=this.right&&r>=this.top&&r<=this.bottom}intersects(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)}},Et=class{constructor(t,r){this.x=t,this.y=r}clone(){return new Et(this.x,this.y)}scale(t){return this.x*=t,this.y*=t,this}translate(t,r){return this.x+=t,this.y+=r,this}static equals(t,r){return t===r?!0:t&&r?t.x===r.x&&t.y===r.y:!1}static distance(t,r){const T=t.x-r.x;return t=t.y-r.y,Math.sqrt(T*T+t*t)}static magnitude(t){return Math.sqrt(t.x*t.x+t.y*t.y)}static difference(t,r){return new Et(t.x-r.x,t.y-r.y)}static sum(t,r){return new Et(t.x+r.x,t.y+r.y)}},Ie=class{constructor(t,r){this.width=t,this.height=r}static equals(t,r){return t===r?!0:t&&r?t.width===r.width&&t.height===r.height:!1}},Xc={getSizeInternal:At},Mi={};Mi.TEST_ONLY=Xc,Mi.getBorderBox=ee,Mi.getCascadedStyle=$e,Mi.getComputedStyle=se,Mi.getContainerOffsetToScrollInto=ie,Mi.getPageOffset=zt,Mi.getSize=Ht,Mi.getViewportPageOffset=Bt,Mi.scrollIntoContainerView=ft;var Ln=16,za=1,Yc=12,Ka=16,qr=.25,ja=null,xs=null,Ys="",zs="",_t,Ks,ys,_a=null,ss=null,zc=null,Ja={getBoundsInfo:function(){const t=zt(_a),r=Ht(_a);return{left:t.x,right:t.x+r.width,top:t.y,bottom:t.y+r.height,width:r.width,height:r.height}},getPositionMetrics:function(t,r,T,$){const A=Ja.getBoundsInfo(),F=Ht(_t);return r+F.height<A.bottom?Wh(t,r,A,F):$-F.height>A.top?Xh(T,$,A,F):r+F.height<document.documentElement.clientHeight?Wh(t,r,A,F):$-F.height>document.documentElement.clientTop?Xh(T,$,A,F):xp(t,A,F)}},fe={};fe.ANIMATION_TIME=qr,fe.ARROW_HORIZONTAL_PADDING=Yc,fe.ARROW_SIZE=Ln,fe.BORDER_SIZE=za,fe.PADDING_Y=Ka,fe.TEST_ONLY=Ja,fe.clearContent=ne,fe.createDom=ye,fe.getContentDiv=De,fe.getOwner=He,fe.getPositionX=xr,fe.hide=jo,fe.hideIfOwner=xn,fe.hideWithoutAnimation=Ii,fe.isVisible=Yh,fe.repositionForWindowResize=yp,fe.setBoundsElement=Ae,fe.setColour=W,fe.show=fs,fe.showPositionedByBlock=Z,fe.showPositionedByField=it;var ns=Object.create(null),om={typeMap:ns},to=Object.create(null),Wi="default",gt=class{constructor(t){this.name=t}toString(){return this.name}};gt.CONNECTION_CHECKER=new gt("connectionChecker"),gt.CURSOR=new gt("cursor"),gt.EVENT=new gt("event"),gt.FIELD=new gt("field"),gt.RENDERER=new gt("renderer"),gt.TOOLBOX=new gt("toolbox"),gt.THEME=new gt("theme"),gt.TOOLBOX_ITEM=new gt("toolboxItem"),gt.FLYOUTS_VERTICAL_TOOLBOX=new gt("flyoutsVerticalToolbox"),gt.FLYOUTS_HORIZONTAL_TOOLBOX=new gt("flyoutsHorizontalToolbox"),gt.METRICS_MANAGER=new gt("metricsManager"),gt.BLOCK_DRAGGER=new gt("blockDragger"),gt.SERIALIZER=new gt("serializer");var gi={};gi.DEFAULT=Wi,gi.TEST_ONLY=om,gi.Type=gt,gi.getAllItems=_o,gi.getClass=ws,gi.getClassFromOptions=ni,gi.getObject=Sr,gi.hasItem=jh,gi.register=Ut,gi.unregister=yr;var Kc="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",jc={genUid:()=>{const t=Kc.length,r=[];for(let T=0;20>T;T++)r[T]=Kc.charAt(Math.random()*t);return r.join("")}},am=0,eo={};eo.TEST_ONLY=jc,eo.genUid=ui,eo.getNextUniqueId=yn;var _c="",Mn=!0,Za=0,Le="create",Pi="delete",Re="change",Fe="move",Ss="var_create",js="var_delete",Pn="var_rename",Dn="ui",_s="drag",rs="selected",os="click",bn="marker_move",Xi="bubble_open",Nn="trashcan_open",wn="toolbox_item_select",Bn="theme_change",Cs="viewport_change",Rs="comment_create",Js="comment_delete",Fn="comment_change",Yi="comment_move",Zs="finished_loading",io="procedure_create",Gn="procedure_delete",so="procedure_rename",no="procedure_enable",ro="procedure_change_return",oo="procedure_parameter_create",ao="procedure_parameter_delete",lo="procedure_parameter_rename",Qa=[Le,Fe,Rs,Yi],Qs=[],qa={FIRE_QUEUE:Qs,fireNow:_h,fireInternal:Cp,setGroupInternal:Rp},wt={};wt.BLOCK_CHANGE=Re,wt.BLOCK_CREATE=Le,wt.BLOCK_DELETE=Pi,wt.BLOCK_DRAG=_s,wt.BLOCK_MOVE=Fe,wt.BUBBLE_OPEN=Xi,wt.BUMP_EVENTS=Qa,wt.CHANGE=Re,wt.CLICK=os,wt.COMMENT_CHANGE=Fn,wt.COMMENT_CREATE=Rs,wt.COMMENT_DELETE=Js,wt.COMMENT_MOVE=Yi,wt.CREATE=Le,wt.DELETE=Pi,wt.FINISHED_LOADING=Zs,wt.MARKER_MOVE=bn,wt.MOVE=Fe,wt.PROCEDURE_CHANGE_RETURN=ro,wt.PROCEDURE_CREATE=io,wt.PROCEDURE_DELETE=Gn,wt.PROCEDURE_ENABLE=no,wt.PROCEDURE_PARAMETER_CREATE=oo,wt.PROCEDURE_PARAMETER_DELETE=ao,wt.PROCEDURE_PARAMETER_RENAME=lo,wt.PROCEDURE_RENAME=so,wt.SELECTED=rs,wt.TEST_ONLY=qa,wt.THEME_CHANGE=Bn,wt.TOOLBOX_ITEM_SELECT=wn,wt.TRASHCAN_OPEN=Nn,wt.UI=Dn,wt.VAR_CREATE=Ss,wt.VAR_DELETE=js,wt.VAR_RENAME=Pn,wt.VIEWPORT_CHANGE=Cs,wt.clearPendingUndo=Jo,wt.disable=Te,wt.disableOrphans=Zo,wt.enable=Ee,wt.filter=Cr,wt.fire=It,wt.fromJson=Jh,wt.get=Ot,wt.getDescendantIds=Rr,wt.getGroup=oe,wt.getRecordUndo=ci,wt.isEnabled=Se,wt.setGroup=Pt,wt.setRecordUndo=_e;var kt;(function(t){t[t.VALUE=1]="VALUE",t[t.STATEMENT=3]="STATEMENT",t[t.DUMMY=5]="DUMMY"})(kt||(kt={})),c.module$build$src$core$input_types={},c.module$build$src$core$input_types.inputTypes=kt;var $s,ho,uo,tl;({document:$s,DOMParser:ho,XMLSerializer:uo}=globalThis),tl="https://developers.google.com/blockly/xml",c.module$build$src$core$utils$xml={},c.module$build$src$core$utils$xml.NAME_SPACE=tl,c.module$build$src$core$utils$xml.createElement=qt,c.module$build$src$core$utils$xml.createTextNode=ts,c.module$build$src$core$utils$xml.domToText=Qh,c.module$build$src$core$utils$xml.getDocument=Op,c.module$build$src$core$utils$xml.injectDependencies=Ip,c.module$build$src$core$utils$xml.setDocument=Ap,c.module$build$src$core$utils$xml.textToDomDocument=Zh;var Jc=function(t,r){window.alert(t),r&&r()},Zc=function(t,r){r(window.confirm(t))},Qc=function(t,r,T){T(window.prompt(t,r))},qc={confirmInternal:Mp},ze={};ze.TEST_ONLY=qc,ze.alert=$r,ze.confirm=Qo,ze.prompt=qo,ze.setAlert=Lp,ze.setConfirm=Pp,ze.setPrompt=Dp;var bt,el;bt=Object.create(null),el=function(t){Object.keys(t).forEach(function(r){bt[r]=t[r]})},c.module$build$src$core$msg={},c.module$build$src$core$msg.Msg=bt,c.module$build$src$core$msg.setLocale=el;var Is=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=oe(),this.recordUndo=ci()}toJson(){return{type:this.type,group:this.group}}fromJson(t){this.isBlank=!1,this.group=t.group||""}static fromJson(t,r,T){return R("Blockly.Events.Abstract.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),T.isBlank=!1,T.group=t.group||"",T.workspaceId=r.id,T}isNull(){return!1}run(t){}getEventWorkspace_(){let t;if(this.workspaceId&&(t=y(this.workspaceId)),!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t}},Un=class extends Is{constructor(t){super(),this.isBlank=typeof t=="undefined",t&&(this.varId=t.getId(),this.workspaceId=t.workspace.id)}toJson(){const t=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return t.varId=this.varId,t}fromJson(t){R("Blockly.Events.VarBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.varId=t.varId}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new Un),r.varId=t.varId,r}},il=class extends Un{constructor(t){super(t),this.type=Ss,t&&(this.varType=t.type,this.varName=t.name)}toJson(){const t=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return t.varType=this.varType,t.varName=this.varName,t}fromJson(t){R("Blockly.Events.VarCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.varType=t.varType,this.varName=t.varName}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new il),r.varType=t.varType,r.varName=t.varName,r}run(t){const r=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");t?r.createVariable(this.varName,this.varType,this.varId):r.deleteVariableById(this.varId)}};Ut(gt.EVENT,Ss,il);var kn=class{constructor(t,r,T,$){this.workspace=t,this.name=r,this.type=T||"",this.id_=$||ui()}getId(){return this.id_}static compareByName(t,r){return t.name.localeCompare(r.name,void 0,{sensitivity:"base"})}},co,fo,sl;co="VARIABLE",fo="ijkmnopqrstuvwxyzabcdefgh",sl={generateUniqueNameInternal:Np},c.module$build$src$core$variables={},c.module$build$src$core$variables.CATEGORY_NAME=co,c.module$build$src$core$variables.TEST_ONLY=sl,c.module$build$src$core$variables.VAR_LETTER_OPTIONS=fo,c.module$build$src$core$variables.allDeveloperVariables=bp,c.module$build$src$core$variables.allUsedVarModels=ta,c.module$build$src$core$variables.createVariableButtonHandler=Sn,c.module$build$src$core$variables.flyoutCategory=ea,c.module$build$src$core$variables.flyoutCategoryBlocks=qh,c.module$build$src$core$variables.generateUniqueName=tu,c.module$build$src$core$variables.generateUniqueNameFromOptions=ia,c.module$build$src$core$variables.generateVariableFieldDom=Bs,c.module$build$src$core$variables.getAddedVariables=na,c.module$build$src$core$variables.getOrCreateVariablePackage=Ir,c.module$build$src$core$variables.getVariable=Or,c.module$build$src$core$variables.nameUsedWithAnyType=iu,c.module$build$src$core$variables.promptName=sa,c.module$build$src$core$variables.renameVariable=eu;var Di=class{constructor(t,r,T,$,A){this.workspace=t,this.editable_=this.movable_=this.deletable_=!0,this.disposed_=!1,this.isComment=!0,this.id=A&&!t.getCommentById(A)?A:ui(),t.addTopComment(this),this.xy_=new Et(0,0),this.height_=T,this.width_=$,this.RTL=t.RTL,this.content_=r,Di.fireCreateEvent(this)}dispose(){this.disposed_||(Se()&&It(new(Ot(Js))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(t){this.height_=t}getWidth(){return this.width_}setWidth(t){this.width_=t}getXY(){return new Et(this.xy_.x,this.xy_.y)}moveBy(t,r){const T=new(Ot(Yi))(this);this.xy_.translate(t,r),T.recordNew(),It(T)}isDeletable(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(t){this.deletable_=t}isMovable(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(t){this.movable_=t}isEditable(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(t){this.editable_=t}getContent(){return this.content_}setContent(t){this.content_!==t&&(It(new(Ot(Fn))(this,this.content_,t)),this.content_=t)}toXmlWithXY(t){return t=this.toXml(t),t.setAttribute("x",`${Math.round(this.xy_.x)}`),t.setAttribute("y",`${Math.round(this.xy_.y)}`),t.setAttribute("h",`${this.height_}`),t.setAttribute("w",`${this.width_}`),t}toXml(t){const r=qt("comment");return t||(r.id=this.id),r.textContent=this.getContent(),r}static fireCreateEvent(t){if(Se()){const r=oe();r||Pt(!0);try{It(new(Ot(Rs))(t))}finally{r||Pt(!1)}}}static fromXml(t,r){var T=Di.parseAttributes(t);return r=new Di(r,T.content,T.h,T.w,T.id),T=t.getAttribute("x"),t=t.getAttribute("y"),T=T?parseInt(T,10):NaN,t=t?parseInt(t,10):NaN,isNaN(T)||isNaN(t)||r.moveBy(T,t),Di.fireCreateEvent(r),r}static parseAttributes(t){const r=t.getAttribute("h"),T=t.getAttribute("w"),$=t.getAttribute("x"),A=t.getAttribute("y"),F=t.getAttribute("id");if(!F)throw Error("No ID present in XML comment definition.");let z;return{id:F,h:r?parseInt(r):100,w:T?parseInt(T):100,x:$?parseInt($):NaN,y:A?parseInt(A):NaN,content:(z=t.textContent)!=null?z:""}}},mi=class extends Is{constructor(t){super(),this.isBlank=!0,this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof t=="undefined",this.workspaceId=t||""}},nl=class extends mi{constructor(t,r,T){super(T),this.type=rs,this.oldElementId=t!=null?t:void 0,this.newElementId=r!=null?r:void 0}toJson(){const t=super.toJson();return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t}fromJson(t){R("Blockly.Events.Selected.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new nl),r.oldElementId=t.oldElementId,r.newElementId=t.newElementId,r}};Ut(gt.EVENT,rs,nl);var rl=!1,ol=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyWsDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
}

/* Added as a separate rule with multiple classes to make it more specific
   than a bootstrap rule that selects svg:root. See issue #1275 for context.
*/
.blocklyWsDragSurface.blocklyOverflowVisible {
  overflow: visible;
}

.blocklyBlockDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 50;  /* Display below toolbox, but above everything else. */
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grab */
  cursor: url("<<<PATH>>>/handopen.cur"), auto;
  cursor: grab;
  cursor: -webkit-grab;
}

  /* backup for browsers (e.g. IE11) that don't support grabbing */
.blocklyDragging {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Change the cursor on the whole drag surface in case the mouse gets
   ahead of block during a drag. This way the cursor is still a closed hand.
  */
.blocklyBlockDragSurface .blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text,
.blocklyBlockDragSurface text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Edge and IE introduce a close icon when the input value is longer than a
   certain length. This affects our sizing calculations of the text input.
   Hiding the close icon to avoid that. */
.blocklyHtmlInput::-ms-clear {
  display: none;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}
`,al={};al.inject=su,al.register=di;var nt=class{constructor(t){this.tagName=t}toString(){return this.tagName}};nt.ANIMATE=new nt("animate"),nt.CIRCLE=new nt("circle"),nt.CLIPPATH=new nt("clipPath"),nt.DEFS=new nt("defs"),nt.FECOMPOSITE=new nt("feComposite"),nt.FECOMPONENTTRANSFER=new nt("feComponentTransfer"),nt.FEFLOOD=new nt("feFlood"),nt.FEFUNCA=new nt("feFuncA"),nt.FEGAUSSIANBLUR=new nt("feGaussianBlur"),nt.FEPOINTLIGHT=new nt("fePointLight"),nt.FESPECULARLIGHTING=new nt("feSpecularLighting"),nt.FILTER=new nt("filter"),nt.FOREIGNOBJECT=new nt("foreignObject"),nt.G=new nt("g"),nt.IMAGE=new nt("image"),nt.LINE=new nt("line"),nt.PATH=new nt("path"),nt.PATTERN=new nt("pattern"),nt.POLYGON=new nt("polygon"),nt.RECT=new nt("rect"),nt.SVG=new nt("svg"),nt.TEXT=new nt("text"),nt.TSPAN=new nt("tspan");var td=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,ed=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,lm={XY_REGEX:td,XY_STYLE_REGEX:ed},as={};as.TEST_ONLY=lm,as.getDocumentScroll=oa,as.getInjectionDivXY=Ar,as.getRelativeXY=fi,as.getViewportBBox=ra,as.is3dSupported=nu,as.screenToWsCoordinates=ru;var Me=8,po=3,hm=2,Ne=class extends Di{constructor(t,r,T,$,A){super(t,r,T,$,A),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.eventsInit_=!1,this.deleteIconBorder_=this.deleteGroup_=this.resizeGroup_=this.foreignObject_=this.svgHandleTarget_=this.svgRectTarget_=this.textarea_=null,this.rendered_=this.autoLayout_=this.focused_=!1,this.svgGroup_=N(nt.G,{class:"blocklyComment"}),this.svgGroup_.translate_="",this.workspace=t,this.svgRect_=N(nt.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:po,ry:po}),this.svgGroup_.appendChild(this.svgRect_),this.useDragSurface_=!!t.getBlockDragSurface(),this.render()}dispose(){this.disposed_||(L()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),Se()&&It(new(Ot(Js))(this)),K(this.svgGroup_),this.disposeInternal_(),Te(),super.dispose(),Ee())}initSvg(t){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||(u(this.svgRectTarget_,"pointerdown",this,this.pathMouseDown_),u(this.svgHandleTarget_,"pointerdown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!t&&this.textarea_&&this.textarea_.select()}pathMouseDown_(t){const r=this.workspace.getGesture(t);r&&r.handleBubbleStart(t,this)}showContextMenu(t){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(L()!==this){var t=null;if(L()){t=L().id,Te();try{L().unselect()}finally{Ee()}}t=new(Ot(rs))(t,this.id,this.workspace.id),It(t),P(this),this.addSelect()}}unselect(){if(L()===this){var t=new(Ot(rs))(this.id,null,this.workspace.id);It(t),P(null),this.removeSelect(),this.blurFocus()}}addSelect(){G(this.svgGroup_,"blocklySelected"),this.setFocus()}removeSelect(){G(this.svgGroup_,"blocklySelected"),this.blurFocus()}addFocus(){G(this.svgGroup_,"blocklyFocused")}removeFocus(){V(this.svgGroup_,"blocklyFocused")}getRelativeToSurfaceXY(){let t=0,r=0;const T=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let $=this.getSvgRoot();if($)do{var A=fi($);t+=A.x,r+=A.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===$&&(A=this.workspace.getBlockDragSurface().getSurfaceTranslation(),t+=A.x,r+=A.y),$=$.parentNode}while($&&$!==this.workspace.getBubbleCanvas()&&$!==T);return this.xy_=new Et(t,r)}moveBy(t,r){const T=new(Ot(Yi))(this),$=this.getRelativeToSurfaceXY();this.translate($.x+t,$.y+r),this.xy_=new Et($.x+t,$.y+r),T.recordNew(),It(T),this.workspace.resizeContents()}translate(t,r){this.xy_=new Et(t,r),this.getSvgRoot().setAttribute("transform","translate("+t+","+r+")")}moveToDragSurface(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot())}}moveDuringDrag(t,r){t?t.translateSurface(r.x,r.y):(this.svgGroup_.translate_="translate("+r.x+","+r.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}moveTo(t,r){this.translate(t,r)}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var t=this.getRelativeToSurfaceXY();const r=this.getHeightWidth(),T=t.y,$=t.y+r.height;let A;return this.RTL?(A=t.x-r.width,t=t.x):(A=t.x,t=t.x+r.width),new de(T,$,A,t)}updateMovable(){this.isMovable()?G(this.svgGroup_,"blocklyDraggable"):V(this.svgGroup_,"blocklyDraggable")}setMovable(t){super.setMovable(t),this.updateMovable()}setEditable(t){super.setEditable(t),this.textarea_&&(this.textarea_.readOnly=!t)}setDragging(t){t?(t=this.getSvgRoot(),t.translate_="",t.skew_="",G(this.svgGroup_,"blocklyDragging")):V(this.svgGroup_,"blocklyDragging")}getSvgRoot(){return this.svgGroup_}getContent(){return this.textarea_?this.textarea_.value:this.content_}setContent(t){super.setContent(t),this.textarea_&&(this.textarea_.value=t)}setDeleteStyle(t){t?G(this.svgGroup_,"blocklyDraggingDelete"):V(this.svgGroup_,"blocklyDraggingDelete")}setAutoLayout(t){}toXmlWithXY(t){let r=0;this.workspace.RTL&&(r=this.workspace.getWidth()),t=this.toXml(t);const T=this.getRelativeToSurfaceXY();return t.setAttribute("x",Math.round(this.workspace.RTL?r-T.x:T.x)),t.setAttribute("y",Math.round(T.y)),t.setAttribute("h",this.getHeight()),t.setAttribute("w",this.getWidth()),t}toCopyData(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered_){var t=this.getHeightWidth();this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.svgHandleTarget_=N(nt.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=N(nt.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:po,ry:po}),this.svgGroup_.appendChild(this.svgRectTarget_),this.addResizeDom_(),this.isDeletable()&&this.addDeleteDom_(),this.setSize_(t.width,t.height),this.textarea_.value=this.content_,this.rendered_=!0,this.resizeGroup_&&u(this.resizeGroup_,"pointerdown",this,this.resizeMouseDown_),this.isDeletable()&&(u(this.deleteGroup_,"pointerdown",this,this.deleteMouseDown_),u(this.deleteGroup_,"pointerout",this,this.deleteMouseOut_),u(this.deleteGroup_,"pointerup",this,this.deleteMouseUp_))}}createEditor_(){this.foreignObject_=N(nt.FOREIGNOBJECT,{x:0,y:Ne.TOP_OFFSET,class:"blocklyCommentForeignObject"});const t=document.createElementNS(pi,"body");t.setAttribute("xmlns",pi),t.className="blocklyMinimalBody";const r=document.createElementNS(pi,"textarea");return r.className="blocklyCommentTextarea",r.setAttribute("dir",this.RTL?"RTL":"LTR"),r.readOnly=!this.isEditable(),t.appendChild(r),this.textarea_=r,this.foreignObject_.appendChild(t),u(r,"wheel",this,function(T){T.stopPropagation()}),u(r,"change",this,function(T){this.setContent(r.value)}),this.foreignObject_}addResizeDom_(){this.resizeGroup_=N(nt.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_),N(nt.POLYGON,{points:"0,x x,x x,0".replace(/x/g,Me.toString())},this.resizeGroup_),N(nt.LINE,{class:"blocklyResizeLine",x1:Me/3,y1:Me-1,x2:Me-1,y2:Me/3},this.resizeGroup_),N(nt.LINE,{class:"blocklyResizeLine",x1:2*Me/3,y1:Me-1,x2:Me-1,y2:2*Me/3},this.resizeGroup_)}addDeleteDom_(){this.deleteGroup_=N(nt.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=N(nt.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup_),N(nt.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup_),N(nt.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup_)}resizeMouseDown_(t){this.unbindDragEvents_(),m(t)||(this.workspace.startDrag(t,new Et(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=u(document,"pointerup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=u(document,"pointermove",this,this.resizeMouseMove_),this.workspace.hideChaff()),t.stopPropagation()}deleteMouseDown_(t){this.deleteIconBorder_&&G(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),t.stopPropagation()}deleteMouseOut_(t){this.deleteIconBorder_&&V(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")}deleteMouseUp_(t){this.dispose(),t.stopPropagation()}unbindDragEvents_(){this.onMouseUpWrapper_&&(p(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(p(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}resizeMouseUp_(t){g(),this.unbindDragEvents_()}resizeMouseMove_(t){this.autoLayout_=!1,t=this.workspace.moveDrag(t),this.setSize_(this.RTL?-t.x:t.x,t.y)}resizeComment_(){const t=this.getHeightWidth(),r=Ne.TOP_OFFSET,T=2*hm;this.foreignObject_.setAttribute("width",t.width),this.foreignObject_.setAttribute("height",(t.height-r).toString()),this.RTL&&this.foreignObject_.setAttribute("x",(-t.width).toString()),this.textarea_.style.width=t.width-T+"px",this.textarea_.style.height=t.height-T-r+"px"}setSize_(t,r){t=Math.max(t,45),r=Math.max(r,20+Ne.TOP_OFFSET),this.width_=t,this.height_=r,this.svgRect_.setAttribute("width",t),this.svgRect_.setAttribute("height",r),this.svgRectTarget_.setAttribute("width",t),this.svgRectTarget_.setAttribute("height",r),this.svgHandleTarget_.setAttribute("width",t),this.svgHandleTarget_.setAttribute("height",Ne.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)")),this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(-t+Me)+","+(r-Me)+") scale(-1 1)"),this.deleteGroup_.setAttribute("transform","translate("+(-t+Me)+","+-Me+") scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+(t-Me)+","+(r-Me)+")"),this.deleteGroup_.setAttribute("transform","translate("+(t-Me)+","+-Me+")"))),this.resizeComment_()}disposeInternal_(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null,this.disposed_=!0}setFocus(){this.focused_=!0,setTimeout(()=>{this.disposed_||(this.textarea_.focus(),this.addFocus(),this.svgRectTarget_&&G(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&G(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused_=!1,setTimeout(()=>{this.disposed_||(this.textarea_.blur(),this.removeFocus(),this.svgRectTarget_&&V(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&V(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(t,r,T){Te();let $;try{const A=Di.parseAttributes(t);if($=new Ne(r,A.content,A.h,A.w,A.id),r.rendered&&($.initSvg(!0),$.render()),!isNaN(A.x)&&!isNaN(A.y))if(r.RTL){const F=T||r.getWidth();$.moveBy(F-A.x,A.y)}else $.moveBy(A.x,A.y)}finally{Ee()}return Di.fireCreateEvent($),$}};Ne.DEFAULT_SIZE=100,Ne.TOP_OFFSET=10,di(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`),c.module$build$src$core$xml={},c.module$build$src$core$xml.appendDomToWorkspace=Vp,c.module$build$src$core$xml.blockToDom=ps,c.module$build$src$core$xml.blockToDomWithXY=Lr,c.module$build$src$core$xml.clearWorkspaceAndLoadFromXml=Hp,c.module$build$src$core$xml.deleteNext=Zp,c.module$build$src$core$xml.domToBlock=Fs,c.module$build$src$core$xml.domToPrettyText=kp,c.module$build$src$core$xml.domToText=ri,c.module$build$src$core$xml.domToVariables=lu,c.module$build$src$core$xml.domToWorkspace=Cn,c.module$build$src$core$xml.textToDom=Be,c.module$build$src$core$xml.variablesToDom=ou,c.module$build$src$core$xml.workspaceToDom=Fp;var qs=class extends Is{constructor(t){super(),this.isBlank=!t,t&&(this.blockId=t.id,this.workspaceId=t.workspace.id)}toJson(){const t=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return t.blockId=this.blockId,t}fromJson(t){R("Blockly.Events.BlockBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.blockId=t.blockId}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new qs),r.blockId=t.blockId,r}},Os=class extends qs{constructor(t,r,T,$,A){super(t),this.type=Re,t&&(this.element=r,this.name=T||void 0,this.oldValue=$,this.newValue=A)}toJson(){const t=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return t.element=this.element,t.name=this.name,t.oldValue=this.oldValue,t.newValue=this.newValue,t}fromJson(t){R("Blockly.Events.BlockChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new Os),r.element=t.element,r.name=t.name,r.oldValue=t.oldValue,r.newValue=t.newValue,r}isNull(){return this.oldValue===this.newValue}run(t){var r=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(r=r.getBlockById(this.blockId),!r)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");switch(r.mutator&&r.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(r=r.getField(this.name))?r.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":r.setCommentText(t||null);break;case"collapsed":r.setCollapsed(!!t);break;case"disabled":r.setEnabled(!t);break;case"inline":r.setInputsInline(!!t);break;case"mutation":const T=Os.getExtraBlockState_(r);r.loadExtraState?r.loadExtraState(JSON.parse(t||"{}")):r.domToMutation&&r.domToMutation(Be(t||"<mutation/>")),It(new Os(r,"mutation",null,T,t));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(t){return t.saveExtraState?(t=t.saveExtraState())?JSON.stringify(t):"":t.mutationToDom&&(t=t.mutationToDom())?ri(t):""}};Ut(gt.EVENT,Re,Os);var Hn=class{constructor(t){this.workspace=t,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(t,r){this.markers.has(t)&&this.unregisterMarker(t),r.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,r)),this.setMarkerSvg(r.getDrawer().createDom()),this.markers.set(t,r)}unregisterMarker(t){const r=this.markers.get(t);if(r)r.dispose(),this.markers.delete(t);else throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(t){return this.markers.get(t)||null}setCursor(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(t){t?(this.workspace.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null}setMarkerSvg(t){t?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(t)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const t=Object.keys(this.markers);for(let r=0,T;T=t[r];r++)this.unregisterMarker(T);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};Hn.LOCAL_MARKER="local_marker_1",c.module$build$src$core$utils$string={},c.module$build$src$core$utils$string.commonWordPrefix=uu,c.module$build$src$core$utils$string.commonWordSuffix=cu,c.module$build$src$core$utils$string.isNumber=pu,c.module$build$src$core$utils$string.shortestStringLength=Mr,c.module$build$src$core$utils$string.startsWith=Qp,c.module$build$src$core$utils$string.wrap=du;var vo=void 0,Vn=!1,tn=!1,id=50,sd=0,Wn=0,ll=0,hl=0,ai=null,Xn=null,ul=0,cl=10,nd=10,rd=750,go=5,ge=null,pe={};pe.HOVER_MS=rd,pe.LIMIT=id,pe.MARGINS=go,pe.OFFSET_X=ul,pe.OFFSET_Y=cl,pe.RADIUS_OK=nd,pe.bindMouseEvents=Pr,pe.block=Eu,pe.createDom=gu,pe.dispose=Tu,pe.getCustomTooltip=iv,pe.getDiv=nv,pe.getTooltipOfObject=Rn,pe.hide=vs,pe.isVisible=sv,pe.setCustomTooltip=ev,pe.unbindMouseEvents=Dr,pe.unblock=xu;var dl=.45,fl=.65,od={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},we={};we.blend=Gs,we.getHsvSaturation=yu,we.getHsvValue=Su,we.hexToRgb=ha,we.hsvToHex=ua,we.hueToHex=ca,we.names=od,we.parse=gs,we.rgbToHex=br,we.setHsvSaturation=cv,we.setHsvValue=dv;var Yn={};Yn.checkMessageReferences=Nr,Yn.parseBlockColour=Us,Yn.replaceMessageReferences=ce,Yn.tokenizeInterpolation=fa;var um=class{},mo=null,To=null,en="",sn="",Ti,Ei={};Ei.createDom=Cu,Ei.getDiv=ks,Ei.hide=Oi,Ei.hideIfOwner=va,Ei.isVisible=Ru,Ei.positionWithAnchor=Iu,Ei.show=pa,Ei.testOnly_setDiv=fv;var Wt=class{constructor(t,r,T){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Ie(0,0),t!==Wt.SKIP_SETUP&&(T&&this.configure_(T),this.setValue(t),r&&this.setValidator(r))}configure_(t){t.tooltip&&this.setTooltip(ce(t.tooltip))}setSourceBlock(t){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=t}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=N(nt.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}createBorderRect_(){this.borderRect_=N(nt.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=N(nt.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const t=this.getClickTarget_();if(!t)throw Error("A click target has not been set.");Pr(t),this.mouseDownWrapper_=u(t,"pointerdown",this,this.onMouseDown_)}fromXml(t){this.setValue(t.textContent)}toXml(t){return t.textContent=this.getValue(),t}saveState(t){return t=this.saveLegacyState(Wt),t!==null?t:this.getValue()}loadState(t){this.loadLegacyState(Wt,t)||this.setValue(t)}saveLegacyState(t){return t.prototype.saveState===this.saveState&&t.prototype.toXml!==this.toXml?(t=qt("field"),t.setAttribute("name",this.name||""),ri(this.toXml(t)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(t,r){return t.prototype.loadState===this.loadState&&t.prototype.fromXml!==this.fromXml?(this.fromXml(Be(r)),!0):!1}dispose(){xn(this),va(this),Dr(this.getClickTarget_()),this.mouseDownWrapper_&&p(this.mouseDownWrapper_),K(this.fieldGroup_),this.disposed=!0}updateEditable(){const t=this.fieldGroup_,r=this.getSourceBlock();this.EDITABLE&&t&&r&&(this.enabled_&&r.isEditable()?(G(t,"blocklyEditableText"),V(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(G(t,"blocklyNonEditableText"),V(t,"blocklyEditableText"),t.style.cursor=""))}setEnabled(t){this.enabled_=t,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Wt.prototype.showEditor_}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t}isVisible(){return this.visible_}setVisible(t){if(this.visible_!==t){this.visible_=t;var r=this.fieldGroup_;r&&(r.style.display=t?"block":"none")}}setValidator(t){this.validator_=t}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(t){this.isClickable()&&this.showEditor_(t)}showEditor_(t){}updateSize_(t){const r=this.getConstants();t=t!==void 0?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let T=2*t,$=r.FIELD_TEXT_HEIGHT,A=0;this.textElement_&&(A=pt(this.textElement_,r.FIELD_TEXT_FONTSIZE,r.FIELD_TEXT_FONTWEIGHT,r.FIELD_TEXT_FONTFAMILY),T+=A),this.borderRect_&&($=Math.max($,r.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=$,this.size_.width=T,this.positionTextElement_(t,A),this.positionBorderRect_()}positionTextElement_(t,r){if(this.textElement_){var T=this.getConstants(),$=this.size_.height/2,A;this.textElement_.setAttribute("x",`${(A=this.getSourceBlock())!=null&&A.RTL?this.size_.width-r-t:t}`),this.textElement_.setAttribute("y",`${T.FIELD_TEXT_BASELINE_CENTER?$:$-T.FIELD_TEXT_HEIGHT/2+T.FIELD_TEXT_BASELINE}`)}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",`${this.size_.width}`),this.borderRect_.setAttribute("height",`${this.size_.height}`),this.borderRect_.setAttribute("rx",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`),this.borderRect_.setAttribute("ry",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Ie(0,0)}getScaledBBox(){let t;var r=this.getSourceBlock();if(!r)throw new me;if(this.borderRect_){var T=this.borderRect_.getBoundingClientRect();t=zt(this.borderRect_),r=T.width,T=T.height}else{T=this.sourceBlock_.getHeightWidth();const $=r.workspace.scale;t=this.getAbsoluteXY_(),r=(T.width+1)*$,T=(T.height+1)*$,ka?(t.x+=1.5*$,t.y+=1.5*$):(t.x-=.5*$,t.y-=.5*$)}return new de(t.y,t.y+T,t.x,t.x+r)}getDisplayText_(){let t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,Wt.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200F"),t):Wt.NBSP}getText(){const t=this.getText_();return String(t!==null?t:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())}setValue(t){if(t!==null){var r=this.doClassValidation_(t);if(t=this.processValidation_(t,r),!(t instanceof Error)){if((r=this.getValidator())&&(r=r.call(this,t),t=this.processValidation_(t,r),t instanceof Error))return;if(r=this.sourceBlock_,!r||!r.disposed){var T=this.getValue();T===t?this.doValueUpdate_(t):(this.doValueUpdate_(t),r&&Se()&&It(new(Ot(Re))(r,"field",this.name||null,T,t)),this.isDirty_&&this.forceRerender())}}}}processValidation_(t,r){return r===null?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(r!==void 0&&(t=r),t)}getValue(){return this.value_}doClassValidation_(t){return t==null?null:t}doValueUpdate_(t){this.value_=t,this.isDirty_=!0}doValueInvalid_(t){}onMouseDown_(t){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)}setTooltip(t){t||t===""||(t=this.sourceBlock_);const r=this.getClickTarget_();r?r.tooltip=t:this.tooltip_=t}getTooltip(){const t=this.getClickTarget_();return Rn(t||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return zt(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let t=null;const r=this.getSourceBlock();if(!r)throw new me;const T=r.inputList;for(let $=0;$<r.inputList.length;$++){const A=T[$],F=A.fieldRow;for(let z=0;z<F.length;z++)if(F[z]===this){t=A;break}}return t}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(t){return!1}setCursorSvg(t){if(t){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(t),this.cursorSvg_=t}else this.cursorSvg_=null}setMarkerSvg(t){if(t){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(t),this.markerSvg_=t}else this.markerSvg_=null}updateMarkers_(){var t=this.getSourceBlock();if(!t)throw new me;t=t.workspace,t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(Hn.LOCAL_MARKER).draw()}};Wt.NBSP="\xA0",Wt.SKIP_SETUP=new um;var me=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},ad={fromJsonInternal:mv},zn={};zn.TEST_ONLY=ad,zn.fromJson=ga,zn.register=oi,zn.unregister=gv;var cm="aria-",dm="role",Ke;(function(t){t.GRID="grid",t.GRIDCELL="gridcell",t.GROUP="group",t.LISTBOX="listbox",t.MENU="menu",t.MENUITEM="menuitem",t.MENUITEMCHECKBOX="menuitemcheckbox",t.OPTION="option",t.PRESENTATION="presentation",t.ROW="row",t.TREE="tree",t.TREEITEM="treeitem"})(Ke||(Ke={}));var re;(function(t){t.ACTIVEDESCENDANT="activedescendant",t.COLCOUNT="colcount",t.DISABLED="disabled",t.EXPANDED="expanded",t.INVALID="invalid",t.LABEL="label",t.LABELLEDBY="labelledby",t.LEVEL="level",t.ORIENTATION="orientation",t.POSINSET="posinset",t.ROWCOUNT="rowcount",t.SELECTED="selected",t.SETSIZE="setsize",t.VALUEMAX="valuemax",t.VALUEMIN="valuemin"})(re||(re={}));var Kn={};Kn.Role=Ke,Kn.State=re,Kn.setRole=Ai,Kn.setState=he;var Rt;(function(t){t[t.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",t[t.MAC_ENTER=3]="MAC_ENTER",t[t.BACKSPACE=8]="BACKSPACE",t[t.TAB=9]="TAB",t[t.NUM_CENTER=12]="NUM_CENTER",t[t.ENTER=13]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CTRL=17]="CTRL",t[t.ALT=18]="ALT",t[t.PAUSE=19]="PAUSE",t[t.CAPS_LOCK=20]="CAPS_LOCK",t[t.ESC=27]="ESC",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.PLUS_SIGN=43]="PLUS_SIGN",t[t.PRINT_SCREEN=44]="PRINT_SCREEN",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t.ZERO=48]="ZERO",t[t.ONE=49]="ONE",t[t.TWO=50]="TWO",t[t.THREE=51]="THREE",t[t.FOUR=52]="FOUR",t[t.FIVE=53]="FIVE",t[t.SIX=54]="SIX",t[t.SEVEN=55]="SEVEN",t[t.EIGHT=56]="EIGHT",t[t.NINE=57]="NINE",t[t.FF_SEMICOLON=59]="FF_SEMICOLON",t[t.FF_EQUALS=61]="FF_EQUALS",t[t.FF_DASH=173]="FF_DASH",t[t.FF_HASH=163]="FF_HASH",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.AT_SIGN=64]="AT_SIGN",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.META=91]="META",t[t.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",t[t.CONTEXT_MENU=93]="CONTEXT_MENU",t[t.NUM_ZERO=96]="NUM_ZERO",t[t.NUM_ONE=97]="NUM_ONE",t[t.NUM_TWO=98]="NUM_TWO",t[t.NUM_THREE=99]="NUM_THREE",t[t.NUM_FOUR=100]="NUM_FOUR",t[t.NUM_FIVE=101]="NUM_FIVE",t[t.NUM_SIX=102]="NUM_SIX",t[t.NUM_SEVEN=103]="NUM_SEVEN",t[t.NUM_EIGHT=104]="NUM_EIGHT",t[t.NUM_NINE=105]="NUM_NINE",t[t.NUM_MULTIPLY=106]="NUM_MULTIPLY",t[t.NUM_PLUS=107]="NUM_PLUS",t[t.NUM_MINUS=109]="NUM_MINUS",t[t.NUM_PERIOD=110]="NUM_PERIOD",t[t.NUM_DIVISION=111]="NUM_DIVISION",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.NUMLOCK=144]="NUMLOCK",t[t.SCROLL_LOCK=145]="SCROLL_LOCK",t[t.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",t[t.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",t[t.SEMICOLON=186]="SEMICOLON",t[t.DASH=189]="DASH",t[t.EQUALS=187]="EQUALS",t[t.COMMA=188]="COMMA",t[t.PERIOD=190]="PERIOD",t[t.SLASH=191]="SLASH",t[t.APOSTROPHE=192]="APOSTROPHE",t[t.TILDE=192]="TILDE",t[t.SINGLE_QUOTE=222]="SINGLE_QUOTE",t[t.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",t[t.BACKSLASH=220]="BACKSLASH",t[t.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",t[t.WIN_KEY=224]="WIN_KEY",t[t.MAC_FF_META=224]="MAC_FF_META",t[t.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",t[t.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",t[t.WIN_IME=229]="WIN_IME",t[t.VK_NONAME=252]="VK_NONAME",t[t.PHANTOM=255]="PHANTOM"})(Rt||(Rt={}));var pl=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(t){this.menuItems.push(t)}render(t){const r=document.createElement("div");r.className="blocklyMenu goog-menu blocklyNonSelectable",r.tabIndex=0,this.roleName&&Ai(r,this.roleName),this.element=r;for(let T=0,$;$=this.menuItems[T];T++)r.appendChild($.createDom());return this.mouseOverHandler=u(r,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=u(r,"pointerdown",this,this.handleClick,!0),this.mouseEnterHandler=u(r,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=u(r,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=u(r,"keydown",this,this.handleKeyEvent),t.appendChild(r),r}getElement(){return this.element}focus(){const t=this.getElement();t&&(t.focus({preventScroll:!0}),G(t,"blocklyFocused"))}blur(){const t=this.getElement();t&&(t.blur(),V(t,"blocklyFocused"))}setRole(t){this.roleName=t}dispose(){this.mouseOverHandler&&(p(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(p(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(p(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(p(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(p(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let t=0,r;r=this.menuItems[t];t++)r.dispose();this.element=null}getMenuItem(t){const r=this.getElement();for(;t&&t!==r;){if(t.classList.contains("blocklyMenuItem")){for(let T=0,$;$=this.menuItems[T];T++)if($.getElement()===t)return $}t=t.parentElement}return null}setHighlighted(t){var r=this.highlightedItem;r&&(r.setHighlighted(!1),this.highlightedItem=null),t&&(t.setHighlighted(!0),this.highlightedItem=t,r=this.getElement(),ft(t.getElement(),r),he(r,re.ACTIVEDESCENDANT,t.getId()))}highlightNext(){const t=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(t,1)}highlightPrevious(){const t=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>t?this.menuItems.length:t,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(t,r){t+=r;let T;for(;T=this.menuItems[t];){if(T.isEnabled()){this.setHighlighted(T);break}t+=r}}handleMouseOver(t){(t=this.getMenuItem(t.target))&&(t.isEnabled()?this.highlightedItem!==t&&this.setHighlighted(t):this.setHighlighted(null))}handleClick(t){const r=this.openingCoords;if(this.openingCoords=null,r&&typeof t.clientX=="number"){const T=new Et(t.clientX,t.clientY);if(1>Et.distance(r,T))return}(t=this.getMenuItem(t.target))&&t.performAction()}handleMouseEnter(t){this.focus()}handleMouseLeave(t){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(t){if(this.menuItems.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var r=this.highlightedItem;switch(t.keyCode){case Rt.ENTER:case Rt.SPACE:r&&r.performAction();break;case Rt.UP:this.highlightPrevious();break;case Rt.DOWN:this.highlightNext();break;case Rt.PAGE_UP:case Rt.HOME:this.highlightFirst();break;case Rt.PAGE_DOWN:case Rt.END:this.highlightLast();break;default:return}t.preventDefault(),t.stopPropagation()}}getSize(){const t=this.getElement(),r=Ht(t);return r.height=t.scrollHeight,r}},vl=class{constructor(t,r){this.content=t,this.opt_value=r,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const t=document.createElement("div");t.id=yn(),this.element=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const r=document.createElement("div");if(r.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var T=document.createElement("div");T.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",r.appendChild(T)}return T=this.content,typeof this.content=="string"&&(T=document.createTextNode(this.content)),r.appendChild(T),t.appendChild(r),this.roleName&&Ai(t,this.roleName),he(t,re.SELECTED,this.checkable&&this.checked||!1),he(t,re.DISABLED,!this.enabled),t}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let t;return(t=this.opt_value)!=null?t:null}setRightToLeft(t){this.rightToLeft=t}setRole(t){this.roleName=t}setCheckable(t){this.checkable=t}setChecked(t){this.checked=t}setHighlighted(t){this.highlight=t;const r=this.getElement();r&&this.isEnabled()&&(t?(G(r,"blocklyMenuItemHighlight"),G(r,"goog-menuitem-highlight")):(V(r,"blocklyMenuItemHighlight"),V(r,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(t,r){this.actionHandler=t.bind(r)}},xi=class extends Wt{constructor(t,r,T){super(Wt.SKIP_SETUP),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions_=null,Tv(t)&&(Array.isArray(t)?(Ou(t),t=Ev(t),this.menuGenerator_=t.options,this.prefixField=t.prefix||null,this.suffixField=t.suffix||null):this.menuGenerator_=t,this.selectedOption_=this.getOptions(!1)[0],T&&this.configure_(T),this.setValue(this.selectedOption_[1]),r&&this.setValidator(r))}fromXml(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)}loadState(t){this.loadLegacyState(xi,t)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=N(nt.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&G(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let t;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((t=this.getSourceBlock())!=null&&t.isShadow())}createTextArrow_(){this.arrow_=N(nt.TSPAN,{},this.textElement_);let t;this.arrow_.appendChild(document.createTextNode((t=this.getSourceBlock())!=null&&t.RTL?xi.ARROW_CHAR+" ":" "+xi.ARROW_CHAR));let r;(r=this.getSourceBlock())!=null&&r.RTL?this.getTextElement().insertBefore(this.arrow_,this.textContent_):this.getTextElement().appendChild(this.arrow_)}createSVGArrow_(){this.svgArrow_=N(nt.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(Ye,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(t){var r=this.getSourceBlock();if(!r)throw new me;this.dropdownCreate_(),this.menu_.openingCoords=t&&typeof t.clientX=="number"?new Et(t.clientX,t.clientY):null,ne(),t=this.menu_.render(De()),G(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(t=r.isShadow()?r.getParent().getColour():r.getColour(),r=r.isShadow()?r.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,W(t,r)),it(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()}dropdownCreate_(){const t=this.getSourceBlock();if(!t)throw new me;const r=new pl;r.setRole(Ke.LISTBOX),this.menu_=r;const T=this.getOptions(!1);this.selectedMenuItem_=null;for(let A=0;A<T.length;A++){const[F,z]=T[A];if(typeof F=="object"){var $=new Image(F.width,F.height);$.src=F.src,$.alt=F.alt||""}else $=F;$=new vl($,z),$.setRole(Ke.OPTION),$.setRightToLeft(t.RTL),$.setCheckable(!0),r.addChild($),$.setChecked(z===this.value_),z===this.value_&&(this.selectedMenuItem_=$),$.onAction(this.handleMenuActionEvent_,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()}handleMenuActionEvent_(t){xn(this,!0),this.onItemSelected_(this.menu_,t)}onItemSelected_(t,r){this.setValue(r.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(t){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:t&&this.generatedOptions_?this.generatedOptions_:(this.generatedOptions_=this.menuGenerator_(),Ou(this.generatedOptions_),this.generatedOptions_)}doClassValidation_(t){return this.getOptions(!0).some(r=>r[1]===t)?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)}doValueUpdate_(t){super.doValueUpdate_(t),t=this.getOptions(!0);for(let r=0,T;T=t[r];r++)T[1]===this.value_&&(this.selectedOption_=T)}applyColour(){const t=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",t.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",t.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=t.colourSecondary:this.arrow_.style.fill=t.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement_.style.display="none";const t=this.selectedOption_&&this.selectedOption_[0];t&&typeof t=="object"?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()}renderSelectedImage_(t){const r=this.getSourceBlock();if(!r)throw new me;this.imageElement_.style.display="",this.imageElement_.setAttributeNS(Ye,"xlink:href",t.src),this.imageElement_.setAttribute("height",`${t.height}`),this.imageElement_.setAttribute("width",`${t.width}`);const T=Number(t.height);t=Number(t.width);var $=!!this.borderRect_;const A=Math.max($?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,T+pm);$=$?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let F;F=this.svgArrow_?this.positionSVGArrow_(t+$,A/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):pt(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=t+F+2*$,this.size_.height=A;let z=0;r.RTL?this.imageElement_.setAttribute("x",($+F).toString()):(z=t+F,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",$.toString())),this.imageElement_.setAttribute("y",(A/2-T/2).toString()),this.positionTextElement_(z+$,t+F)}renderSelectedText_(){this.getTextContent().nodeValue=this.getDisplayText_();var t=this.getTextElement();G(t,"blocklyDropdownText"),t.setAttribute("text-anchor","start");var r=!!this.borderRect_;t=Math.max(r?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const T=pt(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);r=r?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let $=0;this.svgArrow_&&($=this.positionSVGArrow_(T+r,t/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=T+$+2*r,this.size_.height=t,this.positionTextElement_(r,T)}positionSVGArrow_(t,r){if(!this.svgArrow_)return 0;const T=this.getSourceBlock();if(!T)throw new me;const $=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,A=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,F=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(T.RTL?$:t+A)+","+r+")"),F+A}getText_(){if(!this.selectedOption_)return null;const t=this.selectedOption_[0];return typeof t=="object"?t.alt:t}static fromJson(t){if(!t.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(t.options,void 0,t)}};xi.CHECKMARK_OVERHANG=25,xi.MAX_MENU_HEIGHT_VH=.45,xi.ARROW_CHAR="\u25BE";var fm=5,pm=2*fm;oi("field_dropdown",xi),c.module$build$src$core$field_dropdown={},c.module$build$src$core$field_dropdown.FieldDropdown=xi;var gl=class extends mi{constructor(t,r,T){super(t?t.workspace.id:void 0),this.type=Xi,t&&(this.blockId=t.id,this.isOpen=r,this.bubbleType=T)}toJson(){const t=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId||"",t}fromJson(t){R("Blockly.Events.BubbleOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new gl),r.isOpen=t.isOpen,r.bubbleType=t.bubbleType,r.blockId=t.blockId,r}},ml;(function(t){t.MUTATOR="mutator",t.COMMENT="comment",t.WARNING="warning"})(ml||(ml={})),Ut(gt.EVENT,Xi,gl);var ue=class{constructor(t,r,T,$,A){this.workspace=t,this.horizontal=r,this.oldHostMetrics=null,this.ratio=1,this.origin=new Et(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new Et(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=T||!1,this.margin=A!==void 0?A:ue.DEFAULT_SCROLLBAR_MARGIN,t="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),$&&(t+=" "+$),this.outerSvg=N(nt.SVG,{class:t}),$=N(nt.G,{},this.outerSvg),this.svgBackground=N(nt.RECT,{class:"blocklyScrollbarBackground"},$),t=Math.floor((ue.scrollbarThickness-5)/2),this.svgHandle=N(nt.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},$),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),tt(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),r?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=u(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=u(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const t=ue.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(t)),this.outerSvg.setAttribute("height",String(t)),this.svgHandle.setAttribute("height",String(t-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(t)),this.outerSvg.setAttribute("width",String(t)),this.svgHandle.setAttribute("width",String(t-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),p(this.onMouseDownBarWrapper_),p(this.onMouseDownHandleWrapper_),K(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(t){return t=0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength)}setHandleLength(t){this.handleLength=t,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(t){return t=0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength-this.handleLength)}setHandlePosition(t){this.handlePosition=t,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(t){this.scrollbarLength=t,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(t,r){this.position.x=t,this.position.y=r,rt(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(t){!t&&(t=this.workspace.getMetrics(),!t)||this.oldHostMetrics&&ue.metricsAreEquivalent(t,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(t):this.resizeVertical(t),this.oldHostMetrics=t,this.updateMetrics())}requiresViewResize(t){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==t.viewWidth||this.oldHostMetrics.viewHeight!==t.viewHeight||this.oldHostMetrics.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics.absoluteTop!==t.absoluteTop:!0}resizeHorizontal(t){this.requiresViewResize(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)}resizeViewHorizontal(t){var r=t.viewWidth-2*this.margin;this.pair&&(r-=ue.scrollbarThickness),this.setScrollbarLength(Math.max(0,r)),r=t.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(r+=ue.scrollbarThickness),this.setPosition(r,t.absoluteTop+t.viewHeight-ue.scrollbarThickness-this.margin),this.resizeContentHorizontal(t)}resizeContentHorizontal(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var r=this.scrollbarLength*t.viewWidth/t.scrollWidth;r=this.constrainHandleLength(r),this.setHandleLength(r),r=t.scrollWidth-t.viewWidth;var T=this.scrollbarLength-this.handleLength;t=(t.viewLeft-t.scrollLeft)/r*T,t=this.constrainHandlePosition(t),this.setHandlePosition(t),this.ratio=T/r}}resizeVertical(t){this.requiresViewResize(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)}resizeViewVertical(t){let r=t.viewHeight-2*this.margin;this.pair&&(r-=ue.scrollbarThickness),this.setScrollbarLength(Math.max(0,r)),this.setPosition(this.workspace.RTL?t.absoluteLeft+this.margin:t.absoluteLeft+t.viewWidth-ue.scrollbarThickness-this.margin,t.absoluteTop+this.margin),this.resizeContentVertical(t)}resizeContentVertical(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var r=this.scrollbarLength*t.viewHeight/t.scrollHeight;r=this.constrainHandleLength(r),this.setHandleLength(r),r=t.scrollHeight-t.viewHeight;var T=this.scrollbarLength-this.handleLength;t=(t.viewTop-t.scrollTop)/r*T,t=this.constrainHandlePosition(t),this.setHandlePosition(t),this.ratio=T/r}}isVisible(){return this.isHandleVisible}setContainerVisible(t){const r=t!==this.containerVisible;this.containerVisible=t,r&&this.updateDisplay_()}setVisible(t){const r=t!==this.isVisible();if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.isHandleVisible=t,r&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(t){if(this.workspace.markFocused(),g(),this.cleanUp(),m(t))t.stopPropagation();else{var r=E(t,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());r=this.horizontal?r.x:r.y;var T=Ar(this.svgHandle);T=this.horizontal?T.x:T.y;var $=this.handlePosition,A=.95*this.handleLength;r<=T?$-=A:r>=T+this.handleLength&&($+=A),this.setHandlePosition(this.constrainHandlePosition($)),this.updateMetrics(),t.stopPropagation(),t.preventDefault()}}onMouseDownHandle(t){this.workspace.markFocused(),this.cleanUp(),m(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition,this.workspace.setupDragSurface(),this.startDragMouse=this.horizontal?t.clientX:t.clientY,this.onMouseUpWrapper_=u(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=u(document,"pointermove",this,this.onMouseMoveHandle),t.stopPropagation(),t.preventDefault())}onMouseMoveHandle(t){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?t.clientX:t.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){this.workspace.resetDragSurface(),g(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(p(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(p(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let t=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(t)&&(t=0),t}updateMetrics(){const t=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:t}):this.workspace.setMetrics({y:t})}set(t,r){this.setHandlePosition(this.constrainHandlePosition(t*this.ratio)),(r||r===void 0)&&this.updateMetrics()}setOrigin(t,r){this.origin=new Et(t,r)}static metricsAreEquivalent(t,r){return t.viewWidth===r.viewWidth&&t.viewHeight===r.viewHeight&&t.viewLeft===r.viewLeft&&t.viewTop===r.viewTop&&t.absoluteTop===r.absoluteTop&&t.absoluteLeft===r.absoluteLeft&&t.scrollWidth===r.scrollWidth&&t.scrollHeight===r.scrollHeight&&t.scrollLeft===r.scrollLeft&&t.scrollTop===r.scrollTop}};ue.scrollbarThickness=Pc?25:15,ue.DEFAULT_SCROLLBAR_MARGIN=.5;var Gt=class{constructor(t,r,T,$,A,F){this.resizeGroup=this.bubbleBack=this.bubbleArrow=this.bubbleGroup=null,this.height=this.width=this.relativeTop=this.relativeLeft=0,this.autoLayout=!0,this.onMouseDownResizeWrapper=this.onMouseDownBubbleWrapper=this.moveCallback=this.resizeCallback=null,this.rendered=this.disposed=!1,this.workspace_=t,this.content_=r,this.shape_=T,T=Gt.ARROW_ANGLE,this.workspace_.RTL&&(T=-T),this.arrowRadians=Ct(T),t.getBubbleCanvas().appendChild(this.createDom(r,!(!A||!F))),this.setAnchorLocation($),A&&F||(t=this.content_.getBBox(),A=t.width+2*Gt.BORDER_WIDTH,F=t.height+2*Gt.BORDER_WIDTH),this.setBubbleSize(A,F),this.positionBubble(),this.renderArrow(),this.rendered=!0}createDom(t,r){this.bubbleGroup=N(nt.G,{});var T={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return Gc&&(T={}),T=N(nt.G,T,this.bubbleGroup),this.bubbleArrow=N(nt.PATH,{},T),this.bubbleBack=N(nt.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Gt.BORDER_WIDTH,ry:Gt.BORDER_WIDTH},T),r?(this.resizeGroup=N(nt.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup),r=2*Gt.BORDER_WIDTH,N(nt.POLYGON,{points:"0,x x,x x,0".replace(/x/g,r.toString())},this.resizeGroup),N(nt.LINE,{class:"blocklyResizeLine",x1:r/3,y1:r-1,x2:r-1,y2:r/3},this.resizeGroup),N(nt.LINE,{class:"blocklyResizeLine",x1:2*r/3,y1:r-1,x2:r-1,y2:2*r/3},this.resizeGroup)):this.resizeGroup=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper=u(this.bubbleBack,"pointerdown",this,this.bubbleMouseDown),this.resizeGroup&&(this.onMouseDownResizeWrapper=u(this.resizeGroup,"pointerdown",this,this.resizeMouseDown))),this.bubbleGroup.appendChild(t),this.bubbleGroup}getSvgRoot(){return this.bubbleGroup}setSvgId(t){let r;(r=this.bubbleGroup)==null||r.setAttribute("data-block-id",t)}bubbleMouseDown(t){const r=this.workspace_.getGesture(t);r&&r.handleBubbleStart(t,this)}showContextMenu(t){}isDeletable(){return!1}setDeleteStyle(t){}resizeMouseDown(t){this.promote(),Gt.unbindDragEvents(),m(t)||(this.workspace_.startDrag(t,new Et(this.workspace_.RTL?-this.width:this.width,this.height)),Gt.onMouseUpWrapper=u(document,"pointerup",this,Gt.bubbleMouseUp),Gt.onMouseMoveWrapper=u(document,"pointermove",this,this.resizeMouseMove),this.workspace_.hideChaff()),t.stopPropagation()}resizeMouseMove(t){this.autoLayout=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble()}registerResizeEvent(t){this.resizeCallback=t}registerMoveEvent(t){this.moveCallback=t}promote(){let t;const r=(t=this.bubbleGroup)==null?void 0:t.parentNode;return(r==null?void 0:r.lastChild)!==this.bubbleGroup&&this.bubbleGroup?(r==null||r.appendChild(this.bubbleGroup),!0):!1}setAnchorLocation(t){this.anchorXY=t,this.rendered&&this.positionBubble()}layoutBubble(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),r=this.getOptimalRelativeLeft(t),T=this.getOptimalRelativeTop(t),$=this.shape_.getBBox();const A={x:r,y:-this.height-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},F={x:-this.width-30,y:T};T={x:$.width,y:T};var z={x:r,y:$.height};r=$.width<$.height?T:z,$=$.width<$.height?z:T,T=this.getOverlap(A,t),z=this.getOverlap(F,t);const q=this.getOverlap(r,t);t=this.getOverlap($,t),t=Math.max(T,z,q,t),T===t?(this.relativeLeft=A.x,this.relativeTop=A.y):z===t?(this.relativeLeft=F.x,this.relativeTop=F.y):q===t?(this.relativeLeft=r.x,this.relativeTop=r.y):(this.relativeLeft=$.x,this.relativeTop=$.y)}getOverlap(t,r){var T=this.workspace_.RTL?this.anchorXY.x-t.x-this.width:t.x+this.anchorXY.x;return t=t.y+this.anchorXY.y,Math.max(0,Math.min(1,(Math.min(T+this.width,r.left+r.width)-Math.max(T,r.left))*(Math.min(t+this.height,r.top+r.height)-Math.max(t,r.top))/(this.width*this.height)))}getOptimalRelativeLeft(t){let r=-this.width/4;if(this.width>t.width)return r;if(this.workspace_.RTL){var T=this.anchorXY.x-r,$=t.left+t.width;t=t.left+ue.scrollbarThickness/this.workspace_.scale,T-this.width<t?r=-(t-this.anchorXY.x+this.width):T>$&&(r=-($-this.anchorXY.x))}else{T=r+this.anchorXY.x,$=T+this.width;const A=t.left;t=t.left+t.width-ue.scrollbarThickness/this.workspace_.scale,T<A?r=A-this.anchorXY.x:$>t&&(r=t-this.anchorXY.x-this.width)}return r}getOptimalRelativeTop(t){let r=-this.height/4;if(this.height>t.height)return r;const T=this.anchorXY.y+r,$=T+this.height,A=t.top;t=t.top+t.height-ue.scrollbarThickness/this.workspace_.scale;const F=this.anchorXY.y;return T<A?r=A-F:$>t&&(r=t-F-this.height),r}positionBubble(){let t=this.anchorXY.x;t=this.workspace_.RTL?t-(this.relativeLeft+this.width):t+this.relativeLeft,this.moveTo(t,this.relativeTop+this.anchorXY.y)}moveTo(t,r){let T;(T=this.bubbleGroup)==null||T.setAttribute("transform","translate("+t+","+r+")")}setDragging(t){!t&&this.moveCallback&&this.moveCallback()}getBubbleSize(){return new Ie(this.width,this.height)}setBubbleSize(t,r){const T=2*Gt.BORDER_WIDTH;t=Math.max(t,T+45),r=Math.max(r,T+20),this.width=t,this.height=r;let $;($=this.bubbleBack)==null||$.setAttribute("width",t.toString());let A;(A=this.bubbleBack)==null||A.setAttribute("height",r.toString()),this.resizeGroup&&(this.workspace_.RTL?this.resizeGroup.setAttribute("transform","translate("+2*Gt.BORDER_WIDTH+","+(r-T)+") scale(-1 1)"):this.resizeGroup.setAttribute("transform","translate("+(t-T)+","+(r-T)+")")),this.autoLayout&&this.layoutBubble(),this.positionBubble(),this.renderArrow(),this.resizeCallback&&this.resizeCallback()}renderArrow(){const t=[];var r=this.width/2,T=this.height/2,$=-this.relativeLeft,A=-this.relativeTop;if(r===$&&T===A)t.push("M "+r+","+T);else{A-=T,$-=r,this.workspace_.RTL&&($*=-1);var F=Math.sqrt(A*A+$*$),z=Math.acos($/F);0>A&&(z=2*Math.PI-z);var q=z+Math.PI/2;q>2*Math.PI&&(q-=2*Math.PI);var ct=Math.sin(q);const le=Math.cos(q);var xt=this.getBubbleSize();q=(xt.width+xt.height)/Gt.ARROW_THICKNESS,q=Math.min(q,xt.width,xt.height)/4,xt=1-Gt.ANCHOR_RADIUS/F,$=r+xt*$,A=T+xt*A,xt=r+q*le;const ii=T+q*ct;r-=q*le,T-=q*ct,ct=z+this.arrowRadians,ct>2*Math.PI&&(ct-=2*Math.PI),z=Math.sin(ct)*F/Gt.ARROW_BEND,F=Math.cos(ct)*F/Gt.ARROW_BEND,t.push("M"+xt+","+ii),t.push("C"+(xt+F)+","+(ii+z)+" "+$+","+A+" "+$+","+A),t.push("C"+$+","+A+" "+(r+F)+","+(T+z)+" "+r+","+T)}t.push("z");let Yt;(Yt=this.bubbleArrow)==null||Yt.setAttribute("d",t.join(" "))}setColour(t){let r;(r=this.bubbleBack)==null||r.setAttribute("fill",t);let T;(T=this.bubbleArrow)==null||T.setAttribute("fill",t)}dispose(){this.onMouseDownBubbleWrapper&&p(this.onMouseDownBubbleWrapper),this.onMouseDownResizeWrapper&&p(this.onMouseDownResizeWrapper),Gt.unbindDragEvents(),K(this.bubbleGroup),this.disposed=!0}moveDuringDrag(t,r){t?t.translateSurface(r.x,r.y):this.moveTo(r.x,r.y),this.relativeLeft=this.workspace_.RTL?this.anchorXY.x-r.x-this.width:r.x-this.anchorXY.x,this.relativeTop=r.y-this.anchorXY.y,this.renderArrow()}getRelativeToSurfaceXY(){return new Et(this.workspace_.RTL?-this.relativeLeft+this.anchorXY.x-this.width:this.anchorXY.x+this.relativeLeft,this.anchorXY.y+this.relativeTop)}setAutoLayout(t){this.autoLayout=t}static unbindDragEvents(){Gt.onMouseUpWrapper&&(p(Gt.onMouseUpWrapper),Gt.onMouseUpWrapper=null),Gt.onMouseMoveWrapper&&(p(Gt.onMouseMoveWrapper),Gt.onMouseMoveWrapper=null)}static bubbleMouseUp(t){g(),Gt.unbindDragEvents()}static textToDom(t){const r=N(nt.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Gt.BORDER_WIDTH});t=t.split(`
`);for(let T=0;T<t.length;T++){const $=N(nt.TSPAN,{dy:"1em",x:Gt.BORDER_WIDTH},r),A=document.createTextNode(t[T]);$.appendChild(A)}return r}static createNonEditableBubble(t,r,T){if(T=new Gt(r.workspace,t,r.pathObject.svgPath,T,null,null),T.setSvgId(r.id),r.RTL){r=t.getBBox().width;for(let $=0,A;A=t.childNodes[$];$++)A.setAttribute("text-anchor","end"),A.setAttribute("x",(r+Gt.BORDER_WIDTH).toString())}return T}};Gt.BORDER_WIDTH=6,Gt.ARROW_THICKNESS=5,Gt.ARROW_ANGLE=20,Gt.ARROW_BEND=4,Gt.ANCHOR_RADIUS=8,Gt.onMouseUpWrapper=null,Gt.onMouseMoveWrapper=null;var Tl,ld;Tl=28,c.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Tl,connectingSnapRadius:Tl,currentConnectionPreference:8,bumpDelay:250},ld={},ld.config=c.config$$module$build$src$core$config;var Eo=class{constructor(t){this.iconGroup_=null,this.collapseHidden=!0,this.SIZE=17,this.iconXY_=this.bubble_=null,t||R("Calling the Icon constructor with a null block","version 9","version 10","a non-null block"),this.block_=t}createIcon(){this.iconGroup_||(this.iconGroup_=N(nt.G,{class:"blocklyIconGroup"}),this.getBlock().isInFlyout&&G(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.getBlock().getSvgRoot().appendChild(this.iconGroup_),u(this.iconGroup_,"pointerup",this,this.iconClick_),this.updateEditable())}dispose(){K(this.iconGroup_),this.setVisible(!1)}updateEditable(){}isVisible(){return!!this.bubble_}iconClick_(t){this.getBlock().workspace.isDragging()||this.getBlock().isInFlyout||m(t)||this.setVisible(!this.isVisible())}applyColour(){this.bubble_&&this.isVisible()&&this.bubble_.setColour(this.getBlock().style.colourPrimary)}setIconLocation(t){this.iconXY_=t,this.bubble_&&this.isVisible()&&this.bubble_.setAnchorLocation(t)}computeIconLocation(){var t=this.getBlock().getRelativeToSurfaceXY();const r=fi(this.iconGroup_);t=new Et(t.x+r.x+this.SIZE/2,t.y+r.y+this.SIZE/2),Et.equals(this.getIconLocation(),t)||this.setIconLocation(t)}getIconLocation(){return this.iconXY_}getCorrectedSize(){return new Ie(this.SIZE,this.SIZE-2)}drawIcon_(t){}setVisible(t){}getBlock(){if(!this.block_)throw Error("Block is not set for this icon.");return this.block_}},jn={};jn.deepMerge=es,jn.inherits=yv,jn.mixin=Sv,jn.values=Cv;var As=class{constructor(t,r,T,$){this.name=t,this.startHats=!1,this.blockStyles=r||Object.create(null),this.categoryStyles=T||Object.create(null),this.componentStyles=$||Object.create(null),this.fontStyle=Object.create(null),Ut(gt.THEME,t,this)}getClassName(){return this.name+"-theme"}setBlockStyle(t,r){this.blockStyles[t]=r}setCategoryStyle(t,r){this.categoryStyles[t]=r}getComponentStyle(t){return(t=this.componentStyles[t])&&typeof t=="string"&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null}setComponentStyle(t,r){this.componentStyles[t]=r}setFontStyle(t){this.fontStyle=t}setStartHats(t){this.startHats=t}static defineTheme(t,r){t=t.toLowerCase();const T=new As(t);let $=r.base;if($){if(typeof $=="string"){let A;$=(A=Sr(gt.THEME,$))!=null?A:void 0}$ instanceof As&&(es(T,$),T.name=t)}return es(T.blockStyles,r.blockStyles),es(T.categoryStyles,r.categoryStyles),es(T.componentStyles,r.componentStyles),es(T.fontStyle,r.fontStyle),r.startHats!==null&&(T.startHats=r.startHats),T}},vm={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},gm={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},xo=new As("classic",vm,gm),El="categoryToolbox",hd="flyoutToolbox",Ft;(function(t){t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"})(Ft||(Ft={}));var ud={hasCategoriesInternal:$v},ls={};ls.Position=Ft,ls.TEST_ONLY=ud,ls.convertFlyoutDefToJsonArray=Br,ls.convertToolboxDefToJson=wr,ls.hasCategories=ma,ls.isCategoryCollapsible=Ta,ls.parseToolboxTree=Lu;var yi=class{constructor(t){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let r=null,T=!1;var $=!1,A=!1,F=!1,z=!1,q=!1;const ct=!!t.readOnly;if(!ct){var xt;r=wr((xt=t.toolbox)!=null?xt:null),T=ma(r),$=t.trashcan,$=$===void 0?T:$,A=t.collapse,A=A===void 0?T:A,F=t.comments,F=F===void 0?T:F,z=t.disable,z=z===void 0?T:z,q=t.sounds,q=q===void 0?!0:q}xt=t.maxTrashcanContents,$?xt===void 0&&(xt=32):xt=0;const Yt=!!t.rtl;let le=t.horizontalLayout;le===void 0&&(le=!1);var ii=t.toolboxPosition!=="end";ii=le?ii?Ft.TOP:Ft.BOTTOM:ii===Yt?Ft.RIGHT:Ft.LEFT;let Sh=t.css;Sh===void 0&&(Sh=!0);let Ch="https://blockly-demo.appspot.com/static/media/";t.media?Ch=t.media.endsWith("/")?t.media:t.media+"/":"path"in t&&(R("path","Nov 2014","Jul 2023","media"),Ch=t.path+"media/");const Mf=t.oneBasedIndex,Jm=t.renderer||"geras",Zm=t.plugins||{};let Rh=t.modalInputs;Rh===void 0&&(Rh=!0),this.RTL=Yt,this.oneBasedIndex=Mf===void 0?!0:Mf,this.collapse=A,this.comments=F,this.disable=z,this.readOnly=ct,this.maxBlocks=t.maxBlocks||1/0;let Pf;this.maxInstances=(Pf=t.maxInstances)!=null?Pf:null,this.modalInputs=Rh,this.pathToMedia=Ch,this.hasCategories=T,this.moveOptions=yi.parseMoveOptions_(t,T),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=$,this.maxTrashcanContents=xt,this.hasSounds=q,this.hasCss=Sh,this.horizontalLayout=le,this.languageTree=r,this.gridOptions=yi.parseGridOptions_(t),this.zoomOptions=yi.parseZoomOptions_(t),this.toolboxPosition=ii,this.theme=yi.parseThemeOptions_(t),this.renderer=Jm;let Df;this.rendererOverrides=(Df=t.rendererOverrides)!=null?Df:null;let bf;this.parentWorkspace=(bf=t.parentWorkspace)!=null?bf:null,this.plugins=Zm}static parseMoveOptions_(t,r){const T=t.move||{},$={};return T.scrollbars===void 0&&t.scrollbars===void 0?$.scrollbars=r:typeof T.scrollbars=="object"?($.scrollbars={horizontal:!!T.scrollbars.horizontal,vertical:!!T.scrollbars.vertical},$.scrollbars.horizontal&&$.scrollbars.vertical?$.scrollbars=!0:$.scrollbars.horizontal||$.scrollbars.vertical||($.scrollbars=!1)):$.scrollbars=!!T.scrollbars||!!t.scrollbars,$.wheel=$.scrollbars&&T.wheel!==void 0?!!T.wheel:typeof $.scrollbars=="object",$.drag=$.scrollbars?T.drag===void 0?!0:!!T.drag:!1,$}static parseZoomOptions_(t){t=t.zoom||{};const r={};return r.controls=t.controls===void 0?!1:!!t.controls,r.wheel=t.wheel===void 0?!1:!!t.wheel,r.startScale=t.startScale===void 0?1:Number(t.startScale),r.maxScale=t.maxScale===void 0?3:Number(t.maxScale),r.minScale=t.minScale===void 0?.3:Number(t.minScale),r.scaleSpeed=t.scaleSpeed===void 0?1.2:Number(t.scaleSpeed),r.pinch=t.pinch===void 0?r.wheel||r.controls:!!t.pinch,r}static parseGridOptions_(t){t=t.grid||{};const r={};return r.spacing=Number(t.spacing)||0,r.colour=t.colour||"#888",r.length=t.length===void 0?1:Number(t.length),r.snap=0<r.spacing&&!!t.snap,r}static parseThemeOptions_(t){return t=t.theme||xo,typeof t=="string"?Sr(gt.THEME,t):t instanceof As?t:As.defineTheme(t.name||"builtin"+yn(),t)}},cd;c.Mutator$$module$build$src$core$mutator=class extends Eo{constructor(t,r){r||R("Calling the Mutator constructor without passing the block it is attached to","version 9","version 10","the constructor by passing the list of subblocks and the block instance to attach the mutator to"),super(r!=null?r:null),this.workspace_=null,this.workspaceHeight=this.workspaceWidth=0,this.updateWorkspacePid=this.sourceListener=this.rootBlock=this.svgDialog=null,this.quarkNames=t}setBlock(t){this.block_=t}getWorkspace(){return this.workspace_}drawIcon_(t){N(nt.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),N(nt.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),N(nt.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)}iconClick_(t){this.getBlock().isEditable()&&super.iconClick_(t)}createEditor(){if(this.svgDialog=N(nt.SVG,{x:Gt.BORDER_WIDTH,y:Gt.BORDER_WIDTH}),this.quarkNames.length){var t=qt("xml");for(let $=0,A;A=this.quarkNames[$];$++){var r=qt("block");r.setAttribute("type",A),t.appendChild(r)}}else t=null;var T=this.getBlock();return r=new yi({disable:!1,parentWorkspace:T.workspace,media:T.workspace.options.pathToMedia,rtl:T.RTL,horizontalLayout:!1,renderer:T.workspace.options.renderer,rendererOverrides:T.workspace.options.rendererOverrides}),r.toolboxPosition=T.RTL?Ft.RIGHT:Ft.LEFT,(T=!!t)&&(r.languageTree=wr(t)),this.workspace_=this.newWorkspaceSvg(r),this.workspace_.internalIsMutator=!0,this.workspace_.addChangeListener(Zo),t=T?this.workspace_.addFlyout(nt.G):null,r=this.workspace_.createDom("blocklyMutatorBackground"),t&&r.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog.appendChild(r),this.svgDialog}newWorkspaceSvg(t){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}updateEditable(){super.updateEditable(),this.getBlock().isInFlyout||(this.getBlock().isEditable()?this.iconGroup_&&V(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&G(this.iconGroup_,"blocklyIconGroupReadonly")))}resizeBubble(){if(this.workspace_){var t=2*Gt.BORDER_WIDTH,r=this.workspace_.getCanvas(),T=r.getBBox(),$=T.width+T.x,A=T.height+3*t,F=this.workspace_.getFlyout();if(F){const z=F.getWorkspace().getMetricsManager().getScrollMetrics();A=Math.max(A,z.height+20),$+=F.getWidth()}(F=this.getBlock().RTL)&&($=-T.x),$+=3*t,(Math.abs(this.workspaceWidth-$)>t||Math.abs(this.workspaceHeight-A)>t)&&(this.workspaceWidth=$,this.workspaceHeight=A,this.bubble_.setBubbleSize($+t,A+t),this.svgDialog.setAttribute("width",`${$}`),this.svgDialog.setAttribute("height",`${A}`),this.workspace_.setCachedParentSvgSize($,A)),F&&r.setAttribute("transform",`translate(${this.workspaceWidth}, 0)`),this.workspace_.resize()}}onBubbleMove(){this.workspace_&&this.workspace_.recordDragTargets()}setVisible(t){if(t!==this.isVisible()){var r=this.getBlock();if(It(new(Ot(Xi))(r,t,"mutator")),t){this.bubble_=new Gt(r.workspace,this.createEditor(),r.pathObject.svgPath,this.iconXY_,null,null),t=this.workspace_,this.bubble_.setSvgId(r.id),this.bubble_.registerMoveEvent(this.onBubbleMove.bind(this));var T=t.options.languageTree,$=t.getFlyout();T&&($.init(t),$.show(T)),this.rootBlock=r.decompose(t),T=this.rootBlock.getDescendants(!1);for(let A=0,F;F=T[A];A++)F.render();if(this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1),$?(T=2*$.CORNER_RADIUS,$=this.rootBlock.RTL?$.getWidth()+T:T):$=T=16,r.RTL&&($=-$),this.rootBlock.moveBy($,T),r.saveConnections){const A=this.rootBlock;r.saveConnections(A),this.sourceListener=()=>{const F=this.getBlock();F.saveConnections&&F.saveConnections(A)},r.workspace.addChangeListener(this.sourceListener)}this.resizeBubble(),t.addChangeListener(this.workspaceChanged.bind(this)),this.updateWorkspace(),this.applyColour()}else this.svgDialog=null,this.workspace_.dispose(),this.rootBlock=this.workspace_=null,($=this.bubble_)==null||$.dispose(),this.bubble_=null,this.workspaceHeight=this.workspaceWidth=0,this.sourceListener&&(r.workspace.removeChangeListener(this.sourceListener),this.sourceListener=null)}}workspaceChanged(t){this.shouldIgnoreMutatorEvent_(t)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.updateWorkspace()},0))}shouldIgnoreMutatorEvent_(t){return t.isUiEvent||t.type===Le||t.type===Re&&t.element==="disabled"}updateWorkspace(){if(!this.workspace_.isDragging()){var t=this.workspace_.getTopBlocks(!1);for(let $=0,A;A=t[$];$++){var r=A.getRelativeToSurfaceXY();if(20>r.y&&A.moveBy(0,20-r.y),A.RTL){var T=-20;const F=this.workspace_.getFlyout();F&&(T-=F.getWidth()),r.x>T&&A.moveBy(T-r.x,0)}else 20>r.x&&A.moveBy(20-r.x,0)}}if(this.rootBlock&&this.rootBlock.workspace===this.workspace_){(t=oe())||Pt(!0);const $=this.getBlock();if(r=Os.getExtraBlockState_($),T=$.rendered,$.rendered=!1,$.compose(this.rootBlock),$.rendered=T,$.initSvg(),$.rendered&&$.render(),T=Os.getExtraBlockState_($),r!==T){It(new(Ot(Re))($,"mutation",null,r,T));const A=oe();setTimeout(function(){const F=oe();Pt(A),$.bumpNeighbours(),Pt(F)},c.config$$module$build$src$core$config.bumpDelay)}this.workspace_.isDragging()||setTimeout(()=>this.resizeBubble(),0),Pt(t)}}dispose(){this.getBlock().mutator=null,super.dispose()}updateBlockStyle(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){const r=t.getAllBlocks(!1);for(let T=0,$;$=r[T];T++)$.setStyle($.getStyleName());if(t=t.getFlyout()){t=t.getWorkspace().getAllBlocks(!1);for(let T=0,$;$=t[T];T++)$.setStyle($.getStyleName())}}}static reconnect(t,r,T){if(!t||!t.getSourceBlock().workspace)return!1;T=r.getInput(T).connection;const $=t.targetBlock();return $&&$!==r||!T||T.targetConnection===t?!1:(T.isConnected()&&T.disconnect(),T.connect(t),!0)}static findParentWs(t){let r=null;if(t&&t.options){const T=t.options.parentWorkspace;t.isFlyout?T&&T.options&&(r=T.options.parentWorkspace):T&&(r=T)}return r}},cd={},cd.Mutator=c.Mutator$$module$build$src$core$mutator;var nn=Object.create(null),mm={allExtensions:nn};Fr("parent_tooltip_when_inline",Fv),c.module$build$src$core$extensions={},c.module$build$src$core$extensions.TEST_ONLY=mm,c.module$build$src$core$extensions.apply=xa,c.module$build$src$core$extensions.buildTooltipForDropdown=Nv,c.module$build$src$core$extensions.buildTooltipWithFieldText=Bv,c.module$build$src$core$extensions.isRegistered=Mu,c.module$build$src$core$extensions.register=Fr,c.module$build$src$core$extensions.registerMixin=Ov,c.module$build$src$core$extensions.registerMutator=Av,c.module$build$src$core$extensions.runAfterPageLoad=Gr,c.module$build$src$core$extensions.unregister=Lv;var dd={};dd.removeElem=Ve;var zi={};zi.arc=ve,zi.curve=Je,zi.line=$n,zi.lineOnAxis=St,zi.lineTo=Ui,zi.moveBy=ae,zi.moveTo=be,zi.point=Lt;var Xt={};Xt.Coordinate=Et,Xt.KeyCodes=Rt,Xt.Rect=de,Xt.Size=Ie,Xt.Svg=nt,Xt.aria=Kn,Xt.array=dd,Xt.arrayRemove=Yv,Xt.browserEvents=Vi,Xt.checkMessageReferences=Vv,Xt.colour=we,Xt.deprecation=Ce,Xt.dom=xe,Xt.extensions=c.module$build$src$core$extensions,Xt.getBlockTypeCounts=Kv,Xt.getDocumentScroll=zv,Xt.getInjectionDivXY_=Uv,Xt.getRelativeXY=Gv,Xt.getViewportBBox=Xv,Xt.idGenerator=eo,Xt.is3dSupported=Wv,Xt.math=Qr,Xt.object=jn,Xt.parseBlockColour=_v,Xt.parsing=Yn,Xt.replaceMessageReferences=Hv,Xt.runAfterPageLoad=Jv,Xt.screenToWsCoordinates=jv,Xt.string=c.module$build$src$core$utils$string,Xt.style=Mi,Xt.svgMath=as,Xt.svgPaths=zi,Xt.tokenizeInterpolation=kv,Xt.toolbox=ls,Xt.userAgent=Hi,Xt.xml=c.module$build$src$core$utils$xml;var xl=class extends mi{constructor(t,r){super(r),this.type=Nn,this.isOpen=t}toJson(){const t=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return t.isOpen=this.isOpen,t}fromJson(t){R("Blockly.Events.TrashcanOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.isOpen=t.isOpen}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new xl),r.isOpen=t.isOpen,r}};Ut(gt.EVENT,Nn,xl);var Ki=class{constructor(t){this.name_=t}toString(){return this.name_}};Ki.POSITIONABLE=new Ki("positionable"),Ki.DRAG_TARGET=new Ki("drag_target"),Ki.DELETE_AREA=new Ki("delete_area"),Ki.AUTOHIDEABLE=new Ki("autohideable");var Oe=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(t,r){const T=t.component.id;if(!r&&this.componentData.has(T)){var $;throw Error('Plugin "'+T+'" with capabilities "'+(($=this.componentData.get(T))==null?void 0:$.capabilities)+'" already added.')}for(this.componentData.set(T,t),r=[],$=0;$<t.capabilities.length;$++){const A=String(t.capabilities[$]).toLowerCase();if(r.push(A),this.capabilityToComponentIds.has(A)){let F;(F=this.capabilityToComponentIds.get(A))==null||F.push(T)}else this.capabilityToComponentIds.set(A,[T])}this.componentData.get(T).capabilities=r}removeComponent(t){const r=this.componentData.get(t);if(r){for(let T=0;T<r.capabilities.length;T++){const $=String(r.capabilities[T]).toLowerCase();Ve(this.capabilityToComponentIds.get($),t)}this.componentData.delete(t)}}addCapability(t,r){if(!this.getComponent(t))throw Error('Cannot add capability, "'+r+'". Plugin "'+t+'" has not been added to the ComponentManager');if(this.hasCapability(t,r))console.warn('Plugin "'+t+'already has capability "'+r+'"');else{r=String(r).toLowerCase();var T;(T=this.componentData.get(t))==null||T.capabilities.push(r);var $;($=this.capabilityToComponentIds.get(r))==null||$.push(t)}}removeCapability(t,r){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+r+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,r)?(r=String(r).toLowerCase(),Ve(this.componentData.get(t).capabilities,r),Ve(this.capabilityToComponentIds.get(r),t)):console.warn('Plugin "'+t+`doesn't have capability "`+r+'" to remove')}hasCapability(t,r){return r=String(r).toLowerCase(),this.componentData.has(t)&&this.componentData.get(t).capabilities.indexOf(r)!==-1}getComponent(t){let r;return(r=this.componentData.get(t))==null?void 0:r.component}getComponents(t,r){if(t=String(t).toLowerCase(),t=this.capabilityToComponentIds.get(t),!t)return[];const T=[];if(r){const $=[];t.forEach(A=>{$.push(this.componentData.get(A))}),$.sort(function(A,F){return A.weight-F.weight}),$.forEach(function(A){T.push(A.component)})}else t.forEach($=>{T.push(this.componentData.get($).component)});return T}};Oe.Capability=Ki;var _n=class extends Error{},fd=class extends _n{constructor(t){super("Expected to find a 'type' property, defining the block type"),this.state=t}},Jn=class extends _n{constructor(t,r,T){super(`The block ${r.toDevString()} is missing a(n) ${t}
connection`),this.block=r,this.state=T}},pd=class extends _n{constructor(t,r,T,$){super(`The block ${T.toDevString()} could not connect its
${r} to its parent, because: ${t}`),this.childBlock=T,this.childState=$}},vd=class extends _n{constructor(t){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=t}},rn={};rn.BadConnectionCheck=pd,rn.DeserializationError=_n,rn.MissingBlockType=fd,rn.MissingConnection=Jn,rn.RealChildOfShadow=vd;var gd=100,md=75,Td=50,yo={};yo.BLOCKS=Td,yo.PROCEDURES=md,yo.VARIABLES=gd;var yl={};yl.register=Ca,yl.unregister=Zv;var Ed=class{constructor(){this.priority=Td}save(t){const r=[];for(const T of t.getTopBlocks(!1))(t=ki(T,{addCoordinates:!0,doFullSerialization:!1}))&&r.push(t);return r.length?{languageVersion:0,blocks:r}:null}load(t,r){t=t.blocks;for(const T of t)ms(T,r,{recordUndo:ci()})}clear(t){for(const r of t.getTopBlocks(!1))r.dispose(!1)}};Ca("blocks",new Ed);var Zn={};Zn.BlockSerializer=Ed,Zn.append=ms,Zn.appendInternal=Ra,Zn.save=ki;var Sl=class extends qs{constructor(t){super(t),this.type=Le,t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=Lr(t),this.ids=Rr(t),this.json=ki(t,{addCoordinates:!0}))}toJson(){const t=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return t.xml=ri(this.xml),t.ids=this.ids,t.json=this.json,this.recordUndo||(t.recordUndo=this.recordUndo),t}fromJson(t){R("Blockly.Events.BlockCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.xml=Be(t.xml),this.ids=t.ids,this.json=t.json,t.recordUndo!==void 0&&(this.recordUndo=t.recordUndo)}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new Sl),r.xml=Be(t.xml),r.ids=t.ids,r.json=t.json,t.recordUndo!==void 0&&(r.recordUndo=t.recordUndo),r}run(t){const r=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(t)ms(this.json,r);else for(t=0;t<this.ids.length;t++){const T=this.ids[t],$=r.getBlockById(T);$?$.dispose(!1):T===this.blockId&&console.warn("Can't uncreate non-existent block: "+T)}}};Ut(gt.EVENT,Le,Sl);var Cl=class extends qs{constructor(t){if(super(t),this.type=Pi,t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=Lr(t),this.ids=Rr(t),this.wasShadow=t.isShadow(),this.oldJson=ki(t,{addCoordinates:!0})}}toJson(){const t=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return t.oldXml=ri(this.oldXml),t.ids=this.ids,t.wasShadow=this.wasShadow,t.oldJson=this.oldJson,this.recordUndo||(t.recordUndo=this.recordUndo),t}fromJson(t){R("Blockly.Events.BlockDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.oldXml=Be(t.oldXml),this.ids=t.ids,this.wasShadow=t.wasShadow||this.oldXml.tagName.toLowerCase()==="shadow",this.oldJson=t.oldJson,t.recordUndo!==void 0&&(this.recordUndo=t.recordUndo)}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new Cl),r.oldXml=Be(t.oldXml),r.ids=t.ids,r.wasShadow=t.wasShadow||r.oldXml.tagName.toLowerCase()==="shadow",r.oldJson=t.oldJson,t.recordUndo!==void 0&&(r.recordUndo=t.recordUndo),r}run(t){const r=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(t)for(t=0;t<this.ids.length;t++){const T=this.ids[t],$=r.getBlockById(T);$?$.dispose(!1):T===this.blockId&&console.warn("Can't delete non-existent block: "+T)}else ms(this.oldJson,r)}};Ut(gt.EVENT,Pi,Cl);var yt;(function(t){t[t.INPUT_VALUE=1]="INPUT_VALUE",t[t.OUTPUT_VALUE=2]="OUTPUT_VALUE",t[t.NEXT_STATEMENT=3]="NEXT_STATEMENT",t[t.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(yt||(yt={})),c.module$build$src$core$connection_type={},c.module$build$src$core$connection_type.ConnectionType=yt;var Jt=class{constructor(t,r){this.type=r,this.targetConnection=null,this.disposed=!1,this.shadowDom_=this.check_=null,this.y=this.x=0,this.shadowState_=null,this.sourceBlock_=t}connect_(t){const r=yt.INPUT_VALUE,T=this.getSourceBlock();var $=t.getSourceBlock();t.isConnected()&&t.disconnect();let A;if(this.isConnected()){const z=this.stashShadowState_(),q=this.targetBlock();q.isShadow()?q.dispose(!1):(this.disconnect(),A=q),this.applyShadowState_(z)}let F;Se()&&(F=new(Ot(Fe))($)),pg(this,t),$.setParent(T),F&&(F.recordNew(),It(F)),A&&(t=this.type===r?A.outputConnection:A.previousConnection,($=Jt.getConnectionForOrphanedConnection($,t))?t.connect($):t.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal_();const t=this.targetBlock();t&&t.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===yt.INPUT_VALUE||this.type===yt.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(t){}connect(t){if(this.targetConnection===t)return!0;if(this.getConnectionChecker().canConnect(this,t,!1)){const r=oe();r||Pt(!0),this.isSuperior()?this.connect_(t):t.connect_(this),r||Pt(!1)}return this.isConnected()}disconnect(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!==this)throw Error("Target connection not connected to source connection.");let r,T;this.isSuperior()?(r=this.sourceBlock_,T=t.getSourceBlock(),t=this):(r=t.getSourceBlock(),T=this.sourceBlock_);const $=oe();$||Pt(!0),this.disconnectInternal_(r,T),T.isShadow()||t.respawnShadow_(),$||Pt(!1)}disconnectInternal_(t,r){let T;Se()&&(T=new(Ot(Fe))(r)),(t=this.targetConnection)&&(t.targetConnection=null),this.targetConnection=null,r.setParent(null),T&&(T.recordNew(),It(T))}respawnShadow_(){this.createShadowBlock_(!0)}targetBlock(){if(this.isConnected()){let t,r;return(r=(t=this.targetConnection)==null?void 0:t.getSourceBlock())!=null?r:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this}getCheck(){return this.check_}setShadowDom(t){this.setShadowStateInternal_({shadowDom:t})}getShadowDom(t){return t&&this.targetBlock().isShadow()?ps(this.targetBlock()):this.shadowDom_}setShadowState(t){this.setShadowStateInternal_({shadowState:t})}getShadowState(t){return t&&this.targetBlock()&&this.targetBlock().isShadow()?ki(this.targetBlock()):this.shadowState_}neighbours(t){return[]}getParentInput(){let t=null;const r=this.sourceBlock_.inputList;for(let T=0;T<r.length;T++)if(r[T].connection===this){t=r[T];break}return t}toString(){const t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection===this)var r="Output Connection of ";else if(t.previousConnection===this)r="Previous Connection of ";else if(t.nextConnection===this)r="Next Connection of ";else{r=null;for(let T=0,$;$=t.inputList[T];T++)if($.connection===this){r=$;break}if(r)r='Input "'+r.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return r+t.toDevString()}stashShadowState_(){const t=this.getShadowDom(!0),r=this.getShadowState(!0);return this.shadowState_=this.shadowDom_=null,{shadowDom:t,shadowState:r}}applyShadowState_({shadowDom:t,shadowState:r}){this.shadowDom_=t,this.shadowState_=r}setShadowStateInternal_({shadowDom:t=null,shadowState:r=null}={}){this.shadowDom_=t,this.shadowState_=r,(t=this.targetBlock())?t.isShadow()?(t.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock())):(t=this.createShadowBlock_(!1),this.serializeShadow_(t),t&&t.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock()))}createShadowBlock_(t){var r=this.getSourceBlock();const T=this.getShadowState(),$=this.getShadowDom();if(r.isDeadOrDying()||!T&&!$)return null;if(T)return r=Ra(T,r.workspace,{parentConnection:t?this:void 0,isShadow:!0,recordUndo:!1});if($){if(r=Fs($,r.workspace),t)if(this.type===yt.INPUT_VALUE){if(!r.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(r.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===yt.NEXT_STATEMENT){if(!r.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(r.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return r}return null}serializeShadow_(t){t&&(this.shadowDom_=ps(t),this.shadowState_=ki(t))}static getConnectionForOrphanedConnection(t,r){if(r.type===yt.OUTPUT_VALUE)return gg(t,r.getSourceBlock());t=t.lastConnectionInStack(!0);const T=r.getConnectionChecker();return t&&T.canConnect(r,t,!1)?t:null}};Jt.CAN_CONNECT=0,Jt.REASON_SELF_CONNECTION=1,Jt.REASON_WRONG_TYPE=2,Jt.REASON_TARGET_NULL=3,Jt.REASON_CHECKS_FAILED=4,Jt.REASON_DIFFERENT_WORKSPACES=5,Jt.REASON_SHADOW_PARENT=6,Jt.REASON_DRAG_CHECKS_FAILED=7,Jt.REASON_PREVIOUS_AND_OUTPUT=8;var Qn="_TEMP_COLLAPSED_INPUT",qn="_TEMP_COLLAPSED_FIELD",Rl={};Rl.COLLAPSED_FIELD_NAME=qn,Rl.COLLAPSED_INPUT_NAME=Qn,c.FieldLabel$$module$build$src$core$field_label=class extends Wt{constructor(t,r,T){super(Wt.SKIP_SETUP),this.class_=null,this.EDITABLE=!1,t!==Wt.SKIP_SETUP&&(T?this.configure_(T):this.class_=r||null,this.setValue(t))}configure_(t){super.configure_(t),t.class&&(this.class_=t.class)}initView(){this.createTextElement_(),this.class_&&G(this.getTextElement(),this.class_)}doClassValidation_(t){return t==null?null:String(t)}setClass(t){this.textElement_&&(this.class_&&V(this.textElement_,this.class_),t&&G(this.textElement_,t)),this.class_=t}static fromJson(t){return new this(ce(t.text),void 0,t)}},oi("field_label",c.FieldLabel$$module$build$src$core$field_label),c.FieldLabel$$module$build$src$core$field_label.prototype.DEFAULT_VALUE="";var on=class{constructor(t,r,T,$){if(this.type=t,this.name=r,this.connection=$,this.fieldRow=[],this.align=c.Align$$module$build$src$core$input.LEFT,this.visible=!0,t!==kt.DUMMY&&!r)throw Error("Value inputs and statement inputs must have non-empty name.");this.sourceBlock=T}getSourceBlock(){return this.sourceBlock}appendField(t,r){return this.insertFieldAt(this.fieldRow.length,t,r),this}insertFieldAt(t,r,T){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(r||r===""&&T)&&(typeof r=="string"&&(r=ga({type:"field_label",text:r})),r.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(r.init(),r.applyColour()),r.name=T,r.setVisible(this.isVisible()),r.prefixField&&(t=this.insertFieldAt(t,r.prefixField)),this.fieldRow.splice(t,0,r),t++,r.suffixField&&(t=this.insertFieldAt(t,r.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours())),t}removeField(t,r){for(let T=0,$;$=this.fieldRow[T];T++)if($.name===t)return $.dispose(),this.fieldRow.splice(T,1),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours()),!0;if(r)return!1;throw Error('Field "'+t+'" not found.')}isVisible(){return this.visible}setVisible(t){let r=[];if(this.visible===t)return r;this.visible=t;for(let $=0,A;A=this.fieldRow[$];$++)A.setVisible(t);if(this.connection){var T=this.connection;t?r=T.startTrackingAll():T.stopTrackingAll(),(T=T.targetBlock())&&(T.getSvgRoot().style.display=t?"block":"none")}return r}markDirty(){for(let t=0,r;r=this.fieldRow[t];t++)r.markDirty()}setCheck(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this}setAlign(t){return this.align=t,this.sourceBlock.rendered&&this.sourceBlock.render(),this}setShadowDom(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()}dispose(){for(let t=0,r;r=this.fieldRow[t];t++)r.dispose();this.connection&&this.connection.dispose()}},$l;(function(t){t=t.Align||(t.Align={}),t[t.LEFT=-1]="LEFT",t[t.CENTRE=0]="CENTRE",t[t.RIGHT=1]="RIGHT"})(on||(on={})),c.Align$$module$build$src$core$input=on.Align,$l={},$l.Align=c.Align$$module$build$src$core$input,$l.Input=on;var dt=class{constructor(t,r,T){if(this.wsCoordinate_=null,!r)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=dt.isConnectionType_(t),this.location_=r,this.processParams_(T||null)}processParams_(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)}getLocation(){return this.location_}getType(){return this.type_}getWsCoordinate(){return this.wsCoordinate_}isConnection(){return this.isConnection_}findNextForInput_(){var t=this.location_.getParentInput();const r=t.getSourceBlock();for(t=r.inputList.indexOf(t),t+=1;t<r.inputList.length;t++){const T=r.inputList[t],$=T.fieldRow;for(let A=0;A<$.length;A++){const F=$[A];if(F.isClickable()||dt.NAVIGATE_ALL_FIELDS)return dt.createFieldNode(F)}if(T.connection)return dt.createInputNode(T)}return null}findNextForField_(){var t=this.location_,r=t.getParentInput();const T=t.getSourceBlock();if(!T)throw Error("The current AST location is not associated with a block");var $=T.inputList.indexOf(r);for(t=r.fieldRow.indexOf(t)+1;$<T.inputList.length;$++){r=T.inputList[$];const A=r.fieldRow;for(;t<A.length;){if(A[t].isClickable()||dt.NAVIGATE_ALL_FIELDS)return dt.createFieldNode(A[t]);t++}if(t=0,r.connection)return dt.createInputNode(r)}return null}findPrevForInput_(){const t=this.location_.getParentInput(),r=t.getSourceBlock();for(var T=r.inputList.indexOf(t);0<=T;T--){var $=r.inputList[T];if($.connection&&$!==t)return dt.createInputNode($);$=$.fieldRow;for(let A=$.length-1;0<=A;A--){const F=$[A];if(F.isClickable()||dt.NAVIGATE_ALL_FIELDS)return dt.createFieldNode(F)}}return null}findPrevForField_(){var t=this.location_;const r=t.getParentInput(),T=t.getSourceBlock();if(!T)throw Error("The current AST location is not associated with a block");var $=T.inputList.indexOf(r);for(t=r.fieldRow.indexOf(t)-1;0<=$;$--){var A=T.inputList[$];if(A.connection&&A!==r)return dt.createInputNode(A);for(A=A.fieldRow;-1<t;){if(A[t].isClickable()||dt.NAVIGATE_ALL_FIELDS)return dt.createFieldNode(A[t]);t--}0<=$-1&&(t=T.inputList[$-1].fieldRow.length-1)}return null}navigateBetweenStacks_(t){var r=this.getLocation();if(r.getSourceBlock){var T=r.getSourceBlock();T&&(r=T)}if(!r||r.isDeadOrDying())return null;T=r.getRootBlock(),r=T.workspace.getTopBlocks(!0);for(let $=0;$<r.length;$++)if(T.id===r[$].id)return t=$+(t?1:-1),t===-1||t===r.length?null:dt.createStackNode(r[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")}findTopASTNodeForBlock_(t){const r=Ur(t);return r?dt.createConnectionNode(r):dt.createBlockNode(t)}getOutAstNodeForBlock_(t){if(!t)return null;t=t.getTopStackBlock();const r=Ur(t);return r&&r.targetConnection&&r.targetConnection.getParentInput()?dt.createInputNode(r.targetConnection.getParentInput()):dt.createStackNode(t)}findFirstFieldOrInput_(t){t=t.inputList;for(let r=0;r<t.length;r++){const T=t[r],$=T.fieldRow;for(let A=0;A<$.length;A++){const F=$[A];if(F.isClickable()||dt.NAVIGATE_ALL_FIELDS)return dt.createFieldNode(F)}if(T.connection)return dt.createInputNode(T)}return null}getSourceBlock(){return this.getType()===dt.types.BLOCK?this.getLocation():this.getType()===dt.types.STACK?this.getLocation():this.getType()===dt.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type_){case dt.types.STACK:return this.navigateBetweenStacks_(!0);case dt.types.OUTPUT:return dt.createBlockNode(this.location_.getSourceBlock());case dt.types.FIELD:return this.findNextForField_();case dt.types.INPUT:return this.findNextForInput_();case dt.types.BLOCK:return dt.createConnectionNode(this.location_.nextConnection);case dt.types.PREVIOUS:return dt.createBlockNode(this.location_.getSourceBlock());case dt.types.NEXT:return dt.createConnectionNode(this.location_.targetConnection)}return null}in(){switch(this.type_){case dt.types.WORKSPACE:const t=this.location_.getTopBlocks(!0);if(0<t.length)return dt.createStackNode(t[0]);break;case dt.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case dt.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case dt.types.INPUT:return dt.createConnectionNode(this.location_.targetConnection)}return null}prev(){switch(this.type_){case dt.types.STACK:return this.navigateBetweenStacks_(!1);case dt.types.FIELD:return this.findPrevForField_();case dt.types.INPUT:return this.findPrevForInput_();case dt.types.BLOCK:var t=Ur(this.location_);return dt.createConnectionNode(t);case dt.types.PREVIOUS:if((t=this.location_.targetConnection)&&!t.getParentInput())return dt.createConnectionNode(t);break;case dt.types.NEXT:return dt.createBlockNode(this.location_.getSourceBlock())}return null}out(){switch(this.type_){case dt.types.STACK:var t=this.location_,r=t.getRelativeToSurfaceXY();return r=new Et(r.x,r.y+dt.DEFAULT_OFFSET_Y),dt.createWorkspaceNode(t.workspace,r);case dt.types.OUTPUT:return t=this.location_,(r=t.targetConnection)?dt.createConnectionNode(r):dt.createStackNode(t.getSourceBlock());case dt.types.FIELD:if(t=this.location_.getSourceBlock(),!t)throw Error("The current AST location is not associated with a block");return dt.createBlockNode(t);case dt.types.INPUT:return dt.createBlockNode(this.location_.getSourceBlock());case dt.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case dt.types.PREVIOUS:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock());case dt.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null}static isConnectionType_(t){switch(t){case dt.types.PREVIOUS:case dt.types.NEXT:case dt.types.INPUT:case dt.types.OUTPUT:return!0}return!1}static createFieldNode(t){return t?new dt(dt.types.FIELD,t):null}static createConnectionNode(t){if(!t)return null;const r=t.type;return r===yt.INPUT_VALUE||r===yt.NEXT_STATEMENT&&t.getParentInput()?dt.createInputNode(t.getParentInput()):r===yt.NEXT_STATEMENT?new dt(dt.types.NEXT,t):r===yt.OUTPUT_VALUE?new dt(dt.types.OUTPUT,t):r===yt.PREVIOUS_STATEMENT?new dt(dt.types.PREVIOUS,t):null}static createInputNode(t){return t&&t.connection?new dt(dt.types.INPUT,t.connection):null}static createBlockNode(t){return t?new dt(dt.types.BLOCK,t):null}static createStackNode(t){return t?new dt(dt.types.STACK,t):null}static createWorkspaceNode(t,r){return r&&t?new dt(dt.types.WORKSPACE,t,{wsCoordinate:r}):null}static createTopNode(t){const r=Ur(t);return r?dt.createConnectionNode(r):dt.createBlockNode(t)}};dt.NAVIGATE_ALL_FIELDS=!1,dt.DEFAULT_OFFSET_Y=-20,function(t){t=t.types||(t.types={}),t.FIELD="field",t.BLOCK="block",t.INPUT="input",t.OUTPUT="output",t.NEXT="next",t.PREVIOUS="previous",t.STACK="stack",t.WORKSPACE="workspace"}(dt||(dt={}));var an=class{constructor(t,r,T){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.loadExtraState=this.saveExtraState=this.domToMutation=this.mutationToDom=this.destroy=this.init=void 0,this.suppressPrefixSuffix=!1,this.decompose=this.compose=this.getDeveloperVariables=void 0,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.disposing=!1,this.comment=null,this.isInsertionMarker_=!1,this.hat=void 0,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=t,this.id=T&&!t.getBlockById(T)?T:ui(),t.setBlockById(this.id,this),this.commentModel={text:null,pinned:!1,size:new Ie(160,80)},this.xy_=new Et(0,0),this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,r){if(this.type=r,T=Xe[r],!T||typeof T!="object")throw TypeError("Invalid block definition for type: "+r);Object.assign(this,T)}t.addTopBlock(this),t.addTypedBlock(this),new.target===an&&this.doInit_()}doInit_(){const t=oe();t||Pt(!0);const r=ci();try{typeof this.init=="function"&&(_e(!1),this.init(),_e(r)),Se()&&It(new(Ot(Le))(this))}finally{t||Pt(!1),_e(r)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(t){if(!this.isDeadOrDying()){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),Se()&&It(new(Ot(Pi))(this)),Te();try{this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0;for(let T=this.childBlocks_.length-1;0<=T;T--)this.childBlocks_[T].dispose(!1);for(let T=0,$;$=this.inputList[T];T++)$.dispose();this.inputList.length=0;const r=this.getConnections_(!0);for(let T=0,$;$=r[T];T++)$.dispose()}finally{Ee(),typeof this.destroy=="function"&&this.destroy(),this.disposed=!0}}}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(let t=0,r;r=this.inputList[t];t++)for(let T=0,$;$=r.fieldRow[T];T++)$.initModel&&$.initModel()}unplug(t){this.outputConnection&&this.unplugFromRow_(t),this.previousConnection&&this.unplugFromStack_(t)}unplugFromRow_(t){let r=null;this.outputConnection.isConnected()&&(r=this.outputConnection.targetConnection,this.outputConnection.disconnect()),r&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&(t=t.targetConnection,t==null||t.disconnect(),this.workspace.connectionChecker.canConnect(t,r,!1)?r.connect(t):t==null||t.onFailedConnect(r))}getOnlyValueConnection_(){let t=null;for(let r=0;r<this.inputList.length;r++){const T=this.inputList[r].connection;if(T&&T.type===yt.INPUT_VALUE&&T.targetConnection){if(t)return null;t=T}}return t}unplugFromStack_(t){let r=null;this.previousConnection.isConnected()&&(r=this.previousConnection.targetConnection,this.previousConnection.disconnect());const T=this.getNextBlock();t&&T&&!T.isShadow()&&(t=this.nextConnection.targetConnection,t==null||t.disconnect(),r&&this.workspace.connectionChecker.canConnect(r,t,!1)&&r.connect(t))}getConnections_(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(let r=0,T;T=this.inputList[r];r++)T.connection&&t.push(T.connection);return t}lastConnectionInStack(t){let r=this.nextConnection;for(;r;){const T=r.targetBlock();if(!T||t&&T.isShadow())return r;r=T.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(t){for(let r=0,T;T=this.inputList[r];r++)if(T.connection&&T.connection.targetBlock()===t)return T;return null}getSurroundParent(){let t=this,r;do if(r=t,t=t.getParent(),!t)return null;while(t.getNextBlock()===r);return t}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getFirstStatementConnection(){for(let t=0,r;r=this.inputList[t];t++)if(r.connection&&r.connection.type===yt.NEXT_STATEMENT)return r.connection;return null}getRootBlock(){let t,r=this;do t=r,r=t.parentBlock_;while(r);return t}getTopStackBlock(){let t=this,r;do r=t.getPreviousBlock();while(r&&r.getNextBlock()===t&&(t=r));return t}getChildren(t){if(!t)return this.childBlocks_;t=[];for(let T=0,$;$=this.inputList[T];T++)if($.connection){var r=$.connection.targetBlock();r&&t.push(r)}return(r=this.getNextBlock())&&t.push(r),t}setParent(t){if(t!==this.parentBlock_){var r=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),T=!!r;if(T&&t&&r!==t)throw Error("Block connected to superior one that is not new parent.");if(!T&&t)throw Error("Block not connected to new parent.");if(T&&!t)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Ve(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(t){const r=[this],T=this.getChildren(t);for(let $,A=0;$=T[A];A++)r.push(...$.getDescendants(t));return r}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setDeletable(t){this.deletable_=t}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setMovable(t){this.movable_=t}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(H(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(t){this.isShadow_=t}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(t){this.isInsertionMarker_=t}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setEditable(t){this.editable_=t;for(let r=0,T;T=this.inputList[r];r++)for(let $=0,A;A=T.fieldRow[$];$++)A.updateEditable()}isDisposed(){return this.disposed}getMatchingConnection(t,r){const T=this.getConnections_(!0);if(t=t.getConnections_(!0),T.length!==t.length)throw Error("Connection lists did not match in length.");for(let $=0;$<t.length;$++)if(t[$]===r)return T[$];return null}setHelpUrl(t){this.helpUrl=t}setTooltip(t){this.tooltip=t}getTooltip(){return Rn(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(t){t=Us(t),this.hue_=t.hue,this.colour_=t.hex}setStyle(t){this.styleName_=t}setOnChange(t){if(t&&typeof t!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=t,this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(t){if(typeof t!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(t===void 0?"nothing":t+" of type "+typeof t)+" instead");for(let r=0,T;T=this.inputList[r];r++)for(let $=0,A;A=T.fieldRow[$];$++)if(A.name===t)return A;return null}getVars(){const t=[];for(let r=0,T;T=this.inputList[r];r++)for(let $=0,A;A=T.fieldRow[$];$++)A.referencesVariables()&&t.push(A.getValue());return t}getVarModels(){const t=[];for(let r=0,T;T=this.inputList[r];r++)for(let $=0,A;A=T.fieldRow[$];$++)if(A.referencesVariables()){const F=this.workspace.getVariableById(A.getValue());F&&t.push(F)}return t}updateVarName(t){for(let r=0,T;T=this.inputList[r];r++)for(let $=0,A;A=T.fieldRow[$];$++)A.referencesVariables()&&t.getId()===A.getValue()&&A.refreshVariableName()}renameVarById(t,r){for(let T=0,$;$=this.inputList[T];T++)for(let A=0,F;F=$.fieldRow[A];A++)F.referencesVariables()&&t===F.getValue()&&F.setValue(r)}getFieldValue(t){return(t=this.getField(t))?t.getValue():null}setFieldValue(t,r){const T=this.getField(r);if(!T)throw Error('Field "'+r+'" not found.');T.setValue(t)}setPreviousStatement(t,r){if(t)r===void 0&&(r=null),this.previousConnection||(this.previousConnection=this.makeConnection_(yt.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(r);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(t,r){if(t)r===void 0&&(r=null),this.nextConnection||(this.nextConnection=this.makeConnection_(yt.NEXT_STATEMENT)),this.nextConnection.setCheck(r);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(t,r){if(t)r===void 0&&(r=null),this.outputConnection||(this.outputConnection=this.makeConnection_(yt.OUTPUT_VALUE)),this.outputConnection.setCheck(r);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(t){this.inputsInline!==t&&(It(new(Ot(Re))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type===kt.DUMMY&&this.inputList[t].type===kt.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type===kt.VALUE&&this.inputList[t].type===kt.DUMMY)return!0;return!1}setOutputShape(t){this.outputShape_=t}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(t){if(this.isEnabled()!==t){const r=this.disabled;this.disabled=!t,It(new(Ot(Re))(this,"disabled",null,r,!t))}}getInheritedDisabled(){let t=this.getSurroundParent();for(;t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(t){this.collapsed_!==t&&(It(new(Ot(Re))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)}toString(t,r){function T(xt){let Yt=xt.getCheck();return!Yt&&xt.targetConnection&&(Yt=xt.targetConnection.getCheck()),!!Yt&&(Yt.indexOf("Boolean")!==-1||Yt.indexOf("Number")!==-1)}function $(){let xt,Yt;z&&z.getType()===((xt=q)==null?void 0:xt.getType())&&z.getLocation()===((Yt=q)==null?void 0:Yt.getLocation())&&(z=null)}var A=[];r=r||"?";const F=dt.NAVIGATE_ALL_FIELDS;dt.NAVIGATE_ALL_FIELDS=!0;let z=dt.createBlockNode(this);const q=z;for(;z;){switch(z.getType()){case dt.types.INPUT:var ct=z.getLocation();z.in()?T(ct)&&A.push("("):A.push(r);break;case dt.types.FIELD:ct=z.getLocation(),ct.name!==qn&&A.push(ct.getText())}if(ct=z,z=ct.in()||ct.next(),!z){for(z=ct.out(),$();z&&!z.next();)z=z.out(),$(),z&&z.getType()===dt.types.INPUT&&T(z.getLocation())&&A.push(")");z&&(z=z.next())}}for(dt.NAVIGATE_ALL_FIELDS=F,r=2;r<A.length;r++)A[r-2]==="("&&A[r]===")"&&(A[r-2]=A[r-1],A.splice(r-1,2));return A=A.reduce(function(xt,Yt){return xt+(xt.substr(-1)==="("||Yt===")"?"":" ")+Yt},""),A=A.trim()||"???",t&&A.length>t&&(A=A.substring(0,t-3)+"..."),A}appendValueInput(t){return this.appendInput_(kt.VALUE,t)}appendStatementInput(t){return this.appendInput_(kt.STATEMENT,t)}appendDummyInput(t){return this.appendInput_(kt.DUMMY,t||"")}jsonInit(t){var r=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(r+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(r+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,r):this.jsonInitColour_(t,r);for(var T=0;t["message"+T]!==void 0;)this.interpolate_(t["message"+T],t["args"+T]||[],t["lastDummyAlign"+T],r),T++;if(t.inputsInline!==void 0&&this.setInputsInline(t.inputsInline),t.output!==void 0&&this.setOutput(!0,t.output),t.outputShape!==void 0&&this.setOutputShape(t.outputShape),t.previousStatement!==void 0&&this.setPreviousStatement(!0,t.previousStatement),t.nextStatement!==void 0&&this.setNextStatement(!0,t.nextStatement),t.tooltip!==void 0&&(T=ce(t.tooltip),this.setTooltip(T)),t.enableContextMenu!==void 0&&(this.contextMenu=!!t.enableContextMenu),t.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!t.suppressPrefixSuffix),t.helpUrl!==void 0&&(T=ce(t.helpUrl),this.setHelpUrl(T)),typeof t.extensions=="string"&&(console.warn(r+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),t.mutator!==void 0&&xa(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(r=0;r<t.length;r++)xa(t[r],this,!1)}jsonInitColour_(t,r){if("colour"in t)if(t.colour===void 0)console.warn(r+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch{console.warn(r+"Illegal colour value: ",t)}}}jsonInitStyle_(t,r){t=t.style;try{this.setStyle(t)}catch{console.warn(r+"Style does not exist: ",t)}}mixin(t,r){if(r!==void 0&&typeof r!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!r){r=[];for(const T in t)this[T]!==void 0&&r.push(T);if(r.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(r))}Object.assign(this,t)}interpolate_(t,r,T,$){t=fa(t),this.validateTokens_(t,r.length),r=this.interpolateArguments_(t,r,T),T=[];for(let A=0,F;F=r[A];A++)if(this.isInputKeyword_(F.type)){if(t=this.inputFromJson_(F,$)){for(let z=0,q;q=T[z];z++)t.appendField(q[0],q[1]);T.length=0}}else(t=this.fieldFromJson_(F))&&T.push([t,F.name])}validateTokens_(t,r){const T=[];let $=0;for(let A=0;A<t.length;A++){const F=t[A];if(typeof F=="number"){if(1>F||F>r)throw Error('Block "'+this.type+'": Message index %'+F+" out of range.");if(T[F])throw Error('Block "'+this.type+'": Message index %'+F+" duplicated.");T[F]=!0,$++}}if($!==r)throw Error('Block "'+this.type+'": Message does not reference all '+r+" arg(s).")}interpolateArguments_(t,r,T){const $=[];for(let A=0;A<t.length;A++){let F=t[A];typeof F=="number"&&(F=r[F-1]),!(typeof F=="string"&&(F=this.stringToFieldJson_(F),!F))&&$.push(F)}return(t=$.length)&&!this.isInputKeyword_($[t-1].type)&&(t={type:"input_dummy"},T&&(t.align=T),$.push(t)),$}fieldFromJson_(t){const r=ga(t);return!r&&t.alt?typeof t.alt=="string"?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):r}inputFromJson_(t,r){var T={LEFT:c.Align$$module$build$src$core$input.LEFT,RIGHT:c.Align$$module$build$src$core$input.RIGHT,CENTRE:c.Align$$module$build$src$core$input.CENTRE,CENTER:c.Align$$module$build$src$core$input.CENTRE};let $=null;switch(t.type){case"input_value":$=this.appendValueInput(t.name);break;case"input_statement":$=this.appendStatementInput(t.name);break;case"input_dummy":$=this.appendDummyInput(t.name)}return $?(t.check&&$.setCheck(t.check),t.align&&(T=T[t.align.toUpperCase()],T===void 0?console.warn(r+"Illegal align value: ",t.align):$.setAlign(T)),$):null}isInputKeyword_(t){return t==="input_value"||t==="input_statement"||t==="input_dummy"}stringToFieldJson_(t){return(t=t.trim())?{type:"field_label",text:t}:null}appendInput_(t,r){let T=null;return(t===kt.VALUE||t===kt.STATEMENT)&&(T=this.makeConnection_(t)),t===kt.STATEMENT&&this.statementInputCount++,t=new on(t,r,this,T),this.inputList.push(t),t}moveInputBefore(t,r){if(t!==r){var T=-1,$=r?-1:this.inputList.length;for(let A=0,F;F=this.inputList[A];A++)if(F.name===t){if(T=A,$!==-1)break}else if(r&&F.name===r&&($=A,T!==-1))break;if(T===-1)throw Error('Named input "'+t+'" not found.');if($===-1)throw Error('Reference input "'+r+'" not found.');this.moveNumberedInputBefore(T,$)}}moveNumberedInputBefore(t,r){if(t===r)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(r>this.inputList.length)throw RangeError("Reference input "+r+" out of bounds.");const T=this.inputList[t];this.inputList.splice(t,1),t<r&&r--,this.inputList.splice(r,0,T)}removeInput(t,r){for(let T=0,$;$=this.inputList[T];T++)if($.name===t)return $.type===kt.STATEMENT&&this.statementInputCount--,$.dispose(),this.inputList.splice(T,1),!0;if(r)return!1;throw Error("Input not found: "+t)}getInput(t){for(let r=0,T;T=this.inputList[r];r++)if(T.name===t)return T;return null}getInputTargetBlock(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()}getCommentText(){return this.commentModel.text}setCommentText(t){this.commentModel.text!==t&&(It(new(Ot(Re))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)}setWarningText(t,r){}setMutator(t){}getRelativeToSurfaceXY(){return this.xy_}moveBy(t,r){if(this.parentBlock_)throw Error("Block has parent.");const T=new(Ot(Fe))(this);this.xy_.translate(t,r),T.recordNew(),It(T)}makeConnection_(t){return new Jt(this,t)}allInputsFilled(t){if(t===void 0&&(t=!0),!t&&this.isShadow())return!1;for(let T=0,$;$=this.inputList[T];T++)if($.connection){var r=$.connection.targetBlock();if(!r||!r.allInputsFilled(t))return!1}return(r=this.getNextBlock())?r.allInputsFilled(t):!0}toDevString(){let t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t}};an.COLLAPSED_INPUT_NAME=Qn,an.COLLAPSED_FIELD_NAME=qn;var So=null,tr=null,er={};er.connectionUiEffect=Gu,er.disconnectUiEffect=ku,er.disconnectUiStop=In,er.disposeUiEffect=Bu;var xd=class extends Eo{constructor(t){super(t),this.cachedText="",this.paragraphElement_=this.textarea_=this.foreignObject=this.onInputWrapper=this.onChangeWrapper=this.onWheelWrapper=this.onMouseUpWrapper=null,this.model=t.commentModel;let r;this.model.text=(r=this.model.text)!=null?r:"",this.createIcon()}drawIcon_(t){N(nt.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),N(nt.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),N(nt.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)}createEditor(){this.foreignObject=N(nt.FOREIGNOBJECT,{x:Gt.BORDER_WIDTH,y:Gt.BORDER_WIDTH});const t=document.createElementNS(pi,"body");t.setAttribute("xmlns",pi),t.className="blocklyMinimalBody";const r=this.textarea_=document.createElementNS(pi,"textarea");r.className="blocklyCommentTextarea",r.setAttribute("dir",this.getBlock().RTL?"RTL":"LTR");let T;return r.value=(T=this.model.text)!=null?T:"",this.resizeTextarea(),t.appendChild(r),this.foreignObject.appendChild(t),this.onMouseUpWrapper=u(r,"focus",this,this.startEdit,!0),this.onWheelWrapper=u(r,"wheel",this,function($){$.stopPropagation()}),this.onChangeWrapper=u(r,"change",this,function($){this.cachedText!==this.model.text&&It(new(Ot(Re))(this.getBlock(),"comment",null,this.cachedText,this.model.text))}),this.onInputWrapper=u(r,"input",this,function($){this.model.text=r.value}),setTimeout(r.focus.bind(r),0),this.foreignObject}updateEditable(){super.updateEditable(),this.isVisible()&&(this.disposeBubble(),this.createBubble())}onBubbleResize(){this.isVisible()&&this.bubble_&&(this.model.size=this.bubble_.getBubbleSize(),this.resizeTextarea())}resizeTextarea(){if(this.textarea_&&this.foreignObject){var t=this.model.size,r=2*Gt.BORDER_WIDTH,T=t.width-r;t=t.height-r,this.foreignObject.setAttribute("width",`${T}`),this.foreignObject.setAttribute("height",`${t}`),this.textarea_.style.width=T-4+"px",this.textarea_.style.height=t-4+"px"}}setVisible(t){t!==this.isVisible()&&(It(new(Ot(Xi))(this.getBlock(),t,"comment")),(this.model.pinned=t)?this.createBubble():this.disposeBubble())}createBubble(){this.getBlock().isEditable()?this.createEditableBubble():this.createNonEditableBubble()}createEditableBubble(){const t=this.getBlock();this.bubble_=new Gt(t.workspace,this.createEditor(),t.pathObject.svgPath,this.iconXY_,this.model.size.width,this.model.size.height),this.bubble_.setSvgId(t.id),this.bubble_.registerResizeEvent(this.onBubbleResize.bind(this)),this.applyColour()}createNonEditableBubble(){let t;this.paragraphElement_=Gt.textToDom((t=this.model.text)!=null?t:""),this.bubble_=Gt.createNonEditableBubble(this.paragraphElement_,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.onMouseUpWrapper&&(p(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onWheelWrapper&&(p(this.onWheelWrapper),this.onWheelWrapper=null),this.onChangeWrapper&&(p(this.onChangeWrapper),this.onChangeWrapper=null),this.onInputWrapper&&(p(this.onInputWrapper),this.onInputWrapper=null),this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement_=this.foreignObject=this.textarea_=null}startEdit(t){let r;(r=this.bubble_)!=null&&r.promote()&&this.textarea_.focus(),this.cachedText=this.model.text}getBubbleSize(){return this.model.size}setBubbleSize(t,r){this.bubble_?this.bubble_.setBubbleSize(t,r):(this.model.size.width=t,this.model.size.height=r)}updateText(){if(this.textarea_){let t;this.textarea_.value=(t=this.model.text)!=null?t:""}else this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model.text)}dispose(){this.getBlock().comment=null,super.dispose()}};di(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var ji=null,Il={duplicateInternal:Tg,copyInternal:mg},ir={};ir.TEST_ONLY=Il,ir.copy=On,ir.duplicate=kr,ir.paste=$a;var sr,Ol,nr;sr=null,Ol={},nr=null,c.module$build$src$core$contextmenu={},c.module$build$src$core$contextmenu.callbackFactory=Cg,c.module$build$src$core$contextmenu.commentDeleteOption=Yu,c.module$build$src$core$contextmenu.commentDuplicateOption=zu,c.module$build$src$core$contextmenu.dispose=Xu,c.module$build$src$core$contextmenu.getCurrentBlock=Vu,c.module$build$src$core$contextmenu.hide=Vr,c.module$build$src$core$contextmenu.setCurrentBlock=Wu,c.module$build$src$core$contextmenu.show=Hr,c.module$build$src$core$contextmenu.workspaceCommentOption=Rg;var Zt=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(t){if(this.registry_.has(t.id))throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_.set(t.id,t)}unregister(t){if(!this.registry_.has(t))throw Error('Menu item with ID "'+t+'" not found.');this.registry_.delete(t)}getItem(t){let r;return(r=this.registry_.get(t))!=null?r:null}getContextMenuOptions(t,r){const T=[];for(const A of this.registry_.values())if(t===A.scopeType){var $=A.preconditionFn(r);$!=="hidden"&&($={text:typeof A.displayText=="function"?A.displayText(r):A.displayText,enabled:$==="enabled",callback:A.callback,scope:r,weight:A.weight},T.push($))}return T.sort(function(A,F){return A.weight-F.weight}),T}};(function(t){var r=t.ScopeType||(t.ScopeType={});r.BLOCK="block",r.WORKSPACE="workspace",t.registry=new t})(Zt||(Zt={})),Zt.ScopeType;var yd=30,Sd=!0,Ls=[];Ls[yt.INPUT_VALUE]=yt.OUTPUT_VALUE,Ls[yt.OUTPUT_VALUE]=yt.INPUT_VALUE,Ls[yt.NEXT_STATEMENT]=yt.PREVIOUS_STATEMENT,Ls[yt.PREVIOUS_STATEMENT]=yt.NEXT_STATEMENT;var Al="RENAME_VARIABLE_ID",Ll="DELETE_VARIABLE_ID",Cd=class{constructor(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"}setDrawer(t){this.drawer_=t}getDrawer(){return this.drawer_}getCurNode(){return this.curNode_}setCurNode(t){const r=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(r,this.curNode_)}draw(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)}hide(){this.drawer_&&this.drawer_.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},Ml=class extends Cd{constructor(){super(),this.type="cursor"}next(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()===dt.types.NEXT||t.getType()===dt.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t}in(){var t=this.getCurNode();if(!t)return null;(t.getType()===dt.types.PREVIOUS||t.getType()===dt.types.OUTPUT)&&(t=t.next());let r,T;return(t=(T=(r=t)==null?void 0:r.in())!=null?T:null)&&this.setCurNode(t),t}prev(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()===dt.types.NEXT||t.getType()===dt.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t}out(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()===dt.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null}};Ut(gt.CURSOR,Wi,Ml);var rr=class extends Ml{constructor(){super()}next(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null}in(){return this.next()}prev(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null}out(){return this.prev()}getNextNode_(t,r){if(!t)return null;const T=t.in()||t.next();return r(T)?T:T?this.getNextNode_(T,r):(t=this.findSiblingOrParent_(t.out()),r(t)?t:t?this.getNextNode_(t,r):null)}getPreviousNode_(t,r){if(!t)return null;let T=t.prev();return T=T?this.getRightMostChild_(T):t.out(),r(T)?T:T?this.getPreviousNode_(T,r):null}validNode_(t){let r=!1;return t=t&&t.getType(),(t===dt.types.OUTPUT||t===dt.types.INPUT||t===dt.types.FIELD||t===dt.types.NEXT||t===dt.types.PREVIOUS||t===dt.types.WORKSPACE)&&(r=!0),r}findSiblingOrParent_(t){if(!t)return null;const r=t.next();return r||this.findSiblingOrParent_(t.out())}getRightMostChild_(t){if(!t.in())return t;for(t=t.in();t&&t.next();)t=t.next();return this.getRightMostChild_(t)}};rr.registrationName="basicCursor",Ut(gt.CURSOR,rr.registrationName,rr);var Rd=class extends rr{validNode_(t){let r=!1;const T=t&&t.getType();return t&&(t=t.getLocation(),T===dt.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(r=!0)),r}},Pl=10,Ge=class extends Jt{constructor(t,r){super(t,r),this.targetConnection=this.highlightPath=null,this.db_=t.workspace.connectionDBList[r],this.dbOpposite_=t.workspace.connectionDBList[Ls[r]],this.offsetInBlock_=new Et(0,0),this.trackedState_=Ge.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState_===Ge.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(t){const r=this.x-t.x;return t=this.y-t.y,Math.sqrt(r*r+t*t)}bumpAwayFrom(t){if(!this.sourceBlock_.workspace.isDragging()){var r=this.sourceBlock_.getRootBlock();if(!r.isInFlyout){var T=!1;if(!r.isMovable()){if(r=t.getSourceBlock().getRootBlock(),!r.isMovable())return;t=this,T=!0}var $=L()==r;$||r.addSelect();var A=t.x+c.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Pl)-this.x,F=t.y+c.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Pl)-this.y;T&&(F=-F),r.RTL&&(A=t.x-c.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*Pl)-this.x),r.moveBy(A,F),$||r.removeSelect()}}}moveTo(t,r){this.trackedState_===Ge.TrackedState.WILL_TRACK?(this.db_.addConnection(this,r),this.trackedState_=Ge.TrackedState.TRACKED):this.trackedState_===Ge.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,r)),this.x=t,this.y=r}moveBy(t,r){this.moveTo(this.x+t,this.y+r)}moveToOffset(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)}setOffsetInBlock(t,r){this.offsetInBlock_.x=t,this.offsetInBlock_.y=r}getOffsetInBlock(){return this.offsetInBlock_}tighten(){const t=this.targetConnection.x-this.x,r=this.targetConnection.y-this.y;if(t!==0||r!==0){const $=this.targetBlock();var T=$.getSvgRoot();if(!T)throw Error("block is not rendered.");T=fi(T),$.getSvgRoot().setAttribute("transform","translate("+(T.x-t)+","+(T.y-r)+")"),$.moveConnections(-t,-r)}}closest(t,r){return this.dbOpposite_.searchForClosest(this,t,r)}highlight(){if(!this.highlightPath){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),r=t.shapeFor(this);this.type===yt.INPUT_VALUE||this.type===yt.OUTPUT_VALUE?(t=t.TAB_OFFSET_FROM_TOP,r=ae(0,-t)+St("v",t)+r.pathDown+St("v",t)):(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS,r=ae(-t,0)+St("h",t)+r.pathLeft+St("h",t)),t=this.sourceBlock_.getRelativeToSurfaceXY(),this.highlightPath=N(nt.PATH,{class:"blocklyHighlightedConnectionPath",d:r,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())}}unhighlight(){this.highlightPath&&(K(this.highlightPath),this.highlightPath=null)}setTracking(t){t&&this.trackedState_===Ge.TrackedState.TRACKED||!t&&this.trackedState_===Ge.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=Ge.TrackedState.TRACKED):(this.trackedState_===Ge.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=Ge.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const T=this.targetBlock().getDescendants(!1);for(let $=0;$<T.length;$++){var t=T[$],r=t.getConnections_(!0);for(let A=0;A<r.length;A++)r[A].setTracking(!1);for(t=t.getIcons(),r=0;r<t.length;r++)t[r].setVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let t=[];if(this.type!==yt.INPUT_VALUE&&this.type!==yt.NEXT_STATEMENT)return t;const r=this.targetBlock();if(r){let T;r.isCollapsed()?(T=[],r.outputConnection&&T.push(r.outputConnection),r.nextConnection&&T.push(r.nextConnection),r.previousConnection&&T.push(r.previousConnection)):T=r.getConnections_(!0);for(let $=0;$<T.length;$++)t.push(...T[$].startTrackingAll());t.length||(t=[r])}return t}onFailedConnect(t){const r=this.getSourceBlock();if(ci()){const T=oe();setTimeout(function(){r.isDisposed()||r.getParent()||(Pt(T),this.bumpAwayFrom(t),Pt(!1))}.bind(this),c.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal_(t,r){super.disconnectInternal_(t,r),t.rendered&&t.render(),r.rendered&&(r.updateDisabled(),r.render(),r.getSvgRoot().style.display="block")}respawnShadow_(){super.respawnShadow_();var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),t=this.getSourceBlock(),t.rendered&&t.render())}neighbours(t){return this.dbOpposite_.getNeighbours(this,t)}connect_(t){super.connect_(t);var r=this.getSourceBlock();t=t.getSourceBlock();const T=r.rendered,$=t.rendered;T&&r.updateDisabled(),$&&t.updateDisabled(),T&&$&&(this.type===yt.NEXT_STATEMENT||this.type===yt.PREVIOUS_STATEMENT?t.render():r.render()),(r=r.getInputWithBlock(t))&&(r=r.isVisible(),t.getSvgRoot().style.display=r?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}};(function(t){t=t.TrackedState||(t.TrackedState={}),t[t.WILL_TRACK=-1]="WILL_TRACK",t[t.UNTRACKED=0]="UNTRACKED",t[t.TRACKED=1]="TRACKED"})(Ge||(Ge={})),Ge.TrackedState;var $d=class extends Eo{constructor(t){super(t),this.paragraphElement=null,this.collapseHidden=!1,this.createIcon(),this.text=Object.create(null)}drawIcon_(t){N(nt.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),N(nt.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),N(nt.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)}setVisible(t){t!==this.isVisible()&&(It(new(Ot(Xi))(this.getBlock(),t,"warning")),t?this.createBubble():this.disposeBubble())}createBubble(){this.paragraphElement=Gt.textToDom(this.getText()),this.bubble_=Gt.createNonEditableBubble(this.paragraphElement,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement=null}setText(t,r){this.text[r]!==t&&(t?this.text[r]=t:delete this.text[r],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))}getText(){const t=[];for(const r in this.text)t.push(this.text[r]);return t.join(`
`)}dispose(){this.getBlock().warning=null,super.dispose()}},li=class extends an{constructor(t,r,T){super(t,r,T),this.renderingDebugger=null,this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.commentIcon_=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.decompose=this.decompose,this.compose=this.compose,this.saveConnections=this.saveConnections,this.customContextMenu=this.customContextMenu,this.svgGroup_=N(nt.G,{}),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.useDragSurface_=!!t.getBlockDragSurface(),t=this.pathObject.svgPath,t.tooltip=this,Pr(t),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let r=0,T;T=this.inputList[r];r++)T.init();var t=this.getIcons();for(let r=0;r<t.length;r++)t[r].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||u(t,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(L()!==this){var t=null;if(L()){t=L().id,Te();try{L().unselect()}finally{Ee()}}t=new(Ot(rs))(t,this.id,this.workspace.id),It(t),P(this),this.addSelect()}}unselect(){if(L()===this){var t=new(Ot(rs))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,It(t),P(null),this.removeSelect()}}getIcons(){const t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t}setParent(t){const r=this.parentBlock_;if(t!==r){ht(),super.setParent(t),ut();var T=this.getSvgRoot();if(!this.workspace.isClearing&&T){var $=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(T),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-$.x,t.y-$.y)):r&&(this.workspace.getCanvas().appendChild(T),this.translate($.x,$.y)),this.applyColour()}}}getRelativeToSurfaceXY(){let t=0,r=0;const T=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let $=this.getSvgRoot();if($)do{var A=fi($);t+=A.x,r+=A.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===$&&(A=this.workspace.getBlockDragSurface().getSurfaceTranslation(),t+=A.x,r+=A.y),$=$.parentNode}while($&&$!==this.workspace.getCanvas()&&$!==T);return new Et(t,r)}moveBy(t,r){if(this.parentBlock_)throw Error("Block has parent.");const T=Se();let $=null;T&&($=new(Ot(Fe))(this));const A=this.getRelativeToSurfaceXY();this.translate(A.x+t,A.y+r),this.moveConnections(t,r),T&&$&&($.recordNew(),It($)),this.workspace.resizeContents()}translate(t,r){this.getSvgRoot().setAttribute("transform","translate("+t+","+r+")")}moveToDragSurface(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}}moveTo(t){const r=this.getRelativeToSurfaceXY();this.moveBy(t.x-r.x,t.y-r.y)}moveOffDragSurface(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))}moveDuringDrag(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var r=t.getSpacing(),T=r/2,$=this.getRelativeToSurfaceXY();t=Math.round(Math.round(($.x-T)/r)*r+T-$.x),r=Math.round(Math.round(($.y-T)/r)*r+T-$.y),(t||r)&&this.moveBy(t,r)}}}getBoundingRectangle(){const t=this.getRelativeToSurfaceXY(),r=this.getHeightWidth();let T,$;return this.RTL?(T=t.x-r.width,$=t.x):(T=t.x,$=t.x+r.width),new de(t.y,t.y+r.height,T,$)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let t=0,r;r=this.inputList[t];t++)r.markDirty()}setCollapsed(t){this.collapsed_!==t&&(super.setCollapsed(t),t?this.rendered&&this.render():this.updateCollapsed_())}updateCollapsed_(){var t=this.isCollapsed();const r=Qn,T=qn;for(let A=0,F;F=this.inputList[A];A++)F.name!==r&&F.setVisible(!t);if(t){t=this.getIcons();for(let A=0,F;F=t[A];A++)F.setVisible(!1);t=this.toString(yd);var $=this.getField(T);$?$.setValue(t):(this.getInput(r)||this.appendDummyInput(r)).appendField(new c.FieldLabel$$module$build$src$core$field_label(t),T)}else this.updateDisabled(),this.removeInput(r)}tab(t,r){const T=new Rd;T.setCurNode(dt.createFieldNode(t)),t=T.getCurNode(),r?T.next():T.prev(),(r=T.getCurNode())&&r!==t&&(r.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(r))}onMouseDown_(t){const r=this.workspace.getGesture(t);r&&r.handleBlockStart(t,this)}showHelp(){const t=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;t&&window.open(t)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const t=Zt.registry.getContextMenuOptions(Zt.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t}showContextMenu(t){const r=this.generateContextMenu();r&&r.length&&(Hr(t,r,this.RTL),Wu(this))}moveConnections(t,r){if(this.rendered){for(var T=this.getConnections_(!1),$=0;$<T.length;$++)T[$].moveBy(t,r);for(T=this.getIcons(),$=0;$<T.length;$++)T[$].computeIconLocation();for(T=0;T<this.childBlocks_.length;T++)this.childBlocks_[T].moveConnections(t,r)}}setDragging(t){if(t){var r=this.getSvgRoot();r.translate_="",r.skew_="",Es.push(...this.getConnections_(!0)),G(this.svgGroup_,"blocklyDragging")}else Es.length=0,V(this.svgGroup_,"blocklyDragging");for(r=0;r<this.childBlocks_.length;r++)this.childBlocks_[r].setDragging(t)}setMovable(t){super.setMovable(t),this.pathObject.updateMovable(t)}setEditable(t){super.setEditable(t),t=this.getIcons();for(let r=0;r<t.length;r++)t[r].updateEditable()}setShadow(t){super.setShadow(t),this.applyColour()}setInsertionMarker(t){this.isInsertionMarker_!==t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(t,r){if(!this.isDeadOrDying()){Tu(),Dr(this.pathObject.svgPath),ht();var T=this.workspace;L()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),Vu()===this&&Vr(),r&&this.rendered&&(this.unplug(t),Bu(this)),this.rendered=!1;for(var $ of this.warningTextDb.values())clearTimeout($);for(this.warningTextDb.clear(),r=this.getIcons(),$=0;$<r.length;$++)r[$].dispose();L()===this&&P(null),super.dispose(!!t),K(this.svgGroup_),T.resizeContents(),this.svgGroup_=null,ut()}}checkAndDelete(){this.workspace.isFlyout||(Pt(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),Pt(!1))}toCopyData(){return this.isInsertionMarker_?null:{saveInfo:ki(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:H(this,!0)}}applyColour(){this.pathObject.applyColour(this);const t=this.getIcons();for(let r=0;r<t.length;r++)t[r].applyColour();for(let r=0,T;T=this.inputList[r];r++)for(let $=0,A;A=T.fieldRow[$];$++)A.applyColour()}updateDisabled(){const t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(let r=0,T;T=t[r];r++)T.rendered&&T.updateDisabled()}getCommentIcon(){return this.commentIcon_}setCommentText(t){this.commentModel.text!==t&&(super.setCommentText(t),t=t!==null,!!this.commentIcon_===t?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new xd(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))}setWarningText(t,r){const T=r||"";if(T)this.warningTextDb.has(T)&&(clearTimeout(this.warningTextDb.get(T)),this.warningTextDb.delete(T));else{for(var $ of this.warningTextDb.values())clearTimeout($);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(T,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(T),this.setWarningText(t,T))},100));else{if(this.isInFlyout&&(t=null),r=!1,typeof t=="string"){$=this.getSurroundParent();let A=null;for(;$;)$.isCollapsed()&&(A=$),$=$.getSurroundParent();A&&A.setWarningText(bt.COLLAPSED_WARNINGS_WARNING,li.COLLAPSED_WARNING_ID),this.warning||(this.warning=new $d(this),r=!0),this.warning.setText(t,T)}else this.warning&&!T?(this.warning.dispose(),r=!0):this.warning&&(r=this.warning.getText(),this.warning.setText("",T),($=this.warning.getText())||this.warning.dispose(),r=r!==$);r&&this.rendered&&(this.render(),this.bumpNeighbours())}}setMutator(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())}setEnabled(t){this.isEnabled()!==t&&(super.setEnabled(t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(t){this.rendered&&this.pathObject.updateHighlighted(t)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(t){this.pathObject.updateDraggingDelete(t)}getColour(){return this.style.colourPrimary}setColour(t){super.setColour(t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()}setStyle(t){const r=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,r)this.hat=r.hat,this.pathObject.setStyle(r),this.colour_=r.colourPrimary,this.style=r,this.applyColour();else throw Error("Invalid style name: "+t)}bringToFront(){let t=this;do{const r=t.getSvgRoot(),T=r.parentNode,$=T.childNodes;$[$.length-1]!==r&&T.appendChild(r),t=t.getParent()}while(t)}setPreviousStatement(t,r){super.setPreviousStatement(t,r),this.rendered&&(this.render(),this.bumpNeighbours())}setNextStatement(t,r){super.setNextStatement(t,r),this.rendered&&(this.render(),this.bumpNeighbours())}setOutput(t,r){super.setOutput(t,r),this.rendered&&(this.render(),this.bumpNeighbours())}setInputsInline(t){super.setInputsInline(t),this.rendered&&(this.render(),this.bumpNeighbours())}removeInput(t,r){return t=super.removeInput(t,r),this.rendered&&(this.render(),this.bumpNeighbours()),t}moveNumberedInputBefore(t,r){super.moveNumberedInputBefore(t,r),this.rendered&&(this.render(),this.bumpNeighbours())}appendInput_(t,r){return t=super.appendInput_(t,r),this.rendered&&(this.render(),this.bumpNeighbours()),t}setConnectionTracking(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var r=this.nextConnection.targetBlock();r&&r.setConnectionTracking(t)}if(!this.collapsed_)for(r=0;r<this.inputList.length;r++){var T=this.inputList[r].connection;T&&(T.setTracking(t),(T=T.targetBlock())&&T.setConnectionTracking(t))}}getConnections_(t){const r=[];if((t||this.rendered)&&(this.outputConnection&&r.push(this.outputConnection),this.previousConnection&&r.push(this.previousConnection),this.nextConnection&&r.push(this.nextConnection),t||!this.collapsed_))for(let T=0,$;$=this.inputList[T];T++)$.connection&&r.push($.connection);return r}lastConnectionInStack(t){return super.lastConnectionInStack(t)}getMatchingConnection(t,r){return super.getMatchingConnection(t,r)}makeConnection_(t){return new Ge(this,t)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){this.getRootBlock().bumpNeighboursInternal()}bumpNeighboursInternal(){const t=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||t.isInFlyout))for(const r of this.getConnections_(!1)){if(r.isSuperior()){let T;(T=r.targetBlock())==null||T.bumpNeighboursInternal()}for(const T of r.neighbours(c.config$$module$build$src$core$config.snapRadius))T.getSourceBlock().getRootBlock()!==t&&(r.isConnected()&&T.isConnected()||(r.isSuperior()?T.bumpAwayFrom(r):r.bumpAwayFrom(T)))}}scheduleSnapAndBump(){const t=oe();setTimeout(()=>{Pt(t),this.snapToGrid(),Pt(!1)},c.config$$module$build$src$core$config.bumpDelay/2),setTimeout(()=>{Pt(t),this.bumpNeighbours(),Pt(!1)},c.config$$module$build$src$core$config.bumpDelay)}positionNearConnection(t,r){t.type!==yt.NEXT_STATEMENT&&t.type!==yt.INPUT_VALUE||this.moveBy(r.x-t.x,r.y-t.y)}getFirstStatementConnection(){return super.getFirstStatementConnection()}getChildren(t){return super.getChildren(t)}render(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,ht(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),t!==!1){const r=this.getParent();r?r.render(!0):this.workspace.resizeContents()}ut(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Hn.LOCAL_MARKER).draw()}updateConnectionLocations_(){const t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(let r=0;r<this.inputList.length;r++){const T=this.inputList[r].connection;T&&(T.moveToOffset(t),T.isConnected()&&T.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())}setCursorSvg(t){this.pathObject.setCursorSvg(t)}setMarkerSvg(t){this.pathObject.setMarkerSvg(t)}getHeightWidth(){let t=this.height,r=this.width;var T=this.getNextBlock();if(T){T=T.getHeightWidth();const $=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=T.height-$,r=Math.max(r,T.width)}return{height:t,width:r}}fadeForReplacement(t){this.pathObject.updateReplacementFade(t)}highlightShapeForInput(t,r){this.pathObject.updateShapeForInputHighlight(t,r)}};li.INLINE=-1,li.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Id=class{constructor(){}onDragEnter(t){}onDragOver(t){}onDragExit(t){}onDrop(t){}getClientRect(){return null}shouldPreventMove(t){return!1}},Co=class extends Id{constructor(){super(),this.wouldDelete_=!1}wouldDelete(t,r){return t instanceof li?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!r)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_}updateWouldDelete_(t){this.wouldDelete_=t}},_i;(function(t){t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM"})(_i||(_i={}));var ln;(function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT"})(ln||(ln={}));var hs;(function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN"})(hs||(hs={}));var Ms={};Ms.bumpDirection=hs,Ms.bumpPositionRect=Aa,Ms.getCornerOppositeToolbox=Oa,Ms.getStartPositionRect=Ia,Ms.horizontalPosition=ln,Ms.verticalPosition=_i;var Ue={width:96,height:124,url:"sprites.png"},Od=class extends Co{constructor(t){super(),this.workspace=t,this.id="trashcan",this.contents_=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness_=0,this.lidTask_=this.svgLid_=this.svgGroup_=null,this.top_=this.left_=this.lidOpen_=0,this.initialized_=!1,0>=this.workspace.options.maxTrashcanContents||(t=new yi({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(t.toolboxPosition=this.workspace.toolboxPosition===Ft.TOP?Ft.BOTTOM:Ft.TOP,this.flyout=new(ni(gt.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(t)):(t.toolboxPosition=this.workspace.toolboxPosition===Ft.RIGHT?Ft.LEFT:Ft.RIGHT,this.flyout=new(ni(gt.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(t)),this.workspace.addChangeListener(this.onDelete_.bind(this)))}createDom(){this.svgGroup_=N(nt.G,{class:"blocklyTrash"});let t;const r=String(Math.random()).substring(2);t=N(nt.CLIPPATH,{id:"blocklyTrashBodyClipPath"+r},this.svgGroup_),N(nt.RECT,{width:hn,height:Ro,y:un},t);const T=N(nt.IMAGE,{width:Ue.width,x:-Dl,height:Ue.height,y:-bl,"clip-path":"url(#blocklyTrashBodyClipPath"+r+")"},this.svgGroup_);return T.setAttributeNS(Ye,"xlink:href",this.workspace.options.pathToMedia+Ue.url),t=N(nt.CLIPPATH,{id:"blocklyTrashLidClipPath"+r},this.svgGroup_),N(nt.RECT,{width:hn,height:un},t),this.svgLid_=N(nt.IMAGE,{width:Ue.width,x:-Dl,height:Ue.height,y:-bl,"clip-path":"url(#blocklyTrashLidClipPath"+r+")"},this.svgGroup_),this.svgLid_.setAttributeNS(Ye,"xlink:href",this.workspace.options.pathToMedia+Ue.url),f(this.svgGroup_,"pointerdown",this,this.blockMouseDownWhenOpenable_),f(this.svgGroup_,"pointerup",this,this.click),f(T,"pointerover",this,this.mouseOver_),f(T,"pointerout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_}init(){0<this.workspace.options.maxTrashcanContents&&(tt(this.flyout.createDom(nt.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[Oe.Capability.AUTOHIDEABLE,Oe.Capability.DELETE_AREA,Oe.Capability.DRAG_TARGET,Oe.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(K(this.svgGroup_),this.svgGroup_=null),this.svgLid_=null,this.lidTask_&&clearTimeout(this.lidTask_)}hasContents_(){return!!this.contents_.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var t=this.contents_.map(function(T){return JSON.parse(T)}),r=this.workspace.getParentSvg().style;r.cursor="wait",setTimeout(()=>{let T;(T=this.flyout)==null||T.show(t),r.cursor=""},10),this.fireUiEvent_(!0)}}closeFlyout(){if(this.contentsIsOpen()){var t;(t=this.flyout)==null||t.hide(),this.fireUiEvent_(!1),this.workspace.recordDragTargets()}}autoHide(t){!t&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())}position(t,r){if(this.initialized_){var T=Oa(this.workspace,t);t=Ia(T,new Ie(hn,Ro+un),Tm,Ad,t,this.workspace),r=Aa(t,Ad,T.vertical===_i.TOP?hs.DOWN:hs.UP,r),this.top_=r.top,this.left_=r.left;var $;($=this.svgGroup_)==null||$.setAttribute("transform","translate("+this.left_+","+this.top_+")")}}getBoundingRectangle(){return new de(this.top_,this.top_+Ro+un,this.left_,this.left_+hn)}getClientRect(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect();const r=t.top+bl-$o;return t=t.left+Dl-$o,new de(r,r+un+Ro+2*$o,t,t+hn+2*$o)}onDragOver(t){this.setLidOpen(this.wouldDelete_)}onDragExit(t){this.setLidOpen(!1)}onDrop(t){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(t){this.isLidOpen!==t&&(this.lidTask_&&clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())}animateLid_(){const t=ym;var r=1/(t+1);this.lidOpen_+=this.isLidOpen?r:-r,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*Md),r=Ld+this.lidOpen_*(Sm-Ld),this.svgGroup_&&(this.svgGroup_.style.opacity=r.toString()),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),xm/t))}setLidAngle_(t){const r=this.workspace.toolboxPosition===Ft.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let T;(T=this.svgLid_)==null||T.setAttribute("transform","rotate("+(r?-t:t)+","+(r?4:hn-4)+","+(un-2)+")")}setMinOpenness_(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*Md)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents_()&&this.openFlyout()}fireUiEvent_(t){t=new(Ot(Nn))(t,this.workspace.id),It(t)}blockMouseDownWhenOpenable_(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()}mouseOver_(){this.hasContents_()&&this.setLidOpen(!0)}mouseOut_(){this.setLidOpen(!1)}onDelete_(t){if(!(0>=this.workspace.options.maxTrashcanContents||t.type!==Pi||t.type!==Pi||t.wasShadow)){if(!t.oldJson)throw Error("Encountered a delete event without proper oldJson");if(t=JSON.stringify(this.cleanBlockJson_(t.oldJson)),this.contents_.indexOf(t)===-1){for(this.contents_.unshift(t);this.contents_.length>this.workspace.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(Em)}}}cleanBlockJson_(t){function r(T){if(T){if(delete T.id,delete T.x,delete T.y,delete T.enabled,T.icons&&T.icons.comment){var $=T.icons.comment;delete $.height,delete $.width,delete $.pinned}$=T.inputs;for(var A in $){var F=$[A];const z=F.block;F=F.shadow,z&&r(z),F&&r(F)}T.next&&(A=T.next,T=A.block,A=A.shadow,T&&r(T),A&&r(A))}}return t=JSON.parse(JSON.stringify(t)),r(t),Object.assign({},{kind:"BLOCK"},t)}},hn=47,Ro=44,un=16,Ad=20,Tm=20,$o=10,Dl=0,bl=32,Em=.1,xm=80,ym=4,Ld=.4,Sm=.8,Md=45,Nl=class extends mi{constructor(t,r,T){super(T),this.type=wn,this.oldItem=t!=null?t:void 0,this.newItem=r!=null?r:void 0}toJson(){const t=super.toJson();return t.oldItem=this.oldItem,t.newItem=this.newItem,t}fromJson(t){R("Blockly.Events.ToolboxItemSelect.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.oldItem=t.oldItem,this.newItem=t.newItem}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new Nl),r.oldItem=t.oldItem,r.newItem=t.newItem,r}};Ut(gt.EVENT,wn,Nl);var wl=class{constructor(t,r,T){this.id_=t.toolboxitemid||yn(),this.level_=(this.parent_=T||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=r,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(t){}},Si=class extends wl{constructor(t,r,T){super(t,r,T),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(t){if("custom"in t)this.flyoutItems_=t.custom;else if(t=t.contents)for(let r=0;r<t.length;r++){const T=t[r];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(T)}}parseCategoryDef_(t){this.name_="name"in t?ce(t.name):"",this.colour_=this.getColour_(t),Object.assign(this.cssConfig_,t.cssconfig||t.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Ai(this.htmlDiv_,Ke.TREEITEM),he(this.htmlDiv_,re.SELECTED,!1),he(this.htmlDiv_,re.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Ai(this.iconDom_,Ke.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const t=this.labelDom_.getAttribute("id");return t&&he(this.htmlDiv_,re.LABELLEDBY,t),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const t=document.createElement("div"),r=this.cssConfig_.container;return r&&G(t,r),t}createRowContainer_(){const t=document.createElement("div");var r=this.cssConfig_.row;return r&&G(t,r),r=`${Si.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?t.style.paddingRight=r:t.style.paddingLeft=r,t}createRowContentsContainer_(){const t=document.createElement("div"),r=this.cssConfig_.rowcontentcontainer;return r&&G(t,r),t}createIconDom_(){const t=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const r=this.cssConfig_.icon;r&&G(t,r)}return t.style.display="inline-block",t}createLabelDom_(t){const r=document.createElement("span");return r.setAttribute("id",this.getId()+".label"),r.textContent=t,(t=this.cssConfig_.label)&&G(r,t),r}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(t){t&&(t=Si.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)}getColour_(t){const r=t.categorystyle||t.categoryStyle;if((t=t.colour)&&r)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(r)return this.getColourfromStyle_(r);if(t)return this.parseColour_(t)}return""}getColourfromStyle_(t){var r=this.workspace_.getTheme();if(t&&r){if((r=r.categoryStyles[t])&&r.colour)return this.parseColour_(r.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(t){if(t=ce(t),t==null||t==="")return"";var r=Number(t);return isNaN(r)?(r=gs(t))?r:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):ca(r)}openIcon_(t){if(t){var r=this.cssConfig_.closedicon;r&&k(t,r),(r=this.cssConfig_.openicon)&&G(t,r)}}closeIcon_(t){if(t){var r=this.cssConfig_.openicon;r&&k(t,r),(r=this.cssConfig_.closedicon)&&G(t,r)}}setVisible_(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let t=this;for(;t.getParent();)if(t=t.getParent(),!t.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(t){}setSelected(t){if(this.rowDiv_){var r=this.cssConfig_.selected;if(t){const T=this.parseColour_(Si.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||T,r&&G(this.rowDiv_,r)}else this.rowDiv_.style.backgroundColor="",r&&V(this.rowDiv_,r);he(this.htmlDiv_,re.SELECTED,t)}}setDisabled(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",`${t}`),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(t){this.flyoutItems_=[],this.toolboxItemDef_=typeof t=="string"?{kind:this.toolboxItemDef_.kind,custom:t,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Br(t),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){K(this.htmlDiv_)}};Si.registrationName="category",Si.nestedPadding=19,Si.borderWidth=8,Si.defaultBackgroundColour="#57e",di(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),Ut(gt.TOOLBOX_ITEM,Si.registrationName,Si);var or=class extends wl{constructor(t,r){super(t,r),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,t.cssconfig||t.cssConfig)}init(){this.createDom_()}createDom_(){const t=document.createElement("div"),r=this.cssConfig_.container;return r&&G(t,r),this.htmlDiv_=t}getDiv(){return this.htmlDiv_}dispose(){K(this.htmlDiv_)}};or.registrationName="sep",di(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),Ut(gt.TOOLBOX_ITEM,or.registrationName,or);var cn=class extends Si{constructor(t,r,T){super(t,r,T),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const t=super.makeDefaultCssConfig_();return t.contents="blocklyToolboxContents",t}parseContents_(t){const r=t.contents;let T=!0;if(t.custom)this.flyoutItems_=t.custom;else if(r)for(t=0;t<r.length;t++){const $=r[t];!jh(gt.TOOLBOX_ITEM,$.kind)||$.kind.toLowerCase()===or.registrationName&&T?(this.flyoutItems_.push($),T=!0):(this.createToolboxItem_($),T=!1)}}createToolboxItem_(t){let r=t.kind;r.toUpperCase()==="CATEGORY"&&Ta(t)&&(r=cn.registrationName),t=new(ws(gt.TOOLBOX_ITEM,r))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded)}createDom_(){super.createDom_();const t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),Ai(this.subcategoriesDiv_,Ke.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_}createIconDom_(){const t=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const r=this.cssConfig_.icon;r&&G(t,r),t.style.visibility="visible"}return t.style.display="inline-block",t}createSubCategoriesDom_(t){const r=document.createElement("div");var T=this.cssConfig_.contents;for(T&&G(r,T),T=0;T<t.length;T++){const $=t[T];$.init();const A=$.getDiv();if(r.appendChild(A),$.getClickTarget){let F;(F=$.getClickTarget())==null||F.setAttribute("id",$.getId())}}return r}setExpanded(t){this.expanded_!==t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),he(this.htmlDiv_,re.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())}setVisible_(t){this.htmlDiv_.style.display=t?"block":"none";const r=this.getChildToolboxItems();for(let T=0;T<r.length;T++)r[T].setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(t){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};cn.registrationName="collapsibleCategory",Ut(gt.TOOLBOX_ITEM,cn.registrationName,cn);var Pd=class extends Co{constructor(t){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=t,this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.RTL=t.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition}onShortcut(t){return!1}init(){var t=this.workspace_;const r=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),tt(this.flyout_.createDom("svg"),r),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),t=t.getThemeManager(),t.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Oe.Capability.AUTOHIDEABLE,Oe.Capability.DELETE_AREA,Oe.Capability.DRAG_TARGET]})}createDom_(t){t=t.getParentSvg();const r=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Ai(this.contentsDiv_,Ke.TREE),r.appendChild(this.contentsDiv_),t.parentNode.insertBefore(r,t),this.attachEvents_(r,this.contentsDiv_),r}createContainer_(){const t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),G(t,"blocklyToolboxDiv"),G(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t}createContentsContainer_(){const t=document.createElement("div");return G(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t}attachEvents_(t,r){t=u(t,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(t),r=u(r,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(r)}onClick_(t){if(m(t)||t.target===this.HtmlDiv)O().hideChaff(!1);else{var r=t.target.getAttribute("id");r&&(r=this.getToolboxItemById(r),r.isSelectable()&&(this.setSelectedItem(r),r.onClick(t))),O().hideChaff(!0)}g()}onKeyDown_(t){let r=!1;switch(t.keyCode){case Rt.DOWN:r=this.selectNext_();break;case Rt.UP:r=this.selectPrevious_();break;case Rt.LEFT:r=this.selectParent_();break;case Rt.RIGHT:r=this.selectChild_();break;case Rt.ENTER:case Rt.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),r=!0);break;default:r=!1}if(!r&&this.selectedItem_){const T=this.selectedItem_;T.onKeyDown&&(r=T.onKeyDown(t))}r&&t.preventDefault()}createFlyout_(){const t=this.workspace_,r=new yi({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return r.toolboxPosition=t.options.toolboxPosition,new(t.horizontalLayout?ni(gt.FLYOUTS_HORIZONTAL_TOOLBOX,t.options,!0):ni(gt.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(r)}render(t){this.toolboxDef_=t;for(let r=0;r<this.contents_.length;r++){const T=this.contents_[r];T&&T.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()}renderContents_(t){const r=document.createDocumentFragment();for(let T=0;T<t.length;T++)this.createToolboxItem_(t[T],r);this.contentsDiv_.appendChild(r)}createToolboxItem_(t,r){var T=t.kind;T.toUpperCase()==="CATEGORY"&&Ta(t)&&(T=cn.registrationName),(T=ws(gt.TOOLBOX_ITEM,T.toLowerCase()))&&(t=new T(t,this),t.init(),this.addToolboxItem_(t),(T=t.getDiv())&&r.appendChild(T),t.getClickTarget()&&t.getClickTarget().setAttribute("id",t.getId()))}addToolboxItem_(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible()){t=t.getChildToolboxItems();for(let r=0;r<t.length;r++)this.addToolboxItem_(t[r])}}getToolboxItems(){return this.contents_}addStyle(t){t&&this.HtmlDiv&&G(this.HtmlDiv,t)}removeStyle(t){t&&this.HtmlDiv&&V(this.HtmlDiv,t)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect();const r=t.top,T=r+t.height,$=t.left;return t=$+t.width,this.toolboxPosition===Ft.TOP?new de(-1e7,T,-1e7,1e7):this.toolboxPosition===Ft.BOTTOM?new de(r,1e7,-1e7,1e7):this.toolboxPosition===Ft.LEFT?new de(-1e7,1e7,-1e7,t):new de(-1e7,1e7,$,1e7)}wouldDelete(t,r){return t instanceof li?this.updateWouldDelete_(!t.getParent()&&t.isDeletable()):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_}onDragEnter(t){this.updateCursorDeleteStyle_(!0)}onDragExit(t){this.updateCursorDeleteStyle_(!1)}onDrop(t){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(t){const r=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(r):this.removeStyle(r)}getToolboxItemById(t){return this.contentMap_[t]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const t=this.workspace_.getMetrics(),r=this.HtmlDiv;r&&(this.horizontalLayout_?(r.style.left="0",r.style.height="auto",r.style.width="100%",this.height_=r.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition===Ft.TOP?r.style.top="0":r.style.bottom="0"):(this.toolboxPosition===Ft.RIGHT?r.style.right="0":r.style.left="0",r.style.height="100%",this.width_=r.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const t=this.workspace_,r=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition===Ft.LEFT?t.scrollX+r.width:t.scrollX,this.toolboxPosition===Ft.TOP?t.scrollY+r.height:t.scrollY),U(t)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let t=0;t<this.contents_.length;t++){const r=this.contents_[t];r.refreshTheme&&r.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())}autoHide(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(t){const r=this.selectedItem_;!t&&!r||t&&!t.isSelectable()||(this.shouldDeselectItem_(r,t)&&r!==null&&this.deselectItem_(r),this.shouldSelectItem_(r,t)&&t!==null&&this.selectItem_(r,t),this.updateFlyout_(r,t),this.fireSelectEvent_(r,t))}shouldDeselectItem_(t,r){return t!==null&&(!t.isCollapsible()||t!==r)}shouldSelectItem_(t,r){return r!==null&&r!==t}deselectItem_(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),he(this.contentsDiv_,re.ACTIVEDESCENDANT,"")}selectItem_(t,r){this.selectedItem_=r,this.previouslySelectedItem_=t,r.setSelected(!0),he(this.contentsDiv_,re.ACTIVEDESCENDANT,r.getId())}selectItemByPosition(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t],t.isSelectable()&&this.setSelectedItem(t))}updateFlyout_(t,r){r&&(t!==r||r.isCollapsible())&&r.getContents().length?(this.flyout_.show(r.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(t,r){const T=t&&t.getName();let $=r&&r.getName();t===r&&($=null),t=new(Ot(wn))(T,$,this.workspace_.id),It(t)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){let r=this.contents_[t];for(;r&&!r.isSelectable();)r=this.contents_[++t];if(r&&r.isSelectable())return this.setSelectedItem(r),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){let r=this.contents_[t];for(;r&&!r.isSelectable();)r=this.contents_[--t];if(r&&r.isSelectable())return this.setSelectedItem(r),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)p(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),K(this.HtmlDiv)}};di(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),Ut(gt.TOOLBOX,Wi,Pd);var Cm={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},Rm={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},$m=new As("zelos",Cm,Rm),Bl={};Bl.Classic=xo,Bl.Zelos=$m;var Fl=class extends mi{constructor(t,r,T){r=t?t.workspace.id:r,r===null&&(r=void 0),super(r),this.type=os,this.blockId=t?t.id:void 0,this.targetType=T}toJson(){const t=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return t.targetType=this.targetType,t.blockId=this.blockId,t}fromJson(t){R("Blockly.Events.Click.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.targetType=t.targetType,this.blockId=t.blockId}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new Fl),r.targetType=t.targetType,r.blockId=t.blockId,r}},Gl;(function(t){t.BLOCK="block",t.WORKSPACE="workspace",t.ZOOM_CONTROLS="zoom_controls"})(Gl||(Gl={})),Ut(gt.EVENT,os,Fl);var Dd=class{constructor(t,r){this.bubble=t,this.workspace=r,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY(),this.dragSurface_=r.getBlockDragSurface()}startBubbleDrag(){oe()||Pt(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout(!1),this.dragSurface_&&(this.bubble.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.bubble.getSvgRoot())),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(t,r){r=this.pixelsToWorkspaceUnits_(r),r=Et.sum(this.startXY_,r),this.bubble.moveDuringDrag(this.dragSurface_,r),r=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==r&&(r&&r.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(t){return t&&this.workspace.getComponentManager().hasCapability(t.id,Oe.Capability.DELETE_AREA)?t.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(t,r){this.dragBubble(t,r),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(r),t=Et.sum(this.startXY_,t)),this.bubble.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.bubble.dispose()):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace.getBubbleCanvas()),this.bubble.setDragging&&this.bubble.setDragging(!1),this.fireMoveEvent_()),this.workspace.setResizesEnabled(!0),Pt(!1)}fireMoveEvent_(){if(this.bubble instanceof Ne){const t=new(Ot(Yi))(this.bubble);t.setOldCoordinate(this.startXY_),t.recordNew(),It(t)}}pixelsToWorkspaceUnits_(t){return t=new Et(t.x/this.workspace.scale,t.y/this.workspace.scale),this.workspace.isMutator&&t.scale(1/this.workspace.options.parentWorkspace.scale),t}},bd=class{constructor(t){this.workspace=t,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new Et(t.scrollX,t.scrollY)}dispose(){this.workspace=null}startDrag(){L()&&L().unselect(),this.workspace.setupDragSurface()}endDrag(t){this.drag(t),this.workspace.resetDragSurface()}drag(t){if(t=Et.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(t.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,t.y);else throw new TypeError("Invalid state.")}},Im=5,Om=6,bi=class{constructor(t,r){this.creatorWorkspace=r,this.mouseDownXY_=new Et(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.hasExceededDragRadius_=!1,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isMultiTouch_=this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.cachedPoints=new Map,this.startDistance_=this.previousScale_=0,this.currentDropdownOwner=this.isPinchZoomEnabled_=this.onStartWrapper_=null,this.mostRecentEvent_=t,this.currentDragDeltaXY_=new Et(0,0),this.healStack_=!Sd}dispose(){g(),xu(),this.creatorWorkspace.clearGesture(),this.onMoveWrapper_&&p(this.onMoveWrapper_),this.onUpWrapper_&&p(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.onStartWrapper_&&p(this.onStartWrapper_)}updateFromEvent_(t){const r=new Et(t.clientX,t.clientY);this.updateDragDelta_(r)&&(this.updateIsDragging_(),o()),this.mostRecentEvent_=t}updateDragDelta_(t){return this.currentDragDeltaXY_=Et.difference(t,this.mouseDownXY_),this.hasExceededDragRadius_?!1:this.hasExceededDragRadius_=Et.magnitude(this.currentDragDeltaXY_)>(this.flyout_?c.config$$module$build$src$core$config.flyoutDragRadius:c.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout_(){let t;if(!this.targetBlock_||(t=this.flyout_)==null||!t.isBlockCreatable(this.targetBlock_))return!1;if(!this.flyout_.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout_.isScrollable()||this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)?(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),oe()||Pt(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0):!1}updateIsDraggingBubble_(){return this.startBubble_?(this.startDraggingBubble_(),!0):!1}updateIsDraggingBlock_(){if(!this.targetBlock_)return!1;if(this.flyout_){if(this.updateIsDraggingFromFlyout_())return this.startDraggingBlock_(),!0}else if(this.targetBlock_.isMovable())return this.startDraggingBlock_(),!0;return!1}updateIsDraggingWorkspace_(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new bd(this.startWorkspace_),this.workspaceDragger_.startDrag())}updateIsDragging_(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()}startDraggingBlock_(){this.blockDragger_=new(ni(gt.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)}startDraggingBubble_(){if(!this.startBubble_)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger_=new Dd(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)}doStart(t){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,v(t)?this.cancel():(this.hasStarted_=!0,In(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=He(),this.startWorkspace_.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,Eu(),this.targetBlock_&&this.targetBlock_.select(),m(t)?this.handleRightClick(t):(t.type.toLowerCase()==="pointerdown"&&t.pointerType!=="mouse"&&e(t,this),this.mouseDownXY_=new Et(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t),this.isEnding_||this.handleTouchStart(t)))}bindMouseEvents(t){this.onStartWrapper_=u(document,"pointerdown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=u(document,"pointermove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=u(document,"pointerup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()}handleStart(t){this.isDragging()||(this.handleTouchStart(t),this.isMultiTouch()&&o())}handleMove(t){this.isDragging()&&l(t)||!this.isMultiTouch()?(this.updateFromEvent_(t),this.workspaceDragger_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.bubbleDragger_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(t),o())}handleUp(t){if(this.isDragging()||this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()){if(!l(t))return;if(this.updateFromEvent_(t),o(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.workspaceDragger_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t)}t.preventDefault(),t.stopPropagation(),this.dispose()}handleTouchStart(t){var r=h(t);this.cachedPoints.set(r,this.getTouchPoint(t));var T=Array.from(this.cachedPoints.keys());T.length===2&&(r=this.cachedPoints.get(T[0]),T=this.cachedPoints.get(T[1]),this.startDistance_=Et.distance(r,T),this.isMultiTouch_=!0,t.preventDefault())}handleTouchMove(t){const r=h(t);this.cachedPoints.set(r,this.getTouchPoint(t)),this.isPinchZoomEnabled_&&this.cachedPoints.size===2?this.handlePinch_(t):this.handleMove(t)}handlePinch_(t){var r=Array.from(this.cachedPoints.keys()),T=this.cachedPoints.get(r[0]);if(r=this.cachedPoints.get(r[1]),T=Et.distance(T,r)/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){if(r=T-this.previousScale_,r=0<r?r*Im:r*Om,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const $=this.startWorkspace_,A=E(t,$.getParentSvg(),$.getInverseScreenCTM());$.zoom(A.x,A.y,r)}this.previousScale_=T,t.preventDefault()}handleTouchEnd(t){t=h(t),this.cachedPoints.has(t)&&this.cachedPoints.delete(t),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale_=0)}getTouchPoint(t){return this.startWorkspace_?new Et(t.pageX,t.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(o(),this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.workspaceDragger_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())}handleRightClick(t){this.targetBlock_?(this.bringBlockToFront_(),this.targetBlock_.workspace.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()}handleWsStart(t,r){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(r),this.mostRecentEvent_=t,this.doStart(t)}fireWorkspaceClick_(t){It(new(Ot(os))(null,t.id,"workspace"))}handleFlyoutStart(t,r){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(r),this.handleWsStart(t,r.getWorkspace())}handleBlockStart(t,r){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(r),this.mostRecentEvent_=t}handleBubbleStart(t,r){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(r),this.mostRecentEvent_=t}doBubbleClick_(){this.startBubble_ instanceof Ne&&(this.startBubble_.setFocus(),this.startBubble_.select())}doFieldClick_(){if(!this.startField_)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField_&&this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()}doBlockClick_(){if(this.flyout_&&this.flyout_.autoClose){if(!this.targetBlock_)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock_.isEnabled()&&(oe()||Pt(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const t=new(Ot(os))(this.startBlock_,this.startWorkspace_.id,"block");It(t)}this.bringBlockToFront_(),Pt(!1)}doWorkspaceClick_(t){t=this.creatorWorkspace,L()&&L().unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)}bringBlockToFront_(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()}setStartField(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)}setStartBubble(t){this.startBubble_||(this.startBubble_=t)}setStartBlock(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!==t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))}setTargetBlock_(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t}setStartWorkspace_(t){this.startWorkspace_||(this.startWorkspace_=t)}setStartFlyout_(t){this.flyout_||(this.flyout_=t)}isBubbleClick_(){return!!this.startBubble_&&!this.hasExceededDragRadius_}isBlockClick_(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()}isFieldClick_(){return(this.startField_?this.startField_.isClickable():!1)&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)}isWorkspaceClick_(){return!this.startBlock_&&!this.startBubble_&&!this.startField_&&!this.hasExceededDragRadius_}isDragging(){return!!this.workspaceDragger_||!!this.blockDragger_||!!this.bubbleDragger_}hasStarted(){return this.hasStarted_}getInsertionMarkers(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]}getCurrentDragger(){let t,r;return(r=(t=this.blockDragger_)!=null?t:this.workspaceDragger_)!=null?r:this.bubbleDragger_}static inProgress(){const t=S();for(let r=0,T;T=t[r];r++)if(T.currentGesture_)return!0;return!1}},te=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(t,r){if(this.shortcuts.get(t.name)&&!r)throw Error(`Shortcut named "${t.name}" already exists.`);if(this.shortcuts.set(t.name,t),(r=t.keyCodes)&&0<r.length)for(let T=0;T<r.length;T++)this.addKeyMapping(r[T],t.name,!!t.allowCollision)}unregister(t){return this.shortcuts.get(t)?(this.removeAllKeyMappings(t),this.shortcuts.delete(t),!0):(console.warn(`Keyboard shortcut named "${t}" not found.`),!1)}addKeyMapping(t,r,T){t=String(t);const $=this.keyMap.get(t);if($&&!T)throw Error(`Shortcut named "${r}" collides with shortcuts "${$}"`);$&&T?$.unshift(r):this.keyMap.set(t,[r])}removeKeyMapping(t,r,T){const $=this.keyMap.get(t);if(!$)return T||console.warn(`No keyboard shortcut named "${r}" registered with key code "${t}"`),!1;const A=$.indexOf(r);return-1<A?($.splice(A,1),$.length===0&&this.keyMap.delete(t),!0):(T||console.warn(`No keyboard shortcut named "${r}" registered with key code "${t}"`),!1)}removeAllKeyMappings(t){for(const r of this.keyMap.keys())this.removeKeyMapping(r,t,!0)}setKeyMap(t){this.keyMap.clear();for(const r in t)this.keyMap.set(r,t[r])}getKeyMap(){const t=Object.create(null);for(const[r,T]of this.keyMap)t[r]=T;return t}getRegistry(){const t=Object.create(null);for(const[r,T]of this.shortcuts)t[r]=T;return es(Object.create(null),t)}onKeyDown(t,r){var T=this.serializeKeyEvent_(r);if(T=this.getShortcutNamesByKeyCode(T),!T)return!1;for(let $=0,A;A=T[$];$++){const F=this.shortcuts.get(A);let z,q;if((z=F)==null||!z.preconditionFn||((q=F)==null?0:q.preconditionFn(t))){let ct,xt;if(((ct=F)==null?0:ct.callback)&&((xt=F)==null?0:xt.callback(t,r,F)))return!0}}return!1}getShortcutNamesByKeyCode(t){return this.keyMap.get(t)||[]}getKeyCodesByShortcutName(t){const r=[];for(const[T,$]of this.keyMap)-1<$.indexOf(t)&&r.push(T);return r}serializeKeyEvent_(t){let r="";for(const T in te.modifierKeys)t.getModifierState(T)&&(r!==""&&(r+="+"),r+=T);return r!==""&&t.keyCode?r=r+"+"+t.keyCode:t.keyCode&&(r=t.keyCode.toString()),r}checkModifiers_(t){for(let r=0,T;T=t[r];r++)if(!(T in te.modifierKeys))throw Error(T+" is not a valid modifier key.")}createSerializedKey(t,r){let T="";if(r){this.checkModifiers_(r);for(const $ in te.modifierKeys)-1<r.indexOf(te.modifierKeys[$])&&(T!==""&&(T+="+"),T+=$)}return T!==""&&t?T=T+"+"+t:t&&(T=t.toString()),T}};te.registry=new te,function(t){t=t.modifierKeys||(t.modifierKeys={}),t[t.Shift=16]="Shift",t[t.Control=17]="Control",t[t.Alt=18]="Alt",t[t.Meta=91]="Meta"}(te||(te={}));var Ni;(function(t){t.ESCAPE="escape",t.DELETE="delete",t.COPY="copy",t.CUT="cut",t.PASTE="paste",t.UNDO="undo",t.REDO="redo"})(Ni||(Ni={})),tc();var wi={};wi.names=Ni,wi.registerCopy=_u,wi.registerCut=Ju,wi.registerDefaultShortcuts=tc,wi.registerDelete=ju,wi.registerEscape=Ku,wi.registerPaste=Zu,wi.registerRedo=qu,wi.registerUndo=Qu;var Ul=class extends mi{constructor(t,r){super(r),this.type=Bn,this.themeName=t}toJson(){const t=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return t.themeName=this.themeName,t}fromJson(t){R("Blockly.Events.ThemeChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.themeName=t.themeName}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new Ul),r.themeName=t.themeName,r}};Ut(gt.EVENT,Bn,Ul);var kl=class extends mi{constructor(t,r,T,$,A){super($),this.type=Cs,this.viewTop=t,this.viewLeft=r,this.scale=T,this.oldScale=A}toJson(){const t=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t}fromJson(t){R("Blockly.Events.Viewport.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new kl),r.viewTop=t.viewTop,r.viewLeft=t.viewLeft,r.scale=t.scale,r.oldScale=t.oldScale,r}};Ut(gt.EVENT,Cs,kl);var dn=class{constructor(t){this.connectionChecker=t,this.connections_=[]}addConnection(t,r){r=this.calculateIndexForYPos_(r),this.connections_.splice(r,0,t)}findIndexOfConnection_(t,r){if(!this.connections_.length)return-1;const T=this.calculateIndexForYPos_(r);if(T>=this.connections_.length)return-1;r=t.y;let $=T;for(;0<=$&&this.connections_[$].y===r;){if(this.connections_[$]===t)return $;$--}for($=T;$<this.connections_.length&&this.connections_[$].y===r;){if(this.connections_[$]===t)return $;$++}return-1}calculateIndexForYPos_(t){if(!this.connections_.length)return 0;let r=0,T=this.connections_.length;for(;r<T;){const $=Math.floor((r+T)/2);if(this.connections_[$].y<t)r=$+1;else if(this.connections_[$].y>t)T=$;else{r=$;break}}return r}removeConnection(t,r){if(t=this.findIndexOfConnection_(t,r),t===-1)throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)}getNeighbours(t,r){function T(xt){const Yt=A-$[xt].x,le=F-$[xt].y;return Math.sqrt(Yt*Yt+le*le)<=r&&ct.push($[xt]),le<r}const $=this.connections_,A=t.x,F=t.y;t=0;let z=$.length-2,q=z;for(;t<q;)$[q].y<F?t=q:z=q,q=Math.floor((t+z)/2);const ct=[];if(z=t=q,$.length){for(;0<=t&&T(t);)t--;do z++;while(z<$.length&&T(z))}return ct}isInYRange_(t,r,T){return Math.abs(this.connections_[t].y-r)<=T}searchForClosest(t,r,T){if(!this.connections_.length)return{connection:null,radius:r};const $=t.y,A=t.x;t.x=A+T.x,t.y=$+T.y;var F=this.calculateIndexForYPos_(t.y);T=null;let z=r,q,ct=F-1;for(;0<=ct&&this.isInYRange_(ct,t.y,r);)q=this.connections_[ct],this.connectionChecker.canConnect(t,q,!0,z)&&(T=q,z=q.distanceFrom(t)),ct--;for(;F<this.connections_.length&&this.isInYRange_(F,t.y,r);)q=this.connections_[F],this.connectionChecker.canConnect(t,q,!0,z)&&(T=q,z=q.distanceFrom(t)),F++;return t.x=A,t.y=$,{connection:T,radius:z}}static init(t){const r=[];return r[yt.INPUT_VALUE]=new dn(t),r[yt.OUTPUT_VALUE]=new dn(t),r[yt.NEXT_STATEMENT]=new dn(t),r[yt.PREVIOUS_STATEMENT]=new dn(t),r}},Hl=class{constructor(t,r){this.pattern=t;let T;this.spacing=(T=r.spacing)!=null?T:0;let $;this.length=($=r.length)!=null?$:1,this.line2=(this.line1=t.firstChild)&&this.line1.nextSibling;let A;this.snapToGrid=(A=r.snap)!=null?A:!1}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(t){var r=this.spacing*t||100;this.pattern.setAttribute("width",r.toString()),this.pattern.setAttribute("height",r.toString()),r=Math.floor(this.spacing/2)+.5;let T=r-this.length/2,$=r+this.length/2;r*=t,T*=t,$*=t,this.setLineAttributes(this.line1,t,T,$,r,r),this.setLineAttributes(this.line2,t,r,r,T,$)}setLineAttributes(t,r,T,$,A,F){t&&(t.setAttribute("stroke-width",r.toString()),t.setAttribute("x1",T.toString()),t.setAttribute("y1",A.toString()),t.setAttribute("x2",$.toString()),t.setAttribute("y2",F.toString()))}moveTo(t,r){this.pattern.setAttribute("x",t.toString()),this.pattern.setAttribute("y",r.toString())}static createDom(t,r,T){t=N(nt.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},T);let $,A;if(0<(($=r.length)!=null?$:1)&&0<((A=r.spacing)!=null?A:0)){N(nt.LINE,{stroke:r.colour},t);let F;(F=r.length)!=null&&F&&N(nt.LINE,{stroke:r.colour},t)}else N(nt.LINE,{},t);return t}},hi=class{constructor(t,r){this.db=new Map,this.dbReverse=new Set,this.variableMap_=null,this.variablePrefix_=r||"",this.reservedWords=new Set(t?t.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap_=null}setVariableMap(t){this.variableMap_=t}getNameForUserVariable_(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(t){t=ta(t);for(let r=0;r<t.length;r++)this.getName(t[r].getId(),c.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(t){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(t,r){let T=t;r===c.NameType$$module$build$src$core$names.VARIABLE&&(t=this.getNameForUserVariable_(t))&&(T=t),t=T.toLowerCase();const $=r===c.NameType$$module$build$src$core$names.VARIABLE||r===c.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"";this.db.has(r)||this.db.set(r,new Map);const A=this.db.get(r);return A.has(t)?$+A.get(t):(r=this.getDistinctName(T,r),A.set(t,r.substr($.length)),r)}getUserNames(t){let r;return(t=(r=this.db.get(t))==null?void 0:r.keys())?Array.from(t):[]}getDistinctName(t,r){t=this.safeName_(t);let T="";for(;this.dbReverse.has(t+T)||this.reservedWords.has(t+T);)T=T?T+1:2;return t+=T,this.dbReverse.add(t),(r===c.NameType$$module$build$src$core$names.VARIABLE||r===c.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"")+t}safeName_(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(t[0])!==-1&&(t="my_"+t)):t=bt.UNNAMED_KEY||"unnamed",t}static equals(t,r){return t.toLowerCase()===r.toLowerCase()}};(function(t){t=t.NameType||(t.NameType={}),t.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",t.VARIABLE="VARIABLE",t.PROCEDURE="PROCEDURE"})(hi||(hi={})),c.NameType$$module$build$src$core$names=hi.NameType,hi.DEVELOPER_VARIABLE_TYPE=c.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,c.module$build$src$core$names={},c.module$build$src$core$names.NameType=c.NameType$$module$build$src$core$names,c.module$build$src$core$names.Names=hi;var Nd=class extends Map{constructor(t){super(),this.workspace=t}set(t,r){return this.get(t)===r?this:(super.set(t,r),It(new(Ot(io))(this.workspace,r)),Hs(r)&&r.startPublishing(),this)}delete(t){const r=this.get(t);return t=super.delete(t),t&&(is(this.workspace),It(new(Ot(Gn))(this.workspace,r)),Hs(r)&&r.stopPublishing(),t)}clear(){if(this.size){for(const t of this.keys()){const r=this.get(t);super.delete(t),It(new(Ot(Gn))(this.workspace,r))}is(this.workspace)}}add(t){return this.set(t.getId(),t)}getProcedures(){return[...this.values()]}},ar=class{constructor(t,r,T){this.workspace=t,this.parameters=[],this.returnTypes=null,this.enabled=!0,this.shouldFireEvents=!1,this.id=T!=null?T:ui(),this.name=r}setName(t){if(t===this.name)return this;const r=this.name;return this.name=t,is(this.workspace),this.shouldFireEvents&&It(new(Ot(so))(this.workspace,this,r)),this}insertParameter(t,r){return this.parameters[r]&&this.parameters[r].getId()===t.getId()?this:(this.parameters.splice(r,0,t),t.setProcedureModel(this),Hs(t)&&(this.shouldFireEvents?t.startPublishing():t.stopPublishing()),is(this.workspace),this.shouldFireEvents&&It(new(Ot(oo))(this.workspace,this,t,r)),this)}deleteParameter(t){if(!this.parameters[t])return this;const r=this.parameters[t];return this.parameters.splice(t,1),is(this.workspace),Hs(r)&&r.stopPublishing(),this.shouldFireEvents&&It(new(Ot(ao))(this.workspace,this,r,t)),this}setReturnTypes(t){if(t&&t.length)throw Error("The built-in ProcedureModel does not support typing. You need to implement your own custom ProcedureModel.");if(!!t==!!this.returnTypes)return this;const r=this.returnTypes;return this.returnTypes=t,is(this.workspace),this.shouldFireEvents&&It(new(Ot(ro))(this.workspace,this,r)),this}setEnabled(t){return t===this.enabled?this:(this.enabled=t,is(this.workspace),this.shouldFireEvents&&It(new(Ot(no))(this.workspace,this)),this)}getId(){return this.id}getName(){return this.name}getParameter(t){return this.parameters[t]}getParameters(){return[...this.parameters]}getReturnTypes(){return this.returnTypes}getEnabled(){return this.enabled}startPublishing(){this.shouldFireEvents=!0;for(const t of this.parameters)Hs(t)&&t.startPublishing()}stopPublishing(){this.shouldFireEvents=!1;for(const t of this.parameters)Hs(t)&&t.stopPublishing()}},fn=class{constructor(t,r,T){this.workspace=t,this.shouldFireEvents=!1,this.procedureModel=null,this.id=T!=null?T:ui();let $;this.variable=($=this.workspace.getVariable(r))!=null?$:t.createVariable(r)}setName(t){if(t===this.variable.name)return this;const r=this.variable.name;let T;return this.variable=(T=this.workspace.getVariable(t))!=null?T:this.workspace.createVariable(t),is(this.workspace),this.shouldFireEvents&&It(new(Ot(lo))(this.workspace,this.procedureModel,this,r)),this}setTypes(t){throw Error("The built-in ParameterModel does not support typing. You need to implement your own custom ParameterModel.")}getName(){return this.variable.name}getTypes(){return[]}getId(){return this.id}getVariableModel(){return this.variable}startPublishing(){this.shouldFireEvents=!0}stopPublishing(){this.shouldFireEvents=!1}setProcedureModel(t){return this.procedureModel=t,this}},Io,Vl;Io="PROCEDURE",Vl="x",c.module$build$src$core$procedures={},c.module$build$src$core$procedures.CATEGORY_NAME=Io,c.module$build$src$core$procedures.DEFAULT_ARG=Vl,c.module$build$src$core$procedures.ObservableParameterModel=fn,c.module$build$src$core$procedures.ObservableProcedureMap=Nd,c.module$build$src$core$procedures.ObservableProcedureModel=ar,c.module$build$src$core$procedures.allProcedures=La,c.module$build$src$core$procedures.findLegalName=ic,c.module$build$src$core$procedures.flyoutCategory=Ma,c.module$build$src$core$procedures.getCallers=oc,c.module$build$src$core$procedures.getDefinition=Mg,c.module$build$src$core$procedures.isNameUsed=sc,c.module$build$src$core$procedures.mutateCallers=Lg,c.module$build$src$core$procedures.mutatorOpenListener=rc,c.module$build$src$core$procedures.rename=Og;var Am=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(t){return Object.prototype.hasOwnProperty.call(this,t)||(this[t]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[t]}isField(t){return t.type&this.FIELD}isHat(t){return t.type&this.HAT}isIcon(t){return t.type&this.ICON}isSpacer(t){return t.type&this.SPACER}isInRowSpacer(t){return t.type&this.IN_ROW_SPACER}isInput(t){return t.type&this.INPUT}isExternalInput(t){return t.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(t){return t.type&this.INLINE_INPUT}isStatementInput(t){return t.type&this.STATEMENT_INPUT}isPreviousConnection(t){return t.type&this.PREVIOUS_CONNECTION}isNextConnection(t){return t.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(t){return t.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(t){return t.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(t){return t.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(t){return t.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(t){return t.type&this.RIGHT_SQUARE_CORNER}isCorner(t){return t.type&this.CORNER}isJaggedEdge(t){return t.type&this.JAGGED_EDGE}isRow(t){return t.type&this.ROW}isBetweenRowSpacer(t){return t.type&this.BETWEEN_ROW_SPACER}isTopRow(t){return t.type&this.TOP_ROW}isBottomRow(t){return t.type&this.BOTTOM_ROW}isTopOrBottomRow(t){return t.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(t){return t.type&this.INPUT_ROW}},et=new Am,Bi=class{constructor(t){this.centerline=this.xPos=this.height=this.width=0,this.constants_=t,this.type=et.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},lr=class{constructor(t){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=t,this.type=et.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let t=this.elements.length-1;0<=t;t--){const r=this.elements[t];if(et.isInput(r))return r}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let t=0;t<this.elements.length;t++){const r=this.elements[t];if(et.isSpacer(r))return r}return null}getLastSpacer(){for(let t=this.elements.length-1;0<=t;t--){const r=this.elements[t];if(et.isSpacer(r))return r}return null}},Wl=class extends lr{constructor(t){super(t),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=et.BOTTOM_ROW}hasLeftSquareCorner(t){return!!t.outputConnection||!!t.getNextBlock()}hasRightSquareCorner(t){return!0}measure(){let t=0,r=0,T=0;for(let $=0;$<this.elements.length;$++){const A=this.elements[$];r+=A.width,et.isSpacer(A)||(et.isNextConnection(A)?T=Math.max(T,A.height):t=Math.max(t,A.height))}this.width=Math.max(this.minWidth,r),this.height=Math.max(this.minHeight,t)+T,this.descenderHeight=T,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Ps=class extends Bi{constructor(t,r){super(t),this.connectionModel=r,this.shape=this.constants_.shapeFor(r),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.type|=et.CONNECTION}},Ji=class extends Ps{constructor(t,r){super(t,r.connection),this.input=r,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=et.INPUT,this.align=r.align,(this.connectedBlock=r.connection&&r.connection.targetBlock()?r.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Oo=class extends Ji{constructor(t,r){super(t,r),this.height=0,this.type|=et.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},Ds=class extends Bi{constructor(t,r,T){super(t),this.field=r,this.parentInput=T,this.isEditable=r.EDITABLE,this.flipRtl=r.getFlipRtl(),this.type|=et.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width}},Xl=class extends Bi{constructor(t){super(t),this.type|=et.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},wd=class extends Bi{constructor(t,r){super(t),this.icon=r,this.flipRtl=!1,this.isVisible=r.isVisible(),this.type|=et.ICON,t=r.getCorrectedSize(),this.height=t.height,this.width=t.width}},Qe=class extends Bi{constructor(t,r){super(t),this.type=this.type|et.SPACER|et.IN_ROW_SPACER,this.width=r,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},Yl=class extends Ji{constructor(t,r){super(t,r),this.type|=et.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},hr=class extends Ji{constructor(t,r){super(t,r),this.type|=et.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},zl=class extends lr{constructor(t){super(t),this.connectedBlockWidths=0,this.type|=et.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let t=0;for(let r=0;r<this.elements.length;r++){const T=this.elements[r];this.width+=T.width,et.isInput(T)&&T instanceof Ji&&(et.isStatementInput(T)&&T instanceof hr?t+=T.connectedBlockWidth:et.isExternalInput(T)&&T instanceof Oo&&T.connectedBlockWidth!==0&&(t+=T.connectedBlockWidth-T.connectionWidth)),et.isSpacer(T)||(this.height=Math.max(this.height,T.height))}this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Bd=class extends Bi{constructor(t){super(t),this.type|=et.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},Fd=class extends Ps{constructor(t,r){super(t,r),this.type|=et.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Gd=class extends Ps{constructor(t,r){super(t,r),this.connectionOffsetX=0,this.type|=et.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Ud=class extends Ps{constructor(t,r){super(t,r),this.type|=et.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},ur=class extends Bi{constructor(t,r){super(t),this.type=(r&&r!=="left"?et.RIGHT_ROUND_CORNER:et.LEFT_ROUND_CORNER)|et.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},Kl=class extends lr{constructor(t,r,T){super(t),this.height=r,this.width=T,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|et.SPACER|et.BETWEEN_ROW_SPACER,this.elements=[new Qe(this.constants_,T)]}measure(){}},cr=class extends Bi{constructor(t,r){super(t),this.type=(r&&r!=="left"?et.RIGHT_SQUARE_CORNER:et.LEFT_SQUARE_CORNER)|et.CORNER,this.width=this.height=this.constants_.NO_PADDING}},jl=class extends lr{constructor(t){super(t),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=et.TOP_ROW}hasLeftSquareCorner(t){const r=(t.hat?t.hat==="cap":this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,T=t.getPreviousBlock();return!!t.outputConnection||r||(T?T.getNextBlock()===t:!1)}hasRightSquareCorner(t){return!0}measure(){let t=0,r=0,T=0;for(let $=0;$<this.elements.length;$++){const A=this.elements[$];r+=A.width,et.isSpacer(A)||(et.isHat(A)&&A instanceof Xl?T=Math.max(T,A.ascenderHeight):t=Math.max(t,A.height))}this.width=Math.max(this.minWidth,r),this.height=Math.max(this.minHeight,t)+T,this.capline=this.ascenderHeight=T,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},dr=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs_=null,this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=ae(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(t){this.blockStyles=Object.create(null);const r=t.blockStyles;for(const T in r)this.blockStyles[T]=this.validatedBlockStyle_(r[T]);this.setDynamicProperties_(t)}setDynamicProperties_(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=t.startHats!==void 0?t.startHats:this.ADD_START_HATS}setFontConstants_(t){t.fontStyle&&t.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=t.fontStyle.family),t.fontStyle&&t.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=t.fontStyle.weight),t.fontStyle&&t.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=t.fontStyle.size),t=Nt("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline}setComponentConstants_(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(t){const r="auto_"+t;return this.blockStyles[r]||(this.blockStyles[r]=this.createBlockStyle_(t)),{style:this.blockStyles[r],name:r}}getBlockStyle(t){return this.blockStyles[t||""]||(t&&t.indexOf("auto_")===0?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(t){return this.validatedBlockStyle_({colourPrimary:t})}validatedBlockStyle_(t){const r={};return t&&Object.assign(r,t),t=Us(r.colourPrimary||"#000"),r.colourPrimary=t.hex,r.colourSecondary=r.colourSecondary?Us(r.colourSecondary).hex:this.generateSecondaryColour_(r.colourPrimary),r.colourTertiary=r.colourTertiary?Us(r.colourTertiary).hex:this.generateTertiaryColour_(r.colourPrimary),r.hat=r.hat||"",r}generateSecondaryColour_(t){return Gs("#fff",t,.6)||t}generateTertiaryColour_(t){return Gs("#fff",t,.3)||t}dispose(){this.embossFilter_&&K(this.embossFilter_),this.disabledPattern_&&K(this.disabledPattern_),this.debugFilter_&&K(this.debugFilter_),this.cssNode_=null}makeJaggedTeeth(){const t=this.JAGGED_TEETH_HEIGHT,r=this.JAGGED_TEETH_WIDTH,T=$n([Lt(r,t/4),Lt(2*-r,t/2),Lt(r,t/4)]);return{height:t,width:r,path:T}}makeStartHat(){const t=this.START_HAT_HEIGHT,r=this.START_HAT_WIDTH,T=Je("c",[Lt(30,-t),Lt(70,-t),Lt(r,0)]);return{height:t,width:r,path:T}}makePuzzleTab(){function t(F){F=F?-1:1;const z=-F;var q=T/2;const ct=q+2.5,xt=q+.5,Yt=Lt(-r,F*q);return q=Lt(r,F*q),Je("c",[Lt(0,F*ct),Lt(-r,z*xt),Yt])+Je("s",[Lt(r,2.5*z),q])}const r=this.TAB_WIDTH,T=this.TAB_HEIGHT,$=t(!0),A=t(!1);return{type:this.SHAPES.PUZZLE,width:r,height:T,pathDown:A,pathUp:$}}makeNotch(){function t(z){return $n([Lt(z*$,T),Lt(3*z,0),Lt(z*$,-T)])}const r=this.NOTCH_WIDTH,T=this.NOTCH_HEIGHT,$=(r-3)/2,A=t(1),F=t(-1);return{type:this.SHAPES.NOTCH,width:r,height:T,pathLeft:A,pathRight:F}}makeInsideCorners(){const t=this.CORNER_RADIUS,r=ve("a","0 0,0",t,Lt(-t,t)),T=ve("a","0 0,0",t,Lt(t,t));return{width:t,height:t,pathTop:r,pathBottom:T}}makeOutsideCorners(){const t=this.CORNER_RADIUS,r=ae(0,t)+ve("a","0 0,1",t,Lt(t,-t)),T=ve("a","0 0,1",t,Lt(t,t)),$=ve("a","0 0,1",t,Lt(-t,-t)),A=ve("a","0 0,1",t,Lt(-t,t));return{topLeft:r,topRight:T,bottomRight:A,bottomLeft:$,rightHeight:t}}shapeFor(t){switch(t.type){case yt.INPUT_VALUE:case yt.OUTPUT_VALUE:return this.PUZZLE_TAB;case yt.PREVIOUS_STATEMENT:case yt.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(t,r,T){this.injectCSS_(r,T),this.defs_=N(nt.DEFS,{},t),t=N(nt.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs_),N(nt.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},t),r=N(nt.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},t),N(nt.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},r),N(nt.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},t),N(nt.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},t),this.embossFilterId=t.id,this.embossFilter_=t,t=N(nt.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs_),N(nt.RECT,{width:10,height:10,fill:"#aaa"},t),N(nt.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},t),this.disabledPatternId=t.id,this.disabledPattern_=t,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter_){const t=N(nt.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs_),r=N(nt.FECOMPONENTTRANSFER,{result:"outBlur"},t);N(nt.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),N(nt.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),N(nt.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t}}injectCSS_(t,r){r=this.getCSS_(r),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);const T=r.join(`
`);this.cssNode_?this.cssNode_.firstChild.textContent=T:(r=document.createElement("style"),r.id=t,t=document.createTextNode(T),r.appendChild(t),document.head.insertBefore(r,document.head.firstChild),this.cssNode_=r)}getCSS_(t){return[`${t} .blocklyText, `,`${t} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${t} .blocklyText {`,"fill: #fff;","}",`${t} .blocklyNonEditableText>rect,`,`${t} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${t} .blocklyNonEditableText>text,`,`${t} .blocklyEditableText>text {`,"fill: #000;","}",`${t} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${t} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${t} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${t} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${t} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${t} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${t} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${t} .blocklyReplaceable .blocklyPathLight,`,`${t} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${t} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},kd=!1,qe=class{constructor(t){this.constants=t,this.debugElements_=[],this.svgRoot_=null,this.randomColour_=""}clearElems(){for(let t=0;t<this.debugElements_.length;t++)K(this.debugElements_[t]);this.debugElements_=[]}drawSpacerRow(t,r,T){if(qe.config.rowSpacers){var $=Math.abs(t.height),A=0>t.height;A&&(r-=$),this.debugElements_.push(N(nt.RECT,{class:"rowSpacerRect blockRenderDebug",x:T?-(t.xPos+t.width):t.xPos,y:r,width:t.width,height:$,stroke:A?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawSpacerElem(t,r,T){if(qe.config.elemSpacers){r=Math.abs(t.width);var $=0>t.width,A=$?t.xPos-r:t.xPos;T&&(A=-(A+r)),this.debugElements_.push(N(nt.RECT,{class:"elemSpacerRect blockRenderDebug",x:A,y:t.centerline-t.height/2,width:r,height:t.height,stroke:"pink",fill:$?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawRenderedElem(t,r){if(qe.config.elems){let T=t.xPos;r&&(T=-(T+t.width)),r=t.centerline-t.height/2,this.debugElements_.push(N(nt.RECT,{class:"rowRenderingRect blockRenderDebug",x:T,y:r,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),et.isField(t)&&t instanceof Ds&&t.field instanceof c.FieldLabel$$module$build$src$core$field_label&&this.debugElements_.push(N(nt.RECT,{class:"rowRenderingRect blockRenderDebug",x:T,y:r+this.constants.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}et.isInput(t)&&t instanceof Ji&&qe.config.connections&&this.drawConnection(t.connectionModel)}drawConnection(t){if(qe.config.connections){var r="",T=0,$="";t.type===yt.INPUT_VALUE?(T=4,r="magenta",$="none"):t.type===yt.OUTPUT_VALUE?(T=2,$=r="magenta"):t.type===yt.NEXT_STATEMENT?(T=4,r="goldenrod",$="none"):t.type===yt.PREVIOUS_STATEMENT&&(T=2,$=r="goldenrod"),this.debugElements_.push(N(nt.CIRCLE,{class:"blockRenderDebug",cx:t.getOffsetInBlock().x,cy:t.getOffsetInBlock().y,r:T,fill:$,stroke:r},this.svgRoot_))}}drawRenderedRow(t,r,T){qe.config.rows&&(this.debugElements_.push(N(nt.RECT,{class:"elemRenderingRect blockRenderDebug",x:T?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),et.isTopOrBottomRow(t)||qe.config.connectedBlockBounds&&this.debugElements_.push(N(nt.RECT,{class:"connectedBlockWidth blockRenderDebug",x:T?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}drawRowWithElements(t,r,T){for(let $=0;$<t.elements.length;$++){const A=t.elements[$];A?et.isSpacer(A)?this.drawSpacerElem(A,t.height,T):this.drawRenderedElem(A,T):console.warn("A row has an undefined or null element.",t,A)}this.drawRenderedRow(t,r,T)}drawBoundingBox(t){if(qe.config.blockBounds){var r=t.RTL?-t.width:0;this.debugElements_.push(N(nt.RECT,{class:"blockBoundingBox blockRenderDebug",x:r,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),qe.config.connectedBlockBounds&&(r=t.RTL?-t.widthWithChildren:0,this.debugElements_.push(N(nt.RECT,{class:"blockRenderDebug",x:r,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}}drawDebug(t,r){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);let T=0;for(let $=0;$<r.rows.length;$++){const A=r.rows[$];et.isBetweenRowSpacer(A)?this.drawSpacerRow(A,T,r.RTL):this.drawRowWithElements(A,T,r.RTL),T+=A.height}t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),r.rightSide&&this.drawRenderedElem(r.rightSide,r.RTL),this.drawBoundingBox(r),this.drawRender(t.pathObject.svgPath)}drawRender(t){qe.config.render&&(t.setAttribute("filter","url(#"+this.constants.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))}};qe.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0};var fr=class{constructor(t,r){this.inlinePath_=this.outlinePath_="",this.block_=t,this.info_=r,this.topLeft_=t.getRelativeToSurfaceXY(),this.constants_=r.getRenderer().getConstants()}draw(){if(this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),Wr()){let t;(t=this.block_.renderingDebugger)==null||t.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}hideHiddenIcons_(){for(let t=0,r;r=this.info_.hiddenIcons[t];t++){let T;(T=r.icon.iconGroup_)==null||T.setAttribute("display","none")}}drawOutline_(){this.drawTop_();for(let t=1;t<this.info_.rows.length-1;t++){const r=this.info_.rows[t];r.hasJaggedEdge?this.drawJaggedEdge_(r):r.hasStatement?this.drawStatementInput_(r):r.hasExternalInput?this.drawValueInput_(r):this.drawRightSideRow_(r)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const t=this.info_.topRow,r=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=ae(t.xPos,this.info_.startY);for(let T=0,$;$=r[T];T++)et.isLeftRoundedCorner($)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:et.isRightRoundedCorner($)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:et.isPreviousConnection($)&&$ instanceof Ps?this.outlinePath_+=$.shape.pathLeft:et.isHat($)?this.outlinePath_+=this.constants_.START_HAT.path:et.isSpacer($)&&(this.outlinePath_+=St("h",$.width));this.outlinePath_+=St("v",t.height)}drawJaggedEdge_(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+St("v",t.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(t){const r=t.getLastInput();this.positionExternalValueConnection_(t);const T=ac(r.shape)?r.shape.pathDown(r.height):r.shape.pathDown;this.outlinePath_+=St("H",r.xPos+r.width)+T+St("v",t.height-r.connectionHeight)}drawStatementInput_(t){var r=t.getLastInput();if(r){var T=r.xPos+r.notchOffset+r.shape.width;r=r.shape.pathRight+St("h",-(r.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var $=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=St("H",T)+r+St("v",$)+this.constants_.INSIDE_CORNERS.pathBottom+St("H",t.xPos+t.width),this.positionStatementInputConnection_(t)}}drawRightSideRow_(t){this.outlinePath_+=St("V",t.yPos+t.height)}drawBottom_(){const t=this.info_.bottomRow,r=t.elements;this.positionNextConnection_();let T=0,$="";for(let A=r.length-1,F;F=r[A];A--)et.isNextConnection(F)&&F instanceof Ps?$+=F.shape.pathRight:et.isLeftSquareCorner(F)?$+=St("H",t.xPos):et.isLeftRoundedCorner(F)?$+=this.constants_.OUTSIDE_CORNERS.bottomLeft:et.isRightRoundedCorner(F)?($+=this.constants_.OUTSIDE_CORNERS.bottomRight,T=this.constants_.OUTSIDE_CORNERS.rightHeight):et.isSpacer(F)&&($+=St("h",-1*F.width));this.outlinePath_+=St("V",t.baseline-T),this.outlinePath_+=$}drawLeft_(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){const r=t.connectionOffsetY+t.height;t=ac(t.shape)?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=St("V",r)+t}this.outlinePath_+="z"}drawInternals_(){for(let t=0,r;r=this.info_.rows[t];t++)for(let T=0,$;$=r.elements[T];T++)et.isInlineInput($)?this.drawInlineInput_($):(et.isIcon($)||et.isField($))&&this.layoutField_($)}layoutField_(t){const r=et.isField(t)?t.field.getSvgRoot():t.icon.iconGroup_,T=t.centerline-t.height/2;let $=t.xPos,A="";this.info_.RTL&&($=-($+t.width),t.flipRtl&&($+=t.width,A="scale(-1 1)")),et.isIcon(t)?(r.setAttribute("display","block"),r.setAttribute("transform","translate("+$+","+T+")"),t.icon.computeIconLocation()):r.setAttribute("transform","translate("+$+","+T+")"+A),this.info_.isInsertionMarker&&r.setAttribute("display","none")}drawInlineInput_(t){const r=t.width,T=t.height,$=t.connectionOffsetY,A=t.connectionHeight+$;this.inlinePath_+=be(t.xPos+t.connectionWidth,t.centerline-T/2)+St("v",$)+t.shape.pathDown+St("v",T-A)+St("h",r-t.connectionWidth)+St("v",-T)+"z",this.positionInlineInputConnection_(t)}positionInlineInputConnection_(t){const r=t.centerline-t.height/2;if(t.connectionModel){let T=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(T*=-1),t.connectionModel.setOffsetInBlock(T,r+t.connectionOffsetY)}}positionStatementInputConnection_(t){const r=t.getLastInput();if(r!=null&&r.connectionModel){let T=t.xPos+t.statementEdge+r.notchOffset;this.info_.RTL&&(T*=-1),r.connectionModel.setOffsetInBlock(T,t.yPos)}}positionExternalValueConnection_(t){const r=t.getLastInput();if(r&&r.connectionModel){let T=t.xPos+t.width;this.info_.RTL&&(T*=-1),r.connectionModel.setOffsetInBlock(T,t.yPos)}}positionPreviousConnection_(){const t=this.info_.topRow;if(t.connection){const r=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-r:r,0)}}positionNextConnection_(){const t=this.info_.bottomRow;if(t.connection){const r=t.connection,T=r.xPos;r.connectionModel.setOffsetInBlock(this.info_.RTL?-T:T,t.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}}},pn=class{constructor(t,r){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.startY=this.startX=0,this.renderer_=t,this.block_=r,this.constants_=this.renderer_.getConstants(),this.outputConnection=r.outputConnection?new Gd(this.constants_,r.outputConnection):null,this.isInline=r.getInputsInline()&&!r.isCollapsed(),this.isCollapsed=r.isCollapsed(),this.isInsertionMarker=r.isInsertionMarker(),this.RTL=r.RTL,this.topRow=new jl(this.constants_),this.bottomRow=new Wl(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let t=new zl(this.constants_);this.inputRows.push(t);var r=this.block_.getIcons();for(let T=0,$;$=r[T];T++){const A=new wd(this.constants_,$);this.isCollapsed&&$.collapseHidden?this.hiddenIcons.push(A):t.elements.push(A)}r=void 0;for(let T=0,$;$=this.block_.inputList[T];T++)if($.isVisible()){this.shouldStartNewRow_($,r)&&(this.rows.push(t),t=new zl(this.constants_),this.inputRows.push(t));for(let A=0,F;F=$.fieldRow[A];A++)t.elements.push(new Ds(this.constants_,F,$));this.addInput_($,t),r=$}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new Bd(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var t=!!this.block_.previousConnection;const r=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t;let T=this.topRow.hasLeftSquareCorner(this.block_)?cr:ur;this.topRow.elements.push(new T(this.constants_)),r?(t=new Xl(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Ud(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type===kt.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,T=this.topRow.hasRightSquareCorner(this.block_)?cr:ur,this.topRow.elements.push(new T(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===kt.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new cr(this.constants_)):this.bottomRow.elements.push(new ur(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Fd(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new cr(this.constants_,"right")):this.bottomRow.elements.push(new ur(this.constants_,"right"))}addInput_(t,r){this.isInline&&t.type===kt.VALUE?(r.elements.push(new Yl(this.constants_,t)),r.hasInlineInput=!0):t.type===kt.STATEMENT?(r.elements.push(new hr(this.constants_,t)),r.hasStatement=!0):t.type===kt.VALUE?(r.elements.push(new Oo(this.constants_,t)),r.hasExternalInput=!0):t.type===kt.DUMMY&&(r.minHeight=Math.max(r.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),r.hasDummyInput=!0),r.align===null&&(r.align=t.align)}shouldStartNewRow_(t,r){return r?t.type===kt.STATEMENT||r.type===kt.STATEMENT?!0:t.type===kt.VALUE||t.type===kt.DUMMY?!this.isInline:!1:!1}addElemSpacing_(){for(let t=0,r;r=this.rows[t];t++){const T=r.elements;if(r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new Qe(this.constants_,this.getInRowSpacing_(null,T[0]))),T.length){for(let $=0;$<T.length-1;$++){r.elements.push(T[$]);const A=this.getInRowSpacing_(T[$],T[$+1]);r.elements.push(new Qe(this.constants_,A))}r.elements.push(T[T.length-1]),r.endsWithElemSpacer()&&r.elements.push(new Qe(this.constants_,this.getInRowSpacing_(T[T.length-1],null)))}}}getInRowSpacing_(t,r){if(!t&&r&&et.isStatementInput(r))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&et.isInput(t)&&!r){if(et.isExternalInput(t))return this.constants_.NO_PADDING;if(et.isInlineInput(t))return this.constants_.LARGE_PADDING;if(et.isStatementInput(t))return this.constants_.NO_PADDING}return t&&et.isLeftSquareCorner(t)&&r&&(et.isPreviousConnection(r)||et.isNextConnection(r))?r.notchOffset:t&&et.isLeftRoundedCorner(t)&&r&&(et.isPreviousConnection(r)||et.isNextConnection(r))?r.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let t=0,r=0,T=0;for(let A=0,F;F=this.rows[A];A++){if(F.measure(),r=Math.max(r,F.width),F.hasStatement){var $=F.getLastInput();let z,q;$=F.width-((q=(z=$)==null?void 0:z.width)!=null?q:0),t=Math.max(t,$)}T=Math.max(T,F.widthWithConnectedBlocks)}this.statementEdge=t,this.width=r;for(let A=0,F;F=this.rows[A];A++)F.hasStatement&&(F.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(r,T),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let r=0,T;T=this.rows[r];r++)if(T.hasStatement)this.alignStatementRow_(T);else{var t=T.width;t=this.getDesiredRowWidth_(T)-t,0<t&&this.addAlignmentPadding_(T,t),et.isTopOrBottomRow(T)&&(T.widthWithConnectedBlocks=T.width)}}getDesiredRowWidth_(t){return this.width-this.startX}addAlignmentPadding_(t,r){const T=t.getFirstSpacer(),$=t.getLastSpacer();if((t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=r),t.align===c.Align$$module$build$src$core$input.LEFT&&$)$.width+=r;else if(t.align===c.Align$$module$build$src$core$input.CENTRE&&T&&$)T.width+=r/2,$.width+=r/2;else if(t.align===c.Align$$module$build$src$core$input.RIGHT&&T)T.width+=r;else if($)$.width+=r;else return;t.width+=r}alignStatementRow_(t){const r=t.getLastInput();if(r){var T=t.width-r.width,$=this.statementEdge;T=$-T,0<T&&this.addAlignmentPadding_(t,T),T=t.width,$=this.getDesiredRowWidth_(t),r.width+=$-T,r.height=Math.max(r.height,t.height),t.width+=$-T,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)}}addRowSpacing_(){const t=this.rows;this.rows=[];for(let r=0;r<t.length;r++)this.rows.push(t[r]),r!==t.length-1&&this.rows.push(this.makeSpacerRow_(t[r],t[r+1]))}makeSpacerRow_(t,r){var T=this.getSpacerRowHeight_(t,r);const $=this.getSpacerRowWidth_(t,r);return T=new Kl(this.constants_,T,$),t.hasStatement&&(T.followsStatement=!0),r.hasStatement&&(T.precedesStatement=!0),T}getSpacerRowWidth_(t,r){return this.width-this.startX}getSpacerRowHeight_(t,r){return this.constants_.MEDIUM_PADDING}getElemCenterline_(t,r){return et.isSpacer(r)?t.yPos+r.height/2:et.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,et.isNextConnection(r)?t+r.height/2:t-r.height/2):et.isTopRow(t)?et.isHat(r)?t.capline-r.height/2:t.capline+r.height/2:t.yPos+t.height/2}recordElemPositions_(t){let r=t.xPos;for(let T=0,$;$=t.elements[T];T++)et.isSpacer($)&&($.height=t.height),$.xPos=r,$.centerline=this.getElemCenterline_(t,$),r+=$.width}finalize_(){let t=0,r=0;for(let T=0,$;$=this.rows[T];T++)$.yPos=r,$.xPos=this.startX,r+=$.height,t=Math.max(t,$.widthWithConnectedBlocks),this.recordElemPositions_($);if(this.outputConnection&&this.block_.nextConnection){const T=this.block_.nextConnection.targetBlock();T&&(t=Math.max(t,T.getHeightWidth().width))}this.widthWithChildren=t+this.startX,this.height=r,this.startY=this.topRow.capline,this.bottomRow.baseline=r-this.bottomRow.descenderHeight}},_l=class extends mi{constructor(t,r,T,$){let A=t?t.workspace.id:void 0;$&&$.getType()===dt.types.WORKSPACE&&(A=$.getLocation().id),super(A),this.type=bn,this.blockId=t==null?void 0:t.id,this.oldNode=T||void 0,this.newNode=$,this.isCursor=r}toJson(){const t=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t}fromJson(t){R("Blockly.Events.MarkerMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new _l),r.isCursor=t.isCursor,r.blockId=t.blockId,r.oldNode=t.oldNode,r.newNode=t.newNode,r}};Ut(gt.EVENT,bn,_l);var Lm="blocklyCursor",Mm="blocklyMarker",Pm=.75,Jl=class{constructor(t,r,T){this.workspace=t,this.marker=T,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent_=null,this.constants_=r,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=T.colour||t}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const t=this.isCursor()?Lm:Mm;return this.svgGroup_=N(nt.G,{class:t}),this.createDomInternal_(),this.svgGroup_}setParent_(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t}draw(t,r){if(r){this.constants_=this.workspace.getRenderer().getConstants();var T=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||T,this.applyColour_(r),this.showAtLocation_(r),this.fireMarkerEvent_(t,r),t=this.currentMarkerSvg.childNodes[0],t!==void 0&&t.beginElement&&t.beginElement()}else this.hide()}showAtLocation_(t){const r=t.getLocation().type;t.getType()===dt.types.BLOCK?this.showWithBlock_(t):t.getType()===dt.types.OUTPUT?this.showWithOutput_(t):r===yt.INPUT_VALUE?this.showWithInput_(t):r===yt.NEXT_STATEMENT?this.showWithNext_(t):t.getType()===dt.types.PREVIOUS?this.showWithPrevious_(t):t.getType()===dt.types.FIELD?this.showWithField_(t):t.getType()===dt.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()===dt.types.STACK&&this.showWithStack_(t)}showWithBlockPrevOutput_(t){t=t.getSourceBlock();const r=t.width;var T=t.height,$=T*Pm;const A=this.constants_.CURSOR_BLOCK_PADDING;t.previousConnection?(T=this.constants_.shapeFor(t.previousConnection),this.positionPrevious_(r,A,$,T)):t.outputConnection?($=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(r,T,$)):this.positionBlock_(r,A,$),this.setParent_(t),this.showCurrent_()}showWithBlock_(t){this.showWithBlockPrevOutput_(t)}showWithPrevious_(t){this.showWithBlockPrevOutput_(t)}showWithOutput_(t){this.showWithBlockPrevOutput_(t)}showWithCoordinates_(t){var r=t.getWsCoordinate();t=r.x,r=r.y,this.workspace.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,r,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(t){t=t.getLocation();const r=t.getSize().width,T=t.getSize().height;this.positionRect_(0,0,r,T),this.setParent_(t),this.showCurrent_()}showWithInput_(t){t=t.getLocation();const r=t.getSourceBlock();this.positionInput_(t),this.setParent_(r),this.showCurrent_()}showWithNext_(t){var r=t.getLocation();t=r.getSourceBlock();let T=0;r=r.getOffsetInBlock().y;const $=t.getHeightWidth().width;this.workspace.RTL&&(T=-$),this.positionLine_(T,r,$),this.setParent_(t),this.showCurrent_()}showWithStack_(t){t=t.getLocation();var r=t.getHeightWidth();const T=r.width+this.constants_.CURSOR_STACK_PADDING;r=r.height+this.constants_.CURSOR_STACK_PADDING;const $=-this.constants_.CURSOR_STACK_PADDING/2,A=-this.constants_.CURSOR_STACK_PADDING/2;let F=$;this.workspace.RTL&&(F=-(T+$)),this.positionRect_(F,A,T,r),this.setParent_(t),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(t,r,T){if(t=ae(-r,T)+St("V",-r)+St("H",t+2*r)+St("V",T),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",t),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(t){const r=t.getOffsetInBlock().x,T=t.getOffsetInBlock().y;t=be(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+r+","+T+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(t,r,T){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${t}`),this.markerSvgLine_.setAttribute("y",`${r}`),this.markerSvgLine_.setAttribute("width",`${T}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(t,r,T){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");t=ae(t,0)+St("h",-(t-T.width))+St("v",this.constants_.TAB_OFFSET_FROM_TOP)+T.pathDown+St("V",r)+St("H",t),this.markerBlock_.setAttribute("d",t),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(t,r,T,$){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");t=ae(-r,T)+St("V",-r)+St("H",this.constants_.NOTCH_OFFSET_LEFT)+$.pathLeft+St("H",t+2*r)+St("V",T),this.markerBlock_.setAttribute("d",t),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(t,r,T,$){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${t}`),this.markerSvgRect_.setAttribute("y",`${r}`),this.markerSvgRect_.setAttribute("width",`${T}`),this.markerSvgRect_.setAttribute("height",`${$}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl_(t){t.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent_(t,r){const T=r.getSourceBlock();t=new(Ot(bn))(T,this.isCursor(),t,r),It(t)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=N(nt.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=N(nt.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=N(nt.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=N(nt.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=N(nt.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const t=this.getBlinkProperties_();N(nt.ANIMATE,t,this.markerSvgLine_),N(nt.ANIMATE,t,this.markerInput_),N(nt.ANIMATE,Object.assign({},t,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(t){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(t=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",t),this.markerInput_.firstElementChild.setAttribute("values",t),this.markerBlock_.firstElementChild.setAttribute("values",t))}dispose(){this.svgGroup_&&K(this.svgGroup_)}},Ao=class{constructor(t,r,T){this.markerSvg=this.cursorSvg=null,this.constants=T,this.style=r,this.svgRoot=t,this.svgPath=N(nt.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(t){this.svgPath.setAttribute("d",t)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null}setMarkerSvg(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null}applyColour(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())}setStyle(t){this.style=t}setClass_(t,r){t&&(r?G(this.svgRoot,t):V(this.svgRoot,t))}updateHighlighted(t){t?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(t){this.setClass_("blocklySelected",t)}updateDraggingDelete(t){this.setClass_("blocklyDraggingDelete",t)}updateInsertionMarker(t){this.setClass_("blocklyInsertionMarker",t)}updateMovable(t){this.setClass_("blocklyDraggable",t)}updateReplacementFade(t){this.setClass_("blocklyReplaceable",t)}updateShapeForInputHighlight(t,r){}},Hd="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",ti=class{constructor(t){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,P(t),this.topBlock=t,this.workspace=t.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections()}dispose(){this.availableConnections.length=0,Te();try{this.firstMarker&&this.firstMarker.dispose(),this.lastMarker&&this.lastMarker.dispose()}finally{Ee()}}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){Te(),this.hidePreview(),Ee();var{local:t,closest:r}=this.activeCandidate;if(t.connect(r),this.topBlock.rendered){const T=t.isSuperior()?r:t;Gu(T.getSourceBlock()),this.topBlock.getRootBlock().bringToFront()}}}update(t,r){const T=this.getCandidate(t);((this.wouldDeleteBlock=this.shouldDelete(!!T,r))||this.shouldUpdatePreviews(T,t))&&(Te(),this.maybeHidePreview(T),this.maybeShowPreview(T),Ee())}createMarkerBlock(t){var r=t.type;Te();let T;try{if(T=this.workspace.newBlock(r),T.setInsertionMarker(!0),t.saveExtraState){var $=t.saveExtraState();$&&T.loadExtraState&&T.loadExtraState($)}else if(t.mutationToDom){const A=t.mutationToDom();A&&T.domToMutation&&T.domToMutation(A)}for(r=0;r<t.inputList.length;r++){const A=t.inputList[r];if(A.name===Qn)continue;const F=T.inputList[r];if(!F)throw Error(Hd.replace("%1","an input"));for($=0;$<A.fieldRow.length;$++){const z=A.fieldRow[$],q=F.fieldRow[$];if(!q)throw Error(Hd.replace("%1","a field"));q.setValue(z.getValue())}}T.setCollapsed(t.isCollapsed()),T.setInputsInline(t.getInputsInline()),T.initSvg(),T.getSvgRoot().setAttribute("visibility","hidden")}finally{Ee()}return T}initAvailableConnections(){const t=this.topBlock.getConnections_(!1),r=this.topBlock.lastConnectionInStack(!0);if(r&&r!==this.topBlock.nextConnection){if(t.push(r),this.lastOnStack=r,this.lastMarker){Te();try{this.lastMarker.dispose()}finally{Ee()}}this.lastMarker=this.createMarkerBlock(r.getSourceBlock())}return t}shouldUpdatePreviews(t,r){if(!t)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:T,closest:$}=this.activeCandidate;if($===t.closest&&T===t.local)return!1;const A=T.x+r.x-$.x;return r=T.y+r.y-$.y,t.radius<Math.sqrt(A*A+r*r)-c.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(t){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let r=this.getStartRadius(),T=null;for(let $=0;$<this.availableConnections.length;$++){const A=this.availableConnections[$],F=A.closest(r,t);F.connection&&(T={closest:F.connection,local:A,radius:F.radius},r=F.radius)}return T}getStartRadius(){return this.activeCandidate?c.config$$module$build$src$core$config.connectingSnapRadius:c.config$$module$build$src$core$config.snapRadius}shouldDelete(t,r){return r&&this.workspace.getComponentManager().hasCapability(r.id,Oe.Capability.DELETE_AREA)?r.wouldDelete(this.topBlock,t):!1}maybeShowPreview(t){if(!this.wouldDeleteBlock&&t){var r=t.closest,T;r===((T=this.activeCandidate)==null?void 0:T.closest)||r.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=t,this.showPreview(this.activeCandidate))}}showPreview(t){const r=this.workspace.getRenderer();switch(r.getConnectionPreviewMethod(t.closest,t.local,this.topBlock)){case ti.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(t);break;case ti.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(t);break;case ti.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(t)}r.shouldHighlightConnection(t.closest)&&t.closest.highlight()}maybeHidePreview(t){if(!t)this.hidePreview();else if(this.activeCandidate){const r=this.activeCandidate.local!==t.local;(this.activeCandidate.closest!==t.closest||r||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let t;const r=(t=this.activeCandidate)==null?void 0:t.closest;r&&r.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(r)&&r.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(t){const{local:r,closest:T}=t;let $=(t=this.lastOnStack&&r===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!$)throw Error("Cannot show the insertion marker because there is no insertion marker block");let A;try{A=$.getMatchingConnection(r.getSourceBlock(),r)}catch{if(this.firstMarker=this.createMarkerBlock(this.topBlock),$=t?this.lastMarker:this.firstMarker,!$)throw Error("Cannot show the insertion marker because there is no insertion marker block");A=$.getMatchingConnection(r.getSourceBlock(),r)}if(!A)throw Error("Cannot show the insertion marker because there is no associated connection");if(A===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");$.render(),$.rendered=!0,$.getSvgRoot().setAttribute("visibility","visible"),A&&T&&$.positionNearConnection(A,T),T&&A.connect(T),this.markerConnection=A}hideInsertionMarker(){if(this.markerConnection){var t=this.markerConnection,r=t.getSourceBlock(),T=r.previousConnection,$=r.outputConnection,A=t===r.nextConnection;if($=t.type===yt.INPUT_VALUE&&!($&&$.targetConnection),A&&(!T||!T.targetConnection)||$?t.targetBlock().unplug(!1):t.type!==yt.NEXT_STATEMENT||A?r.unplug(!0):((A=t.targetConnection)&&A.getSourceBlock().unplug(!1),T=T?T.targetConnection:null,r.unplug(!0),T&&A&&T.connect(A)),t.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(t=r.getSvgRoot())&&t.setAttribute("visibility","hidden")}}showInsertionInputOutline(t){t=t.closest,this.highlightedBlock=t.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(t,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(t){if(this.fadedBlock=t.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const t=[];return this.firstMarker&&t.push(this.firstMarker),this.lastMarker&&t.push(this.lastMarker),t}};(function(t){t=t.PREVIEW_TYPE||(t.PREVIEW_TYPE={}),t[t.INSERTION_MARKER=0]="INSERTION_MARKER",t[t.INPUT_OUTLINE=1]="INPUT_OUTLINE",t[t.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(ti||(ti={})),ti.PREVIEW_TYPE;var pr=class{constructor(t){this.overrides=null,this.name=t}getClassName(){return this.name+"-renderer"}init(t,r){this.constants_=this.makeConstants_(),r&&(this.overrides=r,Object.assign(this.constants_,r)),this.constants_.setTheme(t),this.constants_.init()}createDom(t,r){this.constants_.createDom(t,this.name+"-"+r.name,"."+this.getClassName()+"."+r.getClassName())}refreshDom(t,r){const T=this.getConstants();T.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=T.randomIdentifier,this.constants_.setTheme(r),this.constants_.init(),this.createDom(t,r)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new dr}makeRenderInfo_(t){return new pn(this,t)}makeDrawer_(t,r){return new fr(t,r)}makeDebugger_(){return new qe(this.getConstants())}makeMarkerDrawer(t,r){return new Jl(t,this.getConstants(),r)}makePathObject(t,r){return new Ao(t,r,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(t){return!0}orphanCanConnectAtEnd(t,r,T){return!!Jt.getConnectionForOrphanedConnection(t,T===yt.OUTPUT_VALUE?r.outputConnection:r.previousConnection)}getConnectionPreviewMethod(t,r,T){return r.type===yt.OUTPUT_VALUE||r.type===yt.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(T,t.targetBlock(),r.type)?ti.PREVIEW_TYPE.INSERTION_MARKER:ti.PREVIEW_TYPE.REPLACEMENT_FADE:ti.PREVIEW_TYPE.INSERTION_MARKER}render(t){Wr()&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());const r=this.makeRenderInfo_(t);r.measure(),this.makeDrawer_(t,r).draw()}},Qt={};Qt.BottomRow=Wl,Qt.Connection=Ps,Qt.ConstantProvider=dr,Qt.Debug=qe,Qt.Drawer=fr,Qt.ExternalValueInput=Oo,Qt.Field=Ds,Qt.Hat=Xl,Qt.Icon=wd,Qt.InRowSpacer=Qe,Qt.InlineInput=Yl,Qt.InputConnection=Ji,Qt.InputRow=zl,Qt.JaggedEdge=Bd,Qt.MarkerSvg=Jl,Qt.Measurable=Bi,Qt.NextConnection=Fd,Qt.OutputConnection=Gd,Qt.PathObject=Ao,Qt.PreviousConnection=Ud,Qt.RenderInfo=pn,Qt.Renderer=pr,Qt.RoundCorner=ur,Qt.Row=lr,Qt.SpacerRow=Kl,Qt.SquareCorner=cr,Qt.StatementInput=hr,Qt.TopRow=jl,Qt.Types=et,Qt.init=lc,Qt.register=An,Qt.stopDebugger=bg,Qt.unregister=Dg;var Vd=class{constructor(t,r){this.workspace=t,this.theme=r,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(t){var r=this.theme;this.theme=t,(t=this.workspace.getInjectionDiv())&&(r&&(r=r.getClassName())&&V(t,r),(r=this.theme.getClassName())&&G(t,r));for(let T=0,$;$=this.subscribedWorkspaces_[T];T++)$.refreshTheme();for(const[T,$]of this.componentDB)for(const A of $){t=A.element,r=A.propertyName;const F=this.theme&&this.theme.getComponentStyle(T);t.style[r]=F||""}for(const T of this.subscribedWorkspaces_)T.hideChaff()}subscribeWorkspace(t){this.subscribedWorkspaces_.push(t)}unsubscribeWorkspace(t){if(!Ve(this.subscribedWorkspaces_,t))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(t,r,T){this.componentDB.has(r)||this.componentDB.set(r,[]),this.componentDB.get(r).push({element:t,propertyName:T}),r=this.theme&&this.theme.getComponentStyle(r),t.style[T]=r||""}unsubscribe(t){if(t)for(const[r,T]of this.componentDB){for(let $=T.length-1;0<=$;$--)T[$].element===t&&T.splice($,1);T.length||this.componentDB.delete(r)}}dispose(){this.subscribedWorkspaces_=this.theme=this.owner_=null,this.componentDB.clear()}},Zl="VARIABLE_DYNAMIC",us={};us.CATEGORY_NAME=Zl,us.flyoutCategory=Pa,us.flyoutCategoryBlocks=dc,us.onCreateVariableButtonClick_Colour=cc,us.onCreateVariableButtonClick_Number=uc,us.onCreateVariableButtonClick_String=hc;var Wd=class{canConnect(t,r,T,$){return this.canConnectWithReason(t,r,T,$)===Jt.CAN_CONNECT}canConnectWithReason(t,r,T,$){const A=this.doSafetyChecks(t,r);return A!==Jt.CAN_CONNECT?A:this.doTypeChecks(t,r)?T&&!this.doDragChecks(t,r,$||0)?Jt.REASON_DRAG_CHECKS_FAILED:Jt.CAN_CONNECT:Jt.REASON_CHECKS_FAILED}getErrorMessage(t,r,T){switch(t){case Jt.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Jt.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Jt.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Jt.REASON_TARGET_NULL:return"Target connection is null.";case Jt.REASON_CHECKS_FAILED:return"Connection checks failed. "+(r+" expected "+r.getCheck()+", found "+T.getCheck());case Jt.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Jt.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Jt.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(t,r){if(!t||!r)return Jt.REASON_TARGET_NULL;let T,$,A;return t.isSuperior()?(T=t.getSourceBlock(),$=r.getSourceBlock(),A=r):($=t.getSourceBlock(),T=r.getSourceBlock(),A=t,t=r),T===$?Jt.REASON_SELF_CONNECTION:A.type!==Ls[t.type]?Jt.REASON_WRONG_TYPE:T.workspace!==$.workspace?Jt.REASON_DIFFERENT_WORKSPACES:T.isShadow()&&!$.isShadow()?Jt.REASON_SHADOW_PARENT:A.type===yt.OUTPUT_VALUE&&$.previousConnection&&$.previousConnection.isConnected()||A.type===yt.PREVIOUS_STATEMENT&&$.outputConnection&&$.outputConnection.isConnected()?Jt.REASON_PREVIOUS_AND_OUTPUT:Jt.CAN_CONNECT}doTypeChecks(t,r){if(t=t.getCheck(),r=r.getCheck(),!t||!r)return!0;for(let T=0;T<t.length;T++)if(r.indexOf(t[T])!==-1)return!0;return!1}doDragChecks(t,r,T){if(t.distanceFrom(r)>T||r.getSourceBlock().isInsertionMarker())return!1;switch(r.type){case yt.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,r);case yt.OUTPUT_VALUE:if(r.isConnected()&&!r.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case yt.INPUT_VALUE:if(r.isConnected()&&!r.targetBlock().isMovable()&&!r.targetBlock().isShadow())return!1;break;case yt.NEXT_STATEMENT:if(r.isConnected()&&!t.getSourceBlock().nextConnection&&!r.targetBlock().isShadow()&&r.targetBlock().nextConnection)return!1;break;default:return!1}return Es.indexOf(r)===-1}canConnectToPrevious_(t,r){return t.targetConnection||Es.indexOf(r)!==-1?!1:r.targetConnection?(t=r.targetBlock(),t.isInsertionMarker()?!t.getPreviousBlock():!1):!0}};Ut(gt.CONNECTION_CHECKER,Wi,Wd);var Ql=class extends Un{constructor(t){super(t),this.type=js,t&&(this.varType=t.type,this.varName=t.name)}toJson(){const t=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return t.varType=this.varType,t.varName=this.varName,t}fromJson(t){R("Blockly.Events.VarDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.varType=t.varType,this.varName=t.varName}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new Ql),r.varType=t.varType,r.varName=t.varName,r}run(t){const r=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");t?r.deleteVariableById(this.varId):r.createVariable(this.varName,this.varType,this.varId)}};Ut(gt.EVENT,js,Ql);var ql=class extends Un{constructor(t,r){super(t),this.type=Pn,t&&(this.oldName=t.name,this.newName=typeof r=="undefined"?"":r)}toJson(){const t=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return t.oldName=this.oldName,t.newName=this.newName,t}fromJson(t){R("Blockly.Events.VarRename.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.oldName=t.oldName,this.newName=t.newName}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new ql),r.oldName=t.oldName,r.newName=t.newName,r}run(t){const r=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");t?r.renameVariableById(this.varId,this.newName):r.renameVariableById(this.varId,this.oldName)}};Ut(gt.EVENT,Pn,ql);var th=class{constructor(t){this.workspace=t,this.variableMap=new Map}clear(){this.variableMap.clear()}renameVariable(t,r){if(t.name!==r){var T=this.getVariable(r,t.type),$=this.workspace.getAllBlocks(!1);Pt(!0);try{T&&T.getId()!==t.getId()?this.renameVariableWithConflict_(t,r,T,$):this.renameVariableAndUses_(t,r,$)}finally{Pt(!1)}}}renameVariableById(t,r){const T=this.getVariableById(t);if(!T)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(T,r)}renameVariableAndUses_(t,r,T){for(It(new(Ot(Pn))(t,r)),t.name=r,r=0;r<T.length;r++)T[r].updateVarName(t)}renameVariableWithConflict_(t,r,T,$){const A=t.type;for(r!==T.name&&this.renameVariableAndUses_(T,r,$),r=0;r<$.length;r++)$[r].renameVarById(t.getId(),T.getId());It(new(Ot(js))(t)),Ve(this.variableMap.get(A),t)}createVariable(t,r,T){var $=this.getVariable(t,r);if($){if(T&&$.getId()!==T)throw Error('Variable "'+t+'" is already in use and its id is "'+$.getId()+'" which conflicts with the passed in id, "'+T+'".');return $}if(T&&this.getVariableById(T))throw Error('Variable id, "'+T+'", is already in use.');return $=T||ui(),r=r||"",$=new kn(this.workspace,t,r,$),t=this.variableMap.get(r)||[],t.push($),this.variableMap.delete(r),this.variableMap.set(r,t),It(new(Ot(Ss))($)),$}deleteVariable(t){const r=t.getId(),T=this.variableMap.get(t.type);if(T){for(let $=0;$<T.length;$++)if(T[$].getId()===r){T.splice($,1),It(new(Ot(js))(t));break}}}deleteVariableById(t){const r=this.getVariableById(t);if(r){var T=r.name;const $=this.getVariableUsesById(t);for(let A=0,F;F=$[A];A++)if(F.type==="procedures_defnoreturn"||F.type==="procedures_defreturn"){t=String(F.getFieldValue("NAME")),T=bt.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",T).replace("%2",t),$r(T);return}1<$.length?(T=bt.DELETE_VARIABLE_CONFIRMATION.replace("%1",String($.length)).replace("%2",T),Qo(T,A=>{A&&r&&this.deleteVariableInternal(r,$)})):this.deleteVariableInternal(r,$)}else console.warn("Can't delete non-existent variable: "+t)}deleteVariableInternal(t,r){const T=oe();T||Pt(!0);try{for(let $=0;$<r.length;$++)r[$].dispose(!0);this.deleteVariable(t)}finally{T||Pt(!1)}}getVariable(t,r){if(r=this.variableMap.get(r||"")){for(let T=0,$;$=r[T];T++)if(hi.equals($.name,t))return $}return null}getVariableById(t){for(const[,r]of this.variableMap)for(const T of r)if(T.getId()===t)return T;return null}getVariablesOfType(t){return(t=this.variableMap.get(t||""))?t.slice():[]}getVariableTypes(t){const r=new Set(this.variableMap.keys());if(t&&t.getPotentialVariableMap())for(const T of t.getPotentialVariableMap().variableMap.keys())r.add(T);return r.has("")||r.add(""),Array.from(r.values())}getAllVariables(){let t=[];for(const r of this.variableMap.values())t=t.concat(r);return t}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(t=>t.name)}getVariableUsesById(t){const r=[],T=this.workspace.getAllBlocks(!1);for(let $=0;$<T.length;$++){const A=T[$].getVarModels();if(A)for(let F=0;F<A.length;F++)A[F].getId()===t&&r.push(T[$])}return r}},Zi=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(t){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Nd(this),this.potentialVariableMap=null,this.id=ui(),C(this),this.options=t||new yi({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(ni(gt.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new th(this)}dispose(){this.listeners.length=0,this.clear(),I(this)}sortObjects_(t,r){return t=t.getRelativeToSurfaceXY(),r=r.getRelativeToSurfaceXY(),t.y+Zi.prototype.sortObjects_.offset*t.x-(r.y+Zi.prototype.sortObjects_.offset*r.x)}addTopBlock(t){this.topBlocks.push(t)}removeTopBlock(t){if(!Ve(this.topBlocks,t))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(t){const r=[].concat(this.topBlocks);return t&&1<r.length&&(this.sortObjects_.offset=Math.sin(Ct(Zi.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),r.sort(this.sortObjects_)),r}addTypedBlock(t){this.typedBlocksDB.has(t.type)||this.typedBlocksDB.set(t.type,[]),this.typedBlocksDB.get(t.type).push(t)}removeTypedBlock(t){Ve(this.typedBlocksDB.get(t.type),t),this.typedBlocksDB.get(t.type).length||this.typedBlocksDB.delete(t.type)}getBlocksByType(t,r){return this.typedBlocksDB.has(t)?(t=this.typedBlocksDB.get(t).slice(0),r&&t&&1<t.length&&(this.sortObjects_.offset=Math.sin(Ct(Zi.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t.filter(function(T){return!T.isInsertionMarker()})):[]}addTopComment(t){this.topComments.push(t),this.commentDB.has(t.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB.set(t.id,t)}removeTopComment(t){if(!Ve(this.topComments,t))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(t.id)}getTopComments(t){const r=[].concat(this.topComments);return t&&1<r.length&&(this.sortObjects_.offset=Math.sin(Ct(Zi.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),r.sort(this.sortObjects_)),r}getAllBlocks(t){if(t){var r=this.getTopBlocks(!0);t=[];for(let T=0;T<r.length;T++)t.push(...r[T].getDescendants(!0))}else for(t=this.getTopBlocks(!1),r=0;r<t.length;r++)t.push(...t[r].getChildren(!1));return t.filter(function(T){return!T.isInsertionMarker()})}clear(){this.isClearing=!0;try{const t=oe();for(t||Pt(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();t||Pt(!1),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(t,r){this.variableMap.renameVariableById(t,r)}createVariable(t,r,T){return this.variableMap.createVariable(t,r,T)}getVariableUsesById(t){return this.variableMap.getVariableUsesById(t)}deleteVariableById(t){this.variableMap.deleteVariableById(t)}getVariable(t,r){return this.variableMap.getVariable(t,r)}getVariableById(t){return this.variableMap.getVariableById(t)}getVariablesOfType(t){return this.variableMap.getVariablesOfType(t)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(t,r){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(t){return this.options.maxInstances?(this.options.maxInstances[t]!==void 0?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0}isCapacityAvailable(t){if(!this.hasBlockLimits())return!0;let r=0;for(const T in t){if(t[T]>this.remainingCapacityOfType(T))return!1;r+=t[T]}return!(r>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(t){var r=t?this.redoStack_:this.undoStack_,T=t?this.undoStack_:this.redoStack_;const $=r.pop();if($){for(var A=[$];r.length&&$.group&&$.group===r[r.length-1].group;)A.push(r.pop());for(r=0;r<A.length;r++)T.push(A[r]);A=Cr(A,t),_e(!1);try{for(T=0;T<A.length;T++)A[T].run(t)}finally{_e(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,Jo()}addChangeListener(t){return this.listeners.push(t),t}removeChangeListener(t){Ve(this.listeners,t)}fireChangeListener(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let r=0;r<this.listeners.length;r++)(0,this.listeners[r])(t)}getBlockById(t){return this.blockDB.get(t)||null}setBlockById(t,r){this.blockDB.set(t,r)}removeBlockById(t){this.blockDB.delete(t)}getCommentById(t){let r;return(r=this.commentDB.get(t))!=null?r:null}allInputsFilled(t){const r=this.getTopBlocks(!1);for(let T=0;T<r.length;T++)if(!r[T].allInputsFilled(t))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new th(this)}getVariableMap(){return this.variableMap}setVariableMap(t){this.variableMap=t}getProcedureMap(){return this.procedureMap}static getById(t){return y(t)}static getAll(){return S()}};Zi.SCAN_ANGLE=3;var Dm=100,Xd=class{constructor(t){this.parentWorkspace=t,this.sounds=new Map,this.lastSound_=null}dispose(){this.sounds.clear()}load(t,r){if(t.length){try{var T=new globalThis.Audio}catch{return}for(let A=0;A<t.length;A++){const F=t[A],z=F.match(/\.(\w+)$/);if(z&&T.canPlayType("audio/"+z[1])){var $=new globalThis.Audio(F);break}}$&&this.sounds.set(r,$)}}preload(){for(const t of this.sounds.values()){t.volume=.01;const r=t.play();if(r!==void 0?r.then(t.pause).catch(function(){}):t.pause(),Vs||Uc)break}}play(t,r){var T=this.sounds.get(t);T?(t=new Date,this.lastSound_!==null&&t.getTime()-this.lastSound_.getTime()<Dm||(this.lastSound_=t,T=Vs||Jr?T:T.cloneNode(),T.volume=r===void 0?1:r,T.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(t,r)}},Yd=class{constructor(t){this.workspace=t,this.id="zoomControls",this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=this.onZoomOutWrapper=this.onZoomInWrapper=this.onZoomResetWrapper=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=N(nt.G,{});const t=String(Math.random()).substring(2);return this.createZoomOutSvg(t),this.createZoomInSvg(t),this.workspace.isMovable()&&this.createZoomResetSvg(t),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[Oe.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&K(this.svgGroup),this.onZoomResetWrapper&&p(this.onZoomResetWrapper),this.onZoomInWrapper&&p(this.onZoomInWrapper),this.onZoomOutWrapper&&p(this.onZoomOutWrapper)}getBoundingRectangle(){let t=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(t+=this.LARGE_SPACING+this.HEIGHT),new de(this.top,this.top+t,this.left,this.left+this.WIDTH)}position(t,r){if(this.initialized){var T=Oa(this.workspace,t),$=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&($+=this.LARGE_SPACING+this.HEIGHT),t=Ia(T,new Ie(this.WIDTH,$),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,t,this.workspace),T=T.vertical,r=Aa(t,this.MARGIN_VERTICAL,T===_i.TOP?hs.DOWN:hs.UP,r),T===_i.TOP){var A=this.SMALL_SPACING+this.HEIGHT,F;(F=this.zoomInGroup)==null||F.setAttribute("transform","translate(0, "+A+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(A+this.LARGE_SPACING+this.HEIGHT)+")")}else{F=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let q;(q=this.zoomInGroup)==null||q.setAttribute("transform","translate(0, "+F+")"),F=F+this.SMALL_SPACING+this.HEIGHT,(A=this.zoomOutGroup)==null||A.setAttribute("transform","translate(0, "+F+")")}this.top=r.top,this.left=r.left;var z;(z=this.svgGroup)==null||z.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(t){this.zoomOutGroup=N(nt.G,{class:"blocklyZoom"},this.svgGroup);const r=N(nt.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup);N(nt.RECT,{width:32,height:32},r),N(nt.IMAGE,{width:Ue.width,height:Ue.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup).setAttributeNS(Ye,"xlink:href",this.workspace.options.pathToMedia+Ue.url),this.onZoomOutWrapper=u(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1))}createZoomInSvg(t){this.zoomInGroup=N(nt.G,{class:"blocklyZoom"},this.svgGroup);const r=N(nt.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup);N(nt.RECT,{width:32,height:32},r),N(nt.IMAGE,{width:Ue.width,height:Ue.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup).setAttributeNS(Ye,"xlink:href",this.workspace.options.pathToMedia+Ue.url),this.onZoomInWrapper=u(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1))}zoom(t,r){this.workspace.markFocused(),this.workspace.zoomCenter(t),this.fireZoomEvent(),g(),r.stopPropagation(),r.preventDefault()}createZoomResetSvg(t){this.zoomResetGroup=N(nt.G,{class:"blocklyZoom"},this.svgGroup);const r=N(nt.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup);N(nt.RECT,{width:32,height:32},r),N(nt.IMAGE,{width:Ue.width,height:Ue.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup).setAttributeNS(Ye,"xlink:href",this.workspace.options.pathToMedia+Ue.url),this.onZoomResetWrapper=u(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this))}resetZoom(t){this.workspace.markFocused();const r=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(r),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),g(),t.stopPropagation(),t.preventDefault()}fireZoomEvent(){const t=new(Ot(os))(null,this.workspace.id,"zoom_controls");It(t)}};di(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var bm=20,Ci=class extends Zi{constructor(t,r,T){super(t),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.workspaceDragSurface=this.blockDragSurface=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.isDragSurfaceActive=!1,this.inverseScreenCTM=this.targetWorkspace=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=null,this.metricsManager=new(ni(gt.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=t.setMetrics||Ci.setTopLevelWorkspaceMetrics_,this.componentManager=new Oe,this.connectionDBList=dn.init(this.connectionChecker),r&&(this.blockDragSurface=r),T&&(this.workspaceDragSurface=T),this.useWorkspaceDragSurface=!!this.workspaceDragSurface,this.audioManager=new Xd(t.parentWorkspace),this.grid=this.options.gridPattern?new Hl(this.options.gridPattern,t.gridOptions):null,this.markerManager=new Hn(this),c.module$build$src$core$variables&&ea&&this.registerToolboxCategoryCallback(co,ea),us&&Pa&&this.registerToolboxCategoryCallback(Zl,Pa),c.module$build$src$core$procedures&&Ma&&(this.registerToolboxCategoryCallback(Io,Ma),this.addChangeListener(rc)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Vd(this,this.options.theme||xo),this.themeManager_.subscribeWorkspace(this);let $;this.renderer=lc(this.options.renderer||"geras",this.getTheme(),($=this.options.rendererOverrides)!=null?$:void 0),this.cachedParentSvgSize=new Ie(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(t){this.metricsManager=t,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(t){this.markerManager.setCursorSvg(t)}setMarkerSvg(t){this.markerManager.setMarkerSvg(t)}getMarker(t){return this.markerManager?this.markerManager.getMarker(t):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(t){t||(t=xo),this.themeManager_.setTheme(t)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(r){return!!r.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const t=new(Ot(Bn))(this.getTheme().name,this.id);It(t)}updateBlockStyles_(t){for(let r=0,T;T=t[r];r++){const $=T.getStyleName();if($){const A=T;A.setStyle($),A.mutator&&A.mutator.updateBlockStyle()}}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM=t.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(t){let r=0,T=0,$=1;(st(this.getCanvas(),t)||st(this.getBubbleCanvas(),t))&&($=this.scale);do{const A=fi(t);(t===this.getCanvas()||t===this.getBubbleCanvas())&&($=1),r+=A.x*$,T+=A.y*$,t=t.parentNode}while(t&&t!==this.getParentSvg());return new Et(r,T)}getCachedParentSvgSize(){const t=this.cachedParentSvgSize;return new Ie(t.width,t.height)}getOriginOffsetInPixels(){return Ar(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let t=this.svgGroup_;for(;t;){if((" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=t;break}t=t.parentNode}}return this.injectionDiv}getBlockCanvas(){return this.svgBlockCanvas_}setResizeHandlerWrapper(t){this.resizeHandlerWrapper=t}createDom(t){return this.svgGroup_=N(nt.G,{class:"blocklyWorkspace"}),t&&(this.svgBackground_=N(nt.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),t==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=N(nt.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=N(nt.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(u(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),document.body.addEventListener("wheel",function(){}),u(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(ni(gt.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(t=ni(gt.CURSOR,this.options))&&this.markerManager.setCursor(new t),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&K(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const t=this.getParentSvg();t&&t.parentNode&&K(t.parentNode)}this.resizeHandlerWrapper&&(p(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null)}addTrashcan(){this.trashcan=Ci.newTrashcan(this);const t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)}static newTrashcan(t){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new Yd(this);const t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)}addFlyout(t){const r=new yi({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return r.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(ni(gt.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(r):new(ni(gt.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(r),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(t)}getFlyout(t){return this.flyout||t?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const t=this.componentManager.getComponents(Oe.Capability.POSITIONABLE,!0),r=this.getMetricsManager().getUiMetrics(),T=[];for(let $=0,A;A=t[$];$++){A.position(r,T);const F=A.getBoundingRectangle();F&&T.push(F)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const t=oa();Et.equals(this.lastRecordedPageScroll,t)||(this.lastRecordedPageScroll=t,this.updateScreenCalculations_())}getCanvas(){return this.svgBlockCanvas_}setCachedParentSvgSize(t,r){const T=this.getParentSvg();t!=null&&(this.cachedParentSvgSize.width=t,T.setAttribute("data-cached-width",t.toString())),r!=null&&(this.cachedParentSvgSize.height=r,T.setAttribute("data-cached-height",r.toString()))}getBubbleCanvas(){return this.svgBubbleCanvas_}getParentSvg(){if(!this.cachedParentSvg){let t=this.svgGroup_;for(;t;){if(t.tagName==="svg"){this.cachedParentSvg=t;break}t=t.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(Se()){var t=this.scale,r=-this.scrollY,T=-this.scrollX;if(!(t===this.oldScale&&1>Math.abs(r-this.oldTop)&&1>Math.abs(T-this.oldLeft))){var $=new(Ot(Cs))(r,T,t,this.id,this.oldScale);this.oldScale=t,this.oldTop=r,this.oldLeft=T,It($)}}}translate(t,r){if(this.useWorkspaceDragSurface&&this.isDragSurfaceActive){var T;(T=this.workspaceDragSurface)==null||T.translateSurface(t,r)}else T="translate("+t+","+r+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",T),this.svgBubbleCanvas_.setAttribute("transform",T);this.blockDragSurface&&this.blockDragSurface.translateAndScaleGroup(t,r,this.scale),this.grid&&this.grid.moveTo(t,r),this.maybeFireViewportChangeEvent()}resetDragSurface(){if(this.useWorkspaceDragSurface){this.isDragSurfaceActive=!1;var t=this.workspaceDragSurface.getSurfaceTranslation();this.workspaceDragSurface.clearAndHide(this.svgGroup_),t="translate("+t.x+","+t.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",t),this.svgBubbleCanvas_.setAttribute("transform",t)}}setupDragSurface(){if(this.useWorkspaceDragSurface&&!this.isDragSurfaceActive){this.isDragSurfaceActive=!0;var t=this.svgBlockCanvas_.previousSibling,r,T=parseInt((r=this.getParentSvg().getAttribute("width"))!=null?r:"0"),$;r=parseInt(($=this.getParentSvg().getAttribute("height"))!=null?$:"0"),$=fi(this.getCanvas()),this.workspaceDragSurface.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,T,r,this.scale),this.workspaceDragSurface.translateSurface($.x,$.y)}}getBlockDragSurface(){return this.blockDragSurface}getWidth(){const t=this.getMetrics();return t?t.viewWidth/this.scale:0}setVisible(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){t=this.getAllBlocks(!1);for(let r=t.length-1;0<=r;r--)t[r].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)}render(){for(var t=this.getAllBlocks(!1),r=t.length-1;0<=r;r--)t[r].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),r=0;r<t.length;r++)t[r].render(!1);this.markerManager.updateMarkers()}highlightBlock(t,r){if(r===void 0){for(let T=0,$;$=this.highlightedBlocks[T];T++)$.setHighlighted(!1);this.highlightedBlocks.length=0}(t=t?this.getBlockById(t):null)&&((r=r===void 0||r)?this.highlightedBlocks.indexOf(t)===-1&&this.highlightedBlocks.push(t):Ve(this.highlightedBlocks,t),t.setHighlighted(r))}paste(t){if(!this.rendered||!t.type&&!t.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const r=oe();return r||Pt(!0),t=t.type?this.pasteBlock_(null,t):t.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(t):this.pasteBlock_(t,null),Pt(r),t}pasteBlock_(t,r){Te();let T;try{let $=0,A=0;if(t){T=Fs(t,this);let F;$=parseInt((F=t.getAttribute("x"))!=null?F:"0"),this.RTL&&($=-$);let z;A=parseInt((z=t.getAttribute("y"))!=null?z:"0")}else r&&(T=ms(r,this),$=r.x||10,this.RTL&&($=this.getWidth()-$),A=r.y||10);if(!isNaN($)&&!isNaN(A)){let F;do{F=!1;const z=this.getAllBlocks(!1);for(let q=0,ct;ct=z[q];q++){const xt=ct.getRelativeToSurfaceXY();if(1>=Math.abs($-xt.x)&&1>=Math.abs(A-xt.y)){F=!0;break}}if(!F){const q=T.getConnections_(!1);for(let ct=0,xt;xt=q[ct];ct++)if(xt.closest(c.config$$module$build$src$core$config.snapRadius,new Et($,A)).connection){F=!0;break}}F&&($=this.RTL?$-c.config$$module$build$src$core$config.snapRadius:$+c.config$$module$build$src$core$config.snapRadius,A+=2*c.config$$module$build$src$core$config.snapRadius)}while(F);T.moveTo(new Et($,A))}}finally{Ee()}return Se()&&!T.isShadow()&&It(new(Ot(Le))(T)),T.select(),T}pasteWorkspaceComment_(t){Te();let r;try{r=Ne.fromXmlRendered(t,this);let T,$=parseInt((T=t.getAttribute("x"))!=null?T:"0"),A,F=parseInt((A=t.getAttribute("y"))!=null?A:"0");isNaN($)||isNaN(F)||(this.RTL&&($=-$),r.moveBy($+50,F+50))}finally{Ee()}return Se()&&Di.fireCreateEvent(r),r.select(),r}refreshToolboxSelection(){const t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()}renameVariableById(t,r){super.renameVariableById(t,r),this.refreshToolboxSelection()}deleteVariableById(t){super.deleteVariableById(t),this.refreshToolboxSelection()}createVariable(t,r,T){return t=super.createVariable(t,r,T),this.refreshToolboxSelection(),t}recordDragTargets(){const t=this.componentManager.getComponents(Oe.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let r=0,T;T=t[r];r++){const $=T.getClientRect();$&&this.dragTargetAreas.push({component:T,clientRect:$})}}newBlock(t,r){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(t){for(let r=0,T;T=this.dragTargetAreas[r];r++)if(T.clientRect.contains(t.clientX,t.clientY))return T.component;return null}onMouseDown_(t){const r=this.getGesture(t);r&&r.handleWsStart(t,this)}startDrag(t,r){t=E(t,this.getParentSvg(),this.getInverseScreenCTM()),t.x/=this.scale,t.y/=this.scale,this.dragDeltaXY=Et.difference(r,t)}moveDrag(t){return t=E(t,this.getParentSvg(),this.getInverseScreenCTM()),t.x/=this.scale,t.y/=this.scale,Et.sum(this.dragDeltaXY,t)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())}onMouseWheel_(t){if(bi.inProgress())t.preventDefault(),t.stopPropagation();else{var r=this.options.zoomOptions&&this.options.zoomOptions.wheel,T=this.options.moveOptions&&this.options.moveOptions.wheel;if(r||T){var $=x(t);if(Ha)var A=t.metaKey;r&&(t.ctrlKey||A||!T)?($=-$.y/50,r=E(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(r.x,r.y,$)):(r=this.scrollX-$.x,T=this.scrollY-$.y,t.shiftKey&&!$.x&&(r=this.scrollX-$.y,T=this.scrollY),this.scroll(r,T)),t.preventDefault()}}}getBlocksBoundingBox(){const t=this.getTopBoundedElements();if(!t.length)return new de(0,0,0,0);const r=t[0].getBoundingRectangle();for(let $=1;$<t.length;$++){var T=t[$];T.isInsertionMarker&&T.isInsertionMarker()||(T=T.getBoundingRectangle(),T.top<r.top&&(r.top=T.top),T.bottom>r.bottom&&(r.bottom=T.bottom),T.left<r.left&&(r.left=T.left),T.right>r.right&&(r.right=T.right))}return r}cleanUp(){this.setResizesEnabled(!1),Pt(!0);const t=this.getTopBlocks(!0);let r=0;for(let T=0,$;$=t[T];T++){if(!$.isMovable())continue;const A=$.getRelativeToSurfaceXY();$.moveBy(-A.x,r-A.y),$.snapToGrid(),r=$.getRelativeToSurfaceXY().y+$.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}Pt(!1),this.setResizesEnabled(!0)}showContextMenu(t){if(!this.options.readOnly&&!this.isFlyout){var r=Zt.registry.getContextMenuOptions(Zt.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(r,t),Hr(t,r,this.RTL)}}updateToolbox(t){if(t=wr(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(ma(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(M(this),this.setBrowserFocus())}setBrowserFocus(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch{try{this.getParentSvg().parentElement.setActive()}catch{this.getParentSvg().parentElement.focus({preventScroll:!0})}}}zoom(t,r,T){T=Math.pow(this.options.zoomOptions.scaleSpeed,T);const $=this.scale*T;if(this.scale!==$){$>this.options.zoomOptions.maxScale?T=this.options.zoomOptions.maxScale/this.scale:$<this.options.zoomOptions.minScale&&(T=this.options.zoomOptions.minScale/this.scale);var A=this.getCanvas().getCTM(),F=this.getParentSvg().createSVGPoint();F.x=t,F.y=r,F=F.matrixTransform(A.inverse()),t=F.x,r=F.y,A=A.translate(t*(1-T),r*(1-T)).scale(T),this.scrollX=A.e,this.scrollY=A.f,this.setScale($)}}zoomCenter(t){var r=this.getMetrics();let T;this.flyout?(T=r.svgWidth?r.svgWidth/2:0,r=r.svgHeight?r.svgHeight/2:0):(T=r.viewWidth/2+r.absoluteLeft,r=r.viewHeight/2+r.absoluteTop),this.zoom(T,r,t)}zoomToFit(){if(this.isMovable()){var t=this.getMetrics(),r=t.viewWidth;t=t.viewHeight;var T=this.getBlocksBoundingBox(),$=2*bm,A=T.right-T.left+$;if(T=T.bottom-T.top+$,A){this.flyout&&(this.horizontalLayout?(t+=this.flyout.getHeight(),T+=this.flyout.getHeight()/this.scale):(r+=this.flyout.getWidth(),A+=this.flyout.getWidth()/this.scale)),r/=A,t/=T,Te();try{this.setScale(Math.min(r,t)),this.scrollCenter()}finally{Ee()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){G(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),G(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}endCanvasTransition(){V(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),V(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var t=this.getMetrics(),r=(t.scrollWidth-t.viewWidth)/2,T=(t.scrollHeight-t.viewHeight)/2;r=-r-t.scrollLeft,T=-T-t.scrollTop,this.scroll(r,T)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var r=t.getRelativeToSurfaceXY(),T=t.getHeightWidth(),$=this.scale;t=(r.x+(this.RTL?-1:1)*T.width/2)*$,r=(r.y+T.height/2)*$,T=this.getMetrics(),this.scroll(-(t-T.viewWidth/2),-(r-T.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,this.hideChaff(!1),(t=this.getFlyout(!1))&&t.isVisible()&&(t.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(t,r){this.hideChaff(!0);const T=this.getMetrics();t=Math.min(t,-T.scrollLeft),r=Math.min(r,-T.scrollTop);const $=T.scrollTop+Math.max(0,T.scrollHeight-T.viewHeight);t=Math.max(t,-(T.scrollLeft+Math.max(0,T.scrollWidth-T.viewWidth))),r=Math.max(r,-$),this.scrollX=t,this.scrollY=r,this.scrollbar&&this.scrollbar.set(-(t+T.scrollLeft),-(r+T.scrollTop),!1),t+=T.absoluteLeft,r+=T.absoluteTop,this.translate(t,r)}getBlockById(t){return super.getBlockById(t)}getAllBlocks(t){return super.getAllBlocks(t)}getTopBlocks(t){return super.getTopBlocks(t)}addTopBlock(t){this.addTopBoundedElement(t),super.addTopBlock(t)}removeTopBlock(t){this.removeTopBoundedElement(t),super.removeTopBlock(t)}addTopComment(t){this.addTopBoundedElement(t),super.addTopComment(t)}removeTopComment(t){this.removeTopBoundedElement(t),super.removeTopComment(t)}addTopBoundedElement(t){this.topBoundedElements.push(t)}removeTopBoundedElement(t){Ve(this.topBoundedElements,t)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(t){const r=!this.resizesEnabled&&t;this.resizesEnabled=t,r&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(t,r){if(typeof r!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(t,r)}getButtonCallback(t){let r;return(r=this.flyoutButtonCallbacks.get(t))!=null?r:null}removeButtonCallback(t){this.flyoutButtonCallbacks.delete(t)}registerToolboxCategoryCallback(t,r){if(typeof r!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(t,r)}getToolboxCategoryCallback(t){return this.toolboxCategoryCallbacks.get(t)||null}removeToolboxCategoryCallback(t){this.toolboxCategoryCallbacks.delete(t)}getGesture(t){const r=t.type==="pointerdown",T=this.currentGesture_;return T?r&&T.hasStarted()?(console.warn("Tried to start the same gesture twice."),T.cancel(),null):T:r?this.currentGesture_=new bi(t,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(t){vs(),Oi(),Ii();const r=!!t;this.getComponentManager().getComponents(Oe.Capability.AUTOHIDEABLE,!0).forEach(T=>T.autoHide(r))}static setTopLevelWorkspaceMetrics_(t){const r=this.getMetrics();typeof t.x=="number"&&(this.scrollX=-(r.scrollLeft+(r.scrollWidth-r.viewWidth)*t.x)),typeof t.y=="number"&&(this.scrollY=-(r.scrollTop+(r.scrollHeight-r.viewHeight)*t.y)),this.translate(this.scrollX+r.absoluteLeft,this.scrollY+r.absoluteTop)}},eh={};eh.load=Bg,eh.save=wg;var zd=class{constructor(){this.priority=gd}save(t){const r=[];for(const T of t.getAllVariables())t={name:T.name,id:T.getId()},T.type&&(t.type=T.type),r.push(t);return r.length?r:null}load(t,r){for(const T of t)r.createVariable(T.name,T.type,T.id)}clear(t){t.getVariableMap().clear()}};Ca("variables",new zd);var Kd={};Kd.VariableSerializer=zd;var jd=class{constructor(t,r){this.procedureModelClass=t,this.parameterModelClass=r,this.priority=md}save(t){return t.getProcedureMap().getProcedures().map(r=>Da(r))}load(t,r){const T=r.getProcedureMap();for(const $ of t)T.add(Na(this.procedureModelClass,this.parameterModelClass,$,r))}clear(t){t.getProcedureMap().clear()}},Nm=new jd(ar,fn),bs={};bs.ProcedureSerializer=jd,bs.loadParameter=wa,bs.loadProcedure=Na,bs.observableProcedureSerializer=Nm,bs.saveParameter=ba,bs.saveProcedure=Da;var wm={blocks:Zn,exceptions:rn,priorities:yo,procedures:bs,registry:yl,variables:Kd,workspaces:eh},_d=class extends dr{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter_=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(t){super.setFontConstants_(t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(t){super.setDynamicProperties_(t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const r=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=r&&!isNaN(r)?r:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter_&&K(this.selectedGlowFilter_),this.replacementGlowFilter_&&K(this.replacementGlowFilter_)}makeStartHat(){const t=this.START_HAT_HEIGHT,r=this.START_HAT_WIDTH,T=Je("c",[Lt(25,-t),Lt(71,-t),Lt(r,0)]);return{height:t,width:r,path:T}}makeHexagonal(){function t(T,$,A){var F=T/2;return F=F>r?r:F,A=A?-1:1,T=($?-1:1)*T/2,Ui(-A*F,T)+Ui(A*F,T)}const r=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(T){return T/=2,T>r?r:T},height(T){return T},connectionOffsetY(T){return T/2},connectionOffsetX(T){return-T},pathDown(T){return t(T,!1,!1)},pathUp(T){return t(T,!0,!1)},pathRightDown(T){return t(T,!1,!0)},pathRightUp(T){return t(T,!1,!0)}}}makeRounded(){function t($,A,F){const z=$>T?$-T:0;return $=($>T?T:$)/2,ve("a","0 0,1",$,Lt((A?-1:1)*$,(A?-1:1)*$))+St("v",(F?1:-1)*z)+ve("a","0 0,1",$,Lt((A?1:-1)*$,(A?-1:1)*$))}const r=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,T=2*r;return{type:this.SHAPES.ROUND,isDynamic:!0,width($){return $/=2,$>r?r:$},height($){return $},connectionOffsetY($){return $/2},connectionOffsetX($){return-$},pathDown($){return t($,!1,!1)},pathUp($){return t($,!0,!1)},pathRightDown($){return t($,!1,!0)},pathRightUp($){return t($,!1,!0)}}}makeSquared(){function t(T,$,A){return T-=2*r,ve("a","0 0,1",r,Lt(($?-1:1)*r,($?-1:1)*r))+St("v",(A?1:-1)*T)+ve("a","0 0,1",r,Lt(($?1:-1)*r,($?-1:1)*r))}const r=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(T){return r},height(T){return T},connectionOffsetY(T){return T/2},connectionOffsetX(T){return-T},pathDown(T){return t(T,!1,!1)},pathUp(T){return t(T,!0,!1)},pathRightDown(T){return t(T,!1,!0)},pathRightUp(T){return t(T,!1,!0)}}}shapeFor(t){let r=t.getCheck();switch(!r&&t.targetConnection&&(r=t.targetConnection.getCheck()),t.type){case yt.INPUT_VALUE:case yt.OUTPUT_VALUE:if(t=t.getSourceBlock().getOutputShape(),t!==null)switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return r&&r.indexOf("Boolean")!==-1?this.HEXAGONAL:r&&r.indexOf("Number")!==-1?this.ROUNDED:(r&&r.indexOf("String"),this.ROUNDED);case yt.PREVIOUS_STATEMENT:case yt.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function t(xt){return Je("c",[Lt(xt*A/2,0),Lt(xt*A*3/4,z/2),Lt(xt*A,z)])+$n([Lt(xt*A,F)])+Je("c",[Lt(xt*A/4,z/2),Lt(xt*A/2,z),Lt(xt*A,z)])+St("h",xt*$)+Je("c",[Lt(xt*A/2,0),Lt(xt*A*3/4,-(z/2)),Lt(xt*A,-z)])+$n([Lt(xt*A,-F)])+Je("c",[Lt(xt*A/4,-(z/2)),Lt(xt*A/2,-z),Lt(xt*A,-z)])}const r=this.NOTCH_WIDTH,T=this.NOTCH_HEIGHT,$=r/3,A=$/3,F=T/2,z=F/2,q=t(1),ct=t(-1);return{type:this.SHAPES.NOTCH,width:r,height:T,pathLeft:q,pathRight:ct}}makeInsideCorners(){const t=this.CORNER_RADIUS,r=ve("a","0 0,0",t,Lt(-t,t)),T=ve("a","0 0,1",t,Lt(-t,t)),$=ve("a","0 0,0",t,Lt(t,t)),A=ve("a","0 0,1",t,Lt(t,t));return{width:t,height:t,pathTop:r,pathBottom:$,rightWidth:t,rightHeight:t,pathTopRight:T,pathBottomRight:A}}generateSecondaryColour_(t){return Gs("#000",t,.15)||t}generateTertiaryColour_(t){return Gs("#000",t,.25)||t}createDom(t,r,T){super.createDom(t,r,T),t=N(nt.DEFS,{},t),r=N(nt.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),N(nt.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},r),T=N(nt.FECOMPONENTTRANSFER,{result:"outBlur"},r),N(nt.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},T),N(nt.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},r),N(nt.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},r),this.selectedGlowFilterId=r.id,this.selectedGlowFilter_=r,t=N(nt.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),N(nt.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),r=N(nt.FECOMPONENTTRANSFER,{result:"outBlur"},t),N(nt.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),N(nt.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),N(nt.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),N(nt.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t}getCSS_(t){return[`${t} .blocklyText,`,`${t} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${t} .blocklyText {`,"fill: #fff;","}",`${t} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${t} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${t} .blocklyNonEditableText>text,`,`${t} .blocklyEditableText>text,`,`${t} .blocklyNonEditableText>g>text,`,`${t} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${t} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${t} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${t} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${t} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${t} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${t} .blocklyDropdownText {`,"fill: #fff !important;","}",`${t}.blocklyWidgetDiv .goog-menuitem,`,`${t}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${t}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${t} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${t} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${t} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Jd=class extends fr{constructor(t,r){super(t,r)}draw(){const t=this.block_.pathObject;if(t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&t.flipRTL(),Wr()){let r,T;(r=this.block_)==null||(T=r.renderingDebugger)==null||T.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(t){if(!(0>=t.height))if(et.isSpacer(t)&&(t.precedesStatement||t.followsStatement)){var r=this.constants_.INSIDE_CORNERS.rightHeight;r=t.height-(t.precedesStatement?r:0),this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<r?St("V",t.yPos+r):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=St("V",t.yPos+t.height)}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=ae(t.xPos,this.info_.startY),this.outlinePath_+=St("h",t.width)}drawFlatBottom_(){const t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=St("V",t.baseline),this.outlinePath_+=St("h",-t.width)}drawInlineInput_(t){this.positionInlineInputConnection_(t);const r=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var T=t.width-2*t.connectionWidth;t=be(t.xPos+t.connectionWidth,t.centerline-t.height/2)+St("h",T)+t.shape.pathRightDown(t.height)+St("h",-T)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(r,t)}}drawStatementInput_(t){var r=t.getLastInput();const T=r.xPos+r.notchOffset+r.shape.width,$=r.shape.pathRight+St("h",-(r.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,A=t.height-2*this.constants_.INSIDE_CORNERS.height;r=this.constants_.INSIDE_CORNERS.pathBottom+St("h",r.notchOffset-this.constants_.INSIDE_CORNERS.width)+(r.connectedBottomNextConnection?"":r.shape.pathLeft),this.outlinePath_+=St("H",T)+$+St("v",A)+r+St("H",t.xPos+t.width),this.positionStatementInputConnection_(t)}};c.FieldImage$$module$build$src$core$field_image=class extends Wt{constructor(t,r,T,$,A,F,z){if(super(Wt.SKIP_SETUP),this.imageElement_=this.clickHandler_=null,this.flipRtl_=this.isDirty_=this.EDITABLE=!1,this.altText_="",T=Number(ce(T)),r=Number(ce(r)),isNaN(T)||isNaN(r))throw Error("Height and width values of an image field must cast to numbers.");if(0>=T||0>=r)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Ie(r,T+c.FieldImage$$module$build$src$core$field_image.Y_PADDING),this.imageHeight_=T,typeof A=="function"&&(this.clickHandler_=A),t!==Wt.SKIP_SETUP&&(z?this.configure_(z):(this.flipRtl_=!!F,this.altText_=ce($)||""),this.setValue(ce(t)))}configure_(t){super.configure_(t),t.flipRtl&&(this.flipRtl_=t.flipRtl),t.alt&&(this.altText_=ce(t.alt))}initView(){this.imageElement_=N(nt.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(Ye,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")}updateSize_(){}doClassValidation_(t){return typeof t!="string"?null:t}doValueUpdate_(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(Ye,"xlink:href",String(this.value_))}getFlipRtl(){return this.flipRtl_}setAlt(t){t!==this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))}showEditor_(){this.clickHandler_&&this.clickHandler_(this)}setOnClickHandler(t){this.clickHandler_=t}getText_(){return this.altText_}static fromJson(t){if(!t.src||!t.width||!t.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(t.src,t.width,t.height,void 0,void 0,void 0,t)}},c.FieldImage$$module$build$src$core$field_image.Y_PADDING=1,oi("field_image",c.FieldImage$$module$build$src$core$field_image),c.FieldImage$$module$build$src$core$field_image.prototype.DEFAULT_VALUE="";var vr=class extends Wt{constructor(t,r,T){super(Wt.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",t!==Wt.SKIP_SETUP&&(T&&this.configure_(T),this.setValue(t),r&&this.setValidator(r))}configure_(t){super.configure_(t),t.spellcheck!==void 0&&(this.spellcheck_=t.spellcheck)}initView(){const t=this.getSourceBlock();if(!t)throw new me;if(this.getConstants().FULL_BLOCK_FIELDS){let r=0,T=0;for(let $=0,A;A=t.inputList[$];$++){for(let F=0;A.fieldRow[F];F++)r++;A.connection&&T++}this.fullBlockClickTarget_=1>=r&&t.outputConnection&&!T}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()}doClassValidation_(t){return t==null?null:String(t)}doValueInvalid_(t){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&Se()&&It(new(Ot(Re))(this.sourceBlock_,"field",this.name||null,t,this.value_)))}doValueUpdate_(t){this.isTextValid_=this.isDirty_=!0,this.value_=t}applyColour(){if(this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS){var t=this.sourceBlock_;this.borderRect_?this.borderRect_.setAttribute("stroke",t.style.colourTertiary):t.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)}}render_(){if(super.render_(),this.isBeingEdited_){this.resizeEditor_();const t=this.htmlInput_;this.isTextValid_?(V(t,"blocklyInvalidInput"),he(t,re.INVALID,!1)):(G(t,"blocklyInvalidInput"),he(t,re.INVALID,!0))}}setSpellcheck(t){t!==this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(t,r){this.workspace_=this.sourceBlock_.workspace,t=r||!1,!t&&this.workspace_.options.modalInputs&&(Va||Jr||Vs)?this.showPromptEditor_():this.showInlineEditor_(t)}showPromptEditor_(){qo(bt.CHANGE_VALUE_TITLE,this.getText(),t=>{t!==null&&this.setValue(this.getValueFromEditorText_(t))})}showInlineEditor_(t){const r=this.getSourceBlock();if(!r)throw new me;pa(this,r.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var t=this.getSourceBlock();if(!t)throw new me;Pt(!0);const r=ks();var T=this.getClickTarget_();if(!T)throw Error("A click target has not been set.");G(T,"editing"),T=document.createElement("input"),T.className="blocklyHtmlInput",T.setAttribute("spellcheck",this.spellcheck_);const $=this.workspace_.getScale();var A=this.getConstants().FIELD_TEXT_FONTSIZE*$+"pt";return r.style.fontSize=A,T.style.fontSize=A,A=vr.BORDERRADIUS*$+"px",this.fullBlockClickTarget_&&(A=this.getScaledBBox(),A=(A.bottom-A.top)/2+"px",t=t.getParent()?t.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,T.style.border=1*$+"px solid "+t,r.style.borderRadius=A,r.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(r.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*$+"px")),T.style.borderRadius=A,r.appendChild(T),T.value=T.defaultValue=this.getEditorText_(this.value_),T.setAttribute("data-untyped-default-value",this.value_),this.resizeEditor_(),this.bindInputEvents_(T),T}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),Pt(!1),this.unbindInputEvents_();var t=ks().style;if(t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,t=this.getClickTarget_(),!t)throw Error("A click target has not been set.");V(t,"editing")}onFinishEditing_(t){}bindInputEvents_(t){this.onKeyDownWrapper_=u(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=u(t,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(p(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(p(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(t){t.keyCode===Rt.ENTER?(Oi(),Ii()):t.keyCode===Rt.ESC?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value")),Oi(),Ii()):t.keyCode===Rt.TAB&&(Oi(),Ii(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())}onHtmlInputChange_(t){this.setValue(this.getValueFromEditorText_(this.htmlInput_.value))}setEditorValue_(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)}resizeEditor_(){var t=this.getSourceBlock();if(!t)throw new me;const r=ks(),T=this.getScaledBBox();r.style.width=T.right-T.left+"px",r.style.height=T.bottom-T.top+"px",t=new Et(t.RTL?T.right-r.offsetWidth:T.left,T.top),r.style.left=t.x+"px",r.style.top=t.y+"px"}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(t){return String(t)}getValueFromEditorText_(t){return t}};vr.BORDERRADIUS=4,c.FieldTextInput$$module$build$src$core$field_textinput=class extends vr{constructor(t,r,T){super(t,r,T)}static fromJson(t){return new this(ce(t.text),void 0,t)}},oi("field_input",c.FieldTextInput$$module$build$src$core$field_textinput),c.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="";var Zd=class extends Wl{constructor(t){super(t)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(t){return!!t.outputConnection}hasRightSquareCorner(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection}},Qd=class extends hr{constructor(t,r){if(super(t,r),this.connectedBottomNextConnection=!1,this.connectedBlock){for(t=this.connectedBlock;r=t.getNextBlock();)t=r;t.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},qd=class extends Bi{constructor(t){super(t),this.width=this.height=0,this.type|=et.getType("RIGHT_CONNECTION")}},tf=class extends jl{constructor(t){super(t)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(t){const r=(t.hat?t.hat==="cap":this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection;return!!t.outputConnection||r}hasRightSquareCorner(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection}},ef=class extends pn{constructor(t,r){super(t,r),this.isInline=!0,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.topRow=new tf(this.constants_),this.bottomRow=new Zd(this.constants_),this.isMultiRow=!r.getInputsInline()||r.isCollapsed(),this.hasStatementInput=0<r.statementInputCount,this.rightSide=this.outputConnection?new qd(this.constants_):null,this.rightAlignedDummyInputs_=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(t,r){return r?t.type===kt.STATEMENT||r.type===kt.STATEMENT?!0:t.type===kt.VALUE||t.type===kt.DUMMY?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(t)}getInRowSpacing_(t,r){return t&&r||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&r&&et.isStatementInput(r)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&et.isLeftRoundedCorner(t)&&r&&(et.isPreviousConnection(r)||et.isNextConnection(r))?r.notchOffset-this.constants_.CORNER_RADIUS:t&&et.isLeftSquareCorner(t)&&r&&et.isHat(r)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(t,r){if(et.isTopRow(t)&&et.isBottomRow(r))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const T=et.isInputRow(t)&&t.hasStatement,$=et.isInputRow(r)&&r.hasStatement;return $||T?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),$&&T?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):et.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):et.isBottomRow(r)?this.outputConnection?!r.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(t,r){const T=this.width-this.startX;return et.isInputRow(t)&&t.hasStatement||et.isInputRow(r)&&r.hasStatement?Math.max(T,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):T}getElemCenterline_(t,r){if(t.hasStatement&&!et.isSpacer(r)&&!et.isStatementInput(r))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(et.isInlineInput(r)&&r instanceof Ji){const T=r.connectedBlock;if(T&&T.outputConnection&&T.nextConnection)return t.yPos+T.height/2}return super.getElemCenterline_(t,r)}addInput_(t,r){if(t.type===kt.DUMMY&&r.hasDummyInput&&r.align===c.Align$$module$build$src$core$input.LEFT&&t.align===c.Align$$module$build$src$core$input.RIGHT)this.rightAlignedDummyInputs_.set(r,t);else if(t.type===kt.STATEMENT){r.elements.push(new Qd(this.constants_,t)),r.hasStatement=!0,r.align===null&&(r.align=t.align);return}super.addInput_(t,r)}addAlignmentPadding_(t,r){if(this.rightAlignedDummyInputs_.get(t)){let T;for(let $=0;$<t.elements.length;$++){const A=t.elements[$];if(et.isSpacer(A)&&(T=A),et.isField(A)&&A instanceof Ds&&A.parentInput===this.rightAlignedDummyInputs_.get(t))break}if(T){T.width+=r,t.width+=r;return}}super.addAlignmentPadding_(t,r)}adjustXPosition_(){const t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let r=t;for(let A=2;A<this.rows.length-1;A+=2){var T=this.rows[A-1];const F=this.rows[A];var $=this.rows[A+1];if(T=A===2?!!this.topRow.hasPreviousConnection:!!T.followsStatement,$=A+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!$.precedesStatement,et.isInputRow(F)&&F.hasStatement){F.measure();let z,q;r=F.width-((q=(z=F.getLastInput())==null?void 0:z.width)!=null?q:0)+t}else if(T&&(A===2||$)&&et.isInputRow(F)&&!F.hasStatement){$=F.xPos,T=null;for(let z=0;z<F.elements.length;z++){const q=F.elements[z];et.isSpacer(q)&&(T=q),T&&(et.isField(q)||et.isInput(q))&&$<r&&!(et.isField(q)&&q instanceof Ds&&(q.field instanceof c.FieldLabel$$module$build$src$core$field_label||q.field instanceof c.FieldImage$$module$build$src$core$field_image))&&(T.width+=r-$),$+=q.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var t=this.outputConnection.shape;if("isDynamic"in t&&t.isDynamic){for(var r=0,T=0;T<this.rows.length;T++){const $=this.rows[T];$.yPos=r,r+=$.height}this.height=r,T=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,r=t.height(T),T=t.width(T),this.outputConnection.height=r,this.outputConnection.width=T,this.outputConnection.startX=T,this.outputConnection.connectionOffsetY=t.connectionOffsetY(r),this.outputConnection.connectionOffsetX=t.connectionOffsetX(T),t=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(t=T,this.rightSide.height=r,this.rightSide.width=t,this.rightSide.centerline=r/2,this.rightSide.xPos=this.width+t),this.startX=T,this.width+=T+t,this.widthWithChildren+=T+t}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var t=0,r=0;r<this.rows.length;r++){var T=this.rows[r];if(!et.isInputRow(T))continue;t=T.elements[T.elements.length-2];let $=this.getNegativeSpacing_(T.elements[1]),A=this.getNegativeSpacing_(t);t=$+A;const F=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-t<F&&(t=this.width-F,$=t/2,A=t/2),T.elements.unshift(new Qe(this.constants_,-$)),T.elements.push(new Qe(this.constants_,-A))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,r=0;r<this.rows.length;r++)T=this.rows[r],et.isTopOrBottomRow(T)&&(T.elements[1].width-=t),T.width-=t,T.widthWithConnectedBlocks-=t}}getNegativeSpacing_(t){if(!t||!this.outputConnection)return 0;const r=this.outputConnection.width;var T=this.outputConnection.shape.type;const $=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(T){case $.SHAPES.ROUND:return T=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,T=this.height/2>T?T:this.height/2,r-T*(1-Math.sin(Math.acos((T-this.constants_.SMALL_PADDING)/T)));default:return 0}if(et.isInlineInput(t)&&t instanceof Ji){const A=t.connectedBlock;return t=A?A.pathObject.outputShapeType:t.shape.type,t==null||A&&A.outputConnection&&(A.statementInputCount||A.nextConnection)||T===$.SHAPES.HEXAGONAL&&T!==t?0:r-this.constants_.SHAPE_IN_SHAPE_PADDING[T][t]}return et.isField(t)&&t instanceof Ds?T===$.SHAPES.ROUND&&t.field instanceof c.FieldTextInput$$module$build$src$core$field_textinput?r-2.75*$.GRID_UNIT:r-this.constants_.SHAPE_IN_SHAPE_PADDING[T][0]:et.isIcon(t)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let $=2;$<this.rows.length-1;$+=2){const A=this.rows[$-1],F=this.rows[$],z=this.rows[$+1];var t=$===2,r=$+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!z.precedesStatement;if(t?this.topRow.hasPreviousConnection:A.followsStatement){var T=F.elements[1];if(T=F.elements.length===3&&T instanceof Ds&&(T.field instanceof c.FieldLabel$$module$build$src$core$field_label||T.field instanceof c.FieldImage$$module$build$src$core$field_image),!t&&T)A.height-=this.constants_.SMALL_PADDING,z.height-=this.constants_.SMALL_PADDING,F.height-=this.constants_.MEDIUM_PADDING;else if(!t&&!r)A.height+=this.constants_.SMALL_PADDING;else if(r){for(t=!1,r=0;r<F.elements.length;r++)if(T=F.elements[r],T instanceof Ji&&et.isInlineInput(T)&&T.connectedBlock&&!T.connectedBlock.isShadow()&&40<=T.connectedBlock.getHeightWidth().height){t=!0;break}t&&(A.height-=this.constants_.SMALL_PADDING,z.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},sf=class extends Jl{constructor(t,r,T){super(t,r,T),this.markerCircle_=null}showWithInputOutput_(t){const r=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(r),this.showCurrent_()}showWithOutput_(t){this.showWithInputOutput_(t)}showWithInput_(t){this.showWithInputOutput_(t)}showWithBlock_(t){t=t.getLocation();const r=t.getHeightWidth();this.positionRect_(0,0,r.width,r.height),this.setParent_(t),this.showCurrent_()}positionCircle_(t,r){let T;(T=this.markerCircle_)==null||T.setAttribute("cx",t.toString());let $;($=this.markerCircle_)==null||$.setAttribute("cy",r.toString()),this.currentMarkerSvg=this.markerCircle_}hide(){super.hide(),this.markerCircle_&&(this.markerCircle_.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle_=N(nt.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const t=this.getBlinkProperties_();N(nt.ANIMATE,t,this.markerCircle_)}return this.markerSvg_}applyColour_(t){super.applyColour_(t);let r;(r=this.markerCircle_)==null||r.setAttribute("fill",this.colour_);let T;if((T=this.markerCircle_)==null||T.setAttribute("stroke",this.colour_),this.isCursor()){t=this.colour_+";transparent;transparent;";let $;($=this.markerCircle_)==null||$.firstElementChild.setAttribute("values",t)}}},nf=class extends Ao{constructor(t,r,T){super(t,r,T),this.svgPathSelected_=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=T}setPath(t){super.setPath(t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)}applyColour(t){super.applyColour(t);const r=t.getParent();t.isShadow()&&r&&this.svgPath.setAttribute("stroke",r.style.colourTertiary);for(const T of this.outlines.values())T.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const t of this.outlines.values())t.setAttribute("transform","scale(-1 1)")}updateSelected(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)}updateReplacementFade(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(t,r){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(r?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const t of this.outlines.keys())this.remainingOutlines.add(t)}endDrawing(){if(this.remainingOutlines.size)for(const t of this.remainingOutlines)this.removeOutlinePath_(t);this.remainingOutlines.clear()}setOutlinePath(t,r){t=this.getOutlinePath_(t),t.setAttribute("d",r),t.setAttribute("fill",this.style.colourTertiary)}getOutlinePath_(t){return this.outlines.has(t)||this.outlines.set(t,N(nt.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(t),this.outlines.get(t)}removeOutlinePath_(t){let r,T;(r=this.outlines.get(t))==null||(T=r.parentNode)==null||T.removeChild(this.outlines.get(t)),this.outlines.delete(t)}},rf=class extends pr{constructor(t){super(t)}makeConstants_(){return new _d}makeRenderInfo_(t){return new ef(this,t)}makeDrawer_(t,r){return new Jd(t,r)}makeMarkerDrawer(t,r){return new sf(t,this.getConstants(),r)}makePathObject(t,r){return new nf(t,r,this.getConstants())}getConstants(){return this.constants_}shouldHighlightConnection(t){return t.type!==yt.INPUT_VALUE&&t.type!==yt.OUTPUT_VALUE}getConnectionPreviewMethod(t,r,T){return r.type===yt.OUTPUT_VALUE?t.isConnected()?ti.PREVIEW_TYPE.REPLACEMENT_FADE:ti.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(t,r,T)}};An("zelos",rf);var Ri={};Ri.BottomRow=Zd,Ri.ConstantProvider=_d,Ri.Drawer=Jd,Ri.MarkerSvg=sf,Ri.PathObject=nf,Ri.RenderInfo=ef,Ri.Renderer=rf,Ri.RightConnectionShape=qd,Ri.StatementInput=Qd,Ri.TopRow=tf;var of=class extends pn{constructor(t,r){super(t,r)}getRenderer(){return this.renderer_}addElemSpacing_(){let t=!1;for(var r=0;r<this.rows.length;r++)if(this.rows[r].hasExternalInput){t=!0;break}for(r=0;r<this.rows.length;r++){const $=this.rows[r];var T=$.elements;if($.elements=[],$.startsWithElemSpacer()&&$.elements.push(new Qe(this.constants_,this.getInRowSpacing_(null,T[0]))),T.length){for(let A=0;A<T.length-1;A++){$.elements.push(T[A]);const F=this.getInRowSpacing_(T[A],T[A+1]);$.elements.push(new Qe(this.constants_,F))}$.elements.push(T[T.length-1]),$.endsWithElemSpacer()&&(T=this.getInRowSpacing_(T[T.length-1],null),t&&$.hasDummyInput&&(T+=this.constants_.TAB_WIDTH),$.elements.push(new Qe(this.constants_,T)))}}}getInRowSpacing_(t,r){if(!t)return r&&et.isField(r)&&r.isEditable?this.constants_.MEDIUM_PADDING:r&&et.isInlineInput(r)?this.constants_.MEDIUM_LARGE_PADDING:r&&et.isStatementInput(r)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!et.isInput(t)&&!r)return et.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:et.isIcon(t)?2*this.constants_.LARGE_PADDING+1:et.isHat(t)?this.constants_.NO_PADDING:et.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:et.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:et.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(et.isInput(t)&&!r){if(et.isExternalInput(t))return this.constants_.NO_PADDING;if(et.isInlineInput(t))return this.constants_.LARGE_PADDING;if(et.isStatementInput(t))return this.constants_.NO_PADDING}if(!et.isInput(t)&&r&&et.isInput(r)){if(et.isField(t)&&t.isEditable){if(et.isInlineInput(r)||et.isExternalInput(r))return this.constants_.SMALL_PADDING}else{if(et.isInlineInput(r)||et.isExternalInput(r))return this.constants_.MEDIUM_LARGE_PADDING;if(et.isStatementInput(r))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(et.isIcon(t)&&r&&!et.isInput(r))return this.constants_.LARGE_PADDING;if(et.isInlineInput(t)&&r&&et.isField(r))return r.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(et.isLeftSquareCorner(t)&&r){if(et.isHat(r))return this.constants_.NO_PADDING;if(et.isPreviousConnection(r)||et.isNextConnection(r))return r.notchOffset}return et.isLeftRoundedCorner(t)&&r?r.notchOffset-this.constants_.CORNER_RADIUS:et.isField(t)&&r&&et.isField(r)&&t.isEditable===r.isEditable||r&&et.isJaggedEdge(r)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(t,r){return et.isTopRow(t)&&et.isBottomRow(r)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:et.isTopRow(t)||et.isBottomRow(r)?this.constants_.NO_PADDING:t.hasExternalInput&&r.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&r.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&r.hasStatement||t.hasDummyInput||r.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(t,r){if(et.isSpacer(r))return t.yPos+r.height/2;if(et.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,et.isNextConnection(r)?t+r.height/2:t-r.height/2;if(et.isTopRow(t))return et.isHat(r)?t.capline-r.height/2:t.capline+r.height/2;let T=t.yPos;return T=et.isField(r)&&t.hasStatement?T+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+r.height/2):T+t.height/2}finalize_(){let t=0,r=0;for(var T=0;T<this.rows.length;T++){const A=this.rows[T];A.yPos=r,A.xPos=this.startX,r+=A.height,t=Math.max(t,A.widthWithConnectedBlocks);var $=r-this.topRow.ascenderHeight;A===this.bottomRow&&$<this.constants_.MIN_BLOCK_HEIGHT&&($=this.constants_.MIN_BLOCK_HEIGHT-$,this.bottomRow.height+=$,r+=$),this.recordElemPositions_(A)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(T=this.block_.nextConnection.targetBlock())&&(t=Math.max(t,T.getHeightWidth().width)),this.bottomRow.baseline=r-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=r,this.startY=this.topRow.capline}},af=class extends pr{constructor(t){super(t)}makeRenderInfo_(t){return new of(this,t)}};An("thrasos",af);var ih={};ih.RenderInfo=of,ih.Renderer=af;var lf=class extends dr{constructor(){super()}},hf=class extends fr{constructor(t,r){super(t,r)}},uf=class extends pn{constructor(t,r){super(t,r)}getRenderer(){return this.renderer_}},cf=class extends pr{constructor(t){super(t)}makeConstants_(){return new lf}makeRenderInfo_(t){return new uf(this,t)}makeDrawer_(t,r){return new hf(t,r)}};An("minimalist",cf);var gr={};gr.ConstantProvider=lf,gr.Drawer=hf,gr.RenderInfo=uf,gr.Renderer=cf;var df=class extends dr{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(t){return super.getCSS_(t).concat([`${t} .blocklyInsertionMarker>.blocklyPathLight,`,`${t} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},ff=class{constructor(t){this.inlineSteps_=this.steps_="",this.info_=t,this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(t){this.steps_+=ae(t.xPos,this.info_.startY);for(let r=0,T;T=t.elements[r];r++)et.isLeftSquareCorner(T)?this.steps_+=this.highlightConstants_.START_POINT:et.isLeftRoundedCorner(T)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):et.isPreviousConnection(T)?this.steps_+=this.notchPaths_.pathLeft:et.isHat(T)?this.steps_+=this.startPaths_.path(this.RTL_):et.isSpacer(T)&&T.width!==0&&(this.steps_+=St("H",T.xPos+T.width-this.highlightOffset_));this.steps_+=St("H",t.xPos+t.width-this.highlightOffset_)}drawJaggedEdge_(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+St("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))}drawValueInput(t){const r=t.getLastInput();if(this.RTL_){const T=t.height-r.connectionHeight;this.steps_+=be(r.xPos+r.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+St("v",T)}else this.steps_+=be(r.xPos+r.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(t){const r=t.getLastInput();if(r)if(this.RTL_){const T=t.height-2*this.insideCornerPaths_.height;this.steps_+=be(r.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+St("v",T)+this.insideCornerPaths_.pathBottom(this.RTL_)+Ui(t.width-r.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=be(r.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Ui(t.width-r.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(t){const r=t.xPos+t.width-this.highlightOffset_;t instanceof Kl&&t.followsStatement&&(this.steps_+=St("H",r)),this.RTL_&&(this.steps_+=St("H",r),t.height>this.highlightOffset_&&(this.steps_+=St("V",t.yPos+t.height-this.highlightOffset_)))}drawBottomRow(t){if(this.RTL_)this.steps_+=St("V",t.baseline-this.highlightOffset_);else{const r=this.info_.bottomRow.elements[0];et.isLeftSquareCorner(r)?this.steps_+=be(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):et.isLeftRoundedCorner(r)&&(this.steps_+=be(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=be(this.info_.startX,t):(this.steps_+=be(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=St("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(t=this.info_.topRow,et.isLeftRoundedCorner(t.elements[0])?this.steps_+=St("V",this.outsideCornerPaths_.height):this.steps_+=St("V",t.capline+this.highlightOffset_))}drawInlineInput(t){const r=this.highlightOffset_,T=t.xPos+t.connectionWidth;var $=t.centerline-t.height/2;const A=t.width-t.connectionWidth,F=$+r;this.RTL_?($=t.connectionOffsetY-r,t=t.height-(t.connectionOffsetY+t.connectionHeight)+r,this.inlineSteps_+=be(T-r,F)+St("v",$)+this.puzzleTabPaths_.pathDown(this.RTL_)+St("v",t)+St("h",A)):this.inlineSteps_+=be(t.xPos+t.width+r,F)+St("v",t.height)+St("h",-A)+be(T,$+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},pf=class extends fr{constructor(t,r){super(t,r),this.highlighter_=new ff(r)}draw(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();const t=this.block_.pathObject;if(t.setPath(this.outlinePath_+`
`+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),Wr()){let r,T;(r=this.block_)==null||(T=r.renderingDebugger)==null||T.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(t){this.highlighter_.drawJaggedEdge_(t),super.drawJaggedEdge_(t)}drawValueInput_(t){this.highlighter_.drawValueInput(t),super.drawValueInput_(t)}drawStatementInput_(t){this.highlighter_.drawStatementInput(t),super.drawStatementInput_(t)}drawRightSideRow_(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=St("H",t.xPos+t.width)+St("V",t.yPos+t.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(t){this.highlighter_.drawInlineInput(t),super.drawInlineInput_(t)}positionInlineInputConnection_(t){const r=t.centerline-t.height/2;if(t.connectionModel){let T=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(T*=-1),t.connectionModel.setOffsetInBlock(T,r+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(t){const r=t.getLastInput();if(r!=null&&r.connectionModel){let T=t.xPos+t.statementEdge+r.notchOffset;T=this.info_.RTL?-1*T:T+this.constants_.DARK_PATH_OFFSET,r.connectionModel.setOffsetInBlock(T,t.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(t){const r=t.getLastInput();if(r&&r.connectionModel){let T=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(T*=-1),r.connectionModel.setOffsetInBlock(T,t.yPos)}}positionNextConnection_(){const t=this.info_.bottomRow;if(t.connection){const r=t.connection,T=r.xPos;r.connectionModel.setOffsetInBlock((this.info_.RTL?-T:T)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}}},vf=class{constructor(t){this.OFFSET=.5,this.constantProvider=t,this.START_POINT=ae(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const t=this.constantProvider.CORNER_RADIUS,r=this.OFFSET,T=(1-Math.SQRT1_2)*(t+r)-r,$=ae(T,T)+ve("a","0 0,0",t,Lt(-T-r,t-T)),A=ve("a","0 0,0",t+r,Lt(t+r,t+r)),F=ae(T,-T)+ve("a","0 0,0",t+r,Lt(t-T,T+r));return{width:t+r,height:t,pathTop(z){return z?$:""},pathBottom(z){return z?A:F}}}makeOutsideCorner(){const t=this.constantProvider.CORNER_RADIUS,r=this.OFFSET,T=(1-Math.SQRT1_2)*(t-r)+r,$=ae(T,T)+ve("a","0 0,1",t-r,Lt(t-T,-T+r)),A=ae(r,t)+ve("a","0 0,1",t-r,Lt(t,-t+r)),F=-T,z=ae(T,F)+ve("a","0 0,1",t-r,Lt(-T+r,-F-t));return{height:t,topLeft(q){return q?$:A},bottomLeft(){return z}}}makePuzzleTab(){const t=this.constantProvider.TAB_WIDTH,r=this.constantProvider.TAB_HEIGHT,T=ae(-2,-r+3.4)+Ui(-.45*t,-2.1),$=St("v",2.5)+ae(.97*-t,2.5)+Je("q",[Lt(.05*-t,10),Lt(.3*t,9.5)])+ae(.67*t,-1.9)+St("v",2.5),A=St("v",-1.5)+ae(-.92*t,-.5)+Je("q",[Lt(-.19*t,-5.5),Lt(0,-11)])+ae(.92*t,1),F=ae(-5,r-.7)+Ui(.46*t,-2.1);return{width:t,height:r,pathUp(z){return z?T:A},pathDown(z){return z?$:F}}}makeNotch(){return{pathLeft:St("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Ui(5.1,2.6)+ae(-10.2,6.8)+Ui(5.1,2.6),height:12,width:10.2}}makeStartHat(){const t=this.constantProvider.START_HAT.height,r=ae(25,-8.7)+Je("c",[Lt(29.7,-6.2),Lt(57.2,-.5),Lt(75,8.7)]),T=Je("c",[Lt(17.8,-9.2),Lt(45.3,-14.9),Lt(75,-8.7)])+be(100.5,t+.5);return{path($){return $?r:T}}}},gf=class extends Yl{constructor(t,r){super(t,r),this.constants_=t,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},mf=class extends hr{constructor(t,r){super(t,r),this.constants_=t,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},Tf=class extends pn{constructor(t,r){super(t,r),this.renderer_=t}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===kt.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(t,r){this.isInline&&t.type===kt.VALUE?(r.elements.push(new gf(this.constants_,t)),r.hasInlineInput=!0):t.type===kt.STATEMENT?(r.elements.push(new mf(this.constants_,t)),r.hasStatement=!0):t.type===kt.VALUE?(r.elements.push(new Oo(this.constants_,t)),r.hasExternalInput=!0):t.type===kt.DUMMY&&(r.minHeight=Math.max(r.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),r.hasDummyInput=!0),this.isInline||r.align!==null||(r.align=t.align)}addElemSpacing_(){let t=!1;for(let T=0,$;$=this.rows[T];T++)$.hasExternalInput&&(t=!0);for(let T=0,$;$=this.rows[T];T++){var r=$.elements;if($.elements=[],$.startsWithElemSpacer()&&$.elements.push(new Qe(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(let A=0;A<r.length-1;A++){$.elements.push(r[A]);const F=this.getInRowSpacing_(r[A],r[A+1]);$.elements.push(new Qe(this.constants_,F))}$.elements.push(r[r.length-1]),$.endsWithElemSpacer()&&(r=this.getInRowSpacing_(r[r.length-1],null),t&&$.hasDummyInput&&(r+=this.constants_.TAB_WIDTH),$.elements.push(new Qe(this.constants_,r)))}}}getInRowSpacing_(t,r){if(!t)return r&&et.isField(r)&&r.isEditable?this.constants_.MEDIUM_PADDING:r&&et.isInlineInput(r)?this.constants_.MEDIUM_LARGE_PADDING:r&&et.isStatementInput(r)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!et.isInput(t)&&(!r||et.isStatementInput(r)))return et.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:et.isIcon(t)?2*this.constants_.LARGE_PADDING+1:et.isHat(t)?this.constants_.NO_PADDING:et.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:et.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:et.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(et.isInput(t)&&!r){if(et.isExternalInput(t))return this.constants_.NO_PADDING;if(et.isInlineInput(t))return this.constants_.LARGE_PADDING;if(et.isStatementInput(t))return this.constants_.NO_PADDING}if(!et.isInput(t)&&r&&et.isInput(r)){if(et.isField(t)&&t.isEditable){if(et.isInlineInput(r)||et.isExternalInput(r))return this.constants_.SMALL_PADDING}else{if(et.isInlineInput(r)||et.isExternalInput(r))return this.constants_.MEDIUM_LARGE_PADDING;if(et.isStatementInput(r))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(et.isIcon(t)&&r&&!et.isInput(r))return this.constants_.LARGE_PADDING;if(et.isInlineInput(t)&&r&&et.isField(r))return r.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(et.isLeftSquareCorner(t)&&r){if(et.isHat(r))return this.constants_.NO_PADDING;if(et.isPreviousConnection(r))return r.notchOffset;if(et.isNextConnection(r))return r.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(et.isLeftRoundedCorner(t)&&r){if(et.isPreviousConnection(r))return r.notchOffset-this.constants_.CORNER_RADIUS;if(et.isNextConnection(r))return r.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return et.isField(t)&&r&&et.isField(r)&&t.isEditable===r.isEditable||r&&et.isJaggedEdge(r)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(t,r){return et.isTopRow(t)&&et.isBottomRow(r)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:et.isTopRow(t)||et.isBottomRow(r)?this.constants_.NO_PADDING:t.hasExternalInput&&r.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&r.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&r.hasStatement||!t.hasStatement&&r.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(t,r){if(et.isSpacer(r))return t.yPos+r.height/2;if(et.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,et.isNextConnection(r)?t+r.height/2:t-r.height/2;if(et.isTopRow(t))return et.isHat(r)?t.capline-r.height/2:t.capline+r.height/2;let T=t.yPos;return et.isField(r)||et.isIcon(r)?(T+=r.height/2,(t.hasInlineInput||t.hasStatement)&&r.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(T+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):T=et.isInlineInput(r)?T+r.height/2:T+t.height/2,T}alignRowElements_(){if(this.isInline){var t=0,r=new WeakMap,T=null;for(let $=this.rows.length-1,A;A=this.rows[$];$--)r.set(A,t),et.isInputRow(A)&&(A.hasStatement&&this.alignStatementRow_(A),T&&T.hasStatement&&A.width<T.width?r.set(A,T.width):t=A.width,T=A);t=0;for(let $=0,A;A=this.rows[$];$++)A.hasStatement?t=this.getDesiredRowWidth_(A):et.isSpacer(A)?A.width=Math.max(t,r.get(A)):(T=A.width,t=Math.max(t,r.get(A))-T,0<t&&this.addAlignmentPadding_(A,t),t=A.width)}else super.alignRowElements_()}getDesiredRowWidth_(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(t)}finalize_(){let t=0,r=0;for(let $=0,A;A=this.rows[$];$++){A.yPos=r,A.xPos=this.startX,r+=A.height,t=Math.max(t,A.widthWithConnectedBlocks);var T=r-this.topRow.ascenderHeight;A===this.bottomRow&&T<this.constants_.MIN_BLOCK_HEIGHT&&(T=this.constants_.MIN_BLOCK_HEIGHT-T,this.bottomRow.height+=T,r+=T),this.recordElemPositions_(A)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(T=this.block_.nextConnection.targetBlock())&&(t=Math.max(t,T.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=r-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=r+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},Ef=class extends Ao{constructor(t,r,T){super(t,r,T),this.constants=T,this.colourDark="#000000",this.svgPathDark=N(nt.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=N(nt.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)}setHighlightPath(t){this.svgPathLight.setAttribute("d",t)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(t){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(t),this.svgPath.setAttribute("stroke","none")}setStyle(t){this.style=t,this.colourDark=Gs("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(t){if(t){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(t){super.updateDisabled_(t),t&&this.svgPath.setAttribute("stroke","none")}},xf=class extends pr{constructor(t){super(t),this.highlightConstants_=null}init(t,r){super.init(t,r),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()}refreshDom(t,r){super.refreshDom(t,r),this.getHighlightConstants().init()}makeConstants_(){return new df}makeRenderInfo_(t){return new Tf(this,t)}makeDrawer_(t,r){return new pf(t,r)}makePathObject(t,r){return new Ef(t,r,this.getConstants())}makeHighlightConstants_(){return new vf(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants_)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants_}};An("geras",xf);var Fi={};Fi.ConstantProvider=df,Fi.Drawer=pf,Fi.HighlightConstantProvider=vf,Fi.Highlighter=ff,Fi.InlineInput=gf,Fi.PathObject=Ef,Fi.RenderInfo=Tf,Fi.Renderer=xf,Fi.StatementInput=mf;var yf=class{constructor(t){this.container=t,this.previousSibling=null,this.createDom()}createDom(){this.SVG||(this.SVG=N(nt.SVG,{xmlns:Xs,"xmlns:html":pi,"xmlns:xlink":Ye,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"}),this.container.appendChild(this.SVG))}translateSurface(t,r){t=Math.round(t),r=Math.round(r),this.SVG.style.display="block",rt(this.SVG,"translate3d("+t+"px, "+r+"px, 0)")}getSurfaceTranslation(){return fi(this.SVG)}clearAndHide(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");const r=this.SVG.childNodes[0],T=this.SVG.childNodes[1];if(!r||!T||!r.classList.contains("blocklyBlockCanvas")&&T.classList.contains("blocklyBubbleCanvas"))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(this.previousSibling!==null?tt(r,this.previousSibling):t.insertBefore(r,t.firstChild),tt(T,r),this.SVG.style.display="none",this.SVG.childNodes.length)throw Error("Drag surface was not cleared.");rt(this.SVG,""),this.previousSibling=null}setContentsAndShow(t,r,T,$,A,F){if(this.SVG.childNodes.length)throw Error("Already dragging a block.");this.previousSibling=T,t.setAttribute("transform","translate(0, 0) scale("+F+")"),r.setAttribute("transform","translate(0, 0) scale("+F+")"),this.SVG.setAttribute("width",String($)),this.SVG.setAttribute("height",String(A)),this.SVG.appendChild(t),this.SVG.appendChild(r),this.SVG.style.display="block"}},Sf=class{constructor(t){this.container=t,this.scale=1,this.surfaceXY=new Et(0,0),this.childSurfaceXY=new Et(0,0),this.svg=N(nt.SVG,{xmlns:Xs,"xmlns:html":pi,"xmlns:xlink":Ye,version:"1.1",class:"blocklyBlockDragSurface"},this.container),this.dragGroup=N(nt.G,{},this.svg)}createDom(){R("BlockDragSurfaceSvg createDom","June 2022","June 2023")}setBlocksAndShow(t){if(this.dragGroup.childNodes.length)throw Error("Already dragging a block.");this.dragGroup.appendChild(t),this.svg.style.display="block",this.surfaceXY=new Et(0,0)}translateAndScaleGroup(t,r,T){this.scale=T,t=Math.round(t),r=Math.round(r),this.childSurfaceXY.x=t,this.childSurfaceXY.y=r,this.dragGroup.setAttribute("transform","translate("+t+","+r+") scale("+T+")")}translateSurfaceInternal_(){const t=Math.round(this.surfaceXY.x),r=Math.round(this.surfaceXY.y);this.svg.style.display="block",rt(this.svg,"translate3d("+t+"px, "+r+"px, 0)")}translateBy(t,r){this.surfaceXY=new Et(this.surfaceXY.x+t,this.surfaceXY.y+r),this.translateSurfaceInternal_()}translateSurface(t,r){this.surfaceXY=new Et(t*this.scale,r*this.scale),this.translateSurfaceInternal_()}getSurfaceTranslation(){const t=fi(this.svg);return new Et(t.x/this.scale,t.y/this.scale)}getGroup(){return this.dragGroup}getSvgRoot(){return this.svg}getCurrentBlock(){return this.dragGroup.firstChild}getWsTranslation(){return this.childSurfaceXY.clone()}clearAndHide(t){const r=this.getCurrentBlock();if(r&&(t?t.appendChild(r):this.dragGroup.removeChild(r)),this.svg.style.display="none",this.dragGroup.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY=new Et(0,0)}},Lo={};Lo.bumpIntoBounds=Xr,Lo.bumpIntoBoundsHandler=fc,Lo.bumpTopObjectsIntoBounds=Ba;var sh=class{constructor(t,r,T,$,A){this.workspace=t,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,r=r===void 0?!0:r,T=T===void 0?!0:T;const F=r&&T;r&&(this.hScroll=new ue(t,!0,F,$,A)),T&&(this.vScroll=new ue(t,!1,F,$,A)),F&&(this.corner_=N(nt.RECT,{height:ue.scrollbarThickness,width:ue.scrollbarThickness,class:"blocklyScrollbarBackground"}),tt(this.corner_,t.getBubbleCanvas()))}dispose(){K(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const t=this.workspace.getMetrics();if(t){var r=!1,T=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===t.viewWidth&&this.oldHostMetrics_.viewHeight===t.viewHeight&&this.oldHostMetrics_.absoluteTop===t.absoluteTop&&this.oldHostMetrics_.absoluteLeft===t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===t.scrollWidth&&this.oldHostMetrics_.viewLeft===t.viewLeft&&this.oldHostMetrics_.scrollLeft===t.scrollLeft||(r=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===t.scrollHeight&&this.oldHostMetrics_.viewTop===t.viewTop&&this.oldHostMetrics_.scrollTop===t.scrollTop||(T=!0)):T=r=!0,r||T){try{Te(),this.hScroll&&r&&this.hScroll.resize(t),this.vScroll&&T&&this.vScroll.resize(t)}finally{Ee()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft){let $;($=this.corner_)==null||$.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteTop!==t.absoluteTop){let $;($=this.corner_)==null||$.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=t}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(t,r){this.hScroll&&this.hScroll.setOrigin(t,r),this.vScroll&&this.vScroll.setOrigin(t,r)}set(t,r,T){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(r,!1),(T||T===void 0)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace.setMetrics(t))}setX(t){this.hScroll&&this.hScroll.set(t,!0)}setY(t){this.vScroll&&this.vScroll.set(t,!0)}setContainerVisible(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)}isVisible(){let t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t}resizeContent(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)}resizeView(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)}},Cf=!1;c.CodeGenerator$$module$build$src$core$generator=class{constructor(t){this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=O());var r=[];this.init(t),t=t.getTopBlocks(!0);for(let T=0,$;$=t[T];T++){let A=this.blockToCode($);Array.isArray(A)&&(A=A[0]),A&&($.outputConnection&&(A=this.scrubNakedValue(A),this.STATEMENT_PREFIX&&!$.suppressPrefixSuffix&&(A=this.injectId(this.STATEMENT_PREFIX,$)+A),this.STATEMENT_SUFFIX&&!$.suppressPrefixSuffix&&(A+=this.injectId(this.STATEMENT_SUFFIX,$))),r.push(A))}return r=r.join(`
`),r=this.finish(r),r=r.replace(/^\s+\n/,""),r=r.replace(/\n\s+$/,`
`),r=r.replace(/[ \t]+\n/g,`
`)}prefixLines(t,r){return r+t.replace(/(?!\n$)\n/g,`
`+r)}allNestedComments(t){const r=[];t=t.getDescendants(!0);for(let T=0;T<t.length;T++){const $=t[T].getCommentText();$&&r.push($)}return r.length&&r.push(""),r.join(`
`)}blockToCode(t,r){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return r?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return r?"":this.blockToCode(t.getChildren(!1)[0]);var T=this[t.type];if(typeof T!="function")throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(T=T.call(t,t),Array.isArray(T)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,T[0],r),T[1]]}if(typeof T=="string")return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(T=this.injectId(this.STATEMENT_PREFIX,t)+T),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(T+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,T,r);if(T===null)return"";throw SyntaxError("Invalid code generated: "+T)}valueToCode(t,r,T){if(isNaN(T))throw TypeError("Expecting valid order from block: "+t.type);var $=t.getInputTargetBlock(r);if(!$||(r=this.blockToCode($),r===""))return"";if(!Array.isArray(r))throw TypeError("Expecting tuple from value block: "+$.type);if(t=r[0],r=r[1],isNaN(r))throw TypeError("Expecting valid order from value block: "+$.type);if(!t)return"";$=!1;var A=Math.floor(T);const F=Math.floor(r);if(A<=F&&(A!==F||A!==0&&A!==99)){for($=!0,A=0;A<this.ORDER_OVERRIDES.length;A++)if(this.ORDER_OVERRIDES[A][0]===T&&this.ORDER_OVERRIDES[A][1]===r){$=!1;break}}return $&&(t="("+t+")"),t}statementToCode(t,r){if(t=t.getInputTargetBlock(r),r=this.blockToCode(t),typeof r!="string")throw TypeError("Expecting code from statement block: "+(t&&t.type));return r&&(r=this.prefixLines(r,this.INDENT)),r}addLoopTrap(t,r){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,r),this.INDENT)+t),this.STATEMENT_SUFFIX&&!r.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,r),this.INDENT)+t),this.STATEMENT_PREFIX&&!r.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,r),this.INDENT)),t}injectId(t,r){return r=r.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+r+"'")}addReservedWords(t){this.RESERVED_WORDS_+=t+","}provideFunction_(t,r){if(!this.definitions_[t]){const T=this.nameDB_.getDistinctName(t,c.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[t]=T,Array.isArray(r)&&(r=r.join(`
`)),r=r.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,T);let $;for(;$!==r;)$=r,r=r.replace(/^(( {2})*) {2}/gm,"$1\0");r=r.replace(/\0/g,this.INDENT),this.definitions_[t]=r}return this.functionNames_[t]}init(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(t,r,T){return r}finish(t){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),t}scrubNakedValue(t){return t}},Object.defineProperties(c.CodeGenerator$$module$build$src$core$generator.prototype,{variableDB_:{get(){return R("variableDB_","version 9","version 10","nameDB_"),this.nameDB_},set(t){R("variableDB_","version 9","version 10","nameDB_"),this.nameDB_=t}}});var vn=class{constructor(t,r,T,$){this.workspace=t,this.targetWorkspace=r,this.isLabel_=$,this.onMouseUpWrapper_=null,this.height=this.width=0,this.svgText_=this.svgGroup_=null,this.text_=T.text,this.position_=new Et(0,0),this.callbackKey_=T.callbackKey||T.callbackkey,this.cssClass_=T["web-class"]||null,this.info=T}createDom(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=N(nt.G,{class:t},this.workspace.getCanvas());let r;this.isLabel_||(r=N(nt.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),t=N(nt.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);const T=N(nt.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);var $=ce(this.text_);this.workspace.RTL&&($+="\u200F"),T.textContent=$,this.isLabel_&&(this.svgText_=T,this.workspace.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));const A=se(T,"fontSize"),F=se(T,"fontWeight"),z=se(T,"fontFamily");if(this.width=Tt(T,A,F,z),$=Nt($,A,F,z),this.height=$.height,!this.isLabel_){this.width+=2*vn.TEXT_MARGIN_X,this.height+=2*vn.TEXT_MARGIN_Y;let q;(q=r)==null||q.setAttribute("width",this.width.toString());let ct;(ct=r)==null||ct.setAttribute("height",this.height.toString())}return t.setAttribute("width",this.width.toString()),t.setAttribute("height",this.height.toString()),T.setAttribute("x",(this.width/2).toString()),T.setAttribute("y",(this.height/2-$.height/2+$.baseline).toString()),this.updateTransform_(),this.onMouseUpWrapper_=u(this.svgGroup_,"pointerup",this,this.onMouseUp_),this.svgGroup_}show(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")}updateTransform_(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")}moveTo(t,r){this.position_.x=t,this.position_.y=r,this.updateTransform_()}isLabel(){return this.isLabel_}getPosition(){return this.position_}getButtonText(){return this.text_}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper_&&p(this.onMouseUpWrapper_),this.svgGroup_&&K(this.svgGroup_),this.svgText_&&this.workspace.getThemeManager().unsubscribe(this.svgText_)}onMouseUp_(t){(t=this.targetWorkspace.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace.getButtonCallback(this.callbackKey_)?this.isLabel_||(t=this.targetWorkspace.getButtonCallback(this.callbackKey_))&&t(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)}};vn.TEXT_MARGIN_X=5,vn.TEXT_MARGIN_Y=2,di(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var nh=class{constructor(t){this.workspace_=t}getDimensionsPx_(t){let r=0,T=0;return t&&(r=t.getWidth(),T=t.getHeight()),new Ie(r,T)}getFlyoutMetrics(t){return t=this.getDimensionsPx_(this.workspace_.getFlyout(t)),{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let t=0;const r=this.getToolboxMetrics(),T=this.getFlyoutMetrics(!0),$=!!this.workspace_.getToolbox(),A=!!this.workspace_.getFlyout(!0);var F=$?r.position:T.position,z=F===Ft.LEFT;return F=F===Ft.TOP,$&&z?t=r.width:A&&z&&(t=T.width),z=0,$&&F?z=r.height:A&&F&&(z=T.height),{top:z,left:t}}getViewMetrics(t){t=t?this.workspace_.scale:1;const r=this.getSvgMetrics(),T=this.getToolboxMetrics(),$=this.getFlyoutMetrics(!0),A=this.workspace_.getToolbox()?T.position:$.position;return this.workspace_.getToolbox()?A===Ft.TOP||A===Ft.BOTTOM?r.height-=T.height:(A===Ft.LEFT||A===Ft.RIGHT)&&(r.width-=T.width):this.workspace_.getFlyout(!0)&&(A===Ft.TOP||A===Ft.BOTTOM?r.height-=$.height:(A===Ft.LEFT||A===Ft.RIGHT)&&(r.width-=$.width)),{height:r.height/t,width:r.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}}getContentMetrics(t){t=t?1:this.workspace_.scale;const r=this.workspace_.getBlocksBoundingBox();return{height:(r.bottom-r.top)*t,width:(r.right-r.left)*t,top:r.top*t,left:r.left*t}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(t){if(!this.hasFixedEdges())return{};const r=this.workspace_.isMovableHorizontally(),T=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);const $={};return T||($.top=t.top,$.bottom=t.top+t.height),r||($.left=t.left,$.right=t.left+t.width),$}getPaddedContent_(t,r){const T=r.top+r.height,$=r.left+r.width,A=t.width;t=t.height;const F=A/2,z=t/2;return{top:Math.min(r.top-z,T-t),bottom:Math.max(T+z,r.top+t),left:Math.min(r.left-F,$-A),right:Math.max($+F,r.left+A)}}getScrollMetrics(t,r,T){t=t?this.workspace_.scale:1,r=r||this.getViewMetrics(!1);var $=T||this.getContentMetrics();T=this.getComputedFixedEdges_(r),r=this.getPaddedContent_(r,$),$=T.top!==void 0?T.top:r.top;const A=T.left!==void 0?T.left:r.left;return{top:$/t,left:A/t,width:((T.right!==void 0?T.right:r.right)-A)/t,height:((T.bottom!==void 0?T.bottom:r.bottom)-$)/t}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const t=this.getToolboxMetrics(),r=this.getFlyoutMetrics(!0),T=this.getSvgMetrics(),$=this.getAbsoluteMetrics(),A=this.getViewMetrics(),F=this.getContentMetrics(),z=this.getScrollMetrics(!1,A,F);return{contentHeight:F.height,contentWidth:F.width,contentTop:F.top,contentLeft:F.left,scrollHeight:z.height,scrollWidth:z.width,scrollTop:z.top,scrollLeft:z.left,viewHeight:A.height,viewWidth:A.width,viewTop:A.top,viewLeft:A.left,absoluteTop:$.top,absoluteLeft:$.left,svgHeight:T.height,svgWidth:T.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:r.width,flyoutHeight:r.height}}};Ut(gt.METRICS_MANAGER,Wi,nh);var Rf=class extends nh{constructor(t,r){super(t),this.flyout_=r}getBoundingBox_(){let t;try{t=this.workspace_.getCanvas().getBBox()}catch{t={height:0,y:0,width:0,x:0}}return t}getContentMetrics(t){const r=this.getBoundingBox_();return t=t?1:this.workspace_.scale,{height:r.height*t,width:r.width*t,top:r.y*t,left:r.x*t}}getScrollMetrics(t,r,T){return r=T||this.getContentMetrics(),T=this.flyout_.MARGIN*this.workspace_.scale,t=t?this.workspace_.scale:1,{height:(r.height+2*T)/t,width:(r.width+r.left+T)/t,top:0,left:0}}},gn;(function(t){t.BLOCK="block",t.BUTTON="button"})(gn||(gn={}));var Mo=class extends Co{constructor(t){super(),this.horizontalLayout=!1,this.eventWrappers_=[],this.filterWrapper_=this.reflowWrapper_=null,this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.recycledBlocks_=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible_=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Ci(t),this.workspace_.setMetricsManager(new Rf(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=ui(),this.RTL=!!t.RTL,this.toolboxPosition_=t.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(t){return this.svgGroup_=N(t,{class:"blocklyFlyout",style:"display: none"}),this.svgBackground_=N(nt.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new sh(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,u(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,u(this.svgBackground_,"pointerdown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[Oe.Capability.DELETE_AREA,Oe.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),p(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&(K(this.svgGroup_),this.svgGroup_=null),this.svgBackground_=null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}isVisible(){return this.isVisible_}setVisible(t){const r=t!==this.isVisible();this.isVisible_=t,r&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())}setContainerVisible(t){const r=t!==this.containerVisible_;this.containerVisible_=t,r&&this.updateDisplay_()}updateDisplay_(){let t;t=this.containerVisible_?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=t?"block":"none");let r;(r=this.workspace_.scrollbar)==null||r.setContainerVisible(t)}positionAt_(t,r,T,$){let A;(A=this.svgGroup_)==null||A.setAttribute("width",t.toString());let F;(F=this.svgGroup_)==null||F.setAttribute("height",r.toString()),this.workspace_.setCachedParentSvgSize(t,r);let z;if(((z=this.svgGroup_)==null?void 0:z.tagName)==="svg")rt(this.svgGroup_,"translate("+T+"px,"+$+"px)");else{let q;(q=this.svgGroup_)==null||q.setAttribute("transform","translate("+T+","+$+")")}(t=this.workspace_.scrollbar)&&(t.setOrigin(T,$),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(let t=0,r;r=this.listeners_[t];t++)p(r);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}}show(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),typeof t=="string"&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=Br(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(u(this.svgBackground_,"pointerover",this,function(){const r=this.workspace_.getTopBlocks(!1);for(let T=0,$;$=r[T];T++)$.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_),this.emptyRecycledBlocks_()}createFlyoutInfo_(t){const r=[],T=[];this.permanentlyDisabled_.length=0;const $=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(let F=0,z;z=t[F];F++){if("custom"in z){var A=this.getDynamicCategoryContents_(z.custom);A=Br(A),t.splice.apply(t,[F,1,...A]),z=t[F]}switch(z.kind.toUpperCase()){case"BLOCK":A=z;const q=this.createFlyoutBlock_(A);r.push({type:gn.BLOCK,block:q}),this.addBlockGap_(A,T,$);break;case"SEP":this.addSeparatorGap_(z,T,$);break;case"LABEL":A=this.createButton_(z,!0),r.push({type:gn.BUTTON,button:A}),T.push($);break;case"BUTTON":A=this.createButton_(z,!1),r.push({type:gn.BUTTON,button:A}),T.push($)}}return{contents:r,gaps:T}}getDynamicCategoryContents_(t){if(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t),typeof t!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return t(this.workspace_.targetWorkspace)}createButton_(t,r){return new vn(this.workspace_,this.targetWorkspace,t,r)}createFlyoutBlock_(t){let r;return t.blockxml?(t=typeof t.blockxml=="string"?Be(t.blockxml):t.blockxml,(r=this.getRecycledBlock_(t.getAttribute("type")))||(r=Fs(t,this.workspace_))):(r=this.getRecycledBlock_(t.type),r||(t.enabled===void 0&&(t.enabled=t.disabled!=="true"&&t.disabled!==!0),r=ms(t,this.workspace_))),r.isEnabled()||this.permanentlyDisabled_.push(r),r}getRecycledBlock_(t){let r=-1;for(let T=0;T<this.recycledBlocks_.length;T++)if(this.recycledBlocks_[T].type===t){r=T;break}return r===-1?void 0:this.recycledBlocks_.splice(r,1)[0]}addBlockGap_(t,r,T){let $;t.gap?$=parseInt(t.gap.toString()):t.blockxml&&(t=typeof t.blockxml=="string"?Be(t.blockxml):t.blockxml,$=parseInt(t.getAttribute("gap"))),r.push(!$||isNaN($)?T:$)}addSeparatorGap_(t,r,T){t=parseInt(t.gap.toString()),!isNaN(t)&&0<r.length?r[r.length-1]=t:r.push(T)}clearOldBlocks_(){var t=this.workspace_.getTopBlocks(!1);for(let T=0,$;$=t[T];T++)this.blockIsRecyclable_($)?this.recycleBlock_($):$.dispose(!1,!1);for(t=0;t<this.mats_.length;t++){const T=this.mats_[t];T&&(Dr(T),K(T))}this.mats_.length=0;for(let T=0,$;$=this.buttons_[T];T++)$.dispose();this.buttons_.length=0;let r;(r=this.workspace_.getPotentialVariableMap())==null||r.clear()}emptyRecycledBlocks_(){for(let t=0;t<this.recycledBlocks_.length;t++)this.recycledBlocks_[t].dispose();this.recycledBlocks_=[]}blockIsRecyclable_(t){return!1}recycleBlock_(t){const r=t.getRelativeToSurfaceXY();t.moveBy(-r.x,-r.y),this.recycledBlocks_.push(t)}addBlockListeners_(t,r,T){this.listeners_.push(u(t,"pointerdown",null,this.blockMouseDown_(r))),this.listeners_.push(u(T,"pointerdown",null,this.blockMouseDown_(r))),this.listeners_.push(f(t,"pointerenter",r,r.addSelect)),this.listeners_.push(f(t,"pointerleave",r,r.removeSelect)),this.listeners_.push(f(T,"pointerenter",r,r.addSelect)),this.listeners_.push(f(T,"pointerleave",r,r.removeSelect))}blockMouseDown_(t){return r=>{const T=this.targetWorkspace.getGesture(r);T&&(T.setStartBlock(t),T.handleFlyoutStart(r,this))}}onMouseDown_(t){const r=this.targetWorkspace.getGesture(t);r&&r.handleFlyoutStart(t,this)}isBlockCreatable(t){return t.isEnabled()}createBlock(t){let r=null;Te();var T=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{r=this.placeNewBlock_(t)}finally{Ee()}if(this.targetWorkspace.hideChaff(),t=na(this.targetWorkspace,T),Se()){for(Pt(!0),T=0;T<t.length;T++){const $=t[T];It(new(Ot(Ss))($))}It(new(Ot(Le))(r))}return this.autoClose?this.hide():this.filterForCapacity_(),r}initFlyoutButton_(t,r,T){const $=t.createDom();t.moveTo(r,T),t.show(),this.listeners_.push(u($,"pointerdown",this,this.onMouseDown_)),this.buttons_.push(t)}createRect_(t,r,T,$,A){return r=N(nt.RECT,{"fill-opacity":0,x:r,y:T,height:$.height,width:$.width}),r.tooltip=t,Pr(r),this.workspace_.getCanvas().insertBefore(r,t.getSvgRoot()),this.rectMap_.set(t,r),this.mats_[A]=r}moveRectToBlock_(t,r){const T=r.getHeightWidth();t.setAttribute("width",T.width.toString()),t.setAttribute("height",T.height.toString()),r=r.getRelativeToSurfaceXY(),t.setAttribute("y",r.y.toString()),t.setAttribute("x",(this.RTL?r.x-T.width:r.x).toString())}filterForCapacity_(){const t=this.workspace_.getTopBlocks(!1);for(let r=0,T;T=t[r];r++)if(this.permanentlyDisabled_.indexOf(T)===-1){const $=this.targetWorkspace.isCapacityAvailable(H(T));for(;T;)T.setEnabled($),T=T.getNextBlock()}}reflow(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock_(t){var r=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");const T=ki(t);return r.setResizesEnabled(!1),r=ms(T,r),this.positionNewBlock_(t,r),r}positionNewBlock_(t,r){const T=this.targetWorkspace;var $=T.getOriginOffsetInPixels(),A=this.workspace_.getOriginOffsetInPixels();t=t.getRelativeToSurfaceXY(),t.scale(this.workspace_.scale),A=Et.sum(A,t),$=Et.difference(A,$),$.scale(1/T.scale),r.moveTo(new Et($.x,$.y))}};Mo.FlyoutItemType=gn;var rh=class extends Mo{constructor(t){super(t)}setMetrics_(t){if(this.isVisible()){var r=this.workspace_.getMetricsManager(),T=r.getScrollMetrics(),$=r.getViewMetrics();r=r.getAbsoluteMetrics(),typeof t.y=="number"&&(this.workspace_.scrollY=-(T.top+(T.height-$.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+r.left,this.workspace_.scrollY+r.top)}}getX(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager();const r=t.getAbsoluteMetrics(),T=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Ft.LEFT?t.width:T.width-this.width_:this.toolboxPosition_===Ft.LEFT?0:T.width:this.toolboxPosition_===Ft.LEFT?0:T.width+r.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var r=this.getY();this.positionAt_(this.width_,this.height_,t,r)}}setBackgroundPath_(t,r){const T=this.toolboxPosition_===Ft.RIGHT;var $=t+this.CORNER_RADIUS;$=["M "+(T?$:0)+",0"],$.push("h",T?-t:t),$.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,T?0:1,T?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),$.push("v",Math.max(0,r)),$.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,T?0:1,T?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),$.push("h",T?t:-t),$.push("z"),this.svgBackground_.setAttribute("d",$.join(" "))}scrollToStart(){let t;(t=this.workspace_.scrollbar)==null||t.setY(0)}wheel_(t){var r=x(t);if(r.y){const T=this.workspace_.getMetricsManager(),$=T.getScrollMetrics();r=T.getViewMetrics().top-$.top+r.y;let A;(A=this.workspace_.scrollbar)==null||A.setY(r),Oi(),Ii()}t.preventDefault(),t.stopPropagation()}layout_(t,r){this.workspace_.scale=this.targetWorkspace.scale;var T=this.MARGIN;const $=this.RTL?T:T+this.tabWidth_;for(let q=0,ct;ct=t[q];q++)if(ct.type==="block"){var A=ct.block,F=A.getDescendants(!1);for(let Yt=0,le;le=F[Yt];Yt++)le.isInFlyout=!0;A.render(),F=A.getSvgRoot();const xt=A.getHeightWidth();var z=A.outputConnection?$-this.tabWidth_:$;A.moveBy(z,T),z=this.createRect_(A,this.RTL?z-xt.width:z,T,xt,q),this.addBlockListeners_(F,A,z),T+=xt.height+r[q]}else ct.type==="button"&&(A=ct.button,this.initFlyoutButton_(A,$,T),T+=A.height+r[q])}isDragTowardWorkspace(t){t=Math.atan2(t.y,t.x)/Math.PI*180;const r=this.dragAngleRange_;return t<r&&t>-r||t<-180+r||t>180-r}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const t=this.svgGroup_.getBoundingClientRect(),r=t.left;return this.toolboxPosition_===Ft.LEFT?new de(-1e9,1e9,-1e9,r+t.width):new de(-1e9,1e9,r,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let t=0;var r=this.workspace_.getTopBlocks(!1);for(let $=0,A;A=r[$];$++){var T=A.getHeightWidth().width;A.outputConnection&&(T-=this.tabWidth_),t=Math.max(t,T)}for(let $=0,A;A=this.buttons_[$];$++)t=Math.max(t,A.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,t+=ue.scrollbarThickness,this.width_!==t){for(let $=0,A;A=r[$];$++){if(this.RTL){T=A.getRelativeToSurfaceXY().x;let F=t/this.workspace_.scale-this.MARGIN;A.outputConnection||(F-=this.tabWidth_),A.moveBy(F-T,0)}this.rectMap_.has(A)&&this.moveRectToBlock_(this.rectMap_.get(A),A)}if(this.RTL)for(let $=0,A;A=this.buttons_[$];$++)r=A.getPosition().y,A.moveTo(t/this.workspace_.scale-A.width-this.MARGIN-this.tabWidth_,r);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==Ft.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}}};rh.registryName="verticalFlyout",Ut(gt.FLYOUTS_VERTICAL_TOOLBOX,Wi,rh);var $f=class extends Mo{constructor(t){super(t),this.horizontalLayout=!0}setMetrics_(t){if(this.isVisible()){var r=this.workspace_.getMetricsManager(),T=r.getScrollMetrics(),$=r.getViewMetrics();r=r.getAbsoluteMetrics(),typeof t.x=="number"&&(this.workspace_.scrollX=-(T.left+(T.width-$.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+r.left,this.workspace_.scrollY+r.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager();const r=t.getAbsoluteMetrics(),T=t.getViewMetrics();t=t.getToolboxMetrics();const $=this.toolboxPosition_===Ft.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?$?t.height:T.height-this.height_:$?0:T.height:$?0:T.height+r.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var r=this.getY();this.positionAt_(this.width_,this.height_,t,r)}}setBackgroundPath_(t,r){const T=this.toolboxPosition_===Ft.TOP,$=["M 0,"+(T?0:this.CORNER_RADIUS)];T?($.push("h",t+2*this.CORNER_RADIUS),$.push("v",r),$.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),$.push("h",-t),$.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):($.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),$.push("h",t),$.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),$.push("v",r),$.push("h",-t-2*this.CORNER_RADIUS)),$.push("z"),this.svgBackground_.setAttribute("d",$.join(" "))}scrollToStart(){let t;(t=this.workspace_.scrollbar)==null||t.setX(this.RTL?1/0:0)}wheel_(t){var r=x(t);if(r=r.x||r.y){const T=this.workspace_.getMetricsManager(),$=T.getScrollMetrics();r=T.getViewMetrics().left-$.left+r;let A;(A=this.workspace_.scrollbar)==null||A.setX(r),Oi(),Ii()}t.preventDefault(),t.stopPropagation()}layout_(t,r){this.workspace_.scale=this.targetWorkspace.scale;const T=this.MARGIN;let $=T+this.tabWidth_;this.RTL&&(t=t.reverse());for(let q=0,ct;ct=t[q];q++)if(ct.type==="block"){var A=ct.block,F=A.getDescendants(!1);for(let Yt=0,le;le=F[Yt];Yt++)le.isInFlyout=!0;A.render(),F=A.getSvgRoot();const xt=A.getHeightWidth();var z=A.outputConnection?this.tabWidth_:0;z=this.RTL?$+xt.width:$-z,A.moveBy(z,T),z=this.createRect_(A,z,T,xt,q),$+=xt.width+r[q],this.addBlockListeners_(F,A,z)}else ct.type==="button"&&(A=ct.button,this.initFlyoutButton_(A,$,T),$+=A.width+r[q])}isDragTowardWorkspace(t){t=Math.atan2(t.y,t.x)/Math.PI*180;const r=this.dragAngleRange_;return t<90+r&&t>90-r||t>-90-r&&t<-90+r}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const t=this.svgGroup_.getBoundingClientRect(),r=t.top;return this.toolboxPosition_===Ft.TOP?new de(-1e9,r+t.height,-1e9,1e9):new de(r,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let t=0;const r=this.workspace_.getTopBlocks(!1);for(let $=0,A;A=r[$];$++)t=Math.max(t,A.getHeightWidth().height);const T=this.buttons_;for(let $=0,A;A=T[$];$++)t=Math.max(t,A.height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,t+=ue.scrollbarThickness,this.height_!==t){for(let $=0,A;A=r[$];$++)this.rectMap_.has(A)&&this.moveRectToBlock_(this.rectMap_.get(A),A);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==Ft.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}}};Ut(gt.FLYOUTS_HORIZONTAL_TOOLBOX,Wi,$f);var mr=class extends xi{constructor(t,r,T,$,A){super(Wt.SKIP_SETUP),this.defaultType_="",this.variableTypes=[],this.variable_=null,this.SERIALIZABLE=!0,this.menuGenerator_=mr.dropdownCreate,this.defaultVariableName=typeof t=="string"?t:"",this.size_=new Ie(0,0),t!==Wt.SKIP_SETUP&&(A?this.configure_(A):this.setTypes_(T,$),r&&this.setValidator(r))}configure_(t){super.configure_(t),this.setTypes_(t.variableTypes,t.defaultType)}initModel(){var t=this.getSourceBlock();if(!t)throw new me;this.variable_||(t=Ir(t.workspace,null,this.defaultVariableName,this.defaultType_),this.doValueUpdate_(t.getId()))}shouldAddBorderRect_(){const t=this.getSourceBlock();if(!t)throw new me;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||t.type!=="variables_get")}fromXml(t){var r=this.getSourceBlock();if(!r)throw new me;const T=t.getAttribute("id"),$=t.textContent,A=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(r=Ir(r.workspace,T,$,A),A!==null&&A!==r.type)throw Error("Serialized variable type with id '"+r.getId()+"' had type "+r.type+", and does not match variable field that references it: "+ri(t)+".");this.setValue(r.getId())}toXml(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t}saveState(t){var r=this.saveLegacyState(mr);return r!==null||(this.initModel(),r={id:this.variable_.getId()},t&&(r.name=this.variable_.name,r.type=this.variable_.type)),r}loadState(t){const r=this.getSourceBlock();if(!r)throw new me;this.loadLegacyState(mr,t)||(t=Ir(r.workspace,t.id||null,t.name,t.type||""),this.setValue(t.getId()))}setSourceBlock(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(t)}getValue(){return this.variable_?this.variable_.getId():null}getText(){return this.variable_?this.variable_.name:""}getVariable(){return this.variable_}getValidator(){return this.variable_?this.validator_:null}doClassValidation_(t){if(t===null)return null;var r=this.getSourceBlock();if(!r)throw new me;return r=Or(r.workspace,t),r?(r=r.type,this.typeIsAllowed_(r)?t:(console.warn("Variable type doesn't match this field!  Type was "+r),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)}doValueUpdate_(t){const r=this.getSourceBlock();if(!r)throw new me;this.variable_=Or(r.workspace,t),super.doValueUpdate_(t)}typeIsAllowed_(t){const r=this.getVariableTypes_();if(!r)return!0;for(let T=0;T<r.length;T++)if(t===r[T])return!0;return!1}getVariableTypes_(){var t=this.variableTypes;if(t===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(t=t||[""],t.length===0)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t}setTypes_(t,r){if(r=r||"",t==null)t=null;else if(Array.isArray(t)){let T=!1;for(let $=0;$<t.length;$++)t[$]===r&&(T=!0);if(!T)throw Error("Invalid default type '"+r+"' in the definition of a FieldVariable")}else throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType_=r,this.variableTypes=t}refreshVariableName(){this.forceRerender()}onItemSelected_(t,r){if(t=r.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(t===Al){eu(this.sourceBlock_.workspace,this.variable_);return}if(t===Ll){this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());return}}this.setValue(t)}referencesVariables(){return!0}static fromJson(t){return new this(ce(t.variable),void 0,void 0,void 0,t)}static dropdownCreate(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const t=this.getText();let r=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var T=this.getVariableTypes_(),$=0;$<T.length;$++){const A=this.sourceBlock_.workspace.getVariablesOfType(T[$]);r=r.concat(A)}for(r.sort(kn.compareByName),T=[],$=0;$<r.length;$++)T[$]=[r[$].name,r[$].getId()];return T.push([bt.RENAME_VARIABLE,Al]),bt.DELETE_VARIABLE&&T.push([bt.DELETE_VARIABLE.replace("%1",t),Ll]),T}};oi("field_variable",mr);var oh=class extends vr{constructor(t,r,T,$,A,F){super(Wt.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,this.SERIALIZABLE=!0,this.spellcheck_=!1,t!==Wt.SKIP_SETUP&&(F?this.configure_(F):this.setConstraints(r,T,$),this.setValue(t),A&&this.setValidator(A))}configure_(t){super.configure_(t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)}setConstraints(t,r,T){this.setMinInternal_(t),this.setMaxInternal_(r),this.setPrecisionInternal_(T),this.setValue(this.getValue())}setMin(t){this.setMinInternal_(t),this.setValue(this.getValue())}setMinInternal_(t){t==null?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))}getMin(){return this.min_}setMax(t){this.setMaxInternal_(t),this.setValue(this.getValue())}setMaxInternal_(t){t==null?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))}getMax(){return this.max_}setPrecision(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())}setPrecisionInternal_(t){this.precision_=Number(t)||0;let r=String(this.precision_);r.indexOf("e")!==-1&&(r=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const T=r.indexOf(".");this.decimalPlaces_=T===-1?t?0:null:r.length-T-1}getPrecision(){return this.precision_}doClassValidation_(t){return t===null||(t=String(t),t=t.replace(/O/ig,"0"),t=t.replace(/,/g,""),t=t.replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),this.decimalPlaces_!==null&&(t=Number(t.toFixed(this.decimalPlaces_))),t)}widgetCreate_(){const t=super.widgetCreate_();return-1/0<this.min_&&he(t,re.VALUEMIN,this.min_),1/0>this.max_&&he(t,re.VALUEMAX,this.max_),t}static fromJson(t){return new this(t.value,void 0,void 0,void 0,void 0,t)}};oi("field_number",oh),oh.prototype.DEFAULT_VALUE=0;var ah=class extends c.FieldTextInput$$module$build$src$core$field_textinput{constructor(t,r,T){super(Wt.SKIP_SETUP),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1,t!==Wt.SKIP_SETUP&&(T&&this.configure_(T),this.setValue(t),r&&this.setValidator(r))}configure_(t){super.configure_(t),t.maxLines&&this.setMaxLines(t.maxLines)}toXml(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t}fromXml(t){this.setValue(t.textContent.replace(/&#10;/g,`
`))}saveState(){const t=this.saveLegacyState(ah);return t!==null?t:this.getValue()}loadState(t){this.loadLegacyState(Wt,t)||this.setValue(t)}initView(){this.createBorderRect_(),this.textGroup_=N(nt.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const t=this.getSourceBlock();if(!t)throw new me;let r=this.getText();if(!r)return Wt.NBSP;const T=r.split(`
`);r="";const $=this.isOverflowedY_?this.maxLines_:T.length;for(let A=0;A<$;A++){let F=T[A];F.length>this.maxDisplayLength?F=F.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&A===$-1&&(F=F.substring(0,F.length-3)+"..."),F=F.replace(/\s/g,Wt.NBSP),r+=F,A!==$-1&&(r+=`
`)}return t.RTL&&(r+="\u200F"),r}doValueUpdate_(t){super.doValueUpdate_(t),this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_}render_(){var t=this.getSourceBlock();if(!t)throw new me;for(var r;r=this.textGroup_.firstChild;)this.textGroup_.removeChild(r);r=this.getDisplayText_().split(`
`);let T=0;for(let $=0;$<r.length;$++){const A=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;N(nt.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:T+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(r[$])),T+=A}this.isBeingEdited_&&(r=this.htmlInput_,this.isOverflowedY_?G(r,"blocklyHtmlTextAreaInputOverflowedY"):V(r,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(t.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(V(t,"blocklyInvalidInput"),he(t,re.INVALID,!1)):(G(t,"blocklyInvalidInput"),he(t,re.INVALID,!0)))}updateSize_(){var t=this.textGroup_.childNodes;const r=this.getConstants().FIELD_TEXT_FONTSIZE,T=this.getConstants().FIELD_TEXT_FONTWEIGHT,$=this.getConstants().FIELD_TEXT_FONTFAMILY;let A=0,F=0;for(var z=0;z<t.length;z++){var q=pt(t[z],r,T,$);q>A&&(A=q),F+=this.getConstants().FIELD_TEXT_HEIGHT+(0<z?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(t=this.value_.split(`
`),z=N(nt.TEXT,{class:"blocklyText blocklyMultilineText"}),q=0;q<t.length;q++){t[q].length>this.maxDisplayLength&&(t[q]=t[q].substring(0,this.maxDisplayLength)),z.textContent=t[q];const ct=pt(z,r,T,$);ct>A&&(A=ct)}A+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(F+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,A+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",A),this.borderRect_.setAttribute("height",F)),this.size_.width=A,this.size_.height=F,this.positionBorderRect_()}showEditor_(t,r){super.showEditor_(t,r),this.forceRerender()}widgetCreate_(){const t=ks(),r=this.workspace_.getScale(),T=document.createElement("textarea");T.className="blocklyHtmlInput blocklyHtmlTextAreaInput",T.setAttribute("spellcheck",this.spellcheck_);var $=this.getConstants().FIELD_TEXT_FONTSIZE*r+"pt";t.style.fontSize=$,T.style.fontSize=$,T.style.borderRadius=c.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS*r+"px",$=this.getConstants().FIELD_BORDER_RECT_X_PADDING*r;const A=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*r/2;return T.style.padding=A+"px "+$+"px "+A+"px "+$+"px",$=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,T.style.lineHeight=$*r+"px",t.appendChild(T),T.value=T.defaultValue=this.getEditorText_(this.value_),T.setAttribute("data-untyped-default-value",this.value_),T.setAttribute("data-old-value",""),ka?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(T),T}setMaxLines(t){typeof t=="number"&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(t){t.keyCode!==Rt.ENTER&&super.onHtmlInputKeyDown_(t)}static fromJson(t){return new this(ce(t.text),void 0,t)}};di(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`),oi("field_multilinetext",ah);var If=class extends c.FieldLabel$$module$build$src$core$field_label{constructor(t,r,T){super(String(t!=null?t:""),r,T),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(t){return new this(ce(t.text),void 0,t)}};oi("field_label_serializable",If);var ei=class extends Wt{constructor(t,r,T){super(Wt.SKIP_SETUP),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles_=this.colours_=null,this.columns_=0,t!==Wt.SKIP_SETUP&&(T&&this.configure_(T),this.setValue(t),r&&this.setValidator(r))}configure_(t){super.configure_(t),t.colourOptions&&(this.colours_=t.colourOptions),t.colourTitles&&(this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)}initView(){this.size_=new Ie(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof li&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()):(this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1")}applyColour(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof li&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())}doClassValidation_(t){return typeof t!="string"?null:gs(t)}doValueUpdate_(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_ instanceof li&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))}getText(){let t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t}setColours(t,r){return this.colours_=t,r&&(this.titles_=r),this}setColumns(t){return this.columns_=t,this}showEditor_(){this.dropdownCreate_(),De().appendChild(this.picker_),it(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})}onClick_(t){t=(t=t.target)&&t.getAttribute("data-colour"),t!==null&&(this.setValue(t),xn(this))}onKeyDown_(t){var r=!1;t.keyCode===Rt.UP?(this.moveHighlightBy_(0,-1),r=!0):t.keyCode===Rt.DOWN?(this.moveHighlightBy_(0,1),r=!0):t.keyCode===Rt.LEFT?(this.moveHighlightBy_(-1,0),r=!0):t.keyCode===Rt.RIGHT?(this.moveHighlightBy_(1,0),r=!0):t.keyCode===Rt.ENTER&&((r=this.getHighlighted_())&&(r=r&&r.getAttribute("data-colour"),r!==null&&this.setValue(r)),Ii(),r=!0),r&&t.stopPropagation()}moveHighlightBy_(t,r){if(this.highlightedIndex_){var T=this.colours_||ei.COLOURS,$=this.columns_||ei.COLUMNS,A=this.highlightedIndex_%$,F=Math.floor(this.highlightedIndex_/$);A+=t,F+=r,0>t?0>A&&0<F?(A=$-1,F--):0>A&&(A=0):0<t?A>$-1&&F<Math.floor(T.length/$)-1?(A=0,F++):A>$-1&&A--:0>r?0>F&&(F=0):0<r&&F>Math.floor(T.length/$)-1&&(F=Math.floor(T.length/$)-1),this.setHighlightedCell_(this.picker_.childNodes[F].childNodes[A],F*$+A)}}onMouseMove_(t){const r=(t=t.target)&&Number(t.getAttribute("data-index"));r!==null&&r!==this.highlightedIndex_&&this.setHighlightedCell_(t,r)}onMouseEnter_(){this.picker_.focus({preventScroll:!0})}onMouseLeave_(){this.picker_.blur();const t=this.getHighlighted_();t&&V(t,"blocklyColourHighlighted")}getHighlighted_(){if(!this.highlightedIndex_)return null;const t=this.columns_||ei.COLUMNS,r=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return r?r.childNodes[this.highlightedIndex_%t]:null}setHighlightedCell_(t,r){const T=this.getHighlighted_();T&&V(T,"blocklyColourHighlighted"),G(t,"blocklyColourHighlighted"),this.highlightedIndex_=r,he(this.picker_,re.ACTIVEDESCENDANT,t.getAttribute("id"))}dropdownCreate_(){const t=this.columns_||ei.COLUMNS,r=this.colours_||ei.COLOURS,T=this.titles_||ei.TITLES,$=this.getValue(),A=document.createElement("table");A.className="blocklyColourTable",A.tabIndex=0,A.dir="ltr",Ai(A,Ke.GRID),he(A,re.EXPANDED,!0),he(A,re.ROWCOUNT,Math.floor(r.length/t)),he(A,re.COLCOUNT,t);let F;for(let z=0;z<r.length;z++){z%t===0&&(F=document.createElement("tr"),Ai(F,Ke.ROW),A.appendChild(F));const q=document.createElement("td");F.appendChild(q),q.setAttribute("data-colour",r[z]),q.title=T[z]||r[z],q.id=yn(),q.setAttribute("data-index",z),Ai(q,Ke.GRIDCELL),he(q,re.LABEL,r[z]),he(q,re.SELECTED,r[z]===$),q.style.backgroundColor=r[z],r[z]===$&&(q.className="blocklyColourSelected",this.highlightedIndex_=z)}this.onClickWrapper_=u(A,"pointerdown",this,this.onClick_,!0),this.onMouseMoveWrapper_=u(A,"pointermove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=u(A,"pointerenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=u(A,"pointerleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=u(A,"keydown",this,this.onKeyDown_),this.picker_=A}dropdownDispose_(){this.onClickWrapper_&&(p(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(p(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(p(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(p(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(p(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null}static fromJson(t){return new this(t.colour,void 0,t)}};ei.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),ei.TITLES=[],ei.COLUMNS=7,ei.prototype.DEFAULT_VALUE=ei.COLOURS[0],di(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: .5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`),oi("field_colour",ei),c.FieldCheckbox$$module$build$src$core$field_checkbox=class extends Wt{constructor(t,r,T){super(Wt.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.checkChar_=c.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,t!==Wt.SKIP_SETUP&&(T&&this.configure_(T),this.setValue(t),r&&this.setValidator(r))}configure_(t){super.configure_(t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)}saveState(){const t=this.saveLegacyState(c.FieldCheckbox$$module$build$src$core$field_checkbox);return t!==null?t:this.getValueBoolean()}initView(){super.initView();const t=this.getTextElement();G(t,"blocklyCheckbox"),t.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar_}setCheckCharacter(t){this.checkChar_=t||c.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(t){return t===!0||t==="TRUE"?"TRUE":t===!1||t==="FALSE"?"FALSE":null}doValueUpdate_(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(t){return typeof t=="string"?t==="TRUE":!!t}static fromJson(t){return new this(t.checked,void 0,t)}},c.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR="\u2713",oi("field_checkbox",c.FieldCheckbox$$module$build$src$core$field_checkbox),c.FieldCheckbox$$module$build$src$core$field_checkbox.prototype.DEFAULT_VALUE=!1;var Vt=class extends vr{constructor(t,r,T){super(Wt.SKIP_SETUP),this.clockwise_=Vt.CLOCKWISE,this.offset_=Vt.OFFSET,this.wrap_=Vt.WRAP,this.round_=Vt.ROUND,this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.symbol_=this.line_=this.gauge_=this.editor_=null,this.SERIALIZABLE=!0,t!==Wt.SKIP_SETUP&&(T&&this.configure_(T),this.setValue(t),r&&this.setValidator(r))}configure_(t){switch(super.configure_(t),t.mode){case Po.COMPASS:this.clockwise_=!0,this.offset_=90;break;case Po.PROTRACTOR:this.clockwise_=!1,this.offset_=0}t.clockwise&&(this.clockwise_=t.clockwise),t.offset&&(this.offset_=t.offset),t.wrap&&(this.wrap_=t.wrap),t.round&&(this.round_=t.round)}initView(){super.initView(),this.symbol_=N(nt.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("\xB0")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph_()}showEditor_(t){super.showEditor_(t,Va||Jr||Vs),this.dropdownCreate_(),De().appendChild(this.editor_),this.sourceBlock_ instanceof li&&W(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),it(this,this.dropdownDispose_.bind(this)),this.updateGraph_()}dropdownCreate_(){const t=N(nt.SVG,{xmlns:Xs,"xmlns:html":pi,"xmlns:xlink":Ye,version:"1.1",height:2*Vt.HALF+"px",width:2*Vt.HALF+"px",style:"touch-action: none"}),r=N(nt.CIRCLE,{cx:Vt.HALF,cy:Vt.HALF,r:Vt.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=N(nt.PATH,{class:"blocklyAngleGauge"},t),this.line_=N(nt.LINE,{x1:Vt.HALF,y1:Vt.HALF,class:"blocklyAngleLine"},t);for(let T=0;360>T;T+=15)N(nt.LINE,{x1:Vt.HALF+Vt.RADIUS,y1:Vt.HALF,x2:Vt.HALF+Vt.RADIUS-(T%45===0?10:5),y2:Vt.HALF,class:"blocklyAngleMarks",transform:"rotate("+T+","+Vt.HALF+","+Vt.HALF+")"},t);this.clickWrapper_=u(t,"click",this,this.hide_),this.clickSurfaceWrapper_=u(r,"pointerdown",this,this.onMouseMove_,!0),this.moveSurfaceWrapper_=u(r,"pointermove",this,this.onMouseMove_,!0),this.editor_=t}dropdownDispose_(){this.clickWrapper_&&(p(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(p(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(p(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null}hide_(){xn(this),Oi()}onMouseMove_(t){var r=this.gauge_.ownerSVGElement.getBoundingClientRect();const T=t.clientX-r.left-Vt.HALF;t=t.clientY-r.top-Vt.HALF,r=Math.atan(-t/T),isNaN(r)||(r=$t(r),0>T?r+=180:0<t&&(r+=360),r=this.clockwise_?this.offset_+360-r:360-(this.offset_-r),this.displayMouseOrKeyboardValue_(r))}displayMouseOrKeyboardValue_(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),t=this.wrapValue_(t),t!==this.value_&&this.setEditorValue_(t)}updateGraph_(){if(this.gauge_){var t=Number(this.getText())+this.offset_,r=Ct(t%360);t=["M ",Vt.HALF,",",Vt.HALF];var T=Vt.HALF,$=Vt.HALF;if(!isNaN(r)){const A=Number(this.clockwise_),F=Ct(this.offset_),z=Math.cos(F)*Vt.RADIUS,q=Math.sin(F)*-Vt.RADIUS;A&&(r=2*F-r),T+=Math.cos(r)*Vt.RADIUS,$-=Math.sin(r)*Vt.RADIUS,r=Math.abs(Math.floor((r-F)/Math.PI)%2),A&&(r=1-r),t.push(" l ",z,",",q," A ",Vt.RADIUS,",",Vt.RADIUS," 0 ",r," ",A," ",T,",",$," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",T),this.line_.setAttribute("y2",$)}}onHtmlInputKeyDown_(t){super.onHtmlInputKeyDown_(t);var r=this.getSourceBlock();if(!r)throw new me;let T;t.keyCode===Rt.LEFT?T=r.RTL?1:-1:t.keyCode===Rt.RIGHT?T=r.RTL?-1:1:t.keyCode===Rt.DOWN?T=-1:t.keyCode===Rt.UP&&(T=1),T&&(r=this.getValue(),this.displayMouseOrKeyboardValue_(r+T*this.round_),t.preventDefault(),t.stopPropagation())}doClassValidation_(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)}wrapValue_(t){return t%=360,0>t&&(t+=360),t>this.wrap_&&(t-=360),t}static fromJson(t){return new this(t.angle,void 0,t)}};Vt.ROUND=15,Vt.HALF=50,Vt.CLOCKWISE=!1,Vt.OFFSET=0,Vt.WRAP=360,Vt.RADIUS=Vt.HALF-1,di(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: .8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`),oi("field_angle",Vt),Vt.prototype.DEFAULT_VALUE=0;var Po;(function(t){t.COMPASS="compass",t.PROTRACTOR="protractor"})(Po||(Po={}));var lh=class extends qs{constructor(t){super(t),this.type=Fe,t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)}toJson(){const t=super.toJson();return t.oldParentId=this.oldParentId,t.oldInputName=this.oldInputName,this.oldCoordinate&&(t.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),t.newParentId=this.newParentId,t.newInputName=this.newInputName,this.newCoordinate&&(t.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.recordUndo||(t.recordUndo=this.recordUndo),t}fromJson(t){if(R("Blockly.Events.BlockMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.oldParentId=t.oldParentId,this.oldInputName=t.oldInputName,t.oldCoordinate){var r=t.oldCoordinate.split(",");this.oldCoordinate=new Et(Number(r[0]),Number(r[1]))}this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate&&(r=t.newCoordinate.split(","),this.newCoordinate=new Et(Number(r[0]),Number(r[1]))),t.recordUndo!==void 0&&(this.recordUndo=t.recordUndo)}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new lh),r.oldParentId=t.oldParentId,r.oldInputName=t.oldInputName,t.oldCoordinate&&(T=t.oldCoordinate.split(","),r.oldCoordinate=new Et(Number(T[0]),Number(T[1]))),r.newParentId=t.newParentId,r.newInputName=t.newInputName,t.newCoordinate&&(T=t.newCoordinate.split(","),r.newCoordinate=new Et(Number(T[0]),Number(T[1]))),t.recordUndo!==void 0&&(r.recordUndo=t.recordUndo),r}recordNew(){const t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate}currentLocation_(){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var r=t.getBlockById(this.blockId);if(!r)throw Error("The block associated with the block move event could not be found");t={};const T=r.getParent();return T?(t.parentId=T.id,(r=T.getInputWithBlock(r))&&(t.inputName=r.name)):t.coordinate=r.getRelativeToSurfaceXY(),t}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&Et.equals(this.oldCoordinate,this.newCoordinate)}run(t){var r=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var T=r.getBlockById(this.blockId);if(T){var $=t?this.newParentId:this.oldParentId,A=t?this.newInputName:this.oldInputName;if(t=t?this.newCoordinate:this.oldCoordinate,$){var F=r.getBlockById($);if(!F){console.warn("Can't connect to non-existent block: "+$);return}}if(T.getParent()&&T.unplug(),t)A=T.getRelativeToSurfaceXY(),T.moveBy(t.x-A.x,t.y-A.y);else{r=T.outputConnection,(!r||T.previousConnection&&T.previousConnection.isConnected())&&(r=T.previousConnection);let z;T=r.type,A?(T=F.getInput(A))&&(z=T.connection):T===yt.PREVIOUS_STATEMENT&&(z=F.nextConnection),z?r.connect(z):console.warn("Can't connect to non-existent input: "+A)}}else console.warn("Can't move non-existent block: "+this.blockId)}};Ut(gt.EVENT,Fe,lh);var cs=class extends Is{constructor(t){super(),this.isBlank=!t,t&&(this.commentId=t.id,this.workspaceId=t.workspace.id,this.group=oe(),this.recordUndo=ci())}toJson(){const t=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return t.commentId=this.commentId,t}fromJson(t){R("Blockly.Events.CommentBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.commentId=t.commentId}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new cs),r.commentId=t.commentId,r}static CommentCreateDeleteHelper(t,r){var T=t.getEventWorkspace_();if(r){if(r=qt("xml"),!t.xml)throw Error("Ecountered a comment event without proper xml");r.appendChild(t.xml),Cn(r,T)}else{if(!t.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(T=T.getCommentById(t.commentId))?T.dispose():console.warn("Can't uncreate non-existent comment: "+t.commentId)}}},hh=class extends cs{constructor(t,r,T){super(t),this.type=Fn,t&&(this.oldContents_=typeof r=="undefined"?"":r,this.newContents_=typeof T=="undefined"?"":T)}toJson(){const t=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t}fromJson(t){R("Blockly.Events.CommentChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.oldContents_=t.oldContents,this.newContents_=t.newContents}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new hh),r.oldContents_=t.oldContents,r.newContents_=t.newContents,r}isNull(){return this.oldContents_===this.newContents_}run(t){var r=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(r=r.getCommentById(this.commentId)){var T=t?this.newContents_:this.oldContents_;if(!T)throw Error(t?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");r.setContent(T)}else console.warn("Can't change non-existent comment: "+this.commentId)}};Ut(gt.EVENT,Fn,hh);var uh=class extends cs{constructor(t){super(t),this.type=Rs,t&&(this.xml=t.toXmlWithXY())}toJson(){const t=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return t.xml=ri(this.xml),t}fromJson(t){R("Blockly.Events.CommentCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.xml=Be(t.xml)}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new uh),r.xml=Be(t.xml),r}run(t){cs.CommentCreateDeleteHelper(this,t)}};Ut(gt.EVENT,Rs,uh);var ch=class extends cs{constructor(t){super(t),this.type=Js,t&&(this.xml=t.toXmlWithXY())}run(t){cs.CommentCreateDeleteHelper(this,!t)}toJson(){const t=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return t.xml=ri(this.xml),t}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new ch),r.xml=Be(t.xml),r}};Ut(gt.EVENT,Js,ch);var dh=class extends cs{constructor(t){super(t),this.type=Yi,t&&(this.comment_=t,this.oldCoordinate_=t.getXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getXY()}setOldCoordinate(t){this.oldCoordinate_=t}toJson(){const t=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return t.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),t}fromJson(t){R("Blockly.Events.CommentMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t);let r=t.oldCoordinate.split(",");this.oldCoordinate_=new Et(Number(r[0]),Number(r[1])),r=t.newCoordinate.split(","),this.newCoordinate_=new Et(Number(r[0]),Number(r[1]))}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new dh),T=t.oldCoordinate.split(","),r.oldCoordinate_=new Et(Number(T[0]),Number(T[1])),T=t.newCoordinate.split(","),r.newCoordinate_=new Et(Number(T[0]),Number(T[1])),r}isNull(){return Et.equals(this.oldCoordinate_,this.newCoordinate_)}run(t){var r=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(r=r.getCommentById(this.commentId)){if(t=t?this.newCoordinate_:this.oldCoordinate_,!t)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var T=r.getXY();r.moveBy(t.x-T.x,t.y-T.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};Ut(gt.EVENT,Yi,dh);var Ns=class extends Is{constructor(t,r){super(),this.model=r,this.isBlank=!1,this.workspaceId=t.id}toJson(){const t=super.toJson();return t.procedureId=this.model.getId(),t}},fh=class extends Ns{constructor(t,r,T){super(t,r),this.oldTypes=T,this.type=ro,this.newTypes=r.getReturnTypes()}run(t){const r=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!r)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");t?r.setReturnTypes(this.newTypes):r.setReturnTypes(this.oldTypes)}toJson(){const t=super.toJson();return t.oldTypes=this.oldTypes,t}static fromJson(t,r){const T=r.getProcedureMap().get(t.procedureId);if(!T)throw Error("Cannot deserialize procedure change return event because the target procedure does not exist");return new fh(r,T,t.oldTypes)}};Ut(gt.EVENT,ro,fh);var ph=class extends Ns{constructor(t,r){super(t,r),this.type=io}run(t){const r=this.getEventWorkspace_(),T=r.getProcedureMap(),$=T.get(this.model.getId());t?$||T.add(new ar(r,this.model.getName(),this.model.getId())):$&&T.delete(this.model.getId())}toJson(){const t=super.toJson();return t.model=Da(this.model),t}static fromJson(t,r){return new ph(r,Na(ar,fn,t.model,r))}};Ut(gt.EVENT,io,ph);var vh=class extends Ns{constructor(t,r){super(t,r),this.type=Gn}run(t){const r=this.getEventWorkspace_(),T=r.getProcedureMap(),$=T.get(this.model.getId());t?$&&T.delete(this.model.getId()):$||T.add(new ar(r,this.model.getName(),this.model.getId()))}toJson(){return super.toJson()}static fromJson(t,r){if(t=r.getProcedureMap().get(t.procedureId),!t)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");return new vh(r,t)}};Ut(gt.EVENT,Gn,vh);var gh=class extends Ns{constructor(t,r){super(t,r),this.type=no,this.oldState=!r.getEnabled(),this.newState=r.getEnabled()}run(t){const r=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!r)throw Error("Cannot change the enabled state of a procedure that does not exist in the procedure map");t?r.setEnabled(this.newState):r.setEnabled(this.oldState)}toJson(){return super.toJson()}static fromJson(t,r){if(t=r.getProcedureMap().get(t.procedureId),!t)throw Error("Cannot deserialize procedure enable event because the target procedure does not exist");return new gh(r,t)}};Ut(gt.EVENT,no,gh);var mh=class extends Ns{constructor(t,r,T){super(t,r),this.oldName=T,this.type=so,this.newName=r.getName()}run(t){const r=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!r)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");t?r.setName(this.newName):r.setName(this.oldName)}toJson(){const t=super.toJson();return t.oldName=this.oldName,t}static fromJson(t,r){const T=r.getProcedureMap().get(t.procedureId);if(!T)throw Error("Cannot deserialize procedure rename event because the target procedure does not exist");return new mh(r,T,t.oldName)}};Ut(gt.EVENT,so,mh);var Do=class extends Ns{constructor(t,r,T){super(t,r),this.parameter=T}toJson(){const t=super.toJson();return t.parameterId=this.model.getId(),t}},Th=class extends Do{constructor(t,r,T,$){super(t,r,T),this.index=$,this.type=oo}run(t){const r=this.getEventWorkspace_(),T=r.getProcedureMap().get(this.model.getId());if(!T)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const $=T.getParameter(this.index);t?this.parameterMatches($)||T.insertParameter(new fn(r,this.parameter.getName(),this.parameter.getId()),this.index):this.parameterMatches($)&&T.deleteParameter(this.index)}parameterMatches(t){return t&&t.getId()===this.parameter.getId()}toJson(){const t=super.toJson();return t.parameter=ba(this.parameter),t.index=this.index,t}static fromJson(t,r){const T=r.getProcedureMap().get(t.procedureId);if(!T)throw Error("Cannot deserialize parameter create event because the target procedure does not exist");return new Th(r,T,wa(fn,t.parameter,r),t.index)}};Ut(gt.EVENT,oo,Th);var Eh=class extends Do{constructor(t,r,T,$){super(t,r,T),this.index=$,this.type=ao}run(t){const r=this.getEventWorkspace_(),T=r.getProcedureMap().get(this.model.getId());if(!T)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const $=T.getParameter(this.index);t?this.parameterMatches($)&&T.deleteParameter(this.index):this.parameterMatches($)||T.insertParameter(new fn(r,this.parameter.getName(),this.parameter.getId()),this.index)}parameterMatches(t){return t&&t.getId()===this.parameter.getId()}toJson(){const t=super.toJson();return t.index=this.index,t}static fromJson(t,r){const T=r.getProcedureMap().get(t.procedureId);if(!T)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const $=T.getParameter(t.index);return new Eh(r,T,$,t.index)}};Ut(gt.EVENT,ao,Eh);var xh=class extends Do{constructor(t,r,T,$){super(t,r,T),this.oldName=$,this.type=lo,this.newName=T.getName()}run(t){const r=pc(this.getEventWorkspace_(),this.model.getId(),this.parameter.getId());if(!r)throw Error("Cannot rename a parameter that does not exist in the procedure map");t?r.setName(this.newName):r.setName(this.oldName)}toJson(){const t=super.toJson();return t.oldName=this.oldName,t}static fromJson(t,r){const T=r.getProcedureMap().get(t.procedureId);if(!T)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const $=pc(r,t.procedureId,t.parameterId);if(!$)throw Error("Cannot deserialize parameter rename event because the target parameter does not exist");return new xh(r,T,$,t.oldName)}};Ut(gt.EVENT,lo,xh);var yh=class extends mi{constructor(t,r,T){super(t?t.workspace.id:void 0),this.type=_s,t&&(this.blockId=t.id,this.isStart=r,this.blocks=T)}toJson(){const t=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t}fromJson(t){R("Blockly.Events.BlockDrag.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks}static fromJson(t,r,T){return r=super.fromJson(t,r,T!=null?T:new yh),r.isStart=t.isStart,r.blockId=t.blockId,r.blocks=t.blocks,r}};Ut(gt.EVENT,_s,yh);var Of=class extends mi{constructor(t,r,T,$){super(t?t.workspace.id:void 0),this.type=Dn,this.blockId=t?t.id:null,this.element=typeof r=="undefined"?"":r,this.oldValue=typeof T=="undefined"?"":T,this.newValue=typeof $=="undefined"?"":$}toJson(){const t=super.toJson();return t.element=this.element,this.newValue!==void 0&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t}fromJson(t){super.fromJson(t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId}};Ut(gt.EVENT,Dn,Of);var Af=class extends Is{constructor(t){super(),this.isBlank=!0,this.recordUndo=!1,this.type=Zs,this.isBlank=!!t,t&&(this.workspaceId=t.id)}toJson(){const t=super.toJson();if(!this.workspaceId)throw Error("The workspace ID is undefined. Either pass a workspace to the constructor, or call fromJson");return t.workspaceId=this.workspaceId,t}fromJson(t){super.fromJson(t),this.workspaceId=t.workspaceId}};Ut(gt.EVENT,Zs,Af),c.module$build$src$core$events$events={},c.module$build$src$core$events$events.Abstract=Is,c.module$build$src$core$events$events.BLOCK_CHANGE=Re,c.module$build$src$core$events$events.BLOCK_CREATE=Le,c.module$build$src$core$events$events.BLOCK_DELETE=Pi,c.module$build$src$core$events$events.BLOCK_DRAG=_s,c.module$build$src$core$events$events.BLOCK_MOVE=Fe,c.module$build$src$core$events$events.BUBBLE_OPEN=Xi,c.module$build$src$core$events$events.BUMP_EVENTS=Qa,c.module$build$src$core$events$events.BlockBase=qs,c.module$build$src$core$events$events.BlockChange=Os,c.module$build$src$core$events$events.BlockCreate=Sl,c.module$build$src$core$events$events.BlockDelete=Cl,c.module$build$src$core$events$events.BlockDrag=yh,c.module$build$src$core$events$events.BlockMove=lh,c.module$build$src$core$events$events.BubbleOpen=gl,c.module$build$src$core$events$events.BubbleType=ml,c.module$build$src$core$events$events.CHANGE=Re,c.module$build$src$core$events$events.CLICK=os,c.module$build$src$core$events$events.COMMENT_CHANGE=Fn,c.module$build$src$core$events$events.COMMENT_CREATE=Rs,c.module$build$src$core$events$events.COMMENT_DELETE=Js,c.module$build$src$core$events$events.COMMENT_MOVE=Yi,c.module$build$src$core$events$events.CREATE=Le,c.module$build$src$core$events$events.Click=Fl,c.module$build$src$core$events$events.ClickTarget=Gl,c.module$build$src$core$events$events.CommentBase=cs,c.module$build$src$core$events$events.CommentChange=hh,c.module$build$src$core$events$events.CommentCreate=uh,c.module$build$src$core$events$events.CommentDelete=ch,c.module$build$src$core$events$events.CommentMove=dh,c.module$build$src$core$events$events.DELETE=Pi,c.module$build$src$core$events$events.FINISHED_LOADING=Zs,c.module$build$src$core$events$events.FinishedLoading=Af,c.module$build$src$core$events$events.MARKER_MOVE=bn,c.module$build$src$core$events$events.MOVE=Fe,c.module$build$src$core$events$events.MarkerMove=_l,c.module$build$src$core$events$events.ProcedureBase=Ns,c.module$build$src$core$events$events.ProcedureChangeReturn=fh,c.module$build$src$core$events$events.ProcedureCreate=ph,c.module$build$src$core$events$events.ProcedureDelete=vh,c.module$build$src$core$events$events.ProcedureEnable=gh,c.module$build$src$core$events$events.ProcedureParameterBase=Do,c.module$build$src$core$events$events.ProcedureParameterCreate=Th,c.module$build$src$core$events$events.ProcedureParameterDelete=Eh,c.module$build$src$core$events$events.ProcedureParameterRename=xh,c.module$build$src$core$events$events.ProcedureRename=mh,c.module$build$src$core$events$events.SELECTED=rs,c.module$build$src$core$events$events.Selected=nl,c.module$build$src$core$events$events.THEME_CHANGE=Bn,c.module$build$src$core$events$events.TOOLBOX_ITEM_SELECT=wn,c.module$build$src$core$events$events.TRASHCAN_OPEN=Nn,c.module$build$src$core$events$events.ThemeChange=Ul,c.module$build$src$core$events$events.ToolboxItemSelect=Nl,c.module$build$src$core$events$events.TrashcanOpen=xl,c.module$build$src$core$events$events.UI=Dn,c.module$build$src$core$events$events.Ui=Of,c.module$build$src$core$events$events.UiBase=mi,c.module$build$src$core$events$events.VAR_CREATE=Ss,c.module$build$src$core$events$events.VAR_DELETE=js,c.module$build$src$core$events$events.VAR_RENAME=Pn,c.module$build$src$core$events$events.VIEWPORT_CHANGE=Cs,c.module$build$src$core$events$events.VarBase=Un,c.module$build$src$core$events$events.VarCreate=il,c.module$build$src$core$events$events.VarDelete=Ql,c.module$build$src$core$events$events.VarRename=ql,c.module$build$src$core$events$events.ViewportChange=kl,c.module$build$src$core$events$events.clearPendingUndo=Jo,c.module$build$src$core$events$events.disable=Te,c.module$build$src$core$events$events.disableOrphans=Zo,c.module$build$src$core$events$events.enable=Ee,c.module$build$src$core$events$events.filter=Cr,c.module$build$src$core$events$events.fire=It,c.module$build$src$core$events$events.fromJson=Jh,c.module$build$src$core$events$events.get=Ot,c.module$build$src$core$events$events.getDescendantIds=Rr,c.module$build$src$core$events$events.getGroup=oe,c.module$build$src$core$events$events.getRecordUndo=ci,c.module$build$src$core$events$events.isEnabled=Se,c.module$build$src$core$events$events.setGroup=Pt,c.module$build$src$core$events$events.setRecordUndo=_e,Mc();var ke={};ke.registerCleanup=mc,ke.registerCollapse=Ec,ke.registerCollapseExpandBlock=Ic,ke.registerComment=Rc,ke.registerDefaultOptions=Mc,ke.registerDelete=Ac,ke.registerDeleteAll=Sc,ke.registerDisable=Oc,ke.registerDuplicate=Cc,ke.registerExpand=xc,ke.registerHelp=Lc,ke.registerInline=$c,ke.registerRedo=gc,ke.registerUndo=vc;var Lf=class{constructor(t,r){this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.draggingBlock_=t,this.draggedConnectionManager_=new ti(this.draggingBlock_),this.workspace_=r,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=Kg(t)}dispose(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()}startDrag(t,r){oe()||Pt(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),ht(),this.workspace_.setResizesEnabled(!1),In(),this.shouldDisconnect_(r)&&this.disconnectBlock_(r,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()}shouldDisconnect_(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(t,r){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(r),t=Et.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),ku(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()}fireDragStartEvent_(){const t=new(Ot(_s))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));It(t)}drag(t,r){r=this.pixelsToWorkspaceUnits_(r);var T=Et.sum(this.startXY_,r);this.draggingBlock_.moveDuringDrag(T),this.dragIcons_(r),T=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(r,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock,t!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==T&&(T&&T.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)}endDrag(t,r){this.drag(t,r),this.dragIconData_=[],this.fireDragEndEvent_(),ut(),In(),t=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)?r=this.startXY_:(r=this.getNewLocationAfterDrag_(r),t=r.delta,r=r.newLocation),this.draggingBlock_.moveOffDragSurface(r),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),t?this.updateBlockAfterMove_(t):Xr(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),Pt(!1)}getNewLocationAfterDrag_(t){t=this.pixelsToWorkspaceUnits_(t);const r=Et.sum(this.startXY_,t);return{delta:t,newLocation:r}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),Es.length=0,!0):!1}updateBlockAfterMove_(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()}fireDragEndEvent_(){const t=new(Ot(_s))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));It(t)}updateToolboxStyle_(t){const r=this.workspace_.getToolbox();if(r){const T=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&typeof r.removeStyle=="function"?r.removeStyle(T):t||typeof r.addStyle!="function"||r.addStyle(T)}}fireMoveEvent_(){const t=new(Ot(Fe))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),It(t)}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(t){return t=new Et(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t}dragIcons_(t){for(let r=0;r<this.dragIconData_.length;r++){const T=this.dragIconData_[r];T.icon.setIconLocation(Et.sum(T.location,t))}}getInsertionMarkers(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]}};Ut(gt.BLOCK_DRAGGER,Wi,Lf);var Bm="9.2.1",Fm=c.Align$$module$build$src$core$input.LEFT,Gm=c.Align$$module$build$src$core$input.CENTRE,Um=c.Align$$module$build$src$core$input.RIGHT,km=yt.INPUT_VALUE,Hm=yt.OUTPUT_VALUE,Vm=yt.NEXT_STATEMENT,Wm=yt.PREVIOUS_STATEMENT,Xm=kt.DUMMY,Ym=Ft.TOP,zm=Ft.BOTTOM,Km=Ft.LEFT,jm=Ft.RIGHT;Zi.prototype.newBlock=function(t,r){return new an(this,t,r)},Ci.prototype.newBlock=function(t,r){return new li(this,t,r)},Ci.newTrashcan=function(t){return new Od(t)},Ne.prototype.showContextMenu=function(t){if(!this.workspace.options.readOnly){var r=[];this.isDeletable()&&this.isMovable()&&(r.push(zu(this)),r.push(Yu(this))),Hr(t,r,this.RTL)}},c.Mutator$$module$build$src$core$mutator.prototype.newWorkspaceSvg=function(t){return new Ci(t)},hi.prototype.populateProcedures=function(t){t=La(t),t=t[0].concat(t[1]);for(let r=0;r<t.length;r++)this.getName(t[r][0],hi.NameType.PROCEDURE)};var _m=yt,ot={};return ot.ALIGN_CENTRE=Gm,ot.ALIGN_LEFT=Fm,ot.ALIGN_RIGHT=Um,ot.ASTNode=dt,ot.BasicCursor=rr,ot.Block=an,ot.BlockDragSurfaceSvg=Sf,ot.BlockDragger=Lf,ot.BlockSvg=li,ot.Blocks=Xe,ot.Bubble=Gt,ot.BubbleDragger=Dd,ot.COLLAPSED_FIELD_NAME=qn,ot.COLLAPSED_INPUT_NAME=Qn,ot.COLLAPSE_CHARS=yd,ot.CodeGenerator=c.CodeGenerator$$module$build$src$core$generator,ot.CollapsibleToolboxCategory=cn,ot.Comment=xd,ot.ComponentManager=Oe,ot.Connection=Jt,ot.ConnectionChecker=Wd,ot.ConnectionDB=dn,ot.ConnectionType=yt,ot.ContextMenu=c.module$build$src$core$contextmenu,ot.ContextMenuItems=ke,ot.ContextMenuRegistry=Zt,ot.Css=al,ot.Cursor=Ml,ot.DELETE_VARIABLE_ID=Ll,ot.DRAG_STACK=Sd,ot.DUMMY_INPUT=Xm,ot.DeleteArea=Co,ot.DragTarget=Id,ot.DropDownDiv=fe,ot.Events=c.module$build$src$core$events$events,ot.Extensions=c.module$build$src$core$extensions,ot.Field=Wt,ot.FieldAngle=Vt,ot.FieldCheckbox=c.FieldCheckbox$$module$build$src$core$field_checkbox,ot.FieldColour=ei,ot.FieldDropdown=xi,ot.FieldImage=c.FieldImage$$module$build$src$core$field_image,ot.FieldLabel=c.FieldLabel$$module$build$src$core$field_label,ot.FieldLabelSerializable=If,ot.FieldMultilineInput=ah,ot.FieldNumber=oh,ot.FieldTextInput=c.FieldTextInput$$module$build$src$core$field_textinput,ot.FieldVariable=mr,ot.Flyout=Mo,ot.FlyoutButton=vn,ot.FlyoutMetricsManager=Rf,ot.Generator=c.CodeGenerator$$module$build$src$core$generator,ot.Gesture=bi,ot.Grid=Hl,ot.HorizontalFlyout=$f,ot.INPUT_VALUE=km,ot.Icon=Eo,ot.Input=on,ot.InsertionMarkerManager=ti,ot.Marker=Cd,ot.MarkerManager=Hn,ot.Menu=pl,ot.MenuItem=vl,ot.MetricsManager=nh,ot.Msg=bt,ot.Mutator=c.Mutator$$module$build$src$core$mutator,ot.NEXT_STATEMENT=Vm,ot.Names=hi,ot.OPPOSITE_TYPE=Ls,ot.OUTPUT_VALUE=Hm,ot.Options=yi,ot.PREVIOUS_STATEMENT=Wm,ot.PROCEDURE_CATEGORY_NAME=Io,ot.Procedures=c.module$build$src$core$procedures,ot.RENAME_VARIABLE_ID=Al,ot.RenderedConnection=Ge,ot.Scrollbar=ue,ot.ScrollbarPair=sh,ot.ShortcutItems=wi,ot.ShortcutRegistry=te,ot.TOOLBOX_AT_BOTTOM=zm,ot.TOOLBOX_AT_LEFT=Km,ot.TOOLBOX_AT_RIGHT=jm,ot.TOOLBOX_AT_TOP=Ym,ot.TabNavigateCursor=Rd,ot.Theme=As,ot.ThemeManager=Vd,ot.Themes=Bl,ot.Toolbox=Pd,ot.ToolboxCategory=Si,ot.ToolboxItem=wl,ot.ToolboxSeparator=or,ot.Tooltip=pe,ot.Touch=Ze,ot.TouchGesture=bi,ot.Trashcan=Od,ot.VARIABLE_CATEGORY_NAME=co,ot.VARIABLE_DYNAMIC_CATEGORY_NAME=Zl,ot.VERSION=Bm,ot.VariableMap=th,ot.VariableModel=kn,ot.Variables=c.module$build$src$core$variables,ot.VariablesDynamic=us,ot.VerticalFlyout=rh,ot.Warning=$d,ot.WidgetDiv=Ei,ot.Workspace=Zi,ot.WorkspaceAudio=Xd,ot.WorkspaceComment=Di,ot.WorkspaceCommentSvg=Ne,ot.WorkspaceDragSurfaceSvg=yf,ot.WorkspaceDragger=bd,ot.WorkspaceSvg=Ci,ot.Xml=c.module$build$src$core$xml,ot.ZoomControls=Yd,ot.bindEventWithChecks_=sm,ot.bindEvent_=em,ot.blockAnimations=er,ot.blockRendering=Qt,ot.browserEvents=Vi,ot.bumpObjects=Lo,ot.clipboard=ir,ot.common=c.module$build$src$core$common,ot.config=c.config$$module$build$src$core$config,ot.connectionTypes=_m,ot.constants=Rl,ot.copy=Jg,ot.defineBlocksWithJsonArray=j,ot.dialog=ze,ot.duplicate=Qg,ot.fieldRegistry=zn,ot.geras=Fi,ot.getMainWorkspace=O,ot.getSelected=L,ot.hideChaff=jg,ot.hueToHex=tm,ot.inject=Gg,ot.inputTypes=kt,ot.isNumber=qg,ot.minimalist=gr,ot.paste=Zg,ot.procedures=c.module$build$src$core$procedures,ot.registry=gi,ot.resizeSvgContents=_g,ot.serialization=wm,ot.setLocale=el,ot.setParentContainer=B,ot.svgResize=U,ot.thrasos=ih,ot.uiPosition=Ms,ot.unbindEvent_=im,ot.utils=Xt,ot.zelos=Ri,c.module$build$src$core$contextmenu,c.module$build$src$core$events$events,c.module$build$src$core$msg,c.module$build$src$core$common,Object.defineProperties(ot,{alert:{set:function(t){Ce.warn("Blockly.alert","December 2021","December 2022"),ze.setAlert(t)},get:function(){return Ce.warn("Blockly.alert","December 2021","December 2022","Blockly.dialog.alert()"),ze.alert}},confirm:{set:function(t){Ce.warn("Blockly.confirm","December 2021","December 2022"),ze.setConfirm(t)},get:function(){return Ce.warn("Blockly.confirm","December 2021","December 2022","Blockly.dialog.confirm()"),ze.confirm}},mainWorkspace:{set:function(t){Ce.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),c.module$build$src$core$common.setMainWorkspace(t)},get:function(){return Ce.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),c.module$build$src$core$common.getMainWorkspace()}},prompt:{set:function(t){Ce.warn("Blockly.prompt","December 2021","December 2022"),ze.setPrompt(t)},get:function(){return Ce.warn("Blockly.prompt","December 2021","December 2022","Blockly.dialog.prompt()"),ze.prompt}},selected:{get:function(){return Ce.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),c.module$build$src$core$common.getSelected()},set:function(t){Ce.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),c.module$build$src$core$common.setSelected(t)}},HSV_SATURATION:{get:function(){return we.getHsvSaturation()},set:function(t){we.setHsvSaturation(t)}},HSV_VALUE:{get:function(){return we.getHsvValue()},set:function(t){we.setHsvValue(t)}}}),Object.defineProperties(c.module$build$src$core$contextmenu,{currentBlock:{get:function(){return Ce.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.getCurrentBlock()"),c.module$build$src$core$contextmenu.getCurrentBlock()},set:function(t){Ce.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.setCurrentBlock(block)"),c.module$build$src$core$contextmenu.setCurrentBlock(t)}}}),Object.defineProperties(c.module$build$src$core$events$events,{recordUndo:{get:function(){return Ce.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.getRecordUndo()"),wt.getRecordUndo()},set:function(t){Ce.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.setRecordUndo()"),wt.setRecordUndo(t)}}}),Object.defineProperties(pe,{visible:{get:function(){return Ce.warn("Blockly.Tooltip.visible","September 2021","September 2022","Blockly.Tooltip.isVisible()"),pe.isVisible()}},DIV:{get:function(){return Ce.warn("Blockly.Tooltip.DIV","September 2021","September 2022","Blockly.Tooltip.getDiv()"),pe.getDiv()}}}),Object.defineProperties(Ei,{DIV:{get:function(){return Ce.warn("Blockly.WidgetDiv.DIV","September 2021","September 2022","Blockly.WidgetDiv.getDiv()"),Ei.getDiv()}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:c.module$build$src$core$msg}),ot.__namespace__=c,ot})})(Vo);(function(J,Q){(function(c,R){J.exports=R(Vo.exports)})(je,function(c){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return c})})(zf);(function(J,Q){(function(c,R){J.exports=R(zf.exports)})(je,function(c){return c})})(Bh);var Kf={exports:{}};(function(J,Q){(function(c,R){J.exports=R()})(je,function(){var c=c||{Msg:Object.create(null)};return c.Msg.ADD_COMMENT="Add Comment",c.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",c.Msg.CHANGE_VALUE_TITLE="Change value:",c.Msg.CLEAN_UP="Clean up Blocks",c.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",c.Msg.COLLAPSE_ALL="Collapse Blocks",c.Msg.COLLAPSE_BLOCK="Collapse Block",c.Msg.COLOUR_BLEND_COLOUR1="colour 1",c.Msg.COLOUR_BLEND_COLOUR2="colour 2",c.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",c.Msg.COLOUR_BLEND_RATIO="ratio",c.Msg.COLOUR_BLEND_TITLE="blend",c.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",c.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",c.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",c.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",c.Msg.COLOUR_RANDOM_TITLE="random colour",c.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",c.Msg.COLOUR_RGB_BLUE="blue",c.Msg.COLOUR_RGB_GREEN="green",c.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",c.Msg.COLOUR_RGB_RED="red",c.Msg.COLOUR_RGB_TITLE="colour with",c.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",c.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",c.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",c.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",c.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",c.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",c.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",c.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",c.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",c.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",c.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",c.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",c.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",c.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",c.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",c.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",c.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",c.Msg.CONTROLS_IF_MSG_ELSE="else",c.Msg.CONTROLS_IF_MSG_ELSEIF="else if",c.Msg.CONTROLS_IF_MSG_IF="if",c.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",c.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",c.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",c.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",c.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",c.Msg.CONTROLS_REPEAT_INPUT_DO="do",c.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",c.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",c.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",c.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",c.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",c.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",c.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",c.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",c.Msg.DELETE_BLOCK="Delete Block",c.Msg.DELETE_VARIABLE="Delete the '%1' variable",c.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",c.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",c.Msg.DIALOG_CANCEL="Cancel",c.Msg.DIALOG_OK="OK",c.Msg.DISABLE_BLOCK="Disable Block",c.Msg.DUPLICATE_BLOCK="Duplicate",c.Msg.DUPLICATE_COMMENT="Duplicate Comment",c.Msg.ENABLE_BLOCK="Enable Block",c.Msg.EXPAND_ALL="Expand Blocks",c.Msg.EXPAND_BLOCK="Expand Block",c.Msg.EXTERNAL_INPUTS="External Inputs",c.Msg.HELP="Help",c.Msg.INLINE_INPUTS="Inline Inputs",c.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",c.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",c.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",c.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",c.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",c.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",c.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",c.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",c.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",c.Msg.LISTS_GET_INDEX_FIRST="first",c.Msg.LISTS_GET_INDEX_FROM_END="# from end",c.Msg.LISTS_GET_INDEX_FROM_START="#",c.Msg.LISTS_GET_INDEX_GET="get",c.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",c.Msg.LISTS_GET_INDEX_LAST="last",c.Msg.LISTS_GET_INDEX_RANDOM="random",c.Msg.LISTS_GET_INDEX_REMOVE="remove",c.Msg.LISTS_GET_INDEX_TAIL="",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",c.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",c.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",c.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",c.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",c.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",c.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",c.Msg.LISTS_GET_SUBLIST_END_LAST="to last",c.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",c.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",c.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",c.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",c.Msg.LISTS_GET_SUBLIST_TAIL="",c.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",c.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",c.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",c.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",c.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",c.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",c.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",c.Msg.LISTS_INLIST="in list",c.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",c.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",c.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",c.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",c.Msg.LISTS_LENGTH_TITLE="length of %1",c.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",c.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",c.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",c.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",c.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",c.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",c.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",c.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",c.Msg.LISTS_SET_INDEX_INPUT_TO="as",c.Msg.LISTS_SET_INDEX_INSERT="insert at",c.Msg.LISTS_SET_INDEX_SET="set",c.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",c.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",c.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",c.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",c.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",c.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",c.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",c.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",c.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",c.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",c.Msg.LISTS_SORT_ORDER_DESCENDING="descending",c.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",c.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",c.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",c.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",c.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",c.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",c.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",c.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",c.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",c.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",c.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",c.Msg.LOGIC_BOOLEAN_FALSE="false",c.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",c.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",c.Msg.LOGIC_BOOLEAN_TRUE="true",c.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",c.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",c.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",c.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",c.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",c.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",c.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",c.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",c.Msg.LOGIC_NEGATE_TITLE="not %1",c.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",c.Msg.LOGIC_NULL="null",c.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",c.Msg.LOGIC_NULL_TOOLTIP="Returns null.",c.Msg.LOGIC_OPERATION_AND="and",c.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",c.Msg.LOGIC_OPERATION_OR="or",c.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",c.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",c.Msg.LOGIC_TERNARY_CONDITION="test",c.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",c.Msg.LOGIC_TERNARY_IF_FALSE="if false",c.Msg.LOGIC_TERNARY_IF_TRUE="if true",c.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",c.Msg.MATH_ADDITION_SYMBOL="+",c.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",c.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",c.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",c.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",c.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",c.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",c.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",c.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",c.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",c.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",c.Msg.MATH_CHANGE_TITLE="change %1 by %2",c.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",c.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",c.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03C0 (3.141\u2026), e (2.718\u2026), \u03C6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xBD) (0.707\u2026), or \u221E (infinity).",c.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",c.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",c.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",c.Msg.MATH_DIVISION_SYMBOL="\xF7",c.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",c.Msg.MATH_IS_EVEN="is even",c.Msg.MATH_IS_NEGATIVE="is negative",c.Msg.MATH_IS_ODD="is odd",c.Msg.MATH_IS_POSITIVE="is positive",c.Msg.MATH_IS_PRIME="is prime",c.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",c.Msg.MATH_IS_WHOLE="is whole",c.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",c.Msg.MATH_MODULO_TITLE="remainder of %1 \xF7 %2",c.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",c.Msg.MATH_MULTIPLICATION_SYMBOL="\xD7",c.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",c.Msg.MATH_NUMBER_TOOLTIP="A number.",c.Msg.MATH_ONLIST_HELPURL="",c.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",c.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",c.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",c.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",c.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",c.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",c.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",c.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",c.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",c.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",c.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",c.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",c.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",c.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",c.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",c.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",c.Msg.MATH_POWER_SYMBOL="^",c.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",c.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",c.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",c.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",c.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",c.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",c.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",c.Msg.MATH_ROUND_OPERATOR_ROUND="round",c.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",c.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",c.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",c.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",c.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",c.Msg.MATH_SINGLE_OP_ROOT="square root",c.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",c.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",c.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",c.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",c.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",c.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",c.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",c.Msg.MATH_SUBTRACTION_SYMBOL="-",c.Msg.MATH_TRIG_ACOS="acos",c.Msg.MATH_TRIG_ASIN="asin",c.Msg.MATH_TRIG_ATAN="atan",c.Msg.MATH_TRIG_COS="cos",c.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",c.Msg.MATH_TRIG_SIN="sin",c.Msg.MATH_TRIG_TAN="tan",c.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",c.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",c.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",c.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",c.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",c.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",c.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",c.Msg.NEW_NUMBER_VARIABLE="Create number variable...",c.Msg.NEW_STRING_VARIABLE="Create string variable...",c.Msg.NEW_VARIABLE="Create variable...",c.Msg.NEW_VARIABLE_TITLE="New variable name:",c.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",c.Msg.ORDINAL_NUMBER_SUFFIX="",c.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",c.Msg.PROCEDURES_BEFORE_PARAMS="with:",c.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",c.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",c.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",c.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",c.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",c.Msg.PROCEDURES_CREATE_DO="Create '%1'",c.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",c.Msg.PROCEDURES_DEFNORETURN_DO="",c.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",c.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",c.Msg.PROCEDURES_DEFNORETURN_TITLE="to",c.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",c.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",c.Msg.PROCEDURES_DEFRETURN_RETURN="return",c.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",c.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",c.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",c.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",c.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",c.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",c.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",c.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",c.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",c.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",c.Msg.REDO="Redo",c.Msg.REMOVE_COMMENT="Remove Comment",c.Msg.RENAME_VARIABLE="Rename variable...",c.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",c.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",c.Msg.TEXT_APPEND_TITLE="to %1 append text %2",c.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",c.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",c.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",c.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",c.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",c.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",c.Msg.TEXT_CHARAT_FIRST="get first letter",c.Msg.TEXT_CHARAT_FROM_END="get letter # from end",c.Msg.TEXT_CHARAT_FROM_START="get letter #",c.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",c.Msg.TEXT_CHARAT_LAST="get last letter",c.Msg.TEXT_CHARAT_RANDOM="get random letter",c.Msg.TEXT_CHARAT_TAIL="",c.Msg.TEXT_CHARAT_TITLE="in text %1 %2",c.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",c.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",c.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",c.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",c.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",c.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",c.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",c.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",c.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",c.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",c.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",c.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",c.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",c.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",c.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",c.Msg.TEXT_GET_SUBSTRING_TAIL="",c.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",c.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",c.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",c.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",c.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",c.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",c.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",c.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",c.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",c.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",c.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",c.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",c.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",c.Msg.TEXT_LENGTH_TITLE="length of %1",c.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",c.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",c.Msg.TEXT_PRINT_TITLE="print %1",c.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",c.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",c.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",c.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",c.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",c.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",c.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",c.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",c.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",c.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",c.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",c.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",c.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",c.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",c.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",c.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",c.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",c.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",c.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",c.Msg.TODAY="Today",c.Msg.UNDO="Undo",c.Msg.UNNAMED_KEY="unnamed",c.Msg.VARIABLES_DEFAULT_NAME="item",c.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",c.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",c.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",c.Msg.VARIABLES_SET="set %1 to %2",c.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",c.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",c.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",c.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",c.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",c.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",c.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",c.Msg.CONTROLS_FOREACH_INPUT_DO=c.Msg.CONTROLS_REPEAT_INPUT_DO,c.Msg.CONTROLS_FOR_INPUT_DO=c.Msg.CONTROLS_REPEAT_INPUT_DO,c.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=c.Msg.CONTROLS_IF_MSG_ELSEIF,c.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=c.Msg.CONTROLS_IF_MSG_ELSE,c.Msg.CONTROLS_IF_IF_TITLE_IF=c.Msg.CONTROLS_IF_MSG_IF,c.Msg.CONTROLS_IF_MSG_THEN=c.Msg.CONTROLS_REPEAT_INPUT_DO,c.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=c.Msg.CONTROLS_REPEAT_INPUT_DO,c.Msg.LISTS_CREATE_WITH_ITEM_TITLE=c.Msg.VARIABLES_DEFAULT_NAME,c.Msg.LISTS_GET_INDEX_HELPURL=c.Msg.LISTS_INDEX_OF_HELPURL,c.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=c.Msg.LISTS_INLIST,c.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=c.Msg.LISTS_INLIST,c.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=c.Msg.LISTS_INLIST,c.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=c.Msg.LISTS_INLIST,c.Msg.MATH_CHANGE_TITLE_ITEM=c.Msg.VARIABLES_DEFAULT_NAME,c.Msg.PROCEDURES_DEFRETURN_COMMENT=c.Msg.PROCEDURES_DEFNORETURN_COMMENT,c.Msg.PROCEDURES_DEFRETURN_DO=c.Msg.PROCEDURES_DEFNORETURN_DO,c.Msg.PROCEDURES_DEFRETURN_PROCEDURE=c.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,c.Msg.PROCEDURES_DEFRETURN_TITLE=c.Msg.PROCEDURES_DEFNORETURN_TITLE,c.Msg.TEXT_APPEND_VARIABLE=c.Msg.VARIABLES_DEFAULT_NAME,c.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=c.Msg.VARIABLES_DEFAULT_NAME,c.Msg.MATH_HUE="230",c.Msg.LOOPS_HUE="120",c.Msg.LISTS_HUE="260",c.Msg.LOGIC_HUE="210",c.Msg.VARIABLES_HUE="330",c.Msg.TEXTS_HUE="160",c.Msg.PROCEDURES_HUE="290",c.Msg.COLOUR_HUE="20",c.Msg.VARIABLES_DYNAMIC_HUE="310",c.Msg})})(Kf);var jf={exports:{}},_f={exports:{}};(function(J,Q){(function(c,R){J.exports=R(Vo.exports)})(je,function(c){var R=c.__namespace__,e={};R.module$build$src$core$contextmenu,R.module$build$src$core$extensions,R.module$build$src$core$variables,R.module$build$src$core$utils$xml;var o=R.module$build$src$core$msg.Msg,g=R.module$build$src$core$common.createBlockDefinitionsFromJsonArray,l=R.module$build$src$core$common.defineBlocks;e.blocks=g([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var h={customContextMenu:function(W){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(Z={text:o.RENAME_VARIABLE,enabled:!0,callback:i(this)},lt=this.getField("VAR").getText(),lt={text:o.DELETE_VARIABLE.replace("%1",lt),enabled:!0,callback:s(this)},W.unshift(Z),W.unshift(lt));else{var Z=this.getFieldValue("VAR"),it=this.workspace.getVariableById(Z).type;if(this.type==="variables_get_dynamic"){Z="variables_set_dynamic";var at=o.VARIABLES_GET_CREATE_SET}else Z="variables_get_dynamic",at=o.VARIABLES_SET_CREATE_GET;var lt={enabled:0<this.workspace.remainingCapacity()};const Kt=this.getField("VAR").getText();lt.text=at.replace("%1",Kt),at=R.module$build$src$core$utils$xml.createElement("field"),at.setAttribute("name","VAR"),at.setAttribute("variabletype",it),at.appendChild(R.module$build$src$core$utils$xml.createTextNode(Kt)),it=R.module$build$src$core$utils$xml.createElement("block"),it.setAttribute("type",Z),it.appendChild(at),lt.callback=R.module$build$src$core$contextmenu.callbackFactory(this,it),W.push(lt)}},onchange:function(W){W=this.getFieldValue("VAR"),W=R.module$build$src$core$variables.getVariable(this.workspace,W),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(W.type):this.getInput("VALUE").connection.setCheck(W.type)}},i=function(W){return function(){const Z=W.workspace,it=W.getField("VAR").getVariable();R.module$build$src$core$variables.renameVariable(Z,it)}},s=function(W){return function(){const Z=W.workspace,it=W.getField("VAR").getVariable();Z.deleteVariableById(it.getId()),Z.refreshToolboxSelection()}};R.module$build$src$core$extensions.registerMixin("contextMenu_variableDynamicSetterGetter",h),l(e.blocks);var n={};R.module$build$src$core$contextmenu,R.module$build$src$core$extensions,R.module$build$src$core$variables,R.module$build$src$core$utils$xml;var d=R.module$build$src$core$msg.Msg,a=R.module$build$src$core$common.createBlockDefinitionsFromJsonArray,u=R.module$build$src$core$common.defineBlocks;n.blocks=a([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var f={customContextMenu:function(W){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(Z={text:d.RENAME_VARIABLE,enabled:!0,callback:p(this)},at=this.getField("VAR").getText(),at={text:d.DELETE_VARIABLE.replace("%1",at),enabled:!0,callback:v(this)},W.unshift(Z),W.unshift(at));else{if(this.type==="variables_get")var Z="variables_set",it=d.VARIABLES_GET_CREATE_SET;else Z="variables_get",it=d.VARIABLES_SET_CREATE_GET;var at={enabled:0<this.workspace.remainingCapacity()},lt=this.getField("VAR").getText();at.text=it.replace("%1",lt),it=R.module$build$src$core$utils$xml.createElement("field"),it.setAttribute("name","VAR"),it.appendChild(R.module$build$src$core$utils$xml.createTextNode(lt)),lt=R.module$build$src$core$utils$xml.createElement("block"),lt.setAttribute("type",Z),lt.appendChild(it),at.callback=R.module$build$src$core$contextmenu.callbackFactory(this,lt),W.push(at)}}},p=function(W){return function(){const Z=W.workspace,it=W.getField("VAR").getVariable();R.module$build$src$core$variables.renameVariable(Z,it)}},v=function(W){return function(){const Z=W.workspace,it=W.getField("VAR").getVariable();Z.deleteVariableById(it.getId()),Z.refreshToolboxSelection()}};R.module$build$src$core$extensions.registerMixin("contextMenu_variableSetterGetter",f),u(n.blocks);var m={};R.module$build$src$core$extensions;var E=R.module$build$src$core$msg.Msg;R.module$build$src$core$utils$xml,R.Align$$module$build$src$core$input,R.module$build$src$core$connection_type.ConnectionType;var x=R.module$build$src$core$field_dropdown.FieldDropdown;R.FieldImage$$module$build$src$core$field_image,R.FieldTextInput$$module$build$src$core$field_textinput,R.Mutator$$module$build$src$core$mutator;var y=R.module$build$src$core$common.createBlockDefinitionsFromJsonArray,S=R.module$build$src$core$common.defineBlocks;m.blocks=y([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xB6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),m.blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[E.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[E.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[E.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[E.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[E.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[E.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(E.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(E.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),E.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(E.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(E.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation");var Z=this.getInput("AT1").type===R.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return W.setAttribute("at1",Z),Z=this.getInput("AT2").type===R.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,W.setAttribute("at2",Z),W},domToMutation:function(W){const Z=W.getAttribute("at1")==="true";W=W.getAttribute("at2")==="true",this.updateAt_(1,Z),this.updateAt_(2,W)},updateAt_:function(W,Z){this.removeInput("AT"+W),this.removeInput("ORDINAL"+W,!0),Z?(this.appendValueInput("AT"+W).setCheck("Number"),E.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+W).appendField(E.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+W),W===2&&E.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(E.TEXT_GET_SUBSTRING_TAIL));const it=new x(this["WHERE_OPTIONS_"+W],function(at){const lt=at==="FROM_START"||at==="FROM_END";if(lt!==Z){const Kt=this.getSourceBlock();return Kt.updateAt_(W,lt),Kt.setFieldValue(at,"WHERE"+W),null}});this.getInput("AT"+W).appendField(it,"WHERE"+W),W===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},m.blocks.text_changeCase={init:function(){const W=[[E.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[E.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[E.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(E.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new x(W),"CASE"),this.setOutput(!0,"String"),this.setTooltip(E.TEXT_CHANGECASE_TOOLTIP)}},m.blocks.text_trim={init:function(){const W=[[E.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[E.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[E.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(E.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new x(W),"MODE"),this.setOutput(!0,"String"),this.setTooltip(E.TEXT_TRIM_TOOLTIP)}},m.blocks.text_print={init:function(){this.jsonInit({message0:E.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:E.TEXT_PRINT_TOOLTIP,helpUrl:E.TEXT_PRINT_HELPURL})}};var C={updateType_:function(W){this.outputConnection.setCheck(W==="NUMBER"?"Number":"String")},mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation");return W.setAttribute("type",this.getFieldValue("TYPE")),W},domToMutation:function(W){this.updateType_(W.getAttribute("type"))}};m.blocks.text_prompt_ext=Object.assign({},C,{init:function(){var W=[[E.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[E.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(E.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");const Z=this;W=new x(W,function(it){Z.updateType_(it)}),this.appendValueInput("TEXT").appendField(W,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return Z.getFieldValue("TYPE")==="TEXT"?E.TEXT_PROMPT_TOOLTIP_TEXT:E.TEXT_PROMPT_TOOLTIP_NUMBER})}}),m.blocks.text_prompt=Object.assign({},C,{init:function(){this.mixin(I);var W=[[E.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[E.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];const Z=this;this.setHelpUrl(E.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),W=new x(W,function(it){Z.updateType_(it)}),this.appendDummyInput().appendField(W,"TYPE").appendField(this.newQuote_(!0)).appendField(new R.FieldTextInput$$module$build$src$core$field_textinput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return Z.getFieldValue("TYPE")==="TEXT"?E.TEXT_PROMPT_TOOLTIP_TEXT:E.TEXT_PROMPT_TOOLTIP_NUMBER})}}),m.blocks.text_count={init:function(){this.jsonInit({message0:E.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:E.TEXT_COUNT_TOOLTIP,helpUrl:E.TEXT_COUNT_HELPURL})}},m.blocks.text_replace={init:function(){this.jsonInit({message0:E.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:E.TEXT_REPLACE_TOOLTIP,helpUrl:E.TEXT_REPLACE_HELPURL})}},m.blocks.text_reverse={init:function(){this.jsonInit({message0:E.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:E.TEXT_REVERSE_TOOLTIP,helpUrl:E.TEXT_REVERSE_HELPURL})}};var I={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(W){for(let Z=0,it;it=this.inputList[Z];Z++)for(let at=0,lt;lt=it.fieldRow[at];at++)if(W===lt.name){it.insertFieldAt(at,this.newQuote_(!0)),it.insertFieldAt(at+2,this.newQuote_(!1));return}console.warn('field named "'+W+'" not found in '+this.toDevString())},newQuote_:function(W){return W=this.RTL?!W:W,new R.FieldImage$$module$build$src$core$field_image(W?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,W?"\u201C":"\u201D")}},O=function(){this.mixin(I),this.quoteField_("TEXT")},M={mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation");return W.setAttribute("items",this.itemCount_),W},domToMutation:function(W){this.itemCount_=parseInt(W.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(W){this.itemCount_=W.itemCount,this.updateShape_()},decompose:function(W){const Z=W.newBlock("text_create_join_container");Z.initSvg();let it=Z.getInput("STACK").connection;for(let at=0;at<this.itemCount_;at++){const lt=W.newBlock("text_create_join_item");lt.initSvg(),it.connect(lt.previousConnection),it=lt.nextConnection}return Z},compose:function(W){var Z=W.getInputTargetBlock("STACK");for(W=[];Z;)Z.isInsertionMarker()||W.push(Z.valueConnection_),Z=Z.getNextBlock();for(Z=0;Z<this.itemCount_;Z++){const it=this.getInput("ADD"+Z).connection.targetConnection;it&&W.indexOf(it)===-1&&it.disconnect()}for(this.itemCount_=W.length,this.updateShape_(),Z=0;Z<this.itemCount_;Z++)R.Mutator$$module$build$src$core$mutator.reconnect(W[Z],this,"ADD"+Z)},saveConnections:function(W){W=W.getInputTargetBlock("STACK");let Z=0;for(;W;){if(W.isInsertionMarker()){W=W.getNextBlock();continue}const it=this.getInput("ADD"+Z);W.valueConnection_=it&&it.connection.targetConnection,W=W.getNextBlock(),Z++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var W=0;W<this.itemCount_;W++)if(!this.getInput("ADD"+W)){const Z=this.appendValueInput("ADD"+W).setAlign(R.Align$$module$build$src$core$input.RIGHT);W===0&&Z.appendField(E.TEXT_JOIN_TITLE_CREATEWITH)}for(W=this.itemCount_;this.getInput("ADD"+W);W++)this.removeInput("ADD"+W)}},L=function(){this.mixin(I),this.itemCount_=2,this.updateShape_(),this.setMutator(new R.Mutator$$module$build$src$core$mutator(["text_create_join_item"],this))};R.module$build$src$core$extensions.register("text_append_tooltip",R.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var P=function(){const W=this;this.setTooltip(function(){return E.TEXT_INDEXOF_TOOLTIP.replace("%1",W.workspace.options.oneBasedIndex?"0":"-1")})},b={mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation");return W.setAttribute("at",!!this.isAt_),W},domToMutation:function(W){W=W.getAttribute("at")!=="false",this.updateAt_(W)},updateAt_:function(W){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),W&&(this.appendValueInput("AT").setCheck("Number"),E.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(E.ORDINAL_NUMBER_SUFFIX)),E.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(E.TEXT_CHARAT_TAIL)),this.isAt_=W}},B=function(){this.getField("WHERE").setValidator(function(Z){Z=Z==="FROM_START"||Z==="FROM_END",Z!==this.isAt_&&this.getSourceBlock().updateAt_(Z)}),this.updateAt_(!0);const W=this;this.setTooltip(function(){var Z=W.getFieldValue("WHERE");let it=E.TEXT_CHARAT_TOOLTIP;return(Z==="FROM_START"||Z==="FROM_END")&&(Z=Z==="FROM_START"?E.LISTS_INDEX_FROM_START_TOOLTIP:E.LISTS_INDEX_FROM_END_TOOLTIP)&&(it+="  "+Z.replace("%1",W.workspace.options.oneBasedIndex?"#1":"#0")),it})};R.module$build$src$core$extensions.register("text_indexOf_tooltip",P),R.module$build$src$core$extensions.register("text_quotes",O),R.module$build$src$core$extensions.registerMutator("text_join_mutator",M,L),R.module$build$src$core$extensions.registerMutator("text_charAt_mutator",b,B),S(m.blocks);var U={};R.module$build$src$core$contextmenu,R.module$build$src$core$events$events,R.module$build$src$core$procedures,R.module$build$src$core$variables,R.module$build$src$core$xml,R.module$build$src$core$utils$xml,R.Align$$module$build$src$core$input,R.config$$module$build$src$core$config,R.FieldCheckbox$$module$build$src$core$field_checkbox,R.FieldLabel$$module$build$src$core$field_label,R.FieldTextInput$$module$build$src$core$field_textinput;var H=R.module$build$src$core$msg.Msg;R.Mutator$$module$build$src$core$mutator,R.module$build$src$core$names.Names;var Y=R.module$build$src$core$common.defineBlocks;U.blocks={};var j={setStatements_:function(W){this.hasStatements_!==W&&(W?(this.appendStatementInput("STACK").appendField(H.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=W)},updateParams_:function(){let W="";this.arguments_.length&&(W=H.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),R.module$build$src$core$events$events.disable();try{this.setFieldValue(W,"PARAMS")}finally{R.module$build$src$core$events$events.enable()}},mutationToDom:function(W){const Z=R.module$build$src$core$utils$xml.createElement("mutation");W&&Z.setAttribute("name",this.getFieldValue("NAME"));for(let it=0;it<this.argumentVarModels_.length;it++){const at=R.module$build$src$core$utils$xml.createElement("arg"),lt=this.argumentVarModels_[it];at.setAttribute("name",lt.name),at.setAttribute("varid",lt.getId()),W&&this.paramIds_&&at.setAttribute("paramId",this.paramIds_[it]),Z.appendChild(at)}return this.hasStatements_||Z.setAttribute("statements","false"),Z},domToMutation:function(W){this.arguments_=[],this.argumentVarModels_=[];for(let it=0,at;at=W.childNodes[it];it++)if(at.nodeName.toLowerCase()==="arg"){const lt=at.getAttribute("name");var Z=at.getAttribute("varid")||at.getAttribute("varId");this.arguments_.push(lt),Z=R.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,Z,lt,""),Z!==null?this.argumentVarModels_.push(Z):console.log(`Failed to create a variable named "${lt}", ignoring.`)}this.updateParams_(),R.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(W.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const W=Object.create(null);if(this.argumentVarModels_.length){W.params=[];for(let Z=0;Z<this.argumentVarModels_.length;Z++)W.params.push({name:this.argumentVarModels_[Z].name,id:this.argumentVarModels_[Z].getId()})}return this.hasStatements_||(W.hasStatements=!1),W},loadExtraState:function(W){if(this.arguments_=[],this.argumentVarModels_=[],W.params)for(let it=0;it<W.params.length;it++){var Z=W.params[it];Z=R.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,Z.id,Z.name,""),this.arguments_.push(Z.name),this.argumentVarModels_.push(Z)}this.updateParams_(),R.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(W.hasStatements!==!1)},decompose:function(W){const Z=R.module$build$src$core$utils$xml.createElement("block");Z.setAttribute("type","procedures_mutatorcontainer");var it=R.module$build$src$core$utils$xml.createElement("statement");it.setAttribute("name","STACK"),Z.appendChild(it);for(let lt=0;lt<this.arguments_.length;lt++){const Kt=R.module$build$src$core$utils$xml.createElement("block");Kt.setAttribute("type","procedures_mutatorarg");var at=R.module$build$src$core$utils$xml.createElement("field");at.setAttribute("name","NAME");const fs=R.module$build$src$core$utils$xml.createTextNode(this.arguments_[lt]);at.appendChild(fs),Kt.appendChild(at),at=R.module$build$src$core$utils$xml.createElement("next"),Kt.appendChild(at),it.appendChild(Kt),it=at}return W=R.module$build$src$core$xml.domToBlock(Z,W),this.type==="procedures_defreturn"?W.setFieldValue(this.hasStatements_,"STATEMENTS"):W.removeInput("STATEMENT_INPUT"),R.module$build$src$core$procedures.mutateCallers(this),W},compose:function(W){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let Z=W.getInputTargetBlock("STACK");for(;Z&&!Z.isInsertionMarker();){var it=Z.getFieldValue("NAME");this.arguments_.push(it),it=this.workspace.getVariable(it,""),this.argumentVarModels_.push(it),this.paramIds_.push(Z.id),Z=Z.nextConnection&&Z.nextConnection.targetBlock()}this.updateParams_(),R.module$build$src$core$procedures.mutateCallers(this),W=W.getFieldValue("STATEMENTS"),W!==null&&(W=W==="TRUE",this.hasStatements_!==W)&&(W?(this.setStatements_(!0),R.Mutator$$module$build$src$core$mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(W=this.getInput("STACK").connection,(this.statementConnection_=W.targetConnection)&&(W=W.targetBlock(),W.unplug(),W.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(W,Z){var it=this.workspace.getVariableById(W);if(it.type===""){it=it.name,Z=this.workspace.getVariableById(Z);var at=!1;for(let lt=0;lt<this.argumentVarModels_.length;lt++)this.argumentVarModels_[lt].getId()===W&&(this.arguments_[lt]=Z.name,this.argumentVarModels_[lt]=Z,at=!0);at&&(this.displayRenamedVar_(it,Z.name),R.module$build$src$core$procedures.mutateCallers(this))}},updateVarName:function(W){const Z=W.name;let it=!1,at;for(let lt=0;lt<this.argumentVarModels_.length;lt++)this.argumentVarModels_[lt].getId()===W.getId()&&(at=this.arguments_[lt],this.arguments_[lt]=Z,it=!0);it&&(this.displayRenamedVar_(at,Z),R.module$build$src$core$procedures.mutateCallers(this))},displayRenamedVar_:function(W,Z){if(this.updateParams_(),this.mutator&&this.mutator.isVisible()){const it=this.mutator.workspace_.getAllBlocks(!1);for(let at=0,lt;lt=it[at];at++)lt.type==="procedures_mutatorarg"&&R.module$build$src$core$names.Names.equals(W,lt.getFieldValue("NAME"))&&lt.setFieldValue(Z,"NAME")}},customContextMenu:function(W){if(!this.isInFlyout){var Z={enabled:!0},it=this.getFieldValue("NAME");Z.text=H.PROCEDURES_CREATE_DO.replace("%1",it);var at=R.module$build$src$core$utils$xml.createElement("mutation");for(at.setAttribute("name",it),it=0;it<this.arguments_.length;it++){var lt=R.module$build$src$core$utils$xml.createElement("arg");lt.setAttribute("name",this.arguments_[it]),at.appendChild(lt)}if(it=R.module$build$src$core$utils$xml.createElement("block"),it.setAttribute("type",this.callType_),it.appendChild(at),Z.callback=R.module$build$src$core$contextmenu.callbackFactory(this,it),W.push(Z),!this.isCollapsed())for(Z=0;Z<this.argumentVarModels_.length;Z++)at={enabled:!0},it=this.argumentVarModels_[Z],at.text=H.VARIABLES_SET_CREATE_GET.replace("%1",it.name),it=R.module$build$src$core$variables.generateVariableFieldDom(it),lt=R.module$build$src$core$utils$xml.createElement("block"),lt.setAttribute("type","variables_get"),lt.appendChild(it),at.callback=R.module$build$src$core$contextmenu.callbackFactory(this,lt),W.push(at)}}};U.blocks.procedures_defnoreturn=Object.assign({},j,{init:function(){var W=R.module$build$src$core$procedures.findLegalName("",this);W=new R.FieldTextInput$$module$build$src$core$field_textinput(W,R.module$build$src$core$procedures.rename),W.setSpellcheck(!1),this.appendDummyInput().appendField(H.PROCEDURES_DEFNORETURN_TITLE).appendField(W,"NAME").appendField("","PARAMS"),this.setMutator(new R.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&H.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(H.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(H.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(H.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),U.blocks.procedures_defreturn=Object.assign({},j,{init:function(){var W=R.module$build$src$core$procedures.findLegalName("",this);W=new R.FieldTextInput$$module$build$src$core$field_textinput(W,R.module$build$src$core$procedures.rename),W.setSpellcheck(!1),this.appendDummyInput().appendField(H.PROCEDURES_DEFRETURN_TITLE).appendField(W,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(R.Align$$module$build$src$core$input.RIGHT).appendField(H.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new R.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&H.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(H.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(H.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(H.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),U.blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(H.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(H.PROCEDURES_ALLOW_STATEMENTS).appendField(new R.FieldCheckbox$$module$build$src$core$field_checkbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(H.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},U.blocks.procedures_mutatorarg={init:function(){const W=new R.FieldTextInput$$module$build$src$core$field_textinput(R.module$build$src$core$procedures.DEFAULT_ARG,this.validator_);W.oldShowEditorFn_=W.showEditor_,W.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(H.PROCEDURES_MUTATORARG_TITLE).appendField(W,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(H.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,W.onFinishEditing_=this.deleteIntermediateVars_,W.createdVariables_=[],W.onFinishEditing_("x")},validator_:function(W){var Z=this.getSourceBlock();const it=R.Mutator$$module$build$src$core$mutator.findParentWs(Z.workspace);if(W=W.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!W)return null;const at=(Z.workspace.targetWorkspace||Z.workspace).getAllBlocks(!1),lt=W.toLowerCase();for(let Kt=0;Kt<at.length;Kt++){if(at[Kt].id===this.getSourceBlock().id)continue;const fs=at[Kt].getFieldValue("NAME");if(fs&&fs.toLowerCase()===lt)return null}return Z.isInFlyout||((Z=it.getVariable(W,""))&&Z.name!==W&&it.renameVariableById(Z.getId(),W),Z||(Z=it.createVariable(W,""))&&this.createdVariables_&&this.createdVariables_.push(Z)),W},deleteIntermediateVars_:function(W){const Z=R.Mutator$$module$build$src$core$mutator.findParentWs(this.getSourceBlock().workspace);if(Z)for(let it=0;it<this.createdVariables_.length;it++){const at=this.createdVariables_[it];at.name!==W&&Z.deleteVariableById(at.getId())}}};var _={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(W,Z){R.module$build$src$core$names.Names.equals(W,this.getProcedureCall())&&(this.setFieldValue(Z,"NAME"),this.setTooltip((this.outputConnection?H.PROCEDURES_CALLRETURN_TOOLTIP:H.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",Z)))},setProcedureParameters_:function(W,Z){var it=R.module$build$src$core$procedures.getDefinition(this.getProcedureCall(),this.workspace),at=it&&it.mutator&&it.mutator.isVisible();if(at?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),W.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=Z;else{if(Z.length!==W.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),it=this.rendered,this.rendered=!1;for(let Kt=0;Kt<this.arguments_.length;Kt++){var lt=this.getInput("ARG"+Kt);lt&&(lt=lt.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Kt]]=lt,at&&lt&&Z.indexOf(this.quarkIds_[Kt])===-1&&(lt.disconnect(),lt.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(W),this.argumentVarModels_=[],W=0;W<this.arguments_.length;W++)at=R.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[W],""),this.argumentVarModels_.push(at);if(this.updateShape_(),this.quarkIds_=Z)for(Z=0;Z<this.arguments_.length;Z++)W=this.quarkIds_[Z],W in this.quarkConnections_&&(R.Mutator$$module$build$src$core$mutator.reconnect(this.quarkConnections_[W],this,"ARG"+Z)||delete this.quarkConnections_[W]);(this.rendered=it)&&this.render()}},updateShape_:function(){for(var W=0;W<this.arguments_.length;W++){var Z=this.getField("ARGNAME"+W);if(Z){R.module$build$src$core$events$events.disable();try{Z.setValue(this.arguments_[W])}finally{R.module$build$src$core$events$events.enable()}}else Z=new R.FieldLabel$$module$build$src$core$field_label(this.arguments_[W]),this.appendValueInput("ARG"+W).setAlign(R.Align$$module$build$src$core$input.RIGHT).appendField(Z,"ARGNAME"+W).init()}for(W=this.arguments_.length;this.getInput("ARG"+W);W++)this.removeInput("ARG"+W);(W=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(W.appendField(H.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),W.init()):this.getField("WITH")&&W.removeField("WITH"))},mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation");W.setAttribute("name",this.getProcedureCall());for(let Z=0;Z<this.arguments_.length;Z++){const it=R.module$build$src$core$utils$xml.createElement("arg");it.setAttribute("name",this.arguments_[Z]),W.appendChild(it)}return W},domToMutation:function(W){var Z=W.getAttribute("name");this.renameProcedure(this.getProcedureCall(),Z),Z=[];const it=[];for(let at=0,lt;lt=W.childNodes[at];at++)lt.nodeName.toLowerCase()==="arg"&&(Z.push(lt.getAttribute("name")),it.push(lt.getAttribute("paramId")));this.setProcedureParameters_(Z,it)},saveExtraState:function(){const W=Object.create(null);return W.name=this.getProcedureCall(),this.arguments_.length&&(W.params=this.arguments_),W},loadExtraState:function(W){if(this.renameProcedure(this.getProcedureCall(),W.name),W=W.params){const Z=[];Z.length=W.length,Z.fill(null),this.setProcedureParameters_(W,Z)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(W){if(this.workspace&&!this.workspace.isFlyout&&W.recordUndo)if(W.type===R.module$build$src$core$events$events.BLOCK_CREATE&&W.ids.indexOf(this.id)!==-1){var Z=this.getProcedureCall();if(Z=R.module$build$src$core$procedures.getDefinition(Z,this.workspace),!Z||Z.type===this.defType_&&JSON.stringify(Z.getVars())===JSON.stringify(this.arguments_)||(Z=null),!Z){R.module$build$src$core$events$events.setGroup(W.group),W=R.module$build$src$core$utils$xml.createElement("xml"),Z=R.module$build$src$core$utils$xml.createElement("block"),Z.setAttribute("type",this.defType_);var it=this.getRelativeToSurfaceXY(),at=it.y+2*R.config$$module$build$src$core$config.snapRadius;Z.setAttribute("x",it.x+R.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)),Z.setAttribute("y",at),it=this.mutationToDom(),Z.appendChild(it),it=R.module$build$src$core$utils$xml.createElement("field"),it.setAttribute("name","NAME"),at=this.getProcedureCall();const lt=R.module$build$src$core$procedures.findLegalName(at,this);at!==lt&&this.renameProcedure(at,lt),it.appendChild(R.module$build$src$core$utils$xml.createTextNode(at)),Z.appendChild(it),W.appendChild(Z),R.module$build$src$core$xml.domToWorkspace(W,this.workspace),R.module$build$src$core$events$events.setGroup(!1)}}else W.type===R.module$build$src$core$events$events.BLOCK_DELETE?(Z=this.getProcedureCall(),R.module$build$src$core$procedures.getDefinition(Z,this.workspace)||(R.module$build$src$core$events$events.setGroup(W.group),this.dispose(!0),R.module$build$src$core$events$events.setGroup(!1))):W.type===R.module$build$src$core$events$events.CHANGE&&W.element==="disabled"&&(Z=this.getProcedureCall(),(Z=R.module$build$src$core$procedures.getDefinition(Z,this.workspace))&&Z.id===W.blockId&&((Z=R.module$build$src$core$events$events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),R.module$build$src$core$events$events.setGroup(W.group),W.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),R.module$build$src$core$events$events.setGroup(Z)))},customContextMenu:function(W){if(this.workspace.isMovable()){var Z={enabled:!0};Z.text=H.PROCEDURES_HIGHLIGHT_DEF;var it=this.getProcedureCall(),at=this.workspace;Z.callback=function(){const lt=R.module$build$src$core$procedures.getDefinition(it,at);lt&&(at.centerOnBlock(lt.id),lt.select())},W.push(Z)}}};U.blocks.procedures_callnoreturn=Object.assign({},_,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(H.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),U.blocks.procedures_callreturn=Object.assign({},_,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(H.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),U.blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(H.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(H.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(H.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(H.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation");return W.setAttribute("value",Number(this.hasReturnValue_)),W},domToMutation:function(W){this.hasReturnValue_=W.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(H.PROCEDURES_DEFRETURN_RETURN))},onchange:function(W){if(!(this.workspace.isDragging&&this.workspace.isDragging()||W.type!==R.module$build$src$core$events$events.BLOCK_MOVE)){var Z=!1,it=this;do{if(this.FUNCTION_TYPES.indexOf(it.type)!==-1){Z=!0;break}it=it.getSurroundParent()}while(it);Z?(it.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(H.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):it.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(H.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(H.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(it=R.module$build$src$core$events$events.getGroup(),R.module$build$src$core$events$events.setGroup(W.group),this.setEnabled(Z),R.module$build$src$core$events$events.setGroup(it))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},Y(U.blocks);var w={};R.module$build$src$core$extensions,R.module$build$src$core$field_dropdown,R.module$build$src$core$utils$xml;var D=R.module$build$src$core$common.createBlockDefinitionsFromJsonArray,N=R.module$build$src$core$common.defineBlocks;w.blocks=D([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03C0","PI"],["e","E"],["\u03C6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xBD)","SQRT1_2"],["\u221E","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);var G={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};R.module$build$src$core$extensions.register("math_op_tooltip",R.module$build$src$core$extensions.buildTooltipForDropdown("OP",G));var k={mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation"),Z=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return W.setAttribute("divisor_input",Z),W},domToMutation:function(W){W=W.getAttribute("divisor_input")==="true",this.updateShape_(W)},updateShape_:function(W){const Z=this.getInput("DIVISOR");W?Z||this.appendValueInput("DIVISOR").setCheck("Number"):Z&&this.removeInput("DIVISOR")}},V=function(){this.getField("PROPERTY").setValidator(function(W){W=W==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(W)})};R.module$build$src$core$extensions.registerMutator("math_is_divisibleby_mutator",k,V),R.module$build$src$core$extensions.register("math_change_tooltip",R.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var X={updateType_:function(W){W==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation");return W.setAttribute("op",this.getFieldValue("OP")),W},domToMutation:function(W){this.updateType_(W.getAttribute("op"))}},K=function(){this.getField("OP").setValidator(function(W){this.updateType_(W)}.bind(this))};R.module$build$src$core$extensions.registerMutator("math_modes_of_list_mutator",X,K),N(w.blocks);var tt={};R.module$build$src$core$contextmenu,R.module$build$src$core$events$events,R.module$build$src$core$extensions,R.module$build$src$core$variables,R.module$build$src$core$utils$xml;var st=R.module$build$src$core$msg.Msg,rt=R.module$build$src$core$common.createBlockDefinitionsFromJsonArray,ht=R.module$build$src$core$common.defineBlocks;tt.blocks=rt([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);var ut={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};R.module$build$src$core$extensions.register("controls_whileUntil_tooltip",R.module$build$src$core$extensions.buildTooltipForDropdown("MODE",ut));var mt={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};R.module$build$src$core$extensions.register("controls_flow_tooltip",R.module$build$src$core$extensions.buildTooltipForDropdown("FLOW",mt));var pt={customContextMenu:function(W){if(!this.isInFlyout){var Z=this.getField("VAR").getVariable(),it=Z.name;if(!this.isCollapsed()&&it!==null){const at={enabled:!0};at.text=st.VARIABLES_SET_CREATE_GET.replace("%1",it),Z=R.module$build$src$core$variables.generateVariableFieldDom(Z),it=R.module$build$src$core$utils$xml.createElement("block"),it.setAttribute("type","variables_get"),it.appendChild(Z),at.callback=R.module$build$src$core$contextmenu.callbackFactory(this,it),W.push(at)}}}};R.module$build$src$core$extensions.registerMixin("contextMenu_newGetVariableBlock",pt),R.module$build$src$core$extensions.register("controls_for_tooltip",R.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),R.module$build$src$core$extensions.register("controls_forEach_tooltip",R.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),tt.loopTypes=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);var Tt={getSurroundLoop:function(){let W=this;do{if(tt.loopTypes.has(W.type))return W;W=W.getSurroundParent()}while(W);return null},onchange:function(W){if(this.workspace.isDragging&&!this.workspace.isDragging()&&W.type===R.module$build$src$core$events$events.BLOCK_MOVE){var Z=this.getSurroundLoop(this);if(this.setWarningText(Z?null:st.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){const it=R.module$build$src$core$events$events.getGroup();R.module$build$src$core$events$events.setGroup(W.group),this.setEnabled(Z),R.module$build$src$core$events$events.setGroup(it)}}}};R.module$build$src$core$extensions.registerMixin("controls_flow_in_loop_check",Tt),ht(tt.blocks);var Nt={};R.module$build$src$core$events$events,R.module$build$src$core$extensions,R.module$build$src$core$utils$xml;var Ct=R.module$build$src$core$msg.Msg;R.Mutator$$module$build$src$core$mutator;var $t=R.module$build$src$core$common.createBlockDefinitionsFromJsonArray,vt=R.module$build$src$core$common.defineBlocks;Nt.blocks=$t([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200F<","LT"],["\u200F\u2264","LTE"],["\u200F>","GT"],["\u200F\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);var Ht={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};R.module$build$src$core$extensions.register("logic_op_tooltip",R.module$build$src$core$extensions.buildTooltipForDropdown("OP",Ht));var At={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const W=R.module$build$src$core$utils$xml.createElement("mutation");return this.elseifCount_&&W.setAttribute("elseif",this.elseifCount_),this.elseCount_&&W.setAttribute("else",1),W},domToMutation:function(W){this.elseifCount_=parseInt(W.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(W.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const W=Object.create(null);return this.elseifCount_&&(W.elseIfCount=this.elseifCount_),this.elseCount_&&(W.hasElse=!0),W},loadExtraState:function(W){this.elseifCount_=W.elseIfCount||0,this.elseCount_=W.hasElse?1:0,this.updateShape_()},decompose:function(W){const Z=W.newBlock("controls_if_if");Z.initSvg();let it=Z.nextConnection;for(let at=1;at<=this.elseifCount_;at++){const lt=W.newBlock("controls_if_elseif");lt.initSvg(),it.connect(lt.previousConnection),it=lt.nextConnection}return this.elseCount_&&(W=W.newBlock("controls_if_else"),W.initSvg(),it.connect(W.previousConnection)),Z},compose:function(W){W=W.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const Z=[null],it=[null];let at=null;for(;W;){if(!W.isInsertionMarker())switch(W.type){case"controls_if_elseif":this.elseifCount_++,Z.push(W.valueConnection_),it.push(W.statementConnection_);break;case"controls_if_else":this.elseCount_++,at=W.statementConnection_;break;default:throw TypeError("Unknown block type: "+W.type)}W=W.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(Z,it,at)},saveConnections:function(W){W=W.nextConnection.targetBlock();let Z=1;for(;W;){if(!W.isInsertionMarker())switch(W.type){case"controls_if_elseif":var it=this.getInput("IF"+Z);const at=this.getInput("DO"+Z);W.valueConnection_=it&&it.connection.targetConnection,W.statementConnection_=at&&at.connection.targetConnection,Z++;break;case"controls_if_else":it=this.getInput("ELSE"),W.statementConnection_=it&&it.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+W.type)}W=W.getNextBlock()}},rebuildShape_:function(){const W=[null],Z=[null];let it=null;this.getInput("ELSE")&&(it=this.getInput("ELSE").connection.targetConnection);for(let at=1;this.getInput("IF"+at);at++){const lt=this.getInput("IF"+at),Kt=this.getInput("DO"+at);W.push(lt.connection.targetConnection),Z.push(Kt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(W,Z,it)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var W=1;this.getInput("IF"+W);W++)this.removeInput("IF"+W),this.removeInput("DO"+W);for(W=1;W<=this.elseifCount_;W++)this.appendValueInput("IF"+W).setCheck("Boolean").appendField(Ct.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+W).appendField(Ct.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(Ct.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(W,Z,it){for(let at=1;at<=this.elseifCount_;at++)R.Mutator$$module$build$src$core$mutator.reconnect(W[at],this,"IF"+at),R.Mutator$$module$build$src$core$mutator.reconnect(Z[at],this,"DO"+at);R.Mutator$$module$build$src$core$mutator.reconnect(it,this,"ELSE")}};R.module$build$src$core$extensions.registerMutator("controls_if_mutator",At,null,["controls_if_elseif","controls_if_else"]);var Dt=function(){this.setTooltip(function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return Ct.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return Ct.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return Ct.CONTROLS_IF_TOOLTIP_4}else return Ct.CONTROLS_IF_TOOLTIP_1;return""}.bind(this))};R.module$build$src$core$extensions.register("controls_if_tooltip",Dt);var se={onchange:function(W){this.prevBlocks_||(this.prevBlocks_=[null,null]);var Z=this.getInputTargetBlock("A");const it=this.getInputTargetBlock("B");Z&&it&&!this.workspace.connectionChecker.doTypeChecks(Z.outputConnection,it.outputConnection)&&(R.module$build$src$core$events$events.setGroup(W.group),W=this.prevBlocks_[0],W!==Z&&(Z.unplug(),!W||W.isDisposed()||W.isShadow()||this.getInput("A").connection.connect(W.outputConnection)),Z=this.prevBlocks_[1],Z!==it&&(it.unplug(),!Z||Z.isDisposed()||Z.isShadow()||this.getInput("B").connection.connect(Z.outputConnection)),this.bumpNeighbours(),R.module$build$src$core$events$events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},$e=function(){this.mixin(se)};R.module$build$src$core$extensions.register("logic_compare",$e);var zt={prevParentConnection_:null,onchange:function(W){const Z=this.getInputTargetBlock("THEN"),it=this.getInputTargetBlock("ELSE"),at=this.outputConnection.targetConnection;if((Z||it)&&at)for(let lt=0;2>lt;lt++){const Kt=lt===1?Z:it;Kt&&!Kt.workspace.connectionChecker.doTypeChecks(Kt.outputConnection,at)&&(R.module$build$src$core$events$events.setGroup(W.group),at===this.prevParentConnection_?(this.unplug(),at.getSourceBlock().bumpNeighbours()):(Kt.unplug(),Kt.bumpNeighbours()),R.module$build$src$core$events$events.setGroup(!1))}this.prevParentConnection_=at}};R.module$build$src$core$extensions.registerMixin("logic_ternary",zt),vt(Nt.blocks);var Bt={};R.module$build$src$core$utils$xml,R.module$build$src$core$xml,R.Align$$module$build$src$core$input,R.module$build$src$core$connection_type.ConnectionType;var ee=R.module$build$src$core$field_dropdown.FieldDropdown,ft=R.module$build$src$core$msg.Msg;R.Mutator$$module$build$src$core$mutator;var ie=R.module$build$src$core$common.createBlockDefinitionsFromJsonArray,ye=R.module$build$src$core$common.defineBlocks;Bt.blocks=ie([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Bt.blocks.lists_create_with={init:function(){this.setHelpUrl(ft.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new R.Mutator$$module$build$src$core$mutator(["lists_create_with_item"],this)),this.setTooltip(ft.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation");return W.setAttribute("items",this.itemCount_),W},domToMutation:function(W){this.itemCount_=parseInt(W.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(W){this.itemCount_=W.itemCount,this.updateShape_()},decompose:function(W){const Z=W.newBlock("lists_create_with_container");Z.initSvg();let it=Z.getInput("STACK").connection;for(let at=0;at<this.itemCount_;at++){const lt=W.newBlock("lists_create_with_item");lt.initSvg(),it.connect(lt.previousConnection),it=lt.nextConnection}return Z},compose:function(W){var Z=W.getInputTargetBlock("STACK");for(W=[];Z;)Z.isInsertionMarker()||W.push(Z.valueConnection_),Z=Z.getNextBlock();for(Z=0;Z<this.itemCount_;Z++){const it=this.getInput("ADD"+Z).connection.targetConnection;it&&W.indexOf(it)===-1&&it.disconnect()}for(this.itemCount_=W.length,this.updateShape_(),Z=0;Z<this.itemCount_;Z++)R.Mutator$$module$build$src$core$mutator.reconnect(W[Z],this,"ADD"+Z)},saveConnections:function(W){W=W.getInputTargetBlock("STACK");let Z=0;for(;W;){if(W.isInsertionMarker()){W=W.getNextBlock();continue}const it=this.getInput("ADD"+Z);W.valueConnection_=it&&it.connection.targetConnection,W=W.getNextBlock(),Z++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(ft.LISTS_CREATE_EMPTY_TITLE);for(var W=0;W<this.itemCount_;W++)if(!this.getInput("ADD"+W)){const Z=this.appendValueInput("ADD"+W).setAlign(R.Align$$module$build$src$core$input.RIGHT);W===0&&Z.appendField(ft.LISTS_CREATE_WITH_INPUT_WITH)}for(W=this.itemCount_;this.getInput("ADD"+W);W++)this.removeInput("ADD"+W)}},Bt.blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(ft.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(ft.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},Bt.blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(ft.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(ft.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},Bt.blocks.lists_indexOf={init:function(){const W=[[ft.LISTS_INDEX_OF_FIRST,"FIRST"],[ft.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(ft.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(ft.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new ee(W),"END"),this.setInputsInline(!0);const Z=this;this.setTooltip(function(){return ft.LISTS_INDEX_OF_TOOLTIP.replace("%1",Z.workspace.options.oneBasedIndex?"0":"-1")})}},Bt.blocks.lists_getIndex={init:function(){var W=[[ft.LISTS_GET_INDEX_GET,"GET"],[ft.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[ft.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[ft.LISTS_GET_INDEX_FROM_START,"FROM_START"],[ft.LISTS_GET_INDEX_FROM_END,"FROM_END"],[ft.LISTS_GET_INDEX_FIRST,"FIRST"],[ft.LISTS_GET_INDEX_LAST,"LAST"],[ft.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(ft.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),W=new ee(W,function(it){it=it==="REMOVE",this.getSourceBlock().updateStatement_(it)}),this.appendValueInput("VALUE").setCheck("Array").appendField(ft.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(W,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),ft.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(ft.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);const Z=this;this.setTooltip(function(){const it=Z.getFieldValue("MODE"),at=Z.getFieldValue("WHERE");let lt="";switch(it+" "+at){case"GET FROM_START":case"GET FROM_END":lt=ft.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":lt=ft.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":lt=ft.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":lt=ft.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":lt=ft.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":lt=ft.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":lt=ft.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":lt=ft.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":lt=ft.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":lt=ft.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":lt=ft.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":lt=ft.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(at==="FROM_START"||at==="FROM_END")&&(lt+="  "+(at==="FROM_START"?ft.LISTS_INDEX_FROM_START_TOOLTIP:ft.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",Z.workspace.options.oneBasedIndex?"#1":"#0")),lt})},mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation");W.setAttribute("statement",!this.outputConnection);const Z=this.getInput("AT").type===R.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return W.setAttribute("at",Z),W},domToMutation:function(W){const Z=W.getAttribute("statement")==="true";this.updateStatement_(Z),W=W.getAttribute("at")!=="false",this.updateAt_(W)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(W){W.isStatement?this.updateStatement_(!0):typeof W=="string"&&this.domToMutation(R.module$build$src$core$xml.textToDom(W))},updateStatement_:function(W){W!==!this.outputConnection&&(this.unplug(!0,!0),W?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(W){this.removeInput("AT"),this.removeInput("ORDINAL",!0),W?(this.appendValueInput("AT").setCheck("Number"),ft.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(ft.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const Z=new ee(this.WHERE_OPTIONS,function(it){const at=it==="FROM_START"||it==="FROM_END";if(at!==W){const lt=this.getSourceBlock();return lt.updateAt_(at),lt.setFieldValue(it,"WHERE"),null}});this.getInput("AT").appendField(Z,"WHERE"),ft.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},Bt.blocks.lists_setIndex={init:function(){const W=[[ft.LISTS_SET_INDEX_SET,"SET"],[ft.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[ft.LISTS_GET_INDEX_FROM_START,"FROM_START"],[ft.LISTS_GET_INDEX_FROM_END,"FROM_END"],[ft.LISTS_GET_INDEX_FIRST,"FIRST"],[ft.LISTS_GET_INDEX_LAST,"LAST"],[ft.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(ft.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(ft.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new ee(W),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(ft.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(ft.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);const Z=this;this.setTooltip(function(){const it=Z.getFieldValue("MODE"),at=Z.getFieldValue("WHERE");let lt="";switch(it+" "+at){case"SET FROM_START":case"SET FROM_END":lt=ft.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":lt=ft.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":lt=ft.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":lt=ft.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":lt=ft.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":lt=ft.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":lt=ft.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":lt=ft.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(at==="FROM_START"||at==="FROM_END")&&(lt+="  "+ft.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",Z.workspace.options.oneBasedIndex?"#1":"#0")),lt})},mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation"),Z=this.getInput("AT").type===R.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return W.setAttribute("at",Z),W},domToMutation:function(W){W=W.getAttribute("at")!=="false",this.updateAt_(W)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(W){this.removeInput("AT"),this.removeInput("ORDINAL",!0),W?(this.appendValueInput("AT").setCheck("Number"),ft.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(ft.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const Z=new ee(this.WHERE_OPTIONS,function(it){const at=it==="FROM_START"||it==="FROM_END";if(at!==W){const lt=this.getSourceBlock();return lt.updateAt_(at),lt.setFieldValue(it,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(Z,"WHERE")}},Bt.blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[ft.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[ft.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[ft.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[ft.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[ft.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[ft.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(ft.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(ft.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),ft.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(ft.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(ft.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation");var Z=this.getInput("AT1").type===R.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return W.setAttribute("at1",Z),Z=this.getInput("AT2").type===R.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,W.setAttribute("at2",Z),W},domToMutation:function(W){const Z=W.getAttribute("at1")==="true";W=W.getAttribute("at2")==="true",this.updateAt_(1,Z),this.updateAt_(2,W)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(W,Z){this.removeInput("AT"+W),this.removeInput("ORDINAL"+W,!0),Z?(this.appendValueInput("AT"+W).setCheck("Number"),ft.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+W).appendField(ft.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+W);const it=new ee(this["WHERE_OPTIONS_"+W],function(at){const lt=at==="FROM_START"||at==="FROM_END";if(lt!==Z){const Kt=this.getSourceBlock();return Kt.updateAt_(W,lt),Kt.setFieldValue(at,"WHERE"+W),null}});this.getInput("AT"+W).appendField(it,"WHERE"+W),W===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),ft.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},Bt.blocks.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},Bt.blocks.lists_split={init:function(){const W=this,Z=new ee([[ft.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[ft.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(it){W.updateType_(it)});this.setHelpUrl(ft.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(Z,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(ft.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){const it=W.getFieldValue("MODE");if(it==="SPLIT")return ft.LISTS_SPLIT_TOOLTIP_SPLIT;if(it==="JOIN")return ft.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+it)})},updateType_:function(W){if(this.getFieldValue("MODE")!==W){const Z=this.getInput("INPUT").connection;Z.setShadowDom(null);const it=Z.targetBlock();it&&(Z.disconnect(),it.isShadow()?it.dispose():this.bumpNeighbours())}W==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const W=R.module$build$src$core$utils$xml.createElement("mutation");return W.setAttribute("mode",this.getFieldValue("MODE")),W},domToMutation:function(W){this.updateType_(W.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},ye(Bt.blocks);var Ae={},He=R.module$build$src$core$common.createBlockDefinitionsFromJsonArray,De=R.module$build$src$core$common.defineBlocks;Ae.blocks=He([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),De(Ae.blocks);var ne={};return ne.colour=Ae,ne.lists=Bt,ne.logic=Nt,ne.loops=tt,ne.math=w,ne.procedures=U,ne.texts=m,ne.variables=n,ne.variablesDynamic=e,ne.blocks=Object.assign({},Ae.blocks,Bt.blocks,Nt.blocks,tt.blocks,w.blocks,U.blocks,n.blocks,e.blocks),ne.__namespace__=R,ne})})(_f);(function(J,Q){(function(c,R){J.exports=R(_f.exports)})(je,function(c){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return c})})(jf);var si={exports:{}},Jf={exports:{}};(function(J,Q){(function(c,R){J.exports=R(Vo.exports)})(je,function(c){var R=c.__namespace__,e={};R.module$build$src$core$variables,R.module$build$src$core$utils$string,R.CodeGenerator$$module$build$src$core$generator,R.module$build$src$core$input_types.inputTypes,R.module$build$src$core$names.Names,R.NameType$$module$build$src$core$names,e.javascriptGenerator=new R.CodeGenerator$$module$build$src$core$generator("JavaScript"),e.javascriptGenerator.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(",")),e.javascriptGenerator.ORDER_ATOMIC=0,e.javascriptGenerator.ORDER_NEW=1.1,e.javascriptGenerator.ORDER_MEMBER=1.2,e.javascriptGenerator.ORDER_FUNCTION_CALL=2,e.javascriptGenerator.ORDER_INCREMENT=3,e.javascriptGenerator.ORDER_DECREMENT=3,e.javascriptGenerator.ORDER_BITWISE_NOT=4.1,e.javascriptGenerator.ORDER_UNARY_PLUS=4.2,e.javascriptGenerator.ORDER_UNARY_NEGATION=4.3,e.javascriptGenerator.ORDER_LOGICAL_NOT=4.4,e.javascriptGenerator.ORDER_TYPEOF=4.5,e.javascriptGenerator.ORDER_VOID=4.6,e.javascriptGenerator.ORDER_DELETE=4.7,e.javascriptGenerator.ORDER_AWAIT=4.8,e.javascriptGenerator.ORDER_EXPONENTIATION=5,e.javascriptGenerator.ORDER_MULTIPLICATION=5.1,e.javascriptGenerator.ORDER_DIVISION=5.2,e.javascriptGenerator.ORDER_MODULUS=5.3,e.javascriptGenerator.ORDER_SUBTRACTION=6.1,e.javascriptGenerator.ORDER_ADDITION=6.2,e.javascriptGenerator.ORDER_BITWISE_SHIFT=7,e.javascriptGenerator.ORDER_RELATIONAL=8,e.javascriptGenerator.ORDER_IN=8,e.javascriptGenerator.ORDER_INSTANCEOF=8,e.javascriptGenerator.ORDER_EQUALITY=9,e.javascriptGenerator.ORDER_BITWISE_AND=10,e.javascriptGenerator.ORDER_BITWISE_XOR=11,e.javascriptGenerator.ORDER_BITWISE_OR=12,e.javascriptGenerator.ORDER_LOGICAL_AND=13,e.javascriptGenerator.ORDER_LOGICAL_OR=14,e.javascriptGenerator.ORDER_CONDITIONAL=15,e.javascriptGenerator.ORDER_ASSIGNMENT=16,e.javascriptGenerator.ORDER_YIELD=17,e.javascriptGenerator.ORDER_COMMA=18,e.javascriptGenerator.ORDER_NONE=99,e.javascriptGenerator.ORDER_OVERRIDES=[[e.javascriptGenerator.ORDER_FUNCTION_CALL,e.javascriptGenerator.ORDER_MEMBER],[e.javascriptGenerator.ORDER_FUNCTION_CALL,e.javascriptGenerator.ORDER_FUNCTION_CALL],[e.javascriptGenerator.ORDER_MEMBER,e.javascriptGenerator.ORDER_MEMBER],[e.javascriptGenerator.ORDER_MEMBER,e.javascriptGenerator.ORDER_FUNCTION_CALL],[e.javascriptGenerator.ORDER_LOGICAL_NOT,e.javascriptGenerator.ORDER_LOGICAL_NOT],[e.javascriptGenerator.ORDER_MULTIPLICATION,e.javascriptGenerator.ORDER_MULTIPLICATION],[e.javascriptGenerator.ORDER_ADDITION,e.javascriptGenerator.ORDER_ADDITION],[e.javascriptGenerator.ORDER_LOGICAL_AND,e.javascriptGenerator.ORDER_LOGICAL_AND],[e.javascriptGenerator.ORDER_LOGICAL_OR,e.javascriptGenerator.ORDER_LOGICAL_OR]],e.javascriptGenerator.isInitialized=!1,e.javascriptGenerator.init=function(i){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new R.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(i.getVariableMap()),this.nameDB_.populateVariables(i),this.nameDB_.populateProcedures(i);const s=[];var n=R.module$build$src$core$variables.allDeveloperVariables(i);for(let d=0;d<n.length;d++)s.push(this.nameDB_.getName(n[d],R.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(i=R.module$build$src$core$variables.allUsedVarModels(i),n=0;n<i.length;n++)s.push(this.nameDB_.getName(i[n].getId(),R.NameType$$module$build$src$core$names.VARIABLE));s.length&&(this.definitions_.variables="var "+s.join(", ")+";"),this.isInitialized=!0},e.javascriptGenerator.finish=function(i){const s=Object.values(this.definitions_);return i=Object.getPrototypeOf(this).finish.call(this,i),this.isInitialized=!1,this.nameDB_.reset(),s.join(`

`)+`


`+i},e.javascriptGenerator.scrubNakedValue=function(i){return i+`;
`},e.javascriptGenerator.quote_=function(i){return i=i.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+i+"'"},e.javascriptGenerator.multiline_quote_=function(i){return i.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)},e.javascriptGenerator.scrub_=function(i,s,n){let d="";if(!i.outputConnection||!i.outputConnection.targetConnection){var a=i.getCommentText();a&&(a=R.module$build$src$core$utils$string.wrap(a,this.COMMENT_WRAP-3),d+=this.prefixLines(a+`
`,"// "));for(let u=0;u<i.inputList.length;u++)i.inputList[u].type===R.module$build$src$core$input_types.inputTypes.VALUE&&(a=i.inputList[u].connection.targetBlock())&&(a=this.allNestedComments(a))&&(d+=this.prefixLines(a,"// "))}return i=i.nextConnection&&i.nextConnection.targetBlock(),n=n?"":this.blockToCode(i),d+s+n},e.javascriptGenerator.getAdjusted=function(i,s,n,d,a){n=n||0,a=a||this.ORDER_NONE,i.workspace.options.oneBasedIndex&&n--;const u=i.workspace.options.oneBasedIndex?"1":"0";let f,p=a;return 0<n?f=p=this.ORDER_ADDITION:0>n?f=p=this.ORDER_SUBTRACTION:d&&(f=p=this.ORDER_UNARY_NEGATION),i=this.valueToCode(i,s,p)||u,R.module$build$src$core$utils$string.isNumber(i)?(i=Number(i)+n,d&&(i=-i)):(0<n?i=i+" + "+n:0>n&&(i=i+" - "+-n),d&&(i=n?"-("+i+")":"-"+i),f=Math.floor(f),a=Math.floor(a),f&&a>=f&&(i="("+i+")")),i},R.NameType$$module$build$src$core$names,e.javascriptGenerator.variables_get=function(i){return[e.javascriptGenerator.nameDB_.getName(i.getFieldValue("VAR"),R.NameType$$module$build$src$core$names.VARIABLE),e.javascriptGenerator.ORDER_ATOMIC]},e.javascriptGenerator.variables_set=function(i){const s=e.javascriptGenerator.valueToCode(i,"VALUE",e.javascriptGenerator.ORDER_ASSIGNMENT)||"0";return e.javascriptGenerator.nameDB_.getName(i.getFieldValue("VAR"),R.NameType$$module$build$src$core$names.VARIABLE)+" = "+s+`;
`},e.javascriptGenerator.variables_get_dynamic=e.javascriptGenerator.variables_get,e.javascriptGenerator.variables_set_dynamic=e.javascriptGenerator.variables_set,R.NameType$$module$build$src$core$names;var o=/^\s*'([^']|\\')*'\s*$/,g=function(i){return o.test(i)?[i,e.javascriptGenerator.ORDER_ATOMIC]:["String("+i+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]},l=function(i,s,n){return s==="FIRST"?"0":s==="FROM_END"?i+".length - 1 - "+n:s==="LAST"?i+".length - 1":n};e.javascriptGenerator.text=function(i){return[e.javascriptGenerator.quote_(i.getFieldValue("TEXT")),e.javascriptGenerator.ORDER_ATOMIC]},e.javascriptGenerator.text_multiline=function(i){i=e.javascriptGenerator.multiline_quote_(i.getFieldValue("TEXT"));const s=i.indexOf("+")!==-1?e.javascriptGenerator.ORDER_ADDITION:e.javascriptGenerator.ORDER_ATOMIC;return[i,s]},e.javascriptGenerator.text_join=function(i){switch(i.itemCount_){case 0:return["''",e.javascriptGenerator.ORDER_ATOMIC];case 1:return i=e.javascriptGenerator.valueToCode(i,"ADD0",e.javascriptGenerator.ORDER_NONE)||"''",g(i);case 2:var s=e.javascriptGenerator.valueToCode(i,"ADD0",e.javascriptGenerator.ORDER_NONE)||"''";return i=e.javascriptGenerator.valueToCode(i,"ADD1",e.javascriptGenerator.ORDER_NONE)||"''",[g(s)[0]+" + "+g(i)[0],e.javascriptGenerator.ORDER_ADDITION];default:s=Array(i.itemCount_);for(let n=0;n<i.itemCount_;n++)s[n]=e.javascriptGenerator.valueToCode(i,"ADD"+n,e.javascriptGenerator.ORDER_NONE)||"''";return["["+s.join(",")+"].join('')",e.javascriptGenerator.ORDER_FUNCTION_CALL]}},e.javascriptGenerator.text_append=function(i){const s=e.javascriptGenerator.nameDB_.getName(i.getFieldValue("VAR"),R.NameType$$module$build$src$core$names.VARIABLE);return i=e.javascriptGenerator.valueToCode(i,"TEXT",e.javascriptGenerator.ORDER_NONE)||"''",s+" += "+g(i)[0]+`;
`},e.javascriptGenerator.text_length=function(i){return[(e.javascriptGenerator.valueToCode(i,"VALUE",e.javascriptGenerator.ORDER_MEMBER)||"''")+".length",e.javascriptGenerator.ORDER_MEMBER]},e.javascriptGenerator.text_isEmpty=function(i){return["!"+(e.javascriptGenerator.valueToCode(i,"VALUE",e.javascriptGenerator.ORDER_MEMBER)||"''")+".length",e.javascriptGenerator.ORDER_LOGICAL_NOT]},e.javascriptGenerator.text_indexOf=function(i){var s=i.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const n=e.javascriptGenerator.valueToCode(i,"FIND",e.javascriptGenerator.ORDER_NONE)||"''";return s=(e.javascriptGenerator.valueToCode(i,"VALUE",e.javascriptGenerator.ORDER_MEMBER)||"''")+"."+s+"("+n+")",i.workspace.options.oneBasedIndex?[s+" + 1",e.javascriptGenerator.ORDER_ADDITION]:[s,e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.text_charAt=function(i){const s=i.getFieldValue("WHERE")||"FROM_START",n=e.javascriptGenerator.valueToCode(i,"VALUE",s==="RANDOM"?e.javascriptGenerator.ORDER_NONE:e.javascriptGenerator.ORDER_MEMBER)||"''";switch(s){case"FIRST":return[n+".charAt(0)",e.javascriptGenerator.ORDER_FUNCTION_CALL];case"LAST":return[n+".slice(-1)",e.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_START":return i=e.javascriptGenerator.getAdjusted(i,"AT"),[n+".charAt("+i+")",e.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_END":return i=e.javascriptGenerator.getAdjusted(i,"AT",1,!0),[n+".slice("+i+").charAt(0)",e.javascriptGenerator.ORDER_FUNCTION_CALL];case"RANDOM":return[e.javascriptGenerator.provideFunction_("textRandomLetter",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+n+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},e.javascriptGenerator.text_getSubstring=function(i){var s=i.getFieldValue("WHERE1"),n=i.getFieldValue("WHERE2"),d=s!=="FROM_END"&&s!=="LAST"&&n!=="FROM_END"&&n!=="LAST",a=e.javascriptGenerator.valueToCode(i,"STRING",d?e.javascriptGenerator.ORDER_MEMBER:e.javascriptGenerator.ORDER_NONE)||"''";if(s==="FIRST"&&n==="LAST")return[a,e.javascriptGenerator.ORDER_NONE];if(a.match(/^'?\w+'?$/)||d){switch(s){case"FROM_START":s=e.javascriptGenerator.getAdjusted(i,"AT1");break;case"FROM_END":s=e.javascriptGenerator.getAdjusted(i,"AT1",1,!1,e.javascriptGenerator.ORDER_SUBTRACTION),s=a+".length - "+s;break;case"FIRST":s="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(n){case"FROM_START":n=e.javascriptGenerator.getAdjusted(i,"AT2",1);break;case"FROM_END":n=e.javascriptGenerator.getAdjusted(i,"AT2",0,!1,e.javascriptGenerator.ORDER_SUBTRACTION),n=a+".length - "+n;break;case"LAST":n=a+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}a=a+".slice("+s+", "+n+")"}else{d=e.javascriptGenerator.getAdjusted(i,"AT1"),i=e.javascriptGenerator.getAdjusted(i,"AT2");const u={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};a=e.javascriptGenerator.provideFunction_("subsequence"+u[s]+u[n],`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${s==="FROM_END"||s==="FROM_START"?", at1":""}${n==="FROM_END"||n==="FROM_START"?", at2":""}) {
  var start = ${l("sequence",s,"at1")};
  var end = ${l("sequence",n,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+a+(s==="FROM_END"||s==="FROM_START"?", "+d:"")+(n==="FROM_END"||n==="FROM_START"?", "+i:"")+")"}return[a,e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.text_changeCase=function(i){const s={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[i.getFieldValue("CASE")];return i=e.javascriptGenerator.valueToCode(i,"TEXT",s?e.javascriptGenerator.ORDER_MEMBER:e.javascriptGenerator.ORDER_NONE)||"''",[s?i+s:e.javascriptGenerator.provideFunction_("textToTitleCase",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+i+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.text_trim=function(i){const s={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[i.getFieldValue("MODE")];return[(e.javascriptGenerator.valueToCode(i,"TEXT",e.javascriptGenerator.ORDER_MEMBER)||"''")+s,e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.text_print=function(i){return"window.alert("+(e.javascriptGenerator.valueToCode(i,"TEXT",e.javascriptGenerator.ORDER_NONE)||"''")+`);
`},e.javascriptGenerator.text_prompt_ext=function(i){let s="window.prompt("+(i.getField("TEXT")?e.javascriptGenerator.quote_(i.getFieldValue("TEXT")):e.javascriptGenerator.valueToCode(i,"TEXT",e.javascriptGenerator.ORDER_NONE)||"''")+")";return i.getFieldValue("TYPE")==="NUMBER"&&(s="Number("+s+")"),[s,e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.text_prompt=e.javascriptGenerator.text_prompt_ext,e.javascriptGenerator.text_count=function(i){const s=e.javascriptGenerator.valueToCode(i,"TEXT",e.javascriptGenerator.ORDER_NONE)||"''";return i=e.javascriptGenerator.valueToCode(i,"SUB",e.javascriptGenerator.ORDER_NONE)||"''",[e.javascriptGenerator.provideFunction_("textCount",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+s+", "+i+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.text_replace=function(i){const s=e.javascriptGenerator.valueToCode(i,"TEXT",e.javascriptGenerator.ORDER_NONE)||"''",n=e.javascriptGenerator.valueToCode(i,"FROM",e.javascriptGenerator.ORDER_NONE)||"''";return i=e.javascriptGenerator.valueToCode(i,"TO",e.javascriptGenerator.ORDER_NONE)||"''",[e.javascriptGenerator.provideFunction_("textReplace",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+s+", "+n+", "+i+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.text_reverse=function(i){return[(e.javascriptGenerator.valueToCode(i,"TEXT",e.javascriptGenerator.ORDER_MEMBER)||"''")+".split('').reverse().join('')",e.javascriptGenerator.ORDER_FUNCTION_CALL]},R.NameType$$module$build$src$core$names,e.javascriptGenerator.procedures_defreturn=function(i){const s=e.javascriptGenerator.nameDB_.getName(i.getFieldValue("NAME"),R.NameType$$module$build$src$core$names.PROCEDURE);var n="";e.javascriptGenerator.STATEMENT_PREFIX&&(n+=e.javascriptGenerator.injectId(e.javascriptGenerator.STATEMENT_PREFIX,i)),e.javascriptGenerator.STATEMENT_SUFFIX&&(n+=e.javascriptGenerator.injectId(e.javascriptGenerator.STATEMENT_SUFFIX,i)),n&&(n=e.javascriptGenerator.prefixLines(n,e.javascriptGenerator.INDENT));let d="";e.javascriptGenerator.INFINITE_LOOP_TRAP&&(d=e.javascriptGenerator.prefixLines(e.javascriptGenerator.injectId(e.javascriptGenerator.INFINITE_LOOP_TRAP,i),e.javascriptGenerator.INDENT));const a=e.javascriptGenerator.statementToCode(i,"STACK");let u=e.javascriptGenerator.valueToCode(i,"RETURN",e.javascriptGenerator.ORDER_NONE)||"",f="";a&&u&&(f=n),u&&(u=e.javascriptGenerator.INDENT+"return "+u+`;
`);const p=[],v=i.getVars();for(let m=0;m<v.length;m++)p[m]=e.javascriptGenerator.nameDB_.getName(v[m],R.NameType$$module$build$src$core$names.VARIABLE);return n="function "+s+"("+p.join(", ")+`) {
`+n+d+a+f+u+"}",n=e.javascriptGenerator.scrub_(i,n),e.javascriptGenerator.definitions_["%"+s]=n,null},e.javascriptGenerator.procedures_defnoreturn=e.javascriptGenerator.procedures_defreturn,e.javascriptGenerator.procedures_callreturn=function(i){const s=e.javascriptGenerator.nameDB_.getName(i.getFieldValue("NAME"),R.NameType$$module$build$src$core$names.PROCEDURE),n=[],d=i.getVars();for(let a=0;a<d.length;a++)n[a]=e.javascriptGenerator.valueToCode(i,"ARG"+a,e.javascriptGenerator.ORDER_NONE)||"null";return[s+"("+n.join(", ")+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.procedures_callnoreturn=function(i){return e.javascriptGenerator.procedures_callreturn(i)[0]+`;
`},e.javascriptGenerator.procedures_ifreturn=function(i){let s="if ("+(e.javascriptGenerator.valueToCode(i,"CONDITION",e.javascriptGenerator.ORDER_NONE)||"false")+`) {
`;return e.javascriptGenerator.STATEMENT_SUFFIX&&(s+=e.javascriptGenerator.prefixLines(e.javascriptGenerator.injectId(e.javascriptGenerator.STATEMENT_SUFFIX,i),e.javascriptGenerator.INDENT)),i.hasReturnValue_?(i=e.javascriptGenerator.valueToCode(i,"VALUE",e.javascriptGenerator.ORDER_NONE)||"null",s+=e.javascriptGenerator.INDENT+"return "+i+`;
`):s+=e.javascriptGenerator.INDENT+`return;
`,s+`}
`},R.NameType$$module$build$src$core$names,e.javascriptGenerator.math_number=function(i){return i=Number(i.getFieldValue("NUM")),[i,0<=i?e.javascriptGenerator.ORDER_ATOMIC:e.javascriptGenerator.ORDER_UNARY_NEGATION]},e.javascriptGenerator.math_arithmetic=function(i){var s={ADD:[" + ",e.javascriptGenerator.ORDER_ADDITION],MINUS:[" - ",e.javascriptGenerator.ORDER_SUBTRACTION],MULTIPLY:[" * ",e.javascriptGenerator.ORDER_MULTIPLICATION],DIVIDE:[" / ",e.javascriptGenerator.ORDER_DIVISION],POWER:[null,e.javascriptGenerator.ORDER_NONE]}[i.getFieldValue("OP")];const n=s[0];s=s[1];const d=e.javascriptGenerator.valueToCode(i,"A",s)||"0";return i=e.javascriptGenerator.valueToCode(i,"B",s)||"0",n?[d+n+i,s]:["Math.pow("+d+", "+i+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.math_single=function(i){const s=i.getFieldValue("OP");let n;if(s==="NEG")return i=e.javascriptGenerator.valueToCode(i,"NUM",e.javascriptGenerator.ORDER_UNARY_NEGATION)||"0",i[0]==="-"&&(i=" "+i),["-"+i,e.javascriptGenerator.ORDER_UNARY_NEGATION];switch(i=s==="SIN"||s==="COS"||s==="TAN"?e.javascriptGenerator.valueToCode(i,"NUM",e.javascriptGenerator.ORDER_DIVISION)||"0":e.javascriptGenerator.valueToCode(i,"NUM",e.javascriptGenerator.ORDER_NONE)||"0",s){case"ABS":n="Math.abs("+i+")";break;case"ROOT":n="Math.sqrt("+i+")";break;case"LN":n="Math.log("+i+")";break;case"EXP":n="Math.exp("+i+")";break;case"POW10":n="Math.pow(10,"+i+")";break;case"ROUND":n="Math.round("+i+")";break;case"ROUNDUP":n="Math.ceil("+i+")";break;case"ROUNDDOWN":n="Math.floor("+i+")";break;case"SIN":n="Math.sin("+i+" / 180 * Math.PI)";break;case"COS":n="Math.cos("+i+" / 180 * Math.PI)";break;case"TAN":n="Math.tan("+i+" / 180 * Math.PI)"}if(n)return[n,e.javascriptGenerator.ORDER_FUNCTION_CALL];switch(s){case"LOG10":n="Math.log("+i+") / Math.log(10)";break;case"ASIN":n="Math.asin("+i+") / Math.PI * 180";break;case"ACOS":n="Math.acos("+i+") / Math.PI * 180";break;case"ATAN":n="Math.atan("+i+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+s)}return[n,e.javascriptGenerator.ORDER_DIVISION]},e.javascriptGenerator.math_constant=function(i){return{PI:["Math.PI",e.javascriptGenerator.ORDER_MEMBER],E:["Math.E",e.javascriptGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",e.javascriptGenerator.ORDER_DIVISION],SQRT2:["Math.SQRT2",e.javascriptGenerator.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",e.javascriptGenerator.ORDER_MEMBER],INFINITY:["Infinity",e.javascriptGenerator.ORDER_ATOMIC]}[i.getFieldValue("CONSTANT")]},e.javascriptGenerator.math_number_property=function(i){var s={EVEN:[" % 2 === 0",e.javascriptGenerator.ORDER_MODULUS,e.javascriptGenerator.ORDER_EQUALITY],ODD:[" % 2 === 1",e.javascriptGenerator.ORDER_MODULUS,e.javascriptGenerator.ORDER_EQUALITY],WHOLE:[" % 1 === 0",e.javascriptGenerator.ORDER_MODULUS,e.javascriptGenerator.ORDER_EQUALITY],POSITIVE:[" > 0",e.javascriptGenerator.ORDER_RELATIONAL,e.javascriptGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",e.javascriptGenerator.ORDER_RELATIONAL,e.javascriptGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,e.javascriptGenerator.ORDER_MODULUS,e.javascriptGenerator.ORDER_EQUALITY],PRIME:[null,e.javascriptGenerator.ORDER_NONE,e.javascriptGenerator.ORDER_FUNCTION_CALL]};const n=i.getFieldValue("PROPERTY"),[d,a,u]=s[n];return s=e.javascriptGenerator.valueToCode(i,"NUMBER_TO_CHECK",a)||"0",n==="PRIME"?i=e.javascriptGenerator.provideFunction_("mathIsPrime",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+s+")":n==="DIVISIBLE_BY"?(i=e.javascriptGenerator.valueToCode(i,"DIVISOR",e.javascriptGenerator.ORDER_MODULUS)||"0",i=s+" % "+i+" === 0"):i=s+d,[i,u]},e.javascriptGenerator.math_change=function(i){const s=e.javascriptGenerator.valueToCode(i,"DELTA",e.javascriptGenerator.ORDER_ADDITION)||"0";return i=e.javascriptGenerator.nameDB_.getName(i.getFieldValue("VAR"),R.NameType$$module$build$src$core$names.VARIABLE),i+" = (typeof "+i+" === 'number' ? "+i+" : 0) + "+s+`;
`},e.javascriptGenerator.math_round=e.javascriptGenerator.math_single,e.javascriptGenerator.math_trig=e.javascriptGenerator.math_single,e.javascriptGenerator.math_on_list=function(i){var s=i.getFieldValue("OP");switch(s){case"SUM":i=e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_MEMBER)||"[]",i+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":i=e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_NONE)||"[]",i="Math.min.apply(null, "+i+")";break;case"MAX":i=e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_NONE)||"[]",i="Math.max.apply(null, "+i+")";break;case"AVERAGE":s=e.javascriptGenerator.provideFunction_("mathMean",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),i=e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_NONE)||"[]",i=s+"("+i+")";break;case"MEDIAN":s=e.javascriptGenerator.provideFunction_("mathMedian",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),i=e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_NONE)||"[]",i=s+"("+i+")";break;case"MODE":s=e.javascriptGenerator.provideFunction_("mathModes",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),i=e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_NONE)||"[]",i=s+"("+i+")";break;case"STD_DEV":s=e.javascriptGenerator.provideFunction_("mathStandardDeviation",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),i=e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_NONE)||"[]",i=s+"("+i+")";break;case"RANDOM":s=e.javascriptGenerator.provideFunction_("mathRandomList",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),i=e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_NONE)||"[]",i=s+"("+i+")";break;default:throw Error("Unknown operator: "+s)}return[i,e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.math_modulo=function(i){const s=e.javascriptGenerator.valueToCode(i,"DIVIDEND",e.javascriptGenerator.ORDER_MODULUS)||"0";return i=e.javascriptGenerator.valueToCode(i,"DIVISOR",e.javascriptGenerator.ORDER_MODULUS)||"0",[s+" % "+i,e.javascriptGenerator.ORDER_MODULUS]},e.javascriptGenerator.math_constrain=function(i){const s=e.javascriptGenerator.valueToCode(i,"VALUE",e.javascriptGenerator.ORDER_NONE)||"0",n=e.javascriptGenerator.valueToCode(i,"LOW",e.javascriptGenerator.ORDER_NONE)||"0";return i=e.javascriptGenerator.valueToCode(i,"HIGH",e.javascriptGenerator.ORDER_NONE)||"Infinity",["Math.min(Math.max("+s+", "+n+"), "+i+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.math_random_int=function(i){const s=e.javascriptGenerator.valueToCode(i,"FROM",e.javascriptGenerator.ORDER_NONE)||"0";return i=e.javascriptGenerator.valueToCode(i,"TO",e.javascriptGenerator.ORDER_NONE)||"0",[e.javascriptGenerator.provideFunction_("mathRandomInt",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+s+", "+i+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.math_random_float=function(i){return["Math.random()",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.math_atan2=function(i){const s=e.javascriptGenerator.valueToCode(i,"X",e.javascriptGenerator.ORDER_NONE)||"0";return["Math.atan2("+(e.javascriptGenerator.valueToCode(i,"Y",e.javascriptGenerator.ORDER_NONE)||"0")+", "+s+") / Math.PI * 180",e.javascriptGenerator.ORDER_DIVISION]},R.module$build$src$core$utils$string,R.NameType$$module$build$src$core$names,e.javascriptGenerator.controls_repeat_ext=function(i){let s;s=i.getField("TIMES")?String(Number(i.getFieldValue("TIMES"))):e.javascriptGenerator.valueToCode(i,"TIMES",e.javascriptGenerator.ORDER_ASSIGNMENT)||"0";let n=e.javascriptGenerator.statementToCode(i,"DO");n=e.javascriptGenerator.addLoopTrap(n,i),i="";const d=e.javascriptGenerator.nameDB_.getDistinctName("count",R.NameType$$module$build$src$core$names.VARIABLE);let a=s;return s.match(/^\w+$/)||R.module$build$src$core$utils$string.isNumber(s)||(a=e.javascriptGenerator.nameDB_.getDistinctName("repeat_end",R.NameType$$module$build$src$core$names.VARIABLE),i+="var "+a+" = "+s+`;
`),i+("for (var "+d+" = 0; "+d+" < "+a+"; "+d+`++) {
`+n+`}
`)},e.javascriptGenerator.controls_repeat=e.javascriptGenerator.controls_repeat_ext,e.javascriptGenerator.controls_whileUntil=function(i){const s=i.getFieldValue("MODE")==="UNTIL";let n=e.javascriptGenerator.valueToCode(i,"BOOL",s?e.javascriptGenerator.ORDER_LOGICAL_NOT:e.javascriptGenerator.ORDER_NONE)||"false",d=e.javascriptGenerator.statementToCode(i,"DO");return d=e.javascriptGenerator.addLoopTrap(d,i),s&&(n="!"+n),"while ("+n+`) {
`+d+`}
`},e.javascriptGenerator.controls_for=function(i){var s=e.javascriptGenerator.nameDB_.getName(i.getFieldValue("VAR"),R.NameType$$module$build$src$core$names.VARIABLE),n=e.javascriptGenerator.valueToCode(i,"FROM",e.javascriptGenerator.ORDER_ASSIGNMENT)||"0",d=e.javascriptGenerator.valueToCode(i,"TO",e.javascriptGenerator.ORDER_ASSIGNMENT)||"0";const a=e.javascriptGenerator.valueToCode(i,"BY",e.javascriptGenerator.ORDER_ASSIGNMENT)||"1";let u=e.javascriptGenerator.statementToCode(i,"DO");if(u=e.javascriptGenerator.addLoopTrap(u,i),R.module$build$src$core$utils$string.isNumber(n)&&R.module$build$src$core$utils$string.isNumber(d)&&R.module$build$src$core$utils$string.isNumber(a)){var f=Number(n)<=Number(d);i="for ("+s+" = "+n+"; "+s+(f?" <= ":" >= ")+d+"; "+s,s=Math.abs(Number(a)),i=s===1?i+(f?"++":"--"):i+((f?" += ":" -= ")+s),i+=`) {
`+u+`}
`}else i="",f=n,n.match(/^\w+$/)||R.module$build$src$core$utils$string.isNumber(n)||(f=e.javascriptGenerator.nameDB_.getDistinctName(s+"_start",R.NameType$$module$build$src$core$names.VARIABLE),i+="var "+f+" = "+n+`;
`),n=d,d.match(/^\w+$/)||R.module$build$src$core$utils$string.isNumber(d)||(n=e.javascriptGenerator.nameDB_.getDistinctName(s+"_end",R.NameType$$module$build$src$core$names.VARIABLE),i+="var "+n+" = "+d+`;
`),d=e.javascriptGenerator.nameDB_.getDistinctName(s+"_inc",R.NameType$$module$build$src$core$names.VARIABLE),i+="var "+d+" = ",i=R.module$build$src$core$utils$string.isNumber(a)?i+(Math.abs(a)+`;
`):i+("Math.abs("+a+`);
`),i+="if ("+f+" > "+n+`) {
`,i+=e.javascriptGenerator.INDENT+d+" = -"+d+`;
`,i=i+`}
for (`+(s+" = "+f+"; "+d+" >= 0 ? "+s+" <= "+n+" : "+s+" >= "+n+"; "+s+" += "+d+`) {
`+u+`}
`);return i},e.javascriptGenerator.controls_forEach=function(i){const s=e.javascriptGenerator.nameDB_.getName(i.getFieldValue("VAR"),R.NameType$$module$build$src$core$names.VARIABLE);var n=e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_ASSIGNMENT)||"[]";let d=e.javascriptGenerator.statementToCode(i,"DO");d=e.javascriptGenerator.addLoopTrap(d,i),i="";let a=n;return n.match(/^\w+$/)||(a=e.javascriptGenerator.nameDB_.getDistinctName(s+"_list",R.NameType$$module$build$src$core$names.VARIABLE),i+="var "+a+" = "+n+`;
`),n=e.javascriptGenerator.nameDB_.getDistinctName(s+"_index",R.NameType$$module$build$src$core$names.VARIABLE),d=e.javascriptGenerator.INDENT+s+" = "+a+"["+n+`];
`+d,i+("for (var "+n+" in "+a+`) {
`+d+`}
`)},e.javascriptGenerator.controls_flow_statements=function(i){let s="";if(e.javascriptGenerator.STATEMENT_PREFIX&&(s+=e.javascriptGenerator.injectId(e.javascriptGenerator.STATEMENT_PREFIX,i)),e.javascriptGenerator.STATEMENT_SUFFIX&&(s+=e.javascriptGenerator.injectId(e.javascriptGenerator.STATEMENT_SUFFIX,i)),e.javascriptGenerator.STATEMENT_PREFIX){const n=i.getSurroundLoop();n&&!n.suppressPrefixSuffix&&(s+=e.javascriptGenerator.injectId(e.javascriptGenerator.STATEMENT_PREFIX,n))}switch(i.getFieldValue("FLOW")){case"BREAK":return s+`break;
`;case"CONTINUE":return s+`continue;
`}throw Error("Unknown flow statement.")},e.javascriptGenerator.controls_if=function(i){var s=0;let n="";e.javascriptGenerator.STATEMENT_PREFIX&&(n+=e.javascriptGenerator.injectId(e.javascriptGenerator.STATEMENT_PREFIX,i));do{const d=e.javascriptGenerator.valueToCode(i,"IF"+s,e.javascriptGenerator.ORDER_NONE)||"false";let a=e.javascriptGenerator.statementToCode(i,"DO"+s);e.javascriptGenerator.STATEMENT_SUFFIX&&(a=e.javascriptGenerator.prefixLines(e.javascriptGenerator.injectId(e.javascriptGenerator.STATEMENT_SUFFIX,i),e.javascriptGenerator.INDENT)+a),n+=(0<s?" else ":"")+"if ("+d+`) {
`+a+"}",s++}while(i.getInput("IF"+s));return(i.getInput("ELSE")||e.javascriptGenerator.STATEMENT_SUFFIX)&&(s=e.javascriptGenerator.statementToCode(i,"ELSE"),e.javascriptGenerator.STATEMENT_SUFFIX&&(s=e.javascriptGenerator.prefixLines(e.javascriptGenerator.injectId(e.javascriptGenerator.STATEMENT_SUFFIX,i),e.javascriptGenerator.INDENT)+s),n+=` else {
`+s+"}"),n+`
`},e.javascriptGenerator.controls_ifelse=e.javascriptGenerator.controls_if,e.javascriptGenerator.logic_compare=function(i){const s={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[i.getFieldValue("OP")],n=s==="=="||s==="!="?e.javascriptGenerator.ORDER_EQUALITY:e.javascriptGenerator.ORDER_RELATIONAL,d=e.javascriptGenerator.valueToCode(i,"A",n)||"0";return i=e.javascriptGenerator.valueToCode(i,"B",n)||"0",[d+" "+s+" "+i,n]},e.javascriptGenerator.logic_operation=function(i){const s=i.getFieldValue("OP")==="AND"?"&&":"||",n=s==="&&"?e.javascriptGenerator.ORDER_LOGICAL_AND:e.javascriptGenerator.ORDER_LOGICAL_OR;let d=e.javascriptGenerator.valueToCode(i,"A",n);if(i=e.javascriptGenerator.valueToCode(i,"B",n),d||i){const a=s==="&&"?"true":"false";d||(d=a),i||(i=a)}else i=d="false";return[d+" "+s+" "+i,n]},e.javascriptGenerator.logic_negate=function(i){const s=e.javascriptGenerator.ORDER_LOGICAL_NOT;return["!"+(e.javascriptGenerator.valueToCode(i,"BOOL",s)||"true"),s]},e.javascriptGenerator.logic_boolean=function(i){return[i.getFieldValue("BOOL")==="TRUE"?"true":"false",e.javascriptGenerator.ORDER_ATOMIC]},e.javascriptGenerator.logic_null=function(i){return["null",e.javascriptGenerator.ORDER_ATOMIC]},e.javascriptGenerator.logic_ternary=function(i){const s=e.javascriptGenerator.valueToCode(i,"IF",e.javascriptGenerator.ORDER_CONDITIONAL)||"false",n=e.javascriptGenerator.valueToCode(i,"THEN",e.javascriptGenerator.ORDER_CONDITIONAL)||"null";return i=e.javascriptGenerator.valueToCode(i,"ELSE",e.javascriptGenerator.ORDER_CONDITIONAL)||"null",[s+" ? "+n+" : "+i,e.javascriptGenerator.ORDER_CONDITIONAL]},R.NameType$$module$build$src$core$names,e.javascriptGenerator.lists_create_empty=function(i){return["[]",e.javascriptGenerator.ORDER_ATOMIC]},e.javascriptGenerator.lists_create_with=function(i){const s=Array(i.itemCount_);for(let n=0;n<i.itemCount_;n++)s[n]=e.javascriptGenerator.valueToCode(i,"ADD"+n,e.javascriptGenerator.ORDER_NONE)||"null";return["["+s.join(", ")+"]",e.javascriptGenerator.ORDER_ATOMIC]},e.javascriptGenerator.lists_repeat=function(i){const s=e.javascriptGenerator.provideFunction_("listsRepeat",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),n=e.javascriptGenerator.valueToCode(i,"ITEM",e.javascriptGenerator.ORDER_NONE)||"null";return i=e.javascriptGenerator.valueToCode(i,"NUM",e.javascriptGenerator.ORDER_NONE)||"0",[s+"("+n+", "+i+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.lists_length=function(i){return[(e.javascriptGenerator.valueToCode(i,"VALUE",e.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",e.javascriptGenerator.ORDER_MEMBER]},e.javascriptGenerator.lists_isEmpty=function(i){return["!"+(e.javascriptGenerator.valueToCode(i,"VALUE",e.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",e.javascriptGenerator.ORDER_LOGICAL_NOT]},e.javascriptGenerator.lists_indexOf=function(i){var s=i.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const n=e.javascriptGenerator.valueToCode(i,"FIND",e.javascriptGenerator.ORDER_NONE)||"''";return s=(e.javascriptGenerator.valueToCode(i,"VALUE",e.javascriptGenerator.ORDER_MEMBER)||"[]")+"."+s+"("+n+")",i.workspace.options.oneBasedIndex?[s+" + 1",e.javascriptGenerator.ORDER_ADDITION]:[s,e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.lists_getIndex=function(i){const s=i.getFieldValue("MODE")||"GET",n=i.getFieldValue("WHERE")||"FROM_START";var d=e.javascriptGenerator.valueToCode(i,"VALUE",n==="RANDOM"?e.javascriptGenerator.ORDER_NONE:e.javascriptGenerator.ORDER_MEMBER)||"[]";switch(n){case"FIRST":if(s==="GET")return[d+"[0]",e.javascriptGenerator.ORDER_MEMBER];if(s==="GET_REMOVE")return[d+".shift()",e.javascriptGenerator.ORDER_MEMBER];if(s==="REMOVE")return d+`.shift();
`;break;case"LAST":if(s==="GET")return[d+".slice(-1)[0]",e.javascriptGenerator.ORDER_MEMBER];if(s==="GET_REMOVE")return[d+".pop()",e.javascriptGenerator.ORDER_MEMBER];if(s==="REMOVE")return d+`.pop();
`;break;case"FROM_START":if(i=e.javascriptGenerator.getAdjusted(i,"AT"),s==="GET")return[d+"["+i+"]",e.javascriptGenerator.ORDER_MEMBER];if(s==="GET_REMOVE")return[d+".splice("+i+", 1)[0]",e.javascriptGenerator.ORDER_FUNCTION_CALL];if(s==="REMOVE")return d+".splice("+i+`, 1);
`;break;case"FROM_END":if(i=e.javascriptGenerator.getAdjusted(i,"AT",1,!0),s==="GET")return[d+".slice("+i+")[0]",e.javascriptGenerator.ORDER_FUNCTION_CALL];if(s==="GET_REMOVE")return[d+".splice("+i+", 1)[0]",e.javascriptGenerator.ORDER_FUNCTION_CALL];if(s==="REMOVE")return d+".splice("+i+", 1);";break;case"RANDOM":if(d=e.javascriptGenerator.provideFunction_("listsGetRandomItem",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+d+", "+(s!=="GET")+")",s==="GET"||s==="GET_REMOVE")return[d,e.javascriptGenerator.ORDER_FUNCTION_CALL];if(s==="REMOVE")return d+`;
`}throw Error("Unhandled combination (lists_getIndex).")},e.javascriptGenerator.lists_setIndex=function(i){function s(){if(n.match(/^\w+$/))return"";const f=e.javascriptGenerator.nameDB_.getDistinctName("tmpList",R.NameType$$module$build$src$core$names.VARIABLE),p="var "+f+" = "+n+`;
`;return n=f,p}let n=e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_MEMBER)||"[]";const d=i.getFieldValue("MODE")||"GET";var a=i.getFieldValue("WHERE")||"FROM_START";const u=e.javascriptGenerator.valueToCode(i,"TO",e.javascriptGenerator.ORDER_ASSIGNMENT)||"null";switch(a){case"FIRST":if(d==="SET")return n+"[0] = "+u+`;
`;if(d==="INSERT")return n+".unshift("+u+`);
`;break;case"LAST":if(d==="SET")return s()+(n+"["+n+".length - 1] = "+u+`;
`);if(d==="INSERT")return n+".push("+u+`);
`;break;case"FROM_START":if(i=e.javascriptGenerator.getAdjusted(i,"AT"),d==="SET")return n+"["+i+"] = "+u+`;
`;if(d==="INSERT")return n+".splice("+i+", 0, "+u+`);
`;break;case"FROM_END":if(i=e.javascriptGenerator.getAdjusted(i,"AT",1,!1,e.javascriptGenerator.ORDER_SUBTRACTION),a=s(),d==="SET")return a+(n+"["+n+".length - "+i+"] = "+u+`;
`);if(d==="INSERT")return a+(n+".splice("+n+".length - "+i+", 0, "+u+`);
`);break;case"RANDOM":if(i=s(),a=e.javascriptGenerator.nameDB_.getDistinctName("tmpX",R.NameType$$module$build$src$core$names.VARIABLE),i+="var "+a+" = Math.floor(Math.random() * "+n+`.length);
`,d==="SET")return i+(n+"["+a+"] = "+u+`;
`);if(d==="INSERT")return i+(n+".splice("+a+", 0, "+u+`);
`)}throw Error("Unhandled combination (lists_setIndex).")};var h=function(i,s,n){return s==="FIRST"?"0":s==="FROM_END"?i+".length - 1 - "+n:s==="LAST"?i+".length - 1":n};return e.javascriptGenerator.lists_getSublist=function(i){var s=e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_MEMBER)||"[]",n=i.getFieldValue("WHERE1"),d=i.getFieldValue("WHERE2");if(n==="FIRST"&&d==="LAST")s+=".slice(0)";else if(s.match(/^\w+$/)||n!=="FROM_END"&&d==="FROM_START"){switch(n){case"FROM_START":n=e.javascriptGenerator.getAdjusted(i,"AT1");break;case"FROM_END":n=e.javascriptGenerator.getAdjusted(i,"AT1",1,!1,e.javascriptGenerator.ORDER_SUBTRACTION),n=s+".length - "+n;break;case"FIRST":n="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(d){case"FROM_START":d=e.javascriptGenerator.getAdjusted(i,"AT2",1);break;case"FROM_END":d=e.javascriptGenerator.getAdjusted(i,"AT2",0,!1,e.javascriptGenerator.ORDER_SUBTRACTION),d=s+".length - "+d;break;case"LAST":d=s+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}s=s+".slice("+n+", "+d+")"}else{const a=e.javascriptGenerator.getAdjusted(i,"AT1");i=e.javascriptGenerator.getAdjusted(i,"AT2");const u={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};s=e.javascriptGenerator.provideFunction_("subsequence"+u[n]+u[d],`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${n==="FROM_END"||n==="FROM_START"?", at1":""}${d==="FROM_END"||d==="FROM_START"?", at2":""}) {
  var start = ${h("sequence",n,"at1")};
  var end = ${h("sequence",d,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+s+(n==="FROM_END"||n==="FROM_START"?", "+a:"")+(d==="FROM_END"||d==="FROM_START"?", "+i:"")+")"}return[s,e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.lists_sort=function(i){const s=e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]",n=i.getFieldValue("DIRECTION")==="1"?1:-1;i=i.getFieldValue("TYPE");const d=e.javascriptGenerator.provideFunction_("listsGetSortCompare",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return a.toString() > b.toString() ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `);return[s+".slice().sort("+d+'("'+i+'", '+n+"))",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.lists_split=function(i){let s=e.javascriptGenerator.valueToCode(i,"INPUT",e.javascriptGenerator.ORDER_MEMBER);const n=e.javascriptGenerator.valueToCode(i,"DELIM",e.javascriptGenerator.ORDER_NONE)||"''";if(i=i.getFieldValue("MODE"),i==="SPLIT")s||(s="''"),i="split";else if(i==="JOIN")s||(s="[]"),i="join";else throw Error("Unknown mode: "+i);return[s+"."+i+"("+n+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.lists_reverse=function(i){return[(e.javascriptGenerator.valueToCode(i,"LIST",e.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.colour_picker=function(i){return[e.javascriptGenerator.quote_(i.getFieldValue("COLOUR")),e.javascriptGenerator.ORDER_ATOMIC]},e.javascriptGenerator.colour_random=function(i){return[e.javascriptGenerator.provideFunction_("colourRandom",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.colour_rgb=function(i){const s=e.javascriptGenerator.valueToCode(i,"RED",e.javascriptGenerator.ORDER_NONE)||0,n=e.javascriptGenerator.valueToCode(i,"GREEN",e.javascriptGenerator.ORDER_NONE)||0;return i=e.javascriptGenerator.valueToCode(i,"BLUE",e.javascriptGenerator.ORDER_NONE)||0,[e.javascriptGenerator.provideFunction_("colourRgb",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+s+", "+n+", "+i+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.javascriptGenerator.colour_blend=function(i){const s=e.javascriptGenerator.valueToCode(i,"COLOUR1",e.javascriptGenerator.ORDER_NONE)||"'#000000'",n=e.javascriptGenerator.valueToCode(i,"COLOUR2",e.javascriptGenerator.ORDER_NONE)||"'#000000'";return i=e.javascriptGenerator.valueToCode(i,"RATIO",e.javascriptGenerator.ORDER_NONE)||.5,[e.javascriptGenerator.provideFunction_("colourBlend",`
function ${e.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+s+", "+n+", "+i+")",e.javascriptGenerator.ORDER_FUNCTION_CALL]},e.__namespace__=R,e})})(Jf);(function(J,Q){(function(c,R){J.exports=R(Bh.exports,Jf.exports)})(je,function(c,R){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return R})})(si);(function(J,Q){(function(c,R){J.exports=R(Bh.exports,Kf.exports,jf.exports,si.exports)})(je,function(c,R,e,o){return c.setLocale(R),c})})(Yf);(function(J,Q){(function(c,R){J.exports=R(Yf.exports)})(je,function(c){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return c})})(Xf);var Go=Xf.exports;function eT(){Go.defineBlocksWithJsonArray([{type:"character_rotate",message0:"Rotacionar para %1",colour:160,args0:[{type:"field_dropdown",name:"direction",options:[["direita","right"],["esquerda","left"]]}],tooltip:"Rotaciona o seu personagem no sentido selecionado",previousStatement:null,nextStatement:null},{type:"character_if_can_move",message0:"Se pode andar para%1%2%3",args0:[{type:"field_dropdown",name:"DIR",options:[["esquerda","left"],["direita","right"],["frente","forward"]]},{type:"input_dummy"},{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,colour:50,tooltip:"Verifica se existe caminho em uma determinada dire\xE7\xE3o"},{type:"character_if_else_can_move",message0:"Se pode andar para%1%2%3else%4",args0:[{type:"field_dropdown",name:"DIR",options:[["esquerda","left"],["direita","right"],["frente","forward"]]},{type:"input_dummy"},{type:"input_statement",name:"DO"},{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,colour:100,tooltip:"Verifica se existe caminho em uma determinada dire\xE7\xE3o"},{type:"character_walk",message0:"Andar",colour:30,tooltip:"Movimenta o personagem para a frente",previousStatement:null,nextStatement:null}]),si.exports.javascriptGenerator.character_rotate=function(J){return J.getFieldValue("direction")==="right"?`turnRight()
`:`turnLeft()
`},si.exports.javascriptGenerator.character_walk=function(J){return`moveForward()
`},si.exports.javascriptGenerator.character_if_can_move=function(J){const Q=`'${J.getFieldValue("DIR")}'`,c=si.exports.javascriptGenerator.statementToCode(J,"DO");return`if (canMoveTo(${Q})) {
${c}}
`},si.exports.javascriptGenerator.character_if_else_can_move=function(J){const Q=`'${J.getFieldValue("DIR")}'`,c=si.exports.javascriptGenerator.statementToCode(J,"DO"),R=si.exports.javascriptGenerator.statementToCode(J,"ELSE");return`if (canMoveTo(${Q})) {
${c}} else {
${R}}
`}}var Fh={exports:{}};(function(J,Q){(function(c,R){J.exports=R()})(je,function(){var c=c||{Msg:Object.create(null)};return c.Msg.ADD_COMMENT="Adicionar coment\xE1rio",c.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="N\xE3o se pode deletar a vari\xE1vel '%1' porque \xE9 parte da defini\xE7\xE3o da fun\xE7\xE3o '%2'",c.Msg.CHANGE_VALUE_TITLE="Mudar valor:",c.Msg.CLEAN_UP="Limpar blocos",c.Msg.COLLAPSED_WARNINGS_WARNING="Bloqueios recolhidos cont\xEAm avisos.",c.Msg.COLLAPSE_ALL="Colapsar Blocos",c.Msg.COLLAPSE_BLOCK="Colapsar Bloco",c.Msg.COLOUR_BLEND_COLOUR1="cor 1",c.Msg.COLOUR_BLEND_COLOUR2="cor 2",c.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",c.Msg.COLOUR_BLEND_RATIO="propor\xE7\xE3o",c.Msg.COLOUR_BLEND_TITLE="misturar",c.Msg.COLOUR_BLEND_TOOLTIP="Mistura duas cores em uma dada propor\xE7\xE3o (0,0 - 1,0).",c.Msg.COLOUR_PICKER_HELPURL="https://pt.wikipedia.org/wiki/Cor",c.Msg.COLOUR_PICKER_TOOLTIP="Escolher uma cor da palheta de cores.",c.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",c.Msg.COLOUR_RANDOM_TITLE="cor aleat\xF3ria",c.Msg.COLOUR_RANDOM_TOOLTIP="Escolher cor de forma aleat\xF3ria.",c.Msg.COLOUR_RGB_BLUE="azul",c.Msg.COLOUR_RGB_GREEN="verde",c.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",c.Msg.COLOUR_RGB_RED="vermelho",c.Msg.COLOUR_RGB_TITLE="colorir com",c.Msg.COLOUR_RGB_TOOLTIP="Criar uma cor com a quantidade especificada de vermelho, verde e azul. Todos os valores devem estar entre 0 e 100.",c.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",c.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="encerra o la\xE7o",c.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continua com a pr\xF3xima itera\xE7\xE3o do la\xE7o",c.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Encerra o la\xE7o.",c.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Ignora o resto deste la\xE7o, e continua com a pr\xF3xima itera\xE7\xE3o.",c.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Aten\xE7\xE3o: Este bloco s\xF3 pode ser usado dentro de um la\xE7o.",c.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",c.Msg.CONTROLS_FOREACH_TITLE="para cada item %1 na lista %2",c.Msg.CONTROLS_FOREACH_TOOLTIP="Para cada item em uma lista, atribua o item \xE0 vari\xE1vel '%1' e ent\xE3o realize algumas instru\xE7\xF5es.",c.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",c.Msg.CONTROLS_FOR_TITLE="contar com %1 de %2 at\xE9 %3 por %4",c.Msg.CONTROLS_FOR_TOOLTIP="Fa\xE7a com que a vari\xE1vel '%1' assuma os valores do n\xFAmero inicial ao n\xFAmero final, contando de acordo com o intervalo especificado e execute os blocos especificados.",c.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Acrescente uma condi\xE7\xE3o para o bloco se.",c.Msg.CONTROLS_IF_ELSE_TOOLTIP="Acrescente uma condi\xE7\xE3o final para o bloco se.",c.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",c.Msg.CONTROLS_IF_IF_TOOLTIP="Acrescente, remova ou reordene se\xE7\xF5es para reconfigurar este bloco.",c.Msg.CONTROLS_IF_MSG_ELSE="sen\xE3o",c.Msg.CONTROLS_IF_MSG_ELSEIF="sen\xE3o se",c.Msg.CONTROLS_IF_MSG_IF="se",c.Msg.CONTROLS_IF_TOOLTIP_1="Se um valor for verdadeiro, ent\xE3o realize algumas instru\xE7\xF5es.",c.Msg.CONTROLS_IF_TOOLTIP_2="Se um valor for verdadeiro, ent\xE3o realize o primeiro bloco de instru\xE7\xF5es. Sen\xE3o, realize o segundo bloco de instru\xE7\xF5es.",c.Msg.CONTROLS_IF_TOOLTIP_3="Se o primeiro valor \xE9 verdadeiro, ent\xE3o realize o primeiro bloco de instru\xE7\xF5es.  Sen\xE3o, se o segundo valor \xE9 verdadeiro, realize o segundo bloco de instru\xE7\xF5es.",c.Msg.CONTROLS_IF_TOOLTIP_4="Se o primeiro valor for verdadeiro, ent\xE3o realize o primeiro bloco de instru\xE7\xF5es. Sen\xE3o, se o segundo valor \xE9 verdadeiro, realize o segundo bloco de instru\xE7\xF5es. Se nenhum dos blocos for verdadeiro, realize o \xFAltimo bloco de instru\xE7\xF5es.",c.Msg.CONTROLS_REPEAT_HELPURL="https://pt.wikipedia.org/wiki/Estrutura_de_repeti%C3%A7%C3%A3o#Repeti.C3.A7.C3.A3o_com_vari.C3.A1vel_de_controle",c.Msg.CONTROLS_REPEAT_INPUT_DO="fa\xE7a",c.Msg.CONTROLS_REPEAT_TITLE="repita %1 vezes",c.Msg.CONTROLS_REPEAT_TOOLTIP="Fa\xE7a algumas instru\xE7\xF5es v\xE1rias vezes.",c.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",c.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repita at\xE9",c.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repita enquanto",c.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="Enquanto um valor for falso, ent\xE3o fa\xE7a algumas instru\xE7\xF5es.",c.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="Enquanto um valor for verdadeiro, ent\xE3o fa\xE7a algumas instru\xE7\xF5es.",c.Msg.DELETE_ALL_BLOCKS="Deletar todos os blocos %1?",c.Msg.DELETE_BLOCK="Deletar bloco",c.Msg.DELETE_VARIABLE="Deletar a vari\xE1vel '%1'",c.Msg.DELETE_VARIABLE_CONFIRMATION="Deletar %1 usos da vari\xE1vel '%2'?",c.Msg.DELETE_X_BLOCKS="Deletar %1 blocos",c.Msg.DIALOG_CANCEL="Cancelar",c.Msg.DIALOG_OK="OK",c.Msg.DISABLE_BLOCK="Desabilitar bloco",c.Msg.DUPLICATE_BLOCK="Duplicar",c.Msg.DUPLICATE_COMMENT="Duplicar coment\xE1rio",c.Msg.ENABLE_BLOCK="Habilitar bloco",c.Msg.EXPAND_ALL="Expandir blocos",c.Msg.EXPAND_BLOCK="Expandir bloco",c.Msg.EXTERNAL_INPUTS="Entradas externas",c.Msg.HELP="Ajuda",c.Msg.INLINE_INPUTS="Entradas incorporadas",c.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",c.Msg.LISTS_CREATE_EMPTY_TITLE="criar lista vazia",c.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Retorna uma lista, de tamanho 0, contendo nenhum registro",c.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="lista",c.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Acrescenta, remove ou reordena se\xE7\xF5es para reconfigurar este bloco de lista.",c.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",c.Msg.LISTS_CREATE_WITH_INPUT_WITH="criar lista com",c.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Acrescenta um item \xE0 lista.",c.Msg.LISTS_CREATE_WITH_TOOLTIP="Cria uma lista com a quantidade de itens informada.",c.Msg.LISTS_GET_INDEX_FIRST="primeiro",c.Msg.LISTS_GET_INDEX_FROM_END="n\xBA a partir do final",c.Msg.LISTS_GET_INDEX_FROM_START="n\xBA",c.Msg.LISTS_GET_INDEX_GET="obter",c.Msg.LISTS_GET_INDEX_GET_REMOVE="obter e remover",c.Msg.LISTS_GET_INDEX_LAST="\xFAltimo",c.Msg.LISTS_GET_INDEX_RANDOM="aleat\xF3rio",c.Msg.LISTS_GET_INDEX_REMOVE="remover",c.Msg.LISTS_GET_INDEX_TAIL="",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Retorna o primeiro item em uma lista.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Retorna o item da lista na posi\xE7\xE3o especificada.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Retorna o \xFAltimo item em uma lista.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Retorna um item aleat\xF3rio de uma lista.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Remove e retorna o primeiro item de uma lista.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Remove e retorna o item na posi\xE7\xE3o especificada em uma lista.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Remove e retorna o \xFAltimo item de uma lista.",c.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Remove e retorna um item aleat\xF3rio de uma lista.",c.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Remove o primeiro item de uma lista.",c.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Remove o item na posi\xE7\xE3o especificada em uma lista.",c.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Remove o \xFAltimo item de uma lista.",c.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Remove um item aleat\xF3rio de uma lista.",c.Msg.LISTS_GET_SUBLIST_END_FROM_END="at\xE9 n\xBA a partir do final",c.Msg.LISTS_GET_SUBLIST_END_FROM_START="at\xE9 n\xBA",c.Msg.LISTS_GET_SUBLIST_END_LAST="at\xE9 \xFAltimo",c.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",c.Msg.LISTS_GET_SUBLIST_START_FIRST="obt\xE9m sublista a partir do primeiro",c.Msg.LISTS_GET_SUBLIST_START_FROM_END="obt\xE9m sublista de n\xBA a partir do final",c.Msg.LISTS_GET_SUBLIST_START_FROM_START="obt\xE9m sublista de n\xBA",c.Msg.LISTS_GET_SUBLIST_TAIL="",c.Msg.LISTS_GET_SUBLIST_TOOLTIP="Cria uma c\xF3pia da por\xE7\xE3o especificada de uma lista.",c.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 \xE9 o \xFAltimo item.",c.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 \xE9 o primeiro item.",c.Msg.LISTS_INDEX_OF_FIRST="encontre a primeira ocorr\xEAncia do item",c.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",c.Msg.LISTS_INDEX_OF_LAST="encontre a \xFAltima ocorr\xEAncia do item",c.Msg.LISTS_INDEX_OF_TOOLTIP="Retorna o \xEDndice da primeira/\xFAltima ocorr\xEAncia do item na lista.  Retorna %1 se o item n\xE3o for encontrado.",c.Msg.LISTS_INLIST="na lista",c.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",c.Msg.LISTS_ISEMPTY_TITLE="%1 \xE9 vazia",c.Msg.LISTS_ISEMPTY_TOOLTIP="Retorna ao verdadeiro se a lista estiver vazia.",c.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",c.Msg.LISTS_LENGTH_TITLE="tamanho de %1",c.Msg.LISTS_LENGTH_TOOLTIP="Retorna o tamanho de uma lista.",c.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",c.Msg.LISTS_REPEAT_TITLE="criar lista com item %1 repetido %2 vezes",c.Msg.LISTS_REPEAT_TOOLTIP="Cria uma lista consistindo no valor informado repetido o n\xFAmero de vezes especificado.",c.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",c.Msg.LISTS_REVERSE_MESSAGE0="inverter %1",c.Msg.LISTS_REVERSE_TOOLTIP="Inverter uma c\xF3pia da lista.",c.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",c.Msg.LISTS_SET_INDEX_INPUT_TO="como",c.Msg.LISTS_SET_INDEX_INSERT="inserir em",c.Msg.LISTS_SET_INDEX_SET="definir",c.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Insere o item no in\xEDcio de uma lista.",c.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Insere o item na posi\xE7\xE3o especificada em uma lista.",c.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Insere o item no final de uma lista.",c.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Insere o item em uma posi\xE7\xE3o qualquer de uma lista.",c.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Define o primeiro item de uma lista.",c.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Define o item da posi\xE7\xE3o especificada de uma lista.",c.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Define o \xFAltimo item de uma lista.",c.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Define um item aleat\xF3rio de uma lista.",c.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",c.Msg.LISTS_SORT_ORDER_ASCENDING="ascendente",c.Msg.LISTS_SORT_ORDER_DESCENDING="descendente",c.Msg.LISTS_SORT_TITLE="ordenar %1 %2 %3",c.Msg.LISTS_SORT_TOOLTIP="Ordenar uma c\xF3pia de uma lista.",c.Msg.LISTS_SORT_TYPE_IGNORECASE="alfab\xE9tico, ignorar mai\xFAscula/min\xFAscula",c.Msg.LISTS_SORT_TYPE_NUMERIC="num\xE9rico",c.Msg.LISTS_SORT_TYPE_TEXT="alfab\xE9tico",c.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",c.Msg.LISTS_SPLIT_LIST_FROM_TEXT="Fazer uma lista a partir do texto",c.Msg.LISTS_SPLIT_TEXT_FROM_LIST="fazer um texto a partir da lista",c.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Juntar uma lista de textos em um \xFAnico texto, separado por um delimitador.",c.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Dividir o texto em uma lista de textos, separando-o em cada delimitador.",c.Msg.LISTS_SPLIT_WITH_DELIMITER="com delimitador",c.Msg.LOGIC_BOOLEAN_FALSE="falso",c.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",c.Msg.LOGIC_BOOLEAN_TOOLTIP="Retorna verdadeiro ou falso.",c.Msg.LOGIC_BOOLEAN_TRUE="verdadeiro",c.Msg.LOGIC_COMPARE_HELPURL="https://pt.wikipedia.org/wiki/Inequa%C3%A7%C3%A3o",c.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Retorna verdadeiro se ambas as entradas forem iguais.",c.Msg.LOGIC_COMPARE_TOOLTIP_GT="Retorna verdadeiro se a primeira entrada for maior que a segunda entrada.",c.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Retorna verdadeiro se a primeira entrada for maior ou igual \xE0 segunda entrada.",c.Msg.LOGIC_COMPARE_TOOLTIP_LT="Retorna verdadeiro se a primeira entrada for menor que a segunda entrada.",c.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Retorna verdadeiro se a primeira entrada for menor ou igual \xE0 segunda entrada.",c.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Retorna verdadeiro se ambas as entradas forem diferentes.",c.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",c.Msg.LOGIC_NEGATE_TITLE="n\xE3o %1",c.Msg.LOGIC_NEGATE_TOOLTIP="Retorna verdadeiro se a entrada for falsa.  Retorna falsa se a entrada for verdadeira.",c.Msg.LOGIC_NULL="nulo",c.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",c.Msg.LOGIC_NULL_TOOLTIP="Retorna nulo.",c.Msg.LOGIC_OPERATION_AND="e",c.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",c.Msg.LOGIC_OPERATION_OR="ou",c.Msg.LOGIC_OPERATION_TOOLTIP_AND="Retorna verdadeiro se ambas as entradas forem verdadeiras.",c.Msg.LOGIC_OPERATION_TOOLTIP_OR="Retorna verdadeiro se uma das estradas for verdadeira.",c.Msg.LOGIC_TERNARY_CONDITION="teste",c.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",c.Msg.LOGIC_TERNARY_IF_FALSE="se falso",c.Msg.LOGIC_TERNARY_IF_TRUE="se verdadeiro",c.Msg.LOGIC_TERNARY_TOOLTIP='Avalia a condi\xE7\xE3o em "teste". Se a condi\xE7\xE3o for verdadeira retorna o valor "se verdadeiro", sen\xE3o retorna o valor "se falso".',c.Msg.MATH_ADDITION_SYMBOL="+",c.Msg.MATH_ARITHMETIC_HELPURL="https://pt.wikipedia.org/wiki/Aritm%C3%A9tica",c.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Retorna a soma dos dois n\xFAmeros.",c.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Retorna o quociente da divis\xE3o dos dois n\xFAmeros.",c.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Retorna a diferen\xE7a entre os dois n\xFAmeros.",c.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Retorna o produto dos dois n\xFAmeros.",c.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Retorna o primeiro n\xFAmero elevado \xE0 pot\xEAncia do segundo n\xFAmero.",c.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",c.Msg.MATH_ATAN2_TITLE="atan2 de X:%1 Y:%2",c.Msg.MATH_ATAN2_TOOLTIP="Retorne o arco tangente do ponto (X, Y) em graus de -180 a 180.",c.Msg.MATH_CHANGE_HELPURL="https://pt.wikipedia.org/wiki/Adi%C3%A7%C3%A3o",c.Msg.MATH_CHANGE_TITLE="alterar %1 por %2",c.Msg.MATH_CHANGE_TOOLTIP='Soma um n\xFAmero \xE0 vari\xE1vel "%1".',c.Msg.MATH_CONSTANT_HELPURL="https://pt.wikipedia.org/wiki/Anexo:Lista_de_constantes_matem%C3%A1ticas",c.Msg.MATH_CONSTANT_TOOLTIP="Retorna uma das constantes comuns: \u03C0 (3.141\u2026), e (2.718\u2026), \u03C6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xBD) (0.707\u2026), ou \u221E (infinito).",c.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",c.Msg.MATH_CONSTRAIN_TITLE="restringe %1 inferior %2 superior %3",c.Msg.MATH_CONSTRAIN_TOOLTIP="Restringe um n\xFAmero entre os limites especificados (inclusivo).",c.Msg.MATH_DIVISION_SYMBOL="\xF7",c.Msg.MATH_IS_DIVISIBLE_BY="\xE9 divis\xEDvel por",c.Msg.MATH_IS_EVEN="\xE9 par",c.Msg.MATH_IS_NEGATIVE="\xE9 negativo",c.Msg.MATH_IS_ODD="\xE9 \xEDmpar",c.Msg.MATH_IS_POSITIVE="\xE9 positivo",c.Msg.MATH_IS_PRIME="\xE9 primo",c.Msg.MATH_IS_TOOLTIP="Verifica se um n\xFAmero \xE9 par, \xEDmpar, inteiro, positivo, negativo, ou se \xE9 divis\xEDvel por outro n\xFAmero.  Retorna verdadeiro ou falso.",c.Msg.MATH_IS_WHOLE="\xE9 inteiro",c.Msg.MATH_MODULO_HELPURL="https://pt.wikipedia.org/wiki/Opera%C3%A7%C3%A3o_m%C3%B3dulo",c.Msg.MATH_MODULO_TITLE="resto da divis\xE3o de %1 \xF7 %2",c.Msg.MATH_MODULO_TOOLTIP="Retorna o resto da divis\xE3o de dois n\xFAmeros.",c.Msg.MATH_MULTIPLICATION_SYMBOL="\xD7",c.Msg.MATH_NUMBER_HELPURL="https://pt.wikipedia.org/wiki/N%C3%BAmero",c.Msg.MATH_NUMBER_TOOLTIP="Um n\xFAmero.",c.Msg.MATH_ONLIST_HELPURL="",c.Msg.MATH_ONLIST_OPERATOR_AVERAGE="m\xE9dia da lista",c.Msg.MATH_ONLIST_OPERATOR_MAX="maior da lista",c.Msg.MATH_ONLIST_OPERATOR_MEDIAN="mediana da lista",c.Msg.MATH_ONLIST_OPERATOR_MIN="menor da lista",c.Msg.MATH_ONLIST_OPERATOR_MODE="moda da lista",c.Msg.MATH_ONLIST_OPERATOR_RANDOM="item aleat\xF3rio da lista",c.Msg.MATH_ONLIST_OPERATOR_STD_DEV="desvio padr\xE3o da lista",c.Msg.MATH_ONLIST_OPERATOR_SUM="soma de uma lista",c.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Retorna a m\xE9dia aritm\xE9tica dos n\xFAmeros da lista.",c.Msg.MATH_ONLIST_TOOLTIP_MAX="Retorna o maior n\xFAmero da lista.",c.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Retorna a mediana dos n\xFAmeros da lista.",c.Msg.MATH_ONLIST_TOOLTIP_MIN="Retorna o menor n\xFAmero da lista.",c.Msg.MATH_ONLIST_TOOLTIP_MODE="Retorna uma lista do(s) item(ns) mais comum(ns) da lista.",c.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Retorna um elemento aleat\xF3rio da lista.",c.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Retorna o desvio padr\xE3o dos n\xFAmeros da lista.",c.Msg.MATH_ONLIST_TOOLTIP_SUM="Retorna a soma de todos os n\xFAmeros na lista.",c.Msg.MATH_POWER_SYMBOL="^",c.Msg.MATH_RANDOM_FLOAT_HELPURL="https://pt.wikipedia.org/wiki/Gerador_de_n%C3%BAmeros_pseudoaleat%C3%B3rios",c.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="fra\xE7\xE3o aleat\xF3ria",c.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Retorna uma fra\xE7\xE3o aleat\xF3ria entre 0.0 (inclusivo) e 1.0 (exclusivo).",c.Msg.MATH_RANDOM_INT_HELPURL="https://pt.wikipedia.org/wiki/Gerador_de_n%C3%BAmeros_pseudoaleat%C3%B3rios",c.Msg.MATH_RANDOM_INT_TITLE="inteiro aleat\xF3rio entre %1 e %2",c.Msg.MATH_RANDOM_INT_TOOLTIP="Retorna um n\xFAmero inteiro entre os dois limites informados, inclusivo.",c.Msg.MATH_ROUND_HELPURL="https://pt.wikipedia.org/wiki/Arredondamento",c.Msg.MATH_ROUND_OPERATOR_ROUND="arredonda",c.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="arredonda para baixo",c.Msg.MATH_ROUND_OPERATOR_ROUNDUP="arredonda para cima",c.Msg.MATH_ROUND_TOOLTIP="Arredonda um n\xFAmero para cima ou para baixo.",c.Msg.MATH_SINGLE_HELPURL="https://pt.wikipedia.org/wiki/Raiz_quadrada",c.Msg.MATH_SINGLE_OP_ABSOLUTE="absoluto",c.Msg.MATH_SINGLE_OP_ROOT="raiz quadrada",c.Msg.MATH_SINGLE_TOOLTIP_ABS="Retorna o valor absoluto de um n\xFAmero.",c.Msg.MATH_SINGLE_TOOLTIP_EXP="Retorna o n\xFAmero e elevado \xE0 pot\xEAncia de um n\xFAmero.",c.Msg.MATH_SINGLE_TOOLTIP_LN="Retorna o logaritmo natural de um n\xFAmero.",c.Msg.MATH_SINGLE_TOOLTIP_LOG10="Retorna o logaritmo em base 10 de um n\xFAmero.",c.Msg.MATH_SINGLE_TOOLTIP_NEG="Retorna o oposto de um n\xFAmero.",c.Msg.MATH_SINGLE_TOOLTIP_POW10="Retorna 10 elevado \xE0 pot\xEAncia de um n\xFAmero.",c.Msg.MATH_SINGLE_TOOLTIP_ROOT="Retorna a raiz quadrada de um n\xFAmero.",c.Msg.MATH_SUBTRACTION_SYMBOL="-",c.Msg.MATH_TRIG_ACOS="acos",c.Msg.MATH_TRIG_ASIN="asin",c.Msg.MATH_TRIG_ATAN="atan",c.Msg.MATH_TRIG_COS="cos",c.Msg.MATH_TRIG_HELPURL="https://pt.wikipedia.org/wiki/Fun%C3%A7%C3%A3o_trigonom%C3%A9trica",c.Msg.MATH_TRIG_SIN="sin",c.Msg.MATH_TRIG_TAN="tan",c.Msg.MATH_TRIG_TOOLTIP_ACOS="Retorna o arco cosseno de um n\xFAmero.",c.Msg.MATH_TRIG_TOOLTIP_ASIN="Retorna o arco seno de um n\xFAmero.",c.Msg.MATH_TRIG_TOOLTIP_ATAN="Retorna o arco tangente de um n\xFAmero.",c.Msg.MATH_TRIG_TOOLTIP_COS="Retorna o cosseno de um grau (n\xE3o radiano).",c.Msg.MATH_TRIG_TOOLTIP_SIN="Retorna o seno de um grau (n\xE3o radiano).",c.Msg.MATH_TRIG_TOOLTIP_TAN="Retorna a tangente de um grau (n\xE3o radiano).",c.Msg.NEW_COLOUR_VARIABLE="Criar vari\xE1vel colorida...",c.Msg.NEW_NUMBER_VARIABLE="Criar vari\xE1vel num\xE9rica...",c.Msg.NEW_STRING_VARIABLE="Criar vari\xE1vel de segmentos de texto...",c.Msg.NEW_VARIABLE="Criar vari\xE1vel...",c.Msg.NEW_VARIABLE_TITLE="Nome da nova vari\xE1vel:",c.Msg.NEW_VARIABLE_TYPE_TITLE="Tipo da nova vari\xE1vel:",c.Msg.ORDINAL_NUMBER_SUFFIX="",c.Msg.PROCEDURES_ALLOW_STATEMENTS="permitir declara\xE7\xF5es",c.Msg.PROCEDURES_BEFORE_PARAMS="com:",c.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://pt.wikipedia.org/wiki/M%C3%A9todo_(programa%C3%A7%C3%A3o)",c.Msg.PROCEDURES_CALLNORETURN_TOOLTIP='Executa a fun\xE7\xE3o definida pelo usu\xE1rio "%1".',c.Msg.PROCEDURES_CALLRETURN_HELPURL="https://pt.wikipedia.org/wiki/Sub-rotina",c.Msg.PROCEDURES_CALLRETURN_TOOLTIP='Executa a fun\xE7\xE3o definida pelo usu\xE1rio "%1" e usa seu retorno.',c.Msg.PROCEDURES_CALL_BEFORE_PARAMS="com:",c.Msg.PROCEDURES_CREATE_DO='Criar "%1"',c.Msg.PROCEDURES_DEFNORETURN_COMMENT="Descreva esta fun\xE7\xE3o...",c.Msg.PROCEDURES_DEFNORETURN_DO="",c.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://pt.wikipedia.org/wiki/M%C3%A9todo_(programa%C3%A7%C3%A3o)",c.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="fa\xE7a algo",c.Msg.PROCEDURES_DEFNORETURN_TITLE="para",c.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Cria uma fun\xE7\xE3o que n\xE3o tem retorno.",c.Msg.PROCEDURES_DEFRETURN_HELPURL="https://pt.wikipedia.org/wiki/M%C3%A9todo_(programa%C3%A7%C3%A3o)",c.Msg.PROCEDURES_DEFRETURN_RETURN="retorna",c.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Cria uma fun\xE7\xE3o que possui um valor de retorno.",c.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Aten\xE7\xE3o: Esta fun\xE7\xE3o tem par\xE2metros duplicados.",c.Msg.PROCEDURES_HIGHLIGHT_DEF="Destacar defini\xE7\xE3o da fun\xE7\xE3o",c.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",c.Msg.PROCEDURES_IFRETURN_TOOLTIP="Se um valor \xE9 verdadeiro, ent\xE3o retorna um valor.",c.Msg.PROCEDURES_IFRETURN_WARNING="Aten\xE7\xE3o: Este bloco s\xF3 pode ser utilizado dentro da defini\xE7\xE3o de uma fun\xE7\xE3o.",c.Msg.PROCEDURES_MUTATORARG_TITLE="nome da entrada:",c.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Adiciona uma entrada para esta fun\xE7\xE3o",c.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="entradas",c.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Adiciona, remove, ou reordena as entradas para esta fun\xE7\xE3o.",c.Msg.REDO="Refazer",c.Msg.REMOVE_COMMENT="Remover coment\xE1rio",c.Msg.RENAME_VARIABLE="Renomear vari\xE1vel...",c.Msg.RENAME_VARIABLE_TITLE="Renomear todas as vari\xE1veis '%1' para:",c.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",c.Msg.TEXT_APPEND_TITLE="para %1 anexar texto %2",c.Msg.TEXT_APPEND_TOOLTIP='Acrescentar um peda\xE7o de texto \xE0 vari\xE1vel "%1".',c.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",c.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="para min\xFAsculas",c.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="para Nomes Pr\xF3prios",c.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="para MAI\xDASCULAS",c.Msg.TEXT_CHANGECASE_TOOLTIP="Retorna uma c\xF3pia do texto em um formato diferente.",c.Msg.TEXT_CHARAT_FIRST="obter primeira letra",c.Msg.TEXT_CHARAT_FROM_END="obter letra # a partir do final",c.Msg.TEXT_CHARAT_FROM_START="obter letra n\xBA",c.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",c.Msg.TEXT_CHARAT_LAST="obter \xFAltima letra",c.Msg.TEXT_CHARAT_RANDOM="obter letra aleat\xF3ria",c.Msg.TEXT_CHARAT_TAIL="",c.Msg.TEXT_CHARAT_TITLE="no texto %1 %2",c.Msg.TEXT_CHARAT_TOOLTIP="Retorna a letra na posi\xE7\xE3o especificada.",c.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",c.Msg.TEXT_COUNT_MESSAGE0="Contar %1 em %2",c.Msg.TEXT_COUNT_TOOLTIP="Calcule quantas vezes algum texto aparece centro de algum outro texto.",c.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Acrescentar um item ao texto.",c.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="unir",c.Msg.TEXT_CREATE_JOIN_TOOLTIP="Acrescenta, remove ou reordena se\xE7\xF5es para reconfigurar este bloco de texto.",c.Msg.TEXT_GET_SUBSTRING_END_FROM_END="at\xE9 letra n\xBA a partir do final",c.Msg.TEXT_GET_SUBSTRING_END_FROM_START="at\xE9 letra n\xBA",c.Msg.TEXT_GET_SUBSTRING_END_LAST="at\xE9 \xFAltima letra",c.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",c.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="no texto",c.Msg.TEXT_GET_SUBSTRING_START_FIRST="obter trecho de primeira letra",c.Msg.TEXT_GET_SUBSTRING_START_FROM_END="obter trecho de letra n\xBA a partir do final",c.Msg.TEXT_GET_SUBSTRING_START_FROM_START="obter trecho de letra n\xBA",c.Msg.TEXT_GET_SUBSTRING_TAIL="",c.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Retorna o trecho de texto especificado.",c.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",c.Msg.TEXT_INDEXOF_OPERATOR_FIRST="encontre a primeira ocorr\xEAncia do item",c.Msg.TEXT_INDEXOF_OPERATOR_LAST="encontre a \xFAltima ocorr\xEAncia do texto",c.Msg.TEXT_INDEXOF_TITLE="no texto %1 %2 %3",c.Msg.TEXT_INDEXOF_TOOLTIP="Retorna a posi\xE7\xE3o da primeira/\xFAltima ocorr\xEAncia do primeiro texto no segundo texto.  Retorna %1 se o texto n\xE3o for encontrado.",c.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",c.Msg.TEXT_ISEMPTY_TITLE="%1 \xE9 vazio",c.Msg.TEXT_ISEMPTY_TOOLTIP="Retorna verdadeiro se o texto fornecido for vazio.",c.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",c.Msg.TEXT_JOIN_TITLE_CREATEWITH="criar texto com",c.Msg.TEXT_JOIN_TOOLTIP="Criar um peda\xE7o de texto juntando qualquer n\xFAmero de itens.",c.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",c.Msg.TEXT_LENGTH_TITLE="tamanho de %1",c.Msg.TEXT_LENGTH_TOOLTIP="Retorna o n\xFAmero de letras (incluindo espa\xE7os) no texto fornecido.",c.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",c.Msg.TEXT_PRINT_TITLE="imprime %1",c.Msg.TEXT_PRINT_TOOLTIP="Imprime o texto, n\xFAmero ou valor especificado.",c.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",c.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Pede ao usu\xE1rio um n\xFAmero.",c.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Pede ao usu\xE1rio um texto.",c.Msg.TEXT_PROMPT_TYPE_NUMBER="Pede um n\xFAmero com uma mensagem",c.Msg.TEXT_PROMPT_TYPE_TEXT="Pede um texto com uma mensagem",c.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",c.Msg.TEXT_REPLACE_MESSAGE0="substituir %1 por %2 em %3",c.Msg.TEXT_REPLACE_TOOLTIP="Substitua todas as ocorr\xEAncias de algum texto dentro de algum outro texto.",c.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",c.Msg.TEXT_REVERSE_MESSAGE0="inverter %1",c.Msg.TEXT_REVERSE_TOOLTIP="Inverter a ordem dos caracteres no texto.",c.Msg.TEXT_TEXT_HELPURL="https://pt.wikipedia.org/wiki/Cadeia_de_caracteres",c.Msg.TEXT_TEXT_TOOLTIP="Uma letra, palavra ou linha de texto.",c.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",c.Msg.TEXT_TRIM_OPERATOR_BOTH="remover espa\xE7os de ambos os lados de",c.Msg.TEXT_TRIM_OPERATOR_LEFT="remover espa\xE7os \xE0 esquerda de",c.Msg.TEXT_TRIM_OPERATOR_RIGHT="remover espa\xE7os \xE0 direita de",c.Msg.TEXT_TRIM_TOOLTIP="Retorna uma c\xF3pia do texto com os espa\xE7os removidos de uma ou ambas extremidades.",c.Msg.TODAY="Hoje",c.Msg.UNDO="Desfazer",c.Msg.UNNAMED_KEY="Sem t\xEDtulo",c.Msg.VARIABLES_DEFAULT_NAME="item",c.Msg.VARIABLES_GET_CREATE_SET='Criar "definir %1"',c.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",c.Msg.VARIABLES_GET_TOOLTIP="Retorna o valor desta vari\xE1vel.",c.Msg.VARIABLES_SET="definir %1 para %2",c.Msg.VARIABLES_SET_CREATE_GET='Criar "obter %1"',c.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",c.Msg.VARIABLES_SET_TOOLTIP="Define esta vari\xE1vel para o valor da entrada.",c.Msg.VARIABLE_ALREADY_EXISTS="A vari\xE1vel chamada '%1' j\xE1 existe.",c.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="J\xE1 existe uma vari\xE1vel chamada '%1' para outra do tipo: '%2'.",c.Msg.WORKSPACE_ARIA_LABEL="Espa\xE7o de trabalho do Blockly",c.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Diz algo...",c.Msg.CONTROLS_FOREACH_INPUT_DO=c.Msg.CONTROLS_REPEAT_INPUT_DO,c.Msg.CONTROLS_FOR_INPUT_DO=c.Msg.CONTROLS_REPEAT_INPUT_DO,c.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=c.Msg.CONTROLS_IF_MSG_ELSEIF,c.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=c.Msg.CONTROLS_IF_MSG_ELSE,c.Msg.CONTROLS_IF_IF_TITLE_IF=c.Msg.CONTROLS_IF_MSG_IF,c.Msg.CONTROLS_IF_MSG_THEN=c.Msg.CONTROLS_REPEAT_INPUT_DO,c.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=c.Msg.CONTROLS_REPEAT_INPUT_DO,c.Msg.LISTS_CREATE_WITH_ITEM_TITLE=c.Msg.VARIABLES_DEFAULT_NAME,c.Msg.LISTS_GET_INDEX_HELPURL=c.Msg.LISTS_INDEX_OF_HELPURL,c.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=c.Msg.LISTS_INLIST,c.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=c.Msg.LISTS_INLIST,c.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=c.Msg.LISTS_INLIST,c.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=c.Msg.LISTS_INLIST,c.Msg.MATH_CHANGE_TITLE_ITEM=c.Msg.VARIABLES_DEFAULT_NAME,c.Msg.PROCEDURES_DEFRETURN_COMMENT=c.Msg.PROCEDURES_DEFNORETURN_COMMENT,c.Msg.PROCEDURES_DEFRETURN_DO=c.Msg.PROCEDURES_DEFNORETURN_DO,c.Msg.PROCEDURES_DEFRETURN_PROCEDURE=c.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,c.Msg.PROCEDURES_DEFRETURN_TITLE=c.Msg.PROCEDURES_DEFNORETURN_TITLE,c.Msg.TEXT_APPEND_VARIABLE=c.Msg.VARIABLES_DEFAULT_NAME,c.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=c.Msg.VARIABLES_DEFAULT_NAME,c.Msg.MATH_HUE="230",c.Msg.LOOPS_HUE="120",c.Msg.LISTS_HUE="260",c.Msg.LOGIC_HUE="210",c.Msg.VARIABLES_HUE="330",c.Msg.TEXTS_HUE="160",c.Msg.PROCEDURES_HUE="290",c.Msg.COLOUR_HUE="20",c.Msg.VARIABLES_DYNAMIC_HUE="310",c.Msg})})(Fh);var iT=Fh.exports,sT=Object.freeze(Qm({__proto__:null,[Symbol.toStringTag]:"Module",default:iT},[Fh.exports])),Lh=function(J,Q){return Lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,R){c.__proto__=R}||function(c,R){for(var e in R)Object.prototype.hasOwnProperty.call(R,e)&&(c[e]=R[e])},Lh(J,Q)};function Wo(J,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");Lh(J,Q);function c(){this.constructor=J}J.prototype=Q===null?Object.create(Q):(c.prototype=Q.prototype,new c)}function Mh(J){var Q=typeof Symbol=="function"&&Symbol.iterator,c=Q&&J[Q],R=0;if(c)return c.call(J);if(J&&typeof J.length=="number")return{next:function(){return J&&R>=J.length&&(J=void 0),{value:J&&J[R++],done:!J}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}function Uo(J,Q){var c=typeof Symbol=="function"&&J[Symbol.iterator];if(!c)return J;var R=c.call(J),e,o=[],g;try{for(;(Q===void 0||Q-- >0)&&!(e=R.next()).done;)o.push(e.value)}catch(l){g={error:l}}finally{try{e&&!e.done&&(c=R.return)&&c.call(R)}finally{if(g)throw g.error}}return o}function ko(J,Q,c){if(c||arguments.length===2)for(var R=0,e=Q.length,o;R<e;R++)(o||!(R in Q))&&(o||(o=Array.prototype.slice.call(Q,0,R)),o[R]=Q[R]);return J.concat(o||Array.prototype.slice.call(Q))}function Qi(J){return typeof J=="function"}function Zf(J){var Q=function(R){Error.call(R),R.stack=new Error().stack},c=J(Q);return c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c}var $h=Zf(function(J){return function(c){J(this),this.message=c?c.length+` errors occurred during unsubscription:
`+c.map(function(R,e){return e+1+") "+R.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=c}});function Ph(J,Q){if(J){var c=J.indexOf(Q);0<=c&&J.splice(c,1)}}var Xo=function(){function J(Q){this.initialTeardown=Q,this.closed=!1,this._parentage=null,this._finalizers=null}return J.prototype.unsubscribe=function(){var Q,c,R,e,o;if(!this.closed){this.closed=!0;var g=this._parentage;if(g)if(this._parentage=null,Array.isArray(g))try{for(var l=Mh(g),h=l.next();!h.done;h=l.next()){var i=h.value;i.remove(this)}}catch(f){Q={error:f}}finally{try{h&&!h.done&&(c=l.return)&&c.call(l)}finally{if(Q)throw Q.error}}else g.remove(this);var s=this.initialTeardown;if(Qi(s))try{s()}catch(f){o=f instanceof $h?f.errors:[f]}var n=this._finalizers;if(n){this._finalizers=null;try{for(var d=Mh(n),a=d.next();!a.done;a=d.next()){var u=a.value;try{Nf(u)}catch(f){o=o!=null?o:[],f instanceof $h?o=ko(ko([],Uo(o)),Uo(f.errors)):o.push(f)}}}catch(f){R={error:f}}finally{try{a&&!a.done&&(e=d.return)&&e.call(d)}finally{if(R)throw R.error}}}if(o)throw new $h(o)}},J.prototype.add=function(Q){var c;if(Q&&Q!==this)if(this.closed)Nf(Q);else{if(Q instanceof J){if(Q.closed||Q._hasParent(this))return;Q._addParent(this)}(this._finalizers=(c=this._finalizers)!==null&&c!==void 0?c:[]).push(Q)}},J.prototype._hasParent=function(Q){var c=this._parentage;return c===Q||Array.isArray(c)&&c.includes(Q)},J.prototype._addParent=function(Q){var c=this._parentage;this._parentage=Array.isArray(c)?(c.push(Q),c):c?[c,Q]:Q},J.prototype._removeParent=function(Q){var c=this._parentage;c===Q?this._parentage=null:Array.isArray(c)&&Ph(c,Q)},J.prototype.remove=function(Q){var c=this._finalizers;c&&Ph(c,Q),Q instanceof J&&Q._removeParent(this)},J.EMPTY=function(){var Q=new J;return Q.closed=!0,Q}(),J}(),Qf=Xo.EMPTY;function qf(J){return J instanceof Xo||J&&"closed"in J&&Qi(J.remove)&&Qi(J.add)&&Qi(J.unsubscribe)}function Nf(J){Qi(J)?J():J.unsubscribe()}var Gh={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Dh={setTimeout:function(J,Q){for(var c=[],R=2;R<arguments.length;R++)c[R-2]=arguments[R];var e=Dh.delegate;return e!=null&&e.setTimeout?e.setTimeout.apply(e,ko([J,Q],Uo(c))):setTimeout.apply(void 0,ko([J,Q],Uo(c)))},clearTimeout:function(J){var Q=Dh.delegate;return((Q==null?void 0:Q.clearTimeout)||clearTimeout)(J)},delegate:void 0};function nT(J){Dh.setTimeout(function(){throw J})}function wf(){}var bo=null;function Fo(J){if(Gh.useDeprecatedSynchronousErrorHandling){var Q=!bo;if(Q&&(bo={errorThrown:!1,error:null}),J(),Q){var c=bo,R=c.errorThrown,e=c.error;if(bo=null,R)throw e}}else J()}var tp=function(J){Wo(Q,J);function Q(c){var R=J.call(this)||this;return R.isStopped=!1,c?(R.destination=c,qf(c)&&c.add(R)):R.destination=lT,R}return Q.create=function(c,R,e){return new bh(c,R,e)},Q.prototype.next=function(c){this.isStopped||this._next(c)},Q.prototype.error=function(c){this.isStopped||(this.isStopped=!0,this._error(c))},Q.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Q.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,J.prototype.unsubscribe.call(this),this.destination=null)},Q.prototype._next=function(c){this.destination.next(c)},Q.prototype._error=function(c){try{this.destination.error(c)}finally{this.unsubscribe()}},Q.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},Q}(Xo),rT=Function.prototype.bind;function Ih(J,Q){return rT.call(J,Q)}var oT=function(){function J(Q){this.partialObserver=Q}return J.prototype.next=function(Q){var c=this.partialObserver;if(c.next)try{c.next(Q)}catch(R){No(R)}},J.prototype.error=function(Q){var c=this.partialObserver;if(c.error)try{c.error(Q)}catch(R){No(R)}else No(Q)},J.prototype.complete=function(){var Q=this.partialObserver;if(Q.complete)try{Q.complete()}catch(c){No(c)}},J}(),bh=function(J){Wo(Q,J);function Q(c,R,e){var o=J.call(this)||this,g;if(Qi(c)||!c)g={next:c!=null?c:void 0,error:R!=null?R:void 0,complete:e!=null?e:void 0};else{var l;o&&Gh.useDeprecatedNextContext?(l=Object.create(c),l.unsubscribe=function(){return o.unsubscribe()},g={next:c.next&&Ih(c.next,l),error:c.error&&Ih(c.error,l),complete:c.complete&&Ih(c.complete,l)}):g=c}return o.destination=new oT(g),o}return Q}(tp);function No(J){nT(J)}function aT(J){throw J}var lT={closed:!0,next:wf,error:aT,complete:wf},hT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function uT(J){return J}function cT(J){return J.length===0?uT:J.length===1?J[0]:function(c){return J.reduce(function(R,e){return e(R)},c)}}var Bf=function(){function J(Q){Q&&(this._subscribe=Q)}return J.prototype.lift=function(Q){var c=new J;return c.source=this,c.operator=Q,c},J.prototype.subscribe=function(Q,c,R){var e=this,o=fT(Q)?Q:new bh(Q,c,R);return Fo(function(){var g=e,l=g.operator,h=g.source;o.add(l?l.call(o,h):h?e._subscribe(o):e._trySubscribe(o))}),o},J.prototype._trySubscribe=function(Q){try{return this._subscribe(Q)}catch(c){Q.error(c)}},J.prototype.forEach=function(Q,c){var R=this;return c=Ff(c),new c(function(e,o){var g=new bh({next:function(l){try{Q(l)}catch(h){o(h),g.unsubscribe()}},error:o,complete:e});R.subscribe(g)})},J.prototype._subscribe=function(Q){var c;return(c=this.source)===null||c===void 0?void 0:c.subscribe(Q)},J.prototype[hT]=function(){return this},J.prototype.pipe=function(){for(var Q=[],c=0;c<arguments.length;c++)Q[c]=arguments[c];return cT(Q)(this)},J.prototype.toPromise=function(Q){var c=this;return Q=Ff(Q),new Q(function(R,e){var o;c.subscribe(function(g){return o=g},function(g){return e(g)},function(){return R(o)})})},J.create=function(Q){return new J(Q)},J}();function Ff(J){var Q;return(Q=J!=null?J:Gh.Promise)!==null&&Q!==void 0?Q:Promise}function dT(J){return J&&Qi(J.next)&&Qi(J.error)&&Qi(J.complete)}function fT(J){return J&&J instanceof tp||dT(J)&&qf(J)}var pT=Zf(function(J){return function(){J(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),$i=function(J){Wo(Q,J);function Q(){var c=J.call(this)||this;return c.closed=!1,c.currentObservers=null,c.observers=[],c.isStopped=!1,c.hasError=!1,c.thrownError=null,c}return Q.prototype.lift=function(c){var R=new Gf(this,this);return R.operator=c,R},Q.prototype._throwIfClosed=function(){if(this.closed)throw new pT},Q.prototype.next=function(c){var R=this;Fo(function(){var e,o;if(R._throwIfClosed(),!R.isStopped){R.currentObservers||(R.currentObservers=Array.from(R.observers));try{for(var g=Mh(R.currentObservers),l=g.next();!l.done;l=g.next()){var h=l.value;h.next(c)}}catch(i){e={error:i}}finally{try{l&&!l.done&&(o=g.return)&&o.call(g)}finally{if(e)throw e.error}}}})},Q.prototype.error=function(c){var R=this;Fo(function(){if(R._throwIfClosed(),!R.isStopped){R.hasError=R.isStopped=!0,R.thrownError=c;for(var e=R.observers;e.length;)e.shift().error(c)}})},Q.prototype.complete=function(){var c=this;Fo(function(){if(c._throwIfClosed(),!c.isStopped){c.isStopped=!0;for(var R=c.observers;R.length;)R.shift().complete()}})},Q.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(Q.prototype,"observed",{get:function(){var c;return((c=this.observers)===null||c===void 0?void 0:c.length)>0},enumerable:!1,configurable:!0}),Q.prototype._trySubscribe=function(c){return this._throwIfClosed(),J.prototype._trySubscribe.call(this,c)},Q.prototype._subscribe=function(c){return this._throwIfClosed(),this._checkFinalizedStatuses(c),this._innerSubscribe(c)},Q.prototype._innerSubscribe=function(c){var R=this,e=this,o=e.hasError,g=e.isStopped,l=e.observers;return o||g?Qf:(this.currentObservers=null,l.push(c),new Xo(function(){R.currentObservers=null,Ph(l,c)}))},Q.prototype._checkFinalizedStatuses=function(c){var R=this,e=R.hasError,o=R.thrownError,g=R.isStopped;e?c.error(o):g&&c.complete()},Q.prototype.asObservable=function(){var c=new Bf;return c.source=this,c},Q.create=function(c,R){return new Gf(c,R)},Q}(Bf),Gf=function(J){Wo(Q,J);function Q(c,R){var e=J.call(this)||this;return e.destination=c,e.source=R,e}return Q.prototype.next=function(c){var R,e;(e=(R=this.destination)===null||R===void 0?void 0:R.next)===null||e===void 0||e.call(R,c)},Q.prototype.error=function(c){var R,e;(e=(R=this.destination)===null||R===void 0?void 0:R.error)===null||e===void 0||e.call(R,c)},Q.prototype.complete=function(){var c,R;(R=(c=this.destination)===null||c===void 0?void 0:c.complete)===null||R===void 0||R.call(c)},Q.prototype._subscribe=function(c){var R,e;return(e=(R=this.source)===null||R===void 0?void 0:R.subscribe(c))!==null&&e!==void 0?e:Qf},Q}($i);const ep=new $i;new $i;const ip=new $i,sp=new $i,np=new $i,rp=new $i,op=new $i,ap=new $i,lp=new $i,hp=new $i;let Uh=J=>!1;function vT(){return ep.asObservable()}function gT(){ep.next()}function mT(){return ip.asObservable()}function TT(){ip.next()}function up(){return sp.asObservable()}function kh(){sp.next()}function ET(){return np.asObservable()}function Oh(){np.next()}function xT(){return rp.asObservable()}function Ah(){rp.next()}function yT(){return ap.asObservable()}function Uf(){ap.next()}function ST(){return op.asObservable()}function kf(){op.next()}function CT(){return hp.asObservable()}function Hf(J){hp.next(J)}function RT(){return lp.asObservable()}function $T(){lp.next()}function IT(J){Uh=J}function OT(){Uh=J=>!1}function AT(J){return Uh(J)}const LT=[{paramName:"repeat",blockName:"controls_repeat_ext"},{paramName:"walk",blockName:"character_walk"},{paramName:"rotate",blockName:"character_rotate"},{paramName:"if",blockName:"character_if_can_move"},{paramName:"ifelse",blockName:"character_if_else_can_move"}];let Nh=[{kind:"block",type:"controls_repeat"},{kind:"block",type:"character_walk"},{kind:"block",type:"character_rotate"},{kind:"block",type:"character_if_can_move"},{kind:"block",type:"character_if_else_can_move"}];const MT=window.location.href,cp=new URL(MT);var Vf;const wo=(Vf=cp.searchParams.get("blocks"))==null?void 0:Vf.toLowerCase();var Wf;const PT=(Wf=cp.searchParams.get("limit"))==null?void 0:Wf.toLowerCase(),Bo=Number(PT);if(wo){Nh=[];const J=wo==null?void 0:wo.split(",");J==null||J.forEach(Q=>{const c=LT.find(R=>R.paramName===Q);c&&Nh.push({kind:"block",type:c.blockName})})}const DT={kind:"flyoutToolbox",contents:Nh};let Tn,dp,Yo=!1,zo=!1,Hh=!1,Er=document.getElementById("run-code");xT().subscribe(()=>{Yo=!0});ET().subscribe(()=>{Yo=!1});up().subscribe(()=>{zo=!1,fp(""),Er.textContent="EXECUTAR"});mT().subscribe(()=>{Er.textContent="INTERROMPER",zo=!0,Yo=!1,pp()});yT().subscribe(()=>{Hh=!0});ST().subscribe(()=>{Hh=!1});vT().subscribe(()=>{Go.svgResize(Tn)});function bT(){eT(),Go.setLocale(sT);const J={toolbox:DT};if(Bo&&(J.maxBlocks=Bo),Tn=Go.inject("blocklyArea",J),document.getElementById("blocklyArea"),Bo){const Q=document.getElementById("block-limit");Q&&(Q.textContent=`Blocos restantes: ${Bo}`,Q.style.display="block",Tn.addChangeListener(()=>{Q.textContent=`Blocos restantes: ${Tn.remainingCapacity()}`}))}si.exports.javascriptGenerator.STATEMENT_PREFIX=`highlightBlock(%1);
`,si.exports.javascriptGenerator.addReservedWords("highlightBlock"),window.LoopTrap=1e3,si.exports.javascriptGenerator.INFINITE_LOOP_TRAP=`if(--window.LoopTrap == 0) throw "Infinite loop.";
`,Er==null||Er.addEventListener("pointerdown",()=>{if(!Hh){if(!zo){var Q=si.exports.javascriptGenerator.workspaceToCode(Tn);dp=new Interpreter(Q,NT),TT();return}kh()}})}function fp(J){Tn.highlightBlock(J)}function NT(J,Q){var c=function(l){return fp(l)};J.setProperty(Q,"highlightBlock",J.createNativeFunction(c));var R=function(){Hf("left")};J.setProperty(Q,"turnLeft",J.createNativeFunction(R));var e=function(){Hf("right")};J.setProperty(Q,"turnRight",J.createNativeFunction(e));var o=function(){$T()};J.setProperty(Q,"moveForward",J.createNativeFunction(o));var g=function(l){return AT(l)};J.setProperty(Q,"canMoveTo",J.createNativeFunction(g))}function pp(){!zo||(Yo||dp.step()||kh(),setTimeout(pp,0))}var vp={exports:{}};(function(J,Q){(function(R,e){J.exports=e()})(je,function(){return function(c){var R={};function e(o){if(R[o])return R[o].exports;var g=R[o]={i:o,l:!1,exports:{}};return c[o].call(g.exports,g,g.exports,e),g.l=!0,g.exports}return e.m=c,e.c=R,e.d=function(o,g,l){e.o(o,g)||Object.defineProperty(o,g,{enumerable:!0,get:l})},e.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},e.t=function(o,g){if(g&1&&(o=e(o)),g&8||g&4&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(e.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),g&2&&typeof o!="string")for(var h in o)e.d(l,h,function(i){return o[i]}.bind(null,h));return l},e.n=function(o){var g=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(g,"a",g),g},e.o=function(o,g){return Object.prototype.hasOwnProperty.call(o,g)},e.p="",e(e.s=1528)}([function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(s){return!!s.get&&typeof s.get=="function"||!!s.set&&typeof s.set=="function"}function o(s,n,d){var a=d?s[n]:Object.getOwnPropertyDescriptor(s,n);return!d&&a.value&&typeof a.value=="object"&&(a=a.value),a&&e(a)?(typeof a.enumerable=="undefined"&&(a.enumerable=!0),typeof a.configurable=="undefined"&&(a.configurable=!0),a):!1}function g(s,n){var d=Object.getOwnPropertyDescriptor(s,n);return d?(d.value&&typeof d.value=="object"&&(d=d.value),d.configurable===!1):!1}function l(s,n,d,a){for(var u in n)if(!!n.hasOwnProperty(u)){var f=o(n,u,d);if(f!==!1){var p=a||s;if(g(p.prototype,u)){if(i.ignoreFinals)continue;throw new Error("cannot override final property '"+u+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(s.prototype,u,f)}else s.prototype[u]=n[u]}}function h(s,n){if(!!n){Array.isArray(n)||(n=[n]);for(var d=0;d<n.length;d++)l(s,n[d].prototype||n[d])}}function i(s){s||(s={});var n,d;if(s.initialize){if(typeof s.initialize!="function")throw new Error("initialize must be a function");n=s.initialize,delete s.initialize}else if(s.Extends){var a=s.Extends;n=function(){a.apply(this,arguments)}}else n=function(){};s.Extends?(n.prototype=Object.create(s.Extends.prototype),n.prototype.constructor=n,d=s.Extends,delete s.Extends):n.prototype.constructor=n;var u=null;return s.Mixins&&(u=s.Mixins,delete s.Mixins),h(n,u),l(n,s,!0,d),n}i.extend=l,i.mixin=h,i.ignoreFinals=!1,c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(){};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=typeof o;return!o||h==="number"||h==="string"?l:o.hasOwnProperty(g)&&o[g]!==void 0?o[g]:l};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(124),l=new o({initialize:function(i,s){this.x=0,this.y=0,typeof i=="object"?(this.x=i.x||0,this.y=i.y||0):(s===void 0&&(s=i),this.x=i||0,this.y=s||0)},clone:function(){return new l(this.x,this.y)},copy:function(h){return this.x=h.x||0,this.y=h.y||0,this},setFromObject:function(h){return this.x=h.x||0,this.y=h.y||0,this},set:function(h,i){return i===void 0&&(i=h),this.x=h,this.y=i,this},setTo:function(h,i){return this.set(h,i)},setToPolar:function(h,i){return i==null&&(i=1),this.x=Math.cos(h)*i,this.y=Math.sin(h)*i,this},equals:function(h){return this.x===h.x&&this.y===h.y},fuzzyEquals:function(h,i){return g(this.x,h.x,i)&&g(this.y,h.y,i)},angle:function(){var h=Math.atan2(this.y,this.x);return h<0&&(h+=2*Math.PI),h},setAngle:function(h){return this.setToPolar(h,this.length())},add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this},scale:function(h){return isFinite(h)?(this.x*=h,this.y*=h):(this.x=0,this.y=0),this},divide:function(h){return this.x/=h.x,this.y/=h.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(h){var i=h.x-this.x,s=h.y-this.y;return Math.sqrt(i*i+s*s)},distanceSq:function(h){var i=h.x-this.x,s=h.y-this.y;return i*i+s*s},length:function(){var h=this.x,i=this.y;return Math.sqrt(h*h+i*i)},setLength:function(h){return this.normalize().scale(h)},lengthSq:function(){var h=this.x,i=this.y;return h*h+i*i},normalize:function(){var h=this.x,i=this.y,s=h*h+i*i;return s>0&&(s=1/Math.sqrt(s),this.x=h*s,this.y=i*s),this},normalizeRightHand:function(){var h=this.x;return this.x=this.y*-1,this.y=h,this},normalizeLeftHand:function(){var h=this.x;return this.x=this.y,this.y=h*-1,this},dot:function(h){return this.x*h.x+this.y*h.y},cross:function(h){return this.x*h.y-this.y*h.x},lerp:function(h,i){i===void 0&&(i=0);var s=this.x,n=this.y;return this.x=s+i*(h.x-s),this.y=n+i*(h.y-n),this},transformMat3:function(h){var i=this.x,s=this.y,n=h.val;return this.x=n[0]*i+n[3]*s+n[6],this.y=n[1]*i+n[4]*s+n[7],this},transformMat4:function(h){var i=this.x,s=this.y,n=h.val;return this.x=n[0]*i+n[4]*s+n[12],this.y=n[1]*i+n[5]*s+n[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(h){var i=this.length();return i&&i>h&&this.scale(h/i),this},reflect:function(h){return h=h.clone().normalize(),this.subtract(h.scale(2*this.dot(h)))},mirror:function(h){return this.reflect(h).negate()},rotate:function(h){var i=Math.cos(h),s=Math.sin(h);return this.set(i*this.x-s*this.y,s*this.x+i*this.y)}});l.ZERO=new l,l.RIGHT=new l(1,0),l.LEFT=new l(-1,0),l.UP=new l(0,-1),l.DOWN=new l(0,1),l.ONE=new l(1,1),c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(56),l=new o({initialize:function(i,s){i===void 0&&(i=0),s===void 0&&(s=i),this.type=g.POINT,this.x=i,this.y=s},setTo:function(h,i){return h===void 0&&(h=0),i===void 0&&(i=h),this.x=h,this.y=i,this}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(24),l=e(20),h=new o({initialize:function(s){this.scene=s,this.systems=s.sys,this.events=s.sys.events,this.displayList,this.updateList,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},existing:function(i){return(i.renderCanvas||i.renderWebGL)&&this.displayList.add(i),i.preUpdate&&this.updateList.add(i),i},shutdown:function(){this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(i,s){h.prototype.hasOwnProperty(i)||(h.prototype[i]=s)},h.remove=function(i){h.prototype.hasOwnProperty(i)&&delete h.prototype[i]},g.register("GameObjectFactory",h,"add"),c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){if(!o||typeof o=="number")return l;if(o.hasOwnProperty(g))return o[g];if(g.indexOf(".")!==-1){for(var h=g.split("."),i=o,s=l,n=0;n<h.length;n++)if(i.hasOwnProperty(h[n]))s=i[h[n]],i=i[h[n]];else{s=l;break}return s}else return l};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){if(typeof o!="object"||o.nodeType||o===o.window)return!1;try{if(o.constructor&&!{}.hasOwnProperty.call(o.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={},o={install:function(g){for(var l in e)g[l]=e[l]},register:function(g,l){e[g]=l},destroy:function(){e={}}};c.exports=o},function(c,R,e){var o=Object.prototype.hasOwnProperty,g="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(g=!1));function h(d,a,u){this.fn=d,this.context=a,this.once=u||!1}function i(d,a,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var v=new h(u,f||d,p),m=g?g+a:a;return d._events[m]?d._events[m].fn?d._events[m]=[d._events[m],v]:d._events[m].push(v):(d._events[m]=v,d._eventsCount++),d}function s(d,a){--d._eventsCount===0?d._events=new l:delete d._events[a]}function n(){this._events=new l,this._eventsCount=0}n.prototype.eventNames=function(){var a=[],u,f;if(this._eventsCount===0)return a;for(f in u=this._events)o.call(u,f)&&a.push(g?f.slice(1):f);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(u)):a},n.prototype.listeners=function(a){var u=g?g+a:a,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,v=f.length,m=new Array(v);p<v;p++)m[p]=f[p].fn;return m},n.prototype.listenerCount=function(a){var u=g?g+a:a,f=this._events[u];return f?f.fn?1:f.length:0},n.prototype.emit=function(a,u,f,p,v,m){var E=g?g+a:a;if(!this._events[E])return!1;var x=this._events[E],y=arguments.length,S,C;if(x.fn){switch(x.once&&this.removeListener(a,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,u),!0;case 3:return x.fn.call(x.context,u,f),!0;case 4:return x.fn.call(x.context,u,f,p),!0;case 5:return x.fn.call(x.context,u,f,p,v),!0;case 6:return x.fn.call(x.context,u,f,p,v,m),!0}for(C=1,S=new Array(y-1);C<y;C++)S[C-1]=arguments[C];x.fn.apply(x.context,S)}else{var I=x.length,O;for(C=0;C<I;C++)switch(x[C].once&&this.removeListener(a,x[C].fn,void 0,!0),y){case 1:x[C].fn.call(x[C].context);break;case 2:x[C].fn.call(x[C].context,u);break;case 3:x[C].fn.call(x[C].context,u,f);break;case 4:x[C].fn.call(x[C].context,u,f,p);break;default:if(!S)for(O=1,S=new Array(y-1);O<y;O++)S[O-1]=arguments[O];x[C].fn.apply(x[C].context,S)}}return!0},n.prototype.on=function(a,u,f){return i(this,a,u,f,!1)},n.prototype.once=function(a,u,f){return i(this,a,u,f,!0)},n.prototype.removeListener=function(a,u,f,p){var v=g?g+a:a;if(!this._events[v])return this;if(!u)return s(this,v),this;var m=this._events[v];if(m.fn)m.fn===u&&(!p||m.once)&&(!f||m.context===f)&&s(this,v);else{for(var E=0,x=[],y=m.length;E<y;E++)(m[E].fn!==u||p&&!m[E].once||f&&m[E].context!==f)&&x.push(m[E]);x.length?this._events[v]=x.length===1?x[0]:x:s(this,v)}return this},n.prototype.removeAllListeners=function(a){var u;return a?(u=g?g+a:a,this._events[u]&&s(this,u)):(this._events=new l,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=g,n.EventEmitter=n,c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(57),l=e(171),h=e(306),i=e(56),s=e(47),n=e(174),d=new o({initialize:function(u,f,p,v){u===void 0&&(u=0),f===void 0&&(f=0),p===void 0&&(p=0),v===void 0&&(v=0),this.type=i.RECTANGLE,this.x=u,this.y=f,this.width=p,this.height=v},contains:function(a,u){return g(this,a,u)},getPoint:function(a,u){return l(this,a,u)},getPoints:function(a,u,f){return h(this,a,u,f)},getRandomPoint:function(a){return n(this,a)},setTo:function(a,u,f,p){return this.x=a,this.y=u,this.width=f,this.height=p,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(a,u){return u===void 0&&(u=a),this.x=a,this.y=u,this},setSize:function(a,u){return u===void 0&&(u=a),this.width=a,this.height=u,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(a){return a===void 0&&(a=new s),a.setTo(this.x,this.y,this.right,this.y),a},getLineB:function(a){return a===void 0&&(a=new s),a.setTo(this.right,this.y,this.right,this.bottom),a},getLineC:function(a){return a===void 0&&(a=new s),a.setTo(this.right,this.bottom,this.x,this.bottom),a},getLineD:function(a){return a===void 0&&(a=new s),a.setTo(this.x,this.bottom,this.x,this.y),a},left:{get:function(){return this.x},set:function(a){a>=this.right?this.width=0:this.width=this.right-a,this.x=a}},right:{get:function(){return this.x+this.width},set:function(a){a<=this.x?this.width=0:this.width=a-this.x}},top:{get:function(){return this.y},set:function(a){a>=this.bottom?this.height=0:this.height=this.bottom-a,this.y=a}},bottom:{get:function(){return this.y+this.height},set:function(a){a<=this.y?this.height=0:this.height=a-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(a){this.x=a-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(a){this.y=a-this.height/2}}});c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Alpha:e(607),AlphaSingle:e(303),BlendMode:e(304),ComputedSize:e(608),Crop:e(609),Depth:e(305),Flip:e(610),GetBounds:e(611),Mask:e(309),Origin:e(632),PathFollower:e(633),Pipeline:e(167),ScrollFactor:e(312),Size:e(634),Texture:e(635),TextureCrop:e(636),Tint:e(637),ToJSON:e(176),Transform:e(313),TransformMatrix:e(25),Visible:e(314)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(o){for(var g="",l=0;l<o;++l)l>0&&(g+=`
else `),l<o-1&&(g+="if(test == "+l+".0){}");return g}c.exports={getTintFromFloats:function(o,g,l,h){var i=(o*255|0)&255,s=(g*255|0)&255,n=(l*255|0)&255,d=(h*255|0)&255;return(d<<24|i<<16|s<<8|n)>>>0},getTintAppendFloatAlpha:function(o,g){var l=(g*255|0)&255;return(l<<24|o)>>>0},getTintAppendFloatAlphaAndSwap:function(o,g){var l=(o>>16|0)&255,h=(o>>8|0)&255,i=(o|0)&255,s=(g*255|0)&255;return(s<<24|i<<16|h<<8|l)>>>0},getFloatsFromUintRGB:function(o){var g=(o>>16|0)&255,l=(o>>8|0)&255,h=(o|0)&255;return[g/255,l/255,h/255]},checkShaderMax:function(o,g){(!g||g===-1)&&(g=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS));for(var l=o.createShader(o.FRAGMENT_SHADER),h=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var i=h.replace(/%forloop%/gi,e(g));if(o.shaderSource(l,i),o.compileShader(l),!o.getShaderParameter(l,o.COMPILE_STATUS))g=g/2|0;else break}return g},parseFragmentShaderMaxTextures:function(o,g){if(!o)return"";for(var l="",h=0;h<g;h++)h>0&&(l+=`
	else `),h<g-1&&(l+="if (outTexId < "+h+".5)"),l+=`
	{`,l+=`
		texture = texture2D(uMainSampler[`+h+"], outTexCoord);",l+=`
	}`;return o=o.replace(/%count%/gi,g.toString()),o.replace(/%forloop%/gi,l)}}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(193),g=e(6),l=function(h,i,s){var n=g(h,i,null);if(n===null)return s;if(Array.isArray(n))return o.RND.pick(n);if(typeof n=="object"){if(n.hasOwnProperty("randInt"))return o.RND.integerInRange(n.randInt[0],n.randInt[1]);if(n.hasOwnProperty("randFloat"))return o.RND.realInRange(n.randFloat[0],n.randFloat[1])}else if(typeof n=="function")return n(i);return n};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(176),l=e(101),h=e(9),i=e(75),s=e(20),n=new o({Extends:h,initialize:function(a,u){h.call(this),this.scene=a,this.displayList=null,this.type=u,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(i.ADDED_TO_SCENE,this.addedToScene,this),this.on(i.REMOVED_FROM_SCENE,this.removedFromScene,this),a.sys.queueDepthSort()},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},setState:function(d){return this.state=d,this},setDataEnabled:function(){return this.data||(this.data=new l(this)),this},setData:function(d,a){return this.data||(this.data=new l(this)),this.data.set(d,a),this},incData:function(d,a){return this.data||(this.data=new l(this)),this.data.inc(d,a),this},toggleData:function(d){return this.data||(this.data=new l(this)),this.data.toggle(d),this},getData:function(d){return this.data||(this.data=new l(this)),this.data.get(d)},setInteractive:function(d,a,u){return this.scene.sys.input.enable(this,d,a,u),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return g(this)},willRender:function(d){return!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},getIndexList:function(){for(var d=this,a=this.parentContainer,u=[];a&&(u.unshift(a.getIndex(d)),d=a,a.parentContainer);)a=a.parentContainer;return this.displayList?u.unshift(this.displayList.getIndex(d)):u.unshift(this.scene.sys.displayList.getIndex(d)),u},addToDisplayList:function(d){return d===void 0&&(d=this.scene.sys.displayList),this.displayList&&this.displayList!==d&&this.removeFromDisplayList(),d.exists(this)||(this.displayList=d,d.add(this,!0),d.queueDepthSort(),this.emit(i.ADDED_TO_SCENE,this,this.scene),d.events.emit(s.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var d=this.displayList||this.scene.sys.displayList;return d.exists(this)&&(d.remove(this,!0),d.queueDepthSort(),this.displayList=null,this.emit(i.REMOVED_FROM_SCENE,this,this.scene),d.events.emit(s.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(d){!this.scene||this.ignoreDestroy||(d===void 0&&(d=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(i.DESTROY,this,d),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});n.RENDER_MASK=15,c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(24),l=e(20),h=new o({initialize:function(s){this.scene=s,this.systems=s.sys,this.events=s.sys.events,this.displayList,this.updateList,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(i,s){h.prototype.hasOwnProperty(i)||(h.prototype[i]=s)},h.remove=function(i){h.prototype.hasOwnProperty(i)&&delete h.prototype[i]},g.register("GameObjectCreator",h,"make"),c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(7),g=function(){var l,h,i,s,n,d,a=arguments[0]||{},u=1,f=arguments.length,p=!1;for(typeof a=="boolean"&&(p=a,a=arguments[1]||{},u=2),f===u&&(a=this,--u);u<f;u++)if((l=arguments[u])!=null)for(h in l)i=a[h],s=l[h],a!==s&&(p&&s&&(o(s)||(n=Array.isArray(s)))?(n?(n=!1,d=i&&Array.isArray(i)?i:[]):d=i&&o(i)?i:{},a[h]=g(p,d,s)):s!==void 0&&(a[h]=s));return a};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return Math.max(g,Math.min(l,o))};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(25),g=new o,l=new o,h=new o,i={camera:g,sprite:l,calc:h},s=function(n,d,a){var u=g,f=l,p=h;return f.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),u.copyFrom(d.matrix),a?(u.multiplyWithOffset(a,-d.scrollX*n.scrollFactorX,-d.scrollY*n.scrollFactorY),f.e=n.x,f.f=n.y):(f.e-=d.scrollX*n.scrollFactorX,f.f-=d.scrollY*n.scrollFactorY),u.multiply(f,p),i};c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ADDED_TO_SCENE:e(656),BOOT:e(657),CREATE:e(658),DESTROY:e(659),PAUSE:e(660),POST_UPDATE:e(661),PRE_RENDER:e(662),PRE_UPDATE:e(663),READY:e(664),REMOVED_FROM_SCENE:e(665),RENDER:e(666),RESUME:e(667),SHUTDOWN:e(668),SLEEP:e(669),START:e(670),TRANSITION_COMPLETE:e(671),TRANSITION_INIT:e(672),TRANSITION_OUT:e(673),TRANSITION_START:e(674),TRANSITION_WAKE:e(675),UPDATE:e(676),WAKE:e(677)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BLUR:e(612),BOOT:e(613),CONTEXT_LOST:e(614),CONTEXT_RESTORED:e(615),DESTROY:e(616),FOCUS:e(617),HIDDEN:e(618),PAUSE:e(619),POST_RENDER:e(620),POST_STEP:e(621),PRE_RENDER:e(622),PRE_STEP:e(623),READY:e(624),RESUME:e(625),STEP:e(626),VISIBLE:e(627)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(95),h=e(2),i=e(155),s=e(240),n=e(517),d=e(156),a=new o({initialize:function(f,p){this.loader=f,this.cache=h(p,"cache",!1),this.type=h(p,"type",!1),this.key=h(p,"key",!1);var v=this.key;if(f.prefix&&f.prefix!==""&&(this.key=f.prefix+v),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var m=h(p,"url");m===void 0?m=f.path+v+"."+h(p,"extension",""):typeof m=="string"&&!m.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(m=f.path+m),this.url=m,this.src="",this.xhrSettings=d(h(p,"responseType",void 0)),h(p,"xhrSettings",!1)&&(this.xhrSettings=s(this.xhrSettings,h(p,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?g.FILE_POPULATED:g.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=h(p,"config",{}),this.multiFile,this.linkFile},setLink:function(u){this.linkFile=u,u.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===g.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=g.FILE_LOADING,this.src=i(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=n(this,this.loader.xhr))},onLoad:function(u,f){var p=u.responseURL&&(u.responseURL.indexOf("file://")===0||u.responseURL.indexOf("capacitor://")===0),v=p&&f.target.status===0,m=!(f.target&&f.target.status!==200)||v;u.readyState===4&&u.status>=400&&u.status<=599&&(m=!1),this.state=g.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,m)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(u){u.lengthComputable&&(this.bytesLoaded=u.loaded,this.bytesTotal=u.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(l.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=g.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=g.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=g.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(u){u===void 0&&(u=this.data);var f=this.key,p=this.type;this.loader.emit(l.FILE_COMPLETE,f,p,u),this.loader.emit(l.FILE_KEY_COMPLETE+p+"-"+f,f,p,u),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});a.createObjectURL=function(u,f,p){if(typeof URL=="function")u.src=URL.createObjectURL(f);else{var v=new FileReader;v.onload=function(){u.removeAttribute("crossOrigin"),u.src="data:"+(f.type||p)+";base64,"+v.result.split(",")[1]},v.onerror=u.onerror,v.readAsDataURL(f)}},a.revokeObjectURL=function(u){typeof URL=="function"&&URL.revokeObjectURL(u.src)},c.exports=a},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={},o={},g={};g.register=function(l,h,i,s){s===void 0&&(s=!1),e[l]={plugin:h,mapping:i,custom:s}},g.registerCustom=function(l,h,i,s){o[l]={plugin:h,mapping:i,data:s}},g.hasCore=function(l){return e.hasOwnProperty(l)},g.hasCustom=function(l){return o.hasOwnProperty(l)},g.getCore=function(l){return e[l]},g.getCustom=function(l){return o[l]},g.getCustomClass=function(l){return o.hasOwnProperty(l)?o[l].plugin:null},g.remove=function(l){e.hasOwnProperty(l)&&delete e[l]},g.removeCustom=function(l){o.hasOwnProperty(l)&&delete o[l]},g.destroyCorePlugins=function(){for(var l in e)e.hasOwnProperty(l)&&delete e[l]},g.destroyCustomPlugins=function(){for(var l in o)o.hasOwnProperty(l)&&delete o[l]},c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(14),l=e(3),h=new o({initialize:function(s,n,d,a,u,f){s===void 0&&(s=1),n===void 0&&(n=0),d===void 0&&(d=0),a===void 0&&(a=1),u===void 0&&(u=0),f===void 0&&(f=0),this.matrix=new Float32Array([s,n,d,a,u,f,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(i){this.matrix[0]=i}},b:{get:function(){return this.matrix[1]},set:function(i){this.matrix[1]=i}},c:{get:function(){return this.matrix[2]},set:function(i){this.matrix[2]=i}},d:{get:function(){return this.matrix[3]},set:function(i){this.matrix[3]=i}},e:{get:function(){return this.matrix[4]},set:function(i){this.matrix[4]=i}},f:{get:function(){return this.matrix[5]},set:function(i){this.matrix[5]=i}},tx:{get:function(){return this.matrix[4]},set:function(i){this.matrix[4]=i}},ty:{get:function(){return this.matrix[5]},set:function(i){this.matrix[5]=i}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var i=this.matrix,s=i[0],n=i[1],d=i[2],a=i[3];return s||n?n>0?Math.acos(s/this.scaleX):-Math.acos(s/this.scaleX):d||a?g.TAU-(a>0?Math.acos(-d/this.scaleY):-Math.acos(d/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var i=this.matrix;return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=0,i[5]=0,this},translate:function(i,s){var n=this.matrix;return n[4]=n[0]*i+n[2]*s+n[4],n[5]=n[1]*i+n[3]*s+n[5],this},scale:function(i,s){var n=this.matrix;return n[0]*=i,n[1]*=i,n[2]*=s,n[3]*=s,this},rotate:function(i){var s=Math.sin(i),n=Math.cos(i),d=this.matrix,a=d[0],u=d[1],f=d[2],p=d[3];return d[0]=a*n+f*s,d[1]=u*n+p*s,d[2]=a*-s+f*n,d[3]=u*-s+p*n,this},multiply:function(i,s){var n=this.matrix,d=i.matrix,a=n[0],u=n[1],f=n[2],p=n[3],v=n[4],m=n[5],E=d[0],x=d[1],y=d[2],S=d[3],C=d[4],I=d[5],O=s===void 0?this:s;return O.a=E*a+x*f,O.b=E*u+x*p,O.c=y*a+S*f,O.d=y*u+S*p,O.e=C*a+I*f+v,O.f=C*u+I*p+m,O},multiplyWithOffset:function(i,s,n){var d=this.matrix,a=i.matrix,u=d[0],f=d[1],p=d[2],v=d[3],m=d[4],E=d[5],x=s*u+n*p+m,y=s*f+n*v+E,S=a[0],C=a[1],I=a[2],O=a[3],M=a[4],L=a[5];return d[0]=S*u+C*p,d[1]=S*f+C*v,d[2]=I*u+O*p,d[3]=I*f+O*v,d[4]=M*u+L*p+x,d[5]=M*f+L*v+y,this},transform:function(i,s,n,d,a,u){var f=this.matrix,p=f[0],v=f[1],m=f[2],E=f[3],x=f[4],y=f[5];return f[0]=i*p+s*m,f[1]=i*v+s*E,f[2]=n*p+d*m,f[3]=n*v+d*E,f[4]=a*p+u*m+x,f[5]=a*v+u*E+y,this},transformPoint:function(i,s,n){n===void 0&&(n={x:0,y:0});var d=this.matrix,a=d[0],u=d[1],f=d[2],p=d[3],v=d[4],m=d[5];return n.x=i*a+s*f+v,n.y=i*u+s*p+m,n},invert:function(){var i=this.matrix,s=i[0],n=i[1],d=i[2],a=i[3],u=i[4],f=i[5],p=s*a-n*d;return i[0]=a/p,i[1]=-n/p,i[2]=-d/p,i[3]=s/p,i[4]=(d*f-a*u)/p,i[5]=-(s*f-n*u)/p,this},copyFrom:function(i){var s=this.matrix;return s[0]=i.a,s[1]=i.b,s[2]=i.c,s[3]=i.d,s[4]=i.e,s[5]=i.f,this},copyFromArray:function(i){var s=this.matrix;return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],this},copyToContext:function(i){var s=this.matrix;return i.transform(s[0],s[1],s[2],s[3],s[4],s[5]),i},setToContext:function(i){var s=this.matrix;return i.setTransform(s[0],s[1],s[2],s[3],s[4],s[5]),i},copyToArray:function(i){var s=this.matrix;return i===void 0?i=[s[0],s[1],s[2],s[3],s[4],s[5]]:(i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5]),i},setTransform:function(i,s,n,d,a,u){var f=this.matrix;return f[0]=i,f[1]=s,f[2]=n,f[3]=d,f[4]=a,f[5]=u,this},decomposeMatrix:function(){var i=this.decomposedMatrix,s=this.matrix,n=s[0],d=s[1],a=s[2],u=s[3],f=n*u-d*a;if(i.translateX=s[4],i.translateY=s[5],n||d){var p=Math.sqrt(n*n+d*d);i.rotation=d>0?Math.acos(n/p):-Math.acos(n/p),i.scaleX=p,i.scaleY=f/p}else if(a||u){var v=Math.sqrt(a*a+u*u);i.rotation=Math.PI*.5-(u>0?Math.acos(-a/v):-Math.acos(a/v)),i.scaleX=f/v,i.scaleY=v}else i.rotation=0,i.scaleX=0,i.scaleY=0;return i},applyITRS:function(i,s,n,d,a){var u=this.matrix,f=Math.sin(n),p=Math.cos(n);return u[4]=i,u[5]=s,u[0]=p*d,u[1]=f*d,u[2]=-f*a,u[3]=p*a,this},applyInverse:function(i,s,n){n===void 0&&(n=new l);var d=this.matrix,a=d[0],u=d[1],f=d[2],p=d[3],v=d[4],m=d[5],E=1/(a*p+f*-u);return n.x=p*E*i+-f*E*s+(m*f-v*p)*E,n.y=a*E*s+-u*E*i+(-m*a+v*u)*E,n},getX:function(i,s){return i*this.a+s*this.c+this.e},getY:function(i,s){return i*this.b+s*this.d+this.f},getXRound:function(i,s,n){var d=this.getX(i,s);return n&&(d=Math.round(d)),d},getYRound:function(i,s,n){var d=this.getY(i,s);return n&&(d=Math.round(d)),d},getCSSMatrix:function(){var i=this.matrix;return"matrix("+i[0]+","+i[1]+","+i[2]+","+i[3]+","+i[4]+","+i[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(2),g=function(l,h,i,s,n,d){l===void 0&&(l=0),h===void 0&&(h=0),i===void 0&&(i=d.width),s===void 0&&(s=d.height),n||(n={});var a=o(n,"isNotEmpty",!1),u=o(n,"isColliding",!1),f=o(n,"hasInterestingFace",!1);l<0&&(i+=l,l=0),h<0&&(s+=h,h=0),l+i>d.width&&(i=Math.max(d.width-l,0)),h+s>d.height&&(s=Math.max(d.height-h,0));for(var p=[],v=h;v<h+s;v++)for(var m=l;m<l+i;m++){var E=d.data[v][m];if(E!==null){if(a&&E.index===-1||u&&!E.collides||f&&!E.hasInterestingFace)continue;p.push(E)}}return p};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i,s){h===void 0&&(h=0),i===void 0&&(i=0),s===void 0&&(s=1);var n,d=0,a=o.length;if(s===1)for(n=i;n<a;n++)o[n][g]=l+d*h,d++;else for(n=i;n>=0;n--)o[n][g]=l+d*h,d++;return o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(35),g=e(13),l=function(h,i,s){i.x=g(s,"x",0),i.y=g(s,"y",0),i.depth=g(s,"depth",0),i.flipX=g(s,"flipX",!1),i.flipY=g(s,"flipY",!1);var n=g(s,"scale",null);typeof n=="number"?i.setScale(n):n!==null&&(i.scaleX=g(n,"x",1),i.scaleY=g(n,"y",1));var d=g(s,"scrollFactor",null);typeof d=="number"?i.setScrollFactor(d):d!==null&&(i.scrollFactorX=g(d,"x",1),i.scrollFactorY=g(d,"y",1)),i.rotation=g(s,"rotation",0);var a=g(s,"angle",null);a!==null&&(i.angle=a),i.alpha=g(s,"alpha",1);var u=g(s,"origin",null);if(typeof u=="number")i.setOrigin(u);else if(u!==null){var f=g(u,"x",.5),p=g(u,"y",.5);i.setOrigin(f,p)}i.blendMode=g(s,"blendMode",o.NORMAL),i.visible=g(s,"visible",!0);var v=g(s,"add",!0);return v&&h.sys.displayList.add(i),i.preUpdate&&h.sys.updateList.add(i),i};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=function(l,h,i,s,n){var d=s.alpha*i.alpha;if(d<=0)return!1;var a=o(i,s,n).calc;return h.globalCompositeOperation=l.blendModes[i.blendMode],h.globalAlpha=d,h.save(),a.setToContext(h),h.imageSmoothingEnabled=!(!l.antialias||i.frame&&i.frame.source.scaleMode),!0};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(33),g=e(192),l=[],h=!1,i=function(){var s=function(E,x,y,S,C){x===void 0&&(x=1),y===void 0&&(y=1),S===void 0&&(S=o.CANVAS),C===void 0&&(C=!1);var I,O=a(S);return O===null?(O={parent:E,canvas:document.createElement("canvas"),type:S},S===o.CANVAS&&l.push(O),I=O.canvas):(O.parent=E,I=O.canvas),C&&(O.parent=I),I.width=x,I.height=y,h&&S===o.CANVAS&&g.disable(I.getContext("2d")),I},n=function(E,x,y){return s(E,x,y,o.CANVAS)},d=function(E,x,y){return s(E,x,y,o.WEBGL)},a=function(E){if(E===void 0&&(E=o.CANVAS),E===o.WEBGL)return null;for(var x=0;x<l.length;x++){var y=l[x];if(!y.parent&&y.type===E)return y}return null},u=function(E){var x=E instanceof HTMLCanvasElement;l.forEach(function(y){(x&&y.canvas===E||!x&&y.parent===E)&&(y.parent=null,y.canvas.width=1,y.canvas.height=1)})},f=function(){var E=0;return l.forEach(function(x){x.parent&&E++}),E},p=function(){return l.length-f()},v=function(){h=!0},m=function(){h=!1};return{create2D:n,create:s,createWebGL:d,disableSmoothing:v,enableSmoothing:m,first:a,free:p,pool:l,remove:u,total:f}};c.exports=i()},function(c,R){var e={};c.exports=e,function(){e._nextId=0,e._seed=0,e._nowStartTime=+new Date,e.extend=function(g,l){var h,i;typeof l=="boolean"?(h=2,i=l):(h=1,i=!0);for(var s=h;s<arguments.length;s++){var n=arguments[s];if(n)for(var d in n)i&&n[d]&&n[d].constructor===Object&&(!g[d]||g[d].constructor===Object)?(g[d]=g[d]||{},e.extend(g[d],i,n[d])):g[d]=n[d]}return g},e.clone=function(g,l){return e.extend({},l,g)},e.keys=function(g){if(Object.keys)return Object.keys(g);var l=[];for(var h in g)l.push(h);return l},e.values=function(g){var l=[];if(Object.keys){for(var h=Object.keys(g),i=0;i<h.length;i++)l.push(g[h[i]]);return l}for(var s in g)l.push(g[s]);return l},e.get=function(g,l,h,i){l=l.split(".").slice(h,i);for(var s=0;s<l.length;s+=1)g=g[l[s]];return g},e.set=function(g,l,h,i,s){var n=l.split(".").slice(i,s);return e.get(g,l,0,-1)[n[n.length-1]]=h,h},e.shuffle=function(g){for(var l=g.length-1;l>0;l--){var h=Math.floor(e.random()*(l+1)),i=g[l];g[l]=g[h],g[h]=i}return g},e.choose=function(g){return g[Math.floor(e.random()*g.length)]},e.isElement=function(g){return typeof HTMLElement!="undefined"?g instanceof HTMLElement:!!(g&&g.nodeType&&g.nodeName)},e.isArray=function(g){return Object.prototype.toString.call(g)==="[object Array]"},e.isFunction=function(g){return typeof g=="function"},e.isPlainObject=function(g){return typeof g=="object"&&g.constructor===Object},e.isString=function(g){return Object.prototype.toString.call(g)==="[object String]"},e.clamp=function(g,l,h){return g<l?l:g>h?h:g},e.sign=function(g){return g<0?-1:1},e.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-e._nowStartTime},e.random=function(g,l){return g=typeof g!="undefined"?g:0,l=typeof l!="undefined"?l:1,g+o()*(l-g)};var o=function(){return e._seed=(e._seed*9301+49297)%233280,e._seed/233280};e.colorToNumber=function(g){return g=g.replace("#",""),g.length==3&&(g=g.charAt(0)+g.charAt(0)+g.charAt(1)+g.charAt(1)+g.charAt(2)+g.charAt(2)),parseInt(g,16)},e.logLevel=1,e.log=function(){console&&e.logLevel>0&&e.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},e.info=function(){console&&e.logLevel>0&&e.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},e.warn=function(){console&&e.logLevel>0&&e.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},e.nextId=function(){return e._nextId++},e.indexOf=function(g,l){if(g.indexOf)return g.indexOf(l);for(var h=0;h<g.length;h++)if(g[h]===l)return h;return-1},e.map=function(g,l){if(g.map)return g.map(l);for(var h=[],i=0;i<g.length;i+=1)h.push(l(g[i]));return h},e.topologicalSort=function(g){var l=[],h=[],i=[];for(var s in g)!h[s]&&!i[s]&&e._topologicalSort(s,h,i,g,l);return l},e._topologicalSort=function(g,l,h,i,s){var n=i[g]||[];h[g]=!0;for(var d=0;d<n.length;d+=1){var a=n[d];h[a]||l[a]||e._topologicalSort(a,l,h,i,s)}h[g]=!1,l[g]=!0,s.push(g)},e.chain=function(){for(var g=[],l=0;l<arguments.length;l+=1){var h=arguments[l];h._chained?g.push.apply(g,h._chained):g.push(h)}var i=function(){for(var s,n=new Array(arguments.length),d=0,a=arguments.length;d<a;d++)n[d]=arguments[d];for(d=0;d<g.length;d+=1){var u=g[d].apply(s,n);typeof u!="undefined"&&(s=u)}return s};return i._chained=g,i},e.chainPathBefore=function(g,l,h){return e.set(g,l,e.chain(h,e.get(g,l)))},e.chainPathAfter=function(g,l,h){return e.set(g,l,e.chain(e.get(g,l),h))}}()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={VERSION:"3.55.2",BlendModes:e(35),ScaleModes:e(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};c.exports=o},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(11),l=e(15),h=e(47),i=new o({Extends:l,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.ScrollFactor,g.Transform,g.Visible],initialize:function(n,d,a){d===void 0&&(d="Shape"),l.call(this,n,d),this.geom=a,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new h,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(s,n){return n===void 0&&(n=1),s===void 0?this.isFilled=!1:(this.fillColor=s,this.fillAlpha=n,this.isFilled=!0),this},setStrokeStyle:function(s,n,d){return d===void 0&&(d=1),s===void 0?this.isStroked=!1:(this.lineWidth=s,this.strokeColor=n,this.strokeAlpha=d,this.isStroked=!0),this},setClosePath:function(s){return this.closePath=s,this},setSize:function(s,n){return this.width=s,this.height=n,this},setDisplaySize:function(s,n){return this.displayWidth=s,this.displayHeight=n,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}}});c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(14),g=function(l){return l*o.DEG_TO_RAD};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={DESTROY:e(743),FADE_IN_COMPLETE:e(744),FADE_IN_START:e(745),FADE_OUT_COMPLETE:e(746),FADE_OUT_START:e(747),FLASH_COMPLETE:e(748),FLASH_START:e(749),FOLLOW_UPDATE:e(750),PAN_COMPLETE:e(751),PAN_START:e(752),POST_RENDER:e(753),PRE_RENDER:e(754),ROTATE_COMPLETE:e(755),ROTATE_START:e(756),SHAKE_COMPLETE:e(757),SHAKE_START:e(758),ZOOM_COMPLETE:e(759),ZOOM_START:e(760)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(103),l=e(328),h=e(188),i=e(329),s=new o({initialize:function(d,a,u,f){d===void 0&&(d=0),a===void 0&&(a=0),u===void 0&&(u=0),f===void 0&&(f=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(d,a,u,f)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(n,d,a,u,f){return u===void 0&&(u=255),f===void 0&&(f=!0),this._locked=!0,this.red=n,this.green=d,this.blue=a,this.alpha=u,this._locked=!1,this.update(f)},setGLTo:function(n,d,a,u){return u===void 0&&(u=1),this._locked=!0,this.redGL=n,this.greenGL=d,this.blueGL=a,this.alphaGL=u,this._locked=!1,this.update(!0)},setFromRGB:function(n){return this._locked=!0,this.red=n.r,this.green=n.g,this.blue=n.b,n.hasOwnProperty("a")&&(this.alpha=n.a),this._locked=!1,this.update(!0)},setFromHSV:function(n,d,a){return h(n,d,a,this)},update:function(n){if(n===void 0&&(n=!1),this._locked)return this;var d=this.r,a=this.g,u=this.b,f=this.a;return this._color=g(d,a,u),this._color32=l(d,a,u,f),this._rgba="rgba("+d+","+a+","+u+","+f/255+")",n&&i(d,a,u,this),this},updateHSV:function(){var n=this.r,d=this.g,a=this.b;return i(n,d,a,this),this},clone:function(){return new s(this.r,this.g,this.b,this.a)},gray:function(n){return this.setTo(n,n,n)},random:function(n,d){n===void 0&&(n=0),d===void 0&&(d=255);var a=Math.floor(n+Math.random()*(d-n)),u=Math.floor(n+Math.random()*(d-n)),f=Math.floor(n+Math.random()*(d-n));return this.setTo(a,u,f)},randomGray:function(n,d){n===void 0&&(n=0),d===void 0&&(d=255);var a=Math.floor(n+Math.random()*(d-n));return this.setTo(a,a,a)},saturate:function(n){return this.s+=n/100,this},desaturate:function(n){return this.s-=n/100,this},lighten:function(n){return this.v+=n/100,this},darken:function(n){return this.v-=n/100,this},brighten:function(n){var d=this.r,a=this.g,u=this.b;return d=Math.max(0,Math.min(255,d-Math.round(255*-(n/100)))),a=Math.max(0,Math.min(255,a-Math.round(255*-(n/100)))),u=Math.max(0,Math.min(255,u-Math.round(255*-(n/100)))),this.setTo(d,a,u)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(n){this.gl[0]=Math.min(Math.abs(n),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(n){this.gl[1]=Math.min(Math.abs(n),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(n){this.gl[2]=Math.min(Math.abs(n),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(n){this.gl[3]=Math.min(Math.abs(n),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(n){n=Math.floor(Math.abs(n)),this.r=Math.min(n,255),this.gl[0]=n/255,this.update(!0)}},green:{get:function(){return this.g},set:function(n){n=Math.floor(Math.abs(n)),this.g=Math.min(n,255),this.gl[1]=n/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(n){n=Math.floor(Math.abs(n)),this.b=Math.min(n,255),this.gl[2]=n/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(n){n=Math.floor(Math.abs(n)),this.a=Math.min(n,255),this.gl[3]=n/255,this.update()}},h:{get:function(){return this._h},set:function(n){this._h=n,h(n,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(n){this._s=n,h(this._h,n,this._v,this)}},v:{get:function(){return this._v},set:function(n){this._v=n,h(this._h,this._s,n,this)}}});c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h,i,s){this.x=0,this.y=0,this.z=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0):(this.x=h||0,this.y=i||0,this.z=s||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(l){return this.x=Math.min(this.x,l.x),this.y=Math.min(this.y,l.y),this.z=Math.min(this.z,l.z),this},max:function(l){return this.x=Math.max(this.x,l.x),this.y=Math.max(this.y,l.y),this.z=Math.max(this.z,l.z),this},clone:function(){return new g(this.x,this.y,this.z)},addVectors:function(l,h){return this.x=l.x+h.x,this.y=l.y+h.y,this.z=l.z+h.z,this},crossVectors:function(l,h){var i=l.x,s=l.y,n=l.z,d=h.x,a=h.y,u=h.z;return this.x=s*u-n*a,this.y=n*d-i*u,this.z=i*a-s*d,this},equals:function(l){return this.x===l.x&&this.y===l.y&&this.z===l.z},copy:function(l){return this.x=l.x,this.y=l.y,this.z=l.z||0,this},set:function(l,h,i){return typeof l=="object"?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0):(this.x=l||0,this.y=h||0,this.z=i||0),this},setFromMatrixPosition:function(l){return this.fromArray(l.val,12)},setFromMatrixColumn:function(l,h){return this.fromArray(l.val,h*4)},fromArray:function(l,h){return h===void 0&&(h=0),this.x=l[h],this.y=l[h+1],this.z=l[h+2],this},add:function(l){return this.x+=l.x,this.y+=l.y,this.z+=l.z||0,this},addScalar:function(l){return this.x+=l,this.y+=l,this.z+=l,this},addScale:function(l,h){return this.x+=l.x*h,this.y+=l.y*h,this.z+=l.z*h||0,this},subtract:function(l){return this.x-=l.x,this.y-=l.y,this.z-=l.z||0,this},multiply:function(l){return this.x*=l.x,this.y*=l.y,this.z*=l.z||1,this},scale:function(l){return isFinite(l)?(this.x*=l,this.y*=l,this.z*=l):(this.x=0,this.y=0,this.z=0),this},divide:function(l){return this.x/=l.x,this.y/=l.y,this.z/=l.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(l){var h=l.x-this.x,i=l.y-this.y,s=l.z-this.z||0;return Math.sqrt(h*h+i*i+s*s)},distanceSq:function(l){var h=l.x-this.x,i=l.y-this.y,s=l.z-this.z||0;return h*h+i*i+s*s},length:function(){var l=this.x,h=this.y,i=this.z;return Math.sqrt(l*l+h*h+i*i)},lengthSq:function(){var l=this.x,h=this.y,i=this.z;return l*l+h*h+i*i},normalize:function(){var l=this.x,h=this.y,i=this.z,s=l*l+h*h+i*i;return s>0&&(s=1/Math.sqrt(s),this.x=l*s,this.y=h*s,this.z=i*s),this},dot:function(l){return this.x*l.x+this.y*l.y+this.z*l.z},cross:function(l){var h=this.x,i=this.y,s=this.z,n=l.x,d=l.y,a=l.z;return this.x=i*a-s*d,this.y=s*n-h*a,this.z=h*d-i*n,this},lerp:function(l,h){h===void 0&&(h=0);var i=this.x,s=this.y,n=this.z;return this.x=i+h*(l.x-i),this.y=s+h*(l.y-s),this.z=n+h*(l.z-n),this},applyMatrix3:function(l){var h=this.x,i=this.y,s=this.z,n=l.val;return this.x=n[0]*h+n[3]*i+n[6]*s,this.y=n[1]*h+n[4]*i+n[7]*s,this.z=n[2]*h+n[5]*i+n[8]*s,this},applyMatrix4:function(l){var h=this.x,i=this.y,s=this.z,n=l.val,d=1/(n[3]*h+n[7]*i+n[11]*s+n[15]);return this.x=(n[0]*h+n[4]*i+n[8]*s+n[12])*d,this.y=(n[1]*h+n[5]*i+n[9]*s+n[13])*d,this.z=(n[2]*h+n[6]*i+n[10]*s+n[14])*d,this},transformMat3:function(l){var h=this.x,i=this.y,s=this.z,n=l.val;return this.x=h*n[0]+i*n[3]+s*n[6],this.y=h*n[1]+i*n[4]+s*n[7],this.z=h*n[2]+i*n[5]+s*n[8],this},transformMat4:function(l){var h=this.x,i=this.y,s=this.z,n=l.val;return this.x=n[0]*h+n[4]*i+n[8]*s+n[12],this.y=n[1]*h+n[5]*i+n[9]*s+n[13],this.z=n[2]*h+n[6]*i+n[10]*s+n[14],this},transformCoordinates:function(l){var h=this.x,i=this.y,s=this.z,n=l.val,d=h*n[0]+i*n[4]+s*n[8]+n[12],a=h*n[1]+i*n[5]+s*n[9]+n[13],u=h*n[2]+i*n[6]+s*n[10]+n[14],f=h*n[3]+i*n[7]+s*n[11]+n[15];return this.x=d/f,this.y=a/f,this.z=u/f,this},transformQuat:function(l){var h=this.x,i=this.y,s=this.z,n=l.x,d=l.y,a=l.z,u=l.w,f=u*h+d*s-a*i,p=u*i+a*h-n*s,v=u*s+n*i-d*h,m=-n*h-d*i-a*s;return this.x=f*u+m*-n+p*-a-v*-d,this.y=p*u+m*-d+v*-n-f*-a,this.z=v*u+m*-a+f*-d-p*-n,this},project:function(l){var h=this.x,i=this.y,s=this.z,n=l.val,d=n[0],a=n[1],u=n[2],f=n[3],p=n[4],v=n[5],m=n[6],E=n[7],x=n[8],y=n[9],S=n[10],C=n[11],I=n[12],O=n[13],M=n[14],L=n[15],P=1/(h*f+i*E+s*C+L);return this.x=(h*d+i*p+s*x+I)*P,this.y=(h*a+i*v+s*y+O)*P,this.z=(h*u+i*m+s*S+M)*P,this},projectViewMatrix:function(l,h){return this.applyMatrix4(l).applyMatrix4(h)},unprojectViewMatrix:function(l,h){return this.applyMatrix4(l).applyMatrix4(h)},unproject:function(l,h){var i=l.x,s=l.y,n=l.z,d=l.w,a=this.x-i,u=d-this.y-1-s,f=this.z;return this.x=2*a/n-1,this.y=2*u/d-1,this.z=2*f-1,this.project(h)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});g.ZERO=new g,g.RIGHT=new g(1,0,0),g.LEFT=new g(-1,0,0),g.UP=new g(0,-1,0),g.DOWN=new g(0,1,0),g.FORWARD=new g(0,0,1),g.BACK=new g(0,0,-1),g.ONE=new g(1,1,1),c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(c,R,e){var o={};c.exports=o;var g=e(64),l=e(83),h=e(165),i=e(32),s=e(84),n=e(271);(function(){o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o.create=function(a){var u={id:i.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!a.hasOwnProperty("position")&&a.hasOwnProperty("vertices")?a.position=g.centre(a.vertices):a.hasOwnProperty("vertices")||(u.vertices=g.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var f=i.extend(u,a);return d(f,a),f.setOnCollideWith=function(p,v){return v?this.onCollideWith[p.id]=v:delete this.onCollideWith[p.id],this},f},o.nextGroup=function(a){return a?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var d=function(a,u){u=u||{},o.set(a,{bounds:a.bounds||s.create(a.vertices),positionPrev:a.positionPrev||l.clone(a.position),anglePrev:a.anglePrev||a.angle,vertices:a.vertices,parts:a.parts||[a],isStatic:a.isStatic,isSleeping:a.isSleeping,parent:a.parent||a});var f=a.bounds;if(g.rotate(a.vertices,a.angle,a.position),n.rotate(a.axes,a.angle),s.update(f,a.vertices,a.velocity),o.set(a,{axes:u.axes||a.axes,area:u.area||a.area,mass:u.mass||a.mass,inertia:u.inertia||a.inertia}),a.parts.length===1){var p=a.centerOfMass,v=a.centerOffset,m=f.max.x-f.min.x,E=f.max.y-f.min.y;p.x=-(f.min.x-a.position.x)/m,p.y=-(f.min.y-a.position.y)/E,v.x=m*p.x,v.y=E*p.y}};o.set=function(a,u,f){var p;typeof u=="string"&&(p=u,u={},u[p]=f);for(p in u)if(!!Object.prototype.hasOwnProperty.call(u,p))switch(f=u[p],p){case"isStatic":o.setStatic(a,f);break;case"isSleeping":h.set(a,f);break;case"mass":o.setMass(a,f);break;case"density":o.setDensity(a,f);break;case"inertia":o.setInertia(a,f);break;case"vertices":o.setVertices(a,f);break;case"position":o.setPosition(a,f);break;case"angle":o.setAngle(a,f);break;case"velocity":o.setVelocity(a,f);break;case"angularVelocity":o.setAngularVelocity(a,f);break;case"parts":o.setParts(a,f);break;case"centre":o.setCentre(a,f);break;default:a[p]=f}},o.setStatic=function(a,u){for(var f=0;f<a.parts.length;f++){var p=a.parts[f];p.isStatic=u,u?(p._original={restitution:p.restitution,friction:p.friction,mass:p.mass,inertia:p.inertia,density:p.density,inverseMass:p.inverseMass,inverseInertia:p.inverseInertia},p.restitution=0,p.friction=1,p.mass=p.inertia=p.density=1/0,p.inverseMass=p.inverseInertia=0,p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.anglePrev=p.angle,p.angularVelocity=0,p.speed=0,p.angularSpeed=0,p.motion=0):p._original&&(p.restitution=p._original.restitution,p.friction=p._original.friction,p.mass=p._original.mass,p.inertia=p._original.inertia,p.density=p._original.density,p.inverseMass=p._original.inverseMass,p.inverseInertia=p._original.inverseInertia,p._original=null)}},o.setMass=function(a,u){var f=a.inertia/(a.mass/6);a.inertia=f*(u/6),a.inverseInertia=1/a.inertia,a.mass=u,a.inverseMass=1/a.mass,a.density=a.mass/a.area},o.setDensity=function(a,u){o.setMass(a,u*a.area),a.density=u},o.setInertia=function(a,u){a.inertia=u,a.inverseInertia=1/a.inertia},o.setVertices=function(a,u){u[0].body===a?a.vertices=u:a.vertices=g.create(u,a),a.axes=n.fromVertices(a.vertices),a.area=g.area(a.vertices),o.setMass(a,a.density*a.area);var f=g.centre(a.vertices);g.translate(a.vertices,f,-1),o.setInertia(a,o._inertiaScale*g.inertia(a.vertices,a.mass)),g.translate(a.vertices,a.position),s.update(a.bounds,a.vertices,a.velocity)},o.setParts=function(a,u,f){var p;for(u=u.slice(0),a.parts.length=0,a.parts.push(a),a.parent=a,p=0;p<u.length;p++){var v=u[p];v!==a&&(v.parent=a,a.parts.push(v))}if(a.parts.length!==1){if(f=typeof f!="undefined"?f:!0,f){var m=[];for(p=0;p<u.length;p++)m=m.concat(u[p].vertices);g.clockwiseSort(m);var E=g.hull(m),x=g.centre(E);o.setVertices(a,E),g.translate(a.vertices,x)}var y=o._totalProperties(a),S=y.centre.x,C=y.centre.y,I=a.bounds,O=a.centerOfMass,M=a.centerOffset;s.update(I,a.vertices,a.velocity),O.x=-(I.min.x-S)/(I.max.x-I.min.x),O.y=-(I.min.y-C)/(I.max.y-I.min.y),M.x=S,M.y=C,a.area=y.area,a.parent=a,a.position.x=S,a.position.y=C,a.positionPrev.x=S,a.positionPrev.y=C,o.setMass(a,y.mass),o.setInertia(a,y.inertia),o.setPosition(a,y.centre)}},o.setCentre=function(a,u,f){f?(a.positionPrev.x+=u.x,a.positionPrev.y+=u.y,a.position.x+=u.x,a.position.y+=u.y):(a.positionPrev.x=u.x-(a.position.x-a.positionPrev.x),a.positionPrev.y=u.y-(a.position.y-a.positionPrev.y),a.position.x=u.x,a.position.y=u.y)},o.setPosition=function(a,u){var f=l.sub(u,a.position);a.positionPrev.x+=f.x,a.positionPrev.y+=f.y;for(var p=0;p<a.parts.length;p++){var v=a.parts[p];v.position.x+=f.x,v.position.y+=f.y,g.translate(v.vertices,f),s.update(v.bounds,v.vertices,a.velocity)}},o.setAngle=function(a,u){var f=u-a.angle;a.anglePrev+=f;for(var p=0;p<a.parts.length;p++){var v=a.parts[p];v.angle+=f,g.rotate(v.vertices,f,a.position),n.rotate(v.axes,f),s.update(v.bounds,v.vertices,a.velocity),p>0&&l.rotateAbout(v.position,f,a.position,v.position)}},o.setVelocity=function(a,u){a.positionPrev.x=a.position.x-u.x,a.positionPrev.y=a.position.y-u.y,a.velocity.x=u.x,a.velocity.y=u.y,a.speed=l.magnitude(a.velocity)},o.setAngularVelocity=function(a,u){a.anglePrev=a.angle-u,a.angularVelocity=u,a.angularSpeed=Math.abs(a.angularVelocity)},o.translate=function(a,u){o.setPosition(a,l.add(a.position,u))},o.rotate=function(a,u,f){if(!f)o.setAngle(a,a.angle+u);else{var p=Math.cos(u),v=Math.sin(u),m=a.position.x-f.x,E=a.position.y-f.y;o.setPosition(a,{x:f.x+(m*p-E*v),y:f.y+(m*v+E*p)}),o.setAngle(a,a.angle+u)}},o.scale=function(a,u,f,p){var v=0,m=0;p=p||a.position;for(var E=0;E<a.parts.length;E++){var x=a.parts[E];x.scale.x=u,x.scale.y=f,g.scale(x.vertices,u,f,p),x.axes=n.fromVertices(x.vertices),x.area=g.area(x.vertices),o.setMass(x,a.density*x.area),g.translate(x.vertices,{x:-x.position.x,y:-x.position.y}),o.setInertia(x,o._inertiaScale*g.inertia(x.vertices,x.mass)),g.translate(x.vertices,{x:x.position.x,y:x.position.y}),E>0&&(v+=x.area,m+=x.inertia),x.position.x=p.x+(x.position.x-p.x)*u,x.position.y=p.y+(x.position.y-p.y)*f,s.update(x.bounds,x.vertices,a.velocity)}a.parts.length>1&&(a.area=v,a.isStatic||(o.setMass(a,a.density*v),o.setInertia(a,m))),a.circleRadius&&(u===f?a.circleRadius*=u:a.circleRadius=null)},o.update=function(a,u,f,p){var v=Math.pow(u*f*a.timeScale,2),m=1-a.frictionAir*f*a.timeScale,E=a.position.x-a.positionPrev.x,x=a.position.y-a.positionPrev.y;a.velocity.x=E*m*p+a.force.x/a.mass*v,a.velocity.y=x*m*p+a.force.y/a.mass*v,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.position.x+=a.velocity.x,a.position.y+=a.velocity.y,a.angularVelocity=(a.angle-a.anglePrev)*m*p+a.torque/a.inertia*v,a.anglePrev=a.angle,a.angle+=a.angularVelocity,a.speed=l.magnitude(a.velocity),a.angularSpeed=Math.abs(a.angularVelocity);for(var y=0;y<a.parts.length;y++){var S=a.parts[y];g.translate(S.vertices,a.velocity),y>0&&(S.position.x+=a.velocity.x,S.position.y+=a.velocity.y),a.angularVelocity!==0&&(g.rotate(S.vertices,a.angularVelocity,a.position),n.rotate(S.axes,a.angularVelocity),y>0&&l.rotateAbout(S.position,a.angularVelocity,a.position,S.position)),s.update(S.bounds,S.vertices,a.velocity)}},o.applyForce=function(a,u,f){a.force.x+=f.x,a.force.y+=f.y;var p={x:u.x-a.position.x,y:u.y-a.position.y};a.torque+=p.x*f.y-p.y*f.x},o._totalProperties=function(a){for(var u={mass:0,area:0,inertia:0,centre:{x:0,y:0}},f=a.parts.length===1?0:1;f<a.parts.length;f++){var p=a.parts[f],v=p.mass!==1/0?p.mass:1;u.mass+=v,u.area+=p.area,u.inertia+=p.inertia,u.centre=l.add(u.centre,l.mult(p.position,v))}return u.centre=l.div(u.centre,u.mass),u}})()},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.y+o.height-o.height*o.originY};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.x-o.width*o.originX};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.x+o.width-o.width*o.originX};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.y-o.height*o.originY};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i,s){h===void 0&&(h=0),i===void 0&&(i=0),s===void 0&&(s=1);var n,d=0,a=o.length;if(s===1)for(n=i;n<a;n++)o[n][g]+=l+d*h,d++;else for(n=i;n>=0;n--)o[n][g]+=l+d*h,d++;return o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(307),l=e(172),h=e(56),i=e(173),s=e(3),n=new o({initialize:function(a,u,f,p){a===void 0&&(a=0),u===void 0&&(u=0),f===void 0&&(f=0),p===void 0&&(p=0),this.type=h.LINE,this.x1=a,this.y1=u,this.x2=f,this.y2=p},getPoint:function(d,a){return g(this,d,a)},getPoints:function(d,a,u){return l(this,d,a,u)},getRandomPoint:function(d){return i(this,d)},setTo:function(d,a,u,f){return d===void 0&&(d=0),a===void 0&&(a=0),u===void 0&&(u=0),f===void 0&&(f=0),this.x1=d,this.y1=a,this.x2=u,this.y2=f,this},getPointA:function(d){return d===void 0&&(d=new s),d.set(this.x1,this.y1),d},getPointB:function(d){return d===void 0&&(d=new s),d.set(this.x2,this.y2),d},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(d){this.x1<=this.x2?this.x1=d:this.x2=d}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(d){this.x1>this.x2?this.x1=d:this.x2=d}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(d){this.y1<=this.y2?this.y1=d:this.y2=d}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(d){this.y1>this.y2?this.y1=d:this.y2=d}}});c.exports=n},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=l||g.fillColor,s=h||g.fillAlpha,n=(i&16711680)>>>16,d=(i&65280)>>>8,a=i&255;o.fillStyle="rgba("+n+","+d+","+a+","+s+")"};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h,i,s,n){var d=[];n.forEach(function(u){u&&d.push(u)}),this.loader=h,this.type=i,this.key=s,this.multiKeyIndex=h.multiKeyIndex++,this.files=d,this.complete=!1,this.pending=d.length,this.failed=0,this.config={},this.baseURL=h.baseURL,this.path=h.path,this.prefix=h.prefix;for(var a=0;a<d.length;a++)d[a].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(l){return this.files.push(l),l.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(l){var h=this.files.indexOf(l);h!==-1&&this.pending--},onFileFailed:function(l){var h=this.files.indexOf(l);h!==-1&&this.failed++}});c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=o-l,s=g-h;return Math.sqrt(i*i+s*s)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BOOT:e(922),DESTROY:e(923),DRAG_END:e(924),DRAG_ENTER:e(925),DRAG:e(926),DRAG_LEAVE:e(927),DRAG_OVER:e(928),DRAG_START:e(929),DROP:e(930),GAME_OUT:e(931),GAME_OVER:e(932),GAMEOBJECT_DOWN:e(933),GAMEOBJECT_DRAG_END:e(934),GAMEOBJECT_DRAG_ENTER:e(935),GAMEOBJECT_DRAG:e(936),GAMEOBJECT_DRAG_LEAVE:e(937),GAMEOBJECT_DRAG_OVER:e(938),GAMEOBJECT_DRAG_START:e(939),GAMEOBJECT_DROP:e(940),GAMEOBJECT_MOVE:e(941),GAMEOBJECT_OUT:e(942),GAMEOBJECT_OVER:e(943),GAMEOBJECT_POINTER_DOWN:e(944),GAMEOBJECT_POINTER_MOVE:e(945),GAMEOBJECT_POINTER_OUT:e(946),GAMEOBJECT_POINTER_OVER:e(947),GAMEOBJECT_POINTER_UP:e(948),GAMEOBJECT_POINTER_WHEEL:e(949),GAMEOBJECT_UP:e(950),GAMEOBJECT_WHEEL:e(951),MANAGER_BOOT:e(952),MANAGER_PROCESS:e(953),MANAGER_UPDATE:e(954),POINTER_DOWN:e(955),POINTER_DOWN_OUTSIDE:e(956),POINTER_MOVE:e(957),POINTER_OUT:e(958),POINTER_OVER:e(959),POINTER_UP:e(960),POINTER_UP_OUTSIDE:e(961),POINTER_WHEEL:e(962),POINTERLOCK_CHANGE:e(963),PRE_UPDATE:e(964),SHUTDOWN:e(965),START:e(966),UPDATE:e(967)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.y=g+o.height*o.originY,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.x=g+o.width*o.originX,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.x=g-o.width+o.width*o.originX,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.y=g-o.height+o.height*o.originY,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return o.width<=0||o.height<=0?!1:o.x<=g&&o.x+o.width>=g&&o.y<=l&&o.y+o.height>=l};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(175),l=e(9),h=e(374),i=e(2),s=e(69),n=e(91),d=e(141),a=e(12),u=e(375),f=new o({Extends:l,initialize:function(v){l.call(this);var m=v.game,E=m.renderer,x=E.gl;this.name=i(v,"name","WebGLPipeline"),this.game=m,this.renderer=E,this.manager,this.gl=x,this.view=m.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=i(v,"topology",x.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=i(v,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=v,this.glReset=!1},boot:function(){var p,v=this.gl,m=this.config,E=this.renderer;this.isPostFX||(this.projectionMatrix=new s().identity());var x=this.renderTargets,y=i(m,"renderTarget",!1);typeof y=="boolean"&&y&&(y=1);var S=E.width,C=E.height;if(typeof y=="number")for(p=0;p<y;p++)x.push(new d(E,S,C,1,0,!0));else if(Array.isArray(y))for(p=0;p<y.length;p++){var I=i(y[p],"scale",1),O=i(y[p],"minFilter",0),M=i(y[p],"autoClear",1);x.push(new d(E,S,C,I,O,M))}x.length&&(this.currentRenderTarget=x[0]),this.setShadersFromConfig(m);var L=this.shaders,P=0;for(p=0;p<L.length;p++)L[p].vertexSize>P&&(P=L[p].vertexSize);var b=i(m,"batchSize",E.config.batchSize);this.vertexCapacity=b*6;var B=new ArrayBuffer(this.vertexCapacity*P);this.vertexData=B,this.bytes=new Uint8Array(B),this.vertexViewF32=new Float32Array(B),this.vertexViewU32=new Uint32Array(B);var U=i(m,"vertices",null);for(U?(this.vertexViewF32.set(U),this.vertexBuffer=E.createVertexBuffer(B,v.STATIC_DRAW)):this.vertexBuffer=E.createVertexBuffer(B.byteLength,v.DYNAMIC_DRAW),this.setVertexBuffer(),p=L.length-1;p>=0;p--)L[p].rebind();this.hasBooted=!0,E.on(n.RESIZE,this.resize,this),E.on(n.PRE_RENDER,this.onPreRender,this),E.on(n.RENDER,this.onRender,this),E.on(n.POST_RENDER,this.onPostRender,this),this.emit(h.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(p,v){var m=this.renderer;if(p!==this.currentShader||m.currentProgram!==this.currentShader.program){this.flush(),m.resetTextures();var E=this.setVertexBuffer();E&&!v&&(v=!0),p.bind(v,!1),this.currentShader=p}return this},getShaderByName:function(p){for(var v=this.shaders,m=0;m<v.length;m++)if(v[m].name===p)return v[m]},setShadersFromConfig:function(p){var v,m=this.shaders,E=this.renderer;for(v=0;v<m.length;v++)m[v].destroy();var x="vertShader",y="fragShader",S="attributes",C=i(p,x,null),I=a.parseFragmentShaderMaxTextures(i(p,y,null),E.maxTextures),O=i(p,S,null),M=i(p,"shaders",[]),L=M.length;if(L===0)C&&I&&(this.shaders=[new u(this,"default",C,I,g(O))]);else{var P=[];for(v=0;v<L;v++){var b=M[v],B=i(b,"name","default"),U=i(b,x,C),H=a.parseFragmentShaderMaxTextures(i(b,y,I),E.maxTextures),Y=i(b,S,O);U&&H&&P.push(new u(this,B,U,H,g(Y)))}this.shaders=P}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(p,v){return v===void 0&&(v=p.frame),this.currentUnit=this.renderer.setTextureSource(v.source),this.currentUnit},shouldFlush:function(p){return p===void 0&&(p=0),this.vertexCount+p>this.vertexCapacity},resize:function(p,v){(p!==this.width||v!==this.height)&&this.flush(),this.width=p,this.height=v;for(var m=this.renderTargets,E=0;E<m.length;E++)m[E].resize(p,v);return this.setProjectionMatrix(p,v),this.emit(h.RESIZE,p,v,this),this.onResize(p,v),this},setProjectionMatrix:function(p,v){var m=this.projectionMatrix;if(!m)return this;this.projectionWidth=p,this.projectionHeight=v,m.ortho(0,p,v,0,-1e3,1e3);for(var E=this.shaders,x="uProjectionMatrix",y=0;y<E.length;y++){var S=E[y];S.hasUniform(x)&&(S.resetUniform(x),S.setMatrix4fv(x,!1,m.val,S))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var p=this.renderer.projectionWidth,v=this.renderer.projectionHeight;(this.projectionWidth!==p||this.projectionHeight!==v)&&this.setProjectionMatrix(p,v)}},bind:function(p){if(p===void 0&&(p=this.currentShader),this.glReset)return this.rebind(p);var v=this.setVertexBuffer();return p.bind(v),this.currentShader=p,this.emit(h.BIND,this,p),this.onActive(p),this},rebind:function(p){this.setVertexBuffer();for(var v=this.shaders,m=v.length-1;m>=0;m--){var E=v[m].rebind();(!p||E===p)&&(this.currentShader=E)}return this.emit(h.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var p=this.gl,v=this.vertexBuffer;return p.getParameter(p.ARRAY_BUFFER_BINDING)!==v?(p.bindBuffer(p.ARRAY_BUFFER,v),!0):!1},preBatch:function(p){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(p),this},postBatch:function(p){return this.onDraw(this.currentRenderTarget),this.onPostBatch(p),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(p){if(p===void 0&&(p=!1),this.vertexCount>0){this.emit(h.BEFORE_FLUSH,this,p),this.onBeforeFlush(p);var v=this.gl,m=this.vertexCount,E=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),m===this.vertexCapacity?v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.DYNAMIC_DRAW):v.bufferSubData(v.ARRAY_BUFFER,0,this.bytes.subarray(0,m*E)),v.drawArrays(this.topology,0,m)),this.vertexCount=0,this.emit(h.AFTER_FLUSH,this,p),this.onAfterFlush(p)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(p,v,m,E,x,y,S){var C=this.vertexViewF32,I=this.vertexViewU32,O=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++O]=p,C[++O]=v,C[++O]=m,C[++O]=E,C[++O]=x,C[++O]=y,I[++O]=S,this.vertexCount++},batchQuad:function(p,v,m,E,x,y,S,C,I,O,M,L,P,b,B,U,H,Y,j,_){_===void 0&&(_=this.currentUnit);var w=!1;return this.shouldFlush(6)&&(this.flush(),w=!0,_=this.setTexture2D(j)),this.batchVert(v,m,O,M,_,Y,b),this.batchVert(E,x,O,P,_,Y,U),this.batchVert(y,S,L,P,_,Y,H),this.batchVert(v,m,O,M,_,Y,b),this.batchVert(y,S,L,P,_,Y,H),this.batchVert(C,I,L,M,_,Y,B),this.onBatch(p),w},batchTri:function(p,v,m,E,x,y,S,C,I,O,M,L,P,b,B,U,H){H===void 0&&(H=this.currentUnit);var Y=!1;return this.shouldFlush(3)&&(this.flush(),Y=!0,H=this.setTexture2D(U)),this.batchVert(v,m,C,I,H,B,L),this.batchVert(E,x,C,M,H,B,P),this.batchVert(y,S,O,M,H,B,b),this.onBatch(p),Y},drawFillRect:function(p,v,m,E,x,y,S,C){S===void 0&&(S=this.renderer.whiteTexture.glTexture),C===void 0&&(C=!0),p=Math.floor(p),v=Math.floor(v);var I=Math.floor(p+m),O=Math.floor(v+E),M=this.setTexture2D(S),L=a.getTintAppendFloatAlphaAndSwap(x,y),P=0,b=0,B=1,U=1;C&&(b=1,U=0),this.batchQuad(null,p,v,p,O,I,O,I,v,P,b,B,U,L,L,L,L,0,S,M)},setTexture2D:function(p){return p===void 0&&(p=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(p),this.currentUnit},bindTexture:function(p,v){v===void 0&&(v=0);var m=this.gl;return m.activeTexture(m.TEXTURE0+v),m.bindTexture(m.TEXTURE_2D,p),this},bindRenderTarget:function(p,v){return this.bindTexture(p.texture,v)},setTime:function(p){return this.set1f(p,this.game.loop.getDuration()),this},set1f:function(p,v,m){return m===void 0&&(m=this.currentShader),m.set1f(p,v),this},set2f:function(p,v,m,E){return E===void 0&&(E=this.currentShader),E.set2f(p,v,m),this},set3f:function(p,v,m,E,x){return x===void 0&&(x=this.currentShader),x.set3f(p,v,m,E),this},set4f:function(p,v,m,E,x,y){return y===void 0&&(y=this.currentShader),y.set4f(p,v,m,E,x),this},set1fv:function(p,v,m){return m===void 0&&(m=this.currentShader),m.set1fv(p,v),this},set2fv:function(p,v,m){return m===void 0&&(m=this.currentShader),m.set2fv(p,v),this},set3fv:function(p,v,m){return m===void 0&&(m=this.currentShader),m.set3fv(p,v),this},set4fv:function(p,v,m){return m===void 0&&(m=this.currentShader),m.set4fv(p,v),this},set1iv:function(p,v,m){return m===void 0&&(m=this.currentShader),m.set1iv(p,v),this},set2iv:function(p,v,m){return m===void 0&&(m=this.currentShader),m.set2iv(p,v),this},set3iv:function(p,v,m){return m===void 0&&(m=this.currentShader),m.set3iv(p,v),this},set4iv:function(p,v,m){return m===void 0&&(m=this.currentShader),m.set4iv(p,v),this},set1i:function(p,v,m){return m===void 0&&(m=this.currentShader),m.set1i(p,v),this},set2i:function(p,v,m,E){return E===void 0&&(E=this.currentShader),E.set2i(p,v,m),this},set3i:function(p,v,m,E,x){return x===void 0&&(x=this.currentShader),x.set3i(p,v,m,E),this},set4i:function(p,v,m,E,x,y){return y===void 0&&(y=this.currentShader),y.set4i(p,v,m,E,x),this},setMatrix2fv:function(p,v,m,E){return E===void 0&&(E=this.currentShader),E.setMatrix2fv(p,v,m),this},setMatrix3fv:function(p,v,m,E){return E===void 0&&(E=this.currentShader),E.setMatrix3fv(p,v,m),this},setMatrix4fv:function(p,v,m,E){return E===void 0&&(E=this.currentShader),E.setMatrix4fv(p,v,m),this},destroy:function(){this.emit(h.DESTROY,this);var p,v=this.shaders;for(p=0;p<v.length;p++)v[p].destroy();var m=this.renderTargets;for(p=0;p<m.length;p++)m[p].destroy();this.gl.deleteBuffer(this.vertexBuffer);var E=this.renderer;return E.off(n.RESIZE,this.resize,this),E.off(n.PRE_RENDER,this.onPreRender,this),E.off(n.RENDER,this.onRender,this),E.off(n.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});c.exports=f},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function o(D,N,G){G=G||2;var k=N&&N.length,V=k?N[0]*G:D.length,X=g(D,0,V,G,!0),K=[];if(!X||X.next===X.prev)return K;var tt,st,rt,ht,ut,mt,pt;if(k&&(X=a(D,N,X,G)),D.length>80*G){tt=rt=D[0],st=ht=D[1];for(var Tt=G;Tt<V;Tt+=G)ut=D[Tt],mt=D[Tt+1],ut<tt&&(tt=ut),mt<st&&(st=mt),ut>rt&&(rt=ut),mt>ht&&(ht=mt);pt=Math.max(rt-tt,ht-st),pt=pt!==0?1/pt:0}return h(X,K,G,tt,st,pt),K}function g(D,N,G,k,V){var X,K;if(V===w(D,N,G,k)>0)for(X=N;X<G;X+=k)K=Y(X,D[X],D[X+1],K);else for(X=G-k;X>=N;X-=k)K=Y(X,D[X],D[X+1],K);return K&&O(K,K.next)&&(j(K),K=K.next),K}function l(D,N){if(!D)return D;N||(N=D);var G=D,k;do if(k=!1,!G.steiner&&(O(G,G.next)||I(G.prev,G,G.next)===0)){if(j(G),G=N=G.prev,G===G.next)break;k=!0}else G=G.next;while(k||G!==N);return N}function h(D,N,G,k,V,X,K){if(!!D){!K&&X&&m(D,k,V,X);for(var tt=D,st,rt;D.prev!==D.next;){if(st=D.prev,rt=D.next,X?s(D,k,V,X):i(D)){N.push(st.i/G),N.push(D.i/G),N.push(rt.i/G),j(D),D=rt.next,tt=rt.next;continue}if(D=rt,D===tt){K?K===1?(D=n(l(D),N,G),h(D,N,G,k,V,X,2)):K===2&&d(D,N,G,k,V,X):h(l(D),N,G,k,V,X,1);break}}}}function i(D){var N=D.prev,G=D,k=D.next;if(I(N,G,k)>=0)return!1;for(var V=D.next.next;V!==D.prev;){if(S(N.x,N.y,G.x,G.y,k.x,k.y,V.x,V.y)&&I(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function s(D,N,G,k){var V=D.prev,X=D,K=D.next;if(I(V,X,K)>=0)return!1;for(var tt=V.x<X.x?V.x<K.x?V.x:K.x:X.x<K.x?X.x:K.x,st=V.y<X.y?V.y<K.y?V.y:K.y:X.y<K.y?X.y:K.y,rt=V.x>X.x?V.x>K.x?V.x:K.x:X.x>K.x?X.x:K.x,ht=V.y>X.y?V.y>K.y?V.y:K.y:X.y>K.y?X.y:K.y,ut=x(tt,st,N,G,k),mt=x(rt,ht,N,G,k),pt=D.prevZ,Tt=D.nextZ;pt&&pt.z>=ut&&Tt&&Tt.z<=mt;){if(pt!==D.prev&&pt!==D.next&&S(V.x,V.y,X.x,X.y,K.x,K.y,pt.x,pt.y)&&I(pt.prev,pt,pt.next)>=0||(pt=pt.prevZ,Tt!==D.prev&&Tt!==D.next&&S(V.x,V.y,X.x,X.y,K.x,K.y,Tt.x,Tt.y)&&I(Tt.prev,Tt,Tt.next)>=0))return!1;Tt=Tt.nextZ}for(;pt&&pt.z>=ut;){if(pt!==D.prev&&pt!==D.next&&S(V.x,V.y,X.x,X.y,K.x,K.y,pt.x,pt.y)&&I(pt.prev,pt,pt.next)>=0)return!1;pt=pt.prevZ}for(;Tt&&Tt.z<=mt;){if(Tt!==D.prev&&Tt!==D.next&&S(V.x,V.y,X.x,X.y,K.x,K.y,Tt.x,Tt.y)&&I(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.nextZ}return!0}function n(D,N,G){var k=D;do{var V=k.prev,X=k.next.next;!O(V,X)&&M(V,k,k.next,X)&&B(V,X)&&B(X,V)&&(N.push(V.i/G),N.push(k.i/G),N.push(X.i/G),j(k),j(k.next),k=D=X),k=k.next}while(k!==D);return l(k)}function d(D,N,G,k,V,X){var K=D;do{for(var tt=K.next.next;tt!==K.prev;){if(K.i!==tt.i&&C(K,tt)){var st=H(K,tt);K=l(K,K.next),st=l(st,st.next),h(K,N,G,k,V,X),h(st,N,G,k,V,X);return}tt=tt.next}K=K.next}while(K!==D)}function a(D,N,G,k){var V=[],X,K,tt,st,rt;for(X=0,K=N.length;X<K;X++)tt=N[X]*k,st=X<K-1?N[X+1]*k:D.length,rt=g(D,tt,st,k,!1),rt===rt.next&&(rt.steiner=!0),V.push(y(rt));for(V.sort(u),X=0;X<V.length;X++)f(V[X],G),G=l(G,G.next);return G}function u(D,N){return D.x-N.x}function f(D,N){if(N=p(D,N),N){var G=H(N,D);l(N,N.next),l(G,G.next)}}function p(D,N){var G=N,k=D.x,V=D.y,X=-1/0,K;do{if(V<=G.y&&V>=G.next.y&&G.next.y!==G.y){var tt=G.x+(V-G.y)*(G.next.x-G.x)/(G.next.y-G.y);if(tt<=k&&tt>X){if(X=tt,tt===k){if(V===G.y)return G;if(V===G.next.y)return G.next}K=G.x<G.next.x?G:G.next}}G=G.next}while(G!==N);if(!K)return null;if(k===X)return K;var st=K,rt=K.x,ht=K.y,ut=1/0,mt;G=K;do k>=G.x&&G.x>=rt&&k!==G.x&&S(V<ht?k:X,V,rt,ht,V<ht?X:k,V,G.x,G.y)&&(mt=Math.abs(V-G.y)/(k-G.x),B(G,D)&&(mt<ut||mt===ut&&(G.x>K.x||G.x===K.x&&v(K,G)))&&(K=G,ut=mt)),G=G.next;while(G!==st);return K}function v(D,N){return I(D.prev,D,N.prev)<0&&I(N.next,D,D.next)<0}function m(D,N,G,k){var V=D;do V.z===null&&(V.z=x(V.x,V.y,N,G,k)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==D);V.prevZ.nextZ=null,V.prevZ=null,E(V)}function E(D){var N,G,k,V,X,K,tt,st,rt=1;do{for(G=D,D=null,X=null,K=0;G;){for(K++,k=G,tt=0,N=0;N<rt&&(tt++,k=k.nextZ,!!k);N++);for(st=rt;tt>0||st>0&&k;)tt!==0&&(st===0||!k||G.z<=k.z)?(V=G,G=G.nextZ,tt--):(V=k,k=k.nextZ,st--),X?X.nextZ=V:D=V,V.prevZ=X,X=V;G=k}X.nextZ=null,rt*=2}while(K>1);return D}function x(D,N,G,k,V){return D=32767*(D-G)*V,N=32767*(N-k)*V,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,N=(N|N<<8)&16711935,N=(N|N<<4)&252645135,N=(N|N<<2)&858993459,N=(N|N<<1)&1431655765,D|N<<1}function y(D){var N=D,G=D;do(N.x<G.x||N.x===G.x&&N.y<G.y)&&(G=N),N=N.next;while(N!==D);return G}function S(D,N,G,k,V,X,K,tt){return(V-K)*(N-tt)-(D-K)*(X-tt)>=0&&(D-K)*(k-tt)-(G-K)*(N-tt)>=0&&(G-K)*(X-tt)-(V-K)*(k-tt)>=0}function C(D,N){return D.next.i!==N.i&&D.prev.i!==N.i&&!b(D,N)&&(B(D,N)&&B(N,D)&&U(D,N)&&(I(D.prev,D,N.prev)||I(D,N.prev,N))||O(D,N)&&I(D.prev,D,D.next)>0&&I(N.prev,N,N.next)>0)}function I(D,N,G){return(N.y-D.y)*(G.x-N.x)-(N.x-D.x)*(G.y-N.y)}function O(D,N){return D.x===N.x&&D.y===N.y}function M(D,N,G,k){var V=P(I(D,N,G)),X=P(I(D,N,k)),K=P(I(G,k,D)),tt=P(I(G,k,N));return!!(V!==X&&K!==tt||V===0&&L(D,G,N)||X===0&&L(D,k,N)||K===0&&L(G,D,k)||tt===0&&L(G,N,k))}function L(D,N,G){return N.x<=Math.max(D.x,G.x)&&N.x>=Math.min(D.x,G.x)&&N.y<=Math.max(D.y,G.y)&&N.y>=Math.min(D.y,G.y)}function P(D){return D>0?1:D<0?-1:0}function b(D,N){var G=D;do{if(G.i!==D.i&&G.next.i!==D.i&&G.i!==N.i&&G.next.i!==N.i&&M(G,G.next,D,N))return!0;G=G.next}while(G!==D);return!1}function B(D,N){return I(D.prev,D,D.next)<0?I(D,N,D.next)>=0&&I(D,D.prev,N)>=0:I(D,N,D.prev)<0||I(D,D.next,N)<0}function U(D,N){var G=D,k=!1,V=(D.x+N.x)/2,X=(D.y+N.y)/2;do G.y>X!=G.next.y>X&&G.next.y!==G.y&&V<(G.next.x-G.x)*(X-G.y)/(G.next.y-G.y)+G.x&&(k=!k),G=G.next;while(G!==D);return k}function H(D,N){var G=new _(D.i,D.x,D.y),k=new _(N.i,N.x,N.y),V=D.next,X=N.prev;return D.next=N,N.prev=D,G.next=V,V.prev=G,k.next=G,G.prev=k,X.next=k,k.prev=X,k}function Y(D,N,G,k){var V=new _(D,N,G);return k?(V.next=k.next,V.prev=k,k.next.prev=V,k.next=V):(V.prev=V,V.next=V),V}function j(D){D.next.prev=D.prev,D.prev.next=D.next,D.prevZ&&(D.prevZ.nextZ=D.nextZ),D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function _(D,N,G){this.i=D,this.x=N,this.y=G,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}o.deviation=function(D,N,G,k){var V=N&&N.length,X=V?N[0]*G:D.length,K=Math.abs(w(D,0,X,G));if(V)for(var tt=0,st=N.length;tt<st;tt++){var rt=N[tt]*G,ht=tt<st-1?N[tt+1]*G:D.length;K-=Math.abs(w(D,rt,ht,G))}var ut=0;for(tt=0;tt<k.length;tt+=3){var mt=k[tt]*G,pt=k[tt+1]*G,Tt=k[tt+2]*G;ut+=Math.abs((D[mt]-D[Tt])*(D[pt+1]-D[mt+1])-(D[mt]-D[pt])*(D[Tt+1]-D[mt+1]))}return K===0&&ut===0?0:Math.abs((ut-K)/K)};function w(D,N,G,k){for(var V=0,X=N,K=G-k;X<G;X+=k)V+=(D[K]-D[X])*(D[X+1]+D[K+1]),K=X;return V}o.flatten=function(D){for(var N=D[0][0].length,G={vertices:[],holes:[],dimensions:N},k=0,V=0;V<D.length;V++){for(var X=0;X<D[V].length;X++)for(var K=0;K<N;K++)G.vertices.push(D[V][X][K]);V>0&&(k+=D[V-1].length,G.holes.push(k))}return G},c.exports=o},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=l||g.strokeColor,s=h||g.strokeAlpha,n=(i&16711680)>>>16,d=(i&65280)>>>8,a=i&255;o.strokeStyle="rgba("+n+","+d+","+a+","+s+")",o.lineWidth=g.lineWidth};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(6),n=e(7),d=new o({Extends:l,initialize:function(u,f,p,v,m){var E="json";if(n(f)){var x=f;f=i(x,"key"),p=i(x,"url"),v=i(x,"xhrSettings"),E=i(x,"extension",E),m=i(x,"dataKey",m)}var y={type:"json",cache:u.cacheManager.json,extension:E,responseType:"text",key:f,url:p,xhrSettings:v,config:m};l.call(this,u,y),n(p)&&(m?this.data=s(p,m):this.data=p,this.state=g.FILE_POPULATED)},onProcess:function(){if(this.state!==g.FILE_POPULATED){this.state=g.FILE_PROCESSING;try{var a=JSON.parse(this.xhrLoader.responseText)}catch(f){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),f}var u=this.config;typeof u=="string"?this.data=s(a,u,a):this.data=a}this.onProcessComplete()}});h.register("json",function(a,u,f,p){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new d(this,a[v]));else this.addFile(new d(this,a,u,p,f));return this}),c.exports=d},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(158),g=e(26),l=function(h,i,s,n,d){for(var a=null,u=null,f=null,p=null,v=g(h,i,s,n,null,d),m=0;m<v.length;m++){var E=v[m];E&&(E.collides?(a=o(E.x,E.y-1,!0,d),u=o(E.x,E.y+1,!0,d),f=o(E.x-1,E.y,!0,d),p=o(E.x+1,E.y,!0,d),E.faceTop=!(a&&a.collides),E.faceBottom=!(u&&u.collides),E.faceLeft=!(f&&f.collides),E.faceRight=!(p&&p.collides)):E.resetFaces())}};c.exports=l},function(c,R,e){var o={};c.exports=o;var g=e(83),l=e(32);(function(){o.create=function(h,i){for(var s=[],n=0;n<h.length;n++){var d=h[n],a={x:d.x,y:d.y,index:n,body:i,isInternal:!1,contact:null,offset:null};a.contact={vertex:a,normalImpulse:0,tangentImpulse:0},s.push(a)}return s},o.fromPath=function(h,i){var s=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,n=[];return h.replace(s,function(d,a,u){n.push({x:parseFloat(a),y:parseFloat(u)})}),o.create(n,i)},o.centre=function(h){for(var i=o.area(h,!0),s={x:0,y:0},n,d,a,u=0;u<h.length;u++)a=(u+1)%h.length,n=g.cross(h[u],h[a]),d=g.mult(g.add(h[u],h[a]),n),s=g.add(s,d);return g.div(s,6*i)},o.mean=function(h){for(var i={x:0,y:0},s=0;s<h.length;s++)i.x+=h[s].x,i.y+=h[s].y;return g.div(i,h.length)},o.area=function(h,i){for(var s=0,n=h.length-1,d=0;d<h.length;d++)s+=(h[n].x-h[d].x)*(h[n].y+h[d].y),n=d;return i?s/2:Math.abs(s)/2},o.inertia=function(h,i){for(var s=0,n=0,d=h,a,u,f=0;f<d.length;f++)u=(f+1)%d.length,a=Math.abs(g.cross(d[u],d[f])),s+=a*(g.dot(d[u],d[u])+g.dot(d[u],d[f])+g.dot(d[f],d[f])),n+=a;return i/6*(s/n)},o.translate=function(h,i,s){var n;if(s)for(n=0;n<h.length;n++)h[n].x+=i.x*s,h[n].y+=i.y*s;else for(n=0;n<h.length;n++)h[n].x+=i.x,h[n].y+=i.y;return h},o.rotate=function(h,i,s){if(i!==0){for(var n=Math.cos(i),d=Math.sin(i),a=0;a<h.length;a++){var u=h[a],f=u.x-s.x,p=u.y-s.y;u.x=s.x+(f*n-p*d),u.y=s.y+(f*d+p*n)}return h}},o.contains=function(h,i){for(var s=0;s<h.length;s++){var n=h[s],d=h[(s+1)%h.length];if((i.x-n.x)*(d.y-n.y)+(i.y-n.y)*(n.x-d.x)>0)return!1}return!0},o.scale=function(h,i,s,n){if(i===1&&s===1)return h;n=n||o.centre(h);for(var d,a,u=0;u<h.length;u++)d=h[u],a=g.sub(d,n),h[u].x=n.x+a.x*i,h[u].y=n.y+a.y*s;return h},o.chamfer=function(h,i,s,n,d){typeof i=="number"?i=[i]:i=i||[8],s=typeof s!="undefined"?s:-1,n=n||2,d=d||14;for(var a=[],u=0;u<h.length;u++){var f=h[u-1>=0?u-1:h.length-1],p=h[u],v=h[(u+1)%h.length],m=i[u<i.length?u:i.length-1];if(m===0){a.push(p);continue}var E=g.normalise({x:p.y-f.y,y:f.x-p.x}),x=g.normalise({x:v.y-p.y,y:p.x-v.x}),y=Math.sqrt(2*Math.pow(m,2)),S=g.mult(l.clone(E),m),C=g.normalise(g.mult(g.add(E,x),.5)),I=g.sub(p,g.mult(C,y)),O=s;s===-1&&(O=Math.pow(m,.32)*1.75),O=l.clamp(O,n,d),O%2===1&&(O+=1);for(var M=Math.acos(g.dot(E,x)),L=M/O,P=0;P<O;P++)a.push(g.add(g.rotate(S,L*P),I))}return a},o.clockwiseSort=function(h){var i=o.mean(h);return h.sort(function(s,n){return g.angle(i,s)-g.angle(i,n)}),h},o.isConvex=function(h){var i=0,s=h.length,n,d,a,u;if(s<3)return null;for(n=0;n<s;n++)if(d=(n+1)%s,a=(n+2)%s,u=(h[d].x-h[n].x)*(h[a].y-h[d].y),u-=(h[d].y-h[n].y)*(h[a].x-h[d].x),u<0?i|=1:u>0&&(i|=2),i===3)return!1;return i!==0?!0:null},o.hull=function(h){var i=[],s=[],n,d;for(h=h.slice(0),h.sort(function(a,u){var f=a.x-u.x;return f!==0?f:a.y-u.y}),d=0;d<h.length;d+=1){for(n=h[d];s.length>=2&&g.cross3(s[s.length-2],s[s.length-1],n)<=0;)s.pop();s.push(n)}for(d=h.length-1;d>=0;d-=1){for(n=h[d];i.length>=2&&g.cross3(i[i.length-2],i[i.length-1],n)<=0;)i.pop();i.push(n)}return i.pop(),s.pop(),i.concat(s)}})()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(66),l=e(300),h=e(301),i=e(56),s=e(170),n=new o({initialize:function(a,u,f){a===void 0&&(a=0),u===void 0&&(u=0),f===void 0&&(f=0),this.type=i.CIRCLE,this.x=a,this.y=u,this._radius=f,this._diameter=f*2},contains:function(d,a){return g(this,d,a)},getPoint:function(d,a){return l(this,d,a)},getPoints:function(d,a,u){return h(this,d,a,u)},getRandomPoint:function(d){return s(this,d)},setTo:function(d,a,u){return this.x=d,this.y=a,this._radius=u,this._diameter=u*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(d,a){return a===void 0&&(a=d),this.x=d,this.y=a,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this._diameter=d*2}},diameter:{get:function(){return this._diameter},set:function(d){this._diameter=d,this._radius=d*.5}},left:{get:function(){return this.x-this._radius},set:function(d){this.x=d+this._radius}},right:{get:function(){return this.x+this._radius},set:function(d){this.x=d-this._radius}},top:{get:function(){return this.y-this._radius},set:function(d){this.y=d+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(d){this.y=d-this._radius}}});c.exports=n},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){if(o.radius>0&&g>=o.left&&g<=o.right&&l>=o.top&&l<=o.bottom){var h=(o.x-g)*(o.x-g),i=(o.y-l)*(o.y-l);return h+i<=o.radius*o.radius}else return!1};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return Math.sqrt((o.x2-o.x1)*(o.x2-o.x1)+(o.y2-o.y1)*(o.y2-o.y1))};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=l-g;return g+((o-g)%h+h)%h};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(39),l=1e-6,h=new o({initialize:function(f){this.val=new Float32Array(16),f?this.copy(f):this.identity()},clone:function(){return new h(this)},set:function(u){return this.copy(u)},setValues:function(u,f,p,v,m,E,x,y,S,C,I,O,M,L,P,b){var B=this.val;return B[0]=u,B[1]=f,B[2]=p,B[3]=v,B[4]=m,B[5]=E,B[6]=x,B[7]=y,B[8]=S,B[9]=C,B[10]=I,B[11]=O,B[12]=M,B[13]=L,B[14]=P,B[15]=b,this},copy:function(u){var f=u.val;return this.setValues(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])},fromArray:function(u){return this.setValues(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(u,f,p){var v=i.fromQuat(p),m=v.val,E=f.x,x=f.y,y=f.z;return this.setValues(m[0]*E,m[1]*E,m[2]*E,0,m[4]*x,m[5]*x,m[6]*x,0,m[8]*y,m[9]*y,m[10]*y,0,u.x,u.y,u.z,1)},xyz:function(u,f,p){this.identity();var v=this.val;return v[12]=u,v[13]=f,v[14]=p,this},scaling:function(u,f,p){this.zero();var v=this.val;return v[0]=u,v[5]=f,v[10]=p,v[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var u=this.val,f=u[1],p=u[2],v=u[3],m=u[6],E=u[7],x=u[11];return u[1]=u[4],u[2]=u[8],u[3]=u[12],u[4]=f,u[6]=u[9],u[7]=u[13],u[8]=p,u[9]=m,u[11]=u[14],u[12]=v,u[13]=E,u[14]=x,this},getInverse:function(u){return this.copy(u),this.invert()},invert:function(){var u=this.val,f=u[0],p=u[1],v=u[2],m=u[3],E=u[4],x=u[5],y=u[6],S=u[7],C=u[8],I=u[9],O=u[10],M=u[11],L=u[12],P=u[13],b=u[14],B=u[15],U=f*x-p*E,H=f*y-v*E,Y=f*S-m*E,j=p*y-v*x,_=p*S-m*x,w=v*S-m*y,D=C*P-I*L,N=C*b-O*L,G=C*B-M*L,k=I*b-O*P,V=I*B-M*P,X=O*B-M*b,K=U*X-H*V+Y*k+j*G-_*N+w*D;return K?(K=1/K,this.setValues((x*X-y*V+S*k)*K,(v*V-p*X-m*k)*K,(P*w-b*_+B*j)*K,(O*_-I*w-M*j)*K,(y*G-E*X-S*N)*K,(f*X-v*G+m*N)*K,(b*Y-L*w-B*H)*K,(C*w-O*Y+M*H)*K,(E*V-x*G+S*D)*K,(p*G-f*V-m*D)*K,(L*_-P*Y+B*U)*K,(I*Y-C*_-M*U)*K,(x*N-E*k-y*D)*K,(f*k-p*N+v*D)*K,(P*H-L*j-b*U)*K,(C*j-I*H+O*U)*K)):this},adjoint:function(){var u=this.val,f=u[0],p=u[1],v=u[2],m=u[3],E=u[4],x=u[5],y=u[6],S=u[7],C=u[8],I=u[9],O=u[10],M=u[11],L=u[12],P=u[13],b=u[14],B=u[15];return this.setValues(x*(O*B-M*b)-I*(y*B-S*b)+P*(y*M-S*O),-(p*(O*B-M*b)-I*(v*B-m*b)+P*(v*M-m*O)),p*(y*B-S*b)-x*(v*B-m*b)+P*(v*S-m*y),-(p*(y*M-S*O)-x*(v*M-m*O)+I*(v*S-m*y)),-(E*(O*B-M*b)-C*(y*B-S*b)+L*(y*M-S*O)),f*(O*B-M*b)-C*(v*B-m*b)+L*(v*M-m*O),-(f*(y*B-S*b)-E*(v*B-m*b)+L*(v*S-m*y)),f*(y*M-S*O)-E*(v*M-m*O)+C*(v*S-m*y),E*(I*B-M*P)-C*(x*B-S*P)+L*(x*M-S*I),-(f*(I*B-M*P)-C*(p*B-m*P)+L*(p*M-m*I)),f*(x*B-S*P)-E*(p*B-m*P)+L*(p*S-m*x),-(f*(x*M-S*I)-E*(p*M-m*I)+C*(p*S-m*x)),-(E*(I*b-O*P)-C*(x*b-y*P)+L*(x*O-y*I)),f*(I*b-O*P)-C*(p*b-v*P)+L*(p*O-v*I),-(f*(x*b-y*P)-E*(p*b-v*P)+L*(p*y-v*x)),f*(x*O-y*I)-E*(p*O-v*I)+C*(p*y-v*x))},determinant:function(){var u=this.val,f=u[0],p=u[1],v=u[2],m=u[3],E=u[4],x=u[5],y=u[6],S=u[7],C=u[8],I=u[9],O=u[10],M=u[11],L=u[12],P=u[13],b=u[14],B=u[15],U=f*x-p*E,H=f*y-v*E,Y=f*S-m*E,j=p*y-v*x,_=p*S-m*x,w=v*S-m*y,D=C*P-I*L,N=C*b-O*L,G=C*B-M*L,k=I*b-O*P,V=I*B-M*P,X=O*B-M*b;return U*X-H*V+Y*k+j*G-_*N+w*D},multiply:function(u){var f=this.val,p=f[0],v=f[1],m=f[2],E=f[3],x=f[4],y=f[5],S=f[6],C=f[7],I=f[8],O=f[9],M=f[10],L=f[11],P=f[12],b=f[13],B=f[14],U=f[15],H=u.val,Y=H[0],j=H[1],_=H[2],w=H[3];return f[0]=Y*p+j*x+_*I+w*P,f[1]=Y*v+j*y+_*O+w*b,f[2]=Y*m+j*S+_*M+w*B,f[3]=Y*E+j*C+_*L+w*U,Y=H[4],j=H[5],_=H[6],w=H[7],f[4]=Y*p+j*x+_*I+w*P,f[5]=Y*v+j*y+_*O+w*b,f[6]=Y*m+j*S+_*M+w*B,f[7]=Y*E+j*C+_*L+w*U,Y=H[8],j=H[9],_=H[10],w=H[11],f[8]=Y*p+j*x+_*I+w*P,f[9]=Y*v+j*y+_*O+w*b,f[10]=Y*m+j*S+_*M+w*B,f[11]=Y*E+j*C+_*L+w*U,Y=H[12],j=H[13],_=H[14],w=H[15],f[12]=Y*p+j*x+_*I+w*P,f[13]=Y*v+j*y+_*O+w*b,f[14]=Y*m+j*S+_*M+w*B,f[15]=Y*E+j*C+_*L+w*U,this},multiplyLocal:function(u){var f=this.val,p=u.val;return this.setValues(f[0]*p[0]+f[1]*p[4]+f[2]*p[8]+f[3]*p[12],f[0]*p[1]+f[1]*p[5]+f[2]*p[9]+f[3]*p[13],f[0]*p[2]+f[1]*p[6]+f[2]*p[10]+f[3]*p[14],f[0]*p[3]+f[1]*p[7]+f[2]*p[11]+f[3]*p[15],f[4]*p[0]+f[5]*p[4]+f[6]*p[8]+f[7]*p[12],f[4]*p[1]+f[5]*p[5]+f[6]*p[9]+f[7]*p[13],f[4]*p[2]+f[5]*p[6]+f[6]*p[10]+f[7]*p[14],f[4]*p[3]+f[5]*p[7]+f[6]*p[11]+f[7]*p[15],f[8]*p[0]+f[9]*p[4]+f[10]*p[8]+f[11]*p[12],f[8]*p[1]+f[9]*p[5]+f[10]*p[9]+f[11]*p[13],f[8]*p[2]+f[9]*p[6]+f[10]*p[10]+f[11]*p[14],f[8]*p[3]+f[9]*p[7]+f[10]*p[11]+f[11]*p[15],f[12]*p[0]+f[13]*p[4]+f[14]*p[8]+f[15]*p[12],f[12]*p[1]+f[13]*p[5]+f[14]*p[9]+f[15]*p[13],f[12]*p[2]+f[13]*p[6]+f[14]*p[10]+f[15]*p[14],f[12]*p[3]+f[13]*p[7]+f[14]*p[11]+f[15]*p[15])},premultiply:function(u){return this.multiplyMatrices(u,this)},multiplyMatrices:function(u,f){var p=u.val,v=f.val,m=p[0],E=p[4],x=p[8],y=p[12],S=p[1],C=p[5],I=p[9],O=p[13],M=p[2],L=p[6],P=p[10],b=p[14],B=p[3],U=p[7],H=p[11],Y=p[15],j=v[0],_=v[4],w=v[8],D=v[12],N=v[1],G=v[5],k=v[9],V=v[13],X=v[2],K=v[6],tt=v[10],st=v[14],rt=v[3],ht=v[7],ut=v[11],mt=v[15];return this.setValues(m*j+E*N+x*X+y*rt,S*j+C*N+I*X+O*rt,M*j+L*N+P*X+b*rt,B*j+U*N+H*X+Y*rt,m*_+E*G+x*K+y*ht,S*_+C*G+I*K+O*ht,M*_+L*G+P*K+b*ht,B*_+U*G+H*K+Y*ht,m*w+E*k+x*tt+y*ut,S*w+C*k+I*tt+O*ut,M*w+L*k+P*tt+b*ut,B*w+U*k+H*tt+Y*ut,m*D+E*V+x*st+y*mt,S*D+C*V+I*st+O*mt,M*D+L*V+P*st+b*mt,B*D+U*V+H*st+Y*mt)},translate:function(u){return this.translateXYZ(u.x,u.y,u.z)},translateXYZ:function(u,f,p){var v=this.val;return v[12]=v[0]*u+v[4]*f+v[8]*p+v[12],v[13]=v[1]*u+v[5]*f+v[9]*p+v[13],v[14]=v[2]*u+v[6]*f+v[10]*p+v[14],v[15]=v[3]*u+v[7]*f+v[11]*p+v[15],this},scale:function(u){return this.scaleXYZ(u.x,u.y,u.z)},scaleXYZ:function(u,f,p){var v=this.val;return v[0]=v[0]*u,v[1]=v[1]*u,v[2]=v[2]*u,v[3]=v[3]*u,v[4]=v[4]*f,v[5]=v[5]*f,v[6]=v[6]*f,v[7]=v[7]*f,v[8]=v[8]*p,v[9]=v[9]*p,v[10]=v[10]*p,v[11]=v[11]*p,this},makeRotationAxis:function(u,f){var p=Math.cos(f),v=Math.sin(f),m=1-p,E=u.x,x=u.y,y=u.z,S=m*E,C=m*x;return this.setValues(S*E+p,S*x-v*y,S*y+v*x,0,S*x+v*y,C*x+p,C*y-v*E,0,S*y-v*x,C*y+v*E,m*y*y+p,0,0,0,0,1)},rotate:function(u,f){var p=this.val,v=f.x,m=f.y,E=f.z,x=Math.sqrt(v*v+m*m+E*E);if(Math.abs(x)<l)return this;x=1/x,v*=x,m*=x,E*=x;var y=Math.sin(u),S=Math.cos(u),C=1-S,I=p[0],O=p[1],M=p[2],L=p[3],P=p[4],b=p[5],B=p[6],U=p[7],H=p[8],Y=p[9],j=p[10],_=p[11],w=p[12],D=p[13],N=p[14],G=p[15],k=v*v*C+S,V=m*v*C+E*y,X=E*v*C-m*y,K=v*m*C-E*y,tt=m*m*C+S,st=E*m*C+v*y,rt=v*E*C+m*y,ht=m*E*C-v*y,ut=E*E*C+S;return this.setValues(I*k+P*V+H*X,O*k+b*V+Y*X,M*k+B*V+j*X,L*k+U*V+_*X,I*K+P*tt+H*st,O*K+b*tt+Y*st,M*K+B*tt+j*st,L*K+U*tt+_*st,I*rt+P*ht+H*ut,O*rt+b*ht+Y*ut,M*rt+B*ht+j*ut,L*rt+U*ht+_*ut,w,D,N,G)},rotateX:function(u){var f=this.val,p=Math.sin(u),v=Math.cos(u),m=f[4],E=f[5],x=f[6],y=f[7],S=f[8],C=f[9],I=f[10],O=f[11];return f[4]=m*v+S*p,f[5]=E*v+C*p,f[6]=x*v+I*p,f[7]=y*v+O*p,f[8]=S*v-m*p,f[9]=C*v-E*p,f[10]=I*v-x*p,f[11]=O*v-y*p,this},rotateY:function(u){var f=this.val,p=Math.sin(u),v=Math.cos(u),m=f[0],E=f[1],x=f[2],y=f[3],S=f[8],C=f[9],I=f[10],O=f[11];return f[0]=m*v-S*p,f[1]=E*v-C*p,f[2]=x*v-I*p,f[3]=y*v-O*p,f[8]=m*p+S*v,f[9]=E*p+C*v,f[10]=x*p+I*v,f[11]=y*p+O*v,this},rotateZ:function(u){var f=this.val,p=Math.sin(u),v=Math.cos(u),m=f[0],E=f[1],x=f[2],y=f[3],S=f[4],C=f[5],I=f[6],O=f[7];return f[0]=m*v+S*p,f[1]=E*v+C*p,f[2]=x*v+I*p,f[3]=y*v+O*p,f[4]=S*v-m*p,f[5]=C*v-E*p,f[6]=I*v-x*p,f[7]=O*v-y*p,this},fromRotationTranslation:function(u,f){var p=u.x,v=u.y,m=u.z,E=u.w,x=p+p,y=v+v,S=m+m,C=p*x,I=p*y,O=p*S,M=v*y,L=v*S,P=m*S,b=E*x,B=E*y,U=E*S;return this.setValues(1-(M+P),I+U,O-B,0,I-U,1-(C+P),L+b,0,O+B,L-b,1-(C+M),0,f.x,f.y,f.z,1)},fromQuat:function(u){var f=u.x,p=u.y,v=u.z,m=u.w,E=f+f,x=p+p,y=v+v,S=f*E,C=f*x,I=f*y,O=p*x,M=p*y,L=v*y,P=m*E,b=m*x,B=m*y;return this.setValues(1-(O+L),C+B,I-b,0,C-B,1-(S+L),M+P,0,I+b,M-P,1-(S+O),0,0,0,0,1)},frustum:function(u,f,p,v,m,E){var x=1/(f-u),y=1/(v-p),S=1/(m-E);return this.setValues(m*2*x,0,0,0,0,m*2*y,0,0,(f+u)*x,(v+p)*y,(E+m)*S,-1,0,0,E*m*2*S,0)},perspective:function(u,f,p,v){var m=1/Math.tan(u/2),E=1/(p-v);return this.setValues(m/f,0,0,0,0,m,0,0,0,0,(v+p)*E,-1,0,0,2*v*p*E,0)},perspectiveLH:function(u,f,p,v){return this.setValues(2*p/u,0,0,0,0,2*p/f,0,0,0,0,-v/(p-v),1,0,0,p*v/(p-v),0)},ortho:function(u,f,p,v,m,E){var x=u-f,y=p-v,S=m-E;return x=x===0?x:1/x,y=y===0?y:1/y,S=S===0?S:1/S,this.setValues(-2*x,0,0,0,0,-2*y,0,0,0,0,2*S,0,(u+f)*x,(v+p)*y,(E+m)*S,1)},lookAtRH:function(u,f,p){var v=this.val;return a.subVectors(u,f),a.getLengthSquared()===0&&(a.z=1),a.normalize(),n.crossVectors(p,a),n.getLengthSquared()===0&&(Math.abs(p.z)===1?a.x+=1e-4:a.z+=1e-4,a.normalize(),n.crossVectors(p,a)),n.normalize(),d.crossVectors(a,n),v[0]=n.x,v[1]=n.y,v[2]=n.z,v[4]=d.x,v[5]=d.y,v[6]=d.z,v[8]=a.x,v[9]=a.y,v[10]=a.z,this},lookAt:function(u,f,p){var v=u.x,m=u.y,E=u.z,x=p.x,y=p.y,S=p.z,C=f.x,I=f.y,O=f.z;if(Math.abs(v-C)<l&&Math.abs(m-I)<l&&Math.abs(E-O)<l)return this.identity();var M=v-C,L=m-I,P=E-O,b=1/Math.sqrt(M*M+L*L+P*P);M*=b,L*=b,P*=b;var B=y*P-S*L,U=S*M-x*P,H=x*L-y*M;b=Math.sqrt(B*B+U*U+H*H),b?(b=1/b,B*=b,U*=b,H*=b):(B=0,U=0,H=0);var Y=L*H-P*U,j=P*B-M*H,_=M*U-L*B;return b=Math.sqrt(Y*Y+j*j+_*_),b?(b=1/b,Y*=b,j*=b,_*=b):(Y=0,j=0,_=0),this.setValues(B,Y,M,0,U,j,L,0,H,_,P,0,-(B*v+U*m+H*E),-(Y*v+j*m+_*E),-(M*v+L*m+P*E),1)},yawPitchRoll:function(u,f,p){this.zero(),i.zero(),s.zero();var v=this.val,m=i.val,E=s.val,x=Math.sin(p),y=Math.cos(p);return v[10]=1,v[15]=1,v[0]=y,v[1]=x,v[4]=-x,v[5]=y,x=Math.sin(f),y=Math.cos(f),m[0]=1,m[15]=1,m[5]=y,m[10]=y,m[9]=-x,m[6]=x,x=Math.sin(u),y=Math.cos(u),E[5]=1,E[15]=1,E[0]=y,E[2]=-x,E[8]=x,E[10]=y,this.multiplyLocal(i),this.multiplyLocal(s),this},setWorldMatrix:function(u,f,p,v,m){return this.yawPitchRoll(u.y,u.x,u.z),i.scaling(p.x,p.y,p.z),s.xyz(f.x,f.y,f.z),this.multiplyLocal(i),this.multiplyLocal(s),v&&this.multiplyLocal(v),m&&this.multiplyLocal(m),this},multiplyToMat4:function(u,f){var p=this.val,v=u.val,m=p[0],E=p[1],x=p[2],y=p[3],S=p[4],C=p[5],I=p[6],O=p[7],M=p[8],L=p[9],P=p[10],b=p[11],B=p[12],U=p[13],H=p[14],Y=p[15],j=v[0],_=v[1],w=v[2],D=v[3],N=v[4],G=v[5],k=v[6],V=v[7],X=v[8],K=v[9],tt=v[10],st=v[11],rt=v[12],ht=v[13],ut=v[14],mt=v[15];return f.setValues(j*m+_*S+w*M+D*B,_*E+_*C+w*L+D*U,w*x+_*I+w*P+D*H,D*y+_*O+w*b+D*Y,N*m+G*S+k*M+V*B,N*E+G*C+k*L+V*U,N*x+G*I+k*P+V*H,N*y+G*O+k*b+V*Y,X*m+K*S+tt*M+st*B,X*E+K*C+tt*L+st*U,X*x+K*I+tt*P+st*H,X*y+K*O+tt*b+st*Y,rt*m+ht*S+ut*M+mt*B,rt*E+ht*C+ut*L+mt*U,rt*x+ht*I+ut*P+mt*H,rt*y+ht*O+ut*b+mt*Y)},fromRotationXYTranslation:function(u,f,p){var v=f.x,m=f.y,E=f.z,x=Math.sin(u.x),y=Math.cos(u.x),S=Math.sin(u.y),C=Math.cos(u.y),I=v,O=m,M=E,L=-x,P=0-L*S,b=0-y*S,B=L*C,U=y*C;return p||(I=C*v+S*E,O=P*v+y*m+B*E,M=b*v+x*m+U*E),this.setValues(C,P,b,0,0,y,x,0,S,B,U,0,I,O,M,1)},getMaxScaleOnAxis:function(){var u=this.val,f=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],p=u[4]*u[4]+u[5]*u[5]+u[6]*u[6],v=u[8]*u[8]+u[9]*u[9]+u[10]*u[10];return Math.sqrt(Math.max(f,p,v))}}),i=new h,s=new h,n=new g,d=new g,a=new g;c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={COMPLETE:e(987),DECODED:e(988),DECODED_ALL:e(989),DESTROY:e(990),DETUNE:e(991),GLOBAL_DETUNE:e(992),GLOBAL_MUTE:e(993),GLOBAL_RATE:e(994),GLOBAL_VOLUME:e(995),LOOP:e(996),LOOPED:e(997),MUTE:e(998),PAN:e(999),PAUSE_ALL:e(1e3),PAUSE:e(1001),PLAY:e(1002),RATE:e(1003),RESUME_ALL:e(1004),RESUME:e(1005),SEEK:e(1006),STOP_ALL:e(1007),STOP:e(1008),UNLOCKED:e(1009),VOLUME:e(1010)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=new o({Extends:l,initialize:function d(a,u,f,p,v){var m="png",E;if(s(u)){var x=u;u=i(x,"key"),f=i(x,"url"),E=i(x,"normalMap"),p=i(x,"xhrSettings"),m=i(x,"extension",m),v=i(x,"frameConfig")}Array.isArray(f)&&(E=f[1],f=f[0]);var y={type:"image",cache:a.textureManager,extension:m,responseType:"blob",key:u,url:f,xhrSettings:p,config:v};if(l.call(this,a,y),E){var S=new d(a,this.key,E,p,v);S.type="normalMap",this.setLink(S),a.addFile(S)}},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var d=this;this.data.onload=function(){l.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){l.revokeObjectURL(d.data),d.onProcessError()},l.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var d,a=this.linkFile;a&&a.state===g.FILE_COMPLETE?(this.type==="image"?d=this.cache.addImage(this.key,this.data,a.data):d=this.cache.addImage(a.key,a.data,this.data),this.pendingDestroy(d),a.pendingDestroy(d)):a||(d=this.cache.addImage(this.key,this.data),this.pendingDestroy(d))}});h.register("image",function(d,a,u){if(Array.isArray(d))for(var f=0;f<d.length;f++)this.addFile(new n(this,d[f]));else this.addFile(new n(this,d,a,u));return this}),c.exports=n},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){g?o.setCollision(!0,!0,!0,!0,!1):o.resetCollision(!1)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(164),g=e(0),l=e(11),h=e(15),i=e(1065),s=new g({Extends:h,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Size,l.TextureCrop,l.Tint,l.Transform,l.Visible,i],initialize:function(d,a,u,f,p){h.call(this,d,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(f,p),this.setPosition(a,u),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(n,d){this.anims.update(n,d)},play:function(n,d){return this.anims.play(n,d)},playReverse:function(n,d){return this.anims.playReverse(n,d)},playAfterDelay:function(n,d){return this.anims.playAfterDelay(n,d)},playAfterRepeat:function(n,d){return this.anims.playAfterRepeat(n,d)},chain:function(n){return this.anims.chain(n)},stop:function(){return this.anims.stop()},stopAfterDelay:function(n){return this.anims.stopAfterDelay(n)},stopAfterRepeat:function(n){return this.anims.stopAfterRepeat(n)},stopOnFrame:function(n){return this.anims.stopOnFrame(n)},toJSON:function(){return l.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});c.exports=s},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){if(!(g>=o.length)){for(var l=o.length-1,h=o[g],i=g;i<l;i++)o[i]=o[i+1];return o.length=l,h}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ADDED_TO_SCENE:e(643),DESTROY:e(644),REMOVED_FROM_SCENE:e(645),VIDEO_COMPLETE:e(646),VIDEO_CREATED:e(647),VIDEO_ERROR:e(648),VIDEO_LOOP:e(649),VIDEO_PLAY:e(650),VIDEO_SEEKED:e(651),VIDEO_SEEKING:e(652),VIDEO_STOP:e(653),VIDEO_TIMEOUT:e(654),VIDEO_UNLOCKED:e(655)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){return l===void 0&&(l=0),g===0?o:(o-=l,o=g*Math.floor(o/g),h?(l+o)/g:l+o)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g={};for(var l in o)Array.isArray(o[l])?g[l]=o[l].slice(0):g[l]=o[l];return g};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=o.length;if(g<0||g>i||g>=l||l>i||g+l>i){if(h)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(h,i){return String(h).localeCompare(i)}function o(h,i){var s=h.length;if(s<=1)return h;for(var n=new Array(s),d=1;d<s;d*=2){g(h,i,d,n);var a=h;h=n,n=a}return h}function g(h,i,s,n){var d=h.length,a=0,u=s*2,f,p,v,m,E;for(f=0;f<d;f+=u)for(p=f+s,v=p+s,p>d&&(p=d),v>d&&(v=d),m=f,E=p;;)if(m<p&&E<v)i(h[m],h[E])<=0?n[a++]=h[m++]:n[a++]=h[E++];else if(m<p)n[a++]=h[m++];else if(E<v)n[a++]=h[E++];else break}var l=function(h,i){i===void 0&&(i=e);var s=o(h,i);return s!==h&&g(s,null,h.length,h),h};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(134),g=e(205),l=function(h,i){var s=o.Power0;if(typeof h=="string")if(o.hasOwnProperty(h))s=o[h];else{var n="";h.indexOf(".")&&(n=h.substr(h.indexOf(".")+1),n.toLowerCase()==="in"?n="easeIn":n.toLowerCase()==="out"?n="easeOut":n.toLowerCase()==="inout"&&(n="easeInOut")),h=g(h.substr(0,h.indexOf(".")+1)+n),o.hasOwnProperty(h)&&(s=o[h])}else typeof h=="function"?s=h:Array.isArray(h)&&h.length;if(!i)return s;var d=i.slice(0);return d.unshift(0),function(a){return d[0]=a,s.apply(this,d)}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(12),g=function(l,h,i,s,n){var d=l.strokeTint,a=o.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*i);d.TL=a,d.TR=a,d.BL=a,d.BR=a;var u=h.pathData,f=u.length-1,p=h.lineWidth,v=p/2,m=u[0]-s,E=u[1]-n;h.closePath||(f-=2);for(var x=2;x<f;x+=2){var y=u[x]-s,S=u[x+1]-n;l.batchLine(m,E,y,S,v,v,p,x-2,h.closePath?x===f-1:!1),m=y,E=S}};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(115),l=e(476),h=e(477),i=e(56),s=e(47),n=e(181),d=new o({initialize:function(u,f,p,v,m,E){u===void 0&&(u=0),f===void 0&&(f=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),E===void 0&&(E=0),this.type=i.TRIANGLE,this.x1=u,this.y1=f,this.x2=p,this.y2=v,this.x3=m,this.y3=E},contains:function(a,u){return g(this,a,u)},getPoint:function(a,u){return l(this,a,u)},getPoints:function(a,u,f){return h(this,a,u,f)},getRandomPoint:function(a){return n(this,a)},setTo:function(a,u,f,p,v,m){return a===void 0&&(a=0),u===void 0&&(u=0),f===void 0&&(f=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),this.x1=a,this.y1=u,this.x2=f,this.y2=p,this.x3=v,this.y3=m,this},getLineA:function(a){return a===void 0&&(a=new s),a.setTo(this.x1,this.y1,this.x2,this.y2),a},getLineB:function(a){return a===void 0&&(a=new s),a.setTo(this.x2,this.y2,this.x3,this.y3),a},getLineC:function(a){return a===void 0&&(a=new s),a.setTo(this.x3,this.y3,this.x1,this.y1),a},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(a){var u=0;this.x1<=this.x2&&this.x1<=this.x3?u=this.x1-a:this.x2<=this.x1&&this.x2<=this.x3?u=this.x2-a:u=this.x3-a,this.x1-=u,this.x2-=u,this.x3-=u}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(a){var u=0;this.x1>=this.x2&&this.x1>=this.x3?u=this.x1-a:this.x2>=this.x1&&this.x2>=this.x3?u=this.x2-a:u=this.x3-a,this.x1-=u,this.x2-=u,this.x3-=u}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(a){var u=0;this.y1<=this.y2&&this.y1<=this.y3?u=this.y1-a:this.y2<=this.y1&&this.y2<=this.y3?u=this.y2-a:u=this.y3-a,this.y1-=u,this.y2-=u,this.y3-=u}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(a){var u=0;this.y1>=this.y2&&this.y1>=this.y3?u=this.y1-a:this.y2>=this.y1&&this.y2>=this.y3?u=this.y2-a:u=this.y3-a,this.y1-=u,this.y2-=u,this.y3-=u}}});c.exports=d},function(c,R){var e={};c.exports=e,function(){e.create=function(o,g){return{x:o||0,y:g||0}},e.clone=function(o){return{x:o.x,y:o.y}},e.magnitude=function(o){return Math.sqrt(o.x*o.x+o.y*o.y)},e.magnitudeSquared=function(o){return o.x*o.x+o.y*o.y},e.rotate=function(o,g,l){var h=Math.cos(g),i=Math.sin(g);l||(l={});var s=o.x*h-o.y*i;return l.y=o.x*i+o.y*h,l.x=s,l},e.rotateAbout=function(o,g,l,h){var i=Math.cos(g),s=Math.sin(g);h||(h={});var n=l.x+((o.x-l.x)*i-(o.y-l.y)*s);return h.y=l.y+((o.x-l.x)*s+(o.y-l.y)*i),h.x=n,h},e.normalise=function(o){var g=e.magnitude(o);return g===0?{x:0,y:0}:{x:o.x/g,y:o.y/g}},e.dot=function(o,g){return o.x*g.x+o.y*g.y},e.cross=function(o,g){return o.x*g.y-o.y*g.x},e.cross3=function(o,g,l){return(g.x-o.x)*(l.y-o.y)-(g.y-o.y)*(l.x-o.x)},e.add=function(o,g,l){return l||(l={}),l.x=o.x+g.x,l.y=o.y+g.y,l},e.sub=function(o,g,l){return l||(l={}),l.x=o.x-g.x,l.y=o.y-g.y,l},e.mult=function(o,g){return{x:o.x*g,y:o.y*g}},e.div=function(o,g){return{x:o.x/g,y:o.y/g}},e.perp=function(o,g){return g=g===!0?-1:1,{x:g*-o.y,y:g*o.x}},e.neg=function(o){return{x:-o.x,y:-o.y}},e.angle=function(o,g){return Math.atan2(g.y-o.y,g.x-o.x)},e._temp=[e.create(),e.create(),e.create(),e.create(),e.create(),e.create()]}()},function(c,R){var e={};c.exports=e,function(){e.create=function(o){var g={min:{x:0,y:0},max:{x:0,y:0}};return o&&e.update(g,o),g},e.update=function(o,g,l){o.min.x=1/0,o.max.x=-1/0,o.min.y=1/0,o.max.y=-1/0;for(var h=0;h<g.length;h++){var i=g[h];i.x>o.max.x&&(o.max.x=i.x),i.x<o.min.x&&(o.min.x=i.x),i.y>o.max.y&&(o.max.y=i.y),i.y<o.min.y&&(o.min.y=i.y)}l&&(l.x>0?o.max.x+=l.x:o.min.x+=l.x,l.y>0?o.max.y+=l.y:o.min.y+=l.y)},e.contains=function(o,g){return g.x>=o.min.x&&g.x<=o.max.x&&g.y>=o.min.y&&g.y<=o.max.y},e.overlaps=function(o,g){return o.min.x<=g.max.x&&o.max.x>=g.min.x&&o.max.y>=g.min.y&&o.min.y<=g.max.y},e.translate=function(o,g){o.min.x+=g.x,o.max.x+=g.x,o.min.y+=g.y,o.max.y+=g.y},e.shift=function(o,g){var l=o.max.x-o.min.x,h=o.max.y-o.min.y;o.min.x=g.x,o.max.x=g.x+l,o.min.y=g.y,o.max.y=g.y+h}}()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(29),g=e(0),l=e(11),h=e(502),i=new g({Mixins:[l.Alpha,l.Flip,l.Visible],initialize:function(n,d,a,u,f,p,v,m){this.layer=n,this.index=d,this.x=a,this.y=u,this.width=f,this.height=p,this.right,this.bottom,this.baseWidth=v!==void 0?v:f,this.baseHeight=m!==void 0?m:p,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(s,n){return!(s<this.pixelX||n<this.pixelY||s>this.right||n>this.bottom)},copy:function(s){return this.index=s.index,this.alpha=s.alpha,this.properties=s.properties,this.visible=s.visible,this.setFlip(s.flipX,s.flipY),this.tint=s.tint,this.rotation=s.rotation,this.collideUp=s.collideUp,this.collideDown=s.collideDown,this.collideLeft=s.collideLeft,this.collideRight=s.collideRight,this.collisionCallback=s.collisionCallback,this.collisionCallbackContext=s.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(s){var n=this.tilemapLayer;return n?n.tileToWorldX(this.x,s):this.x*this.baseWidth},getRight:function(s){var n=this.tilemapLayer;return n?this.getLeft(s)+this.width*n.scaleX:this.getLeft(s)+this.width},getTop:function(s){var n=this.tilemapLayer;return n?n.tileToWorldY(this.y,s)-(this.height-this.baseHeight)*n.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(s){var n=this.tilemapLayer;return n?this.getTop(s)+this.height*n.scaleY:this.getTop(s)+this.height},getBounds:function(s,n){return n===void 0&&(n=new h),n.x=this.getLeft(),n.y=this.getTop(),n.width=this.getRight()-n.x,n.height=this.getBottom()-n.y,n},getCenterX:function(s){return(this.getLeft(s)+this.getRight(s))/2},getCenterY:function(s){return(this.getTop(s)+this.getBottom(s))/2},intersects:function(s,n,d,a){return!(d<=this.pixelX||a<=this.pixelY||s>=this.right||n>=this.bottom)},isInteresting:function(s,n){return s&&n?this.canCollide||this.hasInterestingFace:s?this.collides:n?this.hasInterestingFace:!1},resetCollision:function(s){if(s===void 0&&(s=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,s){var n=this.tilemapLayer;n&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(s,n,d,a,u){if(n===void 0&&(n=s),d===void 0&&(d=s),a===void 0&&(a=s),u===void 0&&(u=!0),this.collideLeft=s,this.collideRight=n,this.collideUp=d,this.collideDown=a,this.faceLeft=s,this.faceRight=n,this.faceTop=d,this.faceBottom=a,u){var f=this.tilemapLayer;f&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(s,n){return s===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=s,this.collisionCallbackContext=n),this},setSize:function(s,n,d,a){return s!==void 0&&(this.width=s),n!==void 0&&(this.height=n),d!==void 0&&(this.baseWidth=d),a!==void 0&&(this.baseHeight=a),this.updatePixelXY(),this},updatePixelXY:function(){var s=this.layer.orientation;if(s===o.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(s===o.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(s===o.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(s===o.HEXAGONAL){var n=this.layer.hexSideLength,d=(this.baseHeight-n)/2+n;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*d}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var s=this.layer.tilemapLayer;if(s){var n=s.gidMap[this.index];if(n)return n}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var s=this.tilemapLayer;return s?s.tilemap:null}}});c.exports=i},function(c,R,e){var o={};c.exports=o;var g=e(64),l=e(32),h=e(41),i=e(84),s=e(83),n=e(1393);(function(){o.rectangle=function(d,a,u,f,p){p=p||{};var v={label:"Rectangle Body",position:{x:d,y:a},vertices:g.fromPath("L 0 0 L "+u+" 0 L "+u+" "+f+" L 0 "+f)};if(p.chamfer){var m=p.chamfer;v.vertices=g.chamfer(v.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete p.chamfer}return h.create(l.extend({},v,p))},o.trapezoid=function(d,a,u,f,p,v){v=v||{},p*=.5;var m=(1-p*2)*u,E=u*p,x=E+m,y=x+E,S;p<.5?S="L 0 0 L "+E+" "+-f+" L "+x+" "+-f+" L "+y+" 0":S="L 0 0 L "+x+" "+-f+" L "+y+" 0";var C={label:"Trapezoid Body",position:{x:d,y:a},vertices:g.fromPath(S)};if(v.chamfer){var I=v.chamfer;C.vertices=g.chamfer(C.vertices,I.radius,I.quality,I.qualityMin,I.qualityMax),delete v.chamfer}return h.create(l.extend({},C,v))},o.circle=function(d,a,u,f,p){f=f||{};var v={label:"Circle Body",circleRadius:u};p=p||25;var m=Math.ceil(Math.max(10,Math.min(p,u)));return m%2===1&&(m+=1),o.polygon(d,a,m,u,l.extend({},v,f))},o.polygon=function(d,a,u,f,p){if(p=p||{},u<3)return o.circle(d,a,f,p);for(var v=2*Math.PI/u,m="",E=v*.5,x=0;x<u;x+=1){var y=E+x*v,S=Math.cos(y)*f,C=Math.sin(y)*f;m+="L "+S.toFixed(3)+" "+C.toFixed(3)+" "}var I={label:"Polygon Body",position:{x:d,y:a},vertices:g.fromPath(m)};if(p.chamfer){var O=p.chamfer;I.vertices=g.chamfer(I.vertices,O.radius,O.quality,O.qualityMin,O.qualityMax),delete p.chamfer}return h.create(l.extend({},I,p))},o.fromVertices=function(d,a,u,f,p,v,m){var E,x,y,S,C,I;for(f=f||{},x=[],p=typeof p!="undefined"?p:!1,v=typeof v!="undefined"?v:.01,m=typeof m!="undefined"?m:10,n||l.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),l.isArray(u[0])||(u=[u]),I=0;I<u.length;I+=1)if(S=u[I],y=g.isConvex(S),y||!n)y?S=g.clockwiseSort(S):S=g.hull(S),x.push({position:{x:d,y:a},vertices:S});else{var O=S.map(function(b){return[b.x,b.y]});n.makeCCW(O),v!==!1&&n.removeCollinearPoints(O,v);var M=n.quickDecomp(O);for(C=0;C<M.length;C++){var L=M[C],P=L.map(function(b){return{x:b[0],y:b[1]}});m>0&&g.area(P)<m||x.push({position:g.centre(P),vertices:P})}}for(C=0;C<x.length;C++)x[C]=h.create(l.extend(x[C],f));return p&&o.flagCoincidentParts(x,5),x.length>1?(E=h.create(l.extend({parts:x.slice(0)},f)),h.setPosition(E,{x:d,y:a}),E):x[0]},o.flagCoincidentParts=function(d,a){a===void 0&&(a=5);for(var u=0;u<d.length;u++)for(var f=d[u],p=u+1;p<d.length;p++){var v=d[p];if(i.overlaps(f.bounds,v.bounds))for(var m=f.vertices,E=v.vertices,x=0;x<f.vertices.length;x++)for(var y=0;y<v.vertices.length;y++){var S=s.magnitudeSquared(s.sub(m[(x+1)%m.length],E[y])),C=s.magnitudeSquared(s.sub(m[x],E[(y+1)%E.length]));S<a&&C<a&&(m[x].isInternal=!0,E[y].isInternal=!0)}}return d}})()},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.x-o.width*o.originX+o.width*.5};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.width*o.originX;return o.x=g+l-o.width*.5,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.y-o.height*o.originY+o.height*.5};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.height*o.originY;return o.y=g+l-o.height*.5,o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={POST_RENDER:e(628),PRE_RENDER:e(629),RENDER:e(630),RESIZE:e(631)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(74),g=function(l,h,i,s){s===void 0&&(s=l);var n;if(!Array.isArray(h))return n=l.indexOf(h),n!==-1?(o(l,n),i&&i.call(s,h),h):null;for(var d=h.length-1,a=[];d>=0;){var u=h[d];n=l.indexOf(u),n!==-1&&(o(l,n),a.push(u),i&&i.call(s,u)),d--}return a};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(199),l=e(10),h=e(3),i=new o({initialize:function(n){this.type=n,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new h,this._tmpVec2B=new h},draw:function(s,n){return n===void 0&&(n=32),s.strokePoints(this.getPoints(n))},getBounds:function(s,n){s||(s=new l),n===void 0&&(n=16);var d=this.getLength();n>d&&(n=d/2);var a=Math.max(1,Math.round(d/n));return g(this.getSpacedPoints(a),s)},getDistancePoints:function(s){var n=this.getLength(),d=Math.max(1,n/s);return this.getSpacedPoints(d)},getEndPoint:function(s){return s===void 0&&(s=new h),this.getPointAt(1,s)},getLength:function(){var s=this.getLengths();return s[s.length-1]},getLengths:function(s){if(s===void 0&&(s=this.arcLengthDivisions),this.cacheArcLengths.length===s+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var n=[],d,a=this.getPoint(0,this._tmpVec2A),u=0;n.push(0);for(var f=1;f<=s;f++)d=this.getPoint(f/s,this._tmpVec2B),u+=d.distance(a),n.push(u),a.copy(d);return this.cacheArcLengths=n,n},getPointAt:function(s,n){var d=this.getUtoTmapping(s);return this.getPoint(d,n)},getPoints:function(s,n,d){d===void 0&&(d=[]),s||(n?s=this.getLength()/n:s=this.defaultDivisions);for(var a=0;a<=s;a++)d.push(this.getPoint(a/s));return d},getRandomPoint:function(s){return s===void 0&&(s=new h),this.getPoint(Math.random(),s)},getSpacedPoints:function(s,n,d){d===void 0&&(d=[]),s||(n?s=this.getLength()/n:s=this.defaultDivisions);for(var a=0;a<=s;a++){var u=this.getUtoTmapping(a/s,null,s);d.push(this.getPoint(u))}return d},getStartPoint:function(s){return s===void 0&&(s=new h),this.getPointAt(0,s)},getTangent:function(s,n){n===void 0&&(n=new h);var d=1e-4,a=s-d,u=s+d;return a<0&&(a=0),u>1&&(u=1),this.getPoint(a,this._tmpVec2A),this.getPoint(u,n),n.subtract(this._tmpVec2A).normalize()},getTangentAt:function(s,n){var d=this.getUtoTmapping(s);return this.getTangent(d,n)},getTFromDistance:function(s,n){return s<=0?0:this.getUtoTmapping(0,s,n)},getUtoTmapping:function(s,n,d){var a=this.getLengths(d),u=0,f=a.length,p;n?p=Math.min(n,a[f-1]):p=s*a[f-1];for(var v=0,m=f-1,E;v<=m;)if(u=Math.floor(v+(m-v)/2),E=a[u]-p,E<0)v=u+1;else if(E>0)m=u-1;else{m=u;break}if(u=m,a[u]===p)return u/(f-1);var x=a[u],y=a[u+1],S=y-x,C=(p-x)/S;return(u+C)/(f-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ADD:e(968),COMPLETE:e(969),FILE_COMPLETE:e(970),FILE_KEY_COMPLETE:e(971),FILE_LOAD_ERROR:e(972),FILE_LOAD:e(973),FILE_PROGRESS:e(974),POST_PROCESS:e(975),PROGRESS:e(976),START:e(977)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h,i){i===void 0&&(i=new o);var s=l.x1,n=l.y1,d=l.x2,a=l.y2,u=h.x1,f=h.y1,p=h.x2,v=h.y2,m=(p-u)*(n-f)-(v-f)*(s-u),E=(d-s)*(n-f)-(a-n)*(s-u),x=(v-f)*(d-s)-(p-u)*(a-n);if(x===0)return!1;var y=m/x,S=E/x;return y>=0&&y<=1&&S>=0&&S<=1?(i.x=s+y*(d-s),i.y=n+y*(a-n),!0):!1};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return Math.atan2(o.y2-o.y1,o.x2-o.x1)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(18),g=function(l,h,i){return l=o(l,0,1),(i-h)*l+h};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return o&&o.hasOwnProperty(g)?o[g]:l};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(315),l=new o({initialize:function(i,s){this.parent=i,this.events=s,s||(this.events=i.events?i.events:i),this.list={},this.values={},this._frozen=!1,!i.hasOwnProperty("sys")&&this.events&&this.events.once(g.DESTROY,this.destroy,this)},get:function(h){var i=this.list;if(Array.isArray(h)){for(var s=[],n=0;n<h.length;n++)s.push(i[h[n]]);return s}else return i[h]},getAll:function(){var h={};for(var i in this.list)this.list.hasOwnProperty(i)&&(h[i]=this.list[i]);return h},query:function(h){var i={};for(var s in this.list)this.list.hasOwnProperty(s)&&s.match(h)&&(i[s]=this.list[s]);return i},set:function(h,i){if(this._frozen)return this;if(typeof h=="string")return this.setValue(h,i);for(var s in h)this.setValue(s,h[s]);return this},inc:function(h,i){if(this._frozen)return this;i===void 0&&(i=1);var s=this.get(h);return s===void 0&&(s=0),this.set(h,s+i),this},toggle:function(h){return this._frozen?this:(this.set(h,!this.get(h)),this)},setValue:function(h,i){if(this._frozen)return this;if(this.has(h))this.values[h]=i;else{var s=this,n=this.list,d=this.events,a=this.parent;Object.defineProperty(this.values,h,{enumerable:!0,configurable:!0,get:function(){return n[h]},set:function(u){if(!s._frozen){var f=n[h];n[h]=u,d.emit(g.CHANGE_DATA,a,h,u,f),d.emit(g.CHANGE_DATA_KEY+h,a,u,f)}}}),n[h]=i,d.emit(g.SET_DATA,a,h,i)}return this},each:function(h,i){for(var s=[this.parent,null,void 0],n=1;n<arguments.length;n++)s.push(arguments[n]);for(var d in this.list)s[1]=d,s[2]=this.list[d],h.apply(i,s);return this},merge:function(h,i){i===void 0&&(i=!0);for(var s in h)h.hasOwnProperty(s)&&(i||!i&&!this.has(s))&&this.setValue(s,h[s]);return this},remove:function(h){if(this._frozen)return this;if(Array.isArray(h))for(var i=0;i<h.length;i++)this.removeValue(h[i]);else return this.removeValue(h);return this},removeValue:function(h){if(this.has(h)){var i=this.list[h];delete this.list[h],delete this.values[h],this.events.emit(g.REMOVE_DATA,this.parent,h,i)}return this},pop:function(h){var i=void 0;return!this._frozen&&this.has(h)&&(i=this.list[h],delete this.list[h],delete this.values[h],this.events.emit(g.REMOVE_DATA,this.parent,h,i)),i},has:function(h){return this.list.hasOwnProperty(h)},setFreeze:function(h){return this._frozen=h,this},reset:function(){for(var h in this.list)delete this.list[h],delete this.values[h];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(g.CHANGE_DATA),this.events.off(g.SET_DATA),this.events.off(g.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(h){this._frozen=!!h}},count:{get:function(){var h=0;for(var i in this.list)this.list[i]!==void 0&&h++;return h}}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h){if(this.entries={},this.size=0,Array.isArray(h))for(var i=0;i<h.length;i++)this.set(h[i][0],h[i][1])},set:function(l,h){return this.has(l)||this.size++,this.entries[l]=h,this},get:function(l){if(this.has(l))return this.entries[l]},getArray:function(){var l=[],h=this.entries;for(var i in h)l.push(h[i]);return l},has:function(l){return this.entries.hasOwnProperty(l)},delete:function(l){return this.has(l)&&(delete this.entries[l],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(l){delete this.entries[l]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var l=[],h=this.entries;for(var i in h)l.push(h[i]);return l},dump:function(){var l=this.entries;console.group("Map");for(var h in l)console.log(h,l[h]);console.groupEnd()},each:function(l){var h=this.entries;for(var i in h)if(l(i,h[i])===!1)break;return this},contains:function(l){var h=this.entries;for(var i in h)if(h[i]===l)return!0;return!1},merge:function(l,h){h===void 0&&(h=!1);var i=this.entries,s=l.entries;for(var n in s)i.hasOwnProperty(n)&&h?i[n]=s[n]:this.set(n,s[n]);return this}});c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return o<<16|g<<8|l};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ENTER_FULLSCREEN:e(800),FULLSCREEN_FAILED:e(801),FULLSCREEN_UNSUPPORTED:e(802),LEAVE_FULLSCREEN:e(803),ORIENTATION_CHANGE:e(804),RESIZE:e(805)}},function(c,R,e){(function(o){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var g={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function l(){if(typeof importScripts=="function")return g;var h=navigator.userAgent;/Windows/.test(h)?g.windows=!0:/Mac OS/.test(h)&&!/like Mac OS/.test(h)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(g.iOS=!0,g.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),g.iOSVersion=parseInt(RegExp.$1,10)):g.macOS=!0:/Android/.test(h)?g.android=!0:/Linux/.test(h)?g.linux=!0:/iP[ao]d|iPhone/i.test(h)?(g.iOS=!0,navigator.appVersion.match(/OS (\d+)/),g.iOSVersion=parseInt(RegExp.$1,10),g.iPhone=h.toLowerCase().indexOf("iphone")!==-1,g.iPad=h.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(h)||/\bKF[A-Z][A-Z]+/.test(h)||/Silk.*Mobile Safari/.test(h)?g.kindle=!0:/CrOS/.test(h)&&(g.chromeOS=!0),(/Windows Phone/i.test(h)||/IEMobile/i.test(h))&&(g.android=!1,g.iOS=!1,g.macOS=!1,g.windows=!0,g.windowsPhone=!0);var i=/Silk/.test(h);return(g.windows||g.macOS||g.linux&&!i||g.chromeOS)&&(g.desktop=!0),(g.windowsPhone||/Windows NT/i.test(h)&&/Touch/i.test(h))&&(g.desktop=!1),navigator.standalone&&(g.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(g.cordova=!0),window.ejecta!==void 0&&(g.ejecta=!0)),typeof o!="undefined"&&o.versions&&o.versions.node&&(g.node=!0),g.node&&typeof o.versions=="object"&&(g.nodeWebkit=!!o.versions["node-webkit"],g.electron=!!o.versions.electron),/Crosswalk/.test(h)&&(g.crosswalk=!0),g.pixelRatio=window.devicePixelRatio||1,g}c.exports=l()}).call(this,e(807))},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ADD:e(861),ERROR:e(862),LOAD:e(863),READY:e(864),REMOVE:e(865)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(59),l=e(2),h=e(878),i=e(879),s=e(25),n=e(12),d=e(107),a=e(58),u=new o({Extends:a,initialize:function(p){var v=p.game.renderer,m=l(p,"fragShader",h);p.fragShader=n.parseFragmentShaderMaxTextures(m,v.maxTextures),p.vertShader=l(p,"vertShader",i),p.attributes=l(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:d.UNSIGNED_BYTE,normalized:!0}]),a.call(this,p),this._tempMatrix1=new s,this._tempMatrix2=new s,this._tempMatrix3=new s,this.calcMatrix=new s,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){a.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(f,p,v){this.manager.set(this,f);var m=this._tempMatrix1,E=this._tempMatrix2,x=this._tempMatrix3,y=f.frame,S=y.glTexture,C=y.u0,I=y.v0,O=y.u1,M=y.v1,L=y.x,P=y.y,b=y.cutWidth,B=y.cutHeight,U=y.customPivot,H=f.displayOriginX,Y=f.displayOriginY,j=-H+L,_=-Y+P;if(f.isCropped){var w=f._crop;(w.flipX!==f.flipX||w.flipY!==f.flipY)&&y.updateCropUVs(w,f.flipX,f.flipY),C=w.u0,I=w.v0,O=w.u1,M=w.v1,b=w.width,B=w.height,L=w.x,P=w.y,j=-H+L,_=-Y+P}var D=1,N=1;f.flipX&&(U||(j+=-y.realWidth+H*2),D=-1),(f.flipY||y.source.isGLTexture&&!S.flipY)&&(U||(_+=-y.realHeight+Y*2),N=-1),E.applyITRS(f.x,f.y,f.rotation,f.scaleX*D,f.scaleY*N),m.copyFrom(p.matrix),v?(m.multiplyWithOffset(v,-p.scrollX*f.scrollFactorX,-p.scrollY*f.scrollFactorY),E.e=f.x,E.f=f.y):(E.e-=p.scrollX*f.scrollFactorX,E.f-=p.scrollY*f.scrollFactorY),m.multiply(E,x);var G=j+b,k=_+B,V=p.roundPixels,X=x.getXRound(j,_,V),K=x.getYRound(j,_,V),tt=x.getXRound(j,k,V),st=x.getYRound(j,k,V),rt=x.getXRound(G,k,V),ht=x.getYRound(G,k,V),ut=x.getXRound(G,_,V),mt=x.getYRound(G,_,V),pt=n.getTintAppendFloatAlpha,Tt=p.alpha,Nt=pt(f.tintTopLeft,Tt*f._alphaTL),Ct=pt(f.tintTopRight,Tt*f._alphaTR),$t=pt(f.tintBottomLeft,Tt*f._alphaBL),vt=pt(f.tintBottomRight,Tt*f._alphaBR);this.shouldFlush(6)&&this.flush();var Ht=this.setGameObject(f,y);this.manager.preBatch(f),this.batchQuad(f,X,K,tt,st,rt,ht,ut,mt,C,I,O,M,Nt,Ct,$t,vt,f.tintFill,S,Ht),this.manager.postBatch(f)},batchTexture:function(f,p,v,m,E,x,y,S,C,I,O,M,L,P,b,B,U,H,Y,j,_,w,D,N,G,k,V,X,K,tt,st,rt){this.manager.set(this,f);var ht=this._tempMatrix1,ut=this._tempMatrix2,mt=this._tempMatrix3,pt=H/v+V,Tt=Y/m+X,Nt=(H+j)/v+V,Ct=(Y+_)/m+X,$t=y,vt=S,Ht=-B,At=-U;if(f.isCropped){var Dt=f._crop,se=Dt.width,$e=Dt.height;$t=se,vt=$e,y=se,S=$e,H=Dt.x,Y=Dt.y;var zt=H,Bt=Y;M&&(zt=j-Dt.x-se),L&&(Bt=_-Dt.y-$e),pt=zt/v+V,Tt=Bt/m+X,Nt=(zt+se)/v+V,Ct=(Bt+$e)/m+X,Ht=-B+H,At=-U+Y}L=L^(!st&&p.isRenderTexture?1:0),M&&($t*=-1,Ht+=y),L&&(vt*=-1,At+=S);var ee=Ht+$t,ft=At+vt;ut.applyITRS(E,x,O,C,I),ht.copyFrom(K.matrix),tt?(ht.multiplyWithOffset(tt,-K.scrollX*P,-K.scrollY*b),ut.e=E,ut.f=x):(ut.e-=K.scrollX*P,ut.f-=K.scrollY*b),ht.multiply(ut,mt);var ie=K.roundPixels,ye=mt.getXRound(Ht,At,ie),Ae=mt.getYRound(Ht,At,ie),He=mt.getXRound(Ht,ft,ie),De=mt.getYRound(Ht,ft,ie),ne=mt.getXRound(ee,ft,ie),W=mt.getYRound(ee,ft,ie),Z=mt.getXRound(ee,At,ie),it=mt.getYRound(ee,At,ie);rt===void 0&&(rt=this.renderer.setTexture2D(p)),f&&this.manager.preBatch(f),this.batchQuad(f,ye,Ae,He,De,ne,W,Z,it,pt,Tt,Nt,Ct,w,D,N,G,k,p,rt),f&&this.manager.postBatch(f)},batchTextureFrame:function(f,p,v,m,E,x,y){this.manager.set(this);var S=this._tempMatrix1.copyFrom(x),C=this._tempMatrix2,I=p+f.width,O=v+f.height;y?S.multiply(y,C):C=S;var M=C.getX(p,v),L=C.getY(p,v),P=C.getX(p,O),b=C.getY(p,O),B=C.getX(I,O),U=C.getY(I,O),H=C.getX(I,v),Y=C.getY(I,v),j=this.renderer.setTextureSource(f.source);m=n.getTintAppendFloatAlpha(m,E),this.batchQuad(null,M,L,P,b,B,U,H,Y,f.u0,f.v0,f.u1,f.v1,m,m,m,m,0,f.glTexture,j)},batchFillRect:function(f,p,v,m,E,x){this.renderer.pipelines.set(this);var y=this.calcMatrix;x&&x.multiply(E,y);var S=f+v,C=p+m,I=y.getX(f,p),O=y.getY(f,p),M=y.getX(f,C),L=y.getY(f,C),P=y.getX(S,C),b=y.getY(S,C),B=y.getX(S,p),U=y.getY(S,p),H=this.fillTint;this.batchQuad(null,I,O,M,L,P,b,B,U,0,0,1,1,H.TL,H.TR,H.BL,H.BR,2)},batchFillTriangle:function(f,p,v,m,E,x,y,S){this.renderer.pipelines.set(this);var C=this.calcMatrix;S&&S.multiply(y,C);var I=C.getX(f,p),O=C.getY(f,p),M=C.getX(v,m),L=C.getY(v,m),P=C.getX(E,x),b=C.getY(E,x),B=this.fillTint;this.batchTri(null,I,O,M,L,P,b,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(f,p,v,m,E,x,y,S,C){var I=this.tempTriangle;I[0].x=f,I[0].y=p,I[0].width=y,I[1].x=v,I[1].y=m,I[1].width=y,I[2].x=E,I[2].y=x,I[2].width=y,I[3].x=f,I[3].y=p,I[3].width=y,this.batchStrokePath(I,y,!1,S,C)},batchFillPath:function(f,p,v){this.renderer.pipelines.set(this);var m=this.calcMatrix;v&&v.multiply(p,m);for(var E=f.length,x=this.polygonCache,y,S,C=this.fillTint.TL,I=this.fillTint.TR,O=this.fillTint.BL,M=0;M<E;++M)S=f[M],x.push(S.x,S.y);y=g(x),E=y.length;for(var L=0;L<E;L+=3){var P=y[L+0]*2,b=y[L+1]*2,B=y[L+2]*2,U=x[P+0],H=x[P+1],Y=x[b+0],j=x[b+1],_=x[B+0],w=x[B+1],D=m.getX(U,H),N=m.getY(U,H),G=m.getX(Y,j),k=m.getY(Y,j),V=m.getX(_,w),X=m.getY(_,w);this.batchTri(null,D,N,G,k,V,X,0,0,1,1,C,I,O,2)}x.length=0},batchStrokePath:function(f,p,v,m,E){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var x=f.length-1,y=0;y<x;y++){var S=f[y],C=f[y+1];this.batchLine(S.x,S.y,C.x,C.y,S.width/2,C.width/2,p,y,!v&&y===x-1,m,E)}},batchLine:function(f,p,v,m,E,x,y,S,C,I,O){this.renderer.pipelines.set(this);var M=this.calcMatrix;O&&O.multiply(I,M);var L=v-f,P=m-p,b=Math.sqrt(L*L+P*P),B=E*(m-p)/b,U=E*(f-v)/b,H=x*(m-p)/b,Y=x*(f-v)/b,j=v-H,_=m-Y,w=f-B,D=p-U,N=v+H,G=m+Y,k=f+B,V=p+U,X=M.getX(j,_),K=M.getY(j,_),tt=M.getX(w,D),st=M.getY(w,D),rt=M.getX(N,G),ht=M.getY(N,G),ut=M.getX(k,V),mt=M.getY(k,V),pt=this.strokeTint,Tt=pt.TL,Nt=pt.TR,Ct=pt.BL,$t=pt.BR;if(this.batchQuad(null,ut,mt,tt,st,X,K,rt,ht,0,0,1,1,Tt,Nt,Ct,$t,2),!(y<=2)){var vt=this.prevQuad,Ht=this.firstQuad;S>0&&vt[4]?this.batchQuad(null,ut,mt,tt,st,vt[0],vt[1],vt[2],vt[3],0,0,1,1,Tt,Nt,Ct,$t,2):(Ht[0]=ut,Ht[1]=mt,Ht[2]=tt,Ht[3]=st,Ht[4]=1),C&&Ht[4]?this.batchQuad(null,X,K,rt,ht,Ht[0],Ht[1],Ht[2],Ht[3],0,0,1,1,Tt,Nt,Ct,$t,2):(vt[0]=X,vt[1]=K,vt[2]=rt,vt[3]=ht,vt[4]=1)}}});c.exports=u},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(18),l=e(17),h=new o({initialize:function(s,n,d,a,u,f,p){this.texture=s,this.name=n,this.source=s.source[d],this.sourceIndex=d,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(f,p,a,u)},setSize:function(i,s,n,d){n===void 0&&(n=0),d===void 0&&(d=0),this.cutX=n,this.cutY=d,this.cutWidth=i,this.cutHeight=s,this.width=i,this.height=s,this.halfWidth=Math.floor(i*.5),this.halfHeight=Math.floor(s*.5),this.centerX=Math.floor(i/2),this.centerY=Math.floor(s/2);var a=this.data,u=a.cut;u.x=n,u.y=d,u.w=i,u.h=s,u.r=n+i,u.b=d+s,a.sourceSize.w=i,a.sourceSize.h=s,a.spriteSourceSize.w=i,a.spriteSourceSize.h=s,a.radius=.5*Math.sqrt(i*i+s*s);var f=a.drawImage;return f.x=n,f.y=d,f.width=i,f.height=s,this.updateUVs()},setTrim:function(i,s,n,d,a,u){var f=this.data,p=f.spriteSourceSize;return f.trim=!0,f.sourceSize.w=i,f.sourceSize.h=s,p.x=n,p.y=d,p.w=a,p.h=u,p.r=n+a,p.b=d+u,this.x=n,this.y=d,this.width=a,this.height=u,this.halfWidth=a*.5,this.halfHeight=u*.5,this.centerX=Math.floor(a/2),this.centerY=Math.floor(u/2),this.updateUVs()},setCropUVs:function(i,s,n,d,a,u,f){var p=this.cutX,v=this.cutY,m=this.cutWidth,E=this.cutHeight,x=this.realWidth,y=this.realHeight;s=g(s,0,x),n=g(n,0,y),d=g(d,0,x-s),a=g(a,0,y-n);var S=p+s,C=v+n,I=d,O=a,M=this.data;if(M.trim){var L=M.spriteSourceSize;d=g(d,0,m-s),a=g(a,0,E-n);var P=s+d,b=n+a,B=!(L.r<s||L.b<n||L.x>P||L.y>b);if(B){var U=Math.max(L.x,s),H=Math.max(L.y,n),Y=Math.min(L.r,P)-U,j=Math.min(L.b,b)-H;I=Y,O=j,u?S=p+(m-(U-L.x)-Y):S=p+(U-L.x),f?C=v+(E-(H-L.y)-j):C=v+(H-L.y),s=U,n=H,d=Y,a=j}else S=0,C=0,I=0,O=0}else u&&(S=p+(m-s-d)),f&&(C=v+(E-n-a));var _=this.source.width,w=this.source.height;return i.u0=Math.max(0,S/_),i.v0=Math.max(0,C/w),i.u1=Math.min(1,(S+I)/_),i.v1=Math.min(1,(C+O)/w),i.x=s,i.y=n,i.cx=S,i.cy=C,i.cw=I,i.ch=O,i.width=d,i.height=a,i.flipX=u,i.flipY=f,i},updateCropUVs:function(i,s,n){return this.setCropUVs(i,i.x,i.y,i.width,i.height,s,n)},setUVs:function(i,s,n,d,a,u){var f=this.data.drawImage;return f.width=i,f.height=s,this.u0=n,this.v0=d,this.u1=a,this.v1=u,this},updateUVs:function(){var i=this.cutX,s=this.cutY,n=this.cutWidth,d=this.cutHeight,a=this.data.drawImage;a.width=n,a.height=d;var u=this.source.width,f=this.source.height;return this.u0=i/u,this.v0=s/f,this.u1=(i+n)/u,this.v1=(s+d)/f,this},updateUVsInverted:function(){var i=this.source.width,s=this.source.height;return this.u0=(this.cutX+this.cutHeight)/i,this.v0=this.cutY/s,this.u1=this.cutX/i,this.v1=(this.cutY+this.cutWidth)/s,this},clone:function(){var i=new h(this.texture,this.name,this.sourceIndex);return i.cutX=this.cutX,i.cutY=this.cutY,i.cutWidth=this.cutWidth,i.cutHeight=this.cutHeight,i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i.halfWidth=this.halfWidth,i.halfHeight=this.halfHeight,i.centerX=this.centerX,i.centerY=this.centerY,i.rotated=this.rotated,i.data=l(!0,i.data,this.data),i.updateUVs(),i},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(208),g=e(0),l=e(1),h=e(79),i=new g({initialize:function(n){this.parent=n,this.list=[],this.position=0,this.addCallback=l,this.removeCallback=l,this._sortKey=""},add:function(s,n){return n?o.Add(this.list,s):o.Add(this.list,s,0,this.addCallback,this)},addAt:function(s,n,d){return d?o.AddAt(this.list,s,n):o.AddAt(this.list,s,n,0,this.addCallback,this)},getAt:function(s){return this.list[s]},getIndex:function(s){return this.list.indexOf(s)},sort:function(s,n){return s?(n===void 0&&(n=function(d,a){return d[s]-a[s]}),h(this.list,n),this):this},getByName:function(s){return o.GetFirst(this.list,"name",s)},getRandom:function(s,n){return o.GetRandom(this.list,s,n)},getFirst:function(s,n,d,a){return o.GetFirst(this.list,s,n,d,a)},getAll:function(s,n,d,a){return o.GetAll(this.list,s,n,d,a)},count:function(s,n){return o.CountAllMatching(this.list,s,n)},swap:function(s,n){o.Swap(this.list,s,n)},moveTo:function(s,n){return o.MoveTo(this.list,s,n)},moveAbove:function(s,n){return o.MoveAbove(this.list,s,n)},moveBelow:function(s,n){return o.MoveBelow(this.list,s,n)},remove:function(s,n){return n?o.Remove(this.list,s):o.Remove(this.list,s,this.removeCallback,this)},removeAt:function(s,n){return n?o.RemoveAt(this.list,s):o.RemoveAt(this.list,s,this.removeCallback,this)},removeBetween:function(s,n,d){return d?o.RemoveBetween(this.list,s,n):o.RemoveBetween(this.list,s,n,this.removeCallback,this)},removeAll:function(s){for(var n=this.list.length;n--;)this.remove(this.list[n],s);return this},bringToTop:function(s){return o.BringToTop(this.list,s)},sendToBack:function(s){return o.SendToBack(this.list,s)},moveUp:function(s){return o.MoveUp(this.list,s),s},moveDown:function(s){return o.MoveDown(this.list,s),s},reverse:function(){return this.list.reverse(),this},shuffle:function(){return o.Shuffle(this.list),this},replace:function(s,n){return o.Replace(this.list,s,n)},exists:function(s){return this.list.indexOf(s)>-1},setAll:function(s,n,d,a){return o.SetAll(this.list,s,n,d,a),this},each:function(s,n){for(var d=[null],a=2;a<arguments.length;a++)d.push(arguments[a]);for(a=0;a<this.list.length;a++)d[0]=this.list[a],s.apply(n,d)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(112),l=e(445),h=e(446),i=e(56),s=e(180),n=new o({initialize:function(a,u,f,p){a===void 0&&(a=0),u===void 0&&(u=0),f===void 0&&(f=0),p===void 0&&(p=0),this.type=i.ELLIPSE,this.x=a,this.y=u,this.width=f,this.height=p},contains:function(d,a){return g(this,d,a)},getPoint:function(d,a){return l(this,d,a)},getPoints:function(d,a,u){return h(this,d,a,u)},getRandomPoint:function(d){return s(this,d)},setTo:function(d,a,u,f){return this.x=d,this.y=a,this.width=u,this.height=f,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(d,a){return a===void 0&&(a=d),this.x=d,this.y=a,this},setSize:function(d,a){return a===void 0&&(a=d),this.width=d,this.height=a,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(d){this.x=d+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(d){this.y=d+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});c.exports=n},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){if(o.width<=0||o.height<=0)return!1;var h=(g-o.x)/o.width,i=(l-o.y)/o.height;return h*=h,i*=i,h+i<.25};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(275),g=e(0),l=e(75),h=e(9),i=e(207),s=e(2),n=e(6),d=e(7),a=e(437),u=e(149),f=e(73),p=new g({Extends:h,initialize:function(m,E,x){h.call(this),x?E&&!Array.isArray(E)&&(E=[E]):Array.isArray(E)?d(E[0])&&(x=E,E=null):d(E)&&(x=E,E=null),this.scene=m,this.children=new u,this.isParent=!0,this.type="Group",this.classType=s(x,"classType",f),this.name=s(x,"name",""),this.active=s(x,"active",!0),this.maxSize=s(x,"maxSize",-1),this.defaultKey=s(x,"defaultKey",null),this.defaultFrame=s(x,"defaultFrame",null),this.runChildUpdate=s(x,"runChildUpdate",!1),this.createCallback=s(x,"createCallback",null),this.removeCallback=s(x,"removeCallback",null),this.createMultipleCallback=s(x,"createMultipleCallback",null),this.internalCreateCallback=s(x,"internalCreateCallback",null),this.internalRemoveCallback=s(x,"internalRemoveCallback",null),E&&this.addMultiple(E),x&&this.createMultiple(x),this.on(l.ADDED_TO_SCENE,this.addedToScene,this),this.on(l.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(v,m,E,x,y,S){if(v===void 0&&(v=0),m===void 0&&(m=0),E===void 0&&(E=this.defaultKey),x===void 0&&(x=this.defaultFrame),y===void 0&&(y=!0),S===void 0&&(S=!0),this.isFull())return null;var C=new this.classType(this.scene,v,m,E,x);return C.addToDisplayList(this.scene.sys.displayList),C.addToUpdateList(),C.visible=y,C.setActive(S),this.add(C),C},createMultiple:function(v){if(this.isFull())return[];Array.isArray(v)||(v=[v]);var m=[];if(v[0].key)for(var E=0;E<v.length;E++){var x=this.createFromConfig(v[E]);m=m.concat(x)}return m},createFromConfig:function(v){if(this.isFull())return[];this.classType=s(v,"classType",this.classType);var m=s(v,"key",void 0),E=s(v,"frame",null),x=s(v,"visible",!0),y=s(v,"active",!0),S=[];if(m===void 0)return S;Array.isArray(m)||(m=[m]),Array.isArray(E)||(E=[E]);var C=s(v,"repeat",0),I=s(v,"randomKey",!1),O=s(v,"randomFrame",!1),M=s(v,"yoyo",!1),L=s(v,"quantity",!1),P=s(v,"frameQuantity",1),b=s(v,"max",0),B=a(m,E,{max:b,qty:L||P,random:I,randomB:O,repeat:C,yoyo:M});v.createCallback&&(this.createCallback=v.createCallback),v.removeCallback&&(this.removeCallback=v.removeCallback);for(var U=0;U<B.length;U++){var H=this.create(0,0,B[U].a,B[U].b,x,y);if(!H)break;S.push(H)}var Y=n(v,"setXY.x",0),j=n(v,"setXY.y",0),_=n(v,"setXY.stepX",0),w=n(v,"setXY.stepY",0);o.SetXY(S,Y,j,_,w);var D=n(v,"setRotation.value",0),N=n(v,"setRotation.step",0);o.SetRotation(S,D,N);var G=n(v,"setScale.x",1),k=n(v,"setScale.y",G),V=n(v,"setScale.stepX",0),X=n(v,"setScale.stepY",0);o.SetScale(S,G,k,V,X);var K=n(v,"setOrigin.x",.5),tt=n(v,"setOrigin.y",K),st=n(v,"setOrigin.stepX",0),rt=n(v,"setOrigin.stepY",0);o.SetOrigin(S,K,tt,st,rt);var ht=n(v,"setAlpha.value",1),ut=n(v,"setAlpha.step",0);o.SetAlpha(S,ht,ut);var mt=n(v,"setDepth.value",0),pt=n(v,"setDepth.step",0);o.SetDepth(S,mt,pt);var Tt=n(v,"setScrollFactor.x",1),Nt=n(v,"setScrollFactor.y",Tt),Ct=n(v,"setScrollFactor.stepX",0),$t=n(v,"setScrollFactor.stepY",0);o.SetScrollFactor(S,Tt,Nt,Ct,$t);var vt=s(v,"hitArea",null),Ht=s(v,"hitAreaCallback",null);vt&&o.SetHitArea(S,vt,Ht);var At=s(v,"gridAlign",!1);return At&&o.GridAlign(S,At),this.createMultipleCallback&&this.createMultipleCallback.call(this,S),S},preUpdate:function(v,m){if(!(!this.runChildUpdate||this.children.size===0))for(var E=this.children.entries.slice(),x=0;x<E.length;x++){var y=E[x];y.active&&y.update(v,m)}},add:function(v,m){return m===void 0&&(m=!1),this.isFull()?this:(this.children.set(v),this.internalCreateCallback&&this.internalCreateCallback.call(this,v),this.createCallback&&this.createCallback.call(this,v),m&&(v.addToDisplayList(this.scene.sys.displayList),v.addToUpdateList()),v.on(l.DESTROY,this.remove,this),this)},addMultiple:function(v,m){if(m===void 0&&(m=!1),Array.isArray(v))for(var E=0;E<v.length;E++)this.add(v[E],m);return this},remove:function(v,m,E){return m===void 0&&(m=!1),E===void 0&&(E=!1),this.children.contains(v)?(this.children.delete(v),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,v),this.removeCallback&&this.removeCallback.call(this,v),v.off(l.DESTROY,this.remove,this),E?v.destroy():m&&(v.removeFromDisplayList(),v.removeFromUpdateList()),this):this},clear:function(v,m){v===void 0&&(v=!1),m===void 0&&(m=!1);for(var E=this.children,x=0;x<E.size;x++){var y=E.entries[x];y.off(l.DESTROY,this.remove,this),m?y.destroy():v&&(y.removeFromDisplayList(),y.removeFromUpdateList())}return this.children.clear(),this},contains:function(v){return this.children.contains(v)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(v,m,E,x){return i(this.children.entries,v,m,E,x)},getFirst:function(v,m,E,x,y,S,C){return this.getHandler(!0,1,v,m,E,x,y,S,C)},getFirstNth:function(v,m,E,x,y,S,C,I){return this.getHandler(!0,v,m,E,x,y,S,C,I)},getLast:function(v,m,E,x,y,S,C){return this.getHandler(!1,1,v,m,E,x,y,S,C)},getLastNth:function(v,m,E,x,y,S,C,I){return this.getHandler(!1,v,m,E,x,y,S,C,I)},getHandler:function(v,m,E,x,y,S,C,I,O){E===void 0&&(E=!1),x===void 0&&(x=!1);var M,L,P=0,b=this.children.entries;if(v)for(L=0;L<b.length;L++)if(M=b[L],M.active===E){if(P++,P===m)break}else M=null;else for(L=b.length-1;L>=0;L--)if(M=b[L],M.active===E){if(P++,P===m)break}else M=null;return M?(typeof y=="number"&&(M.x=y),typeof S=="number"&&(M.y=S),M):x?this.create(y,S,C,I,O):null},get:function(v,m,E,x,y){return this.getFirst(!1,!0,v,m,E,x,y)},getFirstAlive:function(v,m,E,x,y,S){return this.getFirst(!0,v,m,E,x,y,S)},getFirstDead:function(v,m,E,x,y,S){return this.getFirst(!1,v,m,E,x,y,S)},playAnimation:function(v,m){return o.PlayAnimation(this.children.entries,v,m),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(v){v===void 0&&(v=!0);for(var m=0,E=0;E<this.children.size;E++)this.children.entries[E].active===v&&m++;return m},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var v=this.getTotalUsed(),m=this.maxSize===-1?999999999999:this.maxSize;return m-v},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},propertyValueSet:function(v,m,E,x,y){return o.PropertyValueSet(this.children.entries,v,m,E,x,y),this},propertyValueInc:function(v,m,E,x,y){return o.PropertyValueInc(this.children.entries,v,m,E,x,y),this},setX:function(v,m){return o.SetX(this.children.entries,v,m),this},setY:function(v,m){return o.SetY(this.children.entries,v,m),this},setXY:function(v,m,E,x){return o.SetXY(this.children.entries,v,m,E,x),this},incX:function(v,m){return o.IncX(this.children.entries,v,m),this},incY:function(v,m){return o.IncY(this.children.entries,v,m),this},incXY:function(v,m,E,x){return o.IncXY(this.children.entries,v,m,E,x),this},shiftPosition:function(v,m,E){return o.ShiftPosition(this.children.entries,v,m,E),this},angle:function(v,m){return o.Angle(this.children.entries,v,m),this},rotate:function(v,m){return o.Rotate(this.children.entries,v,m),this},rotateAround:function(v,m){return o.RotateAround(this.children.entries,v,m),this},rotateAroundDistance:function(v,m,E){return o.RotateAroundDistance(this.children.entries,v,m,E),this},setAlpha:function(v,m){return o.SetAlpha(this.children.entries,v,m),this},setTint:function(v,m,E,x){return o.SetTint(this.children.entries,v,m,E,x),this},setOrigin:function(v,m,E,x){return o.SetOrigin(this.children.entries,v,m,E,x),this},scaleX:function(v,m){return o.ScaleX(this.children.entries,v,m),this},scaleY:function(v,m){return o.ScaleY(this.children.entries,v,m),this},scaleXY:function(v,m,E,x){return o.ScaleXY(this.children.entries,v,m,E,x),this},setDepth:function(v,m){return o.SetDepth(this.children.entries,v,m),this},setBlendMode:function(v){return o.SetBlendMode(this.children.entries,v),this},setHitArea:function(v,m){return o.SetHitArea(this.children.entries,v,m),this},shuffle:function(){return o.Shuffle(this.children.entries),this},kill:function(v){this.children.contains(v)&&v.setActive(!1)},killAndHide:function(v){this.children.contains(v)&&(v.setActive(!1),v.setVisible(!1))},setVisible:function(v,m,E){return o.SetVisible(this.children.entries,v,m,E),this},toggleVisible:function(){return o.ToggleVisible(this.children.entries),this},destroy:function(v,m){v===void 0&&(v=!1),m===void 0&&(m=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(l.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(m,v),this.scene=void 0,this.children=void 0)}});c.exports=p},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(12),g=function(l,h,i,s,n,d){for(var a=o.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*s),u=i.pathData,f=i.pathIndexes,p=0;p<f.length;p+=3){var v=f[p]*2,m=f[p+1]*2,E=f[p+2]*2,x=u[v+0]-n,y=u[v+1]-d,S=u[m+0]-n,C=u[m+1]-d,I=u[E+0]-n,O=u[E+1]-d,M=h.getX(x,y),L=h.getY(x,y),P=h.getX(S,C),b=h.getY(S,C),B=h.getX(I,O),U=h.getY(I,O);l.batchTri(i,M,L,P,b,B,U,0,0,1,1,a,a,a,2)}};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=o.x3-o.x1,i=o.y3-o.y1,s=o.x2-o.x1,n=o.y2-o.y1,d=g-o.x1,a=l-o.y1,u=h*h+i*i,f=h*s+i*n,p=h*d+i*a,v=s*s+n*n,m=s*d+n*a,E=u*v-f*f,x=E===0?0:1/E,y=(v*p-f*m)*x,S=(u*m-f*p)*x;return y>=0&&S>=0&&y+S<1};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(10),l=e(3);function h(s,n,d,a){var u=s-d,f=n-a,p=u*u+f*f;return Math.sqrt(p)}var i=new o({initialize:function(n,d,a){this.vertex1=n,this.vertex2=d,this.vertex3=a,this.bounds=new g,this._inCenter=new l},getInCenter:function(s){s===void 0&&(s=!0);var n=this.vertex1,d=this.vertex2,a=this.vertex3,u,f,p,v,m,E;s?(u=n.x,f=n.y,p=d.x,v=d.y,m=a.x,E=a.y):(u=n.vx,f=n.vy,p=d.vx,v=d.vy,m=a.vx,E=a.vy);var x=h(m,E,p,v),y=h(u,f,m,E),S=h(p,v,u,f),C=x+y+S;return this._inCenter.set((u*x+p*y+m*S)/C,(f*x+v*y+E*S)/C)},contains:function(s,n,d){var a=this.vertex1,u=this.vertex2,f=this.vertex3,p=a.vx,v=a.vy,m=u.vx,E=u.vy,x=f.vx,y=f.vy;if(d){var S=d.a,C=d.b,I=d.c,O=d.d,M=d.e,L=d.f;p=a.vx*S+a.vy*I+M,v=a.vx*C+a.vy*O+L,m=u.vx*S+u.vy*I+M,E=u.vx*C+u.vy*O+L,x=f.vx*S+f.vy*I+M,y=f.vx*C+f.vy*O+L}var P=x-p,b=y-v,B=m-p,U=E-v,H=s-p,Y=n-v,j=P*P+b*b,_=P*B+b*U,w=P*H+b*Y,D=B*B+U*U,N=B*H+U*Y,G=j*D-_*_,k=G===0?0:1/G,V=(D*w-_*N)*k,X=(j*N-_*w)*k;return V>=0&&X>=0&&V+X<1},isCounterClockwise:function(s){var n=this.vertex1,d=this.vertex2,a=this.vertex3,u=(d.vx-n.vx)*(a.vy-n.vy)-(d.vy-n.vy)*(a.vx-n.vx);return s<=0?u>=0:u<0},load:function(s,n,d,a,u){return d=this.vertex1.load(s,n,d,a,u),d=this.vertex2.load(s,n,d,a,u),d=this.vertex3.load(s,n,d,a,u),d},transformCoordinatesLocal:function(s,n,d,a){return this.vertex1.transformCoordinatesLocal(s,n,d,a),this.vertex2.transformCoordinatesLocal(s,n,d,a),this.vertex3.transformCoordinatesLocal(s,n,d,a),this},updateBounds:function(){var s=this.vertex1,n=this.vertex2,d=this.vertex3,a=this.bounds;return a.x=Math.min(s.vx,n.vx,d.vx),a.y=Math.min(s.vy,n.vy,d.vy),a.width=Math.max(s.vx,n.vx,d.vx)-a.x,a.height=Math.max(s.vy,n.vy,d.vy)-a.y,this},isInView:function(s,n,d,a,u,f,p,v,m,E,x){var y=this.vertex1.update(u,f,p,v,m,E,x,a),S=this.vertex2.update(u,f,p,v,m,E,x,a),C=this.vertex3.update(u,f,p,v,m,E,x,a);if(y.ta<=0&&S.ta<=0&&C.ta<=0||n&&!this.isCounterClockwise(d))return!1;var I=this.bounds;I.x=Math.min(y.tx,S.tx,C.tx),I.y=Math.min(y.ty,S.ty,C.ty),I.width=Math.max(y.tx,S.tx,C.tx)-I.x,I.height=Math.max(y.ty,S.ty,C.ty)-I.y;var O=s.x+s.width,M=s.y+s.height;return I.width<=0||I.height<=0||s.width<=0||s.height<=0?!1:!(I.right<s.x||I.bottom<s.y||I.x>O||I.y>M)},translate:function(s,n){n===void 0&&(n=0);var d=this.vertex1,a=this.vertex2,u=this.vertex3;return d.x+=s,d.y+=n,a.x+=s,a.y+=n,u.x+=s,u.y+=n,this},x:{get:function(){return this.getInCenter().x},set:function(s){var n=this.getInCenter();this.translate(s-n.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(s){var n=this.getInCenter();this.translate(0,s-n.y)}},alpha:{get:function(){var s=this.vertex1,n=this.vertex2,d=this.vertex3;return(s.alpha+n.alpha+d.alpha)/3},set:function(s){this.vertex1.alpha=s,this.vertex2.alpha=s,this.vertex3.alpha=s}},depth:{get:function(){var s=this.vertex1,n=this.vertex2,d=this.vertex3;return(s.vz+n.vz+d.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(12),l=e(39),h=new o({Extends:l,initialize:function(s,n,d,a,u,f,p,v,m,E){f===void 0&&(f=16777215),p===void 0&&(p=1),v===void 0&&(v=0),m===void 0&&(m=0),E===void 0&&(E=0),l.call(this,s,n,d),this.vx=0,this.vy=0,this.vz=0,this.nx=v,this.ny=m,this.nz=E,this.u=a,this.v=u,this.color=f,this.alpha=p,this.tx=0,this.ty=0,this.ta=0},setUVs:function(i,s){return this.u=i,this.v=s,this},transformCoordinatesLocal:function(i,s,n,d){var a=this.x,u=this.y,f=this.z,p=i.val,v=a*p[0]+u*p[4]+f*p[8]+p[12],m=a*p[1]+u*p[5]+f*p[9]+p[13],E=a*p[2]+u*p[6]+f*p[10]+p[14],x=a*p[3]+u*p[7]+f*p[11]+p[15];this.vx=v/x*s,this.vy=-(m/x)*n,d<=0?this.vz=E/x:this.vz=-(E/x)},update:function(i,s,n,d,a,u,f,p){var v=this.vx*i+this.vy*n+a,m=this.vx*s+this.vy*d+u;return f&&(v=Math.round(v),m=Math.round(m)),this.tx=v,this.ty=m,this.ta=this.alpha*p,this},load:function(i,s,n,d,a){return i[++n]=this.tx,i[++n]=this.ty,i[++n]=this.u,i[++n]=this.v,i[++n]=d,i[++n]=a,s[++n]=g.getTintAppendFloatAlpha(this.color,this.ta),n}});c.exports=h},function(c,R,e){var o={};c.exports=o;var g=e(166),l=e(32),h=e(84),i=e(41);(function(){o.create=function(s){return l.extend({id:l.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},s)},o.setModified=function(s,n,d,a){if(g.trigger(s,"compositeModified",s),s.isModified=n,d&&s.parent&&o.setModified(s.parent,n,d,a),a)for(var u=0;u<s.composites.length;u++){var f=s.composites[u];o.setModified(f,n,d,a)}},o.add=function(s,n){var d=[].concat(n);g.trigger(s,"beforeAdd",{object:n});for(var a=0;a<d.length;a++){var u=d[a];switch(u.type){case"body":if(u.parent!==u){l.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(s,u);break;case"constraint":o.addConstraint(s,u);break;case"composite":o.addComposite(s,u);break;case"mouseConstraint":o.addConstraint(s,u.constraint);break}}return g.trigger(s,"afterAdd",{object:n}),s},o.remove=function(s,n,d){var a=[].concat(n);g.trigger(s,"beforeRemove",{object:n});for(var u=0;u<a.length;u++){var f=a[u];switch(f.type){case"body":o.removeBody(s,f,d);break;case"constraint":o.removeConstraint(s,f,d);break;case"composite":o.removeComposite(s,f,d);break;case"mouseConstraint":o.removeConstraint(s,f.constraint);break}}return g.trigger(s,"afterRemove",{object:n}),s},o.addComposite=function(s,n){return s.composites.push(n),n.parent=s,o.setModified(s,!0,!0,!1),s},o.removeComposite=function(s,n,d){var a=s.composites.indexOf(n);if(a!==-1&&(o.removeCompositeAt(s,a),o.setModified(s,!0,!0,!1)),d)for(var u=0;u<s.composites.length;u++)o.removeComposite(s.composites[u],n,!0);return s},o.removeCompositeAt=function(s,n){return s.composites.splice(n,1),o.setModified(s,!0,!0,!1),s},o.addBody=function(s,n){return s.bodies.push(n),o.setModified(s,!0,!0,!1),s},o.removeBody=function(s,n,d){var a=s.bodies.indexOf(n);if(a!==-1&&(o.removeBodyAt(s,a),o.setModified(s,!0,!0,!1)),d)for(var u=0;u<s.composites.length;u++)o.removeBody(s.composites[u],n,!0);return s},o.removeBodyAt=function(s,n){return s.bodies.splice(n,1),o.setModified(s,!0,!0,!1),s},o.addConstraint=function(s,n){return s.constraints.push(n),o.setModified(s,!0,!0,!1),s},o.removeConstraint=function(s,n,d){var a=s.constraints.indexOf(n);if(a!==-1&&o.removeConstraintAt(s,a),d)for(var u=0;u<s.composites.length;u++)o.removeConstraint(s.composites[u],n,!0);return s},o.removeConstraintAt=function(s,n){return s.constraints.splice(n,1),o.setModified(s,!0,!0,!1),s},o.clear=function(s,n,d){if(d)for(var a=0;a<s.composites.length;a++)o.clear(s.composites[a],n,!0);return n?s.bodies=s.bodies.filter(function(u){return u.isStatic}):s.bodies.length=0,s.constraints.length=0,s.composites.length=0,o.setModified(s,!0,!0,!1),s},o.allBodies=function(s){for(var n=[].concat(s.bodies),d=0;d<s.composites.length;d++)n=n.concat(o.allBodies(s.composites[d]));return n},o.allConstraints=function(s){for(var n=[].concat(s.constraints),d=0;d<s.composites.length;d++)n=n.concat(o.allConstraints(s.composites[d]));return n},o.allComposites=function(s){for(var n=[].concat(s.composites),d=0;d<s.composites.length;d++)n=n.concat(o.allComposites(s.composites[d]));return n},o.get=function(s,n,d){var a,u;switch(d){case"body":a=o.allBodies(s);break;case"constraint":a=o.allConstraints(s);break;case"composite":a=o.allComposites(s).concat(s);break}return a?(u=a.filter(function(f){return f.id.toString()===n.toString()}),u.length===0?null:u[0]):null},o.move=function(s,n,d){return o.remove(s,n),o.add(d,n),s},o.rebase=function(s){for(var n=o.allBodies(s).concat(o.allConstraints(s)).concat(o.allComposites(s)),d=0;d<n.length;d++)n[d].id=l.nextId();return o.setModified(s,!0,!0,!1),s},o.translate=function(s,n,d){for(var a=d?o.allBodies(s):s.bodies,u=0;u<a.length;u++)i.translate(a[u],n);return o.setModified(s,!0,!0,!1),s},o.rotate=function(s,n,d,a){for(var u=Math.cos(n),f=Math.sin(n),p=a?o.allBodies(s):s.bodies,v=0;v<p.length;v++){var m=p[v],E=m.position.x-d.x,x=m.position.y-d.y;i.setPosition(m,{x:d.x+(E*u-x*f),y:d.y+(E*f+x*u)}),i.rotate(m,n)}return o.setModified(s,!0,!0,!1),s},o.scale=function(s,n,d,a,u){for(var f=u?o.allBodies(s):s.bodies,p=0;p<f.length;p++){var v=f[p],m=v.position.x-a.x,E=v.position.y-a.y;i.setPosition(v,{x:a.x+m*n,y:a.y+E*d}),i.scale(v,n,d)}return o.setModified(s,!0,!0,!1),s},o.bounds=function(s){for(var n=o.allBodies(s),d=[],a=0;a<n.length;a+=1){var u=n[a];d.push(u.bounds.min,u.bounds.max)}return h.create(d)}})()},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return o>=0&&o<l.width&&g>=0&&g<l.height};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(29),l=e(2),h=new o({initialize:function(s){s===void 0&&(s={}),this.name=l(s,"name","layer"),this.x=l(s,"x",0),this.y=l(s,"y",0),this.width=l(s,"width",0),this.height=l(s,"height",0),this.tileWidth=l(s,"tileWidth",0),this.tileHeight=l(s,"tileHeight",0),this.baseTileWidth=l(s,"baseTileWidth",this.tileWidth),this.baseTileHeight=l(s,"baseTileHeight",this.tileHeight),this.orientation=l(s,"orientation",g.ORTHOGONAL),this.widthInPixels=l(s,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=l(s,"heightInPixels",this.height*this.baseTileHeight),this.alpha=l(s,"alpha",1),this.visible=l(s,"visible",!0),this.properties=l(s,"properties",[]),this.indexes=l(s,"indexes",[]),this.collideIndexes=l(s,"collideIndexes",[]),this.callbacks=l(s,"callbacks",[]),this.bodies=l(s,"bodies",[]),this.data=l(s,"data",[]),this.tilemapLayer=l(s,"tilemapLayer",null),this.hexSideLength=l(s,"hexSideLength",0)}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(29),l=e(2),h=new o({initialize:function(s){s===void 0&&(s={}),this.name=l(s,"name","map"),this.width=l(s,"width",0),this.height=l(s,"height",0),this.infinite=l(s,"infinite",!1),this.tileWidth=l(s,"tileWidth",0),this.tileHeight=l(s,"tileHeight",0),this.widthInPixels=l(s,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=l(s,"heightInPixels",this.height*this.tileHeight),this.format=l(s,"format",null),this.orientation=l(s,"orientation",g.ORTHOGONAL),this.renderOrder=l(s,"renderOrder","right-down"),this.version=l(s,"version","1"),this.properties=l(s,"properties",{}),this.layers=l(s,"layers",[]),this.images=l(s,"images",[]),this.objects=l(s,"objects",{}),this.collision=l(s,"collision",{}),this.tilesets=l(s,"tilesets",[]),this.imageCollections=l(s,"imageCollections",[]),this.tiles=l(s,"tiles",[]),this.hexSideLength=l(s,"hexSideLength",0)}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h,i,s,n,d,a,u,f){(s===void 0||s<=0)&&(s=32),(n===void 0||n<=0)&&(n=32),d===void 0&&(d=0),a===void 0&&(a=0),u===void 0&&(u={}),f===void 0&&(f={}),this.name=h,this.firstgid=i,this.tileWidth=s,this.tileHeight=n,this.tileMargin=d,this.tileSpacing=a,this.tileProperties=u,this.tileData=f,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(l){return this.containsTileIndex(l)?this.tileProperties[l-this.firstgid]:null},getTileData:function(l){return this.containsTileIndex(l)?this.tileData[l-this.firstgid]:null},getTileCollisionGroup:function(l){var h=this.getTileData(l);return h&&h.objectgroup?h.objectgroup:null},containsTileIndex:function(l){return l>=this.firstgid&&l<this.firstgid+this.total},getTileTextureCoordinates:function(l){return this.containsTileIndex(l)?this.texCoordinates[l-this.firstgid]:null},setImage:function(l){return this.image=l,this.glTexture=l.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(l,h){return l!==void 0&&(this.tileWidth=l),h!==void 0&&(this.tileHeight=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(l,h){return l!==void 0&&(this.tileMargin=l),h!==void 0&&(this.tileSpacing=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(l,h){var i=(h-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),s=(l-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(i%1!==0||s%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),i=Math.floor(i),s=Math.floor(s),this.rows=i,this.columns=s,this.total=i*s,this.texCoordinates.length=0;for(var n=this.tileMargin,d=this.tileMargin,a=0;a<this.rows;a++){for(var u=0;u<this.columns;u++)this.texCoordinates.push({x:n,y:d}),n+=this.tileWidth+this.tileSpacing;n=this.tileMargin,d+=this.tileHeight+this.tileSpacing}return this}});c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return l===void 0&&(l=1e-4),Math.abs(o-g)<l};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(11),l=e(15),h=e(1068),i=new o({Extends:l,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.ScrollFactor,g.Size,g.TextureCrop,g.Tint,g.Transform,g.Visible,h],initialize:function(n,d,a,u,f){l.call(this,n,"Image"),this._crop=this.resetCropObject(),this.setTexture(u,f),this.setPosition(d,a),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.hasOwnProperty(g)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(77),g=function(l,h){var i=o(l);for(var s in h)i.hasOwnProperty(s)||(i[s]=h[s]);return i};c.exports=g},function(c,R,e){var o={};c.exports=o;var g=e(64),l=e(83),h=e(165),i=e(84),s=e(271),n=e(32);(function(){o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(d){var a=d;a.bodyA&&!a.pointA&&(a.pointA={x:0,y:0}),a.bodyB&&!a.pointB&&(a.pointB={x:0,y:0});var u=a.bodyA?l.add(a.bodyA.position,a.pointA):a.pointA,f=a.bodyB?l.add(a.bodyB.position,a.pointB):a.pointB,p=l.magnitude(l.sub(u,f));a.length=typeof a.length!="undefined"?a.length:p,a.id=a.id||n.nextId(),a.label=a.label||"Constraint",a.type="constraint",a.stiffness=a.stiffness||(a.length>0?1:.7),a.damping=a.damping||0,a.angularStiffness=a.angularStiffness||0,a.angleA=a.bodyA?a.bodyA.angle:a.angleA,a.angleB=a.bodyB?a.bodyB.angle:a.angleB,a.plugin={};var v={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return a.length===0&&a.stiffness>.1?(v.type="pin",v.anchors=!1):a.stiffness<.9&&(v.type="spring"),a.render=n.extend(v,a.render),a},o.preSolveAll=function(d){for(var a=0;a<d.length;a+=1){var u=d[a],f=u.constraintImpulse;u.isStatic||f.x===0&&f.y===0&&f.angle===0||(u.position.x+=f.x,u.position.y+=f.y,u.angle+=f.angle)}},o.solveAll=function(d,a){for(var u=0;u<d.length;u+=1){var f=d[u],p=!f.bodyA||f.bodyA&&f.bodyA.isStatic,v=!f.bodyB||f.bodyB&&f.bodyB.isStatic;(p||v)&&o.solve(d[u],a)}for(u=0;u<d.length;u+=1)f=d[u],p=!f.bodyA||f.bodyA&&f.bodyA.isStatic,v=!f.bodyB||f.bodyB&&f.bodyB.isStatic,!p&&!v&&o.solve(d[u],a)},o.solve=function(d,a){var u=d.bodyA,f=d.bodyB,p=d.pointA,v=d.pointB;if(!(!u&&!f)){u&&!u.isStatic&&(l.rotate(p,u.angle-d.angleA,p),d.angleA=u.angle),f&&!f.isStatic&&(l.rotate(v,f.angle-d.angleB,v),d.angleB=f.angle);var m=p,E=v;if(u&&(m=l.add(u.position,p)),f&&(E=l.add(f.position,v)),!(!m||!E)){var x=l.sub(m,E),y=l.magnitude(x);y<o._minLength&&(y=o._minLength);var S=(y-d.length)/y,C=d.stiffness<1?d.stiffness*a:d.stiffness,I=l.mult(x,S*C),O=(u?u.inverseMass:0)+(f?f.inverseMass:0),M=(u?u.inverseInertia:0)+(f?f.inverseInertia:0),L=O+M,P,b,B,U,H;if(d.damping){var Y=l.create();B=l.div(x,y),H=l.sub(f&&l.sub(f.position,f.positionPrev)||Y,u&&l.sub(u.position,u.positionPrev)||Y),U=l.dot(B,H)}u&&!u.isStatic&&(b=u.inverseMass/O,u.constraintImpulse.x-=I.x*b,u.constraintImpulse.y-=I.y*b,u.position.x-=I.x*b,u.position.y-=I.y*b,d.damping&&(u.positionPrev.x-=d.damping*B.x*U*b,u.positionPrev.y-=d.damping*B.y*U*b),P=l.cross(p,I)/L*o._torqueDampen*u.inverseInertia*(1-d.angularStiffness),u.constraintImpulse.angle-=P,u.angle-=P),f&&!f.isStatic&&(b=f.inverseMass/O,f.constraintImpulse.x+=I.x*b,f.constraintImpulse.y+=I.y*b,f.position.x+=I.x*b,f.position.y+=I.y*b,d.damping&&(f.positionPrev.x+=d.damping*B.x*U*b,f.positionPrev.y+=d.damping*B.y*U*b),P=l.cross(v,I)/L*o._torqueDampen*f.inverseInertia*(1-d.angularStiffness),f.constraintImpulse.angle+=P,f.angle+=P)}}},o.postSolveAll=function(d){for(var a=0;a<d.length;a++){var u=d[a],f=u.constraintImpulse;if(!(u.isStatic||f.x===0&&f.y===0&&f.angle===0)){h.set(u,!1);for(var p=0;p<u.parts.length;p++){var v=u.parts[p];g.translate(v.vertices,f),p>0&&(v.position.x+=f.x,v.position.y+=f.y),f.angle!==0&&(g.rotate(v.vertices,f.angle,u.position),s.rotate(v.axes,f.angle),p>0&&l.rotateAbout(v.position,f.angle,u.position,v.position)),i.update(v.bounds,v.vertices,u.velocity)}f.angle*=o._warming,f.x*=o._warming,f.y*=o._warming}}},o.pointAWorld=function(d){return{x:(d.bodyA?d.bodyA.position.x:0)+d.pointA.x,y:(d.bodyA?d.bodyA.position.y:0)+d.pointA.y}},o.pointBWorld=function(d){return{x:(d.bodyB?d.bodyB.position.x:0)+d.pointB.x,y:(d.bodyB?d.bodyB.position.y:0)+d.pointB.y}}})()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(35),g=e(65),l=e(66),h=e(0),i=e(11),s=e(15),n=e(10),d=e(57),a=new h({Extends:s,Mixins:[i.Depth,i.GetBounds,i.Origin,i.Transform,i.ScrollFactor,i.Visible],initialize:function(f,p,v,m,E){m===void 0&&(m=1),E===void 0&&(E=m),s.call(this,f,"Zone"),this.setPosition(p,v),this.width=m,this.height=E,this.blendMode=o.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(u){this.scaleX=u/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(u){this.scaleY=u/this.height}},setSize:function(u,f,p){p===void 0&&(p=!0),this.width=u,this.height=f,this.updateDisplayOrigin();var v=this.input;return p&&v&&!v.customHitArea&&(v.hitArea.width=u,v.hitArea.height=f),this},setDisplaySize:function(u,f){return this.displayWidth=u,this.displayHeight=f,this},setCircleDropZone:function(u){return this.setDropZone(new g(0,0,u),l)},setRectangleDropZone:function(u,f){return this.setDropZone(new n(0,0,u,f),d)},setDropZone:function(u,f){return u===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(u,f,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(u,f,p){p.addToRenderList(f)},renderWebGL:function(u,f,p){p.addToRenderList(f)}});c.exports=a},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return 2*(o.width+o.height)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){for(var g=o.length-1;g>0;g--){var l=Math.floor(Math.random()*(g+1)),h=o[g];o[g]=o[l],o[l]=h}return o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ADD_ANIMATION:e(724),ANIMATION_COMPLETE:e(725),ANIMATION_COMPLETE_KEY:e(726),ANIMATION_REPEAT:e(727),ANIMATION_RESTART:e(728),ANIMATION_START:e(729),ANIMATION_STOP:e(730),ANIMATION_UPDATE:e(731),PAUSE_ALL:e(732),REMOVE_ANIMATION:e(733),RESUME_ALL:e(734)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(11),l=e(36),h=e(9),i=e(37),s=e(10),n=e(25),d=e(187),a=e(3),u=new o({Extends:h,Mixins:[g.Alpha,g.Visible],initialize:function(p,v,m,E){p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),E===void 0&&(E=0),h.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new s,this.dirty=!0,this._x=p,this._y=v,this._width=m,this._height=E,this._bounds=new s,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new n,this.transparent=!0,this.backgroundColor=d("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new a(m/2,E/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(f){this.renderList.push(f)},setOrigin:function(f,p){return f===void 0&&(f=.5),p===void 0&&(p=f),this.originX=f,this.originY=p,this},getScroll:function(f,p,v){v===void 0&&(v=new a);var m=this.width*.5,E=this.height*.5;return v.x=f-m,v.y=p-E,this.useBounds&&(v.x=this.clampX(v.x),v.y=this.clampY(v.y)),v},centerOnX:function(f){var p=this.width*.5;return this.midPoint.x=f,this.scrollX=f-p,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(f){var p=this.height*.5;return this.midPoint.y=f,this.scrollY=f-p,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(f,p){return this.centerOnX(f),this.centerOnY(p),this},centerToBounds:function(){if(this.useBounds){var f=this._bounds,p=this.width*.5,v=this.height*.5;this.midPoint.set(f.centerX,f.centerY),this.scrollX=f.centerX-p,this.scrollY=f.centerY-v}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(f){if(this.disableCull)return f;var p=this.matrix.matrix,v=p[0],m=p[1],E=p[2],x=p[3],y=v*x-m*E;if(!y)return f;var S=p[4],C=p[5],I=this.scrollX,O=this.scrollY,M=this.width,L=this.height,P=this.y,b=P+L,B=this.x,U=B+M,H=this.culledObjects,Y=f.length;y=1/y,H.length=0;for(var j=0;j<Y;++j){var _=f[j];if(!_.hasOwnProperty("width")||_.parentContainer){H.push(_);continue}var w=_.width,D=_.height,N=_.x-I*_.scrollFactorX-w*_.originX,G=_.y-O*_.scrollFactorY-D*_.originY,k=N*v+G*E+S,V=N*m+G*x+C,X=(N+w)*v+(G+D)*E+S,K=(N+w)*m+(G+D)*x+C;X>B&&k<U&&K>P&&V<b&&H.push(_)}return H},getWorldPoint:function(f,p,v){v===void 0&&(v=new a);var m=this.matrix.matrix,E=m[0],x=m[1],y=m[2],S=m[3],C=m[4],I=m[5],O=E*S-x*y;if(!O)return v.x=f,v.y=p,v;O=1/O;var M=S*O,L=-x*O,P=-y*O,b=E*O,B=(y*I-S*C)*O,U=(x*C-E*I)*O,H=Math.cos(this.rotation),Y=Math.sin(this.rotation),j=this.zoomX,_=this.zoomY,w=this.scrollX,D=this.scrollY,N=f+(w*H-D*Y)*j,G=p+(w*Y+D*H)*_;return v.x=N*M+G*P+B,v.y=N*L+G*b+U,v},ignore:function(f){var p=this.id;Array.isArray(f)||(f=[f]);for(var v=0;v<f.length;v++){var m=f[v];Array.isArray(m)?this.ignore(m):m.isParent?this.ignore(m.getChildren()):m.cameraFilter|=p}return this},preRender:function(){this.renderList.length=0;var f=this.width,p=this.height,v=f*.5,m=p*.5,E=this.zoomX,x=this.zoomY,y=this.matrix,S=f*this.originX,C=p*this.originY,I=this.scrollX,O=this.scrollY;this.useBounds&&(I=this.clampX(I),O=this.clampY(O)),this.roundPixels&&(S=Math.round(S),C=Math.round(C)),this.scrollX=I,this.scrollY=O;var M=I+v,L=O+m;this.midPoint.set(M,L);var P=f/E,b=p/x;this.worldView.setTo(M-P/2,L-b/2,P,b),y.applyITRS(this.x+S,this.y+C,this.rotation,E,x),y.translate(-S,-C)},clampX:function(f){var p=this._bounds,v=this.displayWidth,m=p.x+(v-this.width)/2,E=Math.max(m,m+p.width-v);return f<m?f=m:f>E&&(f=E),f},clampY:function(f){var p=this._bounds,v=this.displayHeight,m=p.y+(v-this.height)/2,E=Math.max(m,m+p.height-v);return f<m?f=m:f>E&&(f=E),f},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(f){return f===void 0&&(f=0),this.rotation=l(f),this},setBackgroundColor:function(f){return f===void 0&&(f="rgba(0,0,0,0)"),this.backgroundColor=d(f),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(f,p,v,m,E){return E===void 0&&(E=!1),this._bounds.setTo(f,p,v,m),this.dirty=!0,this.useBounds=!0,E?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(f){f===void 0&&(f=new s);var p=this._bounds;return f.setTo(p.x,p.y,p.width,p.height),f},setName:function(f){return f===void 0&&(f=""),this.name=f,this},setPosition:function(f,p){return p===void 0&&(p=f),this.x=f,this.y=p,this},setRotation:function(f){return f===void 0&&(f=0),this.rotation=f,this},setRoundPixels:function(f){return this.roundPixels=f,this},setScene:function(f){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=f;var p=f.sys;return this.sceneManager=p.game.scene,this.scaleManager=p.scale,this.cameraManager=p.cameras,this.updateSystem(),this},setScroll:function(f,p){return p===void 0&&(p=f),this.scrollX=f,this.scrollY=p,this},setSize:function(f,p){return p===void 0&&(p=f),this.width=f,this.height=p,this},setViewport:function(f,p,v,m){return this.x=f,this.y=p,this.width=v,this.height=m,this},setZoom:function(f,p){return f===void 0&&(f=1),p===void 0&&(p=f),f===0&&(f=.001),p===0&&(p=.001),this.zoomX=f,this.zoomY=p,this},setMask:function(f,p){return p===void 0&&(p=!0),this.mask=f,this._maskCamera=p?this.cameraManager.default:this,this},clearMask:function(f){return f===void 0&&(f=!1),f&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var f={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(f.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),f},update:function(){},updateSystem:function(){if(!!this.scaleManager){var f=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,p=this.sceneManager;f&&!this._customViewport?p.customViewports++:!f&&this._customViewport&&p.customViewports--,this.dirty=!0,this._customViewport=f}},destroy:function(){this.emit(i.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(f){this._x=f,this.updateSystem()}},y:{get:function(){return this._y},set:function(f){this._y=f,this.updateSystem()}},width:{get:function(){return this._width},set:function(f){this._width=f,this.updateSystem()}},height:{get:function(){return this._height},set:function(f){this._height=f,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(f){this._scrollX=f,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(f){this._scrollY=f,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(f){this._zoomX=f,this._zoomY=f,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(f){this._zoomX=f,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(f){this._zoomY=f,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(f){this._rotation=f,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});c.exports=u},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(334),g=e(335),l=e(336),h=e(337),i=e(338),s=e(339),n=e(340),d=e(341),a=e(342),u=e(343),f=e(344),p=e(345);c.exports={Power0:n,Power1:d.Out,Power2:h.Out,Power3:a.Out,Power4:u.Out,Linear:n,Quad:d.Out,Cubic:h.Out,Quart:a.Out,Quint:u.Out,Sine:f.Out,Expo:s.Out,Circ:l.Out,Elastic:i.Out,Back:o.Out,Bounce:g.Out,Stepped:p,"Quad.easeIn":d.In,"Cubic.easeIn":h.In,"Quart.easeIn":a.In,"Quint.easeIn":u.In,"Sine.easeIn":f.In,"Expo.easeIn":s.In,"Circ.easeIn":l.In,"Elastic.easeIn":i.In,"Back.easeIn":o.In,"Bounce.easeIn":g.In,"Quad.easeOut":d.Out,"Cubic.easeOut":h.Out,"Quart.easeOut":a.Out,"Quint.easeOut":u.Out,"Sine.easeOut":f.Out,"Expo.easeOut":s.Out,"Circ.easeOut":l.Out,"Elastic.easeOut":i.Out,"Back.easeOut":o.Out,"Bounce.easeOut":g.Out,"Quad.easeInOut":d.InOut,"Cubic.easeInOut":h.InOut,"Quart.easeInOut":a.InOut,"Quint.easeInOut":u.InOut,"Sine.easeInOut":f.InOut,"Expo.easeInOut":s.InOut,"Circ.easeInOut":l.InOut,"Elastic.easeInOut":i.InOut,"Back.easeInOut":o.InOut,"Bounce.easeInOut":g.InOut}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return(g-o)*l+o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(105),g={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function l(){var h=navigator.userAgent;return/Edge\/\d+/.test(h)?g.edge=!0:/Chrome\/(\d+)/.test(h)&&!o.windowsPhone?(g.chrome=!0,g.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(h)?(g.firefox=!0,g.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(h)&&o.iOS?g.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(h)?(g.ie=!0,g.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(h)?g.opera=!0:/Safari/.test(h)&&!o.windowsPhone?g.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(h)&&(g.ie=!0,g.trident=!0,g.tridentVersion=parseInt(RegExp.$1,10),g.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(h)&&(g.silk=!0),g}c.exports=l()},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return Math.random()*(g-o)+o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o>0&&(o&o-1)===0&&g>0&&(g&g-1)===0};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){return l===void 0&&(l=0),g===0?o:(o-=l,o=g*Math.ceil(o/g),h?(l+o)/g:l+o)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h,i,s,n){this.x=0,this.y=0,this.z=0,this.w=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0,this.w=h.w||0):(this.x=h||0,this.y=i||0,this.z=s||0,this.w=n||0)},clone:function(){return new g(this.x,this.y,this.z,this.w)},copy:function(l){return this.x=l.x,this.y=l.y,this.z=l.z||0,this.w=l.w||0,this},equals:function(l){return this.x===l.x&&this.y===l.y&&this.z===l.z&&this.w===l.w},set:function(l,h,i,s){return typeof l=="object"?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0,this.w=l.w||0):(this.x=l||0,this.y=h||0,this.z=i||0,this.w=s||0),this},add:function(l){return this.x+=l.x,this.y+=l.y,this.z+=l.z||0,this.w+=l.w||0,this},subtract:function(l){return this.x-=l.x,this.y-=l.y,this.z-=l.z||0,this.w-=l.w||0,this},scale:function(l){return this.x*=l,this.y*=l,this.z*=l,this.w*=l,this},length:function(){var l=this.x,h=this.y,i=this.z,s=this.w;return Math.sqrt(l*l+h*h+i*i+s*s)},lengthSq:function(){var l=this.x,h=this.y,i=this.z,s=this.w;return l*l+h*h+i*i+s*s},normalize:function(){var l=this.x,h=this.y,i=this.z,s=this.w,n=l*l+h*h+i*i+s*s;return n>0&&(n=1/Math.sqrt(n),this.x=l*n,this.y=h*n,this.z=i*n,this.w=s*n),this},dot:function(l){return this.x*l.x+this.y*l.y+this.z*l.z+this.w*l.w},lerp:function(l,h){h===void 0&&(h=0);var i=this.x,s=this.y,n=this.z,d=this.w;return this.x=i+h*(l.x-i),this.y=s+h*(l.y-s),this.z=n+h*(l.z-n),this.w=d+h*(l.w-d),this},multiply:function(l){return this.x*=l.x,this.y*=l.y,this.z*=l.z||1,this.w*=l.w||1,this},divide:function(l){return this.x/=l.x,this.y/=l.y,this.z/=l.z||1,this.w/=l.w||1,this},distance:function(l){var h=l.x-this.x,i=l.y-this.y,s=l.z-this.z||0,n=l.w-this.w||0;return Math.sqrt(h*h+i*i+s*s+n*n)},distanceSq:function(l){var h=l.x-this.x,i=l.y-this.y,s=l.z-this.z||0,n=l.w-this.w||0;return h*h+i*i+s*s+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(l){var h=this.x,i=this.y,s=this.z,n=this.w,d=l.val;return this.x=d[0]*h+d[4]*i+d[8]*s+d[12]*n,this.y=d[1]*h+d[5]*i+d[9]*s+d[13]*n,this.z=d[2]*h+d[6]*i+d[10]*s+d[14]*n,this.w=d[3]*h+d[7]*i+d[11]*s+d[15]*n,this},transformQuat:function(l){var h=this.x,i=this.y,s=this.z,n=l.x,d=l.y,a=l.z,u=l.w,f=u*h+d*s-a*i,p=u*i+a*h-n*s,v=u*s+n*i-d*h,m=-n*h-d*i-a*s;return this.x=f*u+m*-n+p*-a-v*-d,this.y=p*u+m*-d+v*-n-f*-a,this.z=v*u+m*-a+f*-d-p*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});g.prototype.sub=g.prototype.subtract,g.prototype.mul=g.prototype.multiply,g.prototype.div=g.prototype.divide,g.prototype.dist=g.prototype.distance,g.prototype.distSq=g.prototype.distanceSq,g.prototype.len=g.prototype.length,g.prototype.lenSq=g.prototype.lengthSq,c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(91),l=new o({initialize:function(i,s,n,d,a,u,f){d===void 0&&(d=1),a===void 0&&(a=0),u===void 0&&(u=!0),f===void 0&&(f=!1),this.renderer=i,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=d,this.minFilter=a,this.autoClear=u,this.autoResize=!1,this.resize(s,n),f&&this.setAutoResize(!0)},setAutoResize:function(h){return h&&!this.autoResize?(this.renderer.on(g.RESIZE,this.resize,this),this.autoResize=!0):!h&&this.autoResize&&(this.renderer.off(g.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(h,i){var s=h*this.scale,n=i*this.scale;if(s!==this.width||n!==this.height){var d=this.renderer;d.deleteFramebuffer(this.framebuffer),d.deleteTexture(this.texture),h*=this.scale,i*=this.scale,h=Math.round(h),i=Math.round(i),h<=0&&(h=1),i<=0&&(i=1),this.texture=d.createTextureFromSource(null,h,i,this.minFilter),this.framebuffer=d.createFramebuffer(h,i,this.texture,!1),this.width=h,this.height=i}return this},bind:function(h,i,s){if(h===void 0&&(h=!1),h&&this.renderer.flush(),i&&s&&this.resize(i,s),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),h&&this.adjustViewport(),this.autoClear){var n=this.renderer.gl;n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)}},adjustViewport:function(){var h=this.renderer.gl;h.viewport(0,0,this.width,this.height),h.disable(h.SCISSOR_TEST)},clear:function(){var h=this.renderer,i=h.gl;h.pushFramebuffer(this.framebuffer),i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),h.popFramebuffer(),h.resetScissor()},unbind:function(h){h===void 0&&(h=!1);var i=this.renderer;return h&&i.flush(),i.popFramebuffer()},destroy:function(){var h=this.renderer;h.deleteFramebuffer(this.framebuffer),h.deleteTexture(this.texture),h.off(g.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l;if(g)typeof g=="string"?l=document.getElementById(g):typeof g=="object"&&g.nodeType===1&&(l=g);else if(o.parentElement||g===null)return o;return l||(l=document.body),l.appendChild(o),o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(77),l=e(9),h=e(70),i=e(22),s=e(1),n=e(207),d=e(428),a=new o({Extends:l,initialize:function(f){l.call(this),this.game=f,this.jsonCache=f.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,f.events.on(i.BLUR,this.onGameBlur,this),f.events.on(i.FOCUS,this.onGameFocus,this),f.events.on(i.PRE_STEP,this.update,this),f.events.once(i.DESTROY,this.destroy,this)},add:s,addAudioSprite:function(u,f){f===void 0&&(f={});var p=this.add(u,f);p.spritemap=this.jsonCache.get(u).spritemap;for(var v in p.spritemap)if(!!p.spritemap.hasOwnProperty(v)){var m=g(f),E=p.spritemap[v];m.loop=E.hasOwnProperty("loop")?E.loop:!1,p.addMarker({name:v,start:E.start,duration:E.end-E.start,config:m})}return p},get:function(u){return d(this.sounds,"key",u)},getAll:function(u){return n(this.sounds,"key",u)},play:function(u,f){var p=this.add(u);return p.once(h.COMPLETE,p.destroy,p),f?f.name?(p.addMarker(f),p.play(f.name)):p.play(f):p.play()},playAudioSprite:function(u,f,p){var v=this.addAudioSprite(u);return v.once(h.COMPLETE,v.destroy,v),v.play(f,p)},remove:function(u){var f=this.sounds.indexOf(u);return f!==-1?(u.destroy(),this.sounds.splice(f,1),!0):!1},removeAll:function(){this.sounds.forEach(function(u){u.destroy()}),this.sounds.length=0},removeByKey:function(u){for(var f=0,p=this.sounds.length-1;p>=0;p--){var v=this.sounds[p];v.key===u&&(v.destroy(),this.sounds.splice(p,1),f++)}return f},pauseAll:function(){this.forEachActiveSound(function(u){u.pause()}),this.emit(h.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(u){u.resume()}),this.emit(h.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(u){u.stop()}),this.emit(h.STOP_ALL,this)},stopByKey:function(u){var f=0;return this.getAll(u).forEach(function(p){p.stop()&&f++}),f},unlock:s,onBlur:s,onFocus:s,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(u,f){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(h.UNLOCKED,this));for(var p=this.sounds.length-1;p>=0;p--)this.sounds[p].pendingRemove&&this.sounds.splice(p,1);this.sounds.forEach(function(v){v.update(u,f)})},destroy:function(){this.game.events.off(i.BLUR,this.onGameBlur,this),this.game.events.off(i.FOCUS,this.onGameFocus,this),this.game.events.off(i.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(u,f){var p=this;this.sounds.forEach(function(v,m){v&&!v.pendingRemove&&u.call(f||p,v,m,p.sounds)})},setRate:function(u){return this.rate=u,this},rate:{get:function(){return this._rate},set:function(u){this._rate=u,this.forEachActiveSound(function(f){f.calculateRate()}),this.emit(h.GLOBAL_RATE,this,u)}},setDetune:function(u){return this.detune=u,this},detune:{get:function(){return this._detune},set:function(u){this._detune=u,this.forEachActiveSound(function(f){f.calculateRate()}),this.emit(h.GLOBAL_DETUNE,this,u)}}});c.exports=a},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(9),l=e(70),h=e(17),i=e(1),s=new o({Extends:g,initialize:function(d,a,u){g.call(this),this.manager=d,this.key=a,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=h(this.config,u),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(n){return!n||!n.name||typeof n.name!="string"?!1:this.markers[n.name]?(console.error("addMarker "+n.name+" already exists in Sound"),!1):(n=h(!0,{name:"",start:0,duration:this.totalDuration-(n.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},n),this.markers[n.name]=n,!0)},updateMarker:function(n){return!n||!n.name||typeof n.name!="string"?!1:this.markers[n.name]?(this.markers[n.name]=h(!0,this.markers[n.name],n),!0):(console.warn("Audio Marker: "+n.name+" missing in Sound: "+this.key),!1)},removeMarker:function(n){var d=this.markers[n];return d?(this.markers[n]=null,d):null},play:function(n,d){if(n===void 0&&(n=""),typeof n=="object"&&(d=n,n=""),typeof n!="string")return!1;if(!n)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[n])return console.warn("Marker: "+n+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[n],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=h(this.currentConfig,d),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:i,calculateRate:function(){var n=1.0005777895065548,d=this.currentConfig.detune+this.manager.detune,a=Math.pow(n,d);this.totalRate=this.currentConfig.rate*this.manager.rate*a},destroy:function(){this.pendingRemove||(this.emit(l.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(209),g=e(435),l=function(h,i){if(i===void 0&&(i=90),!o(h))return null;if(typeof i!="string"&&(i=(i%360+360)%360),i===90||i===-270||i==="rotateLeft")h=g(h),h.reverse();else if(i===-90||i===270||i==="rotateRight")h.reverse(),h=g(h);else if(Math.abs(i)===180||i==="rotate180"){for(var s=0;s<h.length;s++)h[s].reverse();h.reverse()}return h};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(18),l=e(11),h=e(15),i=e(1043),s=e(1044),n=e(212),d=e(10),a=e(1045),u=new o({Extends:h,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Texture,l.Tint,l.Transform,l.Visible,a],initialize:function(p,v,m,E,x,y,S){x===void 0&&(x=""),S===void 0&&(S=0),h.call(this,p,"BitmapText"),this.font=E;var C=this.scene.sys.cache.bitmapFont.get(E);C||console.warn("Invalid BitmapText key: "+E),this.fontData=C.data,this._text="",this._fontSize=y||this.fontData.size,this._letterSpacing=0,this._align=S,this._bounds=i(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=C.fromAtlas,this.setTexture(C.texture,C.frame),this.setPosition(v,m),this.setOrigin(0,0),this.initPipeline(),this.setText(x)},setLeftAlign:function(){return this._align=u.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=u.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=u.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(f){return this._fontSize=f,this._dirty=!0,this},setLetterSpacing:function(f){return f===void 0&&(f=0),this._letterSpacing=f,this._dirty=!0,this},setText:function(f){return!f&&f!==0&&(f=""),Array.isArray(f)&&(f=f.join(`
`)),f!==this.text&&(this._text=f.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(f,p,v,m){return f===void 0&&(f=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=.5),this.dropShadowX=f,this.dropShadowY=p,this.dropShadowColor=v,this.dropShadowAlpha=m,this},setCharacterTint:function(f,p,v,m,E,x,y){f===void 0&&(f=0),p===void 0&&(p=1),v===void 0&&(v=!1),m===void 0&&(m=-1),E===void 0&&(E=m,x=m,y=m);var S=this.text.length;p===-1&&(p=S),f<0&&(f=S+f),f=g(f,0,S-1);for(var C=g(f+p,f,S),I=this.charColors,O=f;O<C;O++){var M=I[O];if(m===-1)I[O]=null;else{var L=v?1:0;M?(M.tintEffect=L,M.tintTL=m,M.tintTR=E,M.tintBL=x,M.tintBR=y):I[O]={tintEffect:L,tintTL:m,tintTR:E,tintBL:x,tintBR:y}}}return this},setWordTint:function(f,p,v,m,E,x,y){p===void 0&&(p=1);for(var S=this.getTextBounds(),C=S.words,I=typeof f=="number",O=0,M=0;M<C.length;M++){var L=C[M];if((I&&M===f||!I&&L.word===f)&&(this.setCharacterTint(L.i,L.word.length,v,m,E,x,y),O++,O===p))return this}return this},getTextBounds:function(f){var p=this._bounds;return(this._dirty||f||this.scaleX!==p.scaleX||this.scaleY!==p.scaleY)&&(i(this,f,!0,p),this._dirty=!1),p},getCharacterAt:function(f,p,v){for(var m=this.getLocalPoint(f,p,null,v),E=this.getTextBounds(),x=E.characters,y=new d,S=0;S<x.length;S++){var C=x[S];if(y.setTo(C.x,C.t,C.r-C.x,C.b),y.contains(m.x,m.y))return C}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(f,p,v){if(p===void 0&&(p=this._fontSize),v===void 0&&(v=this._align),f!==this.font){var m=this.scene.sys.cache.bitmapFont.get(f);m&&(this.font=f,this.fontData=m.data,this._fontSize=p,this._align=v,this.fromAtlas=m.fromAtlas===!0,this.setTexture(m.texture,m.frame),i(this,!1,!0,this._bounds))}return this},setMaxWidth:function(f,p){return this._maxWidth=f,this._dirty=!0,p!==void 0&&(this.wordWrapCharCode=p),this},align:{set:function(f){this._align=f,this._dirty=!0},get:function(){return this._align}},text:{set:function(f){this.setText(f)},get:function(){return this._text}},fontSize:{set:function(f){this._fontSize=f,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(f){this._letterSpacing=f,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(f){this._maxWidth=f,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var f=l.ToJSON(this),p={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return f.data=p,f},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});u.ALIGN_LEFT=0,u.ALIGN_CENTER=1,u.ALIGN_RIGHT=2,u.ParseFromAtlas=s,u.ParseXMLBitmapFont=n,c.exports=u},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h){if(this.entries=[],Array.isArray(h))for(var i=0;i<h.length;i++)this.set(h[i])},set:function(l){return this.entries.indexOf(l)===-1&&this.entries.push(l),this},get:function(l,h){for(var i=0;i<this.entries.length;i++){var s=this.entries[i];if(s[l]===h)return s}},getArray:function(){return this.entries.slice(0)},delete:function(l){var h=this.entries.indexOf(l);return h>-1&&this.entries.splice(h,1),this},dump:function(){console.group("Set");for(var l=0;l<this.entries.length;l++){var h=this.entries[l];console.log(h)}console.groupEnd()},each:function(l,h){var i,s=this.entries.slice(),n=s.length;if(h)for(i=0;i<n&&l.call(h,s[i],i)!==!1;i++);else for(i=0;i<n&&l(s[i],i)!==!1;i++);return this},iterate:function(l,h){var i,s=this.entries.length;if(h)for(i=0;i<s&&l.call(h,this.entries[i],i)!==!1;i++);else for(i=0;i<s&&l(this.entries[i],i)!==!1;i++);return this},iterateLocal:function(l){var h,i=[];for(h=1;h<arguments.length;h++)i.push(arguments[h]);var s=this.entries.length;for(h=0;h<s;h++){var n=this.entries[h];n[l].apply(n,i)}return this},clear:function(){return this.entries.length=0,this},contains:function(l){return this.entries.indexOf(l)>-1},union:function(l){var h=new g;return l.entries.forEach(function(i){h.set(i)}),this.entries.forEach(function(i){h.set(i)}),h},intersect:function(l){var h=new g;return this.entries.forEach(function(i){l.contains(i)&&h.set(i)}),h},difference:function(l){var h=new g;return this.entries.forEach(function(i){l.contains(i)||h.set(i)}),h},size:{get:function(){return this.entries.length},set:function(l){return l<this.entries.length?this.entries.length=l:this.entries.length}}});c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(11),l=e(15),h=e(189),i=e(92),s=e(1182),n=new o({Extends:l,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Pipeline,g.ScrollFactor,g.Transform,g.Visible,s],initialize:function(a,u,f,p,v,m,E){p===void 0&&(p=16777215),v===void 0&&(v=128),m===void 0&&(m=1),E===void 0&&(E=.1),l.call(this,a,"PointLight"),this.initPipeline(i.POINTLIGHT_PIPELINE),this.setPosition(u,f),this.color=h(p),this.intensity=m,this.attenuation=E,this.width=v*2,this.height=v*2,this._radius=v},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this.width=d*2,this.height=d*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});c.exports=n},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=g.width/2,h=g.height/2,i=Math.abs(o.x-g.x-l),s=Math.abs(o.y-g.y-h),n=l+o.radius,d=h+o.radius;if(i>n||s>d)return!1;if(i<=l||s<=h)return!0;var a=i-l,u=s-h,f=a*a,p=u*u,v=o.radius*o.radius;return f+p<=v};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.width<=0||o.height<=0||g.width<=0||g.height<=0?!1:!(o.right<g.x||o.bottom<g.y||o.x>g.right||o.y>g.bottom)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(6),g={},l={};l.register=function(h,i,s,n,d){g[h]={plugin:i,mapping:s,settingsKey:n,configKey:d}},l.getPlugin=function(h){return g[h]},l.install=function(h){var i=h.scene.sys,s=i.settings.input,n=i.game.config;for(var d in g){var a=g[d].plugin,u=g[d].mapping,f=g[d].settingsKey,p=g[d].configKey;o(s,f,n[p])&&(h[u]=new a(h))}},l.remove=function(h){g.hasOwnProperty(h)&&delete g[h]},c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ANY_KEY_DOWN:e(1323),ANY_KEY_UP:e(1324),COMBO_MATCH:e(1325),DOWN:e(1326),KEY_DOWN:e(1327),KEY_UP:e(1328),UP:e(1329)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.url?o.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?o.url:g+o.url:!1};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i,s){return o===void 0&&(o=""),g===void 0&&(g=!0),l===void 0&&(l=""),h===void 0&&(h=""),i===void 0&&(i=0),s===void 0&&(s=!1),{responseType:o,async:g,user:l,password:h,timeout:i,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:s}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(243),l=e(73),h=new o({Extends:l,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(s,n,d,a,u){l.call(this,s,n,d,a,u),this.body=null}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(119),g=function(l,h,i,s){if(i===void 0&&(i=!1),o(l,h,s)){var n=s.data[h][l]||null;return n?n.index===-1?i?n:null:n:null}else return null};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=o.data,s=o.width,n=o.height,d=o.tilemapLayer,a=Math.max(0,g.left),u=Math.min(s,g.right),f=Math.max(0,g.top),p=Math.min(n,g.bottom),v,m,E;if(l===0)for(m=f;m<p;m++)for(v=a;i[m]&&v<u;v++)E=i[m][v],!(!E||E.index===-1||!E.visible||E.alpha===0)&&h.push(E);else if(l===1)for(m=f;m<p;m++)for(v=u;i[m]&&v>=a;v--)E=i[m][v],!(!E||E.index===-1||!E.visible||E.alpha===0)&&h.push(E);else if(l===2)for(m=p;m>=f;m--)for(v=a;i[m]&&v<u;v++)E=i[m][v],!(!E||E.index===-1||!E.visible||E.alpha===0)&&h.push(E);else if(l===3)for(m=p;m>=f;m--)for(v=u;i[m]&&v>=a;v--)E=i[m][v],!(!E||E.index===-1||!E.visible||E.alpha===0)&&h.push(E);return d.tilesDrawn=h.length,d.tilesTotal=s*n,h};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=l.collideIndexes.indexOf(o);g&&h===-1?l.collideIndexes.push(o):!g&&h!==-1&&l.collideIndexes.splice(h,1)};c.exports=e},function(c,R,e){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(2),g=function(l,h,i){if(!h)return{i:0,layers:l.layers,name:"",opacity:1,visible:!0,x:0,y:0};var s=h.x+o(h,"startx",0)*l.tilewidth+o(h,"offsetx",0),n=h.y+o(h,"starty",0)*l.tileheight+o(h,"offsety",0);return{i:0,layers:h.layers,name:i.name+h.name+"/",opacity:i.opacity*h.opacity,visible:i.visible&&h.visible,x:i.x+s,y:i.y+n}};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h;if(o.hasOwnProperty(g)){var i=typeof o[g];i==="function"?h=function(s,n,d,a,u,f){return o[g](s,n,d,a,u,f)}:h=function(){return o[g]}}else typeof l=="function"?h=l:h=function(){return l};return h};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(265),g=e(13),l=e(99),h=e(80),i=e(162),s=e(583),n=e(263),d=e(6),a=e(264),u=e(266),f=e(268),p=function(v,m,E){E===void 0&&(E=o);for(var x=E.targets?E.targets:n(m),y=s(m),S=i(m,"delay",E.delay),C=i(m,"duration",E.duration),I=d(m,"easeParams",E.easeParams),O=h(d(m,"ease",E.ease),I),M=i(m,"hold",E.hold),L=i(m,"repeat",E.repeat),P=i(m,"repeatDelay",E.repeatDelay),b=l(m,"yoyo",E.yoyo),B=l(m,"flipX",E.flipX),U=l(m,"flipY",E.flipY),H=[],Y=0;Y<y.length;Y++)for(var j=y[Y].key,_=y[Y].value,w=0;w<x.length;w++){var D=a(j,_),N=f(x[w],w,j,D.getEnd,D.getStart,D.getActive,h(d(_,"ease",O),d(_,"easeParams",I)),i(_,"delay",S),i(_,"duration",C),l(_,"yoyo",b),i(_,"hold",M),i(_,"repeat",L),i(_,"repeatDelay",P),l(_,"flipX",B),l(_,"flipY",U));H.push(N)}var G=new u(v,H,x);G.offset=g(m,"offset",null),G.completeDelay=g(m,"completeDelay",0),G.loop=Math.round(g(m,"loop",0)),G.loopDelay=Math.round(g(m,"loopDelay",0)),G.paused=l(m,"paused",!1),G.useFrames=l(m,"useFrames",!1);for(var k=d(m,"callbackScope",G),V=[G,null],X=u.TYPES,K=0;K<X.length;K++){var tt=X[K],st=d(m,tt,!1);if(st){var rt=d(m,tt+"Scope",k),ht=d(m,tt+"Params",[]);G.setCallback(tt,st,V.concat(ht),rt)}}return G};c.exports=p},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(102),l=e(2),h=e(132),i=e(185),s=new o({initialize:function(d){this.parent=d,this.animationManager=d.scene.sys.anims,this.animationManager.on(h.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(n){var d=this.parent;if(n===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,d;Array.isArray(n)||(n=[n]);for(var a=0;a<n.length;a++){var u=n[a];this.nextAnim===null?this.nextAnim=u:this.nextAnimsQueue.push(u)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(n){this.isPlaying&&this.stop();var d=this.animationManager,a=typeof n=="string"?n:l(n,"key",null),u=this.exists(a)?this.get(a):d.get(a);if(!u)console.warn("Missing animation: "+a);else{this.currentAnim=u;var f=u.getTotalFrames(),p=l(n,"frameRate",u.frameRate),v=l(n,"duration",u.duration);u.calculateDuration(this,f,v,p),this.delay=l(n,"delay",u.delay),this.repeat=l(n,"repeat",u.repeat),this.repeatDelay=l(n,"repeatDelay",u.repeatDelay),this.yoyo=l(n,"yoyo",u.yoyo),this.showOnStart=l(n,"showOnStart",u.showOnStart),this.hideOnComplete=l(n,"hideOnComplete",u.hideOnComplete),this.skipMissedFrames=l(n,"skipMissedFrames",u.skipMissedFrames),this.timeScale=l(n,"timeScale",this.timeScale);var m=l(n,"startFrame",0);m>u.getTotalFrames()&&(m=0);var E=u.frames[m];m===0&&!this.forward&&(E=u.getLastFrame()),this.currentFrame=E}return this.parent},pause:function(n){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),n!==void 0&&this.setCurrentFrame(n),this.parent},resume:function(n){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),n!==void 0&&this.setCurrentFrame(n),this.parent},playAfterDelay:function(n,d){if(!this.isPlaying)this.delayCounter=d,this.play(n,!0);else{var a=this.nextAnim,u=this.nextAnimsQueue;a&&u.unshift(a),this.nextAnim=n,this._pendingStop=1,this._pendingStopValue=d}return this.parent},playAfterRepeat:function(n,d){if(d===void 0&&(d=1),!this.isPlaying)this.play(n);else{var a=this.nextAnim,u=this.nextAnimsQueue;a&&u.unshift(a),this.repeatCounter!==-1&&d>this.repeatCounter&&(d=this.repeatCounter),this.nextAnim=n,this._pendingStop=2,this._pendingStopValue=d}return this.parent},play:function(n,d){d===void 0&&(d=!1);var a=this.currentAnim,u=this.parent,f=typeof n=="string"?n:n.key;if(d&&this.isPlaying&&a.key===f)return u;if(a&&this.isPlaying){var p=this.animationManager.getMix(a.key,n);if(p>0)return this.playAfterDelay(n,p)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(n)},playReverse:function(n,d){d===void 0&&(d=!1);var a=typeof n=="string"?n:n.key;return d&&this.isPlaying&&this.currentAnim.key===a?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(n))},startAnimation:function(n){this.load(n);var d=this.currentAnim,a=this.parent;return d&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,d.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),a},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(h.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(h.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(h.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(h.ANIMATION_COMPLETE,h.ANIMATION_COMPLETE_KEY)},emitEvents:function(n,d){var a=this.currentAnim,u=this.currentFrame,f=this.parent,p=u.textureFrame;f.emit(n,a,u,f,p),d&&f.emit(d+a.key,a,u,f,p)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var n=this.currentFrame;if(!n)return 0;var d=n.progress;return this.inReverse&&(d*=-1),d},setProgress:function(n){return this.forward||(n=1-n),this.setCurrentFrame(this.currentAnim.getFrameByProgress(n)),this.parent},setRepeat:function(n){return this.repeatCounter=n===-1?Number.MAX_VALUE:n,this.parent},globalRemove:function(n,d){d===void 0&&(d=this.currentAnim),this.isPlaying&&d.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(n,d){n===void 0&&(n=!1),d===void 0&&(d=!1);var a=this.currentAnim,u=this.parent;return a?(d&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),a.getFirstTick(this),this.emitEvents(h.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!n,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(a.frames[0]),this.parent):u},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var n=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(n)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var n=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(n)}return this.parent},stopAfterDelay:function(n){return this._pendingStop=1,this._pendingStopValue=n,this.parent},stopAfterRepeat:function(n){return n===void 0&&(n=1),this.repeatCounter!==-1&&n>this.repeatCounter&&(n=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=n,this.parent},stopOnFrame:function(n){return this._pendingStop=3,this._pendingStopValue=n,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(n,d){var a=this.currentAnim;if(!(!this.isPlaying||!a||a.paused)){if(this.accumulator+=d*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=d,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?a.nextFrame(this):a.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var u=0;do this.forward?a.nextFrame(this):a.previousFrame(this),u++;while(this.isPlaying&&this.accumulator>this.nextTick&&u<60)}}},setCurrentFrame:function(n){var d=this.parent;return this.currentFrame=n,d.texture=n.frame.texture,d.frame=n.frame,d.isCropped&&d.frame.updateCropUVs(d._crop,d.flipX,d.flipY),n.setAlpha&&(d.alpha=n.alpha),d.setSizeToFrame(),d._originComponent&&(n.frame.customPivot?d.setOrigin(n.frame.pivotX,n.frame.pivotY):d.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(h.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===n&&this.stop()),d},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(n){return this.anims?this.anims.get(n):null},exists:function(n){return this.anims?this.anims.has(n):!1},create:function(n){var d=n.key,a=!1;return d&&(a=this.get(d),a||(a=new i(this,d,n),this.anims||(this.anims=new g),this.anims.set(d,a))),a},generateFrameNames:function(n,d){return this.animationManager.generateFrameNames(n,d)},generateFrameNumbers:function(n,d){return this.animationManager.generateFrameNumbers(n,d)},remove:function(n){var d=this.get(n);return d&&(this.currentAnim===d&&this.stop(),this.anims.delete(n)),d},destroy:function(){this.animationManager.off(h.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});c.exports=s},function(c,R,e){var o={};c.exports=o;var g=e(166);(function(){o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(l,h){for(var i=h*h*h,s=0;s<l.length;s++){var n=l[s],d=n.speed*n.speed+n.angularSpeed*n.angularSpeed;if(n.force.x!==0||n.force.y!==0){o.set(n,!1);continue}var a=Math.min(n.motion,d),u=Math.max(n.motion,d);n.motion=o._minBias*a+(1-o._minBias)*u,n.sleepThreshold>0&&n.motion<o._motionSleepThreshold*i?(n.sleepCounter+=1,n.sleepCounter>=n.sleepThreshold&&o.set(n,!0)):n.sleepCounter>0&&(n.sleepCounter-=1)}},o.afterCollisions=function(l,h){for(var i=h*h*h,s=0;s<l.length;s++){var n=l[s];if(!!n.isActive){var d=n.collision,a=d.bodyA.parent,u=d.bodyB.parent;if(!(a.isSleeping&&u.isSleeping||a.isStatic||u.isStatic)&&(a.isSleeping||u.isSleeping)){var f=a.isSleeping&&!a.isStatic?a:u,p=f===a?u:a;!f.isStatic&&p.motion>o._motionWakeThreshold*i&&o.set(f,!1)}}}},o.set=function(l,h){var i=l.isSleeping;h?(l.isSleeping=!0,l.sleepCounter=l.sleepThreshold,l.positionImpulse.x=0,l.positionImpulse.y=0,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.anglePrev=l.angle,l.speed=0,l.angularSpeed=0,l.motion=0,i||g.trigger(l,"sleepStart")):(l.isSleeping=!1,l.sleepCounter=0,i&&g.trigger(l,"sleepEnd"))}})()},function(c,R,e){var o={};c.exports=o;var g=e(32);(function(){o.on=function(l,h,i){for(var s=h.split(" "),n,d=0;d<s.length;d++)n=s[d],l.events=l.events||{},l.events[n]=l.events[n]||[],l.events[n].push(i);return i},o.off=function(l,h,i){if(!h){l.events={};return}typeof h=="function"&&(i=h,h=g.keys(l.events).join(" "));for(var s=h.split(" "),n=0;n<s.length;n++){var d=l.events[s[n]],a=[];if(i&&d)for(var u=0;u<d.length;u++)d[u]!==i&&a.push(d[u]);l.events[s[n]]=a}},o.trigger=function(l,h,i){var s,n,d,a,u=l.events;if(u&&g.keys(u).length>0){i||(i={}),s=h.split(" ");for(var f=0;f<s.length;f++)if(n=s[f],d=u[n],d){a=g.clone(i,!1),a.name=n,a.source=l;for(var p=0;p<d.length;p++)d[p].apply(l,[a])}}}})()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(175),g=e(92),l=e(74),h={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(i){i===void 0&&(i=g.MULTI_PIPELINE);var s=this.scene.sys.renderer;if(!s)return!1;var n=s.pipelines;if(this.postPipelines=[],this.pipelineData={},n){var d=n.get(i);if(d)return this.defaultPipeline=d,this.pipeline=d,!0}return!1},setPipeline:function(i,s,n){var d=this.scene.sys.renderer;if(!d)return this;var a=d.pipelines;if(a){var u=a.get(i);u&&(this.pipeline=u),s&&(this.pipelineData=n?o(s):s)}return this},setPostPipeline:function(i,s,n){var d=this.scene.sys.renderer;if(!d)return this;var a=d.pipelines;if(a){Array.isArray(i)||(i=[i]);for(var u=0;u<i.length;u++){var f=a.getPostPipeline(i[u],this);f&&this.postPipelines.push(f)}s&&(this.pipelineData=n?o(s):s)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(i,s){var n=this.pipelineData;return s===void 0?delete n[i]:n[i]=s,this},getPostPipeline:function(i){for(var s=this.postPipelines,n=[],d=0;d<s.length;d++){var a=s[d];(typeof i=="string"&&a.name===i||a instanceof i)&&n.push(a)}return n.length===1?n[0]:n},resetPipeline:function(i,s){return i===void 0&&(i=!1),s===void 0&&(s=!1),this.pipeline=this.defaultPipeline,i&&(this.postPipelines=[],this.hasPostPipeline=!1),s&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(i){i===void 0&&(i=!1);for(var s=this.postPipelines,n=0;n<s.length;n++)s[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,i&&(this.pipelineData={})},removePostPipeline:function(i){for(var s=this.postPipelines,n=s.length-1;n>=0;n--){var d=s[n];(typeof i=="string"&&d.name===i||typeof i!="string"&&d instanceof i)&&(d.destroy(),l(s,n))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={DEFAULT:0,LINEAR:0,NEAREST:1};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h,i){return i===void 0&&(i=new o),i.x=l.x+l.radius*Math.cos(h),i.y=l.y+l.radius*Math.sin(h),i};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h){h===void 0&&(h=new o);var i=2*Math.PI*Math.random(),s=Math.random()+Math.random(),n=s>1?2-s:s,d=n*Math.cos(i),a=n*Math.sin(i);return h.x=l.x+d*l.radius,h.y=l.y+a*l.radius,h};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(130),g=e(4),l=function(h,i,s){if(s===void 0&&(s=new g),i<=0||i>=1)return s.x=h.x,s.y=h.y,s;var n=o(h)*i;return i>.5?(n-=h.width+h.height,n<=h.width?(s.x=h.right-n,s.y=h.bottom):(s.x=h.x,s.y=h.bottom-(n-h.width))):n<=h.width?(s.x=h.x+n,s.y=h.y):(s.x=h.right,s.y=h.y+(n-h.width)),s};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(67),g=e(4),l=function(h,i,s,n){n===void 0&&(n=[]),!i&&s>0&&(i=o(h)/s);for(var d=h.x1,a=h.y1,u=h.x2,f=h.y2,p=0;p<i;p++){var v=p/i,m=d+(u-d)*v,E=a+(f-a)*v;n.push(new g(m,E))}return n};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h){h===void 0&&(h=new o);var i=Math.random();return h.x=l.x1+i*(l.x2-l.x1),h.y=l.y1+i*(l.y2-l.y1),h};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h){return h===void 0&&(h=new o),h.x=l.x+Math.random()*l.width,h.y=l.y+Math.random()*l.height,h};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g,l,h;if(typeof o!="object"||o===null)return o;g=Array.isArray(o)?[]:{};for(h in o)l=o[h],g[h]=e(l);return g};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g={name:o.name,type:o.type,x:o.x,y:o.y,depth:o.depth,scale:{x:o.scaleX,y:o.scaleY},origin:{x:o.originX,y:o.originY},flipX:o.flipX,flipY:o.flipY,rotation:o.rotation,alpha:o.alpha,visible:o.visible,blendMode:o.blendMode,textureKey:"",frameKey:"",data:{}};return o.texture&&(g.textureKey=o.texture.key,g.frameKey=o.frame.name),g};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(3),g=function(l,h,i,s,n,d,a,u){u===void 0&&(u=new o);var f=Math.sin(n),p=Math.cos(n),v=p*d,m=f*d,E=-f*a,x=p*a,y=1/(v*x+E*-m);return u.x=x*y*l+-E*y*h+(s*E-i*x)*y,u.y=v*y*h+-m*y*l+(-s*v+i*m)*y,u};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){g===void 0&&(g=1);for(var l=null,h=0;h<g;h++)l=o.shift(),o.push(l);return l};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){g===void 0&&(g=1);for(var l=null,h=0;h<g;h++)l=o.pop(),o.unshift(l);return l};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h){h===void 0&&(h=new o);var i=Math.random()*Math.PI*2,s=Math.sqrt(Math.random());return h.x=l.x+s*Math.cos(i)*l.width/2,h.y=l.y+s*Math.sin(i)*l.height/2,h};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h){h===void 0&&(h=new o);var i=l.x2-l.x1,s=l.y2-l.y1,n=l.x3-l.x1,d=l.y3-l.y1,a=Math.random(),u=Math.random();return a+u>=1&&(a=1-a,u=1-u),h.x=l.x1+(i*a+n*u),h.y=l.y1+(s*a+d*u),h};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i){var s=h+Math.atan2(o.y-l,o.x-g);return o.x=g+i*Math.cos(s),o.y=l+i*Math.sin(s),o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return o=Math.max(0,Math.min(1,(o-g)/(l-g))),o*o*o*(o*(o*6-15)+10)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return o<=g?0:o>=l?1:(o=(o-g)/(l-g),o*o*(3-2*o))};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(18),g=e(0),l=e(132),h=e(318),i=e(319),s=e(6),n=e(320),d=new g({initialize:function(u,f,p){this.manager=u,this.key=f,this.type="frame",this.frames=this.getFrames(u.textureManager,s(p,"frames",[]),s(p,"defaultTextureKey",null),s(p,"sortFrames",!0)),this.frameRate=s(p,"frameRate",null),this.duration=s(p,"duration",null),this.msPerFrame,this.skipMissedFrames=s(p,"skipMissedFrames",!0),this.delay=s(p,"delay",0),this.repeat=s(p,"repeat",0),this.repeatDelay=s(p,"repeatDelay",0),this.yoyo=s(p,"yoyo",!1),this.showOnStart=s(p,"showOnStart",!1),this.hideOnComplete=s(p,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(l.PAUSE_ALL,this.pause,this),this.manager.on(l.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(a,u,f,p){f===null&&p===null?(a.frameRate=24,a.duration=24/u*1e3):f&&p===null?(a.duration=f,a.frameRate=u/(f/1e3)):(a.frameRate=p,a.duration=u/p*1e3),a.msPerFrame=1e3/a.frameRate},addFrame:function(a){return this.addFrameAt(this.frames.length,a)},addFrameAt:function(a,u){var f=this.getFrames(this.manager.textureManager,u);if(f.length>0){if(a===0)this.frames=f.concat(this.frames);else if(a===this.frames.length)this.frames=this.frames.concat(f);else{var p=this.frames.slice(0,a),v=this.frames.slice(a);this.frames=p.concat(f,v)}this.updateFrameSequence()}return this},checkFrame:function(a){return a>=0&&a<this.frames.length},getFirstTick:function(a){a.accumulator=0,a.nextTick=a.msPerFrame+a.currentFrame.duration},getFrameAt:function(a){return this.frames[a]},getFrames:function(a,u,f,p){p===void 0&&(p=!0);var v=[],m,E,x=1,y,S;if(typeof u=="string"){S=u;var C=a.get(S),I=C.getFrameNames();p&&n(I),u=[],I.forEach(function(B){u.push({key:S,frame:B})})}if(!Array.isArray(u)||u.length===0)return v;for(y=0;y<u.length;y++){var O=u[y],M=s(O,"key",f);if(!!M){var L=s(O,"frame",0),P=a.getFrame(M,L);E=new i(M,L,x,P),E.duration=s(O,"duration",0),E.isFirst=!m,m&&(m.nextFrame=E,E.prevFrame=m),v.push(E),m=E,x++}}if(v.length>0){E.isLast=!0,E.nextFrame=v[0],v[0].prevFrame=E;var b=1/(v.length-1);for(y=0;y<v.length;y++)v[y].progress=y*b}return v},getNextTick:function(a){a.accumulator-=a.nextTick,a.nextTick=a.msPerFrame+a.currentFrame.duration},getFrameByProgress:function(a){return a=o(a,0,1),h(a,this.frames,"progress")},nextFrame:function(a){var u=a.currentFrame;u.isLast?a.yoyo?this.handleYoyoFrame(a,!1):a.repeatCounter>0?a.inReverse&&a.forward?a.forward=!1:this.repeatAnimation(a):a.complete():this.updateAndGetNextTick(a,u.nextFrame)},handleYoyoFrame:function(a,u){if(u||(u=!1),a.inReverse===!u&&a.repeatCounter>0){(a.repeatDelay===0||a.pendingRepeat)&&(a.forward=u),this.repeatAnimation(a);return}if(a.inReverse!==u&&a.repeatCounter===0){a.complete();return}a.forward=u;var f=u?a.currentFrame.nextFrame:a.currentFrame.prevFrame;this.updateAndGetNextTick(a,f)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(a){var u=a.currentFrame;u.isFirst?a.yoyo?this.handleYoyoFrame(a,!0):a.repeatCounter>0?a.inReverse&&!a.forward?this.repeatAnimation(a):(a.forward=!0,this.repeatAnimation(a)):a.complete():this.updateAndGetNextTick(a,u.prevFrame)},updateAndGetNextTick:function(a,u){a.setCurrentFrame(u),this.getNextTick(a)},removeFrame:function(a){var u=this.frames.indexOf(a);return u!==-1&&this.removeFrameAt(u),this},removeFrameAt:function(a){return this.frames.splice(a,1),this.updateFrameSequence(),this},repeatAnimation:function(a){if(a._pendingStop===2){if(a._pendingStopValue===0)return a.stop();a._pendingStopValue--}a.repeatDelay>0&&!a.pendingRepeat?(a.pendingRepeat=!0,a.accumulator-=a.nextTick,a.nextTick+=a.repeatDelay):(a.repeatCounter--,a.forward?a.setCurrentFrame(a.currentFrame.nextFrame):a.setCurrentFrame(a.currentFrame.prevFrame),a.isPlaying&&(this.getNextTick(a),a.handleRepeat()))},toJSON:function(){var a={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(u){a.frames.push(u.toJSON())}),a},updateFrameSequence:function(){for(var a=this.frames.length,u=1/(a-1),f,p=0;p<a;p++)f=this.frames[p],f.index=p+1,f.isFirst=!1,f.isLast=!1,f.progress=p*u,p===0?(f.isFirst=!0,a===1?(f.isLast=!0,f.nextFrame=f,f.prevFrame=f):(f.isLast=!1,f.prevFrame=this.frames[a-1],f.nextFrame=this.frames[p+1])):p===a-1&&a>1?(f.isLast=!0,f.prevFrame=this.frames[a-2],f.nextFrame=this.frames[0]):a>1&&(f.prevFrame=this.frames[p-1],f.nextFrame=this.frames[p+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(l.PAUSE_ALL,this.pause,this),this.manager.off(l.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var a=0;a<this.frames.length;a++)this.frames[a].destroy();this.frames=[],this.manager=null}});c.exports=d},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){g===void 0&&(g=0),l===void 0&&(l=" "),h===void 0&&(h=3),o=o.toString();var i=0;if(g+1>=o.length)switch(h){case 1:o=new Array(g+1-o.length).join(l)+o;break;case 3:var s=Math.ceil((i=g-o.length)/2),n=i-s;o=new Array(n+1).join(l)+o+new Array(s+1).join(l);break;default:o=o+new Array(g+1-o.length).join(l);break}return o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(327),g=e(189),l=e(331),h=e(332),i=function(s){var n=typeof s;switch(n){case"string":return s.substr(0,3).toLowerCase()==="rgb"?h(s):o(s);case"number":return g(s);case"object":return l(s)}};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(103);function g(h,i,s,n){var d=(h+i*6)%6,a=Math.min(d,4-d,1);return Math.round(255*(n-n*s*Math.max(0,a)))}var l=function(h,i,s,n){i===void 0&&(i=1),s===void 0&&(s=1);var d=g(5,h,i,s),a=g(3,h,i,s),u=g(1,h,i,s);return n?n.setTo?n.setTo(d,a,u,n.alpha,!1):(n.r=d,n.g=a,n.b=u,n.color=o(d,a,u),n):{r:d,g:a,b:u,color:o(d,a,u)}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(38),g=e(330),l=function(h){var i=g(h);return new o(i.r,i.g,i.b,i.a)};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return o.x=g-o.width/2,o.y=l-o.height/2,o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(105),g=e(136),l=e(31),h={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function i(){var n=new ArrayBuffer(4),d=new Uint8Array(n),a=new Uint32Array(n);return d[0]=161,d[1]=178,d[2]=195,d[3]=212,a[0]===3569595041?!0:a[0]===2712847316?!1:null}function s(){if(typeof importScripts=="function")return h;h.canvas=!!window.CanvasRenderingContext2D;try{h.localStorage=!!localStorage.getItem}catch{h.localStorage=!1}h.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,h.fileSystem=!!window.requestFileSystem;var n=!1,d=function(){if(window.WebGLRenderingContext)try{var a=l.createWebGL(this),u=a.getContext("webgl")||a.getContext("experimental-webgl"),f=l.create2D(this),p=f.getContext("2d"),v=p.createImageData(1,1);return n=v.data instanceof Uint8ClampedArray,l.remove(a),l.remove(f),!!u}catch{return!1}return!1};return h.webGL=d(),h.worker=!!window.Worker,h.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,h.getUserMedia=h.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,g.firefox&&g.firefoxVersion<21&&(h.getUserMedia=!1),!o.iOS&&(g.ie||g.firefox||g.chrome)&&(h.canvasBitBltShift=!0),(g.safari||g.mobileSafari)&&(h.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(h.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(h.littleEndian=i()),h.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&h.littleEndian!==null&&n,h}c.exports=s()},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e="",o=function(){var g=function(s){for(var n=["i","webkitI","msI","mozI","oI"],d=0;d<n.length;d++){var a=n[d]+"mageSmoothingEnabled";if(a in s)return a}return null},l=function(s){return e===""&&(e=g(s)),e&&(s[e]=!0),s},h=function(s){return e===""&&(e=g(s)),e&&(s[e]=!1),s},i=function(s){return e!==null?s[e]:null};return{disable:h,enable:l,getPrefix:g,isEnabled:i}};c.exports=o()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(14),g=e(17),l={Angle:e(812),Distance:e(821),Easing:e(826),Fuzzy:e(827),Interpolation:e(830),Pow2:e(835),Snap:e(837),RandomDataGenerator:e(839),Average:e(840),Bernstein:e(356),Between:e(195),CatmullRom:e(194),CeilTo:e(841),Clamp:e(18),DegToRad:e(36),Difference:e(842),Euler:e(843),Factorial:e(357),FloatBetween:e(137),FloorTo:e(844),FromPercent:e(98),GetSpeed:e(845),IsEven:e(846),IsEvenStrict:e(847),Linear:e(135),MaxAdd:e(848),Median:e(849),MinSub:e(850),Percent:e(851),RadToDeg:e(196),RandomXY:e(852),RandomXYZ:e(853),RandomXYZW:e(854),Rotate:e(362),RotateAround:e(308),RotateAroundDistance:e(182),RotateTo:e(855),RoundAwayFromZero:e(363),RoundTo:e(856),SinCosTableGenerator:e(857),SmootherStep:e(183),SmoothStep:e(184),ToXY:e(858),TransformXY:e(177),Within:e(859),Wrap:e(68),Vector2:e(3),Vector3:e(39),Vector4:e(140),Matrix3:e(364),Matrix4:e(69),Quaternion:e(365),RotateVec3:e(860)};l=g(!1,l,o),c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i){var s=(h-g)*.5,n=(i-l)*.5,d=o*o,a=o*d;return(2*l-2*h+s+n)*a+(-3*l+3*h-2*s-n)*d+s*o+l};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return Math.floor(Math.random()*(g-o+1)+o)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(14),g=function(l){return l*o.RAD_TO_DEG};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};c.exports=o},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(l){return this._matrix=l,this._dirty=!0,this},reset:function(){var l=this._matrix;return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=0,l[6]=1,l[7]=0,l[8]=0,l[9]=0,l[10]=0,l[11]=0,l[12]=1,l[13]=0,l[14]=0,l[15]=0,l[16]=0,l[17]=0,l[18]=1,l[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var l=new Float32Array(this._matrix);l[4]/=255,l[9]/=255,l[14]/=255,l[19]/=255,this._data=l,this._dirty=!1}return this._data},brightness:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var i=l;return this.multiply([i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0],h)},saturate:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var i=l*2/3+1,s=(i-1)*-.5;return this.multiply([i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0],h)},desaturate:function(l){return l===void 0&&(l=!1),this.saturate(-1,l)},hue:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1),l=l/180*Math.PI;var i=Math.cos(l),s=Math.sin(l),n=.213,d=.715,a=.072;return this.multiply([n+i*(1-n)+s*-n,d+i*-d+s*-d,a+i*-a+s*(1-a),0,0,n+i*-n+s*.143,d+i*(1-d)+s*.14,a+i*-a+s*-.283,0,0,n+i*-n+s*-(1-n),d+i*-d+s*d,a+i*(1-a)+s*a,0,0,0,0,0,1,0],h)},grayscale:function(l,h){return l===void 0&&(l=1),h===void 0&&(h=!1),this.saturate(-l,h)},blackWhite:function(l){return l===void 0&&(l=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],l)},contrast:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var i=l+1,s=-.5*(i-1);return this.multiply([i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0],h)},negative:function(l){return l===void 0&&(l=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],l)},desaturateLuminance:function(l){return l===void 0&&(l=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],l)},sepia:function(l){return l===void 0&&(l=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],l)},night:function(l,h){return l===void 0&&(l=.1),h===void 0&&(h=!1),this.multiply([l*-2,-l,0,0,0,-l,0,l,0,0,0,l,l*2,0,0,0,0,0,1,0],h)},lsd:function(l){return l===void 0&&(l=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],l)},brown:function(l){return l===void 0&&(l=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],l)},vintagePinhole:function(l){return l===void 0&&(l=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],l)},kodachrome:function(l){return l===void 0&&(l=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],l)},technicolor:function(l){return l===void 0&&(l=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],l)},polaroid:function(l){return l===void 0&&(l=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],l)},shiftToBGR:function(l){return l===void 0&&(l=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],l)},multiply:function(l,h){h||this.reset();for(var i=this._matrix,s=[],n=0;n<20;n++)s[n]=i[n];return i[0]=s[0]*l[0]+s[1]*l[5]+s[2]*l[10]+s[3]*l[15],i[1]=s[0]*l[1]+s[1]*l[6]+s[2]*l[11]+s[3]*l[16],i[2]=s[0]*l[2]+s[1]*l[7]+s[2]*l[12]+s[3]*l[17],i[3]=s[0]*l[3]+s[1]*l[8]+s[2]*l[13]+s[3]*l[18],i[4]=s[0]*l[4]+s[1]*l[9]+s[2]*l[14]+s[3]*l[19]+s[4],i[5]=s[5]*l[0]+s[6]*l[5]+s[7]*l[10]+s[8]*l[15],i[6]=s[5]*l[1]+s[6]*l[6]+s[7]*l[11]+s[8]*l[16],i[7]=s[5]*l[2]+s[6]*l[7]+s[7]*l[12]+s[8]*l[17],i[8]=s[5]*l[3]+s[6]*l[8]+s[7]*l[13]+s[8]*l[18],i[9]=s[5]*l[4]+s[6]*l[9]+s[7]*l[14]+s[8]*l[19]+s[9],i[10]=s[10]*l[0]+s[11]*l[5]+s[12]*l[10]+s[13]*l[15],i[11]=s[10]*l[1]+s[11]*l[6]+s[12]*l[11]+s[13]*l[16],i[12]=s[10]*l[2]+s[11]*l[7]+s[12]*l[12]+s[13]*l[17],i[13]=s[10]*l[3]+s[11]*l[8]+s[12]*l[13]+s[13]*l[18],i[14]=s[10]*l[4]+s[11]*l[9]+s[12]*l[14]+s[13]*l[19]+s[14],i[15]=s[15]*l[0]+s[16]*l[5]+s[17]*l[10]+s[18]*l[15],i[16]=s[15]*l[1]+s[16]*l[6]+s[17]*l[11]+s[18]*l[16],i[17]=s[15]*l[2]+s[16]*l[7]+s[17]*l[12]+s[18]*l[17],i[18]=s[15]*l[3]+s[16]*l[8]+s[17]*l[13]+s[18]*l[18],i[19]=s[15]*l[4]+s[16]*l[9]+s[17]*l[14]+s[18]*l[19]+s[19],this._dirty=!0,this}});c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10),g=e(14),l=function(h,i){if(i===void 0&&(i=new o),h.length===0)return i;for(var s=Number.MAX_VALUE,n=Number.MAX_VALUE,d=g.MIN_SAFE_INTEGER,a=g.MIN_SAFE_INTEGER,u,f,p,v=0;v<h.length;v++)u=h[v],Array.isArray(u)?(f=u[0],p=u[1]):(f=u.x,p=u.y),s=Math.min(s,f),n=Math.min(n,p),d=Math.max(d,f),a=Math.max(a,p);return i.x=s,i.y=n,i.width=d-s,i.height=a-n,i};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(1),l=new o({initialize:function(i,s,n){this._rgb=[0,0,0],this.onChangeCallback=g,this.dirty=!1,this.set(i,s,n)},set:function(h,i,s){return h===void 0&&(h=0),i===void 0&&(i=0),s===void 0&&(s=0),this._rgb=[h,i,s],this.onChange(),this},equals:function(h,i,s){var n=this._rgb;return n.r===h&&n.g===i&&n.b===s},onChange:function(){this.dirty=!0;var h=this._rgb;this.onChangeCallback.call(this,h[0],h[1],h[2])},r:{get:function(){return this._rgb[0]},set:function(h){this._rgb[0]=h,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(h){this._rgb[1]=h,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(h){this._rgb[2]=h,this.onChange()}},destroy:function(){this.onChangeCallback=null}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={CENTER:e(403),ORIENTATION:e(404),SCALE_MODE:e(405),ZOOM:e(406)};c.exports=o},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){o.parentNode&&o.parentNode.removeChild(o)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(144),l=e(197),h=e(20),i=e(419),s=e(420),n=e(33),d=e(1),a=e(421),u=new o({initialize:function(p,v){this.scene=p,this.game,this.renderer,this.config=v,this.settings=a.create(v),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=d},init:function(f){this.settings.status=g.INIT,this.sceneUpdate=d,this.game=f,this.renderer=f.renderer,this.canvas=f.canvas,this.context=f.context;var p=f.plugins;this.plugins=p,p.addToScene(this,l.Global,[l.CoreScene,s(this),i(this)]),this.events.emit(h.BOOT,this),this.settings.isBooted=!0},step:function(f,p){var v=this.events;v.emit(h.PRE_UPDATE,f,p),v.emit(h.UPDATE,f,p),this.sceneUpdate.call(this.scene,f,p),v.emit(h.POST_UPDATE,f,p)},render:function(f){var p=this.displayList;p.depthSort(),this.events.emit(h.PRE_RENDER,f),this.cameras.render(f,p),this.events.emit(h.RENDER,f)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(f){var p=this.events,v=this.settings;return this.settings.active&&(v.status=g.PAUSED,v.active=!1,p.emit(h.PAUSE,this,f)),this},resume:function(f){var p=this.events,v=this.settings;return this.settings.active||(v.status=g.RUNNING,v.active=!0,p.emit(h.RESUME,this,f)),this},sleep:function(f){var p=this.events,v=this.settings;return v.status=g.SLEEPING,v.active=!1,v.visible=!1,p.emit(h.SLEEP,this,f),this},wake:function(f){var p=this.events,v=this.settings;return v.status=g.RUNNING,v.active=!0,v.visible=!0,p.emit(h.WAKE,this,f),v.isTransition&&p.emit(h.TRANSITION_WAKE,v.transitionFrom,v.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===g.SLEEPING},isActive:function(){return this.settings.status===g.RUNNING},isPaused:function(){return this.settings.status===g.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(f){return this.settings.visible=f,this},setActive:function(f,p){return f?this.resume(p):this.pause(p)},start:function(f){var p=this.events,v=this.settings;f&&(v.data=f),v.status=g.START,v.active=!0,v.visible=!0,p.emit(h.START,this),p.emit(h.READY,this,f)},shutdown:function(f){var p=this.events,v=this.settings;p.off(h.TRANSITION_INIT),p.off(h.TRANSITION_START),p.off(h.TRANSITION_COMPLETE),p.off(h.TRANSITION_OUT),v.status=g.SHUTDOWN,v.active=!1,v.visible=!1,this.renderer===n.WEBGL&&this.renderer.resetTextures(!0),p.emit(h.SHUTDOWN,this,f)},destroy:function(){var f=this.events,p=this.settings;p.status=g.DESTROYED,p.active=!1,p.visible=!1,f.emit(h.DESTROY,this),f.removeAllListeners();for(var v=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],m=0;m<v.length;m++)this[v[m]]=null}});c.exports=u},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o&&o[0].toUpperCase()+o.slice(1)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(33),g=e(0),l=e(109),h=e(424),i="Texture.frame missing: ",s=new g({initialize:function(d,a,u,f,p){Array.isArray(u)||(u=[u]),this.manager=d,this.key=a,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var v=0;v<u.length;v++)this.source.push(new h(this,u[v],f,p))},add:function(n,d,a,u,f,p){if(this.has(n))return null;var v=new l(this,n,d,a,u,f,p);return this.frames[n]=v,this.firstFrame==="__BASE"&&(this.firstFrame=n),this.frameTotal++,v},remove:function(n){if(this.has(n)){var d=this.get(n);return d.destroy(),delete this.frames[n],!0}return!1},has:function(n){return this.frames[n]},get:function(n){n||(n=this.firstFrame);var d=this.frames[n];return d||(console.warn(i+n),d=this.frames[this.firstFrame]),d},getTextureSourceIndex:function(n){for(var d=0;d<this.source.length;d++)if(this.source[d]===n)return d;return-1},getFramesFromTextureSource:function(n,d){d===void 0&&(d=!1);var a=[];for(var u in this.frames)if(!(u==="__BASE"&&!d)){var f=this.frames[u];f.sourceIndex===n&&a.push(f)}return a},getFrameNames:function(n){n===void 0&&(n=!1);var d=Object.keys(this.frames);if(!n){var a=d.indexOf("__BASE");a!==-1&&d.splice(a,1)}return d},getSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var d=this.frames[n];return d?d.source.image:(console.warn(i+n),this.frames.__BASE.source.image)},getDataSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var d=this.frames[n],a;return d?a=d.sourceIndex:(console.warn(i+n),a=this.frames.__BASE.sourceIndex),this.dataSource[a].image},setDataSource:function(n){Array.isArray(n)||(n=[n]);for(var d=0;d<n.length;d++){var a=this.source[d];this.dataSource.push(new h(this,n[d],a.width,a.height))}},setFilter:function(n){var d;for(d=0;d<this.source.length;d++)this.source[d].setFilter(n);for(d=0;d<this.dataSource.length;d++)this.dataSource[d].setFilter(n)},destroy:function(){var n;for(n=0;n<this.source.length;n++)this.source[n].destroy();for(n=0;n<this.dataSource.length;n++)this.dataSource[n].destroy();for(var d in this.frames){var a=this.frames[d];a.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var u=this.manager.game.renderer;u&&u.type===o.WEBGL&&u.resetTextures(!0),this.manager=null}});c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(78),g=function(l,h,i,s,n){s===void 0&&(s=0),n===void 0&&(n=l.length);var d=[];if(o(l,s,n))for(var a=s;a<n;a++){var u=l[a];(!h||h&&i===void 0&&u.hasOwnProperty(h)||h&&i!==void 0&&u[h]===i)&&d.push(u)}return d};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Matrix:e(1013),Add:e(1021),AddAt:e(1022),BringToTop:e(1023),CountAllMatching:e(1024),Each:e(1025),EachInRange:e(1026),FindClosestInSorted:e(318),GetAll:e(207),GetFirst:e(428),GetRandom:e(210),MoveDown:e(1027),MoveTo:e(1028),MoveUp:e(1029),MoveAbove:e(1030),MoveBelow:e(1031),NumberArray:e(322),NumberArrayStep:e(1032),QuickSelect:e(436),Range:e(437),Remove:e(93),RemoveAt:e(1033),RemoveBetween:e(1034),RemoveRandomElement:e(1035),Replace:e(1036),RotateLeft:e(178),RotateRight:e(179),SafeRange:e(78),SendToBack:e(1037),SetAll:e(1038),Shuffle:e(131),SortByDigits:e(320),SpliceOne:e(74),StableSort:e(79),Swap:e(1039)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){if(!Array.isArray(o)||o.length<2||!Array.isArray(o[0]))return!1;for(var g=o[0].length,l=1;l<o.length;l++)if(o[l].length!==g)return!1;return!0};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){g===void 0&&(g=0),l===void 0&&(l=o.length);var h=g+Math.floor(Math.random()*l);return o[h]===void 0?null:o[h]};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(9),l=e(438),h=new o({Extends:g,initialize:function(){g.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(i){return this._pending.push(i),this._toProcess++,i},remove:function(i){return this._destroy.push(i),this._toProcess++,i},removeAll:function(){for(var i=this._active,s=this._destroy,n=i.length;n--;)s.push(i[n]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var i=this._destroy,s=this._active,n,d;for(n=0;n<i.length;n++){d=i[n];var a=s.indexOf(d);a!==-1&&(s.splice(a,1),this.emit(l.PROCESS_QUEUE_REMOVE,d))}for(i.length=0,i=this._pending,n=0;n<i.length;n++)d=i[n],(!this.checkQueue||this.checkQueue&&s.indexOf(d)===-1)&&(s.push(d),this.emit(l.PROCESS_QUEUE_ADD,d));return i.length=0,this._toProcess=0,s},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(g,l){return parseInt(g.getAttribute(l),10)}var o=function(g,l,h,i,s){h===void 0&&(h=0),i===void 0&&(i=0);var n=l.cutX,d=l.cutY,a=l.source.width,u=l.source.height,f=l.sourceIndex,p={},v=g.getElementsByTagName("info")[0],m=g.getElementsByTagName("common")[0];p.font=v.getAttribute("face"),p.size=e(v,"size"),p.lineHeight=e(m,"lineHeight")+i,p.chars={};var E=g.getElementsByTagName("char"),x=l!==void 0&&l.trimmed;if(x)var y=l.height,S=l.width;for(var C=0;C<E.length;C++){var I=E[C],O=e(I,"id"),M=String.fromCharCode(O),L=e(I,"x"),P=e(I,"y"),b=e(I,"width"),B=e(I,"height");x&&(L<S&&(S=L),P<y&&(y=P)),x&&y!==0&&S!==0&&(L-=l.x,P-=l.y);var U=(n+L)/a,H=(d+P)/u,Y=(n+L+b)/a,j=(d+P+B)/u;if(p.chars[O]={x:L,y:P,width:b,height:B,centerX:Math.floor(b/2),centerY:Math.floor(B/2),xOffset:e(I,"xoffset"),yOffset:e(I,"yoffset"),xAdvance:e(I,"xadvance")+h,data:{},kerning:{},u0:U,v0:H,u1:Y,v1:j},s&&b!==0&&B!==0){var _=s.add(M,f,L,P,b,B);_&&_.setUVs(b,B,U,H,Y,j)}}var w=g.getElementsByTagName("kerning");for(C=0;C<w.length;C++){var D=w[C],N=e(D,"first"),G=e(D,"second"),k=e(D,"amount");p.chars[G].kerning[N]=k}return p};c.exports=o},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1049),g=e(440),l=e(0),h=e(11),i=e(109),s=e(15),n=e(110),d=new l({Extends:s,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.ScrollFactor,h.Size,h.Texture,h.Transform,h.Visible,o],initialize:function(u,f,p,v,m){s.call(this,u,"Blitter"),this.setTexture(v,m),this.setPosition(f,p),this.initPipeline(),this.children=new n,this.renderList=[],this.dirty=!1},create:function(a,u,f,p,v){p===void 0&&(p=!0),v===void 0&&(v=this.children.length),f===void 0?f=this.frame:f instanceof i||(f=this.texture.get(f));var m=new g(this,a,u,f,p);return this.children.addAt(m,v,!1),this.dirty=!0,m},createFromCallback:function(a,u,f,p){for(var v=this.createMultiple(u,f,p),m=0;m<v.length;m++){var E=v[m];a.call(this,E,m)}return v},createMultiple:function(a,u,f){u===void 0&&(u=this.frame.name),f===void 0&&(f=!0),Array.isArray(u)||(u=[u]);var p=[],v=this;return u.forEach(function(m){for(var E=0;E<a;E++)p.push(v.create(0,0,m,f))}),p},childCanRender:function(a){return a.visible&&a.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(208),g=e(35),l=e(0),h=e(11),i=e(75),s=e(15),n=e(10),d=e(1052),a=e(441),u=e(3),f=new l({Extends:s,Mixins:[h.AlphaSingle,h.BlendMode,h.ComputedSize,h.Depth,h.Mask,h.Pipeline,h.Transform,h.Visible,d],initialize:function(v,m,E,x){s.call(this,v,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new h.TransformMatrix,this.tempTransformMatrix=new h.TransformMatrix,this._sortKey="",this._sysEvents=v.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(m,E),this.clearAlpha(),this.setBlendMode(g.SKIP_CHECK),x&&this.add(x)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(p){return p===void 0&&(p=!0),this.exclusive=p,this},getBounds:function(p){if(p===void 0&&(p=new n),p.setTo(this.x,this.y,0,0),this.parentContainer){var v=this.parentContainer.getBoundsTransformMatrix(),m=v.transformPoint(this.x,this.y);p.setTo(m.x,m.y,0,0)}if(this.list.length>0){var E=this.list,x=new n,y=!1;p.setEmpty();for(var S=0;S<E.length;S++){var C=E[S];C.getBounds&&(C.getBounds(x),y?a(x,p,p):(p.setTo(x.x,x.y,x.width,x.height),y=!0))}}return p},addHandler:function(p){p.once(i.DESTROY,this.remove,this),this.exclusive&&(p.parentContainer&&p.parentContainer.remove(p),p.removeFromDisplayList(),p.parentContainer=this)},removeHandler:function(p){p.off(i.DESTROY,this.remove),this.exclusive&&(p.parentContainer=null,p.addToDisplayList())},pointToContainer:function(p,v){v===void 0&&(v=new u),this.parentContainer?this.parentContainer.pointToContainer(p,v):v=new u(p.x,p.y);var m=this.tempTransformMatrix;return m.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),m.invert(),m.transformPoint(p.x,p.y,v),v},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(p){return o.Add(this.list,p,this.maxSize,this.addHandler,this),this},addAt:function(p,v){return o.AddAt(this.list,p,v,this.maxSize,this.addHandler,this),this},getAt:function(p){return this.list[p]},getIndex:function(p){return this.list.indexOf(p)},sort:function(p,v){return p?(v===void 0&&(v=function(m,E){return m[p]-E[p]}),o.StableSort(this.list,v),this):this},getByName:function(p){return o.GetFirst(this.list,"name",p)},getRandom:function(p,v){return o.GetRandom(this.list,p,v)},getFirst:function(p,v,m,E){return o.GetFirst(this.list,p,v,m,E)},getAll:function(p,v,m,E){return o.GetAll(this.list,p,v,m,E)},count:function(p,v,m,E){return o.CountAllMatching(this.list,p,v,m,E)},swap:function(p,v){return o.Swap(this.list,p,v),this},moveTo:function(p,v){return o.MoveTo(this.list,p,v),this},moveAbove:function(p,v){return o.MoveAbove(this.list,p,v),this},moveBelow:function(p,v){return o.MoveBelow(this.list,p,v),this},remove:function(p,v){var m=o.Remove(this.list,p,this.removeHandler,this);if(v&&m){Array.isArray(m)||(m=[m]);for(var E=0;E<m.length;E++)m[E].destroy()}return this},removeAt:function(p,v){var m=o.RemoveAt(this.list,p,this.removeHandler,this);return v&&m&&m.destroy(),this},removeBetween:function(p,v,m){var E=o.RemoveBetween(this.list,p,v,this.removeHandler,this);if(m)for(var x=0;x<E.length;x++)E[x].destroy();return this},removeAll:function(p){var v=o.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(p)for(var m=0;m<v.length;m++)v[m].destroy();return this},bringToTop:function(p){return o.BringToTop(this.list,p),this},sendToBack:function(p){return o.SendToBack(this.list,p),this},moveUp:function(p){return o.MoveUp(this.list,p),this},moveDown:function(p){return o.MoveDown(this.list,p),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return o.Shuffle(this.list),this},replace:function(p,v,m){var E=o.Replace(this.list,p,v);return E&&(this.addHandler(v),this.removeHandler(p),m&&p.destroy()),this},exists:function(p){return this.list.indexOf(p)>-1},setAll:function(p,v,m,E){return o.SetAll(this.list,p,v,m,E),this},each:function(p,v){var m=[null],E,x=this.list.slice(),y=x.length;for(E=2;E<arguments.length;E++)m.push(arguments[E]);for(E=0;E<y;E++)m[0]=x[E],p.apply(v,m);return this},iterate:function(p,v){var m=[null],E;for(E=2;E<arguments.length;E++)m.push(arguments[E]);for(E=0;E<this.list.length;E++)m[0]=this.list[E],p.apply(v,m);return this},setScrollFactor:function(p,v,m){return v===void 0&&(v=p),m===void 0&&(m=!1),this.scrollFactorX=p,this.scrollFactorY=v,m&&(o.SetAll(this.list,"scrollFactorX",p),o.SetAll(this.list,"scrollFactorY",v)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});c.exports=f},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(148),g=e(0),l=e(1057),h=new g({Extends:o,Mixins:[l],initialize:function(s,n,d,a,u,f,p){o.call(this,s,n,d,a,u,f,p),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(i,s){return this.cropWidth=i,this.cropHeight=s,this},setDisplayCallback:function(i){return this.displayCallback=i,this},setScrollX:function(i){return this.scrollX=i,this},setScrollY:function(i){return this.scrollY=i,this}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(133),g=e(0),l=e(217),h=e(303),i=e(304),s=e(305),n=e(309),d=e(167),a=e(312),u=e(313),f=e(314),p=e(111),v=e(15),m=e(2),E=e(6),x=e(14),y=e(1063),S=new g({Extends:v,Mixins:[h,i,s,n,d,u,f,a,y],initialize:function(I,O){var M=E(O,"x",0),L=E(O,"y",0);v.call(this,I,"Graphics"),this.setPosition(M,L),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(O)},setDefaultStyles:function(C){return E(C,"lineStyle",null)&&(this.defaultStrokeWidth=E(C,"lineStyle.width",1),this.defaultStrokeColor=E(C,"lineStyle.color",16777215),this.defaultStrokeAlpha=E(C,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),E(C,"fillStyle",null)&&(this.defaultFillColor=E(C,"fillStyle.color",16777215),this.defaultFillAlpha=E(C,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(C,I,O){return O===void 0&&(O=1),this.commandBuffer.push(l.LINE_STYLE,C,I,O),this._lineWidth=C,this},fillStyle:function(C,I){return I===void 0&&(I=1),this.commandBuffer.push(l.FILL_STYLE,C,I),this},fillGradientStyle:function(C,I,O,M,L,P,b,B){return L===void 0&&(L=1),P===void 0&&(P=L),b===void 0&&(b=L),B===void 0&&(B=L),this.commandBuffer.push(l.GRADIENT_FILL_STYLE,L,P,b,B,C,I,O,M),this},lineGradientStyle:function(C,I,O,M,L,P){return P===void 0&&(P=1),this.commandBuffer.push(l.GRADIENT_LINE_STYLE,C,P,I,O,M,L),this},beginPath:function(){return this.commandBuffer.push(l.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(l.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(l.FILL_PATH),this},fill:function(){return this.commandBuffer.push(l.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(l.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(l.STROKE_PATH),this},fillCircleShape:function(C){return this.fillCircle(C.x,C.y,C.radius)},strokeCircleShape:function(C){return this.strokeCircle(C.x,C.y,C.radius)},fillCircle:function(C,I,O){return this.beginPath(),this.arc(C,I,O,0,x.PI2),this.fillPath(),this},strokeCircle:function(C,I,O){return this.beginPath(),this.arc(C,I,O,0,x.PI2),this.strokePath(),this},fillRectShape:function(C){return this.fillRect(C.x,C.y,C.width,C.height)},strokeRectShape:function(C){return this.strokeRect(C.x,C.y,C.width,C.height)},fillRect:function(C,I,O,M){return this.commandBuffer.push(l.FILL_RECT,C,I,O,M),this},strokeRect:function(C,I,O,M){var L=this._lineWidth/2,P=C-L,b=C+L;return this.beginPath(),this.moveTo(C,I),this.lineTo(C,I+M),this.strokePath(),this.beginPath(),this.moveTo(C+O,I),this.lineTo(C+O,I+M),this.strokePath(),this.beginPath(),this.moveTo(P,I),this.lineTo(b+O,I),this.strokePath(),this.beginPath(),this.moveTo(P,I+M),this.lineTo(b+O,I+M),this.strokePath(),this},fillRoundedRect:function(C,I,O,M,L){L===void 0&&(L=20);var P=L,b=L,B=L,U=L;return typeof L!="number"&&(P=m(L,"tl",20),b=m(L,"tr",20),B=m(L,"bl",20),U=m(L,"br",20)),this.beginPath(),this.moveTo(C+P,I),this.lineTo(C+O-b,I),this.arc(C+O-b,I+b,b,-x.TAU,0),this.lineTo(C+O,I+M-U),this.arc(C+O-U,I+M-U,U,0,x.TAU),this.lineTo(C+B,I+M),this.arc(C+B,I+M-B,B,x.TAU,Math.PI),this.lineTo(C,I+P),this.arc(C+P,I+P,P,-Math.PI,-x.TAU),this.fillPath(),this},strokeRoundedRect:function(C,I,O,M,L){L===void 0&&(L=20);var P=L,b=L,B=L,U=L;return typeof L!="number"&&(P=m(L,"tl",20),b=m(L,"tr",20),B=m(L,"bl",20),U=m(L,"br",20)),this.beginPath(),this.moveTo(C+P,I),this.lineTo(C+O-b,I),this.moveTo(C+O-b,I),this.arc(C+O-b,I+b,b,-x.TAU,0),this.lineTo(C+O,I+M-U),this.moveTo(C+O,I+M-U),this.arc(C+O-U,I+M-U,U,0,x.TAU),this.lineTo(C+B,I+M),this.moveTo(C+B,I+M),this.arc(C+B,I+M-B,B,x.TAU,Math.PI),this.lineTo(C,I+P),this.moveTo(C,I+P),this.arc(C+P,I+P,P,-Math.PI,-x.TAU),this.strokePath(),this},fillPointShape:function(C,I){return this.fillPoint(C.x,C.y,I)},fillPoint:function(C,I,O){return!O||O<1?O=1:(C-=O/2,I-=O/2),this.commandBuffer.push(l.FILL_RECT,C,I,O,O),this},fillTriangleShape:function(C){return this.fillTriangle(C.x1,C.y1,C.x2,C.y2,C.x3,C.y3)},strokeTriangleShape:function(C){return this.strokeTriangle(C.x1,C.y1,C.x2,C.y2,C.x3,C.y3)},fillTriangle:function(C,I,O,M,L,P){return this.commandBuffer.push(l.FILL_TRIANGLE,C,I,O,M,L,P),this},strokeTriangle:function(C,I,O,M,L,P){return this.commandBuffer.push(l.STROKE_TRIANGLE,C,I,O,M,L,P),this},strokeLineShape:function(C){return this.lineBetween(C.x1,C.y1,C.x2,C.y2)},lineBetween:function(C,I,O,M){return this.beginPath(),this.moveTo(C,I),this.lineTo(O,M),this.strokePath(),this},lineTo:function(C,I){return this.commandBuffer.push(l.LINE_TO,C,I),this},moveTo:function(C,I){return this.commandBuffer.push(l.MOVE_TO,C,I),this},strokePoints:function(C,I,O,M){I===void 0&&(I=!1),O===void 0&&(O=!1),M===void 0&&(M=C.length),this.beginPath(),this.moveTo(C[0].x,C[0].y);for(var L=1;L<M;L++)this.lineTo(C[L].x,C[L].y);return I&&this.lineTo(C[0].x,C[0].y),O&&this.closePath(),this.strokePath(),this},fillPoints:function(C,I,O,M){I===void 0&&(I=!1),O===void 0&&(O=!1),M===void 0&&(M=C.length),this.beginPath(),this.moveTo(C[0].x,C[0].y);for(var L=1;L<M;L++)this.lineTo(C[L].x,C[L].y);return I&&this.lineTo(C[0].x,C[0].y),O&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(C,I){I===void 0&&(I=32);var O=C.getPoints(I);return this.strokePoints(O,!0)},strokeEllipse:function(C,I,O,M,L){L===void 0&&(L=32);var P=new p(C,I,O,M),b=P.getPoints(L);return this.strokePoints(b,!0)},fillEllipseShape:function(C,I){I===void 0&&(I=32);var O=C.getPoints(I);return this.fillPoints(O,!0)},fillEllipse:function(C,I,O,M,L){L===void 0&&(L=32);var P=new p(C,I,O,M),b=P.getPoints(L);return this.fillPoints(b,!0)},arc:function(C,I,O,M,L,P,b){return P===void 0&&(P=!1),b===void 0&&(b=0),this.commandBuffer.push(l.ARC,C,I,O,M,L,P,b),this},slice:function(C,I,O,M,L,P,b){return P===void 0&&(P=!1),b===void 0&&(b=0),this.commandBuffer.push(l.BEGIN_PATH),this.commandBuffer.push(l.MOVE_TO,C,I),this.commandBuffer.push(l.ARC,C,I,O,M,L,P,b),this.commandBuffer.push(l.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(l.SAVE),this},restore:function(){return this.commandBuffer.push(l.RESTORE),this},translateCanvas:function(C,I){return this.commandBuffer.push(l.TRANSLATE,C,I),this},scaleCanvas:function(C,I){return this.commandBuffer.push(l.SCALE,C,I),this},rotateCanvas:function(C){return this.commandBuffer.push(l.ROTATE,C),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(C,I,O){var M=this.scene.sys,L=M.game.renderer;I===void 0&&(I=M.scale.width),O===void 0&&(O=M.scale.height),S.TargetCamera.setScene(this.scene),S.TargetCamera.setViewport(0,0,I,O),S.TargetCamera.scrollX=this.x,S.TargetCamera.scrollY=this.y;var P,b;if(typeof C=="string")if(M.textures.exists(C)){P=M.textures.get(C);var B=P.getSourceImage();B instanceof HTMLCanvasElement&&(b=B.getContext("2d"))}else P=M.textures.createCanvas(C,I,O),b=P.getSourceImage().getContext("2d");else C instanceof HTMLCanvasElement&&(b=C.getContext("2d"));return b&&(this.renderCanvas(L,this,S.TargetCamera,null,b,!1),P&&P.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});S.TargetCamera=new o,c.exports=S},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h,i){i===void 0&&(i=new o);var s=l.width/2,n=l.height/2;return i.x=l.x+s*Math.cos(h),i.y=l.y+n*Math.sin(h),i};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(35),g=e(0),l=e(11),h=e(176),i=e(101),s=e(9),n=e(75),d=e(110),a=e(1071),u=e(20),f=e(79),p=new g({Extends:d,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.Visible,s,a],initialize:function(m,E){d.call(this,m),s.call(this),this.scene=m,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=m.sys,this.events=m.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(o.SKIP_CHECK),E&&this.add(E),m.sys.queueDepthSort()},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},setState:function(v){return this.state=v,this},setDataEnabled:function(){return this.data||(this.data=new i(this)),this},setData:function(v,m){return this.data||(this.data=new i(this)),this.data.set(v,m),this},incData:function(v,m){return this.data||(this.data=new i(this)),this.data.inc(v,m),this},toggleData:function(v){return this.data||(this.data=new i(this)),this.data.toggle(v),this},getData:function(v){return this.data||(this.data=new i(this)),this.data.get(v)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(v){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&v.id)},getIndexList:function(){for(var v=this,m=this.parentContainer,E=[];m&&(E.unshift(m.getIndex(v)),v=m,m.parentContainer);)m=m.parentContainer;return E.unshift(this.displayList.getIndex(v)),E},addChildCallback:function(v){v.displayList&&v.displayList!==this&&v.removeFromDisplayList(),v.displayList||(this.queueDepthSort(),v.displayList=this,v.emit(n.ADDED_TO_SCENE,v,this.scene),this.events.emit(u.ADDED_TO_SCENE,v,this.scene))},removeChildCallback:function(v){this.queueDepthSort(),v.displayList=null,v.emit(n.REMOVED_FROM_SCENE,v,this.scene),this.events.emit(u.REMOVED_FROM_SCENE,v,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(f(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(v,m){return v._depth-m._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(n.DESTROY,this);for(var v=this.list.length;v--;)this.list[v].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});c.exports=p},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(11),l=e(15),h=e(450),i=e(110),s=e(452),n=e(1075),d=new o({Extends:l,Mixins:[g.Depth,g.Mask,g.Pipeline,g.Transform,g.Visible,n],initialize:function(u,f,p,v){if(l.call(this,u,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],p!==null&&(typeof p=="object"||Array.isArray(p))&&(v=p,p=null),this.setTexture(f,p),this.initPipeline(),this.emitters=new i(this),this.wells=new i(this),v){Array.isArray(v)||(v=[v]);for(var m=0;m<v.length;m++)this.createEmitter(v[m])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(a,u){return this.texture=this.scene.sys.textures.get(a),this.setFrame(u)},setFrame:function(a){this.frame=this.texture.get(a);var u=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),f=[];return u.forEach(function(p){f.push(p.name)}),this.frameNames=f,this.defaultFrame=this.frame,this},setEmitterFrames:function(a,u){Array.isArray(a)||(a=[a]);var f=u.frames;f.length=0;for(var p=0;p<a.length;p++){var v=a[p];this.frameNames.indexOf(v)!==-1&&f.push(this.texture.get(v))}return f.length>0?u.defaultFrame=f[0]:u.defaultFrame=this.defaultFrame,this},addEmitter:function(a){return this.emitters.add(a)},createEmitter:function(a){return this.addEmitter(new s(this,a))},removeEmitter:function(a){return this.emitters.remove(a,!0)},addGravityWell:function(a){return this.wells.add(a)},createGravityWell:function(a){return this.addGravityWell(new h(a))},emitParticle:function(a,u,f){for(var p=this.emitters.list,v=0;v<p.length;v++){var m=p[v];m.active&&m.emitParticle(a,u,f)}return this},emitParticleAt:function(a,u,f){return this.emitParticle(f,a,u)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(a,u){u*=this.timeScale;for(var f=this.emitters.list,p=0;p<f.length;p++){var v=f[p];v.active&&v.preUpdate(a,u)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(35),g=e(133),l=e(31),h=e(0),i=e(11),s=e(33),n=e(109),d=e(15),a=e(1),u=e(92),f=e(1079),p=e(141),v=e(12),m=e(222),E=new h({Extends:d,Mixins:[i.Alpha,i.BlendMode,i.ComputedSize,i.Crop,i.Depth,i.Flip,i.GetBounds,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Tint,i.Transform,i.Visible,f],initialize:function(y,S,C,I,O,M,L){S===void 0&&(S=0),C===void 0&&(C=0),I===void 0&&(I=32),O===void 0&&(O=32),d.call(this,y,"RenderTexture"),this.renderer=y.sys.renderer,this.textureManager=y.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,M===void 0?(this.canvas=l.create2D(this,I,O),this.texture=y.sys.textures.addCanvas(m(),this.canvas),this.frame=this.texture.get()):(this.texture=y.sys.textures.get(M),this.frame=this.texture.get(L),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new g(0,0,I,O),this.renderTarget=null;var P=this.renderer;P?P.type===s.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new p(P,I,O,1,0,!1)):P.type===s.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=a,this.camera.setScene(y),this.setPosition(S,C),M===void 0&&this.setSize(I,O),this.setOrigin(0,0),this.initPipeline(u.SINGLE_PIPELINE)},setSize:function(x,y){return this.resize(x,y)},resize:function(x,y){y===void 0&&(y=x);var S=this.frame;if(x!==this.width||y!==this.height){if(S.name==="__BASE"){this.canvas.width=x,this.canvas.height=y,this.texture.width=x,this.texture.height=y;var C=this.renderTarget;C&&(C.resize(x,y),S.glTexture=C.texture,S.source.isRenderTexture=!0,S.source.isGLTexture=!0,S.source.glTexture=C.texture),this.camera.setSize(x,y),S.source.width=x,S.source.height=y,S.setSize(x,y),this.width=x,this.height=y}}else{var I=this.texture.getSourceImage();S.cutX+x>I.width&&(x=I.width-S.cutX),S.cutY+y>I.height&&(y=I.height-S.cutY),S.setSize(x,y,S.cutX,S.cutY)}this.updateDisplayOrigin();var O=this.input;return O&&!O.customHitArea&&(O.hitArea.width=x,O.hitArea.height=y),this},setGlobalTint:function(x){return this.globalTint=x,this},setGlobalAlpha:function(x){return this.globalAlpha=x,this},saveTexture:function(x){return this.textureManager.renameTexture(this.texture.key,x),this._saved=!0,this.texture},fill:function(x,y,S,C,I,O){var M=this.frame,L=this.camera,P=this.renderer;y===void 0&&(y=1),S===void 0&&(S=0),C===void 0&&(C=0),I===void 0&&(I=M.cutWidth),O===void 0&&(O=M.cutHeight);var b=(x>>16&255)/255,B=(x>>8&255)/255,U=(x&255)/255,H=this.renderTarget;if(L.preRender(),H){H.bind(!0);var Y=this.pipeline;Y.manager.set(Y);var j=H.width,_=H.height,w=P.width,D=P.height,N=w/j,G=D/_;Y.drawFillRect(S*N,C*G,I*N,O*G,v.getTintFromFloats(U,B,b,1),y),H.unbind(!0)}else{var k=this.context;P.setContext(k),k.fillStyle="rgba("+b+","+B+","+U+","+y+")",k.fillRect(S+M.cutX,C+M.cutY,I,O),P.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var x=this.renderTarget;if(x)x.clear();else{var y=this.context;y.save(),y.setTransform(1,0,0,1,0,0),y.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),y.restore()}this.dirty=!1}return this},erase:function(x,y,S){return this._eraseMode=!0,this.draw(x,y,S,1,16777215),this._eraseMode=!1,this},draw:function(x,y,S,C,I){return this.beginDraw(),this.batchDraw(x,y,S,C,I),this.endDraw(),this},drawFrame:function(x,y,S,C,I,O){return this.beginDraw(),this.batchDrawFrame(x,y,S,C,I,O),this.endDraw(),this},beginDraw:function(){var x=this.camera,y=this.renderer,S=this.renderTarget;return x.preRender(),S?y.beginCapture(S.width,S.height):y.setContext(this.context),this},batchDraw:function(x,y,S,C,I){return C===void 0&&(C=this.globalAlpha),I===void 0?I=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):I=(I>>16)+(I&65280)+((I&255)<<16),Array.isArray(x)||(x=[x]),this.batchList(x,y,S,C,I),this},batchDrawFrame:function(x,y,S,C,I,O){S===void 0&&(S=0),C===void 0&&(C=0),I===void 0&&(I=this.globalAlpha),O===void 0?O=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):O=(O>>16)+(O&65280)+((O&255)<<16);var M=this.textureManager.getFrame(x,y);return M&&(this.renderTarget?this.pipeline.batchTextureFrame(M,S,C,O,I,this.camera.matrix,null):this.batchTextureFrame(M,S+this.frame.cutX,C+this.frame.cutY,I,O)),this},endDraw:function(x){x===void 0&&(x=this._eraseMode);var y=this.renderer,S=this.renderTarget;if(S){var C=y.endCapture(),I=y.pipelines.setUtility();I.blitFrame(C,S,1,!1,!1,x),y.resetScissor(),y.resetViewport()}else y.setContext();return this.dirty=!0,this},batchList:function(x,y,S,C,I){for(var O=0;O<x.length;O++){var M=x[O];!M||M===this||(M.renderWebGL||M.renderCanvas?this.drawGameObject(M,y,S):M.isParent||M.list?this.batchGroup(M.getChildren(),y,S):typeof M=="string"?this.batchTextureFrameKey(M,null,y,S,C,I):M instanceof n?this.batchTextureFrame(M,y,S,C,I):Array.isArray(M)&&this.batchList(M,y,S,C,I))}},batchGroup:function(x,y,S){y===void 0&&(y=0),S===void 0&&(S=0),y+=this.frame.cutX,S+=this.frame.cutY;for(var C=0;C<x.length;C++){var I=x[C];if(I.willRender(this.camera)){var O=I.x+y,M=I.y+S;this.drawGameObject(I,O,M)}}},batchGameObjectWebGL:function(x,y,S){y===void 0&&(y=x.x),S===void 0&&(S=x.y);var C=x.x,I=x.y;x.setPosition(y+this.frame.cutX,S+this.frame.cutY),x.renderDirect?x.renderDirect(this.renderer,x,this.camera):x.renderWebGL(this.renderer,x,this.camera),x.setPosition(C,I)},batchGameObjectCanvas:function(x,y,S){y===void 0&&(y=x.x),S===void 0&&(S=x.y);var C=x.x,I=x.y;if(this._eraseMode){var O=x.blendMode;x.blendMode=o.ERASE}x.setPosition(y+this.frame.cutX,S+this.frame.cutY),x.renderCanvas(this.renderer,x,this.camera,null),x.setPosition(C,I),this._eraseMode&&(x.blendMode=O)},batchTextureFrameKey:function(x,y,S,C,I,O){var M=this.textureManager.getFrame(x,y);M&&this.batchTextureFrame(M,S,C,I,O)},batchTextureFrame:function(x,y,S,C,I){y===void 0&&(y=0),S===void 0&&(S=0),y+=this.frame.cutX,S+=this.frame.cutY;var O=this.renderTarget;if(O)this.pipeline.batchTextureFrame(x,y,S,I,C,this.camera.matrix,null);else{var M=this.context,L=x.canvasData,P=x.source.image,b=this.camera.matrix;M.save(),M.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",M.globalAlpha=C,b.setToContext(M),M.drawImage(P,L.x,L.y,L.width,L.height,y,S,L.width,L.height),M.restore()}},snapshotArea:function(x,y,S,C,I,O,M){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,I,!1,x,y,S,C,O,M):this.renderer.snapshotCanvas(this.canvas,I,!1,x,y,S,C,O,M),this},snapshot:function(x,y,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,x,!1,0,0,this.width,this.height,y,S):this.renderer.snapshotCanvas(this.canvas,x,!1,0,0,this.width,this.height,y,S),this},snapshotPixel:function(x,y,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!0,x,y):this.renderer.snapshotCanvas(this.canvas,S,!0,x,y),this},preDestroy:function(){this._saved||(l.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});c.exports=E},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var g=Math.random()*16|0,l=o==="x"?g:g&3|8;return l.toString(16)})};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(164),g=e(0),l=e(11),h=e(15),i=e(92),s=e(1085),n=e(3),d=new g({Extends:h,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Flip,l.Mask,l.Pipeline,l.Size,l.Texture,l.Transform,l.Visible,l.ScrollFactor,s],initialize:function(u,f,p,v,m,E,x,y,S){v===void 0&&(v="__DEFAULT"),E===void 0&&(E=2),x===void 0&&(x=!0),h.call(this,u,"Rope"),this.anims=new o(this),this.points=E,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=v==="__DEFAULT",this.dirty=!1,this.horizontal=x,this._flipX=!1,this._flipY=!1,this._perp=new n,this.debugCallback=null,this.debugGraphic=null,this.setTexture(v,m),this.setPosition(f,p),this.setSizeToFrame(),this.initPipeline(i.ROPE_PIPELINE),Array.isArray(E)&&this.resizeArrays(E.length),this.setPoints(E,y,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(a,u){var f=this.anims.currentFrame;this.anims.update(a,u),this.anims.currentFrame!==f&&(this.updateUVs(),this.updateVertices())},play:function(a,u,f){return this.anims.play(a,u,f),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(a,u,f){return a===void 0&&(a=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(a,u,f))},setVertical:function(a,u,f){return a===void 0&&(a=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(a,u,f)):this},setTintFill:function(a){return a===void 0&&(a=!1),this.tintFill=a,this},setAlphas:function(a,u){var f=this.points.length;if(f<1)return this;var p=this.alphas;a===void 0?a=[1]:!Array.isArray(a)&&u===void 0&&(a=[a]);var v,m=0;if(u!==void 0)for(v=0;v<f;v++)m=v*2,p[m]=a,p[m+1]=u;else if(a.length===f)for(v=0;v<f;v++)m=v*2,p[m]=a[v],p[m+1]=a[v];else{var E=a[0];for(v=0;v<f;v++)m=v*2,a.length>m&&(E=a[m]),p[m]=E,a.length>m+1&&(E=a[m+1]),p[m+1]=E}return this},setColors:function(a){var u=this.points.length;if(u<1)return this;var f=this.colors;a===void 0?a=[16777215]:Array.isArray(a)||(a=[a]);var p,v=0;if(a.length===u)for(p=0;p<u;p++)v=p*2,f[v]=a[p],f[v+1]=a[p];else{var m=a[0];for(p=0;p<u;p++)v=p*2,a.length>v&&(m=a[v]),f[v]=m,a.length>v+1&&(m=a[v+1]),f[v+1]=m}return this},setPoints:function(a,u,f){if(a===void 0&&(a=2),typeof a=="number"){var p=a;p<2&&(p=2),a=[];var v,m,E;if(this.horizontal)for(E=-this.frame.halfWidth,m=this.frame.width/(p-1),v=0;v<p;v++)a.push({x:E+v*m,y:0});else for(E=-this.frame.halfHeight,m=this.frame.height/(p-1),v=0;v<p;v++)a.push({x:0,y:E+v*m})}var x=a.length,y=this.points.length;return x<1?(console.warn("Rope: Not enough points given"),this):(x===1&&(a.unshift({x:0,y:0}),x++),y!==x&&this.resizeArrays(x),this.points=a,this.updateUVs(),u!=null&&this.setColors(u),f!=null&&this.setAlphas(f),this)},updateUVs:function(){for(var a=this.uv,u=this.points.length,f=this.frame.u0,p=this.frame.v0,v=this.frame.u1,m=this.frame.v1,E=(v-f)/(u-1),x=(m-p)/(u-1),y=0;y<u;y++){var S=y*4,C,I,O,M;this.horizontal?(this._flipX?(C=v-y*E,O=v-y*E):(C=f+y*E,O=f+y*E),this._flipY?(I=m,M=p):(I=p,M=m)):(this._flipX?(C=f,O=v):(C=v,O=f),this._flipY?(I=m-y*x,M=m-y*x):(I=p+y*x,M=p+y*x)),a[S+0]=C,a[S+1]=I,a[S+2]=O,a[S+3]=M}return this},resizeArrays:function(a){var u=this.colors,f=this.alphas;this.vertices=new Float32Array(a*4),this.uv=new Float32Array(a*4),u=new Uint32Array(a*2),f=new Float32Array(a*2);for(var p=0;p<a*2;p++)u[p]=16777215,f[p]=1;return this.colors=u,this.alphas=f,this.dirty=!0,this},updateVertices:function(){var a=this._perp,u=this.points,f=this.vertices,p=u.length;if(this.dirty=!1,!(p<1)){for(var v,m=u[0],E=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,x=0;x<p;x++){var y=u[x],S=x*4;x<p-1?v=u[x+1]:v=y,a.x=v.y-m.y,a.y=-(v.x-m.x);var C=a.length();a.x/=C,a.y/=C,a.x*=E,a.y*=E,f[S]=y.x+a.x,f[S+1]=y.y+a.y,f[S+2]=y.x-a.x,f[S+3]=y.y-a.y,m=y}return this}},setDebug:function(a,u){return this.debugGraphic=a,!a&&!u?this.debugCallback=null:u?this.debugCallback=u:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(a,u,f){var p=a.debugGraphic,v=f[0],m=f[1],E=f[2],x=f[3];p.lineBetween(v,m,E,x);for(var y=4;y<u;y+=4){var S=f[y+0],C=f[y+1],I=f[y+2],O=f[y+3];p.lineBetween(v,m,S,C),p.lineBetween(E,x,I,O),p.lineBetween(E,x,S,C),p.lineBetween(S,C,I,O),v=S,m=C,E=I,x=O}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(a){return this._flipX=a,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(a){return this._flipY=a,this.updateUVs()}}});c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(142),g=e(31),l=e(0),h=e(11),i=e(22),s=e(15),n=e(458),d=e(6),a=e(202),u=e(1088),f=e(459),p=new l({Extends:s,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,u],initialize:function(m,E,x,y,S){E===void 0&&(E=0),x===void 0&&(x=0),s.call(this,m,"Text"),this.renderer=m.sys.renderer,this.setPosition(E,x),this.setOrigin(0,0),this.initPipeline(),this.canvas=g.create(this),this.context=this.canvas.getContext("2d"),this.style=new f(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(y),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing),m.sys.game.events.on(i.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",o(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(v){var m=this.style;if(m.wordWrapCallback){var E=m.wordWrapCallback.call(m.wordWrapCallbackScope,v,this);return Array.isArray(E)&&(E=E.join(`
`)),E}else return m.wordWrapWidth?m.wordWrapUseAdvanced?this.advancedWordWrap(v,this.context,this.style.wordWrapWidth):this.basicWordWrap(v,this.context,this.style.wordWrapWidth):v},advancedWordWrap:function(v,m,E){for(var x="",y=v.replace(/ +/gi," ").split(this.splitRegExp),S=y.length,C=0;C<S;C++){var I=y[C],O="";I=I.replace(/^ *|\s*$/gi,"");var M=m.measureText(I).width;if(M<E){x+=I+`
`;continue}for(var L=E,P=I.split(" "),b=0;b<P.length;b++){var B=P[b],U=B+" ",H=m.measureText(U).width;if(H>L){if(b===0){for(var Y=U;Y.length&&(Y=Y.slice(0,-1),H=m.measureText(Y).width,!(H<=L)););if(!Y.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var j=B.substr(Y.length);P[b]=j,O+=Y}var _=P[b].length?b:b+1,w=P.slice(_).join(" ").replace(/[ \n]*$/gi,"");y[C+1]=w+" "+(y[C+1]||""),S=y.length;break}else O+=U,L-=H}x+=O.replace(/[ \n]*$/gi,"")+`
`}return x=x.replace(/[\s|\n]*$/gi,""),x},basicWordWrap:function(v,m,E){for(var x="",y=v.split(this.splitRegExp),S=y.length-1,C=m.measureText(" ").width,I=0;I<=S;I++){for(var O=E,M=y[I].split(" "),L=M.length-1,P=0;P<=L;P++){var b=M[P],B=m.measureText(b).width,U=B;P<L&&(U+=C),U>O&&P>0&&(x+=`
`,O=E),x+=b,P<L?(x+=" ",O-=U):O-=B}I<S&&(x+=`
`)}return x},getWrappedText:function(v){v===void 0&&(v=this._text),this.style.syncFont(this.canvas,this.context);var m=this.runWordWrap(v);return m.split(this.splitRegExp)},setText:function(v){return!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v!==this._text&&(this._text=v.toString(),this.updateText()),this},setStyle:function(v){return this.style.setStyle(v)},setFont:function(v){return this.style.setFont(v)},setFontFamily:function(v){return this.style.setFontFamily(v)},setFontSize:function(v){return this.style.setFontSize(v)},setFontStyle:function(v){return this.style.setFontStyle(v)},setFixedSize:function(v,m){return this.style.setFixedSize(v,m)},setBackgroundColor:function(v){return this.style.setBackgroundColor(v)},setFill:function(v){return this.style.setFill(v)},setColor:function(v){return this.style.setColor(v)},setStroke:function(v,m){return this.style.setStroke(v,m)},setShadow:function(v,m,E,x,y,S){return this.style.setShadow(v,m,E,x,y,S)},setShadowOffset:function(v,m){return this.style.setShadowOffset(v,m)},setShadowColor:function(v){return this.style.setShadowColor(v)},setShadowBlur:function(v){return this.style.setShadowBlur(v)},setShadowStroke:function(v){return this.style.setShadowStroke(v)},setShadowFill:function(v){return this.style.setShadowFill(v)},setWordWrapWidth:function(v,m){return this.style.setWordWrapWidth(v,m)},setWordWrapCallback:function(v,m){return this.style.setWordWrapCallback(v,m)},setAlign:function(v){return this.style.setAlign(v)},setResolution:function(v){return this.style.setResolution(v)},setLineSpacing:function(v){return this.lineSpacing=v,this.updateText()},setPadding:function(v,m,E,x){if(typeof v=="object"){var y=v,S=d(y,"x",null);S!==null?(v=S,E=S):(v=d(y,"left",0),E=d(y,"right",v));var C=d(y,"y",null);C!==null?(m=C,x=C):(m=d(y,"top",0),x=d(y,"bottom",m))}else v===void 0&&(v=0),m===void 0&&(m=v),E===void 0&&(E=v),x===void 0&&(x=m);return this.padding.left=v,this.padding.top=m,this.padding.right=E,this.padding.bottom=x,this.updateText()},setMaxLines:function(v){return this.style.setMaxLines(v)},updateText:function(){var v=this.canvas,m=this.context,E=this.style,x=E.resolution,y=E.metrics;E.syncFont(v,m);var S=this._text;(E.wordWrapWidth||E.wordWrapCallback)&&(S=this.runWordWrap(this._text));var C=S.split(this.splitRegExp),I=n(this,y,C),O=this.padding,M;E.fixedWidth===0?(this.width=I.width+O.left+O.right,M=I.width):(this.width=E.fixedWidth,M=this.width-O.left-O.right,M<I.width&&(M=I.width)),E.fixedHeight===0?this.height=I.height+O.top+O.bottom:this.height=E.fixedHeight;var L=this.width,P=this.height;this.updateDisplayOrigin(),L*=x,P*=x,L=Math.max(L,1),P=Math.max(P,1),v.width!==L||v.height!==P?(v.width=L,v.height=P,this.frame.setSize(L,P),E.syncFont(v,m)):m.clearRect(0,0,L,P),m.save(),m.scale(x,x),E.backgroundColor&&(m.fillStyle=E.backgroundColor,m.fillRect(0,0,L,P)),E.syncStyle(v,m),m.textBaseline="alphabetic",m.translate(O.left,O.top);for(var b,B,U=0;U<I.lines;U++){if(b=E.strokeThickness/2,B=E.strokeThickness/2+U*I.lineHeight+y.ascent,U>0&&(B+=I.lineSpacing*U),E.rtl)b=L-b;else if(E.align==="right")b+=M-I.lineWidths[U];else if(E.align==="center")b+=(M-I.lineWidths[U])/2;else if(E.align==="justify"){var H=.85;if(I.lineWidths[U]/I.width>=H){var Y=I.width-I.lineWidths[U],j=m.measureText(" ").width,_=C[U].trim(),w=_.split(" ");Y+=(C[U].length-_.length)*j;for(var D=Math.floor(Y/j),N=0;D>0;)w[N]+=" ",N=(N+1)%(w.length-1||1),--D;C[U]=w.join(" ")}}this.autoRound&&(b=Math.round(b),B=Math.round(B)),E.strokeThickness&&(this.style.syncShadow(m,E.shadowStroke),m.strokeText(C[U],b,B)),E.color&&(this.style.syncShadow(m,E.shadowFill),m.fillText(C[U],b,B))}m.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(v,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var G=this.input;return G&&!G.customHitArea&&(G.hitArea.width=this.width,G.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(v){this.setText(v)}},toJSON:function(){var v=h.ToJSON(this),m={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return v.data=m,v},preDestroy:function(){this.style.rtl&&a(this.canvas),g.remove(this.canvas),this.texture.destroy()}});c.exports=p},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(31),g=e(0),l=e(11),h=e(22),i=e(15),s=e(361),n=e(192),d=e(1091),a=e(3),u=8,f=new g({Extends:i,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,d],initialize:function(v,m,E,x,y,S,C){var I=v.sys.renderer;i.call(this,v,"TileSprite");var O=v.sys.textures.get(S),M=O.get(C);!x||!y?(x=M.width,y=M.height):(x=Math.floor(x),y=Math.floor(y)),this._tilePosition=new a,this._tileScale=new a(1,1),this.dirty=!1,this.renderer=I,this.canvas=o.create(this,x,y),this.context=this.canvas.getContext("2d"),this.displayTexture=O,this.displayFrame=M,this._crop=this.resetCropObject(),this.texture=v.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=s(M.width),this.potHeight=s(M.height),this.fillCanvas=o.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(m,E),this.setSize(x,y),this.setFrame(C),this.setOriginFromFrame(),this.initPipeline(),v.sys.game.events.on(h.CONTEXT_RESTORED,function(L){if(!!L){var P=L.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=L.createTexture2D(0,P.LINEAR,P.LINEAR,P.REPEAT,P.REPEAT,P.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(p,v){return this.displayTexture=this.scene.sys.textures.get(p),this.setFrame(v)},setFrame:function(p){var v=this.displayTexture.get(p);return this.potWidth=s(v.width),this.potHeight=s(v.height),this.canvas.width=0,!v.cutWidth||!v.cutHeight?this.renderFlags&=~u:this.renderFlags|=u,this.displayFrame=v,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(p,v){return p!==void 0&&(this.tilePositionX=p),v!==void 0&&(this.tilePositionY=v),this},setTileScale:function(p,v){return p===void 0&&(p=this.tileScaleX),v===void 0&&(v=p),this.tileScaleX=p,this.tileScaleY=v,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var p=this.displayFrame;if(p.source.isRenderTexture||p.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var v=this.fillContext,m=this.fillCanvas,E=this.potWidth,x=this.potHeight;(!this.renderer||!this.renderer.gl)&&(E=p.cutWidth,x=p.cutHeight),v.clearRect(0,0,E,x),m.width=E,m.height=x,v.drawImage(p.source.image,p.cutX,p.cutY,p.cutWidth,p.cutHeight,0,0,E,x),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(m,this.fillPattern):this.fillPattern=v.createPattern(m,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var p=this.canvas;if((p.width!==this.width||p.height!==this.height)&&(p.width=this.width,p.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var v=this.context;this.scene.sys.game.config.antialias||n.disable(v);var m=this._tileScale.x,E=this._tileScale.y,x=this._tilePosition.x,y=this._tilePosition.y;v.clearRect(0,0,this.width,this.height),v.save(),v.scale(m,E),v.translate(-x,-y),v.fillStyle=this.fillPattern,v.fillRect(x,y,this.width/m,this.height/E),v.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),o.remove(this.canvas),o.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(p){this._tilePosition.x=p,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(p){this._tilePosition.y=p,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(p){this._tileScale.x=p,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(p){this._tileScale.y=p,this.dirty=!0}}});c.exports=f},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(18),l=e(11),h=e(75),i=e(22),s=e(51),n=e(15),d=e(70),a=e(222),u=e(1094),f=e(14),p=new o({Extends:n,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Size,l.TextureCrop,l.Tint,l.Transform,l.Visible,u],initialize:function(m,E,x,y){n.call(this,m,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=a(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=f.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(E,x),this.initPipeline(),y&&this.changeSource(y,!1);var S=m.sys.game.events;S.on(i.PAUSE,this.globalPause,this),S.on(i.RESUME,this.globalResume,this);var C=m.sys.sound;C&&C.on(d.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(v,m,E){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var x=this.video;if(!x)return console.warn("Video not loaded"),this;v===void 0&&(v=x.loop);var y=this.scene.sys.sound;y&&y.mute&&this.setMute(!0),isNaN(m)||(this._markerIn=m),!isNaN(E)&&E>m&&(this._markerOut=E),x.loop=v;var S=this._callbacks,C=x.play();return C!==void 0?C.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(x.addEventListener("playing",S.play,!0),x.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),x.addEventListener("ended",S.end,!0),x.addEventListener("timeupdate",S.time,!0),x.addEventListener("seeking",S.seeking,!0),x.addEventListener("seeked",S.seeked,!0),this},changeSource:function(v,m,E,x,y){m===void 0&&(m=!0);var S=this.video;S&&this.stop();var C=this.scene.sys.cache.video.get(v);return C?(this.video=C,this._cacheKey=v,this._codePaused=C.paused,this._codeMuted=C.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,C,C.videoWidth,C.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,C.videoWidth,C.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(h.VIDEO_CREATED,this,C.videoWidth,C.videoHeight)):this.updateTexture(),C.currentTime=0,this._lastUpdate=0,m&&this.play(E,x,y)):this.video=null,this},addMarker:function(v,m,E){return!isNaN(m)&&m>=0&&!isNaN(E)&&(this.markers[v]=[m,E]),this},playMarker:function(v,m){var E=this.markers[v];return E&&this.play(m,E[0],E[1]),this},removeMarker:function(v){return delete this.markers[v],this},snapshot:function(v,m){return v===void 0&&(v=this.width),m===void 0&&(m=this.height),this.snapshotArea(0,0,this.width,this.height,v,m)},snapshotArea:function(v,m,E,x,y,S){v===void 0&&(v=0),m===void 0&&(m=0),E===void 0&&(E=this.width),x===void 0&&(x=this.height),y===void 0&&(y=E),S===void 0&&(S=x);var C=this.video,I=this.snapshotTexture;return I?(I.setSize(y,S),C&&I.context.drawImage(C,v,m,E,x,0,0,y,S)):(I=this.scene.sys.textures.createCanvas(a(),y,S),this.snapshotTexture=I,C&&I.context.drawImage(C,v,m,E,x,0,0,y,S)),I.update()},saveSnapshotTexture:function(v){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,v):this.snapshotTexture=this.scene.sys.textures.createCanvas(v,this.width,this.height),this.snapshotTexture},loadURL:function(v,m,E){E===void 0&&(E=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var x=document.createElement("video");return x.controls=!1,E&&(x.muted=!0,x.defaultMuted=!0,x.setAttribute("autoplay","autoplay")),x.setAttribute("playsinline","playsinline"),x.setAttribute("preload","auto"),x.addEventListener("error",this._callbacks.error,!0),x.src=v,x.load(),this.video=x,this},loadMediaStream:function(v,m,E){E===void 0&&(E=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var x=document.createElement("video");x.controls=!1,E&&(x.muted=!0,x.defaultMuted=!0,x.setAttribute("autoplay","autoplay")),x.setAttribute("playsinline","playsinline"),x.setAttribute("preload","auto"),x.addEventListener("error",this._callbacks.error,!0);try{x.srcObject=v}catch{x.src=window.URL.createObjectURL(v)}return x.load(),this.video=x,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(h.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(v){this.scene.sys.input.once(s.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(h.VIDEO_ERROR,this,v)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(h.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(v){this.stop(),this.emit(h.VIDEO_ERROR,this,v)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(h.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(h.VIDEO_PLAY,this)},completeHandler:function(){this.emit(h.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(h.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var v=this.video;if(v){var m=v.currentTime;m!==this._lastUpdate&&(this._lastUpdate=m,this.updateTexture(),m>=this._markerOut&&(v.loop?(v.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=m,this.emit(h.VIDEO_LOOP,this)):(this.emit(h.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(h.VIDEO_TIMEOUT,this))},updateTexture:function(){var v=this.video,m=v.videoWidth,E=v.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,v,m,E),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,m,E),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(h.VIDEO_CREATED,this,m,E);else{var x=this.videoTextureSource;x.source!==v&&(x.source=v,x.width=m,x.height=E),x.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(v){var m=this.video;if(m){var E=m.duration;if(E!==1/0&&!isNaN(E)){var x=E*v;this.setCurrentTime(x)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(v){var m=this.video;if(m){if(typeof v=="string"){var E=v[0],x=parseFloat(v.substr(1));E==="+"?v=m.currentTime+x:E==="-"&&(v=m.currentTime-x)}m.currentTime=v,this._lastUpdate=v}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(h.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(h.VIDEO_SEEKED,this);var v=this.video;v&&this.updateTexture()},getProgress:function(){var v=this.video;if(v){var m=v.currentTime,E=v.duration;if(E!==1/0&&!isNaN(E))return m/E}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(v){v===void 0&&(v=!0),this._codeMuted=v;var m=this.video;return m&&(m.muted=this._systemMuted?!0:v),this},isMuted:function(){return this._codeMuted},globalMute:function(v,m){this._systemMuted=m;var E=this.video;E&&(E.muted=this._codeMuted?!0:m)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(v){v===void 0&&(v=!0);var m=this.video;return this._codePaused=v,m&&(v?m.paused||m.pause():v||m.paused&&!this._systemPaused&&m.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(v){return v===void 0&&(v=1),this.video&&(this.video.volume=g(v,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(v){return this.video&&(this.video.playbackRate=v),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(v){return v===void 0&&(v=!0),this.video&&(this.video.loop=v),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(v,m){return m===void 0&&(m=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,v),this._key=v,this.flipY=m,this.videoTextureSource&&this.videoTextureSource.setFlipY(m),this.videoTexture},stop:function(){var v=this.video;if(v){var m=this._callbacks;for(var E in m)v.removeEventListener(E,m[E],!0);v.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(h.VIDEO_STOP,this),this},removeVideoElement:function(){var v=this.video;if(!!v){for(v.parentNode&&v.parentNode.removeChild(v);v.hasChildNodes();)v.removeChild(v.firstChild);v.removeAttribute("autoplay"),v.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var v=this.scene.sys.game.events;v.off(i.PAUSE,this.globalPause,this),v.off(i.RESUME,this.globalResume,this);var m=this.scene.sys.sound;m&&m.off(d.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});c.exports=p},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(228),l=e(470),h=e(56),i=new o({initialize:function(n){this.type=h.POLYGON,this.area=0,this.points=[],n&&this.setTo(n)},contains:function(s,n){return g(this,s,n)},setTo:function(s){if(this.area=0,this.points=[],typeof s=="string"&&(s=s.split(" ")),!Array.isArray(s))return this;for(var n,d=Number.MAX_VALUE,a=0;a<s.length;a++)n={x:0,y:0},typeof s[a]=="number"||typeof s[a]=="string"?(n.x=parseFloat(s[a]),n.y=parseFloat(s[a+1]),a++):Array.isArray(s[a])?(n.x=s[a][0],n.y=s[a][1]):(n.x=s[a].x,n.y=s[a].y),this.points.push(n),n.y<d&&(d=n.y);return this.calculateArea(d),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var s=0,n,d,a=0;a<this.points.length-1;a++)n=this.points[a],d=this.points[a+1],s+=(d.x-n.x)*(n.y+d.y);return n=this.points[0],d=this.points[this.points.length-1],s+=(n.x-d.x)*(d.y+n.y),this.area=-s*.5,this.area},getPoints:function(s,n,d){return l(this,s,n,d)}});c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){for(var h=!1,i=-1,s=o.points.length-1;++i<o.points.length;s=i){var n=o.points[i].x,d=o.points[i].y,a=o.points[s].x,u=o.points[s].y;(d<=l&&l<u||u<=l&&l<d)&&g<(a-n)*(l-d)/(u-d)+n&&(h=!h)}return h};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(11),l=e(15),h=e(2),i=e(17),s=e(478),n=e(1176),d=e(25),a=new o({Extends:l,Mixins:[g.ComputedSize,g.Depth,g.GetBounds,g.Mask,g.Origin,g.ScrollFactor,g.Transform,g.Visible,n],initialize:function(f,p,v,m,E,x,y,S){v===void 0&&(v=0),m===void 0&&(m=0),E===void 0&&(E=128),x===void 0&&(x=128),l.call(this,f,"Shader"),this.blendMode=-1,this.shader;var C=f.sys.renderer;this.renderer=C,this.gl=C.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=C.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=C.width,this._rendererHeight=C.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(v,m),this.setSize(E,x),this.setOrigin(.5,.5),this.setShader(p,y,S)},willRender:function(u){return this.renderToTexture?!0:!(l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},setRenderToTexture:function(u,f){if(f===void 0&&(f=!1),!this.renderToTexture){var p=this.width,v=this.height,m=this.renderer;this.glTexture=m.createTextureFromSource(null,p,v,0),this.glTexture.flipY=f,this.framebuffer=m.createFramebuffer(p,v,this.glTexture,!1),this._rendererWidth=p,this._rendererHeight=v,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),u&&(this.texture=this.scene.sys.textures.addGLTexture(u,this.glTexture,p,v))}return this.shader&&(m.pipelines.clear(),this.load(),this.flush(),m.pipelines.rebind()),this},setShader:function(u,f,p){if(f===void 0&&(f=[]),typeof u=="string"){var v=this.scene.sys.cache.shader;if(!v.has(u))return console.warn("Shader missing: "+u),this;this.shader=v.get(u)}else this.shader=u;var m=this.gl,E=this.renderer;this.program&&m.deleteProgram(this.program);var x=E.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);m.uniformMatrix4fv(m.getUniformLocation(x,"uViewMatrix"),!1,this.viewMatrix),m.uniformMatrix4fv(m.getUniformLocation(x,"uProjectionMatrix"),!1,this.projectionMatrix),m.uniform2f(m.getUniformLocation(x,"uResolution"),this.width,this.height),this.program=x;var y=new Date,S={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[y.getFullYear(),y.getMonth(),y.getDate(),y.getHours()*60*60+y.getMinutes()*60+y.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=i(!0,{},this.shader.uniforms,S):this.uniforms=S;for(var C=0;C<4;C++)f[C]&&this.setSampler2D("iChannel"+C,f[C],C,p);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(u){return this.pointer=u,this},projOrtho:function(u,f,p,v){var m=-1e3,E=1e3,x=1/(u-f),y=1/(p-v),S=1/(m-E),C=this.projectionMatrix;C[0]=-2*x,C[5]=-2*y,C[10]=2*S,C[12]=(u+f)*x,C[13]=(v+p)*y,C[14]=(E+m)*S;var I=this.program,O=this.gl,M=this.renderer;M.setProgram(I),O.uniformMatrix4fv(O.getUniformLocation(I,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=f,this._rendererHeight=p},initUniforms:function(){var u=this.gl,f=this.renderer.glFuncMap,p=this.program;this._textureCount=0;for(var v in this.uniforms){var m=this.uniforms[v],E=m.type,x=f[E];m.uniformLocation=u.getUniformLocation(p,v),E!=="sampler2D"&&(m.glMatrix=x.matrix,m.glValueLength=x.length,m.glFunc=x.func)}},setSampler2DBuffer:function(u,f,p,v,m,E){m===void 0&&(m=0),E===void 0&&(E={});var x=this.uniforms[u];return x.value=f,E.width=p,E.height=v,x.textureData=E,this._textureCount=m,this.initSampler2D(x),this},setSampler2D:function(u,f,p,v){p===void 0&&(p=0);var m=this.scene.sys.textures;if(m.exists(f)){var E=m.getFrame(f);if(E.glTexture&&E.glTexture.isRenderTexture)return this.setSampler2DBuffer(u,E.glTexture,E.width,E.height,p,v);var x=this.uniforms[u],y=E.source;x.textureKey=f,x.source=y.image,x.value=E.glTexture,y.isGLTexture&&(v||(v={}),v.width=y.width,v.height=y.height),v&&(x.textureData=v),this._textureCount=p,this.initSampler2D(x)}return this},setUniform:function(u,f){return s(this.uniforms,u,f),this},getUniform:function(u){return h(this.uniforms,u,null)},setChannel0:function(u,f){return this.setSampler2D("iChannel0",u,0,f)},setChannel1:function(u,f){return this.setSampler2D("iChannel1",u,1,f)},setChannel2:function(u,f){return this.setSampler2D("iChannel2",u,2,f)},setChannel3:function(u,f){return this.setSampler2D("iChannel3",u,3,f)},initSampler2D:function(u){if(!!u.value){var f=this.gl;f.activeTexture(f.TEXTURE0+this._textureCount),f.bindTexture(f.TEXTURE_2D,u.value);var p=u.textureData;if(p&&!u.value.isRenderTexture){var v=f[h(p,"magFilter","linear").toUpperCase()],m=f[h(p,"minFilter","linear").toUpperCase()],E=f[h(p,"wrapS","repeat").toUpperCase()],x=f[h(p,"wrapT","repeat").toUpperCase()],y=f[h(p,"format","rgba").toUpperCase()];if(p.repeat&&(E=f.REPEAT,x=f.REPEAT),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!!p.flipY),p.width){var S=h(p,"width",512),C=h(p,"height",2),I=h(p,"border",0);f.texImage2D(f.TEXTURE_2D,0,y,S,C,I,y,f.UNSIGNED_BYTE,null)}else f.texImage2D(f.TEXTURE_2D,0,y,f.RGBA,f.UNSIGNED_BYTE,u.source);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,v),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,m),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,E),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,x)}this.renderer.setProgram(this.program),f.uniform1i(u.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var u=this.gl,f=this.uniforms,p,v,m,E,x,y=0;for(var S in f)p=f[S],m=p.glFunc,v=p.glValueLength,E=p.uniformLocation,x=p.value,x!==null&&(v===1?p.glMatrix?m.call(u,E,p.transpose,x):m.call(u,E,x):v===2?m.call(u,E,x.x,x.y):v===3?m.call(u,E,x.x,x.y,x.z):v===4?m.call(u,E,x.x,x.y,x.z,x.w):p.type==="sampler2D"&&(u.activeTexture(u.TEXTURE0+y),u.bindTexture(u.TEXTURE_2D,x),u.uniform1i(E,y),y++))},load:function(u){var f=this.gl,p=this.width,v=this.height,m=this.renderer,E=this.program,x=this.viewMatrix;if(!this.renderToTexture){var y=-this._displayOriginX,S=-this._displayOriginY;x[0]=u[0],x[1]=u[1],x[4]=u[2],x[5]=u[3],x[8]=u[4],x[9]=u[5],x[12]=x[0]*y+x[4]*S,x[13]=x[1]*y+x[5]*S}f.useProgram(E),f.uniformMatrix4fv(f.getUniformLocation(E,"uViewMatrix"),!1,x),f.uniform2f(f.getUniformLocation(E,"uResolution"),this.width,this.height);var C=this.uniforms,I=C.resolution;I.value.x=p,I.value.y=v,C.time.value=m.game.loop.getDuration();var O=this.pointer;if(O){var M=C.mouse,L=O.x/p,P=1-O.y/v;M.value.x=L.toFixed(2),M.value.y=P.toFixed(2)}this.syncUniforms()},flush:function(){var u=this.width,f=this.height,p=this.program,v=this.gl,m=this.vertexBuffer,E=this.renderer,x=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(E.setFramebuffer(this.framebuffer),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT)),v.bindBuffer(v.ARRAY_BUFFER,m);var y=v.getAttribLocation(p,"inPosition");y!==-1&&(v.enableVertexAttribArray(y),v.vertexAttribPointer(y,2,v.FLOAT,!1,x,0));var S=this.vertexViewF32;S[3]=f,S[4]=u,S[5]=f,S[8]=u,S[9]=f,S[10]=u;var C=6;v.bufferSubData(v.ARRAY_BUFFER,0,this.bytes.subarray(0,C*x)),v.drawArrays(v.TRIANGLES,0,C),this.renderToTexture&&E.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var u=this.gl;u.deleteProgram(this.program),u.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});c.exports=a},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(11),l=e(36),h=e(116),i=e(15),s=e(479),n=e(480),d=e(19),a=e(69),u=e(1179),f=e(79),p=e(39),v=e(117),m=new o({Extends:i,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.Size,g.Texture,g.Transform,g.Visible,g.ScrollFactor,u],initialize:function(x,y,S,C,I,O,M,L,P,b,B,U){y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C="__WHITE"),i.call(this,x,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new p,this.modelScale=new p(1,1,1),this.modelRotation=new p,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new a,this.viewPosition=new p,this.viewMatrix=new a,this.projectionMatrix=new a,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var H=x.sys.renderer;this.setPosition(y,S),this.setTexture(C,I),this.setSize(H.width,H.height),this.initPipeline(),this.setPerspective(H.width,H.height),O&&this.addVertices(O,M,L,P,b,B,U)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(E){return this.viewPosition.addScale(p.LEFT,E),this.dirtyCache[10]=1,this},panY:function(E){return this.viewPosition.y+=p.DOWN.y*E,this.dirtyCache[10]=1,this},panZ:function(E){return this.viewPosition.z+=E,this.dirtyCache[10]=1,this},setPerspective:function(E,x,y,S,C){return y===void 0&&(y=45),S===void 0&&(S=.01),C===void 0&&(C=1e3),this.projectionMatrix.perspective(l(y),E/x,S,C),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(E,x,y,S){return E===void 0&&(E=this.scene.sys.renderer.getAspectRatio()),x===void 0&&(x=1),y===void 0&&(y=-1e3),S===void 0&&(S=1e3),this.projectionMatrix.ortho(-E,E,-x,x,y,S),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(E){E.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(E,x,y,S,C,I,O,M,L){var P=this.scene.sys.cache.obj.get(E);return P&&n(P,this,x,y,S,C,I,O,M,L),this},sortByDepth:function(E,x){return E.depth-x.depth},depthSort:function(){return f(this.faces,this.sortByDepth),this},addVertex:function(E,x,y,S,C,I,O){var M=new v(E,x,y,S,C,I,O);return this.vertices.push(M),M},addFace:function(E,x,y){var S=new h(E,x,y);return this.faces.push(S),this.dirtyCache[9]=-1,S},addVertices:function(E,x,y,S,C,I,O){var M=s(E,x,y,S,C,I,O);return M&&(this.faces=this.faces.concat(M.faces),this.vertices=this.vertices.concat(M.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(E){return this.faces[E]},getFaceAt:function(E,x,y){y===void 0&&(y=this.scene.sys.cameras.main);for(var S=d(this,y).calc,C=this.faces,I=[],O=0;O<C.length;O++){var M=C[O];M.contains(E,x,S)&&I.push(M)}return f(I,this.sortByDepth)},setDebug:function(E,x){return this.debugGraphic=E,!E&&!x?this.debugCallback=null:x?this.debugCallback=x:this.debugCallback=this.renderDebug,this},isDirty:function(){var E=this.modelPosition,x=this.modelRotation,y=this.modelScale,S=this.dirtyCache,C=E.x,I=E.y,O=E.z,M=x.x,L=x.y,P=x.z,b=y.x,B=y.y,U=y.z,H=this.getFaceCount(),Y=S[0],j=S[1],_=S[2],w=S[3],D=S[4],N=S[5],G=S[6],k=S[7],V=S[8],X=S[9];return S[0]=C,S[1]=I,S[2]=O,S[3]=M,S[4]=L,S[5]=P,S[6]=b,S[7]=B,S[8]=U,S[9]=H,Y!==C||j!==I||_!==O||w!==M||D!==L||N!==P||G!==b||k!==B||V!==U||X!==H},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var E=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!E[10]&&!this.isDirty())){var x=this.width,y=this.height,S=this.viewMatrix,C=this.viewPosition;E[10]&&(S.identity(),S.translate(C),S.invert(),E[10]=0);var I=this.transformMatrix;I.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var O=C.z,M=this.faces,L=0;L<M.length;L++)M[L].transformCoordinatesLocal(I,x,y,O);this.depthSort()}},renderDebug:function(E,x){for(var y=E.debugGraphic,S=0;S<x.length;S++){var C=x[S],I=C.vertex1.tx,O=C.vertex1.ty,M=C.vertex2.tx,L=C.vertex2.ty,P=C.vertex3.tx,b=C.vertex3.ty;y.strokeTriangle(I,O,M,L,P,b)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});c.exports=m},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(50),g=function(l,h){return o(l.x,l.y,h.x,h.y)<=l.radius+h.radius};c.exports=g},function(c,R,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=e(233),l=function(h,i,s){if(s===void 0&&(s=[]),g(h,i)){var n=h.x1,d=h.y1,a=h.x2,u=h.y2,f=i.x,p=i.y,v=i.radius,m=a-n,E=u-d,x=n-f,y=d-p,S=m*m+E*E,C=2*(m*x+E*y),I=x*x+y*y-v*v,O=C*C-4*S*I,M,L;if(O===0){var P=-C/(2*S);M=n+P*m,L=d+P*E,P>=0&&P<=1&&s.push(new o(M,L))}else if(O>0){var b=(-C-Math.sqrt(O))/(2*S);M=n+b*m,L=d+b*E,b>=0&&b<=1&&s.push(new o(M,L));var B=(-C+Math.sqrt(O))/(2*S);M=n+B*m,L=d+B*E,B>=0&&B<=1&&s.push(new o(M,L))}}return s};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(66),g=e(4),l=new g,h=function(i,s,n){if(n===void 0&&(n=l),o(s,i.x1,i.y1))return n.x=i.x1,n.y=i.y1,!0;if(o(s,i.x2,i.y2))return n.x=i.x2,n.y=i.y2,!0;var d=i.x2-i.x1,a=i.y2-i.y1,u=s.x-i.x1,f=s.y-i.y1,p=d*d+a*a,v=d,m=a;if(p>0){var E=(u*d+f*a)/p;v*=E,m*=E}n.x=i.x1+v,n.y=i.y1+m;var x=v*v+m*m;return x<=p&&v*d+m*a>=0&&o(s,n.x,n.y)};c.exports=h},function(c,R,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=e(96),l=e(488),h=function(i,s,n){if(n===void 0&&(n=[]),l(i,s))for(var d=s.getLineA(),a=s.getLineB(),u=s.getLineC(),f=s.getLineD(),p=[new o,new o,new o,new o],v=[g(d,i,p[0]),g(a,i,p[1]),g(u,i,p[2]),g(f,i,p[3])],m=0;m<4;m++)v[m]&&n.push(p[m]);return n};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){l===void 0&&(l=!1),h===void 0&&(h=[]);for(var i=o.x3-o.x1,s=o.y3-o.y1,n=o.x2-o.x1,d=o.y2-o.y1,a=i*i+s*s,u=i*n+s*d,f=n*n+d*d,p=a*f-u*u,v=p===0?0:1/p,m,E,x,y,S,C,I=o.x1,O=o.y1,M=0;M<g.length&&(x=g[M].x-I,y=g[M].y-O,S=i*x+s*y,C=n*x+d*y,m=(f*S-u*C)*v,E=(a*C-u*S)*v,!(m>=0&&E>=0&&m+E<1&&(h.push({x:g[M].x,y:g[M].y}),l)));M++);return h};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=Math.cos(h),s=Math.sin(h),n=o.x1-g,d=o.y1-l;return o.x1=n*i-d*s+g,o.y1=n*s+d*i+l,n=o.x2-g,d=o.y2-l,o.x2=n*i-d*s+g,o.y2=n*s+d*i+l,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.height===0?NaN:o.width/o.height};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=Math.cos(h),s=Math.sin(h),n=o.x1-g,d=o.y1-l;return o.x1=n*i-d*s+g,o.y1=n*s+d*i+l,n=o.x2-g,d=o.y2-l,o.x2=n*i-d*s+g,o.y2=n*s+d*i+l,n=o.x3-g,d=o.y3-l,o.x3=n*i-d*s+g,o.y3=n*s+d*i+l,o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BUTTON_DOWN:e(1310),BUTTON_UP:e(1311),CONNECTED:e(1312),DISCONNECTED:e(1313),GAMEPAD_BUTTON_DOWN:e(1314),GAMEPAD_BUTTON_UP:e(1315)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(17),g=e(156),l=function(h,i){var s=h===void 0?g():o({},h);if(i)for(var n in i)i[n]!==void 0&&(s[n]=i[n]);return s};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=e(408),d=new o({Extends:l,initialize:function(u,f,p,v){var m="xml";if(s(f)){var E=f;f=i(E,"key"),p=i(E,"url"),v=i(E,"xhrSettings"),m=i(E,"extension",m)}var x={type:"xml",cache:u.cacheManager.xml,extension:m,responseType:"text",key:f,url:p,xhrSettings:v};l.call(this,u,x)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=n(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});h.register("xml",function(a,u,f){if(Array.isArray(a))for(var p=0;p<a.length;p++)this.addFile(new d(this,a[p]));else this.addFile(new d(this,a,u,f));return this}),c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=new o({Extends:l,initialize:function(a,u,f,p){var v="text",m="txt",E=a.cacheManager.text;if(s(u)){var x=u;u=i(x,"key"),f=i(x,"url"),p=i(x,"xhrSettings"),m=i(x,"extension",m),v=i(x,"type",v),E=i(x,"cache",E)}var y={type:v,cache:E,extension:m,responseType:"text",key:u,url:f,xhrSettings:p};l.call(this,a,y)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("text",function(d,a,u){if(Array.isArray(d))for(var f=0;f<d.length;f++)this.addFile(new n(this,d[f]));else this.addFile(new n(this,d,a,u));return this}),c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Acceleration:e(1368),Angular:e(1369),Bounce:e(1370),Debug:e(1371),Drag:e(1372),Enable:e(1373),Friction:e(1374),Gravity:e(1375),Immovable:e(1376),Mass:e(1377),OverlapCirc:e(523),OverlapRect:e(244),Pushable:e(1378),Size:e(1379),Velocity:e(1380)}},function(c,R){var e=function(o,g,l,h,i,s,n){s===void 0&&(s=!0),n===void 0&&(n=!1);var d=[],a=[],u=o.treeMinMax;if(u.minX=g,u.minY=l,u.maxX=g+h,u.maxY=l+i,n&&(a=o.staticTree.search(u)),s&&o.useTree)d=o.tree.search(u);else if(s){var f=o.bodies,p={position:{x:g,y:l},left:g,top:l,right:g+h,bottom:l+i,isCircle:!1},v=o.intersects;f.iterate(function(m){v(m,p)&&d.push(m)})}return a.concat(d)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={COLLIDE:e(1381),OVERLAP:e(1382),PAUSE:e(1383),RESUME:e(1384),TILE_COLLIDE:e(1385),TILE_OVERLAP:e(1386),WORLD_BOUNDS:e(1387),WORLD_STEP:e(1388)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(62),g=function(l,h,i,s){var n=0,d=l.deltaAbsX()+h.deltaAbsX()+s;return l._dx===0&&h._dx===0?(l.embedded=!0,h.embedded=!0):l._dx>h._dx?(n=l.right-h.x,n>d&&!i||l.checkCollision.right===!1||h.checkCollision.left===!1?n=0:(l.touching.none=!1,l.touching.right=!0,h.touching.none=!1,h.touching.left=!0,h.physicsType===o.STATIC_BODY&&!i&&(l.blocked.none=!1,l.blocked.right=!0),l.physicsType===o.STATIC_BODY&&!i&&(h.blocked.none=!1,h.blocked.left=!0))):l._dx<h._dx&&(n=l.x-h.width-h.x,-n>d&&!i||l.checkCollision.left===!1||h.checkCollision.right===!1?n=0:(l.touching.none=!1,l.touching.left=!0,h.touching.none=!1,h.touching.right=!0,h.physicsType===o.STATIC_BODY&&!i&&(l.blocked.none=!1,l.blocked.left=!0),l.physicsType===o.STATIC_BODY&&!i&&(h.blocked.none=!1,h.blocked.right=!0))),l.overlapX=n,h.overlapX=n,n};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(62),g=function(l,h,i,s){var n=0,d=l.deltaAbsY()+h.deltaAbsY()+s;return l._dy===0&&h._dy===0?(l.embedded=!0,h.embedded=!0):l._dy>h._dy?(n=l.bottom-h.y,n>d&&!i||l.checkCollision.down===!1||h.checkCollision.up===!1?n=0:(l.touching.none=!1,l.touching.down=!0,h.touching.none=!1,h.touching.up=!0,h.physicsType===o.STATIC_BODY&&!i&&(l.blocked.none=!1,l.blocked.down=!0),l.physicsType===o.STATIC_BODY&&!i&&(h.blocked.none=!1,h.blocked.up=!0))):l._dy<h._dy&&(n=l.y-h.bottom,-n>d&&!i||l.checkCollision.up===!1||h.checkCollision.down===!1?n=0:(l.touching.none=!1,l.touching.up=!0,h.touching.none=!1,h.touching.down=!0,h.physicsType===o.STATIC_BODY&&!i&&(l.blocked.none=!1,l.blocked.up=!0),l.physicsType===o.STATIC_BODY&&!i&&(h.blocked.none=!1,h.blocked.down=!0))),l.overlapY=n,h.overlapY=n,n};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return!(g.right<=o.left||g.bottom<=o.top||g.position.x>=o.right||g.position.y>=o.bottom)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Bounce:e(1495),Collision:e(1496),Force:e(1497),Friction:e(1498),Gravity:e(1499),Mass:e(1500),Sensor:e(1501),SetBody:e(1502),Sleep:e(1503),Static:e(1520),Transform:e(1521),Velocity:e(1522)}},function(c,R){var e={};c.exports=e,function(){e.create=function(o,g){var l=o.bodyA,h=o.bodyB,i={id:e.id(l,h),bodyA:l,bodyB:h,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:l.isSensor||h.isSensor,timeCreated:g,timeUpdated:g,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(i,o,g),i},e.update=function(o,g,l){if(o.collision=g,g.collided){var h=g.supports,i=o.activeContacts,s=g.parentA,n=g.parentB;o.inverseMass=s.inverseMass+n.inverseMass,o.friction=Math.min(s.friction,n.friction),o.frictionStatic=Math.max(s.frictionStatic,n.frictionStatic),o.restitution=Math.max(s.restitution,n.restitution),o.slop=Math.max(s.slop,n.slop);for(var d=0;d<h.length;d++)i[d]=h[d].contact;var a=h.length;a<i.length&&(i.length=a),o.separation=g.depth,e.setActive(o,!0,l)}else o.isActive===!0&&e.setActive(o,!1,l)},e.setActive=function(o,g,l){g?(o.isActive=!0,o.timeUpdated=l):(o.isActive=!1,o.activeContacts.length=0)},e.id=function(o,g){return o.id<g.id?"A"+o.id+"B"+g.id:"A"+g.id+"B"+o.id}}()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CalculateFacesAt:e(252),CalculateFacesWithin:e(63),CheckIsoBounds:e(541),Copy:e(1420),CreateFromTiles:e(1421),CullBounds:e(543),CullTiles:e(544),Fill:e(1422),FilterTiles:e(1423),FindByIndex:e(1424),FindTile:e(1425),ForEachTile:e(1426),GetCullTilesFunction:e(1427),GetTileAt:e(158),GetTileAtWorldXY:e(1428),GetTilesWithin:e(26),GetTilesWithinShape:e(1429),GetTilesWithinWorldXY:e(529),GetTileToWorldXFunction:e(1430),GetTileToWorldXYFunction:e(1431),GetTileToWorldYFunction:e(1432),GetWorldToTileXFunction:e(1433),GetWorldToTileXYFunction:e(1434),GetWorldToTileYFunction:e(1435),HasTileAt:e(562),HasTileAtWorldXY:e(1436),HexagonalCullBounds:e(546),HexagonalCullTiles:e(545),HexagonalTileToWorldXY:e(550),HexagonalTileToWorldY:e(554),HexagonalWorldToTileXY:e(556),HexagonalWorldToTileY:e(560),IsInLayerBounds:e(119),IsometricCullTiles:e(547),IsometricTileToWorldXY:e(551),IsometricWorldToTileXY:e(557),PutTileAt:e(257),PutTileAtWorldXY:e(1437),PutTilesAt:e(1438),Randomize:e(1439),RemoveTileAt:e(563),RemoveTileAtWorldXY:e(1440),RenderDebug:e(1441),ReplaceByIndex:e(542),RunCull:e(159),SetCollision:e(1442),SetCollisionBetween:e(1443),SetCollisionByExclusion:e(1444),SetCollisionByProperty:e(1445),SetCollisionFromCollisionGroup:e(1446),SetLayerCollisionIndex:e(160),SetTileCollision:e(72),SetTileIndexCallback:e(1447),SetTileLocationCallback:e(1448),Shuffle:e(1449),StaggeredCullBounds:e(549),StaggeredCullTiles:e(548),StaggeredTileToWorldXY:e(552),StaggeredTileToWorldY:e(555),StaggeredWorldToTileXY:e(558),StaggeredWorldToTileY:e(561),SwapByIndex:e(1450),TileToWorldX:e(253),TileToWorldXY:e(553),TileToWorldY:e(254),WeightedRandomize:e(1451),WorldToTileX:e(255),WorldToTileXY:e(559),WorldToTileY:e(256)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(158),g=function(l,h,i){var s=o(l,h,!0,i),n=o(l,h-1,!0,i),d=o(l,h+1,!0,i),a=o(l-1,h,!0,i),u=o(l+1,h,!0,i),f=s&&s.collides;return f&&(s.faceTop=!0,s.faceBottom=!0,s.faceLeft=!0,s.faceRight=!0),n&&n.collides&&(f&&(s.faceTop=!1),n.faceBottom=!f),d&&d.collides&&(f&&(s.faceBottom=!1),d.faceTop=!f),a&&a.collides&&(f&&(s.faceLeft=!1),a.faceRight=!f),u&&u.collides&&(f&&(s.faceRight=!1),u.faceLeft=!f),s&&!s.collides&&s.resetFaces(),s};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=l.baseTileWidth,i=l.tilemapLayer,s=0;return i&&(g||(g=i.scene.cameras.main),s=i.x+g.scrollX*(1-i.scrollFactorX),h*=i.scaleX),s+o*h};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=l.baseTileHeight,i=l.tilemapLayer,s=0;return i&&(g||(g=i.scene.cameras.main),s=i.y+g.scrollY*(1-i.scrollFactorY),h*=i.scaleY),s+o*h};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){g===void 0&&(g=!0);var i=h.baseTileWidth,s=h.tilemapLayer;return s&&(l||(l=s.scene.cameras.main),o=o-(s.x+l.scrollX*(1-s.scrollFactorX)),i*=s.scaleX),g?Math.floor(o/i):o/i};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){g===void 0&&(g=!0);var i=h.baseTileHeight,s=h.tilemapLayer;return s&&(l||(l=s.scene.cameras.main),o=o-(s.y+l.scrollY*(1-s.scrollFactorY)),i*=s.scaleY),g?Math.floor(o/i):o/i};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(85),g=e(119),l=e(252),h=e(72),i=function(s,n,d,a,u){if(a===void 0&&(a=!0),!g(n,d,u))return null;var f=u.data[d][n],p=f&&f.collides;if(s instanceof o)u.data[d][n]===null&&(u.data[d][n]=new o(u,s.index,n,d,u.tileWidth,u.tileHeight)),u.data[d][n].copy(s);else{var v=s;u.data[d][n]===null?u.data[d][n]=new o(u,v,n,d,u.tileWidth,u.tileHeight):u.data[d][n].index=v}var m=u.data[d][n],E=u.collideIndexes.indexOf(m.index)!==-1;return h(m,E),a&&p!==m.collides&&l(n,d,u),m};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(29),g=function(l){return l=l.toLowerCase(),l==="isometric"?o.ISOMETRIC:l==="staggered"?o.STAGGERED:l==="hexagonal"?o.HEXAGONAL:o.ORTHOGONAL};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(40),g=e(120),l=e(121),h=e(85),i=function(s,n,d,a,u){for(var f=new g({tileWidth:d,tileHeight:a}),p=new l({name:s,tileWidth:d,tileHeight:a,format:o.ARRAY_2D,layers:[f]}),v=[],m=n.length,E=0,x=0;x<n.length;x++){v[x]=[];for(var y=n[x],S=0;S<y.length;S++){var C=parseInt(y[S],10);isNaN(C)||C===-1?v[x][S]=u?null:new h(f,-1,S,x,d,a):v[x][S]=new h(f,C,S,x,d,a)}E===0&&(E=y.length)}return p.width=f.width=E,p.height=f.height=m,p.widthInPixels=f.widthInPixels=E*d,p.heightInPixels=f.heightInPixels=m*a,f.data=v,p};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(571),g=e(261),l=function(s){return{x:s.x,y:s.y}},h=["id","name","type","rotation","properties","visible","x","y","width","height"],i=function(s,n,d){n===void 0&&(n=0),d===void 0&&(d=0);var a=o(s,h);if(a.x+=n,a.y+=d,s.gid){var u=g(s.gid);a.gid=u.gid,a.flippedHorizontal=u.flippedHorizontal,a.flippedVertical=u.flippedVertical,a.flippedAntiDiagonal=u.flippedAntiDiagonal}else s.polyline?a.polyline=s.polyline.map(l):s.polygon?a.polygon=s.polygon.map(l):s.ellipse?a.ellipse=s.ellipse:s.text?a.text=s.text:s.point?a.point=!0:a.rectangle=!0;return a};c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=2147483648,o=1073741824,g=536870912,l=function(h){var i=Boolean(h&e),s=Boolean(h&o),n=Boolean(h&g);h=h&~(e|o|g);var d=0,a=!1;return i&&s&&n?(d=Math.PI/2,a=!0):i&&s&&!n?(d=Math.PI,a=!1):i&&!s&&n?(d=Math.PI/2,a=!1):i&&!s&&!n?(d=0,a=!0):!i&&s&&n?(d=3*Math.PI/2,a=!1):!i&&s&&!n?(d=Math.PI,a=!0):!i&&!s&&n?(d=3*Math.PI/2,a=!0):!i&&!s&&!n&&(d=0,a=!1),{gid:h,flippedHorizontal:i,flippedVertical:s,flippedAntiDiagonal:n,rotation:d,flipped:a}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(40),g=e(121),l=e(564),h=e(580),i=function(s,n,d,a,u,f,p,v){d===void 0&&(d=32),a===void 0&&(a=32),u===void 0&&(u=10),f===void 0&&(f=10),v===void 0&&(v=!1);var m=null;if(Array.isArray(p)){var E=n!==void 0?n:"map";m=l(E,o.ARRAY_2D,p,d,a,v)}else if(n!==void 0){var x=s.cache.tilemap.get(n);x?m=l(n,x.format,x.data,d,a,v):console.warn("No map data found for key "+n)}return m===null&&(m=new g({tileWidth:d,tileHeight:a,width:u,height:f})),new h(s,m)};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(6),g=function(l){var h=o(l,"targets",null);return h===null||(typeof h=="function"&&(h=h.call()),Array.isArray(h)||(h=[h])),h};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(i){return!!i.getActive&&typeof i.getActive=="function"}function o(i){return!!i.getStart&&typeof i.getStart=="function"}function g(i){return!!i.getEnd&&typeof i.getEnd=="function"}function l(i){return o(i)||g(i)||e(i)}var h=function(i,s){var n,d=function(C,I,O){return O},a=function(C,I,O){return O},u=null,f=typeof s;if(f==="number")d=function(){return s};else if(f==="string"){var p=s[0],v=parseFloat(s.substr(2));switch(p){case"+":d=function(C,I,O){return O+v};break;case"-":d=function(C,I,O){return O-v};break;case"*":d=function(C,I,O){return O*v};break;case"/":d=function(C,I,O){return O/v};break;default:d=function(){return parseFloat(s)}}}else if(f==="function")d=s;else if(f==="object")if(l(s))e(s)&&(u=s.getActive),g(s)&&(d=s.getEnd),o(s)&&(a=s.getStart);else if(s.hasOwnProperty("value"))n=h(i,s.value);else{var m=s.hasOwnProperty("to"),E=s.hasOwnProperty("from"),x=s.hasOwnProperty("start");if(m&&(E||x)){if(n=h(i,s.to),x){var y=h(i,s.start);n.getActive=y.getEnd}if(E){var S=h(i,s.from);n.getStart=S.getEnd}}}return n||(n={getActive:u,getEnd:d,getStart:a}),n};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(9),l=e(267),h=e(16),i=e(5),s=e(100),n=e(14),d=new o({Extends:g,initialize:function(u,f,p){g.call(this),this.parent=u,this.parentIsTimeline=u.hasOwnProperty("isTimeline"),this.data=f,this.totalData=f.length,this.targets=p,this.totalTargets=p.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=s.PENDING_ADD,this._pausedState=s.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(a){return a===void 0&&(a=0),this.data[a].current},setTimeScale:function(a){return this.timeScale=a,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===s.ACTIVE},isPaused:function(){return this.state===s.PAUSED},hasTarget:function(a){return this.targets.indexOf(a)!==-1},updateTo:function(a,u,f){f===void 0&&(f=!1);for(var p=0;p<this.totalData;p++){var v=this.data[p];v.key===a&&(v.end=u,f&&(v.start=v.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===s.ACTIVE?this.seek(0):this.state===s.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===s.PENDING_ADD?this:this.play()},calcDuration:function(){for(var a=0,u=n.MAX_SAFE_INTEGER,f=this.data,p=0;p<this.totalData;p++){var v=f[p];v.t1=v.duration+v.hold,v.yoyo&&(v.t1+=v.duration),v.t2=v.t1+v.repeatDelay,v.totalDuration=v.delay+v.t1,v.repeat===-1?v.totalDuration+=v.t2*999999999999:v.repeat>0&&(v.totalDuration+=v.t2*v.repeat),v.totalDuration>a&&(a=v.totalDuration),v.delay<u&&(u=v.delay)}this.duration=Math.max(a,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=u},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=s.PENDING_ADD,this._pausedState=s.INIT,!1;for(var a=this.data,u=this.totalTargets,f=0;f<this.totalData;f++){var p=a[f],v=p.target,m=p.gen,E=p.key,x=p.index;p.delay=m.delay(v,E,0,x,u,this),p.duration=Math.max(m.duration(v,E,0,x,u,this),.001),p.hold=m.hold(v,E,0,x,u,this),p.repeat=m.repeat(v,E,0,x,u,this),p.repeatDelay=m.repeatDelay(v,E,0,x,u,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=s.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(l.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=s.LOOP_DELAY):(this.state=s.ACTIVE,this.dispatchTweenEvent(l.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=s.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=s.PENDING_REMOVE,this.dispatchTweenEvent(l.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===s.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=s.PAUSED,this)},play:function(a){a===void 0&&(a=!1);var u=this.state;return u===s.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=s.ACTIVE,this):u===s.ACTIVE||u===s.PENDING_ADD&&this._pausedState===s.PENDING_ADD?this:!this.parentIsTimeline&&(u===s.PENDING_REMOVE||u===s.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(a),this.calculatedOffset===0?this.state=s.ACTIVE:(this.countdown=this.calculatedOffset,this.state=s.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(a),this.state=s.ACTIVE,this.makeActive()),this)},resetTweenData:function(a){for(var u=this.data,f=this.totalData,p=this.totalTargets,v=0;v<f;v++){var m=u[v],E=m.target,x=m.key,y=m.index;m.progress=0,m.elapsed=0,m.repeatCounter=m.repeat===-1?999999999999:m.repeat,a?(m.start=m.getStartValue(E,x,m.start,y,p,this),m.end=m.getEndValue(E,x,m.end,y,p,this),m.current=m.start,m.state=s.PLAYING_FORWARD):m.state=s.PENDING_RENDER,m.delay>0&&(m.elapsed=m.delay,m.state=s.DELAY),m.getActiveValue&&(E[x]=m.getActiveValue(m.target,m.key,m.start))}},resume:function(){return this.state===s.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(a,u){u===void 0&&(u=16.6),this.state===s.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var f=this.data,p=this.totalTargets,v=0;v<this.totalData;v++){var m=f[v],E=m.target,x=m.gen,y=m.key,S=m.index;m.progress=0,m.elapsed=0,m.repeatCounter=m.repeat===-1?999999999999:m.repeat,m.delay=x.delay(E,y,0,S,p,this),m.duration=Math.max(x.duration(E,y,0,S,p,this),.001),m.hold=x.hold(E,y,0,S,p,this),m.repeat=x.repeat(E,y,0,S,p,this),m.repeatDelay=x.repeatDelay(E,y,0,S,p,this),m.current=m.start,m.state=s.PLAYING_FORWARD,this.updateTweenData(this,m,0,S,p),m.delay>0&&(m.elapsed=m.delay,m.state=s.DELAY)}this.calcDuration();var C=!1;this.state===s.PAUSED&&(C=!0,this.state=s.ACTIVE),this.isSeeking=!0;do this.update(0,u);while(this.totalProgress<a);return this.isSeeking=!1,C&&(this.state=s.PAUSED),this},setCallback:function(a,u,f,p){return this.callbacks[a]={func:u,scope:p,params:f},this},complete:function(a){return a===void 0&&(a=0),a?(this.state=s.COMPLETE_DELAY,this.countdown=a):(this.state=s.PENDING_REMOVE,this.dispatchTweenEvent(l.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(a){return this.state===s.ACTIVE&&a!==void 0&&this.seek(a),this.state!==s.REMOVED&&((this.state===s.PAUSED||this.state===s.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(l.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=s.PENDING_REMOVE),this},update:function(a,u){if(this.state===s.PAUSED)return!1;switch(this.useFrames&&(u=1*this.parent.timeScale),u*=this.timeScale,this.elapsed+=u,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=u,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case s.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=u,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(l.TWEEN_START,this.callbacks.onStart)));for(var f=!1,p=0;p<this.totalData;p++){var v=this.data[p];this.updateTweenData(this,v,u)&&(f=!0)}f||this.nextState();break;case s.LOOP_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=s.ACTIVE,this.dispatchTweenEvent(l.TWEEN_LOOP,this.callbacks.onLoop));break;case s.OFFSET_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=s.ACTIVE);break;case s.COMPLETE_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=s.PENDING_REMOVE,this.dispatchTweenEvent(l.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===s.PENDING_REMOVE},dispatchTweenDataEvent:function(a,u,f){this.isSeeking||(this.emit(a,this,f.key,f.target,f.current,f.previous),u&&(u.params[1]=f.target,u.func.apply(u.scope,u.params)))},dispatchTweenEvent:function(a,u){this.isSeeking||(this.emit(a,this,this.targets),u&&(u.params[1]=this.targets,u.func.apply(u.scope,u.params)))},setStateFromEnd:function(a,u,f){return u.yoyo?(u.elapsed=f,u.progress=f/u.duration,u.flipX&&u.target.toggleFlipX(),u.flipY&&u.target.toggleFlipY(),this.dispatchTweenDataEvent(l.TWEEN_YOYO,a.callbacks.onYoyo,u),u.start=u.getStartValue(u.target,u.key,u.start,u.index,a.totalTargets,a),s.PLAYING_BACKWARD):u.repeatCounter>0?(u.repeatCounter--,u.elapsed=f,u.progress=f/u.duration,u.flipX&&u.target.toggleFlipX(),u.flipY&&u.target.toggleFlipY(),u.start=u.getStartValue(u.target,u.key,u.start,u.index,a.totalTargets,a),u.end=u.getEndValue(u.target,u.key,u.start,u.index,a.totalTargets,a),u.repeatDelay>0?(u.elapsed=u.repeatDelay-f,u.current=u.start,u.target[u.key]=u.current,s.REPEAT_DELAY):(this.dispatchTweenDataEvent(l.TWEEN_REPEAT,a.callbacks.onRepeat,u),s.PLAYING_FORWARD)):s.COMPLETE},setStateFromStart:function(a,u,f){return u.repeatCounter>0?(u.repeatCounter--,u.elapsed=f,u.progress=f/u.duration,u.flipX&&u.target.toggleFlipX(),u.flipY&&u.target.toggleFlipY(),u.end=u.getEndValue(u.target,u.key,u.start,u.index,a.totalTargets,a),u.repeatDelay>0?(u.elapsed=u.repeatDelay-f,u.current=u.start,u.target[u.key]=u.current,s.REPEAT_DELAY):(this.dispatchTweenDataEvent(l.TWEEN_REPEAT,a.callbacks.onRepeat,u),s.PLAYING_FORWARD)):s.COMPLETE},updateTweenData:function(a,u,f){var p=u.target;switch(u.state){case s.PLAYING_FORWARD:case s.PLAYING_BACKWARD:if(!p){u.state=s.COMPLETE;break}var v=u.elapsed,m=u.duration,E=0;v+=f,v>m&&(E=v-m,v=m);var x=u.state===s.PLAYING_FORWARD,y=v/m;if(u.elapsed=v,u.progress=y,u.previous=u.current,y===1)x?(u.current=u.end,p[u.key]=u.end,u.hold>0?(u.elapsed=u.hold-E,u.state=s.HOLD_DELAY):u.state=this.setStateFromEnd(a,u,E)):(u.current=u.start,p[u.key]=u.start,u.state=this.setStateFromStart(a,u,E));else{var S=x?u.ease(y):u.ease(1-y);u.current=u.start+(u.end-u.start)*S,p[u.key]=u.current}this.dispatchTweenDataEvent(l.TWEEN_UPDATE,a.callbacks.onUpdate,u);break;case s.DELAY:u.elapsed-=f,u.elapsed<=0&&(u.elapsed=Math.abs(u.elapsed),u.state=s.PENDING_RENDER);break;case s.REPEAT_DELAY:u.elapsed-=f,u.elapsed<=0&&(u.elapsed=Math.abs(u.elapsed),u.state=s.PLAYING_FORWARD,this.dispatchTweenDataEvent(l.TWEEN_REPEAT,a.callbacks.onRepeat,u));break;case s.HOLD_DELAY:u.elapsed-=f,u.elapsed<=0&&(u.state=this.setStateFromEnd(a,u,Math.abs(u.elapsed)));break;case s.PENDING_RENDER:p?(u.start=u.getStartValue(p,u.key,p[u.key],u.index,a.totalTargets,a),u.end=u.getEndValue(p,u.key,u.start,u.index,a.totalTargets,a),u.current=u.start,p[u.key]=u.start,u.state=s.PLAYING_FORWARD):u.state=s.COMPLETE;break}return u.state!==s.COMPLETE}});d.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],i.register("tween",function(a){return this.scene.sys.tweens.add(a)}),h.register("tween",function(a){return this.scene.sys.tweens.create(a)}),c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={TIMELINE_COMPLETE:e(1466),TIMELINE_LOOP:e(1467),TIMELINE_PAUSE:e(1468),TIMELINE_RESUME:e(1469),TIMELINE_START:e(1470),TIMELINE_UPDATE:e(1471),TWEEN_ACTIVE:e(1472),TWEEN_COMPLETE:e(1473),TWEEN_LOOP:e(1474),TWEEN_REPEAT:e(1475),TWEEN_START:e(1476),TWEEN_STOP:e(1477),TWEEN_UPDATE:e(1478),TWEEN_YOYO:e(1479)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i,s,n,d,a,u,f,p,v,m,E){return{target:o,index:g,key:l,getActiveValue:s,getEndValue:h,getStartValue:i,ease:n,duration:0,totalDuration:0,delay:0,yoyo:u,hold:0,repeat:0,repeatDelay:0,flipX:m,flipY:E,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:d,duration:a,hold:f,repeat:p,repeatDelay:v},state:0}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(68),g=function(l){return o(l,-Math.PI,Math.PI)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(68),g=function(l){return o(l,-180,180)};c.exports=g},function(c,R,e){var o={};c.exports=o;var g=e(83),l=e(32);(function(){o.fromVertices=function(h){for(var i={},s=0;s<h.length;s++){var n=(s+1)%h.length,d=g.normalise({x:h[n].y-h[s].y,y:h[s].x-h[n].x}),a=d.y===0?1/0:d.x/d.y;a=a.toFixed(3).toString(),i[a]=d}return l.values(i)},o.rotate=function(h,i){if(i!==0)for(var s=Math.cos(i),n=Math.sin(i),d=0;d<h.length;d++){var a=h[d],u;u=a.x*s-a.y*n,a.y=a.x*n+a.y*s,a.x=u}}})()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AFTER_ADD:e(1504),AFTER_REMOVE:e(1505),AFTER_UPDATE:e(1506),BEFORE_ADD:e(1507),BEFORE_REMOVE:e(1508),BEFORE_UPDATE:e(1509),COLLISION_ACTIVE:e(1510),COLLISION_END:e(1511),COLLISION_START:e(1512),DRAG_END:e(1513),DRAG:e(1514),DRAG_START:e(1515),PAUSE:e(1516),RESUME:e(1517),SLEEP_END:e(1518),SLEEP_START:e(1519)}},function(c,R,e){var o={};c.exports=o;var g=e(274),l=e(250),h=e(84);(function(){o.collisions=function(i,s){for(var n=[],d=s.pairs.table,a=s.metrics,u=0;u<i.length;u++){var f=i[u][0],p=i[u][1];if(!((f.isStatic||f.isSleeping)&&(p.isStatic||p.isSleeping))&&!!o.canCollide(f.collisionFilter,p.collisionFilter)&&(a.midphaseTests+=1,h.overlaps(f.bounds,p.bounds)))for(var v=f.parts.length>1?1:0;v<f.parts.length;v++)for(var m=f.parts[v],E=p.parts.length>1?1:0;E<p.parts.length;E++){var x=p.parts[E];if(m===f&&x===p||h.overlaps(m.bounds,x.bounds)){var y=l.id(m,x),S=d[y],C;S&&S.isActive?C=S.collision:C=null;var I=g.collides(m,x,C);a.narrowphaseTests+=1,I.reused&&(a.narrowReuseCount+=1),I.collided&&(n.push(I),a.narrowDetections+=1)}}}return n},o.canCollide=function(i,s){return i.group===s.group&&i.group!==0?i.group>0:(i.mask&s.category)!==0&&(s.mask&i.category)!==0}})()},function(c,R,e){var o={};c.exports=o;var g=e(64),l=e(83);(function(){o.collides=function(h,i,s){var n,d,a,u,f=!1;if(s){var p=h.parent,v=i.parent,m=p.speed*p.speed+p.angularSpeed*p.angularSpeed+v.speed*v.speed+v.angularSpeed*v.angularSpeed;f=s&&s.collided&&m<.2,u=s}else u={collided:!1,bodyA:h,bodyB:i};if(s&&f){var E=u.axisBody,x=E===h?i:h,y=[E.axes[s.axisNumber]];if(a=o._overlapAxes(E.vertices,x.vertices,y),u.reused=!0,a.overlap<=0)return u.collided=!1,u}else{if(n=o._overlapAxes(h.vertices,i.vertices,h.axes),n.overlap<=0||(d=o._overlapAxes(i.vertices,h.vertices,i.axes),d.overlap<=0))return u.collided=!1,u;n.overlap<d.overlap?(a=n,u.axisBody=h):(a=d,u.axisBody=i),u.axisNumber=a.axisNumber}u.bodyA=h.id<i.id?h:i,u.bodyB=h.id<i.id?i:h,u.collided=!0,u.depth=a.overlap,u.parentA=u.bodyA.parent,u.parentB=u.bodyB.parent,h=u.bodyA,i=u.bodyB,l.dot(a.axis,l.sub(i.position,h.position))<0?u.normal={x:a.axis.x,y:a.axis.y}:u.normal={x:-a.axis.x,y:-a.axis.y},u.tangent=l.perp(u.normal),u.penetration=u.penetration||{},u.penetration.x=u.normal.x*u.depth,u.penetration.y=u.normal.y*u.depth;var S=o._findSupports(h,i,u.normal),C=[];if(g.contains(h.vertices,S[0])&&C.push(S[0]),g.contains(h.vertices,S[1])&&C.push(S[1]),C.length<2){var I=o._findSupports(i,h,l.neg(u.normal));g.contains(i.vertices,I[0])&&C.push(I[0]),C.length<2&&g.contains(i.vertices,I[1])&&C.push(I[1])}return C.length<1&&(C=[S[0]]),u.supports=C,u},o._overlapAxes=function(h,i,s){for(var n=l._temp[0],d=l._temp[1],a={overlap:Number.MAX_VALUE},u,f,p=0;p<s.length;p++){if(f=s[p],o._projectToAxis(n,h,f),o._projectToAxis(d,i,f),u=Math.min(n.max-d.min,d.max-n.min),u<=0)return a.overlap=u,a;u<a.overlap&&(a.overlap=u,a.axis=f,a.axisNumber=p)}return a},o._projectToAxis=function(h,i,s){for(var n=l.dot(i[0],s),d=n,a=1;a<i.length;a+=1){var u=l.dot(i[a],s);u>d?d=u:u<n&&(n=u)}h.min=n,h.max=d},o._findSupports=function(h,i,s){for(var n=Number.MAX_VALUE,d=l._temp[0],a=i.vertices,u=h.position,f,p,v,m,E=0;E<a.length;E++)p=a[E],d.x=p.x-u.x,d.y=p.y-u.y,f=-l.dot(s,d),f<n&&(n=f,v=p);var x=v.index-1>=0?v.index-1:a.length-1;p=a[x],d.x=p.x-u.x,d.y=p.y-u.y,n=-l.dot(s,d),m=p;var y=(v.index+1)%a.length;return p=a[y],d.x=p.x-u.x,d.y=p.y-u.y,f=-l.dot(s,d),f<n&&(m=p),[v,m]}})()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AlignTo:e(601),Angle:e(602),Call:e(603),GetFirst:e(604),GetLast:e(605),GridAlign:e(606),IncAlpha:e(678),IncX:e(679),IncXY:e(680),IncY:e(681),PlaceOnCircle:e(682),PlaceOnEllipse:e(683),PlaceOnLine:e(684),PlaceOnRectangle:e(685),PlaceOnTriangle:e(686),PlayAnimation:e(687),PropertyValueInc:e(46),PropertyValueSet:e(27),RandomCircle:e(688),RandomEllipse:e(689),RandomLine:e(690),RandomRectangle:e(691),RandomTriangle:e(692),Rotate:e(693),RotateAround:e(694),RotateAroundDistance:e(695),ScaleX:e(696),ScaleXY:e(697),ScaleY:e(698),SetAlpha:e(699),SetBlendMode:e(700),SetDepth:e(701),SetHitArea:e(702),SetOrigin:e(703),SetRotation:e(704),SetScale:e(705),SetScaleX:e(706),SetScaleY:e(707),SetScrollFactor:e(708),SetScrollFactorX:e(709),SetScrollFactorY:e(710),SetTint:e(711),SetVisible:e(712),SetX:e(713),SetXY:e(714),SetY:e(715),ShiftPosition:e(716),Shuffle:e(717),SmootherStep:e(718),SmoothStep:e(719),Spread:e(720),ToggleVisible:e(721),WrapInRectangle:e(722)}},function(c,R,e){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(123),g=[];g[o.BOTTOM_CENTER]=e(277),g[o.BOTTOM_LEFT]=e(278),g[o.BOTTOM_RIGHT]=e(279),g[o.LEFT_BOTTOM]=e(280),g[o.LEFT_CENTER]=e(281),g[o.LEFT_TOP]=e(282),g[o.RIGHT_BOTTOM]=e(283),g[o.RIGHT_CENTER]=e(284),g[o.RIGHT_TOP]=e(285),g[o.TOP_CENTER]=e(286),g[o.TOP_LEFT]=e(287),g[o.TOP_RIGHT]=e(288);var l=function(h,i,s,n,d){return g[s](h,i,n,d)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(42),g=e(87),l=e(88),h=e(52),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(s,g(n)+d),h(s,o(n)+a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(42),g=e(43),l=e(53),h=e(52),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(s,g(n)-d),h(s,o(n)+a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(42),g=e(44),l=e(54),h=e(52),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(s,g(n)+d),h(s,o(n)+a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(42),g=e(43),l=e(55),h=e(54),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),h(s,g(n)-d),l(s,o(n)+a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(89),g=e(43),l=e(90),h=e(54),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),h(s,g(n)-d),l(s,o(n)+a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(43),g=e(45),l=e(54),h=e(52),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(s,o(n)-d),h(s,g(n)-a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(42),g=e(44),l=e(55),h=e(53),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),h(s,g(n)+d),l(s,o(n)+a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(89),g=e(44),l=e(90),h=e(53),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),h(s,g(n)+d),l(s,o(n)+a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(44),g=e(45),l=e(53),h=e(52),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(s,o(n)+d),h(s,g(n)-a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(87),g=e(45),l=e(55),h=e(88),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),h(s,o(n)+d),l(s,g(n)-a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(43),g=e(45),l=e(55),h=e(53),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),h(s,o(n)-d),l(s,g(n)-a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(44),g=e(45),l=e(55),h=e(54),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),h(s,o(n)+d),l(s,g(n)-a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(123),g=[];g[o.BOTTOM_CENTER]=e(290),g[o.BOTTOM_LEFT]=e(291),g[o.BOTTOM_RIGHT]=e(292),g[o.CENTER]=e(293),g[o.LEFT_CENTER]=e(295),g[o.RIGHT_CENTER]=e(296),g[o.TOP_CENTER]=e(297),g[o.TOP_LEFT]=e(298),g[o.TOP_RIGHT]=e(299),g[o.LEFT_BOTTOM]=g[o.BOTTOM_LEFT],g[o.LEFT_TOP]=g[o.TOP_LEFT],g[o.RIGHT_BOTTOM]=g[o.BOTTOM_RIGHT],g[o.RIGHT_TOP]=g[o.TOP_RIGHT];var l=function(h,i,s,n,d){return g[s](h,i,n,d)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(42),g=e(87),l=e(55),h=e(88),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),h(s,g(n)+d),l(s,o(n)+a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(42),g=e(43),l=e(55),h=e(53),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),h(s,g(n)-d),l(s,o(n)+a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(42),g=e(44),l=e(55),h=e(54),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),h(s,g(n)+d),l(s,o(n)+a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(294),g=e(87),l=e(89),h=function(i,s,n,d){return n===void 0&&(n=0),d===void 0&&(d=0),o(i,g(s)+n,l(s)+d),i};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(88),g=e(90),l=function(h,i,s){return o(h,i),g(h,s)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(89),g=e(43),l=e(90),h=e(53),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),h(s,g(n)-d),l(s,o(n)+a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(89),g=e(44),l=e(90),h=e(54),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),h(s,g(n)+d),l(s,o(n)+a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(87),g=e(45),l=e(88),h=e(52),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(s,o(n)+d),h(s,g(n)-a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(43),g=e(45),l=e(53),h=e(52),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(s,o(n)-d),h(s,g(n)-a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(44),g=e(45),l=e(54),h=e(52),i=function(s,n,d,a){return d===void 0&&(d=0),a===void 0&&(a=0),l(s,o(n)+d),h(s,g(n)-a),s};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(169),g=e(98),l=e(14),h=e(4),i=function(s,n,d){d===void 0&&(d=new h);var a=g(n,0,l.PI2);return o(s,a,d)};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(302),g=e(169),l=e(98),h=e(14),i=function(s,n,d,a){a===void 0&&(a=[]),!n&&d>0&&(n=o(s)/d);for(var u=0;u<n;u++){var f=l(u/n,0,h.PI2);a.push(g(s,f))}return a};c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return 2*(Math.PI*o.radius)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(18),g=2,l={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h){return h===void 0&&(h=1),this.alpha=h,this},alpha:{get:function(){return this._alpha},set:function(h){var i=o(h,0,1);this._alpha=i,i===0?this.renderFlags&=~g:this.renderFlags|=g}}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(35),g={_blendMode:o.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(l){typeof l=="string"&&(l=o[l]),l|=0,l>=-1&&(this._blendMode=l)}},setBlendMode:function(l){return this.blendMode=l,this}};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={_depth:0,depth:{get:function(){return this._depth},set:function(o){this.displayList&&this.displayList.queueDepthSort(),this._depth=o}},setDepth:function(o){return o===void 0&&(o=0),this.depth=o,this}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(171),g=e(130),l=function(h,i,s,n){n===void 0&&(n=[]),!i&&s>0&&(i=g(h)/s);for(var d=0;d<i;d++){var a=d/i;n.push(o(h,a))}return n};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h,i){return i===void 0&&(i=new o),i.x=l.x1+(l.x2-l.x1)*h,i.y=l.y1+(l.y2-l.y1)*h,i};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=Math.cos(h),s=Math.sin(h),n=o.x-g,d=o.y-l;return o.x=n*i-d*s+g,o.y=n*s+d*i+l,o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(310),g=e(311),l={mask:null,setMask:function(h){return this.mask=h,this},clearMask:function(h){return h===void 0&&(h=!1),h&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(h){return h===void 0&&(this.texture||this.shader)&&(h=this),new o(this.scene,h)},createGeometryMask:function(h){return h===void 0&&this.type==="Graphics"&&(h=this),new g(this.scene,h)}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(22),l=e(91),h=new o({initialize:function(s,n){var d=s.sys.renderer;this.renderer=d,this.bitmapMask=n,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),s.sys.game.events.on(g.CONTEXT_RESTORED,this.createMask,this),d&&d.on(l.RESIZE,this.createMask,this)},createMask:function(){var i=this.renderer;if(!(!i||!i.gl)){this.mainTexture&&this.clearMask();var s=i.width,n=i.height,d=(s&s-1)===0&&(n&n-1)===0,a=i.gl,u=d?a.REPEAT:a.CLAMP_TO_EDGE,f=a.LINEAR;this.mainTexture=i.createTexture2D(0,f,f,u,u,a.RGBA,null,s,n),this.maskTexture=i.createTexture2D(0,f,f,u,u,a.RGBA,null,s,n),this.mainFramebuffer=i.createFramebuffer(s,n,this.mainTexture,!0),this.maskFramebuffer=i.createFramebuffer(s,n,this.maskTexture,!0)}},clearMask:function(){var i=this.renderer;!i||!i.gl||!this.mainTexture||(i.deleteTexture(this.mainTexture),i.deleteTexture(this.maskTexture),i.deleteFramebuffer(this.mainFramebuffer),i.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(i){this.bitmapMask=i},preRenderWebGL:function(i,s,n){i.pipelines.BITMAPMASK_PIPELINE.beginMask(this,s,n)},postRenderWebGL:function(i,s){i.pipelines.BITMAPMASK_PIPELINE.endMask(this,s)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(l.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(l){return this.geometryMask=l,this},setInvertAlpha:function(l){return l===void 0&&(l=!0),this.invertAlpha=l,this},preRenderWebGL:function(l,h,i){var s=l.gl;l.flush(),l.maskStack.length===0&&(s.enable(s.STENCIL_TEST),s.clear(s.STENCIL_BUFFER_BIT),l.maskCount=0),l.currentCameraMask.mask!==this&&(l.currentMask.mask=this),l.maskStack.push({mask:this,camera:i}),this.applyStencil(l,i,!0),l.maskCount++},applyStencil:function(l,h,i){var s=l.gl,n=this.geometryMask,d=l.maskCount;s.colorMask(!1,!1,!1,!1),i?(s.stencilFunc(s.EQUAL,d,255),s.stencilOp(s.KEEP,s.KEEP,s.INCR)):(s.stencilFunc(s.EQUAL,d+1,255),s.stencilOp(s.KEEP,s.KEEP,s.DECR)),n.renderWebGL(l,n,h),l.flush(),s.colorMask(!0,!0,!0,!0),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),i?this.invertAlpha?s.stencilFunc(s.NOTEQUAL,d+1,255):s.stencilFunc(s.EQUAL,d+1,255):this.invertAlpha?s.stencilFunc(s.NOTEQUAL,d,255):s.stencilFunc(s.EQUAL,d,255)},postRenderWebGL:function(l){var h=l.gl;l.maskStack.pop(),l.maskCount--,l.flush();var i=l.currentMask;if(l.maskStack.length===0)i.mask=null,h.disable(h.STENCIL_TEST);else{var s=l.maskStack[l.maskStack.length-1];s.mask.applyStencil(l,s.camera,!1),l.currentCameraMask.mask!==s.mask?(i.mask=s.mask,i.camera=s.camera):i.mask=null}},preRenderCanvas:function(l,h,i){var s=this.geometryMask;l.currentContext.save(),s.renderCanvas(l,s,i,null,null,!0),l.currentContext.clip()},postRenderCanvas:function(l){l.currentContext.restore()},destroy:function(){this.geometryMask=null}});c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(o,g){return g===void 0&&(g=o),this.scrollFactorX=o,this.scrollFactorY=g,this}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(14),g=e(25),l=e(177),h=e(269),i=e(270),s=e(3),n=4,d={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(a){this._scaleX=a,this._scaleY=a,a===0?this.renderFlags&=~n:this.renderFlags|=n}},scaleX:{get:function(){return this._scaleX},set:function(a){this._scaleX=a,a===0?this.renderFlags&=~n:this.renderFlags|=n}},scaleY:{get:function(){return this._scaleY},set:function(a){this._scaleY=a,a===0?this.renderFlags&=~n:this.renderFlags|=n}},angle:{get:function(){return i(this._rotation*o.RAD_TO_DEG)},set:function(a){this.rotation=i(a)*o.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(a){this._rotation=h(a)}},setPosition:function(a,u,f,p){return a===void 0&&(a=0),u===void 0&&(u=a),f===void 0&&(f=0),p===void 0&&(p=0),this.x=a,this.y=u,this.z=f,this.w=p,this},copyPosition:function(a){return a.x!==void 0&&(this.x=a.x),a.y!==void 0&&(this.y=a.y),a.z!==void 0&&(this.z=a.z),a.w!==void 0&&(this.w=a.w),this},setRandomPosition:function(a,u,f,p){return a===void 0&&(a=0),u===void 0&&(u=0),f===void 0&&(f=this.scene.sys.scale.width),p===void 0&&(p=this.scene.sys.scale.height),this.x=a+Math.random()*f,this.y=u+Math.random()*p,this},setRotation:function(a){return a===void 0&&(a=0),this.rotation=a,this},setAngle:function(a){return a===void 0&&(a=0),this.angle=a,this},setScale:function(a,u){return a===void 0&&(a=1),u===void 0&&(u=a),this.scaleX=a,this.scaleY=u,this},setX:function(a){return a===void 0&&(a=0),this.x=a,this},setY:function(a){return a===void 0&&(a=0),this.y=a,this},setZ:function(a){return a===void 0&&(a=0),this.z=a,this},setW:function(a){return a===void 0&&(a=0),this.w=a,this},getLocalTransformMatrix:function(a){return a===void 0&&(a=new g),a.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(a,u){a===void 0&&(a=new g),u===void 0&&(u=new g);var f=this.parentContainer;if(!f)return this.getLocalTransformMatrix(a);for(a.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);f;)u.applyITRS(f.x,f.y,f._rotation,f._scaleX,f._scaleY),u.multiply(a,a),f=f.parentContainer;return a},getLocalPoint:function(a,u,f,p){f||(f=new s),p||(p=this.scene.sys.cameras.main);var v=p.scrollX,m=p.scrollY,E=a+v*this.scrollFactorX-v,x=u+m*this.scrollFactorY-m;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(E,x,f):l(E,x,this.x,this.y,this.rotation,this.scaleX,this.scaleY,f),this._originComponent&&(f.x+=this._displayOriginX,f.y+=this._displayOriginY),f},getParentRotation:function(){for(var a=0,u=this.parentContainer;u;)a+=u.rotation,u=u.parentContainer;return a}};c.exports=d},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=1,o={_visible:!0,visible:{get:function(){return this._visible},set:function(g){g?(this._visible=!0,this.renderFlags|=e):(this._visible=!1,this.renderFlags&=~e)}},setVisible:function(g){return this.visible=g,this}};c.exports=o},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CHANGE_DATA:e(638),CHANGE_DATA_KEY:e(639),DESTROY:e(640),REMOVE_DATA:e(641),SET_DATA:e(642)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(130),g=e(4),l=function(h,i,s,n){if(n===void 0&&(n=[]),!i&&!s)return n;i?s=Math.round(o(h)/i):i=o(h)/s;for(var d=h.x,a=h.y,u=0,f=0;f<s;f++)switch(n.push(new g(d,a)),u){case 0:d+=i,d>=h.right&&(u=1,a+=d-h.right,d=h.right);break;case 1:a+=i,a>=h.bottom&&(u=2,d-=a-h.bottom,a=h.bottom);break;case 2:d-=i,d<=h.left&&(u=3,a-=h.left-d,d=h.left);break;case 3:a-=i,a<=h.top&&(u=0,a=h.top);break}return n};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){g===void 0&&(g=1),l===void 0&&(l=[]);var h=Math.round(o.x1),i=Math.round(o.y1),s=Math.round(o.x2),n=Math.round(o.y2),d=Math.abs(s-h),a=Math.abs(n-i),u=h<s?1:-1,f=i<n?1:-1,p=d-a;l.push({x:h,y:i});for(var v=1;!(h===s&&i===n);){var m=p<<1;m>-a&&(p-=a,h+=u),m<d&&(p+=d,i+=f),v%g===0&&l.push({x:h,y:i}),v++}return l};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){if(g.length){if(g.length===1)return g[0]}else return NaN;var h=1,i,s;if(l){if(o<g[0][l])return g[0];for(;g[h][l]<o;)h++}else for(;g[h]<o;)h++;return h>g.length&&(h=g.length),l?(i=g[h-1][l],s=g[h][l],s-o<=o-i?g[h]:g[h-1]):(i=g[h-1],s=g[h],s-o<=o-i?s:i)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h,i,s,n,d){d===void 0&&(d=!1),this.textureKey=h,this.textureFrame=i,this.index=s,this.frame=n,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=d},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g=/\D/g;return o.sort(function(l,h){return parseInt(l.replace(g,""),10)-parseInt(h.replace(g,""),10)}),o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(185),g=e(0),l=e(102),h=e(9),i=e(132),s=e(22),n=e(2),d=e(6),a=e(186),u=e(322),f=new g({Extends:h,initialize:function(v){h.call(this),this.game=v,this.textureManager=null,this.globalTimeScale=1,this.anims=new l,this.mixes=new l,this.paused=!1,this.name="AnimationManager",v.events.once(s.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(s.DESTROY,this.destroy,this)},addMix:function(p,v,m){var E=this.anims,x=this.mixes,y=typeof p=="string"?p:p.key,S=typeof v=="string"?v:v.key;if(E.has(y)&&E.has(S)){var C=x.get(y);C||(C={}),C[S]=m,x.set(y,C)}return this},removeMix:function(p,v){var m=this.mixes,E=typeof p=="string"?p:p.key,x=m.get(E);if(x)if(v){var y=typeof v=="string"?v:v.key;x.hasOwnProperty(y)&&delete x[y]}else v||m.delete(E);return this},getMix:function(p,v){var m=this.mixes,E=typeof p=="string"?p:p.key,x=typeof v=="string"?v:v.key,y=m.get(E);return y&&y.hasOwnProperty(x)?y[x]:0},add:function(p,v){return this.anims.has(p)?(console.warn("Animation key exists: "+p),this):(v.key=p,this.anims.set(p,v),this.emit(i.ADD_ANIMATION,p,v),this)},exists:function(p){return this.anims.has(p)},createFromAseprite:function(p,v){var m=[],E=this.game.cache.json.get(p);if(!E)return m;var x=this,y=d(E,"meta",null),S=d(E,"frames",null);if(y&&S){var C=d(y,"frameTags",[]);C.forEach(function(I){var O=[],M=n(I,"name",null),L=n(I,"from",0),P=n(I,"to",0),b=n(I,"direction","forward");if(!!M&&(!v||v&&v.indexOf(M)>-1)){for(var B=[],U=Number.MAX_SAFE_INTEGER,H=L;H<=P;H++){var Y=H.toString(),j=S[Y];if(j){var _=n(j,"duration",Number.MAX_SAFE_INTEGER);_<U&&(U=_),B.push({frame:Y,duration:_})}}B.forEach(function(G){O.push({key:p,frame:G.frame,duration:U-G.duration})});var w=U*O.length;b==="reverse"&&(O=O.reverse());var D={key:M,frames:O,duration:w,yoyo:b==="pingpong"},N=x.create(D);N&&m.push(N)}})}return m},create:function(p){var v=p.key,m=!1;return v&&(m=this.get(v),m||(m=new o(this,v,p),this.anims.set(v,m),this.emit(i.ADD_ANIMATION,v,m))),m},fromJSON:function(p,v){v===void 0&&(v=!1),v&&this.anims.clear(),typeof p=="string"&&(p=JSON.parse(p));var m=[];if(p.hasOwnProperty("anims")&&Array.isArray(p.anims)){for(var E=0;E<p.anims.length;E++)m.push(this.create(p.anims[E]));p.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=p.globalTimeScale)}else p.hasOwnProperty("key")&&p.type==="frame"&&m.push(this.create(p));return m},generateFrameNames:function(p,v){var m=d(v,"prefix",""),E=d(v,"start",0),x=d(v,"end",0),y=d(v,"suffix",""),S=d(v,"zeroPad",0),C=d(v,"outputArray",[]),I=d(v,"frames",!1),O=this.textureManager.get(p);if(!O)return C;var M;if(v)for(I||(I=u(E,x)),M=0;M<I.length;M++){var L=m+a(I[M],S,"0",1)+y;O.has(L)?C.push({key:p,frame:L}):console.warn("generateFrameNames: Frame missing: "+L+" from texture: "+p)}else for(I=O.getFrameNames(),M=0;M<I.length;M++)C.push({key:p,frame:I[M]});return C},generateFrameNumbers:function(p,v){var m=d(v,"start",0),E=d(v,"end",-1),x=d(v,"first",!1),y=d(v,"outputArray",[]),S=d(v,"frames",!1),C=this.textureManager.get(p);if(!C)return y;x&&C.has(x)&&y.push({key:p,frame:x}),S||(E===-1&&(E=C.frameTotal-2),S=u(m,E));for(var I=0;I<S.length;I++)C.has(S[I])?y.push({key:p,frame:S[I]}):console.warn("generateFrameNumbers: Frame "+I+" missing from texture: "+p);return y},get:function(p){return this.anims.get(p)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(i.PAUSE_ALL)),this},play:function(p,v){Array.isArray(v)||(v=[v]);for(var m=0;m<v.length;m++)v[m].anims.play(p);return this},staggerPlay:function(p,v,m,E){m===void 0&&(m=0),E===void 0&&(E=!0),Array.isArray(v)||(v=[v]);var x=v.length;E||x--;for(var y=0;y<v.length;y++){var S=m<0?Math.abs(m)*(x-y):m*y;v[y].anims.playAfterDelay(p,S)}return this},remove:function(p){var v=this.get(p);return v&&(this.emit(i.REMOVE_ANIMATION,p,v),this.anims.delete(p),this.removeMix(p)),v},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(i.RESUME_ALL)),this},toJSON:function(p){var v={anims:[],globalTimeScale:this.globalTimeScale};return p!==void 0&&p!==""?v.anims.push(this.anims.get(p).toJSON()):this.anims.each(function(m,E){v.anims.push(E.toJSON())}),v},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});c.exports=f},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=[],s,n=!1;if((l||h)&&(n=!0,l||(l=""),h||(h="")),g<o)for(s=o;s>=g;s--)n?i.push(l+s.toString()+h):i.push(s);else for(s=o;s<=g;s++)n?i.push(l+s.toString()+h):i.push(s);return i};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(102),l=e(9),h=e(324),i=new o({initialize:function(){this.entries=new g,this.events=new l},add:function(s,n){return this.entries.set(s,n),this.events.emit(h.ADD,this,s,n),this},has:function(s){return this.entries.has(s)},exists:function(s){return this.entries.has(s)},get:function(s){return this.entries.get(s)},remove:function(s){var n=this.get(s);return n&&(this.entries.delete(s),this.events.emit(h.REMOVE,this,s,n.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ADD:e(736),REMOVE:e(737)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(323),g=e(0),l=e(22),h=new g({initialize:function(s){this.game=s,this.binary=new o,this.bitmapFont=new o,this.json=new o,this.physics=new o,this.shader=new o,this.audio=new o,this.video=new o,this.text=new o,this.html=new o,this.obj=new o,this.tilemap=new o,this.xml=new o,this.custom={},this.game.events.once(l.DESTROY,this.destroy,this)},addCustom:function(i){return this.custom.hasOwnProperty(i)||(this.custom[i]=new o),this.custom[i]},destroy:function(){for(var i=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],s=0;s<i.length;s++)this[i[s]].destroy(),this[i[s]]=null;for(var n in this.custom)this.custom[n].destroy();this.custom=null,this.game=null}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(133),g=e(190),l=e(18),h=e(0),i=e(11),s=e(333),n=e(37),d=e(135),a=e(10),u=e(3),f=new h({Extends:o,Mixins:[i.Flip,i.Tint,i.Pipeline],initialize:function(v,m,E,x){o.call(this,v,m,E,x),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new s.Fade(this),this.flashEffect=new s.Flash(this),this.shakeEffect=new s.Shake(this),this.panEffect=new s.Pan(this),this.rotateToEffect=new s.RotateTo(this),this.zoomEffect=new s.Zoom(this),this.lerp=new u(1,1),this.followOffset=new u,this.deadzone=null,this._follow=null},setDeadzone:function(p,v){if(p===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=p,this.deadzone.height=v):this.deadzone=new a(0,0,p,v),this._follow){var m=this.width/2,E=this.height/2,x=this._follow.x-this.followOffset.x,y=this._follow.y-this.followOffset.y;this.midPoint.set(x,y),this.scrollX=x-m,this.scrollY=y-E}g(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(p,v,m,E,x,y){return this.fadeEffect.start(!1,p,v,m,E,!0,x,y)},fadeOut:function(p,v,m,E,x,y){return this.fadeEffect.start(!0,p,v,m,E,!0,x,y)},fadeFrom:function(p,v,m,E,x,y,S){return this.fadeEffect.start(!1,p,v,m,E,x,y,S)},fade:function(p,v,m,E,x,y,S){return this.fadeEffect.start(!0,p,v,m,E,x,y,S)},flash:function(p,v,m,E,x,y,S){return this.flashEffect.start(p,v,m,E,x,y,S)},shake:function(p,v,m,E,x){return this.shakeEffect.start(p,v,m,E,x)},pan:function(p,v,m,E,x,y,S){return this.panEffect.start(p,v,m,E,x,y,S)},rotateTo:function(p,v,m,E,x,y,S){return this.rotateToEffect.start(p,v,m,E,x,y,S)},zoomTo:function(p,v,m,E,x,y){return this.zoomEffect.start(p,v,m,E,x,y)},preRender:function(){this.renderList.length=0;var p=this.width,v=this.height,m=p*.5,E=v*.5,x=this.zoom,y=this.matrix,S=p*this.originX,C=v*this.originY,I=this._follow,O=this.deadzone,M=this.scrollX,L=this.scrollY;O&&g(O,this.midPoint.x,this.midPoint.y);var P=!1;if(I&&!this.panEffect.isRunning){var b=I.x-this.followOffset.x,B=I.y-this.followOffset.y;O?(b<O.x?M=d(M,M-(O.x-b),this.lerp.x):b>O.right&&(M=d(M,M+(b-O.right),this.lerp.x)),B<O.y?L=d(L,L-(O.y-B),this.lerp.y):B>O.bottom&&(L=d(L,L+(B-O.bottom),this.lerp.y))):(M=d(M,b-S,this.lerp.x),L=d(L,B-C,this.lerp.y)),P=!0}this.useBounds&&(M=this.clampX(M),L=this.clampY(L)),this.roundPixels&&(S=Math.round(S),C=Math.round(C),M=Math.round(M),L=Math.round(L)),this.scrollX=M,this.scrollY=L;var U=M+m,H=L+E;this.midPoint.set(U,H);var Y=p/x,j=v/x,_=U-Y/2,w=H-j/2;this.roundPixels&&(_=Math.round(_),w=Math.round(w)),this.worldView.setTo(_,w,Y,j),y.applyITRS(this.x+S,this.y+C,this.rotation,x,x),y.translate(-S,-C),this.shakeEffect.preRender(),P&&this.emit(n.FOLLOW_UPDATE,this,I)},setLerp:function(p,v){return p===void 0&&(p=1),v===void 0&&(v=p),this.lerp.set(p,v),this},setFollowOffset:function(p,v){return p===void 0&&(p=0),v===void 0&&(v=0),this.followOffset.set(p,v),this},startFollow:function(p,v,m,E,x,y){v===void 0&&(v=!1),m===void 0&&(m=1),E===void 0&&(E=m),x===void 0&&(x=0),y===void 0&&(y=x),this._follow=p,this.roundPixels=v,m=l(m,0,1),E=l(E,0,1),this.lerp.set(m,E),this.followOffset.set(x,y);var S=this.width/2,C=this.height/2,I=p.x-x,O=p.y-y;return this.midPoint.set(I,O),this.scrollX=I-S,this.scrollY=O-C,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(p,v){this.visible&&(this.rotateToEffect.update(p,v),this.panEffect.update(p,v),this.zoomEffect.update(p,v),this.shakeEffect.update(p,v),this.flashEffect.update(p,v),this.fadeEffect.update(p,v))},destroy:function(){this.resetFX(),o.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});c.exports=f},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(38),g=function(l){var h=new o;l=l.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,u,f,p){return u+u+f+f+p+p});var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);if(i){var s=parseInt(i[1],16),n=parseInt(i[2],16),d=parseInt(i[3],16);h.setTo(s,n,d)}return h};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){return h<<24|o<<16|g<<8|l};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){h===void 0&&(h={h:0,s:0,v:0}),o/=255,g/=255,l/=255;var i=Math.min(o,g,l),s=Math.max(o,g,l),n=s-i,d=0,a=s===0?0:n/s,u=s;return s!==i&&(s===o?d=(g-l)/n+(g<l?6:0):s===g?d=(l-o)/n+2:s===l&&(d=(o-g)/n+4),d/=6),h.hasOwnProperty("_h")?(h._h=d,h._s=a,h._v=u):(h.h=d,h.s=a,h.v=u),h};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o>16777215?{a:o>>>24,r:o>>16&255,g:o>>8&255,b:o&255}:{a:255,r:o>>16&255,g:o>>8&255,b:o&255}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(38),g=function(l){return new o(l.r,l.g,l.b,l.a)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(38),g=function(l){var h=new o,i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(l.toLowerCase());if(i){var s=parseInt(i[1],10),n=parseInt(i[2],10),d=parseInt(i[3],10),a=i[4]!==void 0?parseFloat(i[4]):1;h.setTo(s,n,d,a*255)}return h};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Fade:e(761),Flash:e(762),Pan:e(763),Shake:e(796),RotateTo:e(797),Zoom:e(798)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:e(764),Out:e(765),InOut:e(766)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:e(767),Out:e(768),InOut:e(769)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:e(770),Out:e(771),InOut:e(772)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:e(773),Out:e(774),InOut:e(775)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:e(776),Out:e(777),InOut:e(778)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:e(779),Out:e(780),InOut:e(781)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports=e(782)},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:e(783),Out:e(784),InOut:e(785)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:e(786),Out:e(787),InOut:e(788)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:e(789),Out:e(790),InOut:e(791)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:e(792),Out:e(793),InOut:e(794)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports=e(795)},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(33),l=e(347),h=e(2),i=e(6),s=e(7),n=e(193),d=e(1),a=e(197),u=e(187),f=new o({initialize:function(v){v===void 0&&(v={});var m=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],E="#ffffff";this.width=i(v,"width",1024),this.height=i(v,"height",768),this.zoom=i(v,"zoom",1),this.parent=i(v,"parent",void 0),this.scaleMode=i(v,"scaleMode",0),this.expandParent=i(v,"expandParent",!0),this.autoRound=i(v,"autoRound",!1),this.autoCenter=i(v,"autoCenter",0),this.resizeInterval=i(v,"resizeInterval",500),this.fullscreenTarget=i(v,"fullscreenTarget",null),this.minWidth=i(v,"minWidth",0),this.maxWidth=i(v,"maxWidth",0),this.minHeight=i(v,"minHeight",0),this.maxHeight=i(v,"maxHeight",0);var x=i(v,"scale",null);x&&(this.width=i(x,"width",this.width),this.height=i(x,"height",this.height),this.zoom=i(x,"zoom",this.zoom),this.parent=i(x,"parent",this.parent),this.scaleMode=i(x,"mode",this.scaleMode),this.expandParent=i(x,"expandParent",this.expandParent),this.autoRound=i(x,"autoRound",this.autoRound),this.autoCenter=i(x,"autoCenter",this.autoCenter),this.resizeInterval=i(x,"resizeInterval",this.resizeInterval),this.fullscreenTarget=i(x,"fullscreenTarget",this.fullscreenTarget),this.minWidth=i(x,"min.width",this.minWidth),this.maxWidth=i(x,"max.width",this.maxWidth),this.minHeight=i(x,"min.height",this.minHeight),this.maxHeight=i(x,"max.height",this.maxHeight)),this.renderType=i(v,"type",g.AUTO),this.canvas=i(v,"canvas",null),this.context=i(v,"context",null),this.canvasStyle=i(v,"canvasStyle",null),this.customEnvironment=i(v,"customEnvironment",!1),this.sceneConfig=i(v,"scene",null),this.seed=i(v,"seed",[(Date.now()*Math.random()).toString()]),n.RND=new n.RandomDataGenerator(this.seed),this.gameTitle=i(v,"title",""),this.gameURL=i(v,"url","https://phaser.io"),this.gameVersion=i(v,"version",""),this.autoFocus=i(v,"autoFocus",!0),this.domCreateContainer=i(v,"dom.createContainer",!1),this.domBehindCanvas=i(v,"dom.behindCanvas",!1),this.domPointerEvents=i(v,"dom.pointerEvents","none"),this.inputKeyboard=i(v,"input.keyboard",!0),this.inputKeyboardEventTarget=i(v,"input.keyboard.target",window),this.inputKeyboardCapture=i(v,"input.keyboard.capture",[]),this.inputMouse=i(v,"input.mouse",!0),this.inputMouseEventTarget=i(v,"input.mouse.target",null),this.inputMousePreventDefaultDown=i(v,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=i(v,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=i(v,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=i(v,"input.mouse.preventDefaultWheel",!0),this.inputTouch=i(v,"input.touch",l.input.touch),this.inputTouchEventTarget=i(v,"input.touch.target",null),this.inputTouchCapture=i(v,"input.touch.capture",!0),this.inputActivePointers=i(v,"input.activePointers",1),this.inputSmoothFactor=i(v,"input.smoothFactor",0),this.inputWindowEvents=i(v,"input.windowEvents",!0),this.inputGamepad=i(v,"input.gamepad",!1),this.inputGamepadEventTarget=i(v,"input.gamepad.target",window),this.disableContextMenu=i(v,"disableContextMenu",!1),this.audio=i(v,"audio",{}),this.hideBanner=i(v,"banner",null)===!1,this.hidePhaser=i(v,"banner.hidePhaser",!1),this.bannerTextColor=i(v,"banner.text",E),this.bannerBackgroundColor=i(v,"banner.background",m),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=i(v,"fps",null);var y=i(v,"render",v);this.pipeline=i(y,"pipeline",null),this.antialias=i(y,"antialias",!0),this.antialiasGL=i(y,"antialiasGL",!0),this.mipmapFilter=i(y,"mipmapFilter","LINEAR"),this.desynchronized=i(y,"desynchronized",!1),this.roundPixels=i(y,"roundPixels",!1),this.pixelArt=i(y,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=i(y,"transparent",!1),this.clearBeforeRender=i(y,"clearBeforeRender",!0),this.preserveDrawingBuffer=i(y,"preserveDrawingBuffer",!1),this.premultipliedAlpha=i(y,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=i(y,"failIfMajorPerformanceCaveat",!1),this.powerPreference=i(y,"powerPreference","default"),this.batchSize=i(y,"batchSize",4096),this.maxTextures=i(y,"maxTextures",-1),this.maxLights=i(y,"maxLights",10);var S=i(v,"backgroundColor",0);this.backgroundColor=u(S),this.transparent&&(this.backgroundColor=u(0),this.backgroundColor.alpha=0),this.preBoot=i(v,"callbacks.preBoot",d),this.postBoot=i(v,"callbacks.postBoot",d),this.physics=i(v,"physics",{}),this.defaultPhysicsSystem=i(this.physics,"default",!1),this.loaderBaseURL=i(v,"loader.baseURL",""),this.loaderPath=i(v,"loader.path","");var C=l.os.android?6:32;this.loaderMaxParallelDownloads=i(v,"loader.maxParallelDownloads",C),this.loaderCrossOrigin=i(v,"loader.crossOrigin",void 0),this.loaderResponseType=i(v,"loader.responseType",""),this.loaderAsync=i(v,"loader.async",!0),this.loaderUser=i(v,"loader.user",""),this.loaderPassword=i(v,"loader.password",""),this.loaderTimeout=i(v,"loader.timeout",0),this.loaderWithCredentials=i(v,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var I=i(v,"plugins",null),O=a.DefaultScene;I&&(Array.isArray(I)?this.defaultPlugins=I:s(I)&&(this.installGlobalPlugins=h(I,"global",[]),this.installScenePlugins=h(I,"scene",[]),Array.isArray(I.default)?O=I.default:Array.isArray(I.defaultMerge)&&(O=O.concat(I.defaultMerge)))),this.defaultPlugins=O;var M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=i(v,"images.default",M+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=i(v,"images.missing",M+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=i(v,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=g.WEBGL:window.FORCE_CANVAS&&(this.renderType=g.CANVAS))}});c.exports=f},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={os:e(105),browser:e(136),features:e(191),input:e(808),audio:e(809),video:e(810),fullscreen:e(811),canvasFeatures:e(348)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(31),g={supportInverseAlpha:!1,supportNewBlendModes:!1};function l(){var s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",d=new Image;return d.onload=function(){var a=new Image;a.onload=function(){var u=o.create(a,6,1),f=u.getContext("2d");if(f.globalCompositeOperation="multiply",f.drawImage(d,0,0),f.drawImage(a,2,0),!f.getImageData(2,0,1,1))return!1;var p=f.getImageData(2,0,1,1).data;o.remove(a),g.supportNewBlendModes=p[0]===255&&p[1]===0&&p[2]===0},a.src=s+"/wCKxvRF"+n},d.src=s+"AP804Oa6"+n,!1}function h(){var s=o.create(this,2,1),n=s.getContext("2d");n.fillStyle="rgba(10, 20, 30, 0.5)",n.fillRect(0,0,1,1);var d=n.getImageData(0,0,1,1);if(d===null)return!1;n.putImageData(d,1,0);var a=n.getImageData(1,0,1,1);return a.data[0]===d.data[0]&&a.data[1]===d.data[1]&&a.data[2]===d.data[2]&&a.data[3]===d.data[3]}function i(){return typeof importScripts!="function"&&document!==void 0&&(g.supportNewBlendModes=l(),g.supportInverseAlpha=h()),g}c.exports=i()},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){return Math.atan2(h-g,l-o)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return Math.atan2(g.y-o.y,g.x-o.x)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o=o%(2*Math.PI),o>=0?o:o+2*Math.PI};c.exports=e},function(c,R){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.x-g.x,h=o.y-g.y;return Math.sqrt(l*l+h*h)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=o-l,s=g-h;return i*i+s*s};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return l===void 0&&(l=1e-4),o>g-l};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return l===void 0&&(l=1e-4),o<g+l};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(357),g=function(l,h){return o(l)/o(h)/o(l-h)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){if(o===0)return 1;for(var g=o;--o;)g*=o;return g};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(i,s){var n=1-i;return n*n*n*s}function o(i,s){var n=1-i;return 3*n*n*i*s}function g(i,s){return 3*(1-i)*i*i*s}function l(i,s){return i*i*i*s}var h=function(i,s,n,d,a){return e(i,s)+o(i,n)+g(i,d)+l(i,a)};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(h,i){var s=1-h;return s*s*i}function o(h,i){return 2*(1-h)*h*i}function g(h,i){return h*h*i}var l=function(h,i,s,n){return e(h,i)+o(h,s)+g(h,n)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(184),g=function(l,h,i){return h+(i-h)*o(l,0,1)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g=Math.log(o)/.6931471805599453;return 1<<Math.ceil(g)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.x,h=o.y;return o.x=l*Math.cos(g)-h*Math.sin(g),o.y=l*Math.sin(g)+h*Math.cos(g),o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o>0?Math.ceil(o):Math.floor(o)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h){this.val=new Float32Array(9),h?this.copy(h):this.identity()},clone:function(){return new g(this)},set:function(l){return this.copy(l)},copy:function(l){var h=this.val,i=l.val;return h[0]=i[0],h[1]=i[1],h[2]=i[2],h[3]=i[3],h[4]=i[4],h[5]=i[5],h[6]=i[6],h[7]=i[7],h[8]=i[8],this},fromMat4:function(l){var h=l.val,i=this.val;return i[0]=h[0],i[1]=h[1],i[2]=h[2],i[3]=h[4],i[4]=h[5],i[5]=h[6],i[6]=h[8],i[7]=h[9],i[8]=h[10],this},fromArray:function(l){var h=this.val;return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[4]=l[4],h[5]=l[5],h[6]=l[6],h[7]=l[7],h[8]=l[8],this},identity:function(){var l=this.val;return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=1,l[5]=0,l[6]=0,l[7]=0,l[8]=1,this},transpose:function(){var l=this.val,h=l[1],i=l[2],s=l[5];return l[1]=l[3],l[2]=l[6],l[3]=h,l[5]=l[7],l[6]=i,l[7]=s,this},invert:function(){var l=this.val,h=l[0],i=l[1],s=l[2],n=l[3],d=l[4],a=l[5],u=l[6],f=l[7],p=l[8],v=p*d-a*f,m=-p*n+a*u,E=f*n-d*u,x=h*v+i*m+s*E;return x?(x=1/x,l[0]=v*x,l[1]=(-p*i+s*f)*x,l[2]=(a*i-s*d)*x,l[3]=m*x,l[4]=(p*h-s*u)*x,l[5]=(-a*h+s*n)*x,l[6]=E*x,l[7]=(-f*h+i*u)*x,l[8]=(d*h-i*n)*x,this):null},adjoint:function(){var l=this.val,h=l[0],i=l[1],s=l[2],n=l[3],d=l[4],a=l[5],u=l[6],f=l[7],p=l[8];return l[0]=d*p-a*f,l[1]=s*f-i*p,l[2]=i*a-s*d,l[3]=a*u-n*p,l[4]=h*p-s*u,l[5]=s*n-h*a,l[6]=n*f-d*u,l[7]=i*u-h*f,l[8]=h*d-i*n,this},determinant:function(){var l=this.val,h=l[0],i=l[1],s=l[2],n=l[3],d=l[4],a=l[5],u=l[6],f=l[7],p=l[8];return h*(p*d-a*f)+i*(-p*n+a*u)+s*(f*n-d*u)},multiply:function(l){var h=this.val,i=h[0],s=h[1],n=h[2],d=h[3],a=h[4],u=h[5],f=h[6],p=h[7],v=h[8],m=l.val,E=m[0],x=m[1],y=m[2],S=m[3],C=m[4],I=m[5],O=m[6],M=m[7],L=m[8];return h[0]=E*i+x*d+y*f,h[1]=E*s+x*a+y*p,h[2]=E*n+x*u+y*v,h[3]=S*i+C*d+I*f,h[4]=S*s+C*a+I*p,h[5]=S*n+C*u+I*v,h[6]=O*i+M*d+L*f,h[7]=O*s+M*a+L*p,h[8]=O*n+M*u+L*v,this},translate:function(l){var h=this.val,i=l.x,s=l.y;return h[6]=i*h[0]+s*h[3]+h[6],h[7]=i*h[1]+s*h[4]+h[7],h[8]=i*h[2]+s*h[5]+h[8],this},rotate:function(l){var h=this.val,i=h[0],s=h[1],n=h[2],d=h[3],a=h[4],u=h[5],f=Math.sin(l),p=Math.cos(l);return h[0]=p*i+f*d,h[1]=p*s+f*a,h[2]=p*n+f*u,h[3]=p*d-f*i,h[4]=p*a-f*s,h[5]=p*u-f*n,this},scale:function(l){var h=this.val,i=l.x,s=l.y;return h[0]=i*h[0],h[1]=i*h[1],h[2]=i*h[2],h[3]=s*h[3],h[4]=s*h[4],h[5]=s*h[5],this},fromQuat:function(l){var h=l.x,i=l.y,s=l.z,n=l.w,d=h+h,a=i+i,u=s+s,f=h*d,p=h*a,v=h*u,m=i*a,E=i*u,x=s*u,y=n*d,S=n*a,C=n*u,I=this.val;return I[0]=1-(m+x),I[3]=p+C,I[6]=v-S,I[1]=p-C,I[4]=1-(f+x),I[7]=E+y,I[2]=v+S,I[5]=E-y,I[8]=1-(f+m),this},normalFromMat4:function(l){var h=l.val,i=this.val,s=h[0],n=h[1],d=h[2],a=h[3],u=h[4],f=h[5],p=h[6],v=h[7],m=h[8],E=h[9],x=h[10],y=h[11],S=h[12],C=h[13],I=h[14],O=h[15],M=s*f-n*u,L=s*p-d*u,P=s*v-a*u,b=n*p-d*f,B=n*v-a*f,U=d*v-a*p,H=m*C-E*S,Y=m*I-x*S,j=m*O-y*S,_=E*I-x*C,w=E*O-y*C,D=x*O-y*I,N=M*D-L*w+P*_+b*j-B*Y+U*H;return N?(N=1/N,i[0]=(f*D-p*w+v*_)*N,i[1]=(p*j-u*D-v*Y)*N,i[2]=(u*w-f*j+v*H)*N,i[3]=(d*w-n*D-a*_)*N,i[4]=(s*D-d*j+a*Y)*N,i[5]=(n*j-s*w-a*H)*N,i[6]=(C*U-I*B+O*b)*N,i[7]=(I*P-S*U-O*L)*N,i[8]=(S*B-C*P+O*M)*N,this):null}});c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(364),l=e(1),h=e(39),i=1e-6,s=new Int8Array([1,2,0]),n=new Float32Array([0,0,0]),d=new h(1,0,0),a=new h(0,1,0),u=new h,f=new g,p=new o({initialize:function(m,E,x,y){this.onChangeCallback=l,this.set(m,E,x,y)},x:{get:function(){return this._x},set:function(v){this._x=v,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(v){this._y=v,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(v){this._z=v,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(v){this._w=v,this.onChangeCallback(this)}},copy:function(v){return this.set(v)},set:function(v,m,E,x,y){return y===void 0&&(y=!0),typeof v=="object"?(this._x=v.x||0,this._y=v.y||0,this._z=v.z||0,this._w=v.w||0):(this._x=v||0,this._y=m||0,this._z=E||0,this._w=x||0),y&&this.onChangeCallback(this),this},add:function(v){return this._x+=v.x,this._y+=v.y,this._z+=v.z,this._w+=v.w,this.onChangeCallback(this),this},subtract:function(v){return this._x-=v.x,this._y-=v.y,this._z-=v.z,this._w-=v.w,this.onChangeCallback(this),this},scale:function(v){return this._x*=v,this._y*=v,this._z*=v,this._w*=v,this.onChangeCallback(this),this},length:function(){var v=this.x,m=this.y,E=this.z,x=this.w;return Math.sqrt(v*v+m*m+E*E+x*x)},lengthSq:function(){var v=this.x,m=this.y,E=this.z,x=this.w;return v*v+m*m+E*E+x*x},normalize:function(){var v=this.x,m=this.y,E=this.z,x=this.w,y=v*v+m*m+E*E+x*x;return y>0&&(y=1/Math.sqrt(y),this._x=v*y,this._y=m*y,this._z=E*y,this._w=x*y),this.onChangeCallback(this),this},dot:function(v){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w},lerp:function(v,m){m===void 0&&(m=0);var E=this.x,x=this.y,y=this.z,S=this.w;return this.set(E+m*(v.x-E),x+m*(v.y-x),y+m*(v.z-y),S+m*(v.w-S))},rotationTo:function(v,m){var E=v.x*m.x+v.y*m.y+v.z*m.z;return E<-.999999?(u.copy(d).cross(v).length()<i&&u.copy(a).cross(v),u.normalize(),this.setAxisAngle(u,Math.PI)):E>.999999?this.set(0,0,0,1):(u.copy(v).cross(m),this._x=u.x,this._y=u.y,this._z=u.z,this._w=1+E,this.normalize())},setAxes:function(v,m,E){var x=f.val;return x[0]=m.x,x[3]=m.y,x[6]=m.z,x[1]=E.x,x[4]=E.y,x[7]=E.z,x[2]=-v.x,x[5]=-v.y,x[8]=-v.z,this.fromMat3(f).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(v,m){m=m*.5;var E=Math.sin(m);return this.set(E*v.x,E*v.y,E*v.z,Math.cos(m))},multiply:function(v){var m=this.x,E=this.y,x=this.z,y=this.w,S=v.x,C=v.y,I=v.z,O=v.w;return this.set(m*O+y*S+E*I-x*C,E*O+y*C+x*S-m*I,x*O+y*I+m*C-E*S,y*O-m*S-E*C-x*I)},slerp:function(v,m){var E=this.x,x=this.y,y=this.z,S=this.w,C=v.x,I=v.y,O=v.z,M=v.w,L=E*C+x*I+y*O+S*M;L<0&&(L=-L,C=-C,I=-I,O=-O,M=-M);var P=1-m,b=m;if(1-L>i){var B=Math.acos(L),U=Math.sin(B);P=Math.sin((1-m)*B)/U,b=Math.sin(m*B)/U}return this.set(P*E+b*C,P*x+b*I,P*y+b*O,P*S+b*M)},invert:function(){var v=this.x,m=this.y,E=this.z,x=this.w,y=v*v+m*m+E*E+x*x,S=y?1/y:0;return this.set(-v*S,-m*S,-E*S,x*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(v){v*=.5;var m=this.x,E=this.y,x=this.z,y=this.w,S=Math.sin(v),C=Math.cos(v);return this.set(m*C+y*S,E*C+x*S,x*C-E*S,y*C-m*S)},rotateY:function(v){v*=.5;var m=this.x,E=this.y,x=this.z,y=this.w,S=Math.sin(v),C=Math.cos(v);return this.set(m*C-x*S,E*C+y*S,x*C+m*S,y*C-E*S)},rotateZ:function(v){v*=.5;var m=this.x,E=this.y,x=this.z,y=this.w,S=Math.sin(v),C=Math.cos(v);return this.set(m*C+E*S,E*C-m*S,x*C+y*S,y*C-x*S)},calculateW:function(){var v=this.x,m=this.y,E=this.z;return this.w=-Math.sqrt(1-v*v-m*m-E*E),this},setFromEuler:function(v,m){var E=v.x/2,x=v.y/2,y=v.z/2,S=Math.cos(E),C=Math.cos(x),I=Math.cos(y),O=Math.sin(E),M=Math.sin(x),L=Math.sin(y);switch(v.order){case"XYZ":{this.set(O*C*I+S*M*L,S*M*I-O*C*L,S*C*L+O*M*I,S*C*I-O*M*L,m);break}case"YXZ":{this.set(O*C*I+S*M*L,S*M*I-O*C*L,S*C*L-O*M*I,S*C*I+O*M*L,m);break}case"ZXY":{this.set(O*C*I-S*M*L,S*M*I+O*C*L,S*C*L+O*M*I,S*C*I-O*M*L,m);break}case"ZYX":{this.set(O*C*I-S*M*L,S*M*I+O*C*L,S*C*L-O*M*I,S*C*I+O*M*L,m);break}case"YZX":{this.set(O*C*I+S*M*L,S*M*I+O*C*L,S*C*L-O*M*I,S*C*I-O*M*L,m);break}case"XZY":{this.set(O*C*I-S*M*L,S*M*I-O*C*L,S*C*L+O*M*I,S*C*I+O*M*L,m);break}}return this},setFromRotationMatrix:function(v){var m=v.val,E=m[0],x=m[4],y=m[8],S=m[1],C=m[5],I=m[9],O=m[2],M=m[6],L=m[10],P=E+C+L,b;return P>0?(b=.5/Math.sqrt(P+1),this.set((M-I)*b,(y-O)*b,(S-x)*b,.25/b)):E>C&&E>L?(b=2*Math.sqrt(1+E-C-L),this.set(.25*b,(x+S)/b,(y+O)/b,(M-I)/b)):C>L?(b=2*Math.sqrt(1+C-E-L),this.set((x+S)/b,.25*b,(I+M)/b,(y-O)/b)):(b=2*Math.sqrt(1+L-E-C),this.set((y+O)/b,(I+M)/b,.25*b,(S-x)/b)),this},fromMat3:function(v){var m=v.val,E=m[0]+m[4]+m[8],x;if(E>0)x=Math.sqrt(E+1),this.w=.5*x,x=.5/x,this._x=(m[7]-m[5])*x,this._y=(m[2]-m[6])*x,this._z=(m[3]-m[1])*x;else{var y=0;m[4]>m[0]&&(y=1),m[8]>m[y*3+y]&&(y=2);var S=s[y],C=s[S];x=Math.sqrt(m[y*3+y]-m[S*3+S]-m[C*3+C]+1),n[y]=.5*x,x=.5/x,n[S]=(m[S*3+y]+m[y*3+S])*x,n[C]=(m[C*3+y]+m[y*3+C])*x,this._x=n[0],this._y=n[1],this._z=n[2],this._w=(m[C*3+S]-m[S*3+C])*x}return this.onChangeCallback(this),this}});c.exports=p},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(367),g=e(31),l=e(33),h=e(191),i=function(s){var n=s.config;if((n.customEnvironment||n.canvas)&&n.renderType===l.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!n.customEnvironment&&!n.canvas&&n.renderType!==l.HEADLESS)if(n.renderType===l.CANVAS||n.renderType!==l.CANVAS&&!h.webGL)if(h.canvas)n.renderType=l.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else n.renderType=l.WEBGL;n.antialias||g.disableSmoothing();var d=s.scale.baseSize,a=d.width,u=d.height;if(n.canvas?(s.canvas=n.canvas,s.canvas.width=a,s.canvas.height=u):s.canvas=g.create(s,a,u,n.renderType),n.canvasStyle&&(s.canvas.style=n.canvasStyle),n.antialias||o.setCrisp(s.canvas),n.renderType!==l.HEADLESS){var f,p;f=e(368),p=e(371),n.renderType===l.WEBGL?s.renderer=new p(s):(s.renderer=new f(s),s.context=s.renderer.gameContext)}};c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setCrisp:function(o){var g=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return g.forEach(function(l){o.style["image-rendering"]=l}),o.style.msInterpolationMode="nearest-neighbor",o},setBicubic:function(o){return o.style["image-rendering"]="auto",o.style.msInterpolationMode="bicubic",o}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(37),g=e(369),l=e(0),h=e(33),i=e(9),s=e(91),n=e(370),d=e(104),a=e(106),u=e(25),f=new l({Extends:i,initialize:function(v){i.call(this);var m=v.config;this.config={clearBeforeRender:m.clearBeforeRender,backgroundColor:m.backgroundColor,antialias:m.antialias,roundPixels:m.roundPixels},this.game=v,this.type=h.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=v.canvas;var E={alpha:v.config.transparent,desynchronized:v.config.desynchronized};this.gameContext=m.context?m.context:this.gameCanvas.getContext("2d",E),this.currentContext=this.gameContext,this.antialias=v.config.antialias,this.blendModes=n(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new u,this._tempMatrix2=new u,this._tempMatrix3=new u,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(a.READY,this.boot,this)},boot:function(){var p=this.game,v=p.scale.baseSize;this.width=v.width,this.height=v.height,this.isBooted=!0,p.scale.on(d.RESIZE,this.onResize,this),this.resize(v.width,v.height)},onResize:function(p,v){(v.width!==this.width||v.height!==this.height)&&this.resize(v.width,v.height)},resize:function(p,v){this.width=p,this.height=v,this.emit(s.RESIZE,p,v)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(p){return this.currentContext.globalCompositeOperation=p,this},setContext:function(p){return this.currentContext=p||this.gameContext,this},setAlpha:function(p){return this.currentContext.globalAlpha=p,this},preRender:function(){var p=this.gameContext,v=this.config,m=this.width,E=this.height;p.globalAlpha=1,p.globalCompositeOperation="source-over",p.setTransform(1,0,0,1,0,0),v.clearBeforeRender&&(p.clearRect(0,0,m,E),v.transparent||(p.fillStyle=v.backgroundColor.rgba,p.fillRect(0,0,m,E))),p.save(),this.drawCount=0,this.emit(s.PRE_RENDER)},render:function(p,v,m){var E=v.length;this.emit(s.RENDER,p,m);var x=m.x,y=m.y,S=m.width,C=m.height,I=m.renderToTexture?m.context:p.sys.context;I.save(),this.game.scene.customViewports&&(I.beginPath(),I.rect(x,y,S,C),I.clip()),this.currentContext=I;var O=m.mask;O&&O.preRenderCanvas(this,null,m._maskCamera),m.transparent||(I.fillStyle=m.backgroundColor.rgba,I.fillRect(x,y,S,C)),I.globalAlpha=m.alpha,I.globalCompositeOperation="source-over",this.drawCount+=E,m.renderToTexture&&m.emit(o.PRE_RENDER,m),m.matrix.copyToContext(I);for(var M=0;M<E;M++){var L=v[M];L.mask&&L.mask.preRenderCanvas(this,L,m),L.renderCanvas(this,L,m),L.mask&&L.mask.postRenderCanvas(this,L,m)}I.setTransform(1,0,0,1,0,0),I.globalCompositeOperation="source-over",I.globalAlpha=1,m.flashEffect.postRenderCanvas(I),m.fadeEffect.postRenderCanvas(I),m.dirty=!1,O&&O.postRenderCanvas(this),I.restore(),m.renderToTexture&&(m.emit(o.POST_RENDER,m),m.renderToGame&&p.sys.context.drawImage(m.canvas,x,y))},postRender:function(){var p=this.gameContext;p.restore(),this.emit(s.POST_RENDER);var v=this.snapshotState;v.callback&&(g(this.gameCanvas,v),v.callback=null)},snapshotCanvas:function(p,v,m,E,x,y,S,C,I){m===void 0&&(m=!1),this.snapshotArea(E,x,y,S,v,C,I);var O=this.snapshotState;return O.getPixel=m,g(this.canvas,O),O.callback=null,this},snapshot:function(p,v,m){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,p,v,m)},snapshotArea:function(p,v,m,E,x,y,S){var C=this.snapshotState;return C.callback=x,C.type=y,C.encoder=S,C.getPixel=!1,C.x=p,C.y=v,C.width=Math.min(m,this.gameCanvas.width),C.height=Math.min(E,this.gameCanvas.height),this},snapshotPixel:function(p,v,m){return this.snapshotArea(p,v,1,1,m),this.snapshotState.getPixel=!0,this},batchSprite:function(p,v,m,E){var x=m.alpha*p.alpha;if(x!==0){var y=this.currentContext,S=this._tempMatrix1,C=this._tempMatrix2,I=v.canvasData,O=I.x,M=I.y,L=v.cutWidth,P=v.cutHeight,b=v.customPivot,B=v.source.resolution,U=p.displayOriginX,H=p.displayOriginY,Y=-U+v.x,j=-H+v.y;if(p.isCropped){var _=p._crop;(_.flipX!==p.flipX||_.flipY!==p.flipY)&&v.updateCropUVs(_,p.flipX,p.flipY),L=_.cw,P=_.ch,O=_.cx,M=_.cy,Y=-U+_.x,j=-H+_.y,p.flipX&&(Y>=0?Y=-(Y+L):Y<0&&(Y=Math.abs(Y)-L)),p.flipY&&(j>=0?j=-(j+P):j<0&&(j=Math.abs(j)-P))}var w=1,D=1;p.flipX&&(b||(Y+=-v.realWidth+U*2),w=-1),p.flipY&&(b||(j+=-v.realHeight+H*2),D=-1),C.applyITRS(p.x,p.y,p.rotation,p.scaleX*w,p.scaleY*D),S.copyFrom(m.matrix),E?(S.multiplyWithOffset(E,-m.scrollX*p.scrollFactorX,-m.scrollY*p.scrollFactorY),C.e=p.x,C.f=p.y):(C.e-=m.scrollX*p.scrollFactorX,C.f-=m.scrollY*p.scrollFactorY),S.multiply(C),y.save(),S.setToContext(y),y.globalCompositeOperation=this.blendModes[p.blendMode],y.globalAlpha=x,y.imageSmoothingEnabled=!(!this.antialias||v.source.scaleMode),p.mask&&p.mask.preRenderCanvas(this,p,m),y.drawImage(v.source.image,O,M,L,P,Y,j,L/B,P/B),p.mask&&p.mask.postRenderCanvas(this,p,m),y.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});c.exports=f},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(31),g=e(38),l=e(2),h=function(i,s){var n=l(s,"callback"),d=l(s,"type","image/png"),a=l(s,"encoder",.92),u=Math.abs(Math.round(l(s,"x",0))),f=Math.abs(Math.round(l(s,"y",0))),p=l(s,"width",i.width),v=l(s,"height",i.height),m=l(s,"getPixel",!1);if(m){var E=i.getContext("2d"),x=E.getImageData(u,f,1,1),y=x.data;n.call(null,new g(y[0],y[1],y[2],y[3]/255))}else if(u!==0||f!==0||p!==i.width||v!==i.height){var S=o.createWebGL(this,p,v),C=S.getContext("2d");C.drawImage(i,u,f,p,v,0,0,p,v);var I=new Image;I.onerror=function(){n.call(null),o.remove(S)},I.onload=function(){n.call(null,I),o.remove(S)},I.src=S.toDataURL(d,a)}else{var O=new Image;O.onerror=function(){n.call(null)},O.onload=function(){n.call(null,O)},O.src=i.toDataURL(d,a)}};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(35),g=e(348),l=function(){var h=[],i=g.supportNewBlendModes,s="source-over";return h[o.NORMAL]=s,h[o.ADD]="lighter",h[o.MULTIPLY]=i?"multiply":s,h[o.SCREEN]=i?"screen":s,h[o.OVERLAY]=i?"overlay":s,h[o.DARKEN]=i?"darken":s,h[o.LIGHTEN]=i?"lighten":s,h[o.COLOR_DODGE]=i?"color-dodge":s,h[o.COLOR_BURN]=i?"color-burn":s,h[o.HARD_LIGHT]=i?"hard-light":s,h[o.SOFT_LIGHT]=i?"soft-light":s,h[o.DIFFERENCE]=i?"difference":s,h[o.EXCLUSION]=i?"exclusion":s,h[o.HUE]=i?"hue":s,h[o.SATURATION]=i?"saturation":s,h[o.COLOR]=i?"color":s,h[o.LUMINOSITY]=i?"luminosity":s,h[o.ERASE]="destination-out",h[o.SOURCE_IN]="source-in",h[o.SOURCE_OUT]="source-out",h[o.SOURCE_ATOP]="source-atop",h[o.DESTINATION_OVER]="destination-over",h[o.DESTINATION_IN]="destination-in",h[o.DESTINATION_OUT]="destination-out",h[o.DESTINATION_ATOP]="destination-atop",h[o.LIGHTER]="lighter",h[o.COPY]="copy",h[o.XOR]="xor",h};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(93),g=e(37),l=e(0),h=e(33),i=e(9),s=e(91),n=e(22),d=e(138),a=e(69),u=e(1),f=e(372),p=e(141),v=e(104),m=e(106),E=e(12),x=e(383),y=new l({Extends:i,initialize:function(C){i.call(this);var I=C.config,O={alpha:I.transparent,desynchronized:I.desynchronized,depth:!1,antialias:I.antialiasGL,premultipliedAlpha:I.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:I.failIfMajorPerformanceCaveat,powerPreference:I.powerPreference,preserveDrawingBuffer:I.preserveDrawingBuffer};this.config={clearBeforeRender:I.clearBeforeRender,antialias:I.antialias,backgroundColor:I.backgroundColor,contextCreation:O,roundPixels:I.roundPixels,maxTextures:I.maxTextures,maxTextureSize:I.maxTextureSize,batchSize:I.batchSize,maxLights:I.maxLights,mipmapFilter:I.mipmapFilter},this.game=C,this.type=h.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=C.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=u,this.contextRestoredHandler=u,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(S){var C,I=this.game,O=this.canvas,M=S.backgroundColor;if(I.config.context?C=I.config.context:C=O.getContext("webgl",S.contextCreation)||O.getContext("experimental-webgl",S.contextCreation),!C||C.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=C;var L=this;this.contextLostHandler=function(N){L.contextLost=!0,L.game.events.emit(n.CONTEXT_LOST,L),N.preventDefault()},this.contextRestoredHandler=function(){L.contextLost=!1,L.init(L.config),L.game.events.emit(n.CONTEXT_RESTORED,L)},O.addEventListener("webglcontextlost",this.contextLostHandler,!1),O.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),I.context=C;for(var P=0;P<=27;P++)this.blendModes.push({func:[C.ONE,C.ONE_MINUS_SRC_ALPHA],equation:C.FUNC_ADD});this.blendModes[1].func=[C.ONE,C.DST_ALPHA],this.blendModes[2].func=[C.DST_COLOR,C.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[C.ONE,C.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[C.ZERO,C.ONE_MINUS_SRC_ALPHA],equation:C.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=C.BYTE,this.glFormats[1]=C.SHORT,this.glFormats[2]=C.UNSIGNED_BYTE,this.glFormats[3]=C.UNSIGNED_SHORT,this.glFormats[4]=C.FLOAT,this.glFuncMap={mat2:{func:C.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:C.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:C.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:C.uniform1f,length:1},"1fv":{func:C.uniform1fv,length:1},"1i":{func:C.uniform1i,length:1},"1iv":{func:C.uniform1iv,length:1},"2f":{func:C.uniform2f,length:2},"2fv":{func:C.uniform2fv,length:1},"2i":{func:C.uniform2i,length:2},"2iv":{func:C.uniform2iv,length:1},"3f":{func:C.uniform3f,length:3},"3fv":{func:C.uniform3fv,length:1},"3i":{func:C.uniform3i,length:3},"3iv":{func:C.uniform3iv,length:1},"4f":{func:C.uniform4f,length:4},"4fv":{func:C.uniform4fv,length:1},"4i":{func:C.uniform4i,length:4},"4iv":{func:C.uniform4iv,length:1}};var b=C.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=C.getParameter(C.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=C.getParameter(C.MAX_TEXTURE_SIZE));var B="WEBGL_compressed_texture_",U="WEBKIT_"+B;this.compression.ETC1=C.getExtension(B+"etc1")||C.getExtension(U+"etc1"),this.compression.PVRTC=C.getExtension(B+"pvrtc")||C.getExtension(U+"pvrtc"),this.compression.S3TC=C.getExtension(B+"s3tc")||C.getExtension(U+"s3tc"),this.supportedExtensions=b;var H="ANGLE_instanced_arrays";this.instancedArraysExtension=b.indexOf(H)>-1?C.getExtension(H):null;var Y="OES_vertex_array_object";this.vaoExtension=b.indexOf(Y)>-1?C.getExtension(Y):null,C.disable(C.DEPTH_TEST),C.disable(C.CULL_FACE),C.enable(C.BLEND),C.clearColor(M.redGL,M.greenGL,M.blueGL,M.alphaGL),this.mipmapFilter=C[S.mipmapFilter],this.maxTextures=E.checkShaderMax(C,S.maxTextures),this.textureIndexes=[];var j=this.tempTextures;if(Array.isArray(j))for(var _=0;P<this.maxTextures;_++)C.deleteTexture(j[_]);else j=new Array(this.maxTextures);for(var w=0;w<this.maxTextures;w++){var D=C.createTexture();C.activeTexture(C.TEXTURE0+w),C.bindTexture(C.TEXTURE_2D,D),C.texImage2D(C.TEXTURE_2D,0,C.RGBA,1,1,0,C.RGBA,C.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),j[w]=D,this.textureIndexes.push(w)}return this.tempTextures=j,this.currentActiveTexture=1,this.startActiveTexture++,C.activeTexture(C.TEXTURE1),this.pipelines=new f(this),this.setBlendMode(h.BlendModes.NORMAL),this.projectionMatrix=new a().identity(),I.textures.once(m.READY,this.boot,this),this},boot:function(){var S=this.game,C=this.pipelines,I=S.scale.baseSize;this.width=I.width,this.height=I.height,this.isBooted=!0,this.renderTarget=new p(this,this.width,this.height,1,0,!0,!0),C.boot(S.config.pipeline),this.blankTexture=S.textures.getFrame("__DEFAULT"),this.whiteTexture=S.textures.getFrame("__WHITE");var O=this.gl;O.bindFramebuffer(O.FRAMEBUFFER,null),O.enable(O.SCISSOR_TEST),S.scale.on(v.RESIZE,this.onResize,this),this.resize(I.width,I.height)},onResize:function(S,C){(C.width!==this.width||C.height!==this.height)&&this.resize(C.width,C.height)},beginCapture:function(S,C){S===void 0&&(S=this.width),C===void 0&&(C=this.height),this.renderTarget.bind(!0,S,C),this.setProjectionMatrix(S,C),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,C){var I=this.gl;return this.width=S,this.height=C,this.setProjectionMatrix(S,C),I.viewport(0,0,S,C),this.drawingBufferHeight=I.drawingBufferHeight,I.scissor(0,I.drawingBufferHeight-C,S,C),this.defaultScissor[2]=S,this.defaultScissor[3]=C,this.emit(s.RESIZE,S,C),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,C){return(S!==this.projectionWidth||C!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=C,this.projectionMatrix.ortho(0,S,C,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,C,I,O,M){M===void 0&&(M=this.drawingBufferHeight);var L=this.scissorStack,P=[S,C,I,O];return L.push(P),this.setScissor(S,C,I,O,M),this.currentScissor=P,P},setScissor:function(S,C,I,O,M){M===void 0&&(M=this.drawingBufferHeight);var L=this.gl,P=this.currentScissor,b=I>0&&O>0;if(P&&b){var B=P[0],U=P[1],H=P[2],Y=P[3];b=B!==S||U!==C||H!==I||Y!==O}b&&(this.flush(),L.scissor(S,M-C-O,I,O))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var C=this.currentScissor;if(C){var I=C[0],O=C[1],M=C[2],L=C[3];M>0&&L>0&&S.scissor(I,this.drawingBufferHeight-O-L,M,L)}},popScissor:function(){var S=this.scissorStack;S.pop();var C=S[S.length-1];C&&this.setScissor(C[0],C[1],C[2],C[3]),this.currentScissor=C},hasActiveStencilMask:function(){var S=this.currentMask.mask,C=this.currentCameraMask.mask;return S&&S.isStencil||C&&C.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,C){C===void 0&&(C=!1);var I=this.gl,O=this.blendModes[S];return C||S!==h.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),I.enable(I.BLEND),I.blendEquation(O.equation),O.func.length>2?I.blendFuncSeparate(O.func[0],O.func[1],O.func[2],O.func[3]):I.blendFunc(O.func[0],O.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,C){var I=this.blendModes.push({func:S,equation:C});return I-1},updateBlendMode:function(S,C,I){return this.blendModes[S]&&(this.blendModes[S].func=C,I&&(this.blendModes[S].equation=I)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S.glTexture,!0),0;var C=this.gl,I=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,I<this.maxTextures?(S.glIndex=I,C.activeTexture(C.TEXTURE0+I),C.bindTexture(C.TEXTURE_2D,S.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,S.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},isNewNormalMap:function(S,C){return this.textureZero!==S||this.normalTexture!==C},setTextureZero:function(S,C){if(this.textureZero!==S){C&&this.flush();var I=this.gl;I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,S),this.textureZero=S}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(S){if(this.normalTexture!==S){var C=this.gl;C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,S),this.normalTexture=S,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var S=this.gl,C=this.tempTextures,I=0;I<C.length;I++)S.activeTexture(S.TEXTURE0+I),S.bindTexture(S.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(S){if(S===void 0&&(S=!1),!this.isTextureClean){this.flush();var C=this.gl,I=this.tempTextures;if(S){for(var O=0;O<I.length;O++)C.activeTexture(C.TEXTURE0+O),C.bindTexture(C.TEXTURE_2D,I[O]);C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,I[1]),this.isTextureClean=!0}else C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,I[0]),C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,I[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S,!0),0;var C=this.gl,I=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,I<this.maxTextures?(S.glIndex=I,C.activeTexture(C.TEXTURE0+I),C.bindTexture(C.TEXTURE_2D,S),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,S),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},pushFramebuffer:function(S,C,I,O){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,C,I,O))},setFramebuffer:function(S,C,I,O){if(C===void 0&&(C=!1),I===void 0&&(I=!1),O===void 0&&(O=!0),S===this.currentFramebuffer)return this;var M=this.gl,L=this.width,P=this.height;return S&&S.renderTexture&&O?(L=S.renderTexture.width,P=S.renderTexture.height):this.flush(),M.bindFramebuffer(M.FRAMEBUFFER,S),O&&M.viewport(0,0,L,P),C&&(S?(this.drawingBufferHeight=P,this.pushScissor(0,0,L,P)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,I&&this.resetTextures(),this},popFramebuffer:function(S,C,I){S===void 0&&(S=!1),C===void 0&&(C=!1),I===void 0&&(I=!0);var O=this.fboStack;O.pop();var M=O[O.length-1];return M||(M=null),this.setFramebuffer(M,S,C,I),M},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,C,I,O){var M=this.gl,L=M.NEAREST,P=M.NEAREST,b=M.CLAMP_TO_EDGE,B=null;C=S?S.width:C,I=S?S.height:I;var U=d(C,I);return U&&(b=M.REPEAT),O===h.ScaleModes.LINEAR&&this.config.antialias&&(L=U?this.mipmapFilter:M.LINEAR,P=M.LINEAR),!S&&typeof C=="number"&&typeof I=="number"?B=this.createTexture2D(0,L,P,b,b,M.RGBA,null,C,I):B=this.createTexture2D(0,L,P,b,b,M.RGBA,S),B},createTexture2D:function(S,C,I,O,M,L,P,b,B,U,H,Y){U=U==null?!0:U,H===void 0&&(H=!1),Y===void 0&&(Y=!1);var j=this.gl,_=j.createTexture();j.activeTexture(j.TEXTURE0);var w=j.getParameter(j.TEXTURE_BINDING_2D);return j.bindTexture(j.TEXTURE_2D,_),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,C),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,I),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,M),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,O),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,Y),P==null?j.texImage2D(j.TEXTURE_2D,S,L,b,B,0,L,j.UNSIGNED_BYTE,null):(H||(b=P.width,B=P.height),j.texImage2D(j.TEXTURE_2D,S,L,L,j.UNSIGNED_BYTE,P)),d(b,B)&&j.generateMipmap(j.TEXTURE_2D),w&&j.bindTexture(j.TEXTURE_2D,w),_.isAlphaPremultiplied=U,_.isRenderTexture=!1,_.width=b,_.height=B,_.glIndex=0,_.glIndexCounter=-1,_},createFramebuffer:function(S,C,I,O){var M=this.gl,L=M.createFramebuffer(),P=0;if(this.setFramebuffer(L),O){var b=M.createRenderbuffer();M.bindRenderbuffer(M.RENDERBUFFER,b),M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_STENCIL,S,C),M.framebufferRenderbuffer(M.FRAMEBUFFER,M.DEPTH_STENCIL_ATTACHMENT,M.RENDERBUFFER,b)}if(I.isRenderTexture=!0,I.isAlphaPremultiplied=!1,M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,I,0),P=M.checkFramebufferStatus(M.FRAMEBUFFER),P!==M.FRAMEBUFFER_COMPLETE){var B={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+B[P])}return L.renderTexture=I,this.setFramebuffer(null),this.resetTextures(),L},createProgram:function(S,C){var I=this.gl,O=I.createProgram(),M=I.createShader(I.VERTEX_SHADER),L=I.createShader(I.FRAGMENT_SHADER);if(I.shaderSource(M,S),I.shaderSource(L,C),I.compileShader(M),I.compileShader(L),!I.getShaderParameter(M,I.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+I.getShaderInfoLog(M));if(!I.getShaderParameter(L,I.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+I.getShaderInfoLog(L));if(I.attachShader(O,M),I.attachShader(O,L),I.linkProgram(O),!I.getProgramParameter(O,I.LINK_STATUS))throw new Error(`Link Program failed:
`+I.getProgramInfoLog(O));return I.useProgram(O),O},createVertexBuffer:function(S,C){var I=this.gl,O=I.createBuffer();return I.bindBuffer(I.ARRAY_BUFFER,O),I.bufferData(I.ARRAY_BUFFER,S,C),I.bindBuffer(I.ARRAY_BUFFER,null),O},createIndexBuffer:function(S,C){var I=this.gl,O=I.createBuffer();return I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,O),I.bufferData(I.ELEMENT_ARRAY_BUFFER,S,C),I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,null),O},deleteTexture:function(S,C){return C&&this.resetTextures(!0),S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){return S&&(this.gl.deleteFramebuffer(S),o(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)),this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var C=S.x,I=S.y,O=S.width,M=S.height,L=S.backgroundColor;if(S.emit(g.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(C,I,O,M),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),L.alphaGL>0){var P=this.pipelines.setMulti();P.drawFillRect(C,I,O,M,E.getTintFromFloats(L.blueGL,L.greenGL,L.redGL,1),L.alphaGL)}},getCurrentStencilMask:function(){var S=null,C=this.maskStack,I=this.currentCameraMask;return C.length>0?S=C[C.length-1]:I.mask&&I.mask.isStencil&&(S=I),S},postRenderCamera:function(S){var C=S.flashEffect,I=S.fadeEffect;if(C.isRunning||I.isRunning||I.isComplete){var O=this.pipelines.setMulti();C.postRenderWebGL(O,E.getTintFromFloats),I.postRenderWebGL(O,E.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(g.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var C=this.config.backgroundColor;S.clearColor(C.redGL,C.greenGL,C.blueGL,C.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(s.PRE_RENDER)}},render:function(S,C,I){if(!this.contextLost){var O=C.length;if(this.emit(s.RENDER,S,I),this.preRenderCamera(I),O===0){this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(I);return}this.currentType="";for(var M=this.currentMask,L=0;L<O;L++){this.finalType=L===O-1;var P=C[L],b=P.mask;M=this.currentMask,M.mask&&M.mask!==b&&M.mask.postRenderWebGL(this,M.camera),b&&M.mask!==b&&b.preRenderWebGL(this,P,I),P.blendMode!==this.currentBlendMode&&this.setBlendMode(P.blendMode);var B=P.type;B!==this.currentType&&(this.newType=!0,this.currentType=B),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=C[L+1].type===this.currentType,P.renderWebGL(this,P,I),this.newType=!1}M=this.currentMask,M.mask&&M.mask.postRenderWebGL(this,M.camera),this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(I)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(s.POST_RENDER);var S=this.snapshotState;S.callback&&(x(this.canvas,S),S.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(S,C,I){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,C,I)},snapshotArea:function(S,C,I,O,M,L,P){var b=this.snapshotState;return b.callback=M,b.type=L,b.encoder=P,b.getPixel=!1,b.x=S,b.y=C,b.width=Math.min(I,this.gl.drawingBufferWidth),b.height=Math.min(O,this.gl.drawingBufferHeight),this},snapshotPixel:function(S,C,I){return this.snapshotArea(S,C,1,1,I),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,C,I,O,M,L,P,b,B,U,H){M===void 0&&(M=!1),L===void 0&&(L=0),P===void 0&&(P=0),b===void 0&&(b=C),B===void 0&&(B=I);var Y=this.currentFramebuffer;this.snapshotArea(L,P,b,B,O,U,H);var j=this.snapshotState;return j.getPixel=M,j.isFramebuffer=!0,j.bufferWidth=C,j.bufferHeight=I,this.setFramebuffer(S),x(this.canvas,j),this.setFramebuffer(Y),j.callback=null,j.isFramebuffer=!1,this},canvasToTexture:function(S,C,I,O){return I===void 0&&(I=!1),O===void 0&&(O=!1),C?this.updateCanvasTexture(S,C,O):this.createCanvasTexture(S,I,O)},createCanvasTexture:function(S,C,I){C===void 0&&(C=!1),I===void 0&&(I=!1);var O=this.gl,M=O.NEAREST,L=O.NEAREST,P=S.width,b=S.height,B=O.CLAMP_TO_EDGE,U=d(P,b);return!C&&U&&(B=O.REPEAT),this.config.antialias&&(M=U?this.mipmapFilter:O.LINEAR,L=O.LINEAR),this.createTexture2D(0,M,L,B,B,O.RGBA,S,P,b,!0,!1,I)},updateCanvasTexture:function(S,C,I){I===void 0&&(I=!1);var O=this.gl,M=S.width,L=S.height;if(M>0&&L>0){O.activeTexture(O.TEXTURE0);var P=O.getParameter(O.TEXTURE_BINDING_2D);O.bindTexture(O.TEXTURE_2D,C),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,I),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,S),C.width=M,C.height=L,P&&O.bindTexture(O.TEXTURE_2D,P)}return C},createVideoTexture:function(S,C,I){C===void 0&&(C=!1),I===void 0&&(I=!1);var O=this.gl,M=O.NEAREST,L=O.NEAREST,P=S.videoWidth,b=S.videoHeight,B=O.CLAMP_TO_EDGE,U=d(P,b);return!C&&U&&(B=O.REPEAT),this.config.antialias&&(M=U?this.mipmapFilter:O.LINEAR,L=O.LINEAR),this.createTexture2D(0,M,L,B,B,O.RGBA,S,P,b,!0,!0,I)},updateVideoTexture:function(S,C,I){I===void 0&&(I=!1);var O=this.gl,M=S.videoWidth,L=S.videoHeight;if(M>0&&L>0){O.activeTexture(O.TEXTURE0);var P=O.getParameter(O.TEXTURE_BINDING_2D);O.bindTexture(O.TEXTURE_2D,C),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,I),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,S),C.width=M,C.height=L,P&&O.bindTexture(O.TEXTURE_2D,P)}return C},setTextureFilter:function(S,C){var I=this.gl,O=[I.LINEAR,I.NEAREST][C];I.activeTexture(I.TEXTURE0);var M=I.getParameter(I.TEXTURE_BINDING_2D);return I.bindTexture(I.TEXTURE_2D,S),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,O),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,O),M&&I.bindTexture(I.TEXTURE_2D,M),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var S=this.gl,C=this.tempTextures,I=0;I<C.length;I++)S.deleteTexture(C[I]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});c.exports=y},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(92),l=e(102),h=e(373),i=e(376),s=e(377),n=e(108),d=e(378),a=e(379),u=e(380),f=e(381),p=new o({initialize:function(m){this.game=m.game,this.renderer=m,this.classes=new l([[g.UTILITY_PIPELINE,f],[g.MULTI_PIPELINE,n],[g.BITMAPMASK_PIPELINE,h],[g.SINGLE_PIPELINE,u],[g.ROPE_PIPELINE,a],[g.LIGHT_PIPELINE,s],[g.POINTLIGHT_PIPELINE,d],[g.GRAPHICS_PIPELINE,i]]),this.postPipelineClasses=new l,this.pipelines=new l,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(v){var m,E,x=this,y=this.game;if(this.classes.each(function(C,I){m=x.add(C,new I({game:y})),C===g.UTILITY_PIPELINE&&(x.UTILITY_PIPELINE=m,x.fullFrame1=m.fullFrame1,x.fullFrame2=m.fullFrame2,x.halfFrame1=m.halfFrame1,x.halfFrame2=m.halfFrame2)}),this.MULTI_PIPELINE=this.get(g.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(g.BITMAPMASK_PIPELINE),v)for(E in v){var S=v[E];m=new S(y),m.isPostFX?this.postPipelineClasses.set(E,S):this.has(E)||(this.classes.set(E,S),this.add(E,m))}},add:function(v,m){if(m.isPostFX){console.warn(v+" is a Post Pipeline. Use `addPostPipeline` instead");return}var E=this.pipelines,x=this.renderer;return E.has(v)?console.warn("Pipeline exists: "+v):(m.name=v,m.manager=this,E.set(v,m)),m.hasBooted||m.boot(),x.width!==0&&x.height!==0&&m.resize(x.width,x.height),m},addPostPipeline:function(v,m){this.postPipelineClasses.has(v)||this.postPipelineClasses.set(v,m)},flush:function(){this.current&&this.current.flush()},has:function(v){var m=this.pipelines;return typeof v=="string"?m.has(v):!!m.contains(v)},get:function(v){var m=this.pipelines;if(typeof v=="string")return m.get(v);if(m.contains(v))return v},getPostPipeline:function(v,m){var E=this.postPipelineClasses,x;if(typeof v=="string"?x=E.get(v):typeof v=="function"?E.contains(v)&&(x=v):typeof v=="object"&&(x=E.get(v.name)),x){var y=new x(this.game);return m&&(y.gameObject=m),y}},remove:function(v,m,E){m===void 0&&(m=!0),E===void 0&&(E=!0),this.pipelines.delete(v),m&&this.classes.delete(v),E&&this.postPipelineClasses.delete(v)},set:function(v,m,E){if(!v.isPostFX)return this.isCurrent(v,E)||(this.flush(),this.current&&this.current.unbind(),this.current=v,v.bind(E)),v.updateProjectionMatrix(),v.onBind(m),v},preBatch:function(v){if(v.hasPostPipeline){this.flush();for(var m=v.postPipelines,E=m.length-1;E>=0;E--){var x=m[E];x.active&&x.preBatch(v)}}},postBatch:function(v){if(v.hasPostPipeline){this.flush();for(var m=v.postPipelines,E=0;E<m.length;E++){var x=m[E];x.active&&x.postBatch(v)}}},preBatchCamera:function(v){if(v.hasPostPipeline){this.flush();for(var m=v.postPipelines,E=m.length-1;E>=0;E--){var x=m[E];x.active&&x.preBatch(v)}}},postBatchCamera:function(v){if(v.hasPostPipeline){this.flush();for(var m=v.postPipelines,E=0;E<m.length;E++){var x=m[E];x.active&&x.postBatch(v)}}},isCurrent:function(v,m){var E=this.renderer,x=this.current;return x&&!m&&(m=x.currentShader),!(x!==v||m.program!==E.currentProgram)},copyFrame:function(v,m,E,x,y){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(v,m,E,x,y),this},copyToGame:function(v){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(v),this},drawFrame:function(v,m,E,x){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(v,m,E,x),this},blendFrames:function(v,m,E,x,y){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(v,m,E,x,y),this},blendFramesAdditive:function(v,m,E,x,y){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(v,m,E,x,y),this},clearFrame:function(v,m){return this.UTILITY_PIPELINE.clearFrame(v,m),this},blitFrame:function(v,m,E,x,y,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(v,m,E,x,y,S),this},copyFrameRect:function(v,m,E,x,y,S,C,I){return this.UTILITY_PIPELINE.copyFrameRect(v,m,E,x,y,S,C,I),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(v){return this.UTILITY_PIPELINE.bind(v)},rebind:function(v){v===void 0&&this.previous&&(v=this.previous);var m=this.renderer,E=m.gl;E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),m.hasActiveStencilMask()?E.clear(E.DEPTH_BUFFER_BIT):(E.disable(E.STENCIL_TEST),E.clear(E.DEPTH_BUFFER_BIT|E.STENCIL_BUFFER_BIT)),E.viewport(0,0,m.width,m.height),m.currentProgram=null,m.setBlendMode(0,!0);var x=this.pipelines.entries;for(var y in x)x[y].glReset=!0;v&&(this.current=v,v.rebind()),m.resetTextures()},clear:function(){var v=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,v.currentProgram=null,v.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});c.exports=p},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(2),l=e(866),h=e(867),i=e(107),s=e(58),n=new o({Extends:s,initialize:function(a){a.fragShader=g(a,"fragShader",l),a.vertShader=g(a,"vertShader",h),a.batchSize=g(a,"batchSize",1),a.vertices=g(a,"vertices",[-1,1,-1,-7,7,1]),a.attributes=g(a,"attributes",[{name:"inPosition",size:2,type:i.FLOAT}]),s.call(this,a)},boot:function(){s.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(d,a){s.prototype.resize.call(this,d,a),this.set2f("uResolution",d,a)},beginMask:function(d,a,u){var f=this.gl;if(d.bitmapMask&&f){var p=this.renderer;p.flush(),p.pushFramebuffer(d.mainFramebuffer),f.disable(f.STENCIL_TEST),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT),p.currentCameraMask.mask!==d&&(p.currentMask.mask=d,p.currentMask.camera=u)}},endMask:function(d,a){var u=this.gl,f=this.renderer,p=d.bitmapMask;if(p&&u){f.flush(),f.pushFramebuffer(d.maskFramebuffer),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),f.setBlendMode(0,!0),p.renderWebGL(f,p,a),f.flush(),f.popFramebuffer(),f.popFramebuffer();var v=f.getCurrentStencilMask();v?(u.enable(u.STENCIL_TEST),v.mask.applyStencil(f,v.camera,!0)):f.currentMask.mask=null,f.pipelines.set(this),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,d.maskTexture),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,d.mainTexture),this.set1i("uInvertMaskAlpha",d.invertAlpha),u.drawArrays(this.topology,0,3),f.resetTextures()}}});c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AFTER_FLUSH:e(868),BEFORE_FLUSH:e(869),BIND:e(870),BOOT:e(871),DESTROY:e(872),REBIND:e(873),RESIZE:e(874)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(2),l=e(107),h=new o({initialize:function(s,n,d,a,u){this.pipeline=s,this.name=n,this.renderer=s.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(d,a),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(u),this.createUniforms()},createAttributes:function(i){var s=0,n=0,d=[];this.vertexComponentCount=0;for(var a=0;a<i.length;a++){var u=i[a],f=u.name,p=g(u,"size",1),v=g(u,"type",l.FLOAT),m=v.enum,E=v.size,x=!!u.normalized;d.push({name:f,size:p,type:m,normalized:x,offset:n,enabled:!1,location:-1}),E===4?s+=p:s++,n+=p*E}this.vertexSize=n,this.vertexComponentCount=s,this.attributes=d},bind:function(i,s){return i===void 0&&(i=!1),s===void 0&&(s=!1),s&&this.pipeline.flush(),this.renderer.setProgram(this.program),i&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(i){i===void 0&&(i=!1);for(var s=this.gl,n=this.vertexSize,d=this.attributes,a=this.program,u=0;u<d.length;u++){var f=d[u],p=f.size,v=f.type,m=f.offset,E=f.enabled,x=f.location,y=!!f.normalized;if(i){var S=s.getAttribLocation(a,f.name);S>=0?(s.enableVertexAttribArray(S),s.vertexAttribPointer(S,p,v,y,n,m),f.enabled=!0,f.location=S):S!==-1&&s.disableVertexAttribArray(S)}else E?s.vertexAttribPointer(x,p,v,y,n,m):!E&&x>-1&&(s.disableVertexAttribArray(x),f.location=-1)}return this},createUniforms:function(){var i=this.gl,s=this.program,n=this.uniforms,d,a,u,f=i.getProgramParameter(s,i.ACTIVE_UNIFORMS);for(d=0;d<f;d++){var p=i.getActiveUniform(s,d);if(p){a=p.name,u=i.getUniformLocation(s,a),u!==null&&(n[a]={name:a,location:u,value1:null,value2:null,value3:null,value4:null});var v=a.indexOf("[");v>0&&(a=a.substr(0,v),n.hasOwnProperty(a)||(u=i.getUniformLocation(s,a),u!==null&&(n[a]={name:a,location:u,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(i){return this.uniforms.hasOwnProperty(i)},resetUniform:function(i){var s=this.uniforms[i];return s&&(s.value1=null,s.value2=null,s.value3=null,s.value4=null),this},setUniform1:function(i,s,n,d){var a=this.uniforms[s];return a?((d||a.value1!==n)&&(a.value1=n,this.renderer.setProgram(this.program),i.call(this.gl,a.location,n),this.pipeline.currentShader=this),this):this},setUniform2:function(i,s,n,d,a){var u=this.uniforms[s];return u?((a||u.value1!==n||u.value2!==d)&&(u.value1=n,u.value2=d,this.renderer.setProgram(this.program),i.call(this.gl,u.location,n,d),this.pipeline.currentShader=this),this):this},setUniform3:function(i,s,n,d,a,u){var f=this.uniforms[s];return f?((u||f.value1!==n||f.value2!==d||f.value3!==a)&&(f.value1=n,f.value2=d,f.value3=a,this.renderer.setProgram(this.program),i.call(this.gl,f.location,n,d,a),this.pipeline.currentShader=this),this):this},setUniform4:function(i,s,n,d,a,u,f){var p=this.uniforms[s];return p?((f||p.value1!==n||p.value2!==d||p.value3!==a||p.value4!==u)&&(p.value1=n,p.value2=d,p.value3=a,p.value4=u,this.renderer.setProgram(this.program),i.call(this.gl,p.location,n,d,a,u),this.pipeline.currentShader=this),this):this},set1f:function(i,s){return this.setUniform1(this.gl.uniform1f,i,s)},set2f:function(i,s,n){return this.setUniform2(this.gl.uniform2f,i,s,n)},set3f:function(i,s,n,d){return this.setUniform3(this.gl.uniform3f,i,s,n,d)},set4f:function(i,s,n,d,a){return this.setUniform4(this.gl.uniform4f,i,s,n,d,a)},set1fv:function(i,s){return this.setUniform1(this.gl.uniform1fv,i,s,!0)},set2fv:function(i,s){return this.setUniform1(this.gl.uniform2fv,i,s,!0)},set3fv:function(i,s){return this.setUniform1(this.gl.uniform3fv,i,s,!0)},set4fv:function(i,s){return this.setUniform1(this.gl.uniform4fv,i,s,!0)},set1iv:function(i,s){return this.setUniform1(this.gl.uniform1iv,i,s,!0)},set2iv:function(i,s){return this.setUniform1(this.gl.uniform2iv,i,s,!0)},set3iv:function(i,s){return this.setUniform1(this.gl.uniform3iv,i,s,!0)},set4iv:function(i,s){return this.setUniform1(this.gl.uniform4iv,i,s,!0)},set1i:function(i,s){return this.setUniform1(this.gl.uniform1i,i,s)},set2i:function(i,s,n){return this.setUniform2(this.gl.uniform2i,i,s,n)},set3i:function(i,s,n,d){return this.setUniform3(this.gl.uniform3i,i,s,n,d)},set4i:function(i,s,n,d,a){return this.setUniform4(this.gl.uniform4i,i,s,n,d,a)},setMatrix2fv:function(i,s,n){return this.setUniform2(this.gl.uniformMatrix2fv,i,s,n,!0)},setMatrix3fv:function(i,s,n){return this.setUniform2(this.gl.uniformMatrix3fv,i,s,n,!0)},setMatrix4fv:function(i,s,n){return this.setUniform2(this.gl.uniformMatrix4fv,i,s,n,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(59),l=e(2),h=e(875),i=e(876),s=e(25),n=e(107),d=e(58),a=new o({Extends:d,initialize:function(f){f.fragShader=l(f,"fragShader",h),f.vertShader=l(f,"vertShader",i),f.attributes=l(f,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),d.call(this,f),this.calcMatrix=new s,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(u,f,p,v,m,E){this.renderer.pipelines.set(this);var x=this.calcMatrix;E&&E.multiply(m,x);var y=u+p,S=f+v,C=x.getX(u,f),I=x.getY(u,f),O=x.getX(u,S),M=x.getY(u,S),L=x.getX(y,S),P=x.getY(y,S),b=x.getX(y,f),B=x.getY(y,f),U=this.fillTint;this.batchQuad(C,I,O,M,L,P,b,B,U.TL,U.TR,U.BL,U.BR)},batchFillTriangle:function(u,f,p,v,m,E,x,y){this.renderer.pipelines.set(this);var S=this.calcMatrix;y&&y.multiply(x,S);var C=S.getX(u,f),I=S.getY(u,f),O=S.getX(p,v),M=S.getY(p,v),L=S.getX(m,E),P=S.getY(m,E),b=this.fillTint;this.batchTri(C,I,O,M,L,P,b.TL,b.TR,b.BL)},batchStrokeTriangle:function(u,f,p,v,m,E,x,y,S){var C=this.tempTriangle;C[0].x=u,C[0].y=f,C[0].width=x,C[1].x=p,C[1].y=v,C[1].width=x,C[2].x=m,C[2].y=E,C[2].width=x,C[3].x=u,C[3].y=f,C[3].width=x,this.batchStrokePath(C,x,!1,y,S)},batchFillPath:function(u,f,p){this.renderer.pipelines.set(this);var v=this.calcMatrix;p&&p.multiply(f,v);for(var m=u.length,E=this.polygonCache,x,y,S=this.fillTint.TL,C=this.fillTint.TR,I=this.fillTint.BL,O=0;O<m;++O)y=u[O],E.push(y.x,y.y);x=g(E),m=x.length;for(var M=0;M<m;M+=3){var L=x[M+0]*2,P=x[M+1]*2,b=x[M+2]*2,B=E[L+0],U=E[L+1],H=E[P+0],Y=E[P+1],j=E[b+0],_=E[b+1],w=v.getX(B,U),D=v.getY(B,U),N=v.getX(H,Y),G=v.getY(H,Y),k=v.getX(j,_),V=v.getY(j,_);this.batchTri(w,D,N,G,k,V,S,C,I)}E.length=0},batchStrokePath:function(u,f,p,v,m){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var E=u.length-1,x=0;x<E;x++){var y=u[x],S=u[x+1];this.batchLine(y.x,y.y,S.x,S.y,y.width/2,S.width/2,f,x,!p&&x===E-1,v,m)}},batchLine:function(u,f,p,v,m,E,x,y,S,C,I){this.renderer.pipelines.set(this);var O=this.calcMatrix;I&&I.multiply(C,O);var M=p-u,L=v-f,P=Math.sqrt(M*M+L*L),b=m*(v-f)/P,B=m*(u-p)/P,U=E*(v-f)/P,H=E*(u-p)/P,Y=p-U,j=v-H,_=u-b,w=f-B,D=p+U,N=v+H,G=u+b,k=f+B,V=O.getX(Y,j),X=O.getY(Y,j),K=O.getX(_,w),tt=O.getY(_,w),st=O.getX(D,N),rt=O.getY(D,N),ht=O.getX(G,k),ut=O.getY(G,k),mt=this.strokeTint,pt=mt.TL,Tt=mt.TR,Nt=mt.BL,Ct=mt.BR;if(this.batchQuad(ht,ut,K,tt,V,X,st,rt,pt,Tt,Nt,Ct),!(x<=2)){var $t=this.prevQuad,vt=this.firstQuad;y>0&&$t[4]?this.batchQuad(ht,ut,K,tt,$t[0],$t[1],$t[2],$t[3],pt,Tt,Nt,Ct):(vt[0]=ht,vt[1]=ut,vt[2]=K,vt[3]=tt,vt[4]=1),S&&vt[4]?this.batchQuad(V,X,st,rt,vt[0],vt[1],vt[2],vt[3],pt,Tt,Nt,Ct):($t[0]=V,$t[1]=X,$t[2]=st,$t[3]=rt,$t[4]=1)}},batchVert:function(u,f,p){var v=this.vertexViewF32,m=this.vertexViewU32,E=this.vertexCount*this.currentShader.vertexComponentCount-1;v[++E]=u,v[++E]=f,m[++E]=p,this.vertexCount++},batchQuad:function(u,f,p,v,m,E,x,y,S,C,I,O){var M=!1;return this.shouldFlush(6)&&(this.flush(),M=!0),this.batchVert(u,f,S),this.batchVert(p,v,I),this.batchVert(m,E,O),this.batchVert(u,f,S),this.batchVert(m,E,O),this.batchVert(x,y,C),M},batchTri:function(u,f,p,v,m,E,x,y,S){var C=!1;return this.shouldFlush(3)&&(this.flush(),C=!0),this.batchVert(u,f,x),this.batchVert(p,v,y),this.batchVert(m,E,S),C},destroy:function(){return d.prototype.destroy.call(this),this.polygonCache=null,this}});c.exports=a},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(2),l=e(877),h=e(108),i=e(3),s=e(58),n=10,d=new i,a=new o({Extends:h,initialize:function(f){n=f.game.renderer.config.maxLights;for(var p=g(f,"fragShader",l),v=[],m=1;m<=n;m++)v.push({name:"lights"+m,fragShader:p.replace("%LIGHT_COUNT%",m.toString())});f.shaders=v,h.call(this,f),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){s.prototype.boot.call(this);var u=this.gl,f=u.createTexture();u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,f),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:f};for(var p=0;p<this.shaders.length;p++)this["lightShader"+(p+1)]=this.shaders[p]},onRender:function(u,f){var p=u.sys.lights;if(this.lightsActive=!1,!(!p||!p.active)){var v=p.getLights(f),m=v.length;if(m!==0){this.lightsActive=!0,this.setShader(this["lightShader"+m],!0);var E,x=this.renderer,y=x.height,S=f.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",f.x,f.y,f.rotation,f.zoom),this.set3f("uAmbientLightColor",p.ambientColor.r,p.ambientColor.g,p.ambientColor.b),E=0;E<m;E++){var C=v[E].light,I=C.color,O="uLights["+E+"].";S.transformPoint(C.x,C.y,d),this.set2f(O+"position",d.x-f.scrollX*C.scrollFactorX*f.zoom,y-(d.y-f.scrollY*C.scrollFactorY*f.zoom)),this.set3f(O+"color",I.r,I.g,I.b),this.set1f(O+"intensity",C.intensity),this.set1f(O+"radius",C.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(u){if(u!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var f=this.inverseRotationMatrix;if(u){var p=-u,v=Math.cos(p),m=Math.sin(p);f[1]=m,f[3]=-m,f[0]=f[4]=v}else f[0]=f[4]=1,f[1]=f[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,f),this.currentNormalMapRotation=u}},setTexture2D:function(u,f){var p=this.renderer;u===void 0&&(u=p.tempTextures[0]);var v=this.getNormalMap(f);p.isNewNormalMap(u,v)&&(this.flush(),p.setTextureZero(u),p.setNormalMap(v));var m=f?f.rotation:0;return this.setNormalMapRotation(m),this.currentUnit=0,0},setGameObject:function(u,f){f===void 0&&(f=u.frame);var p=this.renderer,v=f.glTexture,m=this.getNormalMap(u);return p.isNewNormalMap()&&(this.flush(),p.setTextureZero(v),p.setNormalMap(m)),this.setNormalMapRotation(u.rotation),this.currentUnit=0,0},getNormalMap:function(u){var f;return u?u.displayTexture?f=u.displayTexture.dataSource[u.displayFrame.sourceIndex]:u.texture?f=u.texture.dataSource[u.frame.sourceIndex]:u.tileset&&(Array.isArray(u.tileset)?f=u.tileset[0].image.dataSource[0]:f=u.tileset.image.dataSource[0]):f=this.defaultNormalMap,f||(f=this.defaultNormalMap),f.glTexture},batchSprite:function(u,f,p){this.lightsActive&&h.prototype.batchSprite.call(this,u,f,p)},batchTexture:function(u,f,p,v,m,E,x,y,S,C,I,O,M,L,P,b,B,U,H,Y,j,_,w,D,N,G,k,V,X,K,tt,st){this.lightsActive&&h.prototype.batchTexture.call(this,u,f,p,v,m,E,x,y,S,C,I,O,M,L,P,b,B,U,H,Y,j,_,w,D,N,G,k,V,X,K,tt,st)},batchTextureFrame:function(u,f,p,v,m,E,x){this.lightsActive&&h.prototype.batchTextureFrame.call(this,u,f,p,v,m,E,x)}});a.LIGHT_COUNT=n,c.exports=a},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(2),l=e(880),h=e(881),i=e(58),s=new o({Extends:i,initialize:function(d){d.vertShader=g(d,"vertShader",h),d.fragShader=g(d,"fragShader",l),d.attributes=g(d,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),i.call(this,d)},onRender:function(n,d){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",d.zoom)},batchPointLight:function(n,d,a,u,f,p,v,m,E,x,y,S){var C=n.color,I=n.intensity,O=n.radius,M=n.attenuation,L=C.r*I,P=C.g*I,b=C.b*I,B=d.alpha*n.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(a,u,y,S,O,M,L,P,b,B),this.batchLightVert(f,p,y,S,O,M,L,P,b,B),this.batchLightVert(v,m,y,S,O,M,L,P,b,B),this.batchLightVert(a,u,y,S,O,M,L,P,b,B),this.batchLightVert(v,m,y,S,O,M,L,P,b,B),this.batchLightVert(E,x,y,S,O,M,L,P,b,B)},batchLightVert:function(n,d,a,u,f,p,v,m,E,x){var y=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;y[++S]=n,y[++S]=d,y[++S]=a,y[++S]=u,y[++S]=f,y[++S]=p,y[++S]=v,y[++S]=m,y[++S]=E,y[++S]=x,this.vertexCount++}});c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(2),l=e(108),h=new o({Extends:l,initialize:function(s){s.topology=5,s.batchSize=g(s,"batchSize",256),l.call(this,s)}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(2),l=e(108),h=e(882),i=e(883),s=e(58),n=new o({Extends:l,initialize:function(a){a.fragShader=g(a,"fragShader",h),a.vertShader=g(a,"vertShader",i),a.forceZero=!0,l.call(this,a)},boot:function(){s.prototype.boot.call(this),this.set1i("uMainSampler",0)}});c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(884),g=e(35),l=e(0),h=e(198),i=e(885),s=e(886),n=e(2),d=e(887),a=e(382),u=e(58),f=new l({Extends:u,initialize:function(v){v.renderTarget=n(v,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),v.vertShader=n(v,"vertShader",a),v.shaders=n(v,"shaders",[{name:"Copy",fragShader:s},{name:"AddBlend",fragShader:o},{name:"LinearBlend",fragShader:d},{name:"ColorMatrix",fragShader:i}]),v.attributes=n(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),v.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],v.batchSize=1,u.call(this,v),this.colorMatrix=new h,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){u.prototype.boot.call(this);var p=this.shaders,v=this.renderTargets;this.copyShader=p[0],this.addShader=p[1],this.linearShader=p[2],this.colorMatrixShader=p[3],this.fullFrame1=v[0],this.fullFrame2=v[1],this.halfFrame1=v[2],this.halfFrame2=v[3]},copyFrame:function(p,v,m,E,x){m===void 0&&(m=1),E===void 0&&(E=!0),x===void 0&&(x=!0);var y=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,p.texture),v?(y.viewport(0,0,v.width,v.height),y.bindFramebuffer(y.FRAMEBUFFER,v.framebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,v.texture,0)):y.viewport(0,0,p.width,p.height),E&&(x?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT)),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),y.bindFramebuffer(y.FRAMEBUFFER,null),y.bindTexture(y.TEXTURE_2D,null)},blitFrame:function(p,v,m,E,x,y){m===void 0&&(m=1),E===void 0&&(E=!0),x===void 0&&(x=!0),y===void 0&&(y=!1);var S=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,p.texture),p.height>v.height)S.viewport(0,0,p.width,p.height),this.setTargetUVs(p,v);else{var C=v.height-p.height;S.viewport(0,C,p.width,p.height)}if(S.bindFramebuffer(S.FRAMEBUFFER,v.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,v.texture,0),E&&(x?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),y){var I=this.renderer.currentBlendMode;this.renderer.setBlendMode(g.ERASE)}S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),y&&this.renderer.setBlendMode(I),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(p,v,m,E,x,y,S,C){S===void 0&&(S=!0),C===void 0&&(C=!0);var I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,p.framebuffer),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,p.texture,0),S&&(C?I.clearColor(0,0,0,0):I.clearColor(0,0,0,1),I.clear(I.COLOR_BUFFER_BIT)),I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,v.texture),I.copyTexSubImage2D(I.TEXTURE_2D,0,0,0,m,E,x,y),I.bindFramebuffer(I.FRAMEBUFFER,null),I.bindTexture(I.TEXTURE_2D,null)},copyToGame:function(p){var v=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,p.texture),v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.STATIC_DRAW),v.drawArrays(v.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(p,v,m,E){m===void 0&&(m=!0),E===void 0&&(E=this.colorMatrix);var x=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",E.getData()),this.set1f("uAlpha",E.alpha),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,p.texture),v?(x.viewport(0,0,v.width,v.height),x.bindFramebuffer(x.FRAMEBUFFER,v.framebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,v.texture,0)):x.viewport(0,0,p.width,p.height),m?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),x.bindFramebuffer(x.FRAMEBUFFER,null),x.bindTexture(x.TEXTURE_2D,null)},blendFrames:function(p,v,m,E,x,y){E===void 0&&(E=1),x===void 0&&(x=!0),y===void 0&&(y=this.linearShader);var S=this.gl;this.setShader(y),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",E),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,p.texture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,v.texture),m?(S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0),S.viewport(0,0,m.width,m.height)):S.viewport(0,0,p.width,p.height),x?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(p,v,m,E,x){this.blendFrames(p,v,m,E,x,this.addShader)},clearFrame:function(p,v){v===void 0&&(v=!0);var m=this.gl;m.viewport(0,0,p.width,p.height),m.bindFramebuffer(m.FRAMEBUFFER,p.framebuffer),v?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT);var E=this.renderer.currentFramebuffer;m.bindFramebuffer(m.FRAMEBUFFER,E)},setUVs:function(p,v,m,E,x,y,S,C){var I=this.vertexViewF32;I[2]=p,I[3]=v,I[6]=m,I[7]=E,I[10]=x,I[11]=y,I[14]=p,I[15]=v,I[18]=x,I[19]=y,I[22]=S,I[23]=C},setTargetUVs:function(p,v){var m=v.height/p.height;m>.5?m=.5-(m-.5):m=.5+(.5-m),this.setUVs(0,m,0,1+m,1,1+m,1,m)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});c.exports=f},function(c,R){c.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(31),g=e(38),l=e(2),h=function(i,s){var n=i.getContext("experimental-webgl"),d=l(s,"callback"),a=l(s,"type","image/png"),u=l(s,"encoder",.92),f=l(s,"x",0),p=l(s,"y",0),v=l(s,"getPixel",!1),m=l(s,"isFramebuffer",!1),E=m?l(s,"bufferWidth",1):n.drawingBufferWidth,x=m?l(s,"bufferHeight",1):n.drawingBufferHeight;if(v){var y=new Uint8Array(4),S=m?p:x-p;n.readPixels(f,S,1,1,n.RGBA,n.UNSIGNED_BYTE,y),d.call(null,new g(y[0],y[1],y[2],y[3]/255))}else{var C=l(s,"width",E),I=l(s,"height",x),O=C*I*4,M=new Uint8Array(O);n.readPixels(f,x-p-I,C,I,n.RGBA,n.UNSIGNED_BYTE,M);for(var L=o.createWebGL(this,C,I),P=L.getContext("2d"),b=P.getImageData(0,0,C,I),B=b.data,U=0;U<I;U++)for(var H=0;H<C;H++){var Y=((I-U-1)*C+H)*4,j=(U*C+H)*4;B[j+0]=M[Y+0],B[j+1]=M[Y+1],B[j+2]=M[Y+2],B[j+3]=M[Y+3]}P.putImageData(b,0,0);var _=new Image;_.onerror=function(){d.call(null),o.remove(L)},_.onload=function(){d.call(null,_),o.remove(L)},_.src=L.toDataURL(a,u)}};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(33),g=function(l){var h=l.config;if(!h.hideBanner){var i="WebGL";h.renderType===o.CANVAS?i="Canvas":h.renderType===o.HEADLESS&&(i="Headless");var s=h.audio,n=l.device.audio,d;if(n.webAudio&&!s.disableWebAudio?d="Web Audio":s.noAudio||!n.webAudio&&!n.audioData?d="No Audio":d="HTML5 Audio",l.device.browser.ie)window.console&&console.log("Phaser v"+o.VERSION+" / https://phaser.io");else{var a="",u=[a];if(Array.isArray(h.bannerBackgroundColor)){var f;h.bannerBackgroundColor.forEach(function(v){a=a.concat("%c "),u.push("background: "+v),f=v}),u[u.length-1]="color: "+h.bannerTextColor+"; background: "+f}else a=a.concat("%c "),u.push("color: "+h.bannerTextColor+"; background: "+h.bannerBackgroundColor);u.push("background: transparent"),h.gameTitle&&(a=a.concat(h.gameTitle),h.gameVersion&&(a=a.concat(" v"+h.gameVersion)),h.hidePhaser||(a=a.concat(" / ")));var p="";h.hidePhaser||(a=a.concat("Phaser v"+o.VERSION+p+" ("+i+" | "+d+")")),a=a.concat(" %c "+h.gameURL),u[0]=a,console.log.apply(console,u)}}};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(6),l=e(1),h=e(386),i=new o({initialize:function(n,d){this.game=n,this.raf=new h,this.started=!1,this.running=!1,this.minFps=g(d,"min",5),this.targetFps=g(d,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=l,this.forceSetTimeOut=g(d,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=g(d,"deltaHistory",10),this.panicMax=g(d,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=g(d,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var s=window.performance.now();this.time=s,this.lastTime=s,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=Math.min(this._target,this.deltaHistory[n]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(s){if(this.started)return this;this.started=!0,this.running=!0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=s,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var s=window.performance.now();this.now=s;var n=s-this.lastTime;n<0&&(n=0),this.rawDelta=n;var d=this.deltaIndex,a=this.deltaHistory,u=this.deltaSmoothingMax,f=n,p=n;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,f=Math.min(f,this._target)),f>this._min&&(f=a[d],f=Math.min(f,this._min)),a[d]=f,this.deltaIndex++,this.deltaIndex>u&&(this.deltaIndex=0),p=0;for(var v=0;v<u;v++)p+=a[v];p/=u}this.delta=p,this.time+=this.rawDelta,s>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0),this.framesThisSecond++;var m=p/this._target;this.callback(s,p,m),this.lastTime=s,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(s){this.running||(s&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=l,this.raf=null,this.game=null}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(1),l=new o({initialize:function(){this.isRunning=!1,this.callback=g,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var i=this;this.step=function s(){var n=window.performance.now();i.lastTime=i.tick,i.tick=n,i.callback(n),i.timeOutID=window.requestAnimationFrame(s)},this.stepTimeout=function s(){var n=Date.now(),d=Math.min(Math.max(i.target*2+i.tick-n,0),i.target);i.lastTime=i.tick,i.tick=n,i.callback(n),i.timeOutID=window.setTimeout(s,d)}},start:function(h,i,s){this.isRunning||(this.callback=h,this.isSetTimeOut=i,this.target=s,this.isRunning=!0,this.timeOutID=i?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=g}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(22),g=function(l){var h,i=l.events;if(document.hidden!==void 0)h="visibilitychange";else{var s=["webkit","moz","ms"];s.forEach(function(d){document[d+"Hidden"]!==void 0&&(document.hidden=function(){return document[d+"Hidden"]},h=d+"visibilitychange")})}var n=function(d){document.hidden||d.type==="pause"?i.emit(o.HIDDEN):i.emit(o.VISIBLE)};h&&document.addEventListener(h,n,!1),window.onblur=function(){i.emit(o.BLUR)},window.onfocus=function(){i.emit(o.FOCUS)},window.focus&&l.config.autoFocus&&window.focus()};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(389),g=e(31),l=e(6),h=function(i){var s=l(i,"data",[]),n=l(i,"canvas",null),d=l(i,"palette",o),a=l(i,"pixelWidth",1),u=l(i,"pixelHeight",a),f=l(i,"resizeCanvas",!0),p=l(i,"clearCanvas",!0),v=l(i,"preRender",null),m=l(i,"postRender",null),E=Math.floor(Math.abs(s[0].length*a)),x=Math.floor(Math.abs(s.length*u));n||(n=g.create2D(this,E,x),f=!1,p=!1),f&&(n.width=E,n.height=x);var y=n.getContext("2d");p&&y.clearRect(0,0,E,x),v&&v(n,y);for(var S=0;S<s.length;S++)for(var C=s[S],I=0;I<C.length;I++){var O=C[I];O!=="."&&O!==" "&&(y.fillStyle=d[O],y.fillRect(I*a,S*u,a,u))}return m&&m(n,y),n};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(358),l=e(94),h=e(3),i=new o({Extends:l,initialize:function(n,d,a,u){l.call(this,"CubicBezierCurve"),Array.isArray(n)&&(u=new h(n[6],n[7]),a=new h(n[4],n[5]),d=new h(n[2],n[3]),n=new h(n[0],n[1])),this.p0=n,this.p1=d,this.p2=a,this.p3=u},getStartPoint:function(s){return s===void 0&&(s=new h),s.copy(this.p0)},getResolution:function(s){return s},getPoint:function(s,n){n===void 0&&(n=new h);var d=this.p0,a=this.p1,u=this.p2,f=this.p3;return n.set(g(s,d.x,a.x,u.x,f.x),g(s,d.y,a.y,u.y,f.y))},draw:function(s,n){n===void 0&&(n=32);var d=this.getPoints(n);s.beginPath(),s.moveTo(this.p0.x,this.p0.y);for(var a=1;a<d.length;a++)s.lineTo(d[a].x,d[a].y);return s.strokePath(),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});i.fromJSON=function(s){var n=s.points,d=new h(n[0],n[1]),a=new h(n[2],n[3]),u=new h(n[4],n[5]),f=new h(n[6],n[7]);return new i(d,a,u,f)},c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(94),l=e(36),h=e(6),i=e(196),s=e(3),n=new o({Extends:g,initialize:function(a,u,f,p,v,m,E,x){if(typeof a=="object"){var y=a;a=h(y,"x",0),u=h(y,"y",0),f=h(y,"xRadius",0),p=h(y,"yRadius",f),v=h(y,"startAngle",0),m=h(y,"endAngle",360),E=h(y,"clockwise",!1),x=h(y,"rotation",0)}else p===void 0&&(p=f),v===void 0&&(v=0),m===void 0&&(m=360),E===void 0&&(E=!1),x===void 0&&(x=0);g.call(this,"EllipseCurve"),this.p0=new s(a,u),this._xRadius=f,this._yRadius=p,this._startAngle=l(v),this._endAngle=l(m),this._clockwise=E,this._rotation=l(x)},getStartPoint:function(d){return d===void 0&&(d=new s),this.getPoint(0,d)},getResolution:function(d){return d*2},getPoint:function(d,a){a===void 0&&(a=new s);for(var u=Math.PI*2,f=this._endAngle-this._startAngle,p=Math.abs(f)<Number.EPSILON;f<0;)f+=u;for(;f>u;)f-=u;f<Number.EPSILON&&(p?f=0:f=u),this._clockwise&&!p&&(f===u?f=-u:f=f-u);var v=this._startAngle+d*f,m=this.p0.x+this._xRadius*Math.cos(v),E=this.p0.y+this._yRadius*Math.sin(v);if(this._rotation!==0){var x=Math.cos(this._rotation),y=Math.sin(this._rotation),S=m-this.p0.x,C=E-this.p0.y;m=S*x-C*y+this.p0.x,E=S*y+C*x+this.p0.y}return a.set(m,E)},setXRadius:function(d){return this.xRadius=d,this},setYRadius:function(d){return this.yRadius=d,this},setWidth:function(d){return this.xRadius=d/2,this},setHeight:function(d){return this.yRadius=d/2,this},setStartAngle:function(d){return this.startAngle=d,this},setEndAngle:function(d){return this.endAngle=d,this},setClockwise:function(d){return this.clockwise=d,this},setRotation:function(d){return this.rotation=d,this},x:{get:function(){return this.p0.x},set:function(d){this.p0.x=d}},y:{get:function(){return this.p0.y},set:function(d){this.p0.y=d}},xRadius:{get:function(){return this._xRadius},set:function(d){this._xRadius=d}},yRadius:{get:function(){return this._yRadius},set:function(d){this._yRadius=d}},startAngle:{get:function(){return i(this._startAngle)},set:function(d){this._startAngle=l(d)}},endAngle:{get:function(){return i(this._endAngle)},set:function(d){this._endAngle=l(d)}},clockwise:{get:function(){return this._clockwise},set:function(d){this._clockwise=d}},angle:{get:function(){return i(this._rotation)},set:function(d){this._rotation=l(d)}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=d}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:i(this._startAngle),endAngle:i(this._endAngle),clockwise:this._clockwise,rotation:i(this._rotation)}}});n.fromJSON=function(d){return new n(d)},c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(94),l=e(199),h=e(10),i=e(3),s=new o({Extends:g,initialize:function(d,a){g.call(this,"LineCurve"),Array.isArray(d)&&(a=new i(d[2],d[3]),d=new i(d[0],d[1])),this.p0=d,this.p1=a,this.arcLengthDivisions=1},getBounds:function(n){return n===void 0&&(n=new h),l([this.p0,this.p1],n)},getStartPoint:function(n){return n===void 0&&(n=new i),n.copy(this.p0)},getResolution:function(n){return n===void 0&&(n=1),n},getPoint:function(n,d){return d===void 0&&(d=new i),n===1?d.copy(this.p1):(d.copy(this.p1).subtract(this.p0).scale(n).add(this.p0),d)},getPointAt:function(n,d){return this.getPoint(n,d)},getTangent:function(n,d){return d===void 0&&(d=new i),d.copy(this.p1).subtract(this.p0).normalize(),d},getUtoTmapping:function(n,d,a){var u;if(d){var f=this.getLengths(a),p=f[f.length-1],v=Math.min(d,p);u=v/p}else u=n;return u},draw:function(n){return n.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});s.fromJSON=function(n){var d=n.points,a=new i(d[0],d[1]),u=new i(d[2],d[3]);return new s(a,u)},c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(3),l=new o({initialize:function(i,s){this.active=!1,this.p0=new g(i,s)},getPoint:function(h,i){return i===void 0&&(i=new g),i.copy(this.p0)},getPointAt:function(h,i){return this.getPoint(h,i)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(94),l=e(359),h=e(3),i=new o({Extends:g,initialize:function(n,d,a){g.call(this,"QuadraticBezier"),Array.isArray(n)&&(a=new h(n[4],n[5]),d=new h(n[2],n[3]),n=new h(n[0],n[1])),this.p0=n,this.p1=d,this.p2=a},getStartPoint:function(s){return s===void 0&&(s=new h),s.copy(this.p0)},getResolution:function(s){return s},getPoint:function(s,n){n===void 0&&(n=new h);var d=this.p0,a=this.p1,u=this.p2;return n.set(l(s,d.x,a.x,u.x),l(s,d.y,a.y,u.y))},draw:function(s,n){n===void 0&&(n=32);var d=this.getPoints(n);s.beginPath(),s.moveTo(this.p0.x,this.p0.y);for(var a=1;a<d.length;a++)s.lineTo(d[a].x,d[a].y);return s.strokePath(),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});i.fromJSON=function(s){var n=s.points,d=new h(n[0],n[1]),a=new h(n[2],n[3]),u=new h(n[4],n[5]);return new i(d,a,u)},c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(194),g=e(0),l=e(94),h=e(3),i=new g({Extends:l,initialize:function(n){n===void 0&&(n=[]),l.call(this,"SplineCurve"),this.points=[],this.addPoints(n)},addPoints:function(s){for(var n=0;n<s.length;n++){var d=new h;typeof s[n]=="number"?(d.x=s[n],d.y=s[n+1],n++):Array.isArray(s[n])?(d.x=s[n][0],d.y=s[n][1]):(d.x=s[n].x,d.y=s[n].y),this.points.push(d)}return this},addPoint:function(s,n){var d=new h(s,n);return this.points.push(d),d},getStartPoint:function(s){return s===void 0&&(s=new h),s.copy(this.points[0])},getResolution:function(s){return s*this.points.length},getPoint:function(s,n){n===void 0&&(n=new h);var d=this.points,a=(d.length-1)*s,u=Math.floor(a),f=a-u,p=d[u===0?u:u-1],v=d[u],m=d[u>d.length-2?d.length-1:u+1],E=d[u>d.length-3?d.length-1:u+2];return n.set(o(f,p.x,v.x,m.x,E.x),o(f,p.y,v.y,m.y,E.y))},toJSON:function(){for(var s=[],n=0;n<this.points.length;n++)s.push(this.points[n].x),s.push(this.points[n].y);return{type:this.type,points:s}}});i.fromJSON=function(s){return new i(s.points)},c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h,i,s,n){(!i||i==="")&&(i=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!s||s==="")&&(s=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),n===void 0&&(n=null),this.key=h,this.fragmentSrc=i,this.vertexSrc=s,this.uniforms=n}});c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(38);o.ColorSpectrum=e(909),o.ColorToRGBA=e(910),o.ComponentToHex=e(398),o.GetColor=e(103),o.GetColor32=e(328),o.HexStringToColor=e(327),o.HSLToColor=e(911),o.HSVColorWheel=e(912),o.HSVToRGB=e(188),o.HueToComponent=e(399),o.IntegerToColor=e(189),o.IntegerToRGB=e(330),o.Interpolate=e(913),o.ObjectToColor=e(331),o.RandomRGB=e(914),o.RGBStringToColor=e(332),o.RGBToHSV=e(329),o.RGBToString=e(915),o.ValueToColor=e(187),c.exports=o},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g=o.toString(16);return g.length===1?"0"+g:g};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return l<0&&(l+=1),l>1&&(l-=1),l<.16666666666666666?o+(g-o)*6*l:l<.5?g:l<.6666666666666666?o+(g-o)*(.6666666666666666-l)*6:o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(105),g=function(l){if(document.readyState==="complete"||document.readyState==="interactive"){l();return}var h=function(){document.removeEventListener("deviceready",h,!0),document.removeEventListener("DOMContentLoaded",h,!0),window.removeEventListener("load",h,!0),l()};document.body?o.cordova?document.addEventListener("deviceready",h,!1):(document.addEventListener("DOMContentLoaded",h,!0),window.addEventListener("load",h,!0)):window.setTimeout(h,20)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){if(!o)return window.innerHeight;var g=Math.abs(window.orientation),l={w:0,h:0},h=document.createElement("div");return h.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(h),l.w=g===90?h.offsetHeight:window.innerWidth,l.h=g===90?window.innerWidth:h.offsetHeight,document.documentElement.removeChild(h),h=null,Math.abs(window.orientation)!==90?l.h:l.w};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(201),g=function(l,h){var i=window.screen,s=i?i.orientation||i.mozOrientation||i.msOrientation:!1;if(s&&typeof s.type=="string")return s.type;if(typeof s=="string")return s;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return o.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return o.ORIENTATION.LANDSCAPE}else return h>l?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g;return o!==""&&(typeof o=="string"?g=document.getElementById(o):o&&o.nodeType===1&&(g=o)),g||(g=document.body),g};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g="";try{if(window.DOMParser){var l=new DOMParser;g=l.parseFromString(o,"text/xml")}else g=new ActiveXObject("Microsoft.XMLDOM"),g.loadXML(o)}catch{g=null}return!g||!g.documentElement||g.getElementsByTagName("parsererror").length?null:g};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(203),l=e(9),h=e(51),i=e(22),s=e(410),n=e(411),d=e(412),a=e(413),u=e(25),f=e(177),p=new o({initialize:function(m,E){this.game=m,this.scaleManager,this.canvas,this.config=E,this.enabled=!0,this.events=new l,this.isOver=!0,this.defaultCursor="",this.keyboard=E.inputKeyboard?new s(this):null,this.mouse=E.inputMouse?new n(this):null,this.touch=E.inputTouch?new a(this):null,this.pointers=[],this.pointersTotal=E.inputActivePointers,E.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var x=0;x<=this.pointersTotal;x++){var y=new d(this,x);y.smoothFactor=E.inputSmoothFactor,this.pointers.push(y)}this.mousePointer=E.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new u,this._tempMatrix2=new u,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],m.events.once(i.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(h.MANAGER_BOOT),this.game.events.on(i.PRE_RENDER,this.preRender,this),this.game.events.once(i.DESTROY,this.destroy,this)},setCanvasOver:function(v){this.isOver=!0,this.events.emit(h.GAME_OVER,v)},setCanvasOut:function(v){this.isOver=!1,this.events.emit(h.GAME_OUT,v)},preRender:function(){var v=this.game.loop.now,m=this.game.loop.delta,E=this.game.scene.getScenes(!0,!0);this.time=v,this.events.emit(h.MANAGER_UPDATE);for(var x=0;x<E.length;x++){var y=E[x];if(y.sys.input&&y.sys.input.updatePoll(v,m)&&this.globalTopOnly)return}},setDefaultCursor:function(v){this.defaultCursor=v,this.canvas.style.cursor!==v&&(this.canvas.style.cursor=v)},setCursor:function(v){v.cursor&&(this.canvas.style.cursor=v.cursor)},resetCursor:function(v){v.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(v){v===void 0&&(v=1);var m=[];this.pointersTotal+v>10&&(v=10-this.pointersTotal);for(var E=0;E<v;E++){var x=this.pointers.length,y=new d(this,x);y.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(y),this.pointersTotal++,m.push(y)}return m},updateInputPlugins:function(v,m){var E=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var x=0;x<E.length;x++){var y=E[x];if(y.sys.input){var S=y.sys.input.update(v,m);if(S&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(v){for(var m=this.pointers,E=[],x=0;x<v.changedTouches.length;x++)for(var y=v.changedTouches[x],S=1;S<this.pointersTotal;S++){var C=m[S];if(!C.active){C.touchstart(y,v),this.activePointer=C,E.push(C);break}}this.updateInputPlugins(g.TOUCH_START,E)},onTouchMove:function(v){for(var m=this.pointers,E=[],x=0;x<v.changedTouches.length;x++)for(var y=v.changedTouches[x],S=1;S<this.pointersTotal;S++){var C=m[S];if(C.active&&C.identifier===y.identifier){C.touchmove(y,v),this.activePointer=C,E.push(C);break}}this.updateInputPlugins(g.TOUCH_MOVE,E)},onTouchEnd:function(v){for(var m=this.pointers,E=[],x=0;x<v.changedTouches.length;x++)for(var y=v.changedTouches[x],S=1;S<this.pointersTotal;S++){var C=m[S];if(C.active&&C.identifier===y.identifier){C.touchend(y,v),E.push(C);break}}this.updateInputPlugins(g.TOUCH_END,E)},onTouchCancel:function(v){for(var m=this.pointers,E=[],x=0;x<v.changedTouches.length;x++)for(var y=v.changedTouches[x],S=1;S<this.pointersTotal;S++){var C=m[S];if(C.active&&C.identifier===y.identifier){C.touchcancel(y,v),E.push(C);break}}this.updateInputPlugins(g.TOUCH_CANCEL,E)},onMouseDown:function(v){var m=this.mousePointer;m.down(v),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(g.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(v){var m=this.mousePointer;m.move(v),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(g.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(v){var m=this.mousePointer;m.up(v),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(g.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(v){var m=this.mousePointer;m.wheel(v),this.activePointer=m,this.updateInputPlugins(g.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(v){var m=this.mouse.locked;this.mousePointer.locked=m,this.events.emit(h.POINTERLOCK_CHANGE,v,m)},inputCandidate:function(v,m){var E=v.input;if(!E||!E.enabled||!E.alwaysEnabled&&!v.willRender(m))return!1;var x=!0,y=v.parentContainer;if(y)do{if(!y.willRender(m)){x=!1;break}y=y.parentContainer}while(y);return x},hitTest:function(v,m,E,x){x===void 0&&(x=this._tempHitTest);var y=this._tempPoint,S=E.scrollX,C=E.scrollY;x.length=0;var I=v.x,O=v.y;E.getWorldPoint(I,O,y),v.worldX=y.x,v.worldY=y.y;for(var M={x:0,y:0},L=this._tempMatrix,P=this._tempMatrix2,b=0;b<m.length;b++){var B=m[b];if(!!this.inputCandidate(B,E)){var U=y.x+S*B.scrollFactorX-S,H=y.y+C*B.scrollFactorY-C;B.parentContainer?(B.getWorldTransformMatrix(L,P),L.applyInverse(U,H,M)):f(U,H,B.x,B.y,B.rotation,B.scaleX,B.scaleY,M),this.pointWithinHitArea(B,M.x,M.y)&&x.push(B)}}return x},pointWithinHitArea:function(v,m,E){m+=v.displayOriginX,E+=v.displayOriginY;var x=v.input;return x&&x.hitAreaCallback(x.hitArea,m,E,v)?(x.localX=m,x.localY=E,!0):!1},pointWithinInteractiveObject:function(v,m,E){return v.hitArea?(m+=v.gameObject.displayOriginX,E+=v.gameObject.displayOriginY,v.localX=m,v.localY=E,v.hitAreaCallback(v.hitArea,m,E,v)):!1},transformPointer:function(v,m,E,x){var y=v.position,S=v.prevPosition;S.x=y.x,S.y=y.y;var C=this.scaleManager.transformX(m),I=this.scaleManager.transformY(E),O=v.smoothFactor;!x||O===0?(y.x=C,y.y=I):(y.x=C*O+S.x*(1-O),y.y=I*O+S.y*(1-O))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(i.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var v=0;v<this.pointers.length;v++)this.pointers[v].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});c.exports=p},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(93),g=e(0),l=e(22),h=e(51),i=e(143),s=e(1),n=new g({initialize:function(a){this.manager=a,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=s,this.onKeyUp=s,a.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var d=this.manager.config;this.enabled=d.inputKeyboard,this.target=d.inputKeyboardEventTarget,this.addCapture(d.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(l.POST_STEP,this.postUpdate,this)},startListeners:function(){var d=this;this.onKeyDown=function(u){if(!(u.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(u),d.manager.events.emit(h.MANAGER_PROCESS);var f=u.altKey||u.ctrlKey||u.shiftKey||u.metaKey;d.preventDefault&&!f&&d.captures.indexOf(u.keyCode)>-1&&u.preventDefault()}},this.onKeyUp=function(u){if(!(u.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(u),d.manager.events.emit(h.MANAGER_PROCESS);var f=u.altKey||u.ctrlKey||u.shiftKey||u.metaKey;d.preventDefault&&!f&&d.captures.indexOf(u.keyCode)>-1&&u.preventDefault()}};var a=this.target;a&&(a.addEventListener("keydown",this.onKeyDown,!1),a.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var d=this.target;d.removeEventListener("keydown",this.onKeyDown,!1),d.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var a=this.captures,u=0;u<d.length;u++){var f=d[u];typeof f=="string"&&(f=i[f.trim().toUpperCase()]),a.indexOf(f)===-1&&a.push(f)}this.preventDefault=a.length>0},removeCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var a=this.captures,u=0;u<d.length;u++){var f=d[u];typeof f=="string"&&(f=i[f.toUpperCase()]),o(a,f)}this.preventDefault=a.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(l.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(191),l=e(51),h=e(1),i=new o({initialize:function(n){this.manager=n,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=h,this.onMouseDown=h,this.onMouseUp=h,this.onMouseDownWindow=h,this.onMouseUpWindow=h,this.onMouseOver=h,this.onMouseOut=h,this.onMouseWheel=h,this.pointerLockChange=h,this.isTop=!0,n.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function(){var s=this.manager.config;this.enabled=s.inputMouse,this.target=s.inputMouseEventTarget,this.passive=s.inputMousePassive,this.preventDefaultDown=s.inputMousePreventDefaultDown,this.preventDefaultUp=s.inputMousePreventDefaultUp,this.preventDefaultMove=s.inputMousePreventDefaultMove,this.preventDefaultWheel=s.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,s.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(s){return s.preventDefault(),!1}),this},requestPointerLock:function(){if(g.pointerLock){var s=this.target;s.requestPointerLock=s.requestPointerLock||s.mozRequestPointerLock||s.webkitRequestPointerLock,s.requestPointerLock()}},releasePointerLock:function(){g.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var s=this.target;if(!!s){var n=this,d=this.manager,a=d.canvas,u=window&&window.focus&&d.game.config.autoFocus;this.onMouseMove=function(p){!p.defaultPrevented&&n.enabled&&d&&d.enabled&&(d.onMouseMove(p),n.preventDefaultMove&&p.preventDefault())},this.onMouseDown=function(p){u&&window.focus(),!p.defaultPrevented&&n.enabled&&d&&d.enabled&&(d.onMouseDown(p),n.preventDefaultDown&&p.target===a&&p.preventDefault())},this.onMouseDownWindow=function(p){!p.defaultPrevented&&n.enabled&&d&&d.enabled&&p.target!==a&&d.onMouseDown(p)},this.onMouseUp=function(p){!p.defaultPrevented&&n.enabled&&d&&d.enabled&&(d.onMouseUp(p),n.preventDefaultUp&&p.target===a&&p.preventDefault())},this.onMouseUpWindow=function(p){!p.defaultPrevented&&n.enabled&&d&&d.enabled&&p.target!==a&&d.onMouseUp(p)},this.onMouseOver=function(p){!p.defaultPrevented&&n.enabled&&d&&d.enabled&&d.setCanvasOver(p)},this.onMouseOut=function(p){!p.defaultPrevented&&n.enabled&&d&&d.enabled&&d.setCanvasOut(p)},this.onMouseWheel=function(p){!p.defaultPrevented&&n.enabled&&d&&d.enabled&&d.onMouseWheel(p),n.preventDefaultWheel&&p.target===a&&p.preventDefault()};var f={passive:!0};if(s.addEventListener("mousemove",this.onMouseMove),s.addEventListener("mousedown",this.onMouseDown),s.addEventListener("mouseup",this.onMouseUp),s.addEventListener("mouseover",this.onMouseOver,f),s.addEventListener("mouseout",this.onMouseOut,f),this.preventDefaultWheel?s.addEventListener("wheel",this.onMouseWheel,{passive:!1}):s.addEventListener("wheel",this.onMouseWheel,f),window&&d.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,f),window.top.addEventListener("mouseup",this.onMouseUpWindow,f)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,f),window.addEventListener("mouseup",this.onMouseUpWindow,f),this.isTop=!1}g.pointerLock&&(this.pointerLockChange=function(p){var v=n.target;n.locked=document.pointerLockElement===v||document.mozPointerLockElement===v||document.webkitPointerLockElement===v,d.onPointerLockChange(p)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var s=this.target;s.removeEventListener("mousemove",this.onMouseMove),s.removeEventListener("mousedown",this.onMouseDown),s.removeEventListener("mouseup",this.onMouseUp),s.removeEventListener("mouseover",this.onMouseOver),s.removeEventListener("mouseout",this.onMouseOut),window&&(s=this.isTop?window.top:window,s.removeEventListener("mousedown",this.onMouseDownWindow),s.removeEventListener("mouseup",this.onMouseUpWindow)),g.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(349),g=e(0),l=e(50),h=e(124),i=e(360),s=e(3),n=e(105),d=new g({initialize:function(u,f){this.manager=u,this.id=f,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new s,this.prevPosition=new s,this.midPoint=new s(-1,-1),this.velocity=new s,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=f===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(a){var u=a.getWorldPoint(this.x,this.y);return this.worldX=u.x,this.worldY=u.y,this},positionToCamera:function(a,u){return a.getWorldPoint(this.x,this.y,u)},updateMotion:function(){var a=this.position.x,u=this.position.y,f=this.midPoint.x,p=this.midPoint.y;if(!(a===f&&u===p)){var v=i(this.motionFactor,f,a),m=i(this.motionFactor,p,u);h(v,a,.1)&&(v=a),h(m,u,.1)&&(m=u),this.midPoint.set(v,m);var E=a-v,x=u-m;this.velocity.set(E,x),this.angle=o(v,m,a,u),this.distance=Math.sqrt(E*E+x*x)}},up:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.button=a.button,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),a.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=a.timeStamp,this.wasTouch=!1)},down:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.button=a.button,this.downElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),a.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),n.macOS&&a.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=a.timeStamp),this.wasTouch=!1},move:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.manager.transformPointer(this,a.pageX,a.pageY,!0),this.locked&&(this.movementX=a.movementX||a.mozMovementX||a.webkitMovementX||0,this.movementY=a.movementY||a.mozMovementY||a.webkitMovementY||0),this.moveTime=a.timeStamp,this.wasTouch=!1},wheel:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.deltaX=a.deltaX,this.deltaY=a.deltaY,this.deltaZ=a.deltaZ,this.wasTouch=!1},touchstart:function(a,u){a.pointerId&&(this.pointerId=a.pointerId),this.identifier=a.identifier,this.target=a.target,this.active=!0,this.buttons=1,this.event=u,this.downElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=u.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(a,u){this.event=u,this.manager.transformPointer(this,a.pageX,a.pageY,!0),this.moveTime=u.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(a,u){this.buttons=0,this.event=u,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=u.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(a,u){this.buttons=0,this.event=u,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=u.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?l(this.downX,this.downY,this.x,this.y):l(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?o(this.downX,this.downY,this.x,this.y):o(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(a,u){a===void 0&&(a=10),u===void 0&&(u=[]);for(var f=this.prevPosition.x,p=this.prevPosition.y,v=this.position.x,m=this.position.y,E=0;E<a;E++){var x=1/a*E;u[E]={x:i(x,f,v),y:i(x,p,m)}}return u},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(a){this.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.position.y=a}},time:{get:function(){return this.event?this.event.timeStamp:0}}});c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(51),l=e(1),h=new o({initialize:function(s){this.manager=s,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=l,this.onTouchStartWindow=l,this.onTouchMove=l,this.onTouchEnd=l,this.onTouchEndWindow=l,this.onTouchCancel=l,this.onTouchCancelWindow=l,this.onTouchOver=l,this.onTouchOut=l,s.events.once(g.MANAGER_BOOT,this.boot,this)},boot:function(){var i=this.manager.config;this.enabled=i.inputTouch,this.target=i.inputTouchEventTarget,this.capture=i.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),i.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(i){return i.preventDefault(),!1}),this},startListeners:function(){var i=this,s=this.manager.canvas,n=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(f){n&&window.focus(),!f.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&(i.manager.onTouchStart(f),i.capture&&f.cancelable&&f.target===s&&f.preventDefault())},this.onTouchStartWindow=function(f){!f.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&f.target!==s&&i.manager.onTouchStart(f)},this.onTouchMove=function(f){!f.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&(i.manager.onTouchMove(f),i.capture&&f.cancelable&&f.preventDefault())},this.onTouchEnd=function(f){!f.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&(i.manager.onTouchEnd(f),i.capture&&f.cancelable&&f.target===s&&f.preventDefault())},this.onTouchEndWindow=function(f){!f.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&f.target!==s&&i.manager.onTouchEnd(f)},this.onTouchCancel=function(f){!f.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&(i.manager.onTouchCancel(f),i.capture&&f.preventDefault())},this.onTouchCancelWindow=function(f){!f.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&i.manager.onTouchCancel(f)},this.onTouchOver=function(f){!f.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&i.manager.setCanvasOver(f)},this.onTouchOut=function(f){!f.defaultPrevented&&i.enabled&&i.manager&&i.manager.enabled&&i.manager.setCanvasOut(f)};var d=this.target;if(!!d){var a={passive:!0},u={passive:!1};d.addEventListener("touchstart",this.onTouchStart,this.capture?u:a),d.addEventListener("touchmove",this.onTouchMove,this.capture?u:a),d.addEventListener("touchend",this.onTouchEnd,this.capture?u:a),d.addEventListener("touchcancel",this.onTouchCancel,this.capture?u:a),d.addEventListener("touchover",this.onTouchOver,this.capture?u:a),d.addEventListener("touchout",this.onTouchOut,this.capture?u:a),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,u),window.addEventListener("touchend",this.onTouchEndWindow,u),window.addEventListener("touchcancel",this.onTouchCancelWindow,u)),this.enabled=!0}},stopListeners:function(){var i=this.target;i.removeEventListener("touchstart",this.onTouchStart),i.removeEventListener("touchmove",this.onTouchMove),i.removeEventListener("touchend",this.onTouchEnd),i.removeEventListener("touchcancel",this.onTouchCancel),i.removeEventListener("touchover",this.onTouchOver),i.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(22),l=e(9),h=e(8),i=e(16),s=e(5),n=e(2),d=e(24),a=e(93),u=new o({Extends:l,initialize:function(p){l.call(this),this.game=p,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],p.isBooted?this.boot():p.events.once(g.BOOT,this.boot,this)},boot:function(){var f,p,v,m,E,x,y,S=this.game.config,C=S.installGlobalPlugins;for(C=C.concat(this._pendingGlobal),f=0;f<C.length;f++)p=C[f],v=n(p,"key",null),m=n(p,"plugin",null),E=n(p,"start",!1),x=n(p,"mapping",null),y=n(p,"data",null),v&&(m?this.install(v,m,E,x,y):console.warn("Missing `plugin` for key: "+v));for(C=S.installScenePlugins,C=C.concat(this._pendingScene),f=0;f<C.length;f++)p=C[f],v=n(p,"key",null),m=n(p,"plugin",null),x=n(p,"mapping",null),v&&(m?this.installScenePlugin(v,m,x):console.warn("Missing `plugin` for key: "+v));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(g.DESTROY,this.destroy,this)},addToScene:function(f,p,v){var m,E,x,y=this.game,S=f.scene,C=f.settings.map,I=f.settings.isBooted;for(m=0;m<p.length;m++)E=p[m],y[E]?(f[E]=y[E],C.hasOwnProperty(E)&&(S[C[E]]=f[E])):E==="game"&&C.hasOwnProperty(E)&&(S[C[E]]=y);for(var O=0;O<v.length;O++)for(x=v[O],m=0;m<x.length;m++)if(E=x[m],!!d.hasCore(E)){var M=d.getCore(E),L=M.mapping,P=new M.plugin(S,this,L);f[L]=P,M.custom?S[L]=P:C.hasOwnProperty(L)&&(S[C[L]]=P),I&&P.boot()}for(x=this.plugins,m=0;m<x.length;m++){var b=x[m];b.mapping&&(S[b.mapping]=b.plugin)}},getDefaultScenePlugins:function(){var f=this.game.config.defaultPlugins;return f=f.concat(this.scenePlugins),f},installScenePlugin:function(f,p,v,m,E){if(E===void 0&&(E=!1),typeof p!="function"){console.warn("Invalid Scene Plugin: "+f);return}if(!d.hasCore(f))d.register(f,p,v,!0),this.scenePlugins.push(f);else if(!E&&d.hasCore(f)){console.warn("Scene Plugin key in use: "+f);return}if(m){var x=new p(m,this,f);m.sys[f]=x,v&&v!==""&&(m[v]=x),x.boot()}},install:function(f,p,v,m,E){if(v===void 0&&(v=!1),m===void 0&&(m=null),E===void 0&&(E=null),typeof p!="function")return console.warn("Invalid Plugin: "+f),null;if(d.hasCustom(f))return console.warn("Plugin key in use: "+f),null;if(m!==null&&(v=!0),!this.game.isBooted)this._pendingGlobal.push({key:f,plugin:p,start:v,mapping:m,data:E});else if(d.registerCustom(f,p,m,E),v)return this.start(f);return null},getIndex:function(f){for(var p=this.plugins,v=0;v<p.length;v++){var m=p[v];if(m.key===f)return v}return-1},getEntry:function(f){var p=this.getIndex(f);if(p!==-1)return this.plugins[p]},isActive:function(f){var p=this.getEntry(f);return p&&p.active},start:function(f,p){p===void 0&&(p=f);var v=this.getEntry(p);return v&&!v.active?(v.active=!0,v.plugin.start()):v||(v=this.createEntry(f,p)),v?v.plugin:null},createEntry:function(f,p){var v=d.getCustom(f);if(v){var m=new v.plugin(this);v={key:p,plugin:m,active:!0,mapping:v.mapping,data:v.data},this.plugins.push(v),m.init(v.data),m.start()}return v},stop:function(f){var p=this.getEntry(f);return p&&p.active&&(p.active=!1,p.plugin.stop()),this},get:function(f,p){p===void 0&&(p=!0);var v=this.getEntry(f);if(v)return v.plugin;var m=this.getClass(f);return m&&p?(v=this.createEntry(f,f),v?v.plugin:null):m||null},getClass:function(f){return d.getCustomClass(f)},removeGlobalPlugin:function(f){var p=this.getEntry(f);p&&a(this.plugins,p),d.removeCustom(f)},removeScenePlugin:function(f){a(this.scenePlugins,f),d.remove(f)},registerGameObject:function(f,p,v){return p&&s.register(f,p),v&&i.register(f,v),this},removeGameObject:function(f,p,v){return p===void 0&&(p=!0),v===void 0&&(v=!0),p&&s.remove(f),v&&i.remove(f),this},registerFileType:function(f,p,v){h.register(f,p),v&&v.sys.load&&(v.sys.load[f]=p)},destroy:function(){for(var f=0;f<this.plugins.length;f++)this.plugins[f].plugin.destroy();d.destroyCustomPlugins(),this.game.noReturn&&d.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});c.exports=u},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(201),g=e(0),l=e(9),h=e(104),i=e(22),s=e(401),n=e(407),d=e(402),a=e(1),u=e(10),f=e(416),p=e(76),v=e(3),m=new g({Extends:l,initialize:function(x){l.call(this),this.game=x,this.canvas,this.canvasBounds=new u,this.parent=null,this.parentIsWindow=!1,this.parentSize=new f,this.gameSize=new f,this.baseSize=new f,this.displaySize=new f,this.scaleMode=o.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new v(1,1),this.autoRound=!1,this.autoCenter=o.CENTER.NO_CENTER,this.orientation=o.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:a,windowResize:a,fullScreenChange:a,fullScreenError:a}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(i.BOOT,this.boot,this)},boot:function(){var E=this.game;this.canvas=E.canvas,this.fullscreen=E.device.fullscreen,this.scaleMode!==o.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===o.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),E.events.on(i.PRE_STEP,this.step,this),E.events.once(i.READY,this.refresh,this),E.events.once(i.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(E){this.getParent(E),this.getParentBounds();var x=E.width,y=E.height,S=E.scaleMode,C=E.zoom,I=E.autoRound;if(typeof x=="string"){var O=this.parentSize.width;O===0&&(O=window.innerWidth);var M=parseInt(x,10)/100;x=Math.floor(O*M)}if(typeof y=="string"){var L=this.parentSize.height;L===0&&(L=window.innerHeight);var P=parseInt(y,10)/100;y=Math.floor(L*P)}this.scaleMode=S,this.autoRound=I,this.autoCenter=E.autoCenter,this.resizeInterval=E.resizeInterval,I&&(x=Math.floor(x),y=Math.floor(y)),this.gameSize.setSize(x,y),C===o.ZOOM.MAX_ZOOM&&(C=this.getMaxZoom()),this.zoom=C,C!==1&&(this._resetZoom=!0),this.baseSize.setSize(x,y),I&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),E.minWidth>0&&this.displaySize.setMin(E.minWidth*C,E.minHeight*C),E.maxWidth>0&&this.displaySize.setMax(E.maxWidth*C,E.maxHeight*C),this.displaySize.setSize(x,y),this.orientation=d(x,y)},getParent:function(E){var x=E.parent;if(x!==null){if(this.parent=n(x),this.parentIsWindow=this.parent===document.body,E.expandParent&&E.scaleMode!==o.SCALE_MODE.NONE){var y=this.parent.getBoundingClientRect();(this.parentIsWindow||y.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",y=this.parent.getBoundingClientRect(),!this.parentIsWindow&&y.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}E.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=n(E.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var E=this.parentSize,x=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(x.height=s(!0));var y=x.width,S=x.height;return E.width!==y||E.height!==S?(E.setSize(y,S),!0):!1},lockOrientation:function(E){var x=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return x?x.call(screen,E):!1},setParentSize:function(E,x){return this.parentSize.setSize(E,x),this.refresh()},setGameSize:function(E,x){var y=this.autoRound;y&&(E=Math.floor(E),x=Math.floor(x));var S=this.width,C=this.height;return this.gameSize.resize(E,x),this.baseSize.resize(E,x),y&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(E/x),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(S,C)},resize:function(E,x){var y=this.zoom,S=this.autoRound;S&&(E=Math.floor(E),x=Math.floor(x));var C=this.width,I=this.height;this.gameSize.resize(E,x),this.baseSize.resize(E,x),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(E*y,x*y),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var O=this.canvas.style,M=E*y,L=x*y;return S&&(M=Math.floor(M),L=Math.floor(L)),(M!==E||L!==x)&&(O.width=M+"px",O.height=L+"px"),this.refresh(C,I)},setZoom:function(E){return this.zoom=E,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(E,x){E===void 0&&(E=this.width),x===void 0&&(x=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var y=this.game.domContainer;if(y){this.baseSize.setCSS(y);var S=this.canvas.style,C=y.style;C.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",C.marginLeft=S.marginLeft,C.marginTop=S.marginTop}return this.emit(h.RESIZE,this.gameSize,this.baseSize,this.displaySize,E,x),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var E=d(this.width,this.height);E!==this.orientation&&(this.orientation=E,this.emit(h.ORIENTATION_CHANGE,E))}},updateScale:function(){var E=this.canvas.style,x=this.gameSize.width,y=this.gameSize.height,S,C,I=this.zoom,O=this.autoRound;this.scaleMode===o.SCALE_MODE.NONE?(this.displaySize.setSize(x*I,y*I),S=this.displaySize.width,C=this.displaySize.height,O&&(S=Math.floor(S),C=Math.floor(C)),this._resetZoom&&(E.width=S+"px",E.height=C+"px",this._resetZoom=!1)):this.scaleMode===o.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),S=this.displaySize.width,C=this.displaySize.height,O&&(S=Math.floor(S),C=Math.floor(C)),this.canvas.width=S,this.canvas.height=C):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),S=this.displaySize.width,C=this.displaySize.height,O&&(S=Math.floor(S),C=Math.floor(C)),E.width=S+"px",E.height=C+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var E=p(this.parentSize.width,this.gameSize.width,0,!0),x=p(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(E,x),1)},updateCenter:function(){var E=this.autoCenter;if(E!==o.CENTER.NO_CENTER){var x=this.canvas,y=x.style,S=x.getBoundingClientRect(),C=S.width,I=S.height,O=Math.floor((this.parentSize.width-C)/2),M=Math.floor((this.parentSize.height-I)/2);E===o.CENTER.CENTER_HORIZONTALLY?M=0:E===o.CENTER.CENTER_VERTICALLY&&(O=0),y.marginLeft=O+"px",y.marginTop=M+"px"}},updateBounds:function(){var E=this.canvasBounds,x=this.canvas.getBoundingClientRect();E.x=x.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),E.y=x.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),E.width=x.width,E.height=x.height},transformX:function(E){return(E-this.canvasBounds.left)*this.displayScale.x},transformY:function(E){return(E-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(E){E===void 0&&(E={navigationUI:"hide"});var x=this.fullscreen;if(!x.available){this.emit(h.FULLSCREEN_UNSUPPORTED);return}if(!x.active){var y=this.getFullscreenTarget();x.keyboard?y[x.request](Element.ALLOW_KEYBOARD_INPUT):y[x.request](E)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(h.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(E){this.removeFullscreenTarget(),this.emit(h.FULLSCREEN_FAILED,E)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var E=document.createElement("div");E.style.margin="0",E.style.padding="0",E.style.width="100%",E.style.height="100%",this.fullscreenTarget=E,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var x=this.canvas.parentNode;x.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var E=this.fullscreenTarget;if(E&&E.parentNode){var x=E.parentNode;x.insertBefore(this.canvas,E),x.removeChild(E)}}},stopFullscreen:function(){var E=this.fullscreen;if(!E.available)return this.emit(h.FULLSCREEN_UNSUPPORTED),!1;E.active&&document[E.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(h.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(E){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(E)},startListeners:function(){var E=this,x=this.listeners;if(x.orientationChange=function(){E.updateBounds(),E._checkOrientation=!0,E.dirty=!0},x.windowResize=function(){E.updateBounds(),E.dirty=!0},window.addEventListener("orientationchange",x.orientationChange,!1),window.addEventListener("resize",x.windowResize,!1),this.fullscreen.available){x.fullScreenChange=function(S){return E.onFullScreenChange(S)},x.fullScreenError=function(S){return E.onFullScreenError(S)};var y=["webkit","moz",""];y.forEach(function(S){document.addEventListener(S+"fullscreenchange",x.fullScreenChange,!1),document.addEventListener(S+"fullscreenerror",x.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",x.fullScreenChange,!1),document.addEventListener("MSFullscreenError",x.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(E,x){!this.parent||(this._lastCheck+=x,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var E=this.listeners;window.removeEventListener("orientationchange",E.orientationChange,!1),window.removeEventListener("resize",E.windowResize,!1);var x=["webkit","moz",""];x.forEach(function(y){document.removeEventListener(y+"fullscreenchange",E.fullScreenChange,!1),document.removeEventListener(y+"fullscreenerror",E.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",E.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",E.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===o.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===o.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});c.exports=m},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(18),g=e(0),l=e(76),h=e(3),i=new g({initialize:function(n,d,a,u){n===void 0&&(n=0),d===void 0&&(d=n),a===void 0&&(a=0),u===void 0&&(u=null),this._width=n,this._height=d,this._parent=u,this.aspectMode=a,this.aspectRatio=d===0?1:n/d,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new h},setAspectMode:function(s){return s===void 0&&(s=0),this.aspectMode=s,this.setSize(this._width,this._height)},setSnap:function(s,n){return s===void 0&&(s=0),n===void 0&&(n=s),this.snapTo.set(s,n),this.setSize(this._width,this._height)},setParent:function(s){return this._parent=s,this.setSize(this._width,this._height)},setMin:function(s,n){return s===void 0&&(s=0),n===void 0&&(n=s),this.minWidth=o(s,0,this.maxWidth),this.minHeight=o(n,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(s,n){return s===void 0&&(s=Number.MAX_VALUE),n===void 0&&(n=s),this.maxWidth=o(s,this.minWidth,Number.MAX_VALUE),this.maxHeight=o(n,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(s,n){switch(s===void 0&&(s=0),n===void 0&&(n=s),this.aspectMode){case i.NONE:this._width=this.getNewWidth(l(s,this.snapTo.x)),this._height=this.getNewHeight(l(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case i.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(l(s,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case i.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(l(n,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case i.FIT:this.constrain(s,n,!0);break;case i.ENVELOP:this.constrain(s,n,!1);break}return this},setAspectRatio:function(s){return this.aspectRatio=s,this.setSize(this._width,this._height)},resize:function(s,n){return this._width=this.getNewWidth(l(s,this.snapTo.x)),this._height=this.getNewHeight(l(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(s,n){return n===void 0&&(n=!0),s=o(s,this.minWidth,this.maxWidth),n&&this._parent&&s>this._parent.width&&(s=Math.max(this.minWidth,this._parent.width)),s},getNewHeight:function(s,n){return n===void 0&&(n=!0),s=o(s,this.minHeight,this.maxHeight),n&&this._parent&&s>this._parent.height&&(s=Math.max(this.minHeight,this._parent.height)),s},constrain:function(s,n,d){s===void 0&&(s=0),n===void 0&&(n=s),d===void 0&&(d=!0),s=this.getNewWidth(s),n=this.getNewHeight(n);var a=this.snapTo,u=n===0?1:s/n;return d&&this.aspectRatio>u||!d&&this.aspectRatio<u?(s=l(s,a.x),n=s/this.aspectRatio,a.y>0&&(n=l(n,a.y),s=n*this.aspectRatio)):(d&&this.aspectRatio<u||!d&&this.aspectRatio>u)&&(n=l(n,a.y),s=n*this.aspectRatio,a.x>0&&(s=l(s,a.x),n=s*(1/this.aspectRatio))),this._width=s,this._height=n,this},fitTo:function(s,n){return this.constrain(s,n,!0)},envelop:function(s,n){return this.constrain(s,n,!1)},setWidth:function(s){return this.setSize(s,this._height)},setHeight:function(s){return this.setSize(this._width,s)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(s){s&&s.style&&(s.style.width=this._width+"px",s.style.height=this._height+"px")},copy:function(s){return s.setAspectMode(this.aspectMode),s.aspectRatio=this.aspectRatio,s.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(s){this.setSize(s,this._height)}},height:{get:function(){return this._height},set:function(s){this.setSize(this._width,s)}}});i.NONE=0,i.WIDTH_CONTROLS_HEIGHT=1,i.HEIGHT_CONTROLS_WIDTH=2,i.FIT=3,i.ENVELOP=4,c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(144),l=e(20),h=e(22),i=e(6),s=e(95),n=e(1),d=e(418),a=e(204),u=new o({initialize:function(p,v){if(this.game=p,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,v){Array.isArray(v)||(v=[v]);for(var m=0;m<v.length;m++)this._pending.push({key:"default",scene:v[m],autoStart:m===0,data:{}})}p.events.once(h.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var f,p,v,m;for(f=0;f<this._pending.length;f++){p=this._pending[f],v=p.key,m=p.scene;var E;m instanceof d?E=this.createSceneFromInstance(v,m):typeof m=="object"?E=this.createSceneFromObject(v,m):typeof m=="function"&&(E=this.createSceneFromFunction(v,m)),v=E.sys.settings.key,this.keys[v]=E,this.scenes.push(E),this._data[v]&&(E.sys.settings.data=this._data[v].data,this._data[v].autoStart&&(p.autoStart=!0)),(p.autoStart||E.sys.settings.active)&&this._start.push(v)}for(this._pending.length=0,this._data={},this.isBooted=!0,f=0;f<this._start.length;f++)p=this._start[f],this.start(p);this._start.length=0}},processQueue:function(){var f=this._pending.length,p=this._queue.length;if(!(f===0&&p===0)){var v,m;if(f){for(v=0;v<f;v++)m=this._pending[v],this.add(m.key,m.scene,m.autoStart,m.data);for(v=0;v<this._start.length;v++)m=this._start[v],this.start(m);this._start.length=0,this._pending.length=0;return}for(v=0;v<this._queue.length;v++)m=this._queue[v],this[m.op](m.keyA,m.keyB);this._queue.length=0}},add:function(f,p,v,m){if(v===void 0&&(v=!1),m===void 0&&(m={}),this.isProcessing||!this.isBooted)return this._pending.push({key:f,scene:p,autoStart:v,data:m}),this.isBooted||(this._data[f]={data:m}),null;f=this.getKey(f,p);var E;return p instanceof d?E=this.createSceneFromInstance(f,p):typeof p=="object"?(p.key=f,E=this.createSceneFromObject(f,p)):typeof p=="function"&&(E=this.createSceneFromFunction(f,p)),E.sys.settings.data=m,f=E.sys.settings.key,this.keys[f]=E,this.scenes.push(E),(v||E.sys.settings.active)&&(this._pending.length?this._start.push(f):this.start(f)),E},remove:function(f){if(this.isProcessing)this._queue.push({op:"remove",keyA:f,keyB:null});else{var p=this.getScene(f);if(!p||p.sys.isTransitioning())return this;var v=this.scenes.indexOf(p),m=p.sys.settings.key;v>-1&&(delete this.keys[m],this.scenes.splice(v,1),this._start.indexOf(m)>-1&&(v=this._start.indexOf(m),this._start.splice(v,1)),p.sys.destroy())}return this},bootScene:function(f){var p=f.sys,v=p.settings;p.sceneUpdate=n,f.init&&(f.init.call(f,v.data),v.status=g.INIT,v.isTransition&&p.events.emit(l.TRANSITION_INIT,v.transitionFrom,v.transitionDuration));var m;p.load&&(m=p.load,m.reset()),m&&f.preload?(f.preload.call(f),m.list.size===0?this.create(f):(v.status=g.LOADING,m.once(s.COMPLETE,this.loadComplete,this),m.start())):this.create(f)},loadComplete:function(f){this.create(f.scene)},payloadComplete:function(f){this.bootScene(f.scene)},update:function(f,p){this.processQueue(),this.isProcessing=!0;for(var v=this.scenes.length-1;v>=0;v--){var m=this.scenes[v].sys;m.settings.status>g.START&&m.settings.status<=g.RUNNING&&m.step(f,p)}},render:function(f){for(var p=0;p<this.scenes.length;p++){var v=this.scenes[p].sys;v.settings.visible&&v.settings.status>=g.LOADING&&v.settings.status<g.SLEEPING&&v.render(f)}this.isProcessing=!1},create:function(f){var p=f.sys,v=p.settings;f.create&&(v.status=g.CREATING,f.create.call(f,v.data),v.status===g.DESTROYED)||(v.isTransition&&p.events.emit(l.TRANSITION_START,v.transitionFrom,v.transitionDuration),f.update&&(p.sceneUpdate=f.update),v.status=g.RUNNING,p.events.emit(l.CREATE,f))},createSceneFromFunction:function(f,p){var v=new p;if(v instanceof d){var m=v.sys.settings.key;if(m!==""&&(f=m),this.keys.hasOwnProperty(f))throw new Error("Cannot add a Scene with duplicate key: "+f);return this.createSceneFromInstance(f,v)}else return v.sys=new a(v),v.sys.settings.key=f,v.sys.init(this.game),v},createSceneFromInstance:function(f,p){var v=p.sys.settings.key;return v===""&&(p.sys.settings.key=f),p.sys.init(this.game),p},createSceneFromObject:function(f,p){var v=new d(p),m=v.sys.settings.key;m!==""?f=m:v.sys.settings.key=f,v.sys.init(this.game);for(var E=["init","preload","create","update","render"],x=0;x<E.length;x++){var y=i(p,E[x],null);y&&(v[E[x]]=y)}if(p.hasOwnProperty("extend")){for(var S in p.extend)if(!!p.extend.hasOwnProperty(S)){var C=p.extend[S];S==="data"&&v.hasOwnProperty("data")&&typeof C=="object"?v.data.merge(C):S!=="sys"&&(v[S]=C)}}return v},getKey:function(f,p){if(f||(f="default"),typeof p=="function")return f;if(p instanceof d?f=p.sys.settings.key:typeof p=="object"&&p.hasOwnProperty("key")&&(f=p.key),this.keys.hasOwnProperty(f))throw new Error("Cannot add a Scene with duplicate key: "+f);return f},getScenes:function(f,p){f===void 0&&(f=!0),p===void 0&&(p=!1);for(var v=[],m=this.scenes,E=0;E<m.length;E++){var x=m[E];x&&(!f||f&&x.sys.isActive())&&v.push(x)}return p?v.reverse():v},getScene:function(f){if(typeof f=="string"){if(this.keys[f])return this.keys[f]}else for(var p=0;p<this.scenes.length;p++)if(f===this.scenes[p])return f;return null},isActive:function(f){var p=this.getScene(f);return p?p.sys.isActive():null},isPaused:function(f){var p=this.getScene(f);return p?p.sys.isPaused():null},isVisible:function(f){var p=this.getScene(f);return p?p.sys.isVisible():null},isSleeping:function(f){var p=this.getScene(f);return p?p.sys.isSleeping():null},pause:function(f,p){var v=this.getScene(f);return v&&v.sys.pause(p),this},resume:function(f,p){var v=this.getScene(f);return v&&v.sys.resume(p),this},sleep:function(f,p){var v=this.getScene(f);return v&&!v.sys.isTransitioning()&&v.sys.sleep(p),this},wake:function(f,p){var v=this.getScene(f);return v&&v.sys.wake(p),this},run:function(f,p){var v=this.getScene(f);if(!v){for(var m=0;m<this._pending.length;m++)if(this._pending[m].key===f){this.queueOp("start",f,p);break}return this}v.sys.isSleeping()?v.sys.wake(p):v.sys.isPaused()?v.sys.resume(p):this.start(f,p)},start:function(f,p){if(!this.isBooted)return this._data[f]={autoStart:!0,data:p},this;var v=this.getScene(f);if(v){var m=v.sys;if(m.isActive()||m.isPaused())m.shutdown(),m.sceneUpdate=n,m.start(p);else{m.sceneUpdate=n,m.start(p);var E;if(m.load&&(E=m.load),E&&m.settings.hasOwnProperty("pack")&&(E.reset(),E.addPack({payload:m.settings.pack})))return m.settings.status=g.LOADING,E.once(s.COMPLETE,this.payloadComplete,this),E.start(),this}this.bootScene(v)}return this},stop:function(f,p){var v=this.getScene(f);return v&&!v.sys.isTransitioning()&&v.sys.shutdown(p),this},switch:function(f,p){var v=this.getScene(f),m=this.getScene(p);return v&&m&&v!==m&&(this.sleep(f),this.isSleeping(p)?this.wake(p):this.start(p)),this},getAt:function(f){return this.scenes[f]},getIndex:function(f){var p=this.getScene(f);return this.scenes.indexOf(p)},bringToTop:function(f){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:f,keyB:null});else{var p=this.getIndex(f);if(p!==-1&&p<this.scenes.length){var v=this.getScene(f);this.scenes.splice(p,1),this.scenes.push(v)}}return this},sendToBack:function(f){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:f,keyB:null});else{var p=this.getIndex(f);if(p!==-1&&p>0){var v=this.getScene(f);this.scenes.splice(p,1),this.scenes.unshift(v)}}return this},moveDown:function(f){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:f,keyB:null});else{var p=this.getIndex(f);if(p>0){var v=p-1,m=this.getScene(f),E=this.getAt(v);this.scenes[p]=E,this.scenes[v]=m}}return this},moveUp:function(f){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:f,keyB:null});else{var p=this.getIndex(f);if(p<this.scenes.length-1){var v=p+1,m=this.getScene(f),E=this.getAt(v);this.scenes[p]=E,this.scenes[v]=m}}return this},moveAbove:function(f,p){if(f===p)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:f,keyB:p});else{var v=this.getIndex(f),m=this.getIndex(p);if(v!==-1&&m!==-1){var E=this.getAt(m);this.scenes.splice(m,1),this.scenes.splice(v+1,0,E)}}return this},moveBelow:function(f,p){if(f===p)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:f,keyB:p});else{var v=this.getIndex(f),m=this.getIndex(p);if(v!==-1&&m!==-1){var E=this.getAt(m);this.scenes.splice(m,1),v===0?this.scenes.unshift(E):this.scenes.splice(v,0,E)}}return this},queueOp:function(f,p,v){return this._queue.push({op:f,keyA:p,keyB:v}),this},swapPosition:function(f,p){if(f===p)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:f,keyB:p});else{var v=this.getIndex(f),m=this.getIndex(p);if(v!==m&&v!==-1&&m!==-1){var E=this.getAt(v);this.scenes[v]=this.scenes[m],this.scenes[m]=E}}return this},dump:function(){for(var f=[],p=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],v=0;v<this.scenes.length;v++){var m=this.scenes[v].sys,E=m.settings.visible&&(m.settings.status===g.RUNNING||m.settings.status===g.PAUSED)?"[*] ":"[-] ";E+=m.settings.key+" ("+p[m.settings.status]+")",f.push(E)}console.log(f.join(`
`))},destroy:function(){for(var f=0;f<this.scenes.length;f++){var p=this.scenes[f].sys;p.destroy()}this.update=n,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});c.exports=u},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(204),l=new o({initialize:function(i){this.sys=new g(this,i),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(2),g=e(205),l=function(h){var i=h.game.config.defaultPhysicsSystem,s=o(h.settings,"physics",!1);if(!(!i&&!s)){var n=[];if(i&&n.push(g(i+"Physics")),s)for(var d in s)d=g(d.concat("Physics")),n.indexOf(d)===-1&&n.push(d);return n}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(2),g=function(l){var h=l.plugins.getDefaultScenePlugins(),i=o(l.settings,"plugins",!1);return Array.isArray(i)?i:h||[]};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(144),g=e(6),l=e(127),h=e(978),i={create:function(s){return typeof s=="string"?s={key:s}:s===void 0&&(s={}),{status:o.PENDING,key:g(s,"key",""),active:g(s,"active",!1),visible:g(s,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:g(s,"pack",!1),cameras:g(s,"cameras",null),map:g(s,"map",l(h,g(s,"mapAdd",{}))),physics:g(s,"physics",{}),loader:g(s,"loader",{}),plugins:g(s,"plugins",!1),input:g(s,"input",{})}}};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(31),g=e(423),l=e(0),h=e(38),i=e(33),s=e(9),n=e(106),d=e(22),a=e(388),u=e(6),f=e(425),p=e(206),v=new l({Extends:s,initialize:function(E){s.call(this),this.game=E,this.name="TextureManager",this.list={},this._tempCanvas=o.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,E.events.once(d.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(n.LOAD,this.updatePending,this),this.on(n.ERROR,this.updatePending,this);var m=this.game.config;this.addBase64("__DEFAULT",m.defaultImage),this.addBase64("__MISSING",m.missingImage),this.addBase64("__WHITE",m.whiteImage),this.game.events.once(d.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(n.LOAD),this.off(n.ERROR),this.emit(n.READY))},checkKey:function(m){return this.exists(m)?(console.error("Texture key already in use: "+m),!1):!0},remove:function(m){if(typeof m=="string")if(this.exists(m))m=this.get(m);else return console.warn("No texture found matching key: "+m),this;return this.list.hasOwnProperty(m.key)&&(m.destroy(),this.emit(n.REMOVE,m.key)),this},removeKey:function(m){return this.list.hasOwnProperty(m)&&delete this.list[m],this},addBase64:function(m,E){if(this.checkKey(m)){var x=this,y=new Image;y.onerror=function(){x.emit(n.ERROR,m)},y.onload=function(){var S=x.create(m,y);f.Image(S,0),x.emit(n.ADD,m,S),x.emit(n.LOAD,m,S)},y.src=E}return this},getBase64:function(m,E,x,y){x===void 0&&(x="image/png"),y===void 0&&(y=.92);var S="",C=this.getFrame(m,E);if(C&&(C.source.isRenderTexture||C.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(C){var I=C.canvasData,O=o.create2D(this,I.width,I.height),M=O.getContext("2d");M.drawImage(C.source.image,I.x,I.y,I.width,I.height,0,0,I.width,I.height),S=O.toDataURL(x,y),o.remove(O)}return S},addImage:function(m,E,x){var y=null;return this.checkKey(m)&&(y=this.create(m,E),f.Image(y,0),x&&y.setDataSource(x),this.emit(n.ADD,m,y)),y},addGLTexture:function(m,E,x,y){var S=null;return this.checkKey(m)&&(x===void 0&&(x=E.width),y===void 0&&(y=E.height),S=this.create(m,E,x,y),S.add("__BASE",0,0,0,x,y),this.emit(n.ADD,m,S)),S},addRenderTexture:function(m,E){var x=null;return this.checkKey(m)&&(x=this.create(m,E),x.add("__BASE",0,0,0,E.width,E.height),this.emit(n.ADD,m,x)),x},generate:function(m,E){if(this.checkKey(m)){var x=o.create(this,1,1);return E.canvas=x,a(E),this.addCanvas(m,x)}else return null},createCanvas:function(m,E,x){if(E===void 0&&(E=256),x===void 0&&(x=256),this.checkKey(m)){var y=o.create(this,E,x,i.CANVAS,!0);return this.addCanvas(m,y)}return null},addCanvas:function(m,E,x){x===void 0&&(x=!1);var y=null;return x?y=new g(this,m,E,E.width,E.height):this.checkKey(m)&&(y=new g(this,m,E,E.width,E.height),this.list[m]=y,this.emit(n.ADD,m,y)),y},addAtlas:function(m,E,x,y){return Array.isArray(x.textures)||Array.isArray(x.frames)?this.addAtlasJSONArray(m,E,x,y):this.addAtlasJSONHash(m,E,x,y)},addAtlasJSONArray:function(m,E,x,y){var S=null;if(this.checkKey(m)){if(S=this.create(m,E),Array.isArray(x))for(var C=x.length===1,I=0;I<S.source.length;I++){var O=C?x[0]:x[I];f.JSONArray(S,I,O)}else f.JSONArray(S,0,x);y&&S.setDataSource(y),this.emit(n.ADD,m,S)}return S},addAtlasJSONHash:function(m,E,x,y){var S=null;if(this.checkKey(m)){if(S=this.create(m,E),Array.isArray(x))for(var C=0;C<x.length;C++)f.JSONHash(S,C,x[C]);else f.JSONHash(S,0,x);y&&S.setDataSource(y),this.emit(n.ADD,m,S)}return S},addAtlasXML:function(m,E,x,y){var S=null;return this.checkKey(m)&&(S=this.create(m,E),f.AtlasXML(S,0,x),y&&S.setDataSource(y),this.emit(n.ADD,m,S)),S},addUnityAtlas:function(m,E,x,y){var S=null;return this.checkKey(m)&&(S=this.create(m,E),f.UnityYAML(S,0,x),y&&S.setDataSource(y),this.emit(n.ADD,m,S)),S},addSpriteSheet:function(m,E,x){var y=null;if(this.checkKey(m)){y=this.create(m,E);var S=y.source[0].width,C=y.source[0].height;f.SpriteSheet(y,0,0,0,S,C,x),this.emit(n.ADD,m,y)}return y},addSpriteSheetFromAtlas:function(m,E){if(!this.checkKey(m))return null;var x=u(E,"atlas",null),y=u(E,"frame",null);if(!(!x||!y)){var S=this.get(x),C=S.get(y);if(C){var I=this.create(m,C.source.image);return C.trimmed?f.SpriteSheetFromAtlas(I,C,E):f.SpriteSheet(I,0,C.cutX,C.cutY,C.cutWidth,C.cutHeight,E),this.emit(n.ADD,m,I),I}}},create:function(m,E,x,y){var S=null;return this.checkKey(m)&&(S=new p(this,m,E,x,y),this.list[m]=S),S},exists:function(m){return this.list.hasOwnProperty(m)},get:function(m){return m===void 0&&(m="__DEFAULT"),this.list[m]?this.list[m]:m instanceof p?m:this.list.__MISSING},cloneFrame:function(m,E){if(this.list[m])return this.list[m].get(E).clone()},getFrame:function(m,E){if(this.list[m])return this.list[m].get(E)},getTextureKeys:function(){var m=[];for(var E in this.list)E!=="__DEFAULT"&&E!=="__MISSING"&&m.push(E);return m},getPixel:function(m,E,x,y){var S=this.getFrame(x,y);if(S){m-=S.x,E-=S.y;var C=S.data.cut;if(m+=C.x,E+=C.y,m>=C.x&&m<C.r&&E>=C.y&&E<C.b){var I=this._tempContext;I.clearRect(0,0,1,1),I.drawImage(S.source.image,m,E,1,1,0,0,1,1);var O=I.getImageData(0,0,1,1);return new h(O.data[0],O.data[1],O.data[2],O.data[3])}}return null},getPixelAlpha:function(m,E,x,y){var S=this.getFrame(x,y);if(S){m-=S.x,E-=S.y;var C=S.data.cut;if(m+=C.x,E+=C.y,m>=C.x&&m<C.r&&E>=C.y&&E<C.b){var I=this._tempContext;I.clearRect(0,0,1,1),I.drawImage(S.source.image,m,E,1,1,0,0,1,1);var O=I.getImageData(0,0,1,1);return O.data[3]}}return null},setTexture:function(m,E,x){return this.list[E]&&(m.texture=this.list[E],m.frame=m.texture.get(x)),m},renameTexture:function(m,E){var x=this.get(m);return x&&m!==E?(x.key=E,this.list[E]=x,delete this.list[m],!0):!1},each:function(m,E){for(var x=[null],y=1;y<arguments.length;y++)x.push(arguments[y]);for(var S in this.list)x[0]=this.list[S],m.apply(E,x)},destroy:function(){for(var m in this.list)this.list[m].destroy();this.list={},this.game=null,o.remove(this._tempCanvas)}});c.exports=v},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(18),l=e(38),h=e(33),i=e(138),s=e(206),n=new o({Extends:s,initialize:function(a,u,f,p,v){s.call(this,a,u,f,p,v),this.add("__BASE",0,0,0,p,v),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=p,this.height=v,this.imageData=this.context.getImageData(0,0,p,v),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===h.WEBGL&&this.refresh(),this},draw:function(d,a,u){return this.context.drawImage(u,d,a),this.update()},drawFrame:function(d,a,u,f){u===void 0&&(u=0),f===void 0&&(f=0);var p=this.manager.getFrame(d,a);if(p){var v=p.canvasData,m=p.cutWidth,E=p.cutHeight,x=p.source.resolution;return this.context.drawImage(p.source.image,v.x,v.y,m,E,u,f,m/x,E/x),this.update()}else return this},setPixel:function(d,a,u,f,p,v){v===void 0&&(v=255),d=Math.abs(Math.floor(d)),a=Math.abs(Math.floor(a));var m=this.getIndex(d,a);if(m>-1){var E=this.context.getImageData(d,a,1,1);E.data[0]=u,E.data[1]=f,E.data[2]=p,E.data[3]=v,this.context.putImageData(E,d,a)}return this},putData:function(d,a,u,f,p,v,m){return f===void 0&&(f=0),p===void 0&&(p=0),v===void 0&&(v=d.width),m===void 0&&(m=d.height),this.context.putImageData(d,a,u,f,p,v,m),this},getData:function(d,a,u,f){d=g(Math.floor(d),0,this.width-1),a=g(Math.floor(a),0,this.height-1),u=g(u,1,this.width-d),f=g(f,1,this.height-a);var p=this.context.getImageData(d,a,u,f);return p},getPixel:function(d,a,u){u||(u=new l);var f=this.getIndex(d,a);if(f>-1){var p=this.data,v=p[f+0],m=p[f+1],E=p[f+2],x=p[f+3];u.setTo(v,m,E,x)}return u},getPixels:function(d,a,u,f){d===void 0&&(d=0),a===void 0&&(a=0),u===void 0&&(u=this.width),f===void 0&&(f=u),d=Math.abs(Math.round(d)),a=Math.abs(Math.round(a));for(var p=g(d,0,this.width),v=g(d+u,0,this.width),m=g(a,0,this.height),E=g(a+f,0,this.height),x=new l,y=[],S=m;S<E;S++){for(var C=[],I=p;I<v;I++)x=this.getPixel(I,S,x),C.push({x:I,y:S,color:x.color,alpha:x.alphaGL});y.push(C)}return y},getIndex:function(d,a){return d=Math.abs(Math.round(d)),a=Math.abs(Math.round(a)),d<this.width&&a<this.height?(d+a*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(d,a,u,f){return d===void 0&&(d=0),a===void 0&&(a=0),u===void 0&&(u=this.width),f===void 0&&(f=this.height),this.context.clearRect(d,a,u,f),this.update()},setSize:function(d,a){return a===void 0&&(a=d),(d!==this.width||a!==this.height)&&(this.canvas.width=d,this.canvas.height=a,this._source.width=d,this._source.height=a,this._source.isPowerOf2=i(d,a),this.frames.__BASE.setSize(d,a,0,0),this.width=d,this.height=a,this.refresh()),this},destroy:function(){s.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(31),g=e(0),l=e(138),h=e(168),i=new g({initialize:function(n,d,a,u,f){f===void 0&&(f=!1);var p=n.manager.game;this.renderer=p.renderer,this.texture=n,this.source=d,this.image=d,this.compressionAlgorithm=null,this.resolution=1,this.width=a||d.naturalWidth||d.videoWidth||d.width||0,this.height=u||d.naturalHeight||d.videoHeight||d.height||0,this.scaleMode=h.DEFAULT,this.isCanvas=d instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&d instanceof HTMLVideoElement,this.isRenderTexture=d.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&d instanceof WebGLTexture,this.isPowerOf2=l(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=f,this.init(p)},init:function(s){var n=this.renderer;n&&(n.gl?this.isCanvas?this.glTexture=n.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=n.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=n.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=n.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),s.config.antialias||this.setFilter(1)},setFilter:function(s){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,s),this.scaleMode=s},setFlipY:function(s){return s===void 0&&(s=!0),this.flipY=s,this},update:function(){var s=this.renderer.gl;s&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):s&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&o.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AtlasXML:e(979),Canvas:e(980),Image:e(981),JSONArray:e(982),JSONHash:e(983),SpriteSheet:e(984),SpriteSheetFromAtlas:e(985),UnityYAML:e(986)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(427),g=e(430),l=e(432),h={create:function(i){var s=i.config.audio,n=i.device.audio;return s.noAudio||!n.webAudio&&!n.audioData?new g(i):n.webAudio&&!s.disableWebAudio?new l(i):new o(i)}};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(145),g=e(0),l=e(70),h=e(429),i=new g({Extends:o,initialize:function(n){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,o.call(this,n)},add:function(s,n){var d=new h(this,s,n);return this.sounds.push(d),d},unlock:function(){this.locked=!1;var s=this;if(this.game.cache.audio.entries.each(function(u,f){for(var p=0;p<f.length;p++)if(f[p].dataset.locked==="true")return s.locked=!0,!1;return!0}),!!this.locked){var n=!1,d=function(){n=!0},a=function(){if(n){n=!1;return}document.body.removeEventListener("touchmove",d),document.body.removeEventListener("touchend",a);var u=[];if(s.game.cache.audio.entries.each(function(p,v){for(var m=0;m<v.length;m++){var E=v[m];E.dataset.locked==="true"&&u.push(E)}return!0}),u.length!==0){var f=u[u.length-1];f.oncanplaythrough=function(){f.oncanplaythrough=null,u.forEach(function(p){p.dataset.locked="false"}),s.unlocked=!0},u.forEach(function(p){p.load()})}};this.once(l.UNLOCKED,function(){for(this.forEachActiveSound(function(f){f.currentMarker===null&&f.duration===0&&(f.duration=f.tags[0].duration),f.totalDuration=f.tags[0].duration});this.lockedActionsQueue.length;){var u=this.lockedActionsQueue.shift();u.sound[u.prop].apply?u.sound[u.prop].apply(u.sound,u.value||[]):u.sound[u.prop]=u.value}},this),document.body.addEventListener("touchmove",d,!1),document.body.addEventListener("touchend",a,!1)}},onBlur:function(){this.forEachActiveSound(function(s){s.isPlaying&&(this.onBlurPausedSounds.push(s),s.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(s){s.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){o.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(s,n,d){return s.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:s,prop:n,value:d}),!0):!1},setMute:function(s){return this.mute=s,this},mute:{get:function(){return this._mute},set:function(s){this._mute=s,this.forEachActiveSound(function(n){n.updateMute()}),this.emit(l.GLOBAL_MUTE,this,s)}},setVolume:function(s){return this.volume=s,this},volume:{get:function(){return this._volume},set:function(s){this._volume=s,this.forEachActiveSound(function(n){n.updateVolume()}),this.emit(l.GLOBAL_VOLUME,this,s)}}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(78),g=function(l,h,i,s,n){if(s===void 0&&(s=0),n===void 0&&(n=l.length),o(l,s,n))for(var d=s;d<n;d++){var a=l[d];if(!h||h&&i===void 0&&a.hasOwnProperty(h)||h&&i!==void 0&&a[h]===i)return a}return null};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(146),g=e(0),l=e(70),h=e(18),i=new g({Extends:o,initialize:function(n,d,a){if(a===void 0&&(a={}),this.tags=n.game.cache.audio.get(d),!this.tags)throw new Error('There is no audio asset with key "'+d+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,o.call(this,n,d,a)},play:function(s,n){return this.manager.isLocked(this,"play",[s,n])||!o.prototype.play.call(this,s,n)||!this.pickAndPlayAudioTag()?!1:(this.emit(l.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!o.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(l.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!o.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(l.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!o.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(l.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var s=this.currentConfig.seek,n=this.currentConfig.delay,d=(this.currentMarker?this.currentMarker.start:0)+s;return this.previousTime=d,this.audio.currentTime=d,this.applyConfig(),n===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+n*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var s=0;s<this.tags.length;s++){var n=this.tags[s];if(n.dataset.used==="false")return n.dataset.used="true",this.audio=n,!0}if(!this.manager.override)return!1;var d=[];this.manager.forEachActiveSound(function(u){u.key===this.key&&u.audio&&d.push(u)},this),d.sort(function(u,f){return u.loop===f.loop?f.seek/f.duration-u.seek/u.duration:u.loop?1:-1});var a=d[0];return this.audio=a.audio,a.reset(),a.audio=null,a.startTime=0,a.previousTime=0,!0},playCatchPromise:function(){var s=this.audio.play();s&&s.catch(function(n){console.warn(n)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){o.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(s){if(!!this.isPlaying){if(this.startTime>0){this.startTime<s-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,s-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var n=this.currentMarker?this.currentMarker.start:0,d=n+this.duration,a=this.audio.currentTime;if(this.currentConfig.loop)a>=d-this.manager.loopEndOffset?(this.audio.currentTime=n+Math.max(0,a-d),a=this.audio.currentTime):a<n&&(this.audio.currentTime+=n,a=this.audio.currentTime),a<this.previousTime&&this.emit(l.LOOPED,this);else if(a>=d){this.reset(),this.stopAndReleaseAudioTag(),this.emit(l.COMPLETE,this);return}this.previousTime=a}},destroy:function(){o.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=h(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){o.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(s){this.currentConfig.mute=s,!this.manager.isLocked(this,"mute",s)&&(this.updateMute(),this.emit(l.MUTE,this,s))}},setMute:function(s){return this.mute=s,this},volume:{get:function(){return this.currentConfig.volume},set:function(s){this.currentConfig.volume=s,!this.manager.isLocked(this,"volume",s)&&(this.updateVolume(),this.emit(l.VOLUME,this,s))}},setVolume:function(s){return this.volume=s,this},rate:{get:function(){return this.currentConfig.rate},set:function(s){this.currentConfig.rate=s,!this.manager.isLocked(this,l.RATE,s)&&(this.calculateRate(),this.emit(l.RATE,this,s))}},setRate:function(s){return this.rate=s,this},detune:{get:function(){return this.currentConfig.detune},set:function(s){this.currentConfig.detune=s,!this.manager.isLocked(this,l.DETUNE,s)&&(this.calculateRate(),this.emit(l.DETUNE,this,s))}},setDetune:function(s){return this.detune=s,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(s){this.manager.isLocked(this,"seek",s)||this.startTime>0||(this.isPlaying||this.isPaused)&&(s=Math.min(Math.max(0,s),this.duration),this.isPlaying?(this.previousTime=s,this.audio.currentTime=s):this.isPaused&&(this.currentConfig.seek=s),this.emit(l.SEEK,this,s))}},setSeek:function(s){return this.seek=s,this},loop:{get:function(){return this.currentConfig.loop},set:function(s){this.currentConfig.loop=s,!this.manager.isLocked(this,"loop",s)&&(this.audio&&(this.audio.loop=s),this.emit(l.LOOP,this,s))}},setLoop:function(s){return this.loop=s,this},pan:{get:function(){return this.currentConfig.pan},set:function(s){this.currentConfig.pan=s,this.emit(l.PAN,this,s)}},setPan:function(s){return this.pan=s,this}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(145),g=e(0),l=e(9),h=e(431),i=e(1),s=new g({Extends:l,initialize:function(d){l.call(this),this.game=d,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(n,d){var a=new h(this,n,d);return this.sounds.push(a),a},addAudioSprite:function(n,d){var a=this.add(n,d);return a.spritemap={},a},play:function(n,d){return!1},playAudioSprite:function(n,d,a){return!1},remove:function(n){return o.prototype.remove.call(this,n)},removeByKey:function(n){return o.prototype.removeByKey.call(this,n)},pauseAll:i,resumeAll:i,stopAll:i,update:i,setRate:i,setDetune:i,setMute:i,setVolume:i,forEachActiveSound:function(n,d){o.prototype.forEachActiveSound.call(this,n,d)},destroy:function(){o.prototype.destroy.call(this)}});c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(146),g=e(0),l=e(9),h=e(17),i=function(){return!1},s=function(){return null},n=function(){return this},d=new g({Extends:l,initialize:function(u,f,p){p===void 0&&(p={}),l.call(this),this.manager=u,this.key=f,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=h({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},p),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:i,updateMarker:i,removeMarker:s,play:i,pause:i,resume:i,stop:i,destroy:function(){o.prototype.destroy.call(this)},setMute:n,setVolume:n,setRate:n,setDetune:n,setSeek:n,setLoop:n,setPan:n});c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(433),g=e(145),l=e(0),h=e(70),i=e(22),s=e(434),n=new l({Extends:g,initialize:function(a){this.context=this.createAudioContext(a),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),g.call(this,a),this.locked&&a.isBooted?this.unlock():a.events.once(i.BOOT,this.unlock,this)},createAudioContext:function(d){var a=d.config.audio;if(a.context)return a.context.resume(),a.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(d){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=d,this.masterMuteNode=d.createGain(),this.masterVolumeNode=d.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(d.destination),this.destination=this.masterMuteNode,this},add:function(d,a){var u=new s(this,d,a);return this.sounds.push(u),u},decodeAudio:function(d,a){var u;Array.isArray(d)?u=d:u=[{key:d,data:a}];for(var f=this.game.cache.audio,p=u.length,v=0;v<u.length;v++){var m=u[v],E=m.key,x=m.data;typeof x=="string"&&(x=o(x));var y=function(C,I){f.add(C,I),this.emit(h.DECODED,C),p--,p===0&&this.emit(h.DECODED_ALL)}.bind(this,E),S=function(C,I){console.error("Error decoding audio: "+C+" - ",I?I.message:""),p--,p===0&&this.emit(h.DECODED_ALL)}.bind(this,E);this.context.decodeAudioData(x,y,S)}},unlock:function(){var d=this,a=document.body,u=function f(){if(d.context&&a){var p=a.removeEventListener;d.context.resume().then(function(){p("touchstart",f),p("touchend",f),p("click",f),p("keydown",f),d.unlocked=!0},function(){p("touchstart",f),p("touchend",f),p("click",f),p("keydown",f)})}};a&&(a.addEventListener("touchstart",u,!1),a.addEventListener("touchend",u,!1),a.addEventListener("click",u,!1),a.addEventListener("keydown",u,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var d=this.context;(d.state==="suspended"||d.state==="interrupted")&&!this.locked&&d.resume()},update:function(d,a){g.prototype.update.call(this,d,a);var u=this.context;u&&u.state==="interrupted"&&u.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var d=this;this.context.close().then(function(){d.context=null})}g.prototype.destroy.call(this)},setMute:function(d){return this.mute=d,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(d){this.masterMuteNode.gain.setValueAtTime(d?0:1,0),this.emit(h.GLOBAL_MUTE,this,d)}},setVolume:function(d){return this.volume=d,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(d){this.masterVolumeNode.gain.setValueAtTime(d,0),this.emit(h.GLOBAL_VOLUME,this,d)}}});c.exports=n},function(c,R){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(256),g=0;g<e.length;g++)o[e.charCodeAt(g)]=g;var l=function(h){h=h.substr(h.indexOf(",")+1);var i=h.length,s=i*.75,n=0,d,a,u,f;h[i-1]==="="&&(s--,h[i-2]==="="&&s--);for(var p=new ArrayBuffer(s),v=new Uint8Array(p),m=0;m<i;m+=4)d=o[h.charCodeAt(m)],a=o[h.charCodeAt(m+1)],u=o[h.charCodeAt(m+2)],f=o[h.charCodeAt(m+3)],v[n++]=d<<2|a>>4,v[n++]=(a&15)<<4|u>>2,v[n++]=(u&3)<<6|f&63;return p};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(146),g=e(0),l=e(70),h=new g({Extends:o,initialize:function(s,n,d){if(d===void 0&&(d={}),this.audioBuffer=s.game.cache.audio.get(n),!this.audioBuffer)throw new Error('Audio key "'+n+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=s.context.createGain(),this.volumeNode=s.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),s.context.createStereoPanner?(this.pannerNode=s.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(s.destination)):this.volumeNode.connect(s.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,o.call(this,s,n,d)},play:function(i,s){return o.prototype.play.call(this,i,s)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(l.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!o.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(l.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!o.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(l.RESUME,this),!0)},stop:function(){return o.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(l.STOP,this),!0):!1},createAndStartBufferSource:function(){var i=this.currentConfig.seek,s=this.currentConfig.delay,n=this.manager.context.currentTime+s,d=(this.currentMarker?this.currentMarker.start:0)+i,a=this.duration-i;this.playTime=n-i,this.startTime=n,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,n),Math.max(0,d),Math.max(0,a)),this.resetConfig()},createAndStartLoopBufferSource:function(){var i=this.getLoopTime(),s=this.currentMarker?this.currentMarker.start:0,n=this.duration;this.loopTime=i,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,i),Math.max(0,s),Math.max(0,n))},createBufferSource:function(){var i=this,s=this.manager.context.createBufferSource();return s.buffer=this.audioBuffer,s.connect(this.muteNode),s.onended=function(n){n.target===i.source&&(i.currentConfig.loop?i.hasLooped=!0:i.hasEnded=!0)},s},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),o.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,o.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(l.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(l.LOOPED,this))},destroy:function(){o.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){o.prototype.calculateRate.call(this);var i=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,i),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,i)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var i=0,s=0;s<this.rateUpdates.length;s++){var n=0;s<this.rateUpdates.length-1?n=this.rateUpdates[s+1].time:n=this.manager.context.currentTime-this.playTime,i+=(n-this.rateUpdates[s].time)*this.rateUpdates[s].rate}return i},getLoopTime:function(){for(var i=0,s=0;s<this.rateUpdates.length-1;s++)i+=(this.rateUpdates[s+1].time-this.rateUpdates[s].time)*this.rateUpdates[s].rate;var n=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+n.time+(this.duration-i)/n.rate},rate:{get:function(){return this.currentConfig.rate},set:function(i){this.currentConfig.rate=i,this.calculateRate(),this.emit(l.RATE,this,i)}},setRate:function(i){return this.rate=i,this},detune:{get:function(){return this.currentConfig.detune},set:function(i){this.currentConfig.detune=i,this.calculateRate(),this.emit(l.DETUNE,this,i)}},setDetune:function(i){return this.detune=i,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(i){this.currentConfig.mute=i,this.muteNode.gain.setValueAtTime(i?0:1,0),this.emit(l.MUTE,this,i)}},setMute:function(i){return this.mute=i,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(i){this.currentConfig.volume=i,this.volumeNode.gain.setValueAtTime(i,0),this.emit(l.VOLUME,this,i)}},setVolume:function(i){return this.volume=i,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(i){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(i=Math.min(Math.max(0,i),this.duration),this.currentConfig.seek=i,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(l.SEEK,this,i))}},setSeek:function(i){return this.seek=i,this},loop:{get:function(){return this.currentConfig.loop},set:function(i){this.currentConfig.loop=i,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),i&&this.createAndStartLoopBufferSource()),this.emit(l.LOOP,this,i)}},setLoop:function(i){return this.loop=i,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(i){this.currentConfig.pan=i,this.pannerNode&&this.pannerNode.pan.setValueAtTime(i,this.manager.context.currentTime),this.emit(l.PAN,this,i)}},setPan:function(i){return this.pan=i,this}});c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){for(var g=o.length,l=o[0].length,h=new Array(l),i=0;i<l;i++){h[i]=new Array(g);for(var s=g-1;s>-1;s--)h[i][s]=o[s][i]}return h};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(l,h,i){var s=l[h];l[h]=l[i],l[i]=s}function o(l,h){return l<h?-1:l>h?1:0}var g=function(l,h,i,s,n){for(i===void 0&&(i=0),s===void 0&&(s=l.length-1),n===void 0&&(n=o);s>i;){if(s-i>600){var d=s-i+1,a=h-i+1,u=Math.log(d),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(d-f)/d)*(a-d/2<0?-1:1),v=Math.max(i,Math.floor(h-a*f/d+p)),m=Math.min(s,Math.floor(h+(d-a)*f/d+p));g(l,h,v,m,n)}var E=l[h],x=i,y=s;for(e(l,i,h),n(l[s],E)>0&&e(l,i,s);x<y;){for(e(l,x,y),x++,y--;n(l[x],E)<0;)x++;for(;n(l[y],E)>0;)y--}n(l[i],E)===0?e(l,i,y):(y++,e(l,y,s)),y<=h&&(i=y+1),h<=y&&(s=y-1)}};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(6),g=e(131),l=function(i,s,n){for(var d=[],a=0;a<i.length;a++)for(var u=0;u<s.length;u++)for(var f=0;f<n;f++)d.push({a:i[a],b:s[u]});return d},h=function(i,s,n){var d=o(n,"max",0),a=o(n,"qty",1),u=o(n,"random",!1),f=o(n,"randomB",!1),p=o(n,"repeat",0),v=o(n,"yoyo",!1),m=[];if(f&&g(s),p===-1)if(d===0)p=0;else{var E=i.length*s.length*a;v&&(E*=2),p=Math.ceil(d/E)}for(var x=0;x<=p;x++){var y=l(i,s,a);u&&g(y),m=m.concat(y),v&&(y.reverse(),m=m.concat(y))}return d&&m.splice(d),m};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={PROCESS_QUEUE_ADD:e(1041),PROCESS_QUEUE_REMOVE:e(1042)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(13),g=function(l,h){var i=o(h,"anims",null);if(i===null)return l;if(typeof i=="string")l.anims.play(i);else if(typeof i=="object"){var s=l.anims,n=o(i,"key",void 0);if(n){var d=o(i,"startFrame",void 0),a=o(i,"delay",0),u=o(i,"repeat",0),f=o(i,"repeatDelay",0),p=o(i,"yoyo",!1),v=o(i,"play",!1),m=o(i,"delayedPlay",0),E={key:n,delay:a,repeat:u,repeatDelay:f,yoyo:p,startFrame:d};v?s.play(E):m>0?s.playAfterDelay(E,m):s.load(E)}}return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(109),l=new o({initialize:function(i,s,n,d,a){this.parent=i,this.x=s,this.y=n,this.frame=d,this.data={},this.tint=16777215,this._visible=a,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(h){return h===void 0?this.frame=this.parent.frame:h instanceof g&&h.texture===this.parent.texture?this.frame=h:this.frame=this.parent.texture.get(h),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(h,i,s){return this.x=h,this.y=i,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,s&&this.setFrame(s),this},setPosition:function(h,i){return this.x=h,this.y=i,this},setFlipX:function(h){return this.flipX=h,this},setFlipY:function(h){return this.flipY=h,this},setFlip:function(h,i){return this.flipX=h,this.flipY=i,this},setVisible:function(h){return this.visible=h,this},setAlpha:function(h){return this.alpha=h,this},setTint:function(h){return this.tint=h,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(h){this.parent.dirty|=this._visible!==h,this._visible=h}},alpha:{get:function(){return this._alpha},set:function(h){this.parent.dirty|=this._alpha>0!=h>0,this._alpha=h}}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10),g=function(l,h,i){i===void 0&&(i=new o);var s=Math.min(l.x,h.x),n=Math.min(l.y,h.y),d=Math.max(l.right,h.right)-s,a=Math.max(l.bottom,h.bottom)-n;return i.setTo(s,n,d,a)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(11),l=e(1055),h=e(15),i=e(7),s=e(202),n=e(20),d=e(140),a=new o({Extends:h,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Origin,g.ScrollFactor,g.Transform,g.Visible,l],initialize:function(f,p,v,m,E,x){h.call(this,f,"DOMElement"),this.parent=f.sys.game.domContainer,this.cache=f.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new d,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(p,v),typeof m=="string"?m[0]==="#"?this.setElement(m.substr(1),E,x):this.createElement(m,E,x):m&&this.setElement(m,E,x),f.sys.events.on(n.SLEEP,this.handleSceneEvent,this),f.sys.events.on(n.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(u){var f=this.node,p=f.style;f&&(p.display=u.settings.visible?"block":"none")},setSkew:function(u,f){return u===void 0&&(u=0),f===void 0&&(f=u),this.skewX=u,this.skewY=f,this},setPerspective:function(u){return this.parent.style.perspective=u+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(u){this.parent.style.perspective=u+"px"}},addListener:function(u){if(this.node){u=u.split(" ");for(var f=0;f<u.length;f++)this.node.addEventListener(u[f],this.handler,!1)}return this},removeListener:function(u){if(this.node){u=u.split(" ");for(var f=0;f<u.length;f++)this.node.removeEventListener(u[f],this.handler)}return this},dispatchNativeEvent:function(u){this.emit(u.type,u)},createElement:function(u,f,p){return this.setElement(document.createElement(u),f,p)},setElement:function(u,f,p){this.removeElement();var v;if(typeof u=="string"?(u[0]==="#"&&(u=u.substr(1)),v=document.getElementById(u)):typeof u=="object"&&u.nodeType===1&&(v=u),!v)return this;if(this.node=v,f&&i(f))for(var m in f)v.style[m]=f[m];else typeof f=="string"&&(v.style=f);return v.style.zIndex="0",v.style.display="inline",v.style.position="absolute",v.phaser=this,this.parent&&this.parent.appendChild(v),p&&(v.innerText=p),this.updateSize()},createFromCache:function(u,f){var p=this.cache.get(u);return p&&this.createFromHTML(p,f),this},createFromHTML:function(u,f){f===void 0&&(f="div"),this.removeElement();var p=document.createElement(f);return this.node=p,p.style.zIndex="0",p.style.display="inline",p.style.position="absolute",p.phaser=this,this.parent&&this.parent.appendChild(p),p.innerHTML=u,this.updateSize()},removeElement:function(){return this.node&&(s(this.node),this.node=null),this},updateSize:function(){var u=this.node,f=u.getBoundingClientRect();return this.width=u.clientWidth,this.height=u.clientHeight,this.displayWidth=f.width||0,this.displayHeight=f.height||0,this},getChildByProperty:function(u,f){if(this.node){for(var p=this.node.querySelectorAll("*"),v=0;v<p.length;v++)if(p[v][u]===f)return p[v]}return null},getChildByID:function(u){return this.getChildByProperty("id",u)},getChildByName:function(u){return this.getChildByProperty("name",u)},setClassName:function(u){return this.node&&(this.node.className=u,this.updateSize()),this},setText:function(u){return this.node&&(this.node.innerText=u,this.updateSize()),this},setHTML:function(u){return this.node&&(this.node.innerHTML=u,this.updateSize()),this},preUpdate:function(){var u=this.parentContainer,f=this.node;f&&u&&!u.willRender()&&(f.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(n.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(n.WAKE,this.handleSceneEvent,this)}});c.exports=a},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1056),g=e(15),l=e(25),h=new l,i=new l,s=new l,n=function(d,a,u,f){if(!!a.node){var p=a.node.style,v=a.scene.sys.settings;if(!p||!v.visible||g.RENDER_MASK!==a.renderFlags||a.cameraFilter!==0&&a.cameraFilter&u.id||a.parentContainer&&!a.parentContainer.willRender()){p.display="none";return}var m=a.parentContainer,E=u.alpha*a.alpha;m&&(E*=m.alpha);var x=h,y=i,S=s,C=0,I=0,O="0%",M="0%";f?(C=a.width*a.scaleX*a.originX,I=a.height*a.scaleY*a.originY,y.applyITRS(a.x-C,a.y-I,a.rotation,a.scaleX,a.scaleY),x.copyFrom(u.matrix),x.multiplyWithOffset(f,-u.scrollX*a.scrollFactorX,-u.scrollY*a.scrollFactorY),y.e=a.x-C,y.f=a.y-I,x.multiply(y,S)):(C=a.width*a.originX,I=a.height*a.originY,y.applyITRS(a.x-C,a.y-I,a.rotation,a.scaleX,a.scaleY),x.copyFrom(u.matrix),O=100*a.originX+"%",M=100*a.originY+"%",y.e-=u.scrollX*a.scrollFactorX,y.f-=u.scrollY*a.scrollFactorY,x.multiply(y,S)),a.transformOnly||(p.display="block",p.opacity=E,p.zIndex=a._depth,p.pointerEvents=a.pointerEvents,p.mixBlendMode=o[a._blendMode]),p.transform=S.getCSSMatrix()+" skew("+a.skewX+"rad, "+a.skewY+"rad) rotate3d("+a.rotate3d.x+","+a.rotate3d.y+","+a.rotate3d.z+","+a.rotate3d.w+a.rotate3dAngle+")",p.transformOrigin=O+" "+M}};c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(11),l=e(15),h=e(1060),i=new o({Extends:l,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.Origin,g.ScrollFactor,g.Size,g.Texture,g.Tint,g.Transform,g.Visible,h],initialize:function(n){l.call(this,n,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(218),g=e(98),l=e(14),h=e(4),i=function(s,n,d){d===void 0&&(d=new h);var a=g(n,0,l.PI2);return o(s,a,d)};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(447),g=e(218),l=e(98),h=e(14),i=function(s,n,d,a){a===void 0&&(a=[]),!n&&d>0&&(n=o(s)/d);for(var u=0;u<n;u++){var f=l(u/n,0,h.PI2);a.push(g(s,f))}return a};c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g=o.width/2,l=o.height/2,h=Math.pow(g-l,2)/Math.pow(g+l,2);return Math.PI*(g+l)*(1+3*h/(10+Math.sqrt(4-3*h)))};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(217),g=e(30),l=function(h,i,s,n,d,a){var u=i.commandBuffer,f=u.length,p=d||h.currentContext;if(!(f===0||!g(h,p,i,s,n))){s.addToRenderList(i);var v=1,m=1,E=0,x=0,y=1,S=0,C=0,I=0;p.beginPath();for(var O=0;O<f;++O){var M=u[O];switch(M){case o.ARC:p.arc(u[O+1],u[O+2],u[O+3],u[O+4],u[O+5],u[O+6]),O+=7;break;case o.LINE_STYLE:y=u[O+1],E=u[O+2],v=u[O+3],S=(E&16711680)>>>16,C=(E&65280)>>>8,I=E&255,p.strokeStyle="rgba("+S+","+C+","+I+","+v+")",p.lineWidth=y,O+=3;break;case o.FILL_STYLE:x=u[O+1],m=u[O+2],S=(x&16711680)>>>16,C=(x&65280)>>>8,I=x&255,p.fillStyle="rgba("+S+","+C+","+I+","+m+")",O+=2;break;case o.BEGIN_PATH:p.beginPath();break;case o.CLOSE_PATH:p.closePath();break;case o.FILL_PATH:a||p.fill();break;case o.STROKE_PATH:a||p.stroke();break;case o.FILL_RECT:a?p.rect(u[O+1],u[O+2],u[O+3],u[O+4]):p.fillRect(u[O+1],u[O+2],u[O+3],u[O+4]),O+=4;break;case o.FILL_TRIANGLE:p.beginPath(),p.moveTo(u[O+1],u[O+2]),p.lineTo(u[O+3],u[O+4]),p.lineTo(u[O+5],u[O+6]),p.closePath(),a||p.fill(),O+=6;break;case o.STROKE_TRIANGLE:p.beginPath(),p.moveTo(u[O+1],u[O+2]),p.lineTo(u[O+3],u[O+4]),p.lineTo(u[O+5],u[O+6]),p.closePath(),a||p.stroke(),O+=6;break;case o.LINE_TO:p.lineTo(u[O+1],u[O+2]),O+=2;break;case o.MOVE_TO:p.moveTo(u[O+1],u[O+2]),O+=2;break;case o.LINE_FX_TO:p.lineTo(u[O+1],u[O+2]),O+=5;break;case o.MOVE_FX_TO:p.moveTo(u[O+1],u[O+2]),O+=5;break;case o.SAVE:p.save();break;case o.RESTORE:p.restore();break;case o.TRANSLATE:p.translate(u[O+1],u[O+2]),O+=2;break;case o.SCALE:p.scale(u[O+1],u[O+2]),O+=2;break;case o.ROTATE:p.rotate(u[O+1]),O+=1;break;case o.GRADIENT_FILL_STYLE:O+=5;break;case o.GRADIENT_LINE_STYLE:O+=6;break}}p.restore()}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(137),l=e(80),h=e(2),i=e(68),s=new o({initialize:function(d,a,u,f){f===void 0&&(f=!1),this.propertyKey=a,this.propertyValue=u,this.defaultValue=u,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=f,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(d)},loadConfig:function(n,d){n===void 0&&(n={}),d&&(this.propertyKey=d),this.propertyValue=h(n,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(n){return this.propertyValue=n,this.setMethods()},setMethods:function(){var n=this.propertyValue,d=typeof n;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,d==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(n))this.onEmit=this.randomStaticValueEmit;else if(d==="function")this.emitOnly?this.onEmit=n:this.onUpdate=n;else if(d==="object"&&this.hasBoth(n,"start","end")){this.start=n.start,this.end=n.end;var a=this.has(n,"random");if(a&&(this.onEmit=this.randomRangedValueEmit),this.has(n,"steps"))this.steps=n.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var u=this.has(n,"ease")?n.ease:"Linear";this.ease=l(u,n.easeParams),a||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(d==="object"&&this.hasBoth(n,"min","max"))this.start=n.min,this.end=n.max,this.onEmit=this.randomRangedValueEmit;else if(d==="object"&&this.has(n,"random")){var f=n.random;Array.isArray(f)&&(this.start=f[0],this.end=f[1]),this.onEmit=this.randomRangedValueEmit}else d==="object"&&this.hasEither(n,"onEmit","onUpdate")&&(this.has(n,"onEmit")&&(this.onEmit=n.onEmit),this.has(n,"onUpdate")&&(this.onUpdate=n.onUpdate));return this},has:function(n,d){return n.hasOwnProperty(d)},hasBoth:function(n,d,a){return n.hasOwnProperty(d)&&n.hasOwnProperty(a)},hasEither:function(n,d,a){return n.hasOwnProperty(d)||n.hasOwnProperty(a)},defaultEmit:function(n,d,a){return a},defaultUpdate:function(n,d,a,u){return u},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var n=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[n]},randomRangedValueEmit:function(n,d){var a=g(this.start,this.end);return n&&n.data[d]&&(n.data[d].min=a),a},steppedEmit:function(){var n=this.counter,d=this.counter+(this.end-this.start)/this.steps;return this.counter=i(d,this.start,this.end),n},easedValueEmit:function(n,d){if(n&&n.data[d]){var a=n.data[d];a.min=this.start,a.max=this.end}return this.start},easeValueUpdate:function(n,d,a){var u=n.data[d];return(u.max-u.min)*this.ease(a)+u.min}});c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(2),l=new o({initialize:function(i,s,n,d,a){if(typeof i=="object"){var u=i;i=g(u,"x",0),s=g(u,"y",0),n=g(u,"power",0),d=g(u,"epsilon",100),a=g(u,"gravity",50)}else i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=0),d===void 0&&(d=100),a===void 0&&(a=50);this.x=i,this.y=s,this.active=!0,this._gravity=a,this._power=0,this._epsilon=0,this.power=n,this.epsilon=d},update:function(h,i){var s=this.x-h.x,n=this.y-h.y,d=s*s+n*n;if(d!==0){var a=Math.sqrt(d);d<this._epsilon&&(d=this._epsilon);var u=this._power*i/(d*a)*100;h.velocityX+=s*u,h.velocityY+=n*u}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(h){this._epsilon=h*h}},power:{get:function(){return this._power/this._gravity},set:function(h){this._power=h*this._gravity}},gravity:{get:function(){return this._gravity},set:function(h){var i=this.power;this._gravity=h,this.power=i}}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(36),l=e(50),h=new o({initialize:function(s){this.emitter=s,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(i,s){var n=this.emitter;this.frame=n.getFrame(),n.emitZone&&n.emitZone.getPoint(this),i===void 0?this.x+=n.x.onEmit(this,"x"):this.x+=i,s===void 0?this.y+=n.y.onEmit(this,"y"):this.y+=s,this.life=n.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var d=n.speedX.onEmit(this,"speedX"),a=n.speedY?n.speedY.onEmit(this,"speedY"):d;if(n.radial){var u=g(n.angle.onEmit(this,"angle"));this.velocityX=Math.cos(u)*Math.abs(d),this.velocityY=Math.sin(u)*Math.abs(a)}else if(n.moveTo){var f=n.moveToX.onEmit(this,"moveToX"),p=n.moveToY?n.moveToY.onEmit(this,"moveToY"):f,v=Math.atan2(p-this.y,f-this.x),m=l(this.x,this.y,f,p)/(this.life/1e3);this.velocityX=Math.cos(v)*m,this.velocityY=Math.sin(v)*m}else this.velocityX=d,this.velocityY=a;n.acceleration&&(this.accelerationX=n.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=n.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=n.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=n.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=n.delay.onEmit(this,"delay"),this.scaleX=n.scaleX.onEmit(this,"scaleX"),this.scaleY=n.scaleY?n.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=n.rotate.onEmit(this,"rotate"),this.rotation=g(this.angle),this.bounce=n.bounce.onEmit(this,"bounce"),this.alpha=n.alpha.onEmit(this,"alpha"),this.tint=n.tint.onEmit(this,"tint")},computeVelocity:function(i,s,n,d){var a=this.velocityX,u=this.velocityY,f=this.accelerationX,p=this.accelerationY,v=this.maxVelocityX,m=this.maxVelocityY;a+=i.gravityX*n,u+=i.gravityY*n,f&&(a+=f*n),p&&(u+=p*n),a>v?a=v:a<-v&&(a=-v),u>m?u=m:u<-m&&(u=-m),this.velocityX=a,this.velocityY=u;for(var E=0;E<d.length;E++)d[E].update(this,s,n)},checkBounds:function(i){var s=i.bounds,n=-this.bounce;this.x<s.x&&i.collideLeft?(this.x=s.x,this.velocityX*=n):this.x>s.right&&i.collideRight&&(this.x=s.right,this.velocityX*=n),this.y<s.y&&i.collideTop?(this.y=s.y,this.velocityY*=n):this.y>s.bottom&&i.collideBottom&&(this.y=s.bottom,this.velocityY*=n)},update:function(i,s,n){if(this.delayCurrent>0)return this.delayCurrent-=i,!1;var d=this.emitter,a=1-this.lifeCurrent/this.life;return this.lifeT=a,this.computeVelocity(d,i,s,n),this.x+=this.velocityX*s,this.y+=this.velocityY*s,d.bounds&&this.checkBounds(d),d.deathZone&&d.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=d.scaleX.onUpdate(this,"scaleX",a,this.scaleX),d.scaleY?this.scaleY=d.scaleY.onUpdate(this,"scaleY",a,this.scaleY):this.scaleY=this.scaleX,this.angle=d.rotate.onUpdate(this,"rotate",a,this.angle),this.rotation=g(this.angle),this.alpha=d.alpha.onUpdate(this,"alpha",a,this.alpha),this.tint=d.tint.onUpdate(this,"tint",a,this.tint),this.lifeCurrent-=i,this.lifeCurrent<=0)}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(35),g=e(0),l=e(11),h=e(453),i=e(454),s=e(449),n=e(2),d=e(210),a=e(455),u=e(126),f=e(451),p=e(456),v=e(10),m=e(79),E=e(3),x=e(68),y=new g({Mixins:[l.BlendMode,l.Mask,l.ScrollFactor,l.Visible],initialize:function(C,I){this.manager=C,this.texture=C.texture,this.frames=[C.defaultFrame],this.defaultFrame=C.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=f,this.x=new s(I,"x",0,!0),this.y=new s(I,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new s(I,"accelerationX",0,!0),this.accelerationY=new s(I,"accelerationY",0,!0),this.maxVelocityX=new s(I,"maxVelocityX",1e4,!0),this.maxVelocityY=new s(I,"maxVelocityY",1e4,!0),this.speedX=new s(I,"speedX",0,!0),this.speedY=new s(I,"speedY",0,!0),this.moveTo=!1,this.moveToX=new s(I,"moveToX",0,!0),this.moveToY=new s(I,"moveToY",0,!0),this.bounce=new s(I,"bounce",0,!0),this.scaleX=new s(I,"scaleX",1),this.scaleY=new s(I,"scaleY",1),this.tint=new s(I,"tint",16777215),this.alpha=new s(I,"alpha",1),this.lifespan=new s(I,"lifespan",1e3,!0),this.angle=new s(I,"angle",{min:0,max:360},!0),this.rotate=new s(I,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new s(I,"quantity",1,!0),this.delay=new s(I,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=o.NORMAL,this.follow=null,this.followOffset=new E,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,I&&this.fromJSON(I)},fromJSON:function(S){if(!S)return this;var C=0,I="";for(C=0;C<this.configFastMap.length;C++)I=this.configFastMap[C],u(S,I)&&(this[I]=n(S,I));for(C=0;C<this.configOpMap.length;C++)I=this.configOpMap[C],u(S,I)&&this[I].loadConfig(S);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,u(S,"speed")&&(this.speedX.loadConfig(S,"speed"),this.speedY=null),(a(S,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),u(S,"scale")&&(this.scaleX.loadConfig(S,"scale"),this.scaleY=null),u(S,"callbackScope")){var O=n(S,"callbackScope",null);this.emitCallbackScope=O,this.deathCallbackScope=O}return u(S,"emitZone")&&this.setEmitZone(S.emitZone),u(S,"deathZone")&&this.setDeathZone(S.deathZone),u(S,"bounds")&&this.setBounds(S.bounds),u(S,"followOffset")&&this.followOffset.setFromObject(n(S,"followOffset",0)),u(S,"frame")&&this.setFrame(S.frame),u(S,"reserve")&&this.reserve(S.reserve),this},toJSON:function(S){S===void 0&&(S={});var C=0,I="";for(C=0;C<this.configFastMap.length;C++)I=this.configFastMap[C],S[I]=this[I];for(C=0;C<this.configOpMap.length;C++)I=this.configOpMap[C],this[I]&&(S[I]=this[I].toJSON());return this.speedY||(delete S.speedX,S.speed=this.speedX.toJSON()),this.scaleY||(delete S.scaleX,S.scale=this.scaleX.toJSON()),S},startFollow:function(S,C,I,O){return C===void 0&&(C=0),I===void 0&&(I=0),O===void 0&&(O=!1),this.follow=S,this.followOffset.set(C,I),this.trackVisible=O,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return d(this.frames);var S=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=x(this.currentFrame+1,0,this._frameLength)),S},setFrame:function(S,C,I){C===void 0&&(C=!0),I===void 0&&(I=1),this.randomFrame=C,this.frameQuantity=I,this.currentFrame=0,this._frameCounter=0;var O=typeof S;if(Array.isArray(S)||O==="string"||O==="number")this.manager.setEmitterFrames(S,this);else if(O==="object"){var M=S;S=n(M,"frames",null),S&&this.manager.setEmitterFrames(S,this);var L=n(M,"cycle",!1);this.randomFrame=!L,this.frameQuantity=n(M,"quantity",I)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(S){return S===void 0&&(S=!0),this.radial=S,this},setPosition:function(S,C){return this.x.onChange(S),this.y.onChange(C),this},setBounds:function(S,C,I,O){if(typeof S=="object"){var M=S;S=M.x,C=M.y,I=u(M,"w")?M.w:M.width,O=u(M,"h")?M.h:M.height}return this.bounds?this.bounds.setTo(S,C,I,O):this.bounds=new v(S,C,I,O),this},setSpeedX:function(S){return this.speedX.onChange(S),this.radial=!1,this},setSpeedY:function(S){return this.speedY&&(this.speedY.onChange(S),this.radial=!1),this},setSpeed:function(S){return this.speedX.onChange(S),this.speedY=null,this.radial=!0,this},setScaleX:function(S){return this.scaleX.onChange(S),this},setScaleY:function(S){return this.scaleY.onChange(S),this},setScale:function(S){return this.scaleX.onChange(S),this.scaleY=null,this},setGravityX:function(S){return this.gravityX=S,this},setGravityY:function(S){return this.gravityY=S,this},setGravity:function(S,C){return this.gravityX=S,this.gravityY=C,this},setAlpha:function(S){return this.alpha.onChange(S),this},setTint:function(S){return this.tint.onChange(S),this},setEmitterAngle:function(S){return this.angle.onChange(S),this},setAngle:function(S){return this.angle.onChange(S),this},setLifespan:function(S){return this.lifespan.onChange(S),this},setQuantity:function(S){return this.quantity.onChange(S),this},setFrequency:function(S,C){return this.frequency=S,this._counter=0,C&&this.quantity.onChange(C),this},setEmitZone:function(S){if(S===void 0)this.emitZone=null;else{var C=n(S,"type","random"),I=n(S,"source",null);switch(C){case"random":this.emitZone=new p(I);break;case"edge":var O=n(S,"quantity",1),M=n(S,"stepRate",0),L=n(S,"yoyo",!1),P=n(S,"seamless",!0);this.emitZone=new i(I,O,M,L,P);break}}return this},setDeathZone:function(S){if(S===void 0)this.deathZone=null;else{var C=n(S,"type","onEnter"),I=n(S,"source",null);if(I&&typeof I.contains=="function"){var O=C==="onEnter";this.deathZone=new h(I,O)}}return this},reserve:function(S){for(var C=this.dead,I=0;I<S;I++)C.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(S,C){return S===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof S=="function"&&(this.emitCallback=S,C&&(this.emitCallbackScope=C)),this},onParticleDeath:function(S,C){return S===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof S=="function"&&(this.deathCallback=S,C&&(this.deathCallbackScope=C)),this},killAll:function(){for(var S=this.dead,C=this.alive;C.length>0;)S.push(C.pop());return this},forEachAlive:function(S,C){for(var I=this.alive,O=I.length,M=0;M<O;++M)S.call(C,I[M],this);return this},forEachDead:function(S,C){for(var I=this.dead,O=I.length,M=0;M<O;++M)S.call(C,I[M],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return m(this.alive,this.depthSortCallback),this},flow:function(S,C){return C===void 0&&(C=1),this.frequency=S,this.quantity.onChange(C),this.start()},explode:function(S,C,I){return this.frequency=-1,this.emitParticle(S,C,I)},emitParticleAt:function(S,C,I){return this.emitParticle(I,S,C)},emitParticle:function(S,C,I){if(!this.atLimit()){S===void 0&&(S=this.quantity.onEmit());for(var O=this.dead,M=this.follow?this.follow.x+this.followOffset.x:C,L=this.follow?this.follow.y+this.followOffset.y:I,P=0;P<S;P++){var b=O.pop();if(b||(b=new this.particleClass(this)),b.fire(M,L),this.particleBringToTop?this.alive.push(b):this.alive.unshift(b),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,b,this),this.atLimit())break}return b}},preUpdate:function(S,C){C*=this.timeScale;var I=C/1e3;this.trackVisible&&(this.visible=this.follow.visible);var O=this.manager.getProcessors(),M=this.alive,L=this.dead,P=0,b=[],B=M.length;for(P=0;P<B;P++){var U=M[P];U.update(C,I,O)&&b.push({index:P,particle:U})}if(B=b.length,B>0){var H=this.deathCallback,Y=this.deathCallbackScope;for(P=B-1;P>=0;P--){var j=b[P];M.splice(j.index,1),L.push(j.particle),H&&H.call(Y,j.particle),j.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=C,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(S,C){return S.y-C.y}});c.exports=y},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h,i){this.source=h,this.killOnEnter=i},willKill:function(l){var h=this.source.contains(l.x,l.y);return h&&this.killOnEnter||!h&&!this.killOnEnter}});c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h,i,s,n,d){n===void 0&&(n=!1),d===void 0&&(d=!0),this.source=h,this.points=[],this.quantity=i,this.stepRate=s,this.yoyo=n,this.counter=-1,this.seamless=d,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var l=this.points[0],h=this.points[this.points.length-1];l.x===h.x&&l.y===h.y&&this.points.pop()}var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(l){return this.source=l,this.updateSource()},getPoint:function(l){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var h=this.points[this.counter];h&&(l.x=h.x,l.y=h.y)}});c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){for(var l=0;l<g.length;l++)if(o.hasOwnProperty(g[l]))return!0;return!1};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(3),l=new o({initialize:function(i){this.source=i,this._tempVec=new g},getPoint:function(h){var i=this._tempVec;this.source.getRandomPoint(i),h.x=i.x,h.y=i.y}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(11),l=e(73),h=new o({Extends:l,Mixins:[g.PathFollower],initialize:function(s,n,d,a,u,f){l.call(this,s,d,a,u,f),this.path=n},preUpdate:function(i,s){this.anims.update(i,s),this.pathUpdate(i)}});c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=o.canvas,i=o.context,s=o.style,n=[],d=0,a=l.length;s.maxLines>0&&s.maxLines<l.length&&(a=s.maxLines),s.syncFont(h,i);for(var u=0;u<a;u++){var f=s.strokeThickness;f+=i.measureText(l[u]).width,s.wordWrap&&(f-=i.measureText(" ").width),n[u]=Math.ceil(f),d=Math.max(d,n[u])}var p=g.fontSize+s.strokeThickness,v=p*a,m=o.lineSpacing;return a>1&&(v+=m*(a-1)),{width:d,height:v,lines:a,lineWidths:n,lineSpacing:m,lineHeight:p}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(13),l=e(6),h=e(460),i={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},s=new o({initialize:function(d,a){this.parent=d,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(a,!1,!0);var u=l(a,"metrics",!1);u?this.metrics={ascent:l(u,"ascent",0),descent:l(u,"descent",0),fontSize:l(u,"fontSize",0)}:this.metrics=h(this)},setStyle:function(n,d,a){d===void 0&&(d=!0),a===void 0&&(a=!1),n&&n.hasOwnProperty("fontSize")&&typeof n.fontSize=="number"&&(n.fontSize=n.fontSize.toString()+"px");for(var u in i){var f=a?i[u][1]:this[u];u==="wordWrapCallback"||u==="wordWrapCallbackScope"?this[u]=l(n,i[u][0],f):this[u]=g(n,i[u][0],f)}var p=l(n,"font",null);p!==null&&this.setFont(p,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var v=l(n,"fill",null);return v!==null&&(this.color=v),d?this.update(!0):this.parent},syncFont:function(n,d){d.font=this._font},syncStyle:function(n,d){d.textBaseline="alphabetic",d.fillStyle=this.color,d.strokeStyle=this.stroke,d.lineWidth=this.strokeThickness,d.lineCap="round",d.lineJoin="round"},syncShadow:function(n,d){d?(n.shadowOffsetX=this.shadowOffsetX,n.shadowOffsetY=this.shadowOffsetY,n.shadowColor=this.shadowColor,n.shadowBlur=this.shadowBlur):(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowColor=0,n.shadowBlur=0)},update:function(n){return n&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=h(this)),this.parent.updateText()},setFont:function(n,d){d===void 0&&(d=!0);var a=n,u="",f="";if(typeof n!="string")a=l(n,"fontFamily","Courier"),u=l(n,"fontSize","16px"),f=l(n,"fontStyle","");else{var p=n.split(" "),v=0;f=p.length>2?p[v++]:"",u=p[v++]||"16px",a=p[v++]||"Courier"}return(a!==this.fontFamily||u!==this.fontSize||f!==this.fontStyle)&&(this.fontFamily=a,this.fontSize=u,this.fontStyle=f,d&&this.update(!0)),this.parent},setFontFamily:function(n){return this.fontFamily!==n&&(this.fontFamily=n,this.update(!0)),this.parent},setFontStyle:function(n){return this.fontStyle!==n&&(this.fontStyle=n,this.update(!0)),this.parent},setFontSize:function(n){return typeof n=="number"&&(n=n.toString()+"px"),this.fontSize!==n&&(this.fontSize=n,this.update(!0)),this.parent},setTestString:function(n){return this.testString=n,this.update(!0)},setFixedSize:function(n,d){return this.fixedWidth=n,this.fixedHeight=d,n&&(this.parent.width=n),d&&(this.parent.height=d),this.update(!1)},setBackgroundColor:function(n){return this.backgroundColor=n,this.update(!1)},setFill:function(n){return this.color=n,this.update(!1)},setColor:function(n){return this.color=n,this.update(!1)},setResolution:function(n){return this.resolution=n,this.update(!1)},setStroke:function(n,d){return d===void 0&&(d=this.strokeThickness),n===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==n||this.strokeThickness!==d)&&(this.stroke=n,this.strokeThickness=d,this.update(!0)),this.parent},setShadow:function(n,d,a,u,f,p){return n===void 0&&(n=0),d===void 0&&(d=0),a===void 0&&(a="#000"),u===void 0&&(u=0),f===void 0&&(f=!1),p===void 0&&(p=!0),this.shadowOffsetX=n,this.shadowOffsetY=d,this.shadowColor=a,this.shadowBlur=u,this.shadowStroke=f,this.shadowFill=p,this.update(!1)},setShadowOffset:function(n,d){return n===void 0&&(n=0),d===void 0&&(d=n),this.shadowOffsetX=n,this.shadowOffsetY=d,this.update(!1)},setShadowColor:function(n){return n===void 0&&(n="#000"),this.shadowColor=n,this.update(!1)},setShadowBlur:function(n){return n===void 0&&(n=0),this.shadowBlur=n,this.update(!1)},setShadowStroke:function(n){return this.shadowStroke=n,this.update(!1)},setShadowFill:function(n){return this.shadowFill=n,this.update(!1)},setWordWrapWidth:function(n,d){return d===void 0&&(d=!1),this.wordWrapWidth=n,this.wordWrapUseAdvanced=d,this.update(!1)},setWordWrapCallback:function(n,d){return d===void 0&&(d=null),this.wordWrapCallback=n,this.wordWrapCallbackScope=d,this.update(!1)},setAlign:function(n){return n===void 0&&(n="left"),this.align=n,this.update(!1)},setMaxLines:function(n){return n===void 0&&(n=0),this.maxLines=n,this.update(!1)},getTextMetrics:function(){var n=this.metrics;return{ascent:n.ascent,descent:n.descent,fontSize:n.fontSize}},toJSON:function(){var n={};for(var d in i)n[d]=this[d];return n.metrics=this.getTextMetrics(),n},destroy:function(){this.parent=void 0}});c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(31),g=function(l){var h=o.create(this),i=h.getContext("2d");l.syncFont(h,i);var s=i.measureText(l.testString);if("actualBoundingBoxAscent"in s){var n=s.actualBoundingBoxAscent,d=s.actualBoundingBoxDescent;return o.remove(h),{ascent:n,descent:d,fontSize:n+d}}var a=Math.ceil(s.width*l.baselineX),u=a,f=2*u;u=u*l.baselineY|0,h.width=a,h.height=f,i.fillStyle="#f00",i.fillRect(0,0,a,f),i.font=l._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(l.testString,0,u);var p={ascent:0,descent:0,fontSize:0},v=i.getImageData(0,0,a,f);if(!v)return p.ascent=u,p.descent=u+6,p.fontSize=p.ascent+p.descent,o.remove(h),p;var m=v.data,E=m.length,x=a*4,y,S,C=0,I=!1;for(y=0;y<u;y++){for(S=0;S<x;S+=4)if(m[C+S]!==255){I=!0;break}if(!I)C+=x;else break}for(p.ascent=u-y,C=E-x,I=!1,y=f;y>u;y--){for(S=0;S<x;S+=4)if(m[C+S]!==255){I=!0;break}if(!I)C-=x;else break}return p.descent=y-u,p.fontSize=p.ascent+p.descent,o.remove(h),p};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1097),g=e(0),l=e(36),h=e(59),i=e(65),s=e(14),n=e(34),d=new g({Extends:n,Mixins:[o],initialize:function(u,f,p,v,m,E,x,y,S){f===void 0&&(f=0),p===void 0&&(p=0),v===void 0&&(v=128),m===void 0&&(m=0),E===void 0&&(E=360),x===void 0&&(x=!1),n.call(this,u,"Arc",new i(0,0,v)),this._startAngle=m,this._endAngle=E,this._anticlockwise=x,this._iterations=.01,this.setPosition(f,p);var C=this.geom.radius*2;this.setSize(C,C),y!==void 0&&this.setFillStyle(y,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(a){this._iterations=a,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(a){this.geom.radius=a;var u=a*2;this.setSize(u,u),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(a){this._startAngle=a,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(a){this._endAngle=a,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(a){this._anticlockwise=a,this.updateData()}},setRadius:function(a){return this.radius=a,this},setIterations:function(a){return a===void 0&&(a=.01),this.iterations=a,this},setStartAngle:function(a,u){return this._startAngle=a,u!==void 0&&(this._anticlockwise=u),this.updateData()},setEndAngle:function(a,u){return this._endAngle=a,u!==void 0&&(this._anticlockwise=u),this.updateData()},updateData:function(){var a=this._iterations,u=a,f=this.geom.radius,p=l(this._startAngle),v=l(this._endAngle),m=this._anticlockwise,E=f,x=f;v-=p,m?v<-s.PI2?v=-s.PI2:v>0&&(v=-s.PI2+v%s.PI2):v>s.PI2?v=s.PI2:v<0&&(v=s.PI2+v%s.PI2);for(var y=[E+Math.cos(p)*f,x+Math.sin(p)*f],S;u<1;)S=v*u+p,y.push(E+Math.cos(S)*f,x+Math.sin(S)*f),u+=a;return S=v+p,y.push(E+Math.cos(S)*f,x+Math.sin(S)*f),y.push(E+Math.cos(p)*f,x+Math.sin(p)*f),this.pathIndexes=h(y),this.pathData=y,this}});c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(1100),l=e(59),h=e(10),i=e(34),s=new o({Extends:i,Mixins:[g],initialize:function(d,a,u,f,p,v){a===void 0&&(a=0),u===void 0&&(u=0),i.call(this,d,"Curve",f),this._smoothness=32,this._curveBounds=new h,this.closePath=!1,this.setPosition(a,u),p!==void 0&&this.setFillStyle(p,v),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){var n=this._curveBounds,d=this._smoothness;this.geom.getBounds(n,d),this.setSize(n.width,n.height),this.updateDisplayOrigin();for(var a=[],u=this.geom.getPoints(d),f=0;f<u.length;f++)a.push(u[f].x,u[f].y);return a.push(u[0].x,u[0].y),this.pathIndexes=l(a),this.pathData=a,this}});c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(59),l=e(1103),h=e(111),i=e(34),s=new o({Extends:i,Mixins:[l],initialize:function(d,a,u,f,p,v,m){a===void 0&&(a=0),u===void 0&&(u=0),f===void 0&&(f=128),p===void 0&&(p=128),i.call(this,d,"Ellipse",new h(f/2,p/2,f,p)),this._smoothness=64,this.setPosition(a,u),this.width=f,this.height=p,v!==void 0&&this.setFillStyle(v,m),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSize:function(n,d){return this.width=n,this.height=d,this.geom.setPosition(n/2,d/2),this.geom.setSize(n,d),this.updateData()},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){for(var n=[],d=this.geom.getPoints(this._smoothness),a=0;a<d.length;a++)n.push(d[a].x,d[a].y);return n.push(d[0].x,d[0].y),this.pathIndexes=g(n),this.pathData=n,this}});c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(34),l=e(1106),h=new o({Extends:g,Mixins:[l],initialize:function(s,n,d,a,u,f,p,v,m,E,x){n===void 0&&(n=0),d===void 0&&(d=0),a===void 0&&(a=128),u===void 0&&(u=128),f===void 0&&(f=32),p===void 0&&(p=32),g.call(this,s,"Grid",null),this.cellWidth=f,this.cellHeight=p,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(n,d),this.setSize(a,u),this.setFillStyle(v,m),E!==void 0&&this.setOutlineStyle(E,x),this.updateDisplayOrigin()},setFillStyle:function(i,s){return s===void 0&&(s=1),i===void 0?this.showCells=!1:(this.fillColor=i,this.fillAlpha=s,this.showCells=!0),this},setAltFillStyle:function(i,s){return s===void 0&&(s=1),i===void 0?this.showAltCells=!1:(this.altFillColor=i,this.altFillAlpha=s,this.showAltCells=!0),this},setOutlineStyle:function(i,s){return s===void 0&&(s=1),i===void 0?this.showOutline=!1:(this.outlineFillColor=i,this.outlineFillAlpha=s,this.showOutline=!0),this}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1109),g=e(0),l=e(34),h=new g({Extends:l,Mixins:[o],initialize:function(s,n,d,a,u,f,p,v){n===void 0&&(n=0),d===void 0&&(d=0),a===void 0&&(a=48),u===void 0&&(u=32),f===void 0&&(f=15658734),p===void 0&&(p=10066329),v===void 0&&(v=13421772),l.call(this,s,"IsoBox",null),this.projection=4,this.fillTop=f,this.fillLeft=p,this.fillRight=v,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(n,d),this.setSize(a,u),this.updateDisplayOrigin()},setProjection:function(i){return this.projection=i,this},setFaces:function(i,s,n){return i===void 0&&(i=!0),s===void 0&&(s=!0),n===void 0&&(n=!0),this.showTop=i,this.showLeft=s,this.showRight=n,this},setFillStyle:function(i,s,n){return this.fillTop=i,this.fillLeft=s,this.fillRight=n,this.isFilled=!0,this}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(1112),l=e(34),h=new o({Extends:l,Mixins:[g],initialize:function(s,n,d,a,u,f,p,v,m){n===void 0&&(n=0),d===void 0&&(d=0),a===void 0&&(a=48),u===void 0&&(u=32),f===void 0&&(f=!1),p===void 0&&(p=15658734),v===void 0&&(v=10066329),m===void 0&&(m=13421772),l.call(this,s,"IsoTriangle",null),this.projection=4,this.fillTop=p,this.fillLeft=v,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=f,this.isFilled=!0,this.setPosition(n,d),this.setSize(a,u),this.updateDisplayOrigin()},setProjection:function(i){return this.projection=i,this},setReversed:function(i){return this.isReversed=i,this},setFaces:function(i,s,n){return i===void 0&&(i=!0),s===void 0&&(s=!0),n===void 0&&(n=!0),this.showTop=i,this.showLeft=s,this.showRight=n,this},setFillStyle:function(i,s,n){return this.fillTop=i,this.fillLeft=s,this.fillRight=n,this.isFilled=!0,this}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(34),l=e(47),h=e(1115),i=new o({Extends:g,Mixins:[h],initialize:function(n,d,a,u,f,p,v,m,E){d===void 0&&(d=0),a===void 0&&(a=0),u===void 0&&(u=0),f===void 0&&(f=0),p===void 0&&(p=128),v===void 0&&(v=0),g.call(this,n,"Line",new l(u,f,p,v));var x=Math.max(1,this.geom.right-this.geom.left),y=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(d,a),this.setSize(x,y),m!==void 0&&this.setStrokeStyle(1,m,E),this.updateDisplayOrigin()},setLineWidth:function(s,n){return n===void 0&&(n=s),this._startWidth=s,this._endWidth=n,this.lineWidth=s,this},setTo:function(s,n,d,a){return this.geom.setTo(s,n,d,a),this}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1118),g=e(0),l=e(59),h=e(469),i=e(227),s=e(34),n=e(472),d=new g({Extends:s,Mixins:[o],initialize:function(u,f,p,v,m,E){f===void 0&&(f=0),p===void 0&&(p=0),s.call(this,u,"Polygon",new i(v));var x=h(this.geom);this.setPosition(f,p),this.setSize(x.width,x.height),m!==void 0&&this.setFillStyle(m,E),this.updateDisplayOrigin(),this.updateData()},smooth:function(a){a===void 0&&(a=1);for(var u=0;u<a;u++)n(this.geom);return this.updateData()},updateData:function(){for(var a=[],u=this.geom.points,f=0;f<u.length;f++)a.push(u[f].x,u[f].y);return a.push(u[0].x,u[0].y),this.pathIndexes=l(a),this.pathData=a,this}});c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10),g=function(l,h){h===void 0&&(h=new o);for(var i=1/0,s=1/0,n=-i,d=-s,a,u=0;u<l.points.length;u++)a=l.points[u],i=Math.min(i,a.x),s=Math.min(s,a.y),n=Math.max(n,a.x),d=Math.max(d,a.y);return h.x=i,h.y=s,h.width=n-i,h.height=d-s,h};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(67),g=e(47),l=e(471),h=function(i,s,n,d){d===void 0&&(d=[]);var a=i.points,u=l(i);!s&&n>0&&(s=u/n);for(var f=0;f<s;f++)for(var p=u*(f/s),v=0,m=0;m<a.length;m++){var E=a[m],x=a[(m+1)%a.length],y=new g(E.x,E.y,x.x,x.y),S=o(y);if(p<v||p>v+S){v+=S;continue}var C=y.getPoint((p-v)/S);d.push(C);break}return d};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(67),g=e(47),l=function(h){for(var i=h.points,s=0,n=0;n<i.length;n++){var d=i[n],a=i[(n+1)%i.length],u=new g(d.x,d.y,a.x,a.y);s+=o(u)}return s};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(g,l){return g[0]=l[0],g[1]=l[1],g},o=function(g){var l,h=[],i=g.points;for(l=0;l<i.length;l++)h.push([i[l].x,i[l].y]);var s=[];for(h.length>0&&s.push(e([0,0],h[0])),l=0;l<h.length-1;l++){var n=h[l],d=h[l+1],a=n[0],u=n[1],f=d[0],p=d[1];s.push([.85*a+.15*f,.85*u+.15*p]),s.push([.15*a+.85*f,.15*u+.85*p])}return h.length>1&&s.push(e([0,0],h[h.length-1])),g.setTo(s)};c.exports=o},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(10),l=e(34),h=e(1121),i=new o({Extends:l,Mixins:[h],initialize:function(n,d,a,u,f,p,v){d===void 0&&(d=0),a===void 0&&(a=0),u===void 0&&(u=128),f===void 0&&(f=128),l.call(this,n,"Rectangle",new g(0,0,u,f)),this.setPosition(d,a),this.setSize(u,f),p!==void 0&&this.setFillStyle(p,v),this.updateDisplayOrigin(),this.updateData()},setSize:function(s,n){return this.width=s,this.height=n,this.geom.setSize(s,n),this.updateData(),this},updateData:function(){var s=[],n=this.geom,d=this._tempLine;return n.getLineA(d),s.push(d.x1,d.y1,d.x2,d.y2),n.getLineB(d),s.push(d.x2,d.y2),n.getLineC(d),s.push(d.x2,d.y2),n.getLineD(d),s.push(d.x2,d.y2),this.pathData=s,this}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1124),g=e(0),l=e(59),h=e(34),i=new g({Extends:h,Mixins:[o],initialize:function(n,d,a,u,f,p,v,m){d===void 0&&(d=0),a===void 0&&(a=0),u===void 0&&(u=5),f===void 0&&(f=32),p===void 0&&(p=64),h.call(this,n,"Star",null),this._points=u,this._innerRadius=f,this._outerRadius=p,this.setPosition(d,a),this.setSize(p*2,p*2),v!==void 0&&this.setFillStyle(v,m),this.updateDisplayOrigin(),this.updateData()},setPoints:function(s){return this._points=s,this.updateData()},setInnerRadius:function(s){return this._innerRadius=s,this.updateData()},setOuterRadius:function(s){return this._outerRadius=s,this.updateData()},points:{get:function(){return this._points},set:function(s){this._points=s,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(s){this._innerRadius=s,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(s){this._outerRadius=s,this.updateData()}},updateData:function(){var s=[],n=this._points,d=this._innerRadius,a=this._outerRadius,u=Math.PI/2*3,f=Math.PI/n,p=a,v=a;s.push(p,v+-a);for(var m=0;m<n;m++)s.push(p+Math.cos(u)*a,v+Math.sin(u)*a),u+=f,s.push(p+Math.cos(u)*d,v+Math.sin(u)*d),u+=f;return s.push(p,v+-a),this.pathIndexes=l(s),this.pathData=s,this}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(34),l=e(82),h=e(1127),i=new o({Extends:g,Mixins:[h],initialize:function(n,d,a,u,f,p,v,m,E,x,y){d===void 0&&(d=0),a===void 0&&(a=0),u===void 0&&(u=0),f===void 0&&(f=128),p===void 0&&(p=64),v===void 0&&(v=0),m===void 0&&(m=128),E===void 0&&(E=128),g.call(this,n,"Triangle",new l(u,f,p,v,m,E));var S=this.geom.right-this.geom.left,C=this.geom.bottom-this.geom.top;this.setPosition(d,a),this.setSize(S,C),x!==void 0&&this.setFillStyle(x,y),this.updateDisplayOrigin(),this.updateData()},setTo:function(s,n,d,a,u,f){return this.geom.setTo(s,n,d,a,u,f),this.updateData()},updateData:function(){var s=[],n=this.geom,d=this._tempLine;return n.getLineA(d),s.push(d.x1,d.y1,d.x2,d.y2),n.getLineB(d),s.push(d.x2,d.y2),n.getLineC(d),s.push(d.x2,d.y2),this.pathData=s,this}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=e(67),l=function(h,i,s){s===void 0&&(s=new o);var n=h.getLineA(),d=h.getLineB(),a=h.getLineC();if(i<=0||i>=1)return s.x=n.x1,s.y=n.y1,s;var u=g(n),f=g(d),p=g(a),v=u+f+p,m=v*i,E=0;return m<u?(E=m/u,s.x=n.x1+(n.x2-n.x1)*E,s.y=n.y1+(n.y2-n.y1)*E):m>u+f?(m-=u+f,E=m/p,s.x=a.x1+(a.x2-a.x1)*E,s.y=a.y1+(a.y2-a.y1)*E):(m-=u,E=m/f,s.x=d.x1+(d.x2-d.x1)*E,s.y=d.y1+(d.y2-d.y1)*E),s};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(67),g=e(4),l=function(h,i,s,n){n===void 0&&(n=[]);var d=h.getLineA(),a=h.getLineB(),u=h.getLineC(),f=o(d),p=o(a),v=o(u),m=f+p+v;!i&&s>0&&(i=m/s);for(var E=0;E<i;E++){var x=m*(E/i),y=0,S=new g;x<f?(y=x/f,S.x=d.x1+(d.x2-d.x1)*y,S.y=d.y1+(d.y2-d.y1)*y):x>f+p?(x-=f+p,y=x/v,S.x=u.x1+(u.x2-u.x1)*y,S.y=u.y1+(u.y2-u.y1)*y):(x-=f,y=x/p,S.x=a.x1+(a.x2-a.x1)*y,S.y=a.y1+(a.y2-a.y1)*y),n.push(S)}return n};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){if(!o||typeof o=="number")return!1;if(o.hasOwnProperty(g))return o[g]=l,!0;if(g.indexOf(".")!==-1){for(var h=g.split("."),i=o,s=o,n=0;n<h.length;n++)if(i.hasOwnProperty(h[n]))s=i,i=i[h[n]];else return!1;return s[h[h.length-1]]=l,!0}return!1};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(116),g=e(117),l=function(h,i,s,n,d,a,u){if(n===void 0&&(n=!1),a===void 0&&(a=16777215),u===void 0&&(u=1),h.length!==i.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var f={faces:[],vertices:[]},p,v,m,E,x,y,S,C,I,O,M,L=n?3:2,P=Array.isArray(a),b=Array.isArray(u);if(Array.isArray(s)&&s.length>0)for(p=0;p<s.length;p++){var B=s[p],U=s[p]*2,H=s[p]*L;v=h[H],m=h[H+1],E=n?h[H+2]:0,x=i[U],y=i[U+1],S=P?a[B]:a,C=b?u[B]:u,I=0,O=0,M=0,d&&(I=d[H],O=d[H+1],M=n?d[H+2]:0),f.vertices.push(new g(v,m,E,x,y,S,C,I,O,M))}else{var Y=0,j=0;for(p=0;p<h.length;p+=L)v=h[p],m=h[p+1],E=n?h[p+2]:0,x=i[Y],y=i[Y+1],S=P?a[j]:a,C=b?u[j]:u,I=0,O=0,M=0,d&&(I=d[p],O=d[p+1],M=n?d[p+2]:0),f.vertices.push(new g(v,m,E,x,y,S,C,I,O,M)),Y+=2,j++}for(p=0;p<f.vertices.length;p+=3){var _=f.vertices[p],w=f.vertices[p+1],D=f.vertices[p+2];f.faces.push(new o(_,w,D))}return f};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(116),g=e(69),l=e(39),h=e(117),i=new l,s=new l,n=new g,d=function(a,u,f,p,v,m,E,x,y,S){f===void 0&&(f=1),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),E===void 0&&(E=0),x===void 0&&(x=0),y===void 0&&(y=0),S===void 0&&(S=!0);var C={faces:[],verts:[]},I=a.materials;i.set(p,v,m),s.set(E,x,y),n.fromRotationXYTranslation(s,i,S);for(var O=0;O<a.models.length;O++)for(var M=a.models[O],L=M.vertices,P=M.textureCoords,b=M.faces,B=0;B<b.length;B++){var U=b[B],H=U.vertices[0],Y=U.vertices[1],j=U.vertices[2],_=L[H.vertexIndex],w=L[Y.vertexIndex],D=L[j.vertexIndex],N=H.textureCoordsIndex,G=Y.textureCoordsIndex,k=j.textureCoordsIndex,V=N===-1?{u:0,v:1}:P[N],X=G===-1?{u:0,v:0}:P[G],K=k===-1?{u:1,v:1}:P[k],tt=16777215;U.material!==""&&I[U.material]&&(tt=I[U.material]);var st=new h(_.x*f,_.y*f,_.z*f,V.u,V.v,tt).transformMat4(n),rt=new h(w.x*f,w.y*f,w.z*f,X.u,X.v,tt).transformMat4(n),ht=new h(D.x*f,D.y*f,D.z*f,K.u,K.v,tt).transformMat4(n);C.verts.push(st,rt,ht),C.faces.push(new o(st,rt,ht))}return u&&(u.faces=u.faces.concat(C.faces),u.vertices=u.vertices.concat(C.verts)),C};c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(65),g=e(0),l=e(11),h=e(200),i=e(12),s=new g({Extends:o,Mixins:[l.ScrollFactor,l.Visible],initialize:function(d,a,u,f,p,v,m){o.call(this,d,a,u),this.color=new h(f,p,v),this.intensity=m,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(n){return!(s.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&n.id)},setColor:function(n){var d=i.getFloatsFromUintRGB(n);return this.color.set(d[0],d[1],d[2]),this},setIntensity:function(n){return this.intensity=n,this},setRadius:function(n){return this.radius=n,this}});s.RENDER_MASK=15,c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(151),g=e(0),l=e(50),h=e(481),i=e(150),s=e(200),n=e(74),d=e(79),a=e(12),u=new g({initialize:function(){this.lights=[],this.ambientColor=new s(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(f,p,v,m,E,x){return this.systems.displayList.add(new i(this.scene,f,p,v,m,E,x))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(f){for(var p=this.lights,v=f.worldView,m=[],E=0;E<p.length;E++){var x=p[E];x.willRender(f)&&o(x,v)&&m.push({light:x,distance:l(x.x,x.y,v.centerX,v.centerY)})}return m.length>this.maxLights&&(d(m,this.sortByDistance),m=m.slice(0,this.maxLights)),this.visibleLights=m.length,m},sortByDistance:function(f,p){return f.distance>=p.distance},setAmbientColor:function(f){var p=a.getFloatsFromUintRGB(f);return this.ambientColor.set(p[0],p[1],p[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(f,p,v,m,E){f===void 0&&(f=0),p===void 0&&(p=0),v===void 0&&(v=128),m===void 0&&(m=16777215),E===void 0&&(E=1);var x=a.getFloatsFromUintRGB(m),y=new h(f,p,v,x[0],x[1],x[2],E);return this.lights.push(y),y},removeLight:function(f){var p=this.lights.indexOf(f);return p>=0&&n(this.lights,p),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});c.exports=u},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(56),g=e(17),l={Circle:e(1191),Ellipse:e(1201),Intersects:e(484),Line:e(1221),Mesh:e(1243),Point:e(1246),Polygon:e(1260),Rectangle:e(502),Triangle:e(1293)};l=g(!1,l,o),c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CircleToCircle:e(231),CircleToRectangle:e(151),GetCircleToCircle:e(1211),GetCircleToRectangle:e(1212),GetLineToCircle:e(232),GetLineToLine:e(485),GetLineToPoints:e(486),GetLineToPolygon:e(487),GetLineToRectangle:e(234),GetRaysFromPointToPolygon:e(1213),GetRectangleIntersection:e(1214),GetRectangleToRectangle:e(1215),GetRectangleToTriangle:e(1216),GetTriangleToCircle:e(1217),GetTriangleToLine:e(492),GetTriangleToTriangle:e(1218),LineToCircle:e(233),LineToLine:e(96),LineToRectangle:e(488),PointToLine:e(496),PointToLineSegment:e(1219),RectangleToRectangle:e(152),RectangleToTriangle:e(489),RectangleToValues:e(1220),TriangleToCircle:e(491),TriangleToLine:e(493),TriangleToTriangle:e(494)}},function(c,R,e){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(39),g=function(l,h,i){var s=l.x1,n=l.y1,d=l.x2,a=l.y2,u=h.x1,f=h.y1,p=h.x2,v=h.y2,m=d-s,E=a-n,x=p-u,y=v-f,S=y*m-x*E;if(m===0||S===0)return!1;var C=(m*(f-n)+E*(s-u))/(x*E-y*m),I=(u+x*C-s)/m;return I<0||C<0||C>1?null:(i===void 0&&(i=new o),i.set(s+m*I,n+E*I,I))};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(39),g=e(485),l=e(47),h=new l,i=new o,s=function(n,d,a){a===void 0&&(a=new o);var u=!1;a.set(),i.set();for(var f=d[0],p=1;p<d.length;p++){var v=d[p];h.setTo(f.x,f.y,v.x,v.y),f=v,g(n,h,i)&&(!u||i.z<a.z)&&(a.copy(i),u=!0)}return u?a:null};c.exports=s},function(c,R,e){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(39),g=e(140),l=e(486),h=new o,i=function(s,n,d){d===void 0&&(d=new g),Array.isArray(n)||(n=[n]);var a=!1;d.set(),h.set();for(var u=0;u<n.length;u++)l(s,n[u].points,h)&&(!a||h.z<d.z)&&(d.set(h.x,h.y,h.z,u),a=!0);return a?d:null};c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.x1,h=o.y1,i=o.x2,s=o.y2,n=g.x,d=g.y,a=g.right,u=g.bottom,f=0;if(l>=n&&l<=a&&h>=d&&h<=u||i>=n&&i<=a&&s>=d&&s<=u)return!0;if(l<n&&i>=n){if(f=h+(s-h)*(n-l)/(i-l),f>d&&f<=u)return!0}else if(l>a&&i<=a&&(f=h+(s-h)*(a-l)/(i-l),f>=d&&f<=u))return!0;if(h<d&&s>=d){if(f=l+(i-l)*(d-h)/(s-h),f>=n&&f<=a)return!0}else if(h>u&&s<=u&&(f=l+(i-l)*(u-h)/(s-h),f>=n&&f<=a))return!0;return!1};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(96),g=e(57),l=e(235),h=e(490),i=function(s,n){if(n.left>s.right||n.right<s.left||n.top>s.bottom||n.bottom<s.top)return!1;var d=n.getLineA(),a=n.getLineB(),u=n.getLineC();if(g(s,d.x1,d.y1)||g(s,d.x2,d.y2)||g(s,a.x1,a.y1)||g(s,a.x2,a.y2)||g(s,u.x1,u.y1)||g(s,u.x2,u.y2))return!0;var f=s.getLineA(),p=s.getLineB(),v=s.getLineC(),m=s.getLineD();if(o(d,f)||o(d,p)||o(d,v)||o(d,m)||o(a,f)||o(a,p)||o(a,v)||o(a,m)||o(u,f)||o(u,p)||o(u,v)||o(u,m))return!0;var E=h(s),x=l(n,E,!0);return x.length>0};c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g===void 0&&(g=[]),g.push({x:o.x,y:o.y}),g.push({x:o.right,y:o.y}),g.push({x:o.right,y:o.bottom}),g.push({x:o.x,y:o.bottom}),g};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(233),g=e(115),l=function(h,i){return h.left>i.right||h.right<i.left||h.top>i.bottom||h.bottom<i.top?!1:!!(g(h,i.x,i.y)||o(h.getLineA(),i)||o(h.getLineB(),i)||o(h.getLineC(),i))};c.exports=l},function(c,R,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=e(493),l=e(96),h=function(i,s,n){if(n===void 0&&(n=[]),g(i,s))for(var d=i.getLineA(),a=i.getLineB(),u=i.getLineC(),f=[new o,new o,new o],p=[l(d,s,f[0]),l(a,s,f[1]),l(u,s,f[2])],v=0;v<3;v++)p[v]&&n.push(f[v]);return n};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(96),g=function(l,h){return!!(l.contains(h.x1,h.y1)||l.contains(h.x2,h.y2)||o(l.getLineA(),h)||o(l.getLineB(),h)||o(l.getLineC(),h))};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(235),g=e(495),l=e(96),h=function(i,s){if(i.left>s.right||i.right<s.left||i.top>s.bottom||i.bottom<s.top)return!1;var n=i.getLineA(),d=i.getLineB(),a=i.getLineC(),u=s.getLineA(),f=s.getLineB(),p=s.getLineC();if(l(n,u)||l(n,f)||l(n,p)||l(d,u)||l(d,f)||l(d,p)||l(a,u)||l(a,f)||l(a,p))return!0;var v=g(i),m=o(s,v,!0);return m.length>0||(v=g(s),m=o(i,v,!0),m.length>0)};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g===void 0&&(g=[]),g.push({x:o.x1,y:o.y1}),g.push({x:o.x2,y:o.y2}),g.push({x:o.x3,y:o.y3}),g};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){l===void 0&&(l=1);var h=g.x1,i=g.y1,s=g.x2,n=g.y2,d=o.x,a=o.y,u=(s-h)*(s-h)+(n-i)*(n-i);if(u===0)return!1;var f=((d-h)*(s-h)+(a-i)*(n-i))/u;if(f<0)return Math.sqrt((h-d)*(h-d)+(i-a)*(i-a))<=l;if(f>=0&&f<=1){var p=((i-a)*(s-h)-(h-d)*(n-i))/u;return Math.abs(p)*Math.sqrt(u)<=l}else return Math.sqrt((s-d)*(s-d)+(n-a)*(n-a))<=l};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(14),g=e(68),l=e(97),h=function(i){var s=l(i)-o.TAU;return g(s,-Math.PI,Math.PI)};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=!0,o="untitled",g="",l="";function h(E){var x=E.indexOf("#");return x>-1?E.substring(0,x):E}function i(E){return E.models.length===0&&E.models.push({faces:[],name:o,textureCoords:[],vertexNormals:[],vertices:[]}),g="",E.models[E.models.length-1]}function s(E,x){var y=E.length>=2?E[1]:o;x.models.push({faces:[],name:y,textureCoords:[],vertexNormals:[],vertices:[]}),g=""}function n(E){E.length===2&&(g=E[1])}function d(E,x){var y=E.length,S=y>=2?parseFloat(E[1]):0,C=y>=3?parseFloat(E[2]):0,I=y>=4?parseFloat(E[3]):0;i(x).vertices.push({x:S,y:C,z:I})}function a(E,x){var y=E.length,S=y>=2?parseFloat(E[1]):0,C=y>=3?parseFloat(E[2]):0,I=y>=4?parseFloat(E[3]):0;isNaN(S)&&(S=0),isNaN(C)&&(C=0),isNaN(I)&&(I=0),e&&(C=1-C),i(x).textureCoords.push({u:S,v:C,w:I})}function u(E,x){var y=E.length,S=y>=2?parseFloat(E[1]):0,C=y>=3?parseFloat(E[2]):0,I=y>=4?parseFloat(E[3]):0;i(x).vertexNormals.push({x:S,y:C,z:I})}function f(E,x){var y=E.length-1;if(!(y<3)){for(var S={group:g,material:l,vertices:[]},C=0;C<y;C++){var I=E[C+1],O=I.split("/"),M=O.length;if(!(M<1||M>3)){var L=0,P=0,b=0;L=parseInt(O[0],10),M>1&&O[1]!==""&&(P=parseInt(O[1],10)),M>2&&(b=parseInt(O[2],10)),L!==0&&(L<0&&(L=i(x).vertices.length+1+L),P-=1,L-=1,b-=1,S.vertices.push({textureCoordsIndex:P,vertexIndex:L,vertexNormalIndex:b}))}}i(x).faces.push(S)}}function p(E,x){E.length>=2&&x.materialLibraries.push(E[1])}function v(E){E.length>=2&&(l=E[1])}var m=function(E,x){x===void 0&&(x=!0),e=x;var y={materials:{},materialLibraries:[],models:[]};g="",l="";for(var S=E.split(`
`),C=0;C<S.length;C++){var I=h(S[C]),O=I.replace(/\s\s+/g," ").trim().split(" ");switch(O[0].toLowerCase()){case"o":s(O,y);break;case"g":n(O);break;case"v":d(O,y);break;case"vt":a(O,y);break;case"vn":u(O,y);break;case"f":f(O,y);break;case"mtllib":p(O,y);break;case"usemtl":v(O);break}}return y};c.exports=m},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(103),g=function(l){for(var h={},i=l.split(`
`),s="",n=0;n<i.length;n++){var d=i[n].trim();if(!(d.indexOf("#")===0||d==="")){var a=d.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":{s=a[1];break}case"kd":{var u=Math.floor(a[1]*255),f=a.length>=2?Math.floor(a[2]*255):u,p=a.length>=3?Math.floor(a[3]*255):u;h[s]=o(u,f,p);break}}}}return h};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return Math.sqrt(o.x*o.x+o.y*o.y)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.x*o.x+o.y*o.y};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10);o.Area=e(1267),o.Ceil=e(1268),o.CeilAll=e(1269),o.CenterOn=e(190),o.Clone=e(1270),o.Contains=e(57),o.ContainsPoint=e(1271),o.ContainsRect=e(503),o.CopyFrom=e(1272),o.Decompose=e(490),o.Equals=e(1273),o.FitInside=e(1274),o.FitOutside=e(1275),o.Floor=e(1276),o.FloorAll=e(1277),o.FromPoints=e(199),o.FromXY=e(1278),o.GetAspectRatio=e(237),o.GetCenter=e(1279),o.GetPoint=e(171),o.GetPoints=e(306),o.GetSize=e(1280),o.Inflate=e(1281),o.Intersection=e(1282),o.MarchingAnts=e(316),o.MergePoints=e(1283),o.MergeRect=e(1284),o.MergeXY=e(1285),o.Offset=e(1286),o.OffsetPoint=e(1287),o.Overlaps=e(1288),o.Perimeter=e(130),o.PerimeterPoint=e(1289),o.Random=e(174),o.RandomOutside=e(1290),o.SameDimensions=e(1291),o.Scale=e(1292),o.Union=e(441),c.exports=o},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g.width*g.height>o.width*o.height?!1:g.x>o.x&&g.x<o.right&&g.right>o.x&&g.right<o.right&&g.y>o.y&&g.y<o.bottom&&g.bottom>o.y&&g.bottom<o.bottom};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h){return h===void 0&&(h=new o),h.x=(l.x1+l.x2+l.x3)/3,h.y=(l.y1+l.y2+l.y3)/3,h};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return o.x1+=g,o.y1+=l,o.x2+=g,o.y2+=l,o.x3+=g,o.y3+=l,o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4);function g(h,i,s,n){var d=h-s,a=i-n,u=d*d+a*a;return Math.sqrt(u)}var l=function(h,i){i===void 0&&(i=new o);var s=h.x1,n=h.y1,d=h.x2,a=h.y2,u=h.x3,f=h.y3,p=g(u,f,d,a),v=g(s,n,u,f),m=g(d,a,s,n),E=p+v+m;return i.x=(s*p+d*v+u*m)/E,i.y=(n*p+a*v+f*m)/E,i};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return function(l,h,i,s){var n=o.getPixelAlpha(h,i,s.texture.key,s.frame.name);return n&&n>=g}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return{gameObject:o,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:g,hitAreaCallback:l,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h,i){this.pad=h,this.events=h.events,this.index=i,this.value=0,this.threshold=.1},update:function(l){this.value=l},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(239),l=new o({initialize:function(i,s){this.pad=i,this.events=i.manager,this.index=s,this.value=0,this.threshold=1,this.pressed=!1},update:function(h){this.value=h;var i=this.pad,s=this.index;h>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(g.BUTTON_DOWN,i,this,h),this.pad.emit(g.GAMEPAD_BUTTON_DOWN,s,h,this)):this.pressed&&(this.pressed=!1,this.events.emit(g.BUTTON_UP,i,this,h),this.pad.emit(g.GAMEPAD_BUTTON_UP,s,h,this))},destroy:function(){this.pad=null,this.events=null}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(509),g=e(510),l=e(0),h=e(9),i=e(3),s=new l({Extends:h,initialize:function(d,a){h.call(this),this.manager=d,this.pad=a,this.id=a.id,this.index=a.index;for(var u=[],f=0;f<a.buttons.length;f++)u.push(new g(this,f));this.buttons=u;var p=[];for(f=0;f<a.axes.length;f++)p.push(new o(this,f));this.axes=p,this.vibration=a.vibrationActuator;var v={value:0,pressed:!1};this._LCLeft=u[14]?u[14]:v,this._LCRight=u[15]?u[15]:v,this._LCTop=u[12]?u[12]:v,this._LCBottom=u[13]?u[13]:v,this._RCLeft=u[2]?u[2]:v,this._RCRight=u[1]?u[1]:v,this._RCTop=u[3]?u[3]:v,this._RCBottom=u[0]?u[0]:v,this._FBLeftTop=u[4]?u[4]:v,this._FBLeftBottom=u[6]?u[6]:v,this._FBRightTop=u[5]?u[5]:v,this._FBRightBottom=u[7]?u[7]:v;var m={value:0};this._HAxisLeft=p[0]?p[0]:m,this._VAxisLeft=p[1]?p[1]:m,this._HAxisRight=p[2]?p[2]:m,this._VAxisRight=p[3]?p[3]:m,this.leftStick=new i,this.rightStick=new i,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(n){return this.axes[n].getValue()},setAxisThreshold:function(n){for(var d=0;d<this.axes.length;d++)this.axes[d].threshold=n},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(n){return this.buttons[n].value},isButtonDown:function(n){return this.buttons[n].pressed},update:function(n){if(!(n.timestamp<this._created)){var d,a=this.buttons,u=n.buttons,f=a.length;for(d=0;d<f;d++)a[d].update(u[d].value);var p=this.axes,v=n.axes;for(f=p.length,d=0;d<f;d++)p[d].update(v[d]);f>=2&&(this.leftStick.set(p[0].getValue(),p[1].getValue()),f>=4&&this.rightStick.set(p[2].getValue(),p[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var n;for(n=0;n<this.buttons.length;n++)this.buttons[n].destroy();for(n=0;n<this.axes.length;n++)this.axes[n].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(9),l=e(154),h=new o({Extends:g,initialize:function(s,n){g.call(this),this.plugin=s,this.keyCode=n,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(i){return this.emitOnRepeat=i,this},onDown:function(i){this.originalEvent=i,this.enabled&&(this.altKey=i.altKey,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.location=i.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(l.DOWN,this,i):(this.isDown=!0,this.isUp=!1,this.timeDown=i.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(l.DOWN,this,i)))},onUp:function(i){this.originalEvent=i,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=i.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(l.UP,this,i))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(154),l=e(2),h=e(514),i=e(516),s=new o({initialize:function(d,a,u){if(u===void 0&&(u={}),a.length<2)return!1;this.manager=d,this.enabled=!0,this.keyCodes=[];for(var f=0;f<a.length;f++){var p=a[f];typeof p=="string"?this.keyCodes.push(p.toUpperCase().charCodeAt(0)):typeof p=="number"?this.keyCodes.push(p):p.hasOwnProperty("keyCode")&&this.keyCodes.push(p.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=l(u,"resetOnWrongKey",!0),this.maxKeyDelay=l(u,"maxKeyDelay",0),this.resetOnMatch=l(u,"resetOnMatch",!1),this.deleteOnMatch=l(u,"deleteOnMatch",!1);var v=this,m=function(E){if(!(v.matched||!v.enabled)){var x=h(E,v);x&&(v.manager.emit(g.COMBO_MATCH,v,E),v.resetOnMatch?i(v):v.deleteOnMatch&&v.destroy())}};this.onKeyDown=m,this.manager.on(g.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(g.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(515),g=function(l,h){if(h.matched)return!0;var i=!1,s=!1;if(l.keyCode===h.current)if(h.index>0&&h.maxKeyDelay>0){var n=h.timeLastMatched+h.maxKeyDelay;l.timeStamp<=n&&(s=!0,i=o(l,h))}else s=!0,i=o(l,h);return!s&&h.resetOnWrongKey&&(h.index=0,h.current=h.keyCodes[0]),i&&(h.timeLastMatched=l.timeStamp,h.matched=!0,h.timeMatched=l.timeStamp),i};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g.timeLastMatched=o.timeStamp,g.index++,g.index===g.size?!0:(g.current=g.keyCodes[g.index],!1)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.current=o.keyCodes[0],o.index=0,o.timeLastMatched=0,o.matched=!1,o.timeMatched=0,o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(240),g=function(l,h){var i=o(h,l.xhrSettings),s=new XMLHttpRequest;if(s.open("GET",l.src,i.async,i.user,i.password),s.responseType=l.xhrSettings.responseType,s.timeout=i.timeout,i.headers)for(var n in i.headers)s.setRequestHeader(n,i.headers[n]);return i.header&&i.headerValue&&s.setRequestHeader(i.header,i.headerValue),i.requestedWith&&s.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&s.overrideMimeType(i.overrideMimeType),i.withCredentials&&(s.withCredentials=!0),s.onload=l.onLoad.bind(l,s),s.onerror=l.onError.bind(l,s),s.onprogress=l.onProgress.bind(l),s.send(),s};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(519),n=e(7),d=new o({Extends:l,initialize:function(u,f,p,v,m){if(n(f)){var E=f;f=i(E,"key"),v=i(E,"xhrSettings"),m=i(E,"context",m)}var x={type:"audio",cache:u.cacheManager.audio,extension:p.type,responseType:"arraybuffer",key:f,url:p.url,xhrSettings:v,config:{context:m}};l.call(this,u,x)},onProcess:function(){this.state=g.FILE_PROCESSING;var a=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(u){a.data=u,a.onProcessComplete()},function(u){console.error("Error decoding audio: "+a.key+" - ",u?u.message:null),a.onProcessError()}),this.config.context=null}});d.create=function(a,u,f,p,v){var m=a.systems.game,E=m.config.audio,x=m.device.audio;n(u)&&(f=i(u,"url",[]),p=i(u,"config",{}));var y=d.getAudioURL(m,f);return y?x.webAudio&&!E.disableWebAudio?new d(a,u,y,v,m.sound.context):new s(a,u,y,p):null},d.getAudioURL=function(a,u){Array.isArray(u)||(u=[u]);for(var f=0;f<u.length;f++){var p=i(u[f],"url",u[f]);if(p.indexOf("blob:")===0||p.indexOf("data:")===0)return{url:p,type:""};var v=p.match(/\.([a-zA-Z0-9]+)($|\?)/);if(v=i(u[f],"type",v?v[1]:"").toLowerCase(),a.device.audio[v])return{url:p,type:v}}return null},h.register("audio",function(a,u,f,p){var v=this.systems.game,m=v.config.audio,E=v.device.audio;if(m.noAudio||!E.webAudio&&!E.audioData)return this;var x;if(Array.isArray(a))for(var y=0;y<a.length;y++)x=d.create(this,a[y]),x&&this.addFile(x);else x=d.create(this,a,u,f,p),x&&this.addFile(x);return this}),c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(95),l=e(23),h=e(2),i=e(155),s=e(7),n=new o({Extends:l,initialize:function(a,u,f,p){if(s(u)){var v=u;u=h(v,"key"),p=h(v,"config",p)}var m={type:"audio",cache:a.cacheManager.audio,extension:f.type,key:u,url:f.url,config:p};l.call(this,a,m),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var d=0;d<this.data.length;d++){var a=this.data[d];a.oncanplaythrough=null,a.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(d){var a=d.target;a.oncanplaythrough=null,a.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(g.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var d=this.config&&this.config.instances||1;this.filesTotal=d,this.filesLoaded=0,this.percentComplete=0;for(var a=0;a<d;a++){var u=new Audio;u.dataset||(u.dataset={}),u.dataset.name=this.key+("0"+a).slice(-2),u.dataset.used="false",this.locked?u.dataset.locked="true":(u.dataset.locked="false",u.preload="auto",u.oncanplaythrough=this.onProgress.bind(this),u.onerror=this.onError.bind(this)),this.data.push(u)}for(a=0;a<this.data.length;a++)u=this.data[a],u.src=i(this,this.loader.baseURL),this.locked||u.load();this.locked&&setTimeout(this.onLoad.bind(this))}});c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=new o({Extends:l,initialize:function(a,u,f,p){var v="js";if(s(u)){var m=u;u=i(m,"key"),f=i(m,"url"),p=i(m,"xhrSettings"),v=i(m,"extension",v)}var E={type:"script",cache:!1,extension:v,responseType:"text",key:u,url:f,xhrSettings:p};l.call(this,a,E)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("script",function(d,a,u){if(Array.isArray(d))for(var f=0;f<d.length;f++)this.addFile(new n(this,d[f]));else this.addFile(new n(this,d,a,u));return this}),c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(522),g=e(157),l=e(0),h=e(62),i=e(524),s=e(525),n=new l({initialize:function(a){this.world=a,this.scene=a.scene,this.sys=a.scene.sys},collider:function(d,a,u,f,p){return this.world.addCollider(d,a,u,f,p)},overlap:function(d,a,u,f,p){return this.world.addOverlap(d,a,u,f,p)},existing:function(d,a){var u=a?h.STATIC_BODY:h.DYNAMIC_BODY;return this.world.enableBody(d,u),d},staticImage:function(d,a,u,f){var p=new o(this.scene,d,a,u,f);return this.sys.displayList.add(p),this.world.enableBody(p,h.STATIC_BODY),p},image:function(d,a,u,f){var p=new o(this.scene,d,a,u,f);return this.sys.displayList.add(p),this.world.enableBody(p,h.DYNAMIC_BODY),p},staticSprite:function(d,a,u,f){var p=new g(this.scene,d,a,u,f);return this.sys.displayList.add(p),this.sys.updateList.add(p),this.world.enableBody(p,h.STATIC_BODY),p},sprite:function(d,a,u,f){var p=new g(this.scene,d,a,u,f);return this.sys.displayList.add(p),this.sys.updateList.add(p),this.world.enableBody(p,h.DYNAMIC_BODY),p},staticGroup:function(d,a){return this.sys.updateList.add(new s(this.world,this.world.scene,d,a))},group:function(d,a){return this.sys.updateList.add(new i(this.world,this.world.scene,d,a))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(243),l=e(125),h=new o({Extends:l,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(s,n,d,a,u){l.call(this,s,n,d,a,u),this.body=null}});c.exports=h},function(c,R,e){var o=e(244),g=e(65),l=e(231),h=e(151),i=function(s,n,d,a,u,f){var p=o(s,n-a,d-a,2*a,2*a,u,f);if(p.length===0)return p;for(var v=new g(n,d,a),m=new g,E=[],x=0;x<p.length;x++){var y=p[x];y.isCircle?(m.setTo(y.center.x,y.center.y,y.halfWidth),l(v,m)&&E.push(y)):h(v,y)&&E.push(y)}return E};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(157),g=e(0),l=e(62),h=e(2),i=e(113),s=e(7),n=new g({Extends:i,initialize:function(a,u,f,p){if(!f&&!p)p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(s(f))p=f,f=null,p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(f)&&s(f[0])){p=f[0];var v=this;f.forEach(function(m){m.internalCreateCallback=v.createCallbackHandler,m.internalRemoveCallback=v.removeCallbackHandler}),f=null}else p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=a,p.classType=h(p,"classType",o),this.physicsType=l.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:h(p,"collideWorldBounds",!1),setBoundsRectangle:h(p,"customBoundsRectangle",null),setAccelerationX:h(p,"accelerationX",0),setAccelerationY:h(p,"accelerationY",0),setAllowDrag:h(p,"allowDrag",!0),setAllowGravity:h(p,"allowGravity",!0),setAllowRotation:h(p,"allowRotation",!0),setBounceX:h(p,"bounceX",0),setBounceY:h(p,"bounceY",0),setDragX:h(p,"dragX",0),setDragY:h(p,"dragY",0),setEnable:h(p,"enable",!0),setGravityX:h(p,"gravityX",0),setGravityY:h(p,"gravityY",0),setFrictionX:h(p,"frictionX",0),setFrictionY:h(p,"frictionY",0),setMaxVelocityX:h(p,"maxVelocityX",1e4),setMaxVelocityY:h(p,"maxVelocityY",1e4),setVelocityX:h(p,"velocityX",0),setVelocityY:h(p,"velocityY",0),setAngularVelocity:h(p,"angularVelocity",0),setAngularAcceleration:h(p,"angularAcceleration",0),setAngularDrag:h(p,"angularDrag",0),setMass:h(p,"mass",1),setImmovable:h(p,"immovable",!1)},i.call(this,u,f,p),this.type="PhysicsGroup"},createCallbackHandler:function(d){d.body||this.world.enableBody(d,l.DYNAMIC_BODY);var a=d.body;for(var u in this.defaults)a[u](this.defaults[u])},removeCallbackHandler:function(d){d.body&&this.world.disableBody(d)},setVelocity:function(d,a,u){u===void 0&&(u=0);for(var f=this.getChildren(),p=0;p<f.length;p++)f[p].body.velocity.set(d+p*u,a+p*u);return this},setVelocityX:function(d,a){a===void 0&&(a=0);for(var u=this.getChildren(),f=0;f<u.length;f++)u[f].body.velocity.x=d+f*a;return this},setVelocityY:function(d,a){a===void 0&&(a=0);for(var u=this.getChildren(),f=0;f<u.length;f++)u[f].body.velocity.y=d+f*a;return this}});c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(157),g=e(0),l=e(62),h=e(2),i=e(113),s=e(7),n=new g({Extends:i,initialize:function(a,u,f,p){!f&&!p?p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:o}:s(f)?(p=f,f=null,p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler,p.createMultipleCallback=this.createMultipleCallbackHandler,p.classType=h(p,"classType",o)):Array.isArray(f)&&s(f[0])?(p=f,f=null,p.forEach(function(v){v.internalCreateCallback=this.createCallbackHandler,v.internalRemoveCallback=this.removeCallbackHandler,v.createMultipleCallback=this.createMultipleCallbackHandler,v.classType=h(v,"classType",o)})):p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=a,this.physicsType=l.STATIC_BODY,i.call(this,u,f,p),this.type="StaticPhysicsGroup"},createCallbackHandler:function(d){d.body||this.world.enableBody(d,l.STATIC_BODY)},removeCallbackHandler:function(d){d.body&&this.world.disableBody(d)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var d=this.children.entries,a=0;a<d.length;a++)d[a].body.reset();return this}});c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(350),g=e(527),l=e(18),h=e(0),i=e(528),s=e(62),n=e(50),d=e(9),a=e(245),u=e(124),f=e(354),p=e(355),v=e(246),m=e(247),E=e(529),x=e(6),y=e(14),S=e(211),C=e(530),I=e(10),O=e(531),M=e(532),L=e(537),P=e(538),b=e(149),B=e(539),U=e(248),H=e(25),Y=e(3),j=e(68),_=new h({Extends:d,initialize:function(D,N){d.call(this),this.scene=D,this.bodies=new b,this.staticBodies=new b,this.pendingDestroy=new b,this.colliders=new S,this.gravity=new Y(x(N,"gravity.x",0),x(N,"gravity.y",0)),this.bounds=new I(x(N,"x",0),x(N,"y",0),x(N,"width",D.sys.scale.width),x(N,"height",D.sys.scale.height)),this.checkCollision={up:x(N,"checkCollision.up",!0),down:x(N,"checkCollision.down",!0),left:x(N,"checkCollision.left",!0),right:x(N,"checkCollision.right",!0)},this.fps=x(N,"fps",60),this.fixedStep=x(N,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=x(N,"timeScale",1),this.OVERLAP_BIAS=x(N,"overlapBias",4),this.TILE_BIAS=x(N,"tileBias",16),this.forceX=x(N,"forceX",!1),this.isPaused=x(N,"isPaused",!1),this._total=0,this.drawDebug=x(N,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:x(N,"debugShowBody",!0),debugShowStaticBody:x(N,"debugShowStaticBody",!0),debugShowVelocity:x(N,"debugShowVelocity",!0),bodyDebugColor:x(N,"debugBodyColor",16711935),staticBodyDebugColor:x(N,"debugStaticBodyColor",255),velocityDebugColor:x(N,"debugVelocityColor",65280)},this.maxEntries=x(N,"maxEntries",16),this.useTree=x(N,"useTree",!0),this.tree=new O(this.maxEntries),this.staticTree=new O(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new H,this._tempMatrix2=new H,this.drawDebug&&this.createDebugGraphic()},enable:function(w,D){D===void 0&&(D=s.DYNAMIC_BODY),Array.isArray(w)||(w=[w]);for(var N=0;N<w.length;N++){var G=w[N];if(G.isParent)for(var k=G.getChildren(),V=0;V<k.length;V++){var X=k[V];X.isParent?this.enable(X,D):this.enableBody(X,D)}else this.enableBody(G,D)}},enableBody:function(w,D){return D===void 0&&(D=s.DYNAMIC_BODY),w.body||(D===s.DYNAMIC_BODY?w.body=new g(this,w):D===s.STATIC_BODY&&(w.body=new B(this,w))),this.add(w.body),w},add:function(w){return w.physicsType===s.DYNAMIC_BODY?this.bodies.set(w):w.physicsType===s.STATIC_BODY&&(this.staticBodies.set(w),this.staticTree.insert(w)),w.enable=!0,w},disable:function(w){Array.isArray(w)||(w=[w]);for(var D=0;D<w.length;D++){var N=w[D];if(N.isParent)for(var G=N.getChildren(),k=0;k<G.length;k++){var V=G[k];V.isParent?this.disable(V):this.disableBody(V.body)}else this.disableBody(N.body)}},disableBody:function(w){this.remove(w),w.enable=!1},remove:function(w){w.physicsType===s.DYNAMIC_BODY?(this.tree.remove(w),this.bodies.delete(w)):w.physicsType===s.STATIC_BODY&&(this.staticBodies.delete(w),this.staticTree.remove(w))},createDebugGraphic:function(){var w=this.scene.sys.add.graphics({x:0,y:0});return w.setDepth(Number.MAX_VALUE),this.debugGraphic=w,this.drawDebug=!0,w},setBounds:function(w,D,N,G,k,V,X,K){return this.bounds.setTo(w,D,N,G),k!==void 0&&this.setBoundsCollision(k,V,X,K),this},setBoundsCollision:function(w,D,N,G){return w===void 0&&(w=!0),D===void 0&&(D=!0),N===void 0&&(N=!0),G===void 0&&(G=!0),this.checkCollision.left=w,this.checkCollision.right=D,this.checkCollision.up=N,this.checkCollision.down=G,this},pause:function(){return this.isPaused=!0,this.emit(a.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(a.RESUME),this},addCollider:function(w,D,N,G,k){N===void 0&&(N=null),G===void 0&&(G=null),k===void 0&&(k=N);var V=new i(this,!1,w,D,N,G,k);return this.colliders.add(V),V},addOverlap:function(w,D,N,G,k){N===void 0&&(N=null),G===void 0&&(G=null),k===void 0&&(k=N);var V=new i(this,!0,w,D,N,G,k);return this.colliders.add(V),V},removeCollider:function(w){return this.colliders.remove(w),this},setFPS:function(w){return this.fps=w,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(w,D){if(!(this.isPaused||this.bodies.size===0)){var N,G=this._frameTime,k=this._frameTimeMS*this.timeScale;this._elapsed+=D;var V,X=this.bodies.entries,K=this._elapsed>=k;for(this.fixedStep||(G=D*.001,K=!0,this._elapsed=0),N=0;N<X.length;N++)V=X[N],V.enable&&V.preUpdate(K,G);if(K){this._elapsed-=k,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(X));var tt=this.colliders.update();for(N=0;N<tt.length;N++){var st=tt[N];st.active&&st.update()}this.emit(a.WORLD_STEP,G)}for(;this._elapsed>=k;)this._elapsed-=k,this.step(G)}},step:function(w){var D,N,G=this.bodies.entries,k=G.length;for(D=0;D<k;D++)N=G[D],N.enable&&N.update(w);this.useTree&&(this.tree.clear(),this.tree.load(G));var V=this.colliders.update();for(D=0;D<V.length;D++){var X=V[D];X.active&&X.update()}this.emit(a.WORLD_STEP,w),this.stepsLastFrame++},postUpdate:function(){var w,D,N=this.bodies.entries,G=N.length,k=this.bodies,V=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,w=0;w<G;w++)D=N[w],D.enable&&D.postUpdate();if(this.drawDebug){var X=this.debugGraphic;for(X.clear(),w=0;w<G;w++)D=N[w],D.willDrawDebug()&&D.drawDebug(X);for(N=V.entries,G=N.length,w=0;w<G;w++)D=N[w],D.willDrawDebug()&&D.drawDebug(X)}var K=this.pendingDestroy;if(K.size>0){var tt=this.tree,st=this.staticTree;for(N=K.entries,G=N.length,w=0;w<G;w++)D=N[w],D.physicsType===s.DYNAMIC_BODY?(tt.remove(D),k.delete(D)):D.physicsType===s.STATIC_BODY&&(st.remove(D),V.delete(D)),D.world=void 0,D.gameObject=void 0;K.clear()}},updateMotion:function(w,D){w.allowRotation&&this.computeAngularVelocity(w,D),this.computeVelocity(w,D)},computeAngularVelocity:function(w,D){var N=w.angularVelocity,G=w.angularAcceleration,k=w.angularDrag,V=w.maxAngular;G?N+=G*D:w.allowDrag&&k&&(k*=D,f(N-k,0,.1)?N-=k:p(N+k,0,.1)?N+=k:N=0),N=l(N,-V,V);var X=N-w.angularVelocity;w.angularVelocity+=X,w.rotation+=w.angularVelocity*D},computeVelocity:function(w,D){var N=w.velocity.x,G=w.acceleration.x,k=w.drag.x,V=w.maxVelocity.x,X=w.velocity.y,K=w.acceleration.y,tt=w.drag.y,st=w.maxVelocity.y,rt=w.speed,ht=w.maxSpeed,ut=w.allowDrag,mt=w.useDamping;w.allowGravity&&(N+=(this.gravity.x+w.gravity.x)*D,X+=(this.gravity.y+w.gravity.y)*D),G?N+=G*D:ut&&k&&(mt?(k=Math.pow(k,D),N*=k,rt=Math.sqrt(N*N+X*X),u(rt,0,.001)&&(N=0)):(k*=D,f(N-k,0,.01)?N-=k:p(N+k,0,.01)?N+=k:N=0)),K?X+=K*D:ut&&tt&&(mt?(tt=Math.pow(tt,D),X*=tt,rt=Math.sqrt(N*N+X*X),u(rt,0,.001)&&(X=0)):(tt*=D,f(X-tt,0,.01)?X-=tt:p(X+tt,0,.01)?X+=tt:X=0)),N=l(N,-V,V),X=l(X,-st,st),w.velocity.set(N,X),ht>-1&&rt>ht&&(w.velocity.normalize().scale(ht),rt=ht),w.speed=rt},separate:function(w,D,N,G,k,V){if(!V&&!w.enable||!D.enable||w.checkCollision.none||D.checkCollision.none||!this.intersects(w,D)||N&&N.call(G,w.gameObject,D.gameObject)===!1)return!1;if(w.isCircle&&D.isCircle)return this.separateCircle(w,D,k);if(w.isCircle!==D.isCircle){var X=w.isCircle?D:w,K=w.isCircle?w:D,tt={x:X.x,y:X.y,right:X.right,bottom:X.bottom},st=K.center;if((st.y<tt.y||st.y>tt.bottom)&&(st.x<tt.x||st.x>tt.right))return this.separateCircle(w,D,k)}var rt=!1,ht=!1;k?(rt=L(w,D,k,this.OVERLAP_BIAS),ht=P(w,D,k,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+w.gravity.y)<Math.abs(this.gravity.x+w.gravity.x)?(rt=L(w,D,k,this.OVERLAP_BIAS),this.intersects(w,D)&&(ht=P(w,D,k,this.OVERLAP_BIAS))):(ht=P(w,D,k,this.OVERLAP_BIAS),this.intersects(w,D)&&(rt=L(w,D,k,this.OVERLAP_BIAS)));var ut=rt||ht;return ut&&(k?(w.onOverlap||D.onOverlap)&&this.emit(a.OVERLAP,w.gameObject,D.gameObject,w,D):(w.onCollide||D.onCollide)&&this.emit(a.COLLIDE,w.gameObject,D.gameObject,w,D)),ut},separateCircle:function(w,D,N,G){v(w,D,!1,G),m(w,D,!1,G);var k=0;if(w.isCircle!==D.isCircle){var V={x:D.isCircle?w.position.x:D.position.x,y:D.isCircle?w.position.y:D.position.y,right:D.isCircle?w.right:D.right,bottom:D.isCircle?w.bottom:D.bottom},X={x:w.isCircle?w.center.x:D.center.x,y:w.isCircle?w.center.y:D.center.y,radius:w.isCircle?w.halfWidth:D.halfWidth};X.y<V.y?X.x<V.x?k=n(X.x,X.y,V.x,V.y)-X.radius:X.x>V.right&&(k=n(X.x,X.y,V.right,V.y)-X.radius):X.y>V.bottom&&(X.x<V.x?k=n(X.x,X.y,V.x,V.bottom)-X.radius:X.x>V.right&&(k=n(X.x,X.y,V.right,V.bottom)-X.radius)),k*=-1}else k=w.halfWidth+D.halfWidth-n(w.center.x,w.center.y,D.center.x,D.center.y);if(w.overlapR=k,D.overlapR=k,N||k===0||w.immovable&&D.immovable||w.customSeparateX||D.customSeparateX)return k!==0&&(w.onOverlap||D.onOverlap)&&this.emit(a.OVERLAP,w.gameObject,D.gameObject,w,D),k!==0;var K=w.center.x-D.center.x,tt=w.center.y-D.center.y,st=Math.sqrt(Math.pow(K,2)+Math.pow(tt,2)),rt=(D.center.x-w.center.x)/st||0,ht=(D.center.y-w.center.y)/st||0,ut=2*(w.velocity.x*rt+w.velocity.y*ht-D.velocity.x*rt-D.velocity.y*ht)/(w.mass+D.mass);(w.immovable||D.immovable)&&(ut*=2),w.immovable||(w.velocity.x=w.velocity.x-ut/w.mass*rt,w.velocity.y=w.velocity.y-ut/w.mass*ht),D.immovable||(D.velocity.x=D.velocity.x+ut/D.mass*rt,D.velocity.y=D.velocity.y+ut/D.mass*ht),!w.immovable&&!D.immovable&&(k/=2);var mt=o(w.center,D.center),pt=(k+y.EPSILON)*Math.cos(mt),Tt=(k+y.EPSILON)*Math.sin(mt);return w.immovable||(w.x-=pt,w.y-=Tt,w.updateCenter()),D.immovable||(D.x+=pt,D.y+=Tt,D.updateCenter()),w.velocity.x*=w.bounce.x,w.velocity.y*=w.bounce.y,D.velocity.x*=D.bounce.x,D.velocity.y*=D.bounce.y,(w.onCollide||D.onCollide)&&this.emit(a.COLLIDE,w.gameObject,D.gameObject,w,D),!0},intersects:function(w,D){return w===D?!1:!w.isCircle&&!D.isCircle?!(w.right<=D.position.x||w.bottom<=D.position.y||w.position.x>=D.right||w.position.y>=D.bottom):w.isCircle?D.isCircle?n(w.center.x,w.center.y,D.center.x,D.center.y)<=w.halfWidth+D.halfWidth:this.circleBodyIntersects(w,D):this.circleBodyIntersects(D,w)},circleBodyIntersects:function(w,D){var N=l(w.center.x,D.left,D.right),G=l(w.center.y,D.top,D.bottom),k=(w.center.x-N)*(w.center.x-N),V=(w.center.y-G)*(w.center.y-G);return k+V<=w.halfWidth*w.halfWidth},overlap:function(w,D,N,G,k){return N===void 0&&(N=null),G===void 0&&(G=null),k===void 0&&(k=N),this.collideObjects(w,D,N,G,k,!0)},collide:function(w,D,N,G,k){return N===void 0&&(N=null),G===void 0&&(G=null),k===void 0&&(k=N),this.collideObjects(w,D,N,G,k,!1)},collideObjects:function(w,D,N,G,k,V){var X,K;w.isParent&&w.physicsType===void 0&&(w=w.children.entries),D&&D.isParent&&D.physicsType===void 0&&(D=D.children.entries);var tt=Array.isArray(w),st=Array.isArray(D);if(this._total=0,!tt&&!st)this.collideHandler(w,D,N,G,k,V);else if(!tt&&st)for(X=0;X<D.length;X++)this.collideHandler(w,D[X],N,G,k,V);else if(tt&&!st)if(D)for(X=0;X<w.length;X++)this.collideHandler(w[X],D,N,G,k,V);else for(X=0;X<w.length;X++){var rt=w[X];for(K=X+1;K<w.length;K++)X!==K&&this.collideHandler(rt,w[K],N,G,k,V)}else for(X=0;X<w.length;X++)for(K=0;K<D.length;K++)this.collideHandler(w[X],D[K],N,G,k,V);return this._total>0},collideHandler:function(w,D,N,G,k,V){if(D===void 0&&w.isParent)return this.collideGroupVsGroup(w,w,N,G,k,V);if(!w||!D)return!1;if(w.body){if(D.body)return this.collideSpriteVsSprite(w,D,N,G,k,V);if(D.isParent)return this.collideSpriteVsGroup(w,D,N,G,k,V);if(D.isTilemap)return this.collideSpriteVsTilemapLayer(w,D,N,G,k,V)}else if(w.isParent){if(D.body)return this.collideSpriteVsGroup(D,w,N,G,k,V);if(D.isParent)return this.collideGroupVsGroup(w,D,N,G,k,V);if(D.isTilemap)return this.collideGroupVsTilemapLayer(w,D,N,G,k,V)}else if(w.isTilemap){if(D.body)return this.collideSpriteVsTilemapLayer(D,w,N,G,k,V);if(D.isParent)return this.collideGroupVsTilemapLayer(D,w,N,G,k,V)}},collideSpriteVsSprite:function(w,D,N,G,k,V){return!w.body||!D.body?!1:(this.separate(w.body,D.body,G,k,V)&&(N&&N.call(k,w,D),this._total++),!0)},collideSpriteVsGroup:function(w,D,N,G,k,V){var X=w.body;if(!(D.length===0||!X||!X.enable||X.checkCollision.none)){var K,tt,st;if(this.useTree||D.physicsType===s.STATIC_BODY){var rt=this.treeMinMax;rt.minX=X.left,rt.minY=X.top,rt.maxX=X.right,rt.maxY=X.bottom;var ht=D.physicsType===s.DYNAMIC_BODY?this.tree.search(rt):this.staticTree.search(rt);for(tt=ht.length,K=0;K<tt;K++)st=ht[K],!(X===st||!st.enable||st.checkCollision.none||!D.contains(st.gameObject))&&this.separate(X,st,G,k,V,!0)&&(N&&N.call(k,X.gameObject,st.gameObject),this._total++)}else{var ut=D.getChildren(),mt=D.children.entries.indexOf(w);for(tt=ut.length,K=0;K<tt;K++)st=ut[K].body,!(!st||K===mt||!st.enable)&&this.separate(X,st,G,k,V)&&(N&&N.call(k,X.gameObject,st.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(w,D,N,G,k,V){var X=w.getChildren();if(X.length===0)return!1;for(var K=!1,tt=0;tt<X.length;tt++)X[tt].body&&this.collideSpriteVsTilemapLayer(X[tt],D,N,G,k,V)&&(K=!0);return K},collideTiles:function(w,D,N,G,k){return!w.body.enable||D.length===0?!1:this.collideSpriteVsTilesHandler(w,D,N,G,k,!1,!1)},overlapTiles:function(w,D,N,G,k){return!w.body.enable||D.length===0?!1:this.collideSpriteVsTilesHandler(w,D,N,G,k,!0,!1)},collideSpriteVsTilemapLayer:function(w,D,N,G,k,V){var X=w.body;if(!X.enable||X.checkCollision.none)return!1;var K=X.position.x,tt=X.position.y,st=X.width,rt=X.height,ht=D.layer;if(ht.tileWidth>ht.baseTileWidth){var ut=(ht.tileWidth-ht.baseTileWidth)*D.scaleX;K-=ut,st+=ut}if(ht.tileHeight>ht.baseTileHeight){var mt=(ht.tileHeight-ht.baseTileHeight)*D.scaleY;rt+=mt}var pt=E(K,tt,st,rt,null,D.scene.cameras.main,D.layer);return pt.length===0?!1:this.collideSpriteVsTilesHandler(w,pt,N,G,k,V,!0)},collideSpriteVsTilesHandler:function(w,D,N,G,k,V,X){for(var K=w.body,tt,st={left:0,right:0,top:0,bottom:0},rt,ht=!1,ut=0;ut<D.length;ut++){tt=D[ut],rt=tt.tilemapLayer;var mt=rt.tileToWorldXY(tt.x,tt.y);st.left=mt.x,st.top=mt.y,tt.baseHeight!==tt.height&&(st.top-=(tt.height-tt.baseHeight)*rt.scaleY),st.right=st.left+tt.width*rt.scaleX,st.bottom=st.top+tt.height*rt.scaleY,U(st,K)&&(!G||G.call(k,w,tt))&&C(tt,w)&&(V||M(ut,K,tt,st,rt,this.TILE_BIAS,X))&&(this._total++,ht=!0,N&&N.call(k,w,tt),V&&K.onOverlap?this.emit(a.TILE_OVERLAP,w,tt,K):K.onCollide&&this.emit(a.TILE_COLLIDE,w,tt,K))}return ht},collideGroupVsGroup:function(w,D,N,G,k,V){if(!(w.length===0||D.length===0))for(var X=w.getChildren(),K=0;K<X.length;K++)this.collideSpriteVsGroup(X[K],D,N,G,k,V)},wrap:function(w,D){w.body?this.wrapObject(w,D):w.getChildren?this.wrapArray(w.getChildren(),D):Array.isArray(w)?this.wrapArray(w,D):this.wrapObject(w,D)},wrapArray:function(w,D){for(var N=0;N<w.length;N++)this.wrapObject(w[N],D)},wrapObject:function(w,D){D===void 0&&(D=0),w.x=j(w.x,this.bounds.left-D,this.bounds.right+D),w.y=j(w.y,this.bounds.top-D,this.bounds.bottom+D)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});c.exports=_},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(62),l=e(245),h=e(196),i=e(10),s=e(57),n=e(3),d=new o({initialize:function(u,f){var p=f.displayWidth?f.displayWidth:64,v=f.displayHeight?f.displayHeight:64;this.world=u,this.gameObject=f,this.transform={x:f.x,y:f.y,rotation:f.angle,scaleX:f.scaleX,scaleY:f.scaleY,displayOriginX:f.displayOriginX,displayOriginY:f.displayOriginY},this.debugShowBody=u.defaults.debugShowBody,this.debugShowVelocity=u.defaults.debugShowVelocity,this.debugBodyColor=u.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new n,this.position=new n(f.x-f.scaleX*f.displayOriginX,f.y-f.scaleY*f.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=f.angle,this.preRotation=f.angle,this.width=p,this.height=v,this.sourceWidth=p,this.sourceHeight=v,f.frame&&(this.sourceWidth=f.frame.realWidth,this.sourceHeight=f.frame.realHeight),this.halfWidth=Math.abs(p/2),this.halfHeight=Math.abs(v/2),this.center=new n(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new n,this.newVelocity=new n,this.deltaMax=new n,this.acceleration=new n,this.allowDrag=!0,this.drag=new n,this.allowGravity=!0,this.gravity=new n,this.bounce=new n,this.worldBounce=null,this.customBoundsRectangle=u.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new n(1e4,1e4),this.maxSpeed=-1,this.friction=new n(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=g.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=g.DYNAMIC_BODY,this._sx=f.scaleX,this._sy=f.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new i},updateBounds:function(){var a=this.gameObject,u=this.transform;if(a.parentContainer){var f=a.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);u.x=f.tx,u.y=f.ty,u.rotation=h(f.rotation),u.scaleX=f.scaleX,u.scaleY=f.scaleY,u.displayOriginX=a.displayOriginX,u.displayOriginY=a.displayOriginY}else u.x=a.x,u.y=a.y,u.rotation=a.angle,u.scaleX=a.scaleX,u.scaleY=a.scaleY,u.displayOriginX=a.displayOriginX,u.displayOriginY=a.displayOriginY;var p=!1;if(this.syncBounds){var v=a.getBounds(this._bounds);this.width=v.width,this.height=v.height,p=!0}else{var m=Math.abs(u.scaleX),E=Math.abs(u.scaleY);(this._sx!==m||this._sy!==E)&&(this.width=this.sourceWidth*m,this.height=this.sourceHeight*E,this._sx=m,this._sy=E,p=!0)}p&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var a=this.transform;this.position.x=a.x+a.scaleX*(this.offset.x-a.displayOriginX),this.position.y=a.y+a.scaleY*(this.offset.y-a.displayOriginY),this.updateCenter()},resetFlags:function(a){a===void 0&&(a=!1);var u=this.wasTouching,f=this.touching,p=this.blocked;a?(u.none=!0,u.up=!1,u.down=!1,u.left=!1,u.right=!1):(u.none=f.none,u.up=f.up,u.down=f.down,u.left=f.left,u.right=f.right),f.none=!0,f.up=!1,f.down=!1,f.left=!1,f.right=!1,p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(a,u){a&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),a&&this.update(u)},update:function(a){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,a);var u=this.velocity.x,f=this.velocity.y;this.newVelocity.set(u*a,f*a),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(f,u),this.speed=Math.sqrt(u*u+f*f),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(l.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var a=this.position.x-this.prevFrame.x,u=this.position.y-this.prevFrame.y;if(this.moves){var f=this.deltaMax.x,p=this.deltaMax.y;f!==0&&a!==0&&(a<0&&a<-f?a=-f:a>0&&a>f&&(a=f)),p!==0&&u!==0&&(u<0&&u<-p?u=-p:u>0&&u>p&&(u=p)),this.gameObject.x+=a,this.gameObject.y+=u}a<0?this.facing=g.FACING_LEFT:a>0&&(this.facing=g.FACING_RIGHT),u<0?this.facing=g.FACING_UP:u>0&&(this.facing=g.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=a,this._ty=u},setBoundsRectangle:function(a){return this.customBoundsRectangle=a||this.world.bounds,this},checkWorldBounds:function(){var a=this.position,u=this.customBoundsRectangle,f=this.world.checkCollision,p=this.worldBounce?-this.worldBounce.x:-this.bounce.x,v=this.worldBounce?-this.worldBounce.y:-this.bounce.y,m=!1;return a.x<u.x&&f.left?(a.x=u.x,this.velocity.x*=p,this.blocked.left=!0,m=!0):this.right>u.right&&f.right&&(a.x=u.right-this.width,this.velocity.x*=p,this.blocked.right=!0,m=!0),a.y<u.y&&f.up?(a.y=u.y,this.velocity.y*=v,this.blocked.up=!0,m=!0):this.bottom>u.bottom&&f.down&&(a.y=u.bottom-this.height,this.velocity.y*=v,this.blocked.down=!0,m=!0),m&&(this.blocked.none=!1,this.updateCenter()),m},setOffset:function(a,u){return u===void 0&&(u=a),this.offset.set(a,u),this},setSize:function(a,u,f){f===void 0&&(f=!0);var p=this.gameObject;if(!a&&p.frame&&(a=p.frame.realWidth),!u&&p.frame&&(u=p.frame.realHeight),this.sourceWidth=a,this.sourceHeight=u,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),f&&p.getCenter){var v=(p.width-a)/2,m=(p.height-u)/2;this.offset.set(v,m)}return this.isCircle=!1,this.radius=0,this},setCircle:function(a,u,f){return u===void 0&&(u=this.offset.x),f===void 0&&(f=this.offset.y),a>0?(this.isCircle=!0,this.radius=a,this.sourceWidth=a*2,this.sourceHeight=a*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(u,f),this.updateCenter()):this.isCircle=!1,this},reset:function(a,u){this.stop();var f=this.gameObject;f.setPosition(a,u),f.getTopLeft?f.getTopLeft(this.position):this.position.set(a,u),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=f.angle,this.preRotation=f.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(a){return a.x=this.x,a.y=this.y,a.right=this.right,a.bottom=this.bottom,a},hitTest:function(a,u){if(!this.isCircle)return s(this,a,u);if(this.radius>0&&a>=this.left&&a<=this.right&&u>=this.top&&u<=this.bottom){var f=(this.center.x-a)*(this.center.x-a),p=(this.center.y-u)*(this.center.y-u);return f+p<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(a){var u=this.position,f=u.x+this.halfWidth,p=u.y+this.halfHeight;this.debugShowBody&&(a.lineStyle(a.defaultStrokeWidth,this.debugBodyColor),this.isCircle?a.strokeCircle(f,p,this.width/2):(this.checkCollision.up&&a.lineBetween(u.x,u.y,u.x+this.width,u.y),this.checkCollision.right&&a.lineBetween(u.x+this.width,u.y,u.x+this.width,u.y+this.height),this.checkCollision.down&&a.lineBetween(u.x,u.y+this.height,u.x+this.width,u.y+this.height),this.checkCollision.left&&a.lineBetween(u.x,u.y,u.x,u.y+this.height))),this.debugShowVelocity&&(a.lineStyle(a.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),a.lineBetween(f,p,f+this.velocity.x/2,p+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(a,u,f,p){a===void 0&&(a=!0),this.collideWorldBounds=a;var v=u!==void 0,m=f!==void 0;return(v||m)&&(this.worldBounce||(this.worldBounce=new n),v&&(this.worldBounce.x=u),m&&(this.worldBounce.y=f)),p!==void 0&&(this.onWorldBounds=p),this},setVelocity:function(a,u){return this.velocity.set(a,u),a=this.velocity.x,u=this.velocity.y,this.speed=Math.sqrt(a*a+u*u),this},setVelocityX:function(a){this.velocity.x=a;var u=a,f=this.velocity.y;return this.speed=Math.sqrt(u*u+f*f),this},setVelocityY:function(a){this.velocity.y=a;var u=this.velocity.x,f=a;return this.speed=Math.sqrt(u*u+f*f),this},setMaxVelocity:function(a,u){return this.maxVelocity.set(a,u),this},setMaxVelocityX:function(a){return this.maxVelocity.x=a,this},setMaxVelocityY:function(a){return this.maxVelocity.y=a,this},setMaxSpeed:function(a){return this.maxSpeed=a,this},setBounce:function(a,u){return this.bounce.set(a,u),this},setBounceX:function(a){return this.bounce.x=a,this},setBounceY:function(a){return this.bounce.y=a,this},setAcceleration:function(a,u){return this.acceleration.set(a,u),this},setAccelerationX:function(a){return this.acceleration.x=a,this},setAccelerationY:function(a){return this.acceleration.y=a,this},setAllowDrag:function(a){return a===void 0&&(a=!0),this.allowDrag=a,this},setAllowGravity:function(a){return a===void 0&&(a=!0),this.allowGravity=a,this},setAllowRotation:function(a){return a===void 0&&(a=!0),this.allowRotation=a,this},setDrag:function(a,u){return this.drag.set(a,u),this},setDamping:function(a){return this.useDamping=a,this},setDragX:function(a){return this.drag.x=a,this},setDragY:function(a){return this.drag.y=a,this},setGravity:function(a,u){return this.gravity.set(a,u),this},setGravityX:function(a){return this.gravity.x=a,this},setGravityY:function(a){return this.gravity.y=a,this},setFriction:function(a,u){return this.friction.set(a,u),this},setFrictionX:function(a){return this.friction.x=a,this},setFrictionY:function(a){return this.friction.y=a,this},setAngularVelocity:function(a){return this.angularVelocity=a,this},setAngularAcceleration:function(a){return this.angularAcceleration=a,this},setAngularDrag:function(a){return this.angularDrag=a,this},setMass:function(a){return this.mass=a,this},setImmovable:function(a){return a===void 0&&(a=!0),this.immovable=a,this},setEnable:function(a){return a===void 0&&(a=!0),this.enable=a,this},processX:function(a,u,f,p){this.x+=a,this.updateCenter(),u!==null&&(this.velocity.x=u);var v=this.blocked;f&&(v.left=!0),p&&(v.right=!0)},processY:function(a,u,f,p){this.y+=a,this.updateCenter(),u!==null&&(this.velocity.y=u);var v=this.blocked;f&&(v.up=!0),p&&(v.down=!0)},x:{get:function(){return this.position.x},set:function(a){this.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.position.y=a}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h,i,s,n,d,a,u){this.world=h,this.name="",this.active=!0,this.overlapOnly=i,this.object1=s,this.object2=n,this.collideCallback=d,this.processCallback=a,this.callbackContext=u},setName:function(l){return this.name=l,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=e(3),l=new g,h=new g,i=function(s,n,d,a,u,f,p){var v=p.tilemapLayer.tilemap._convert.WorldToTileXY;v(s,n,!0,l,f,p);var m=l.x,E=l.y;v(s+d,n+a,!1,h,f,p);var x=Math.ceil(h.x),y=Math.ceil(h.y);return o(m,E,x-m,y-E,u,p)};c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.collisionCallback?!o.collisionCallback.call(o.collisionCallbackContext,g,o):o.layer.callbacks[o.index]?!o.layer.callbacks[o.index].callback.call(o.layer.callbacks[o.index].callbackContext,g,o):!0};c.exports=e},function(c,R,e){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(436);function g(y){var S=[".left",".top",".right",".bottom"];if(!(this instanceof g))return new g(y,S);this._maxEntries=Math.max(4,y||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}g.prototype={all:function(){return this._all(this.data,[])},search:function(y){var S=this.data,C=[],I=this.toBBox;if(!m(y,S))return C;for(var O=[],M,L,P,b;S;){for(M=0,L=S.children.length;M<L;M++)P=S.children[M],b=S.leaf?I(P):P,m(y,b)&&(S.leaf?C.push(P):v(y,b)?this._all(P,C):O.push(P));S=O.pop()}return C},collides:function(y){var S=this.data,C=this.toBBox;if(!m(y,S))return!1;for(var I=[],O,M,L,P;S;){for(O=0,M=S.children.length;O<M;O++)if(L=S.children[O],P=S.leaf?C(L):L,m(y,P)){if(S.leaf||v(y,P))return!0;I.push(L)}S=I.pop()}return!1},load:function(y){if(!(y&&y.length))return this;if(y.length<this._minEntries){for(var S=0,C=y.length;S<C;S++)this.insert(y[S]);return this}var I=this._build(y.slice(),0,y.length-1,0);if(!this.data.children.length)this.data=I;else if(this.data.height===I.height)this._splitRoot(this.data,I);else{if(this.data.height<I.height){var O=this.data;this.data=I,I=O}this._insert(I,this.data.height-I.height-1,!0)}return this},insert:function(y){return y&&this._insert(y,this.data.height-1),this},clear:function(){return this.data=E([]),this},remove:function(y,S){if(!y)return this;for(var C=this.data,I=this.toBBox(y),O=[],M=[],L,P,b,B;C||O.length;){if(C||(C=O.pop(),P=O[O.length-1],L=M.pop(),B=!0),C.leaf&&(b=l(y,C.children,S),b!==-1))return C.children.splice(b,1),O.push(C),this._condense(O),this;!B&&!C.leaf&&v(C,I)?(O.push(C),M.push(L),L=0,P=C,C=C.children[0]):P?(L++,C=P.children[L],B=!1):C=null}return this},toBBox:function(y){return y},compareMinX:n,compareMinY:d,toJSON:function(){return this.data},fromJSON:function(y){return this.data=y,this},_all:function(y,S){for(var C=[];y;)y.leaf?S.push.apply(S,y.children):C.push.apply(C,y.children),y=C.pop();return S},_build:function(y,S,C,I){var O=C-S+1,M=this._maxEntries,L;if(O<=M)return L=E(y.slice(S,C+1)),h(L,this.toBBox),L;I||(I=Math.ceil(Math.log(O)/Math.log(M)),M=Math.ceil(O/Math.pow(M,I-1))),L=E([]),L.leaf=!1,L.height=I;var P=Math.ceil(O/M),b=P*Math.ceil(Math.sqrt(M)),B,U,H,Y;for(x(y,S,C,b,this.compareMinX),B=S;B<=C;B+=b)for(H=Math.min(B+b-1,C),x(y,B,H,P,this.compareMinY),U=B;U<=H;U+=P)Y=Math.min(U+P-1,H),L.children.push(this._build(y,U,Y,I-1));return h(L,this.toBBox),L},_chooseSubtree:function(y,S,C,I){for(var O,M,L,P,b,B,U,H;I.push(S),!(S.leaf||I.length-1===C);){for(U=H=1/0,O=0,M=S.children.length;O<M;O++)L=S.children[O],b=a(L),B=f(y,L)-b,B<H?(H=B,U=b<U?b:U,P=L):B===H&&b<U&&(U=b,P=L);S=P||S.children[0]}return S},_insert:function(y,S,C){var I=this.toBBox,O=C?y:I(y),M=[],L=this._chooseSubtree(O,this.data,S,M);for(L.children.push(y),s(L,O);S>=0&&M[S].children.length>this._maxEntries;)this._split(M,S),S--;this._adjustParentBBoxes(O,M,S)},_split:function(y,S){var C=y[S],I=C.children.length,O=this._minEntries;this._chooseSplitAxis(C,O,I);var M=this._chooseSplitIndex(C,O,I),L=E(C.children.splice(M,C.children.length-M));L.height=C.height,L.leaf=C.leaf,h(C,this.toBBox),h(L,this.toBBox),S?y[S-1].children.push(L):this._splitRoot(C,L)},_splitRoot:function(y,S){this.data=E([y,S]),this.data.height=y.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},_chooseSplitIndex:function(y,S,C){var I,O,M,L,P,b,B,U;for(b=B=1/0,I=S;I<=C-S;I++)O=i(y,0,I,this.toBBox),M=i(y,I,C,this.toBBox),L=p(O,M),P=a(O)+a(M),L<b?(b=L,U=I,B=P<B?P:B):L===b&&P<B&&(B=P,U=I);return U},_chooseSplitAxis:function(y,S,C){var I=y.leaf?this.compareMinX:n,O=y.leaf?this.compareMinY:d,M=this._allDistMargin(y,S,C,I),L=this._allDistMargin(y,S,C,O);M<L&&y.children.sort(I)},_allDistMargin:function(y,S,C,I){y.children.sort(I);var O=this.toBBox,M=i(y,0,S,O),L=i(y,C-S,C,O),P=u(M)+u(L),b,B;for(b=S;b<C-S;b++)B=y.children[b],s(M,y.leaf?O(B):B),P+=u(M);for(b=C-S-1;b>=S;b--)B=y.children[b],s(L,y.leaf?O(B):B),P+=u(L);return P},_adjustParentBBoxes:function(y,S,C){for(var I=C;I>=0;I--)s(S[I],y)},_condense:function(y){for(var S=y.length-1,C;S>=0;S--)y[S].children.length===0?S>0?(C=y[S-1].children,C.splice(C.indexOf(y[S]),1)):this.clear():h(y[S],this.toBBox)},compareMinX:function(y,S){return y.left-S.left},compareMinY:function(y,S){return y.top-S.top},toBBox:function(y){return{minX:y.left,minY:y.top,maxX:y.right,maxY:y.bottom}}};function l(y,S,C){if(!C)return S.indexOf(y);for(var I=0;I<S.length;I++)if(C(y,S[I]))return I;return-1}function h(y,S){i(y,0,y.children.length,S,y)}function i(y,S,C,I,O){O||(O=E(null)),O.minX=1/0,O.minY=1/0,O.maxX=-1/0,O.maxY=-1/0;for(var M=S,L;M<C;M++)L=y.children[M],s(O,y.leaf?I(L):L);return O}function s(y,S){return y.minX=Math.min(y.minX,S.minX),y.minY=Math.min(y.minY,S.minY),y.maxX=Math.max(y.maxX,S.maxX),y.maxY=Math.max(y.maxY,S.maxY),y}function n(y,S){return y.minX-S.minX}function d(y,S){return y.minY-S.minY}function a(y){return(y.maxX-y.minX)*(y.maxY-y.minY)}function u(y){return y.maxX-y.minX+(y.maxY-y.minY)}function f(y,S){return(Math.max(S.maxX,y.maxX)-Math.min(S.minX,y.minX))*(Math.max(S.maxY,y.maxY)-Math.min(S.minY,y.minY))}function p(y,S){var C=Math.max(y.minX,S.minX),I=Math.max(y.minY,S.minY),O=Math.min(y.maxX,S.maxX),M=Math.min(y.maxY,S.maxY);return Math.max(0,O-C)*Math.max(0,M-I)}function v(y,S){return y.minX<=S.minX&&y.minY<=S.minY&&S.maxX<=y.maxX&&S.maxY<=y.maxY}function m(y,S){return S.minX<=y.maxX&&S.minY<=y.maxY&&S.maxX>=y.minX&&S.maxY>=y.minY}function E(y){return{children:y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(y,S,C,I,O){for(var M=[S,C],L;M.length;)C=M.pop(),S=M.pop(),!(C-S<=I)&&(L=S+Math.ceil((C-S)/I/2)*I,o(y,L,S,C,O),M.push(S,L,L,C))}c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(533),g=e(535),l=e(248),h=function(i,s,n,d,a,u,f){var p=d.left,v=d.top,m=d.right,E=d.bottom,x=n.faceLeft||n.faceRight,y=n.faceTop||n.faceBottom;if(f||(x=!0,y=!0),!x&&!y)return!1;var S=0,C=0,I=0,O=1;if(s.deltaAbsX()>s.deltaAbsY()?I=-1:s.deltaAbsX()<s.deltaAbsY()&&(O=-1),s.deltaX()!==0&&s.deltaY()!==0&&x&&y&&(I=Math.min(Math.abs(s.position.x-m),Math.abs(s.right-p)),O=Math.min(Math.abs(s.position.y-E),Math.abs(s.bottom-v))),I<O){if(x&&(S=o(s,n,p,m,u,f),S!==0&&!l(d,s)))return!0;y&&(C=g(s,n,v,E,u,f))}else{if(y&&(C=g(s,n,v,E,u,f),C!==0&&!l(d,s)))return!0;x&&(S=o(s,n,p,m,u,f))}return S!==0||C!==0};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(534),g=function(l,h,i,s,n,d){var a=0,u=h.faceLeft,f=h.faceRight,p=h.collideLeft,v=h.collideRight;return d||(u=!0,f=!0,p=!0,v=!0),l.deltaX()<0&&v&&l.checkCollision.left?f&&l.x<s&&(a=l.x-s,a<-n&&(a=0)):l.deltaX()>0&&p&&l.checkCollision.right&&u&&l.right>i&&(a=l.right-i,a>n&&(a=0)),a!==0&&(l.customSeparateX?l.overlapX=a:o(l,a)),a};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){g<0?(o.blocked.none=!1,o.blocked.left=!0):g>0&&(o.blocked.none=!1,o.blocked.right=!0),o.position.x-=g,o.bounce.x===0?o.velocity.x=0:o.velocity.x=-o.velocity.x*o.bounce.x};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(536),g=function(l,h,i,s,n,d){var a=0,u=h.faceTop,f=h.faceBottom,p=h.collideUp,v=h.collideDown;return d||(u=!0,f=!0,p=!0,v=!0),l.deltaY()<0&&v&&l.checkCollision.up?f&&l.y<s&&(a=l.y-s,a<-n&&(a=0)):l.deltaY()>0&&p&&l.checkCollision.down&&u&&l.bottom>i&&(a=l.bottom-i,a>n&&(a=0)),a!==0&&(l.customSeparateY?l.overlapY=a:o(l,a)),a};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){g<0?(o.blocked.none=!1,o.blocked.up=!0):g>0&&(o.blocked.none=!1,o.blocked.down=!0),o.position.y-=g,o.bounce.y===0?o.velocity.y=0:o.velocity.y=-o.velocity.y*o.bounce.y};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(246),g=e(1389),l=function(h,i,s,n){var d=o(h,i,s,n),a=h.immovable,u=i.immovable;if(s||d===0||a&&u||h.customSeparateX||i.customSeparateX)return d!==0||h.embedded&&i.embedded;var f=g.Set(h,i,d);return!a&&!u?f>0?!0:g.Check():(a?g.RunImmovableBody1(f):u&&g.RunImmovableBody2(f),!0)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(247),g=e(1390),l=function(h,i,s,n){var d=o(h,i,s,n),a=h.immovable,u=i.immovable;if(s||d===0||a&&u||h.customSeparateY||i.customSeparateY)return d!==0||h.embedded&&i.embedded;var f=g.Set(h,i,d);return!a&&!u?f>0?!0:g.Check():(a?g.RunImmovableBody1(f):u&&g.RunImmovableBody2(f),!0)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(66),g=e(0),l=e(62),h=e(57),i=e(3),s=new g({initialize:function(d,a){var u=a.displayWidth?a.displayWidth:64,f=a.displayHeight?a.displayHeight:64;this.world=d,this.gameObject=a,this.debugShowBody=d.defaults.debugShowStaticBody,this.debugBodyColor=d.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new i,this.position=new i(a.x-u*a.originX,a.y-f*a.originY),this.width=u,this.height=f,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new i(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=i.ZERO,this.allowGravity=!1,this.gravity=i.ZERO,this.bounce=i.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=l.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(n,d){return n&&n!==this.gameObject&&(this.gameObject.body=null,n.body=this,this.gameObject=n),d&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var n=this.gameObject;return n.getTopLeft(this.position),this.width=n.displayWidth,this.height=n.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(n,d){return d===void 0&&(d=n),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n,d),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(n,d,a){a===void 0&&(a=!0);var u=this.gameObject;if(!n&&u.frame&&(n=u.frame.realWidth),!d&&u.frame&&(d=u.frame.realHeight),this.world.staticTree.remove(this),this.width=n,this.height=d,this.halfWidth=Math.floor(n/2),this.halfHeight=Math.floor(d/2),a&&u.getCenter){var f=u.displayWidth/2,p=u.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(f-this.halfWidth,p-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(n,d,a){return d===void 0&&(d=this.offset.x),a===void 0&&(a=this.offset.y),n>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=n,this.width=n*2,this.height=n*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(d,a),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(n,d){var a=this.gameObject;n===void 0&&(n=a.x),d===void 0&&(d=a.y),this.world.staticTree.remove(this),a.setPosition(n,d),a.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(n){return n.x=this.x,n.y=this.y,n.right=this.right,n.bottom=this.bottom,n},hitTest:function(n,d){return this.isCircle?o(this,n,d):h(this,n,d)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(n){var d=this.position,a=d.x+this.halfWidth,u=d.y+this.halfHeight;this.debugShowBody&&(n.lineStyle(n.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?n.strokeCircle(a,u,this.width/2):n.strokeRect(d.x,d.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(n){return n<=0&&(n=.1),this.mass=n,this},x:{get:function(){return this.position.x},set:function(n){this.world.staticTree.remove(this),this.position.x=n,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(n){this.world.staticTree.remove(this),this.position.y=n,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});c.exports=s},function(c,R,e){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var o=e(0),g=new o({initialize:function(h){this.pluginManager=h,this.game=h.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(3),g=new o,l=function(h,i,s,n){var d=s.tilemapLayer,a=d.cullPaddingX,u=d.cullPaddingY,f=d.tilemap.tileToWorldXY(h,i,g,n,d);return f.x>n.worldView.x+d.scaleX*s.tileWidth*(-a-.5)&&f.x<n.worldView.right+d.scaleX*s.tileWidth*(a-.5)&&f.y>n.worldView.y+d.scaleY*s.tileHeight*(-u-1)&&f.y<n.worldView.bottom+d.scaleY*s.tileHeight*(u-.5)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=function(l,h,i,s,n,d,a){for(var u=o(i,s,n,d,null,a),f=0;f<u.length;f++)u[f]&&u[f].index===l&&(u[f].index=h)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10),g=e(139),l=e(76),h=new o,i=function(s,n){var d=s.tilemapLayer.tilemap,a=s.tilemapLayer,u=Math.floor(d.tileWidth*a.scaleX),f=Math.floor(d.tileHeight*a.scaleY),p=l(n.worldView.x-a.x,u,0,!0)-a.cullPaddingX,v=g(n.worldView.right-a.x,u,0,!0)+a.cullPaddingX,m=l(n.worldView.y-a.y,f,0,!0)-a.cullPaddingY,E=g(n.worldView.bottom-a.y,f,0,!0)+a.cullPaddingY;return h.setTo(p,m,v-p,E-m)};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(543),g=e(159),l=function(h,i,s,n){s===void 0&&(s=[]),n===void 0&&(n=0),s.length=0;var d=h.tilemapLayer,a=o(h,i);return(d.skipCull||d.scrollFactorX!==1||d.scrollFactorY!==1)&&(a.left=0,a.right=h.width,a.top=0,a.bottom=h.height),g(h,a,n,s),s};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(546),g=e(159),l=function(h,i,s,n){s===void 0&&(s=[]),n===void 0&&(n=0),s.length=0;var d=h.tilemapLayer;if(!d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1){var a=o(h,i);g(h,a,n,s)}return s};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(139),g=e(76),l=function(h,i){var s=h.tilemapLayer.tilemap,n=h.tilemapLayer,d=Math.floor(s.tileWidth*n.scaleX),a=Math.floor(s.tileHeight*n.scaleY),u=h.hexSideLength,f=(a-u)/2+u,p=g(i.worldView.x-n.x,d,0,!0)-n.cullPaddingX,v=o(i.worldView.right-n.x,d,0,!0)+n.cullPaddingX,m=g(i.worldView.y-n.y,f,0,!0)-n.cullPaddingY,E=o(i.worldView.bottom-n.y,f,0,!0)+n.cullPaddingY;return{left:p,right:v,top:m,bottom:E}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(541),g=function(l,h,i,s){i===void 0&&(i=[]),s===void 0&&(s=0),i.length=0;var n=l.tilemapLayer,d=l.data,a=l.width,u=l.height,f=0,p=a,v=0,m=u;if(!n.skipCull){var E,x,y;if(s===0){for(x=v;x<m;x++)for(E=f;d[x]&&E<p;E++)if(o(E,x,l,h)){if(y=d[x][E],!y||y.index===-1||!y.visible||y.alpha===0)continue;i.push(y)}}else if(s===1){for(x=v;x<m;x++)for(E=p;d[x]&&E>=f;E--)if(o(E,x,l,h)){if(y=d[x][E],!y||y.index===-1||!y.visible||y.alpha===0)continue;i.push(y)}}else if(s===2){for(x=m;x>=v;x--)for(E=f;d[x]&&E<p;E++)if(o(E,x,l,h)){if(y=d[x][E],!y||y.index===-1||!y.visible||y.alpha===0)continue;i.push(y)}}else if(s===3){for(x=m;x>=v;x--)for(E=p;d[x]&&E>=f;E--)if(o(E,x,l,h)){if(y=d[x][E],!y||y.index===-1||!y.visible||y.alpha===0)continue;i.push(y)}}}return n.tilesDrawn=i.length,n.tilesTotal=a*u,i};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(549),g=e(159),l=function(h,i,s,n){s===void 0&&(s=[]),n===void 0&&(n=0),s.length=0;var d=h.tilemapLayer;if(!d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1){var a=o(h,i);g(h,a,n,s)}return s};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(139),g=e(76),l=function(h,i){var s=h.tilemapLayer.tilemap,n=h.tilemapLayer,d=Math.floor(s.tileWidth*n.scaleX),a=Math.floor(s.tileHeight*n.scaleY),u=g(i.worldView.x-n.x,d,0,!0)-n.cullPaddingX,f=o(i.worldView.right-n.x,d,0,!0)+n.cullPaddingX,p=g(i.worldView.y-n.y,a/2,0,!0)-n.cullPaddingY,v=o(i.worldView.bottom-n.y,a/2,0,!0)+n.cullPaddingY;return{left:u,right:f,top:p,bottom:v}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(3),g=function(l,h,i,s,n){i||(i=new o);var d=n.baseTileWidth,a=n.baseTileHeight,u=n.tilemapLayer,f=0,p=0;u&&(s||(s=u.scene.cameras.main),f=u.x+s.scrollX*(1-u.scrollFactorX),d*=u.scaleX,p=u.y+s.scrollY*(1-u.scrollFactorY),a*=u.scaleY);var v=n.hexSideLength,m=(a-v)/2+v,E=f+l*d+h%2*(d/2),x=p+h*m;return i.set(E,x)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(3),g=function(l,h,i,s,n){i||(i=new o);var d=n.baseTileWidth,a=n.baseTileHeight,u=n.tilemapLayer,f=0,p=0;u&&(s||(s=u.scene.cameras.main),f=u.x+s.scrollX*(1-u.scrollFactorX),d*=u.scaleX,p=u.y+s.scrollY*(1-u.scrollFactorY),a*=u.scaleY);var v=f+(l-h)*(d/2),m=p+(l+h)*(a/2);return i.set(v,m)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(3),g=function(l,h,i,s,n){i||(i=new o);var d=n.baseTileWidth,a=n.baseTileHeight,u=n.tilemapLayer,f=0,p=0;u&&(s||(s=u.scene.cameras.main),f=u.x+s.scrollX*(1-u.scrollFactorX),d*=u.scaleX,p=u.y+s.scrollY*(1-u.scrollFactorY),a*=u.scaleY);var v=f+l*d+h%2*(d/2),m=p+h*(a/2);return i.set(v,m)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(253),g=e(254),l=e(3),h=function(i,s,n,d,a){return n||(n=new l(0,0)),n.x=o(i,d,a),n.y=g(s,d,a),n};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=l.baseTileHeight,i=l.tilemapLayer,s=0;i&&(g===void 0&&(g=i.scene.cameras.main),s=i.y+g.scrollY*(1-i.scrollFactorY),h*=i.scaleY);var n=i.tilemap.hexSideLength,d=(h-n)/2+n;return s+o*d};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=l.baseTileHeight,i=l.tilemapLayer,s=0;return i&&(g===void 0&&(g=i.scene.cameras.main),s=i.y+g.scrollY*(1-i.scrollFactorY),h*=i.scaleY),s+o*(h/2)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(3),g=function(l,h,i,s,n,d){s||(s=new o);var a=d.baseTileWidth,u=d.baseTileHeight,f=d.tilemapLayer;f&&(n||(n=f.scene.cameras.main),h=h-(f.y+n.scrollY*(1-f.scrollFactorY)),u*=f.scaleY,l=l-(f.x+n.scrollX*(1-f.scrollFactorX)),a*=f.scaleX);var p=d.hexSideLength,v=(u-p)/2+p,m=i?Math.floor(h/v):h/v,E=i?Math.floor((l-m%2*.5*a)/a):(l-m%2*.5*a)/a;return s.set(E,m)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(3),g=function(l,h,i,s,n,d){s||(s=new o);var a=d.baseTileWidth,u=d.baseTileHeight,f=d.tilemapLayer;f&&(n||(n=f.scene.cameras.main),h=h-(f.y+n.scrollY*(1-f.scrollFactorY)),u*=f.scaleY,l=l-(f.x+n.scrollX*(1-f.scrollFactorX)),a*=f.scaleX);var p=i?Math.floor((l/(a/2)+h/(u/2))/2):(l/(a/2)+h/(u/2))/2,v=i?Math.floor((h/(u/2)-l/(a/2))/2):(h/(u/2)-l/(a/2))/2;return s.set(p,v)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(3),g=function(l,h,i,s,n,d){s||(s=new o);var a=d.baseTileWidth,u=d.baseTileHeight,f=d.tilemapLayer;f&&(n||(n=f.scene.cameras.main),h=h-(f.y+n.scrollY*(1-f.scrollFactorY)),u*=f.scaleY,l=l-(f.x+n.scrollX*(1-f.scrollFactorX)),a*=f.scaleX);var p=i?Math.floor(h/(u/2)):h/(u/2),v=i?Math.floor((l+p%2*.5*a)/a):(l+p%2*.5*a)/a;return s.set(v,p)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(255),g=e(256),l=e(3),h=function(i,s,n,d,a,u){return n===void 0&&(n=!0),d||(d=new l(0,0)),d.x=o(i,n,a,u),d.y=g(s,n,a,u),d};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=h.baseTileHeight,s=h.tilemapLayer;s&&(l||(l=s.scene.cameras.main),o=o-(s.y+l.scrollY*(1-s.scrollFactorY)),i*=s.scaleY);var n=h.hexSideLength,d=(i-n)/2+n;return g?Math.floor(o/d):o/d};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=h.baseTileHeight,s=h.tilemapLayer;return s&&(l||(l=s.scene.cameras.main),o=o-(s.y+l.scrollY*(1-s.scrollFactorY)),i*=s.scaleY),g?Math.floor(o/(i/2)):o/(i/2)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(119),g=function(l,h,i){if(o(l,h,i)){var s=i.data[h][l];return s!==null&&s.index>-1}else return!1};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(85),g=e(119),l=e(252),h=function(i,s,n,d,a){if(n===void 0&&(n=!0),d===void 0&&(d=!0),!g(i,s,a))return null;var u=a.data[s][i];if(u)a.data[s][i]=n?null:new o(a,-1,i,s,a.tileWidth,a.tileHeight);else return null;return d&&u&&u.collides&&l(i,s,a),u};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(40),g=e(259),l=e(565),h=e(566),i=e(577),s=function(n,d,a,u,f,p){var v;switch(d){case o.ARRAY_2D:v=g(n,a,u,f,p);break;case o.CSV:v=l(n,a,u,f,p);break;case o.TILED_JSON:v=h(n,a,p);break;case o.WELTMEISTER:v=i(n,a,p);break;default:console.warn("Unrecognized tilemap data format: "+d),v=null}return v};c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(40),g=e(259),l=function(h,i,s,n,d){var a=i.trim().split(`
`).map(function(f){return f.split(",")}),u=g(h,a,s,n,d);return u.format=o.CSV,u};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(567),g=e(568),l=e(29),h=e(40),i=e(258),s=e(121),n=e(569),d=e(570),a=e(573),u=e(575),f=function(p,v,m){var E=new s({width:v.width,height:v.height,name:p,tileWidth:v.tilewidth,tileHeight:v.tileheight,orientation:i(v.orientation),format:h.TILED_JSON,version:v.version,properties:v.properties,renderOrder:v.renderorder,infinite:v.infinite});E.orientation===l.HEXAGONAL&&(E.hexSideLength=v.hexsidelength),E.layers=a(v,m),E.images=n(v);var x=u(v);return E.tilesets=x.tilesets,E.imageCollections=x.imageCollections,E.objects=d(v),E.tiles=g(E),o(E),E};c.exports=f},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(17),g=function(l){for(var h,i,s,n,d,a=0;a<l.layers.length;a++){h=l.layers[a],n=null;for(var u=0;u<h.data.length;u++){d=h.data[u];for(var f=0;f<d.length;f++)i=d[f],!(i===null||i.index<0)&&(s=l.tiles[i.index][2],n=l.tilesets[s],i.width=n.tileWidth,i.height=n.tileHeight,n.tileProperties&&n.tileProperties[i.index-n.firstgid]&&(i.properties=o(i.properties,n.tileProperties[i.index-n.firstgid])))}}};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(122),g=function(l){var h,i,s=[];for(h=0;h<l.imageCollections.length;h++)for(var n=l.imageCollections[h],d=n.images,a=0;a<d.length;a++){var u=d[a];i=new o(u.image,u.gid,n.imageWidth,n.imageHeight,0,0),i.updateTileData(n.imageWidth,n.imageHeight),l.tilesets.push(i)}for(h=0;h<l.tilesets.length;h++){i=l.tilesets[h];for(var f=i.tileMargin,p=i.tileMargin,v=0,m=0,E=0,x=i.firstgid;x<i.firstgid+i.total&&(s[x]=[f,p,h],f+=i.tileWidth+i.tileSpacing,v++,!(v===i.total||(m++,m===i.columns&&(f=i.tileMargin,p+=i.tileHeight+i.tileSpacing,m=0,E++,E===i.rows))));x++);}return s};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(2),g=e(161),l=function(h){for(var i=[],s=[],n=g(h);n.i<n.layers.length||s.length>0;){if(n.i>=n.layers.length){if(s.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}n=s.pop();continue}var d=n.layers[n.i];if(n.i++,d.type!=="imagelayer"){if(d.type==="group"){var a=g(h,d,n);s.push(n),n=a}continue}var u=o(d,"offsetx",0)+o(d,"startx",0),f=o(d,"offsety",0)+o(d,"starty",0);i.push({name:n.name+d.name,image:d.image,x:n.x+u+d.x,y:n.y+f+d.y,alpha:n.opacity*d.opacity,visible:n.visible&&d.visible,properties:o(d,"properties",{})})}return i};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(2),g=e(260),l=e(572),h=e(161),i=function(s){for(var n=[],d=[],a=h(s);a.i<a.layers.length||d.length>0;){if(a.i>=a.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=d.pop();continue}var u=a.layers[a.i];if(a.i++,u.opacity*=a.opacity,u.visible=a.visible&&u.visible,u.type!=="objectgroup"){if(u.type==="group"){var f=h(s,u,a);d.push(a),a=f}continue}u.name=a.name+u.name;for(var p=a.x+o(u,"startx",0)+o(u,"offsetx",0),v=a.y+o(u,"starty",0)+o(u,"offsety",0),m=[],E=0;E<u.objects.length;E++){var x=g(u.objects[E],p,v);m.push(x)}var y=new l(u);y.objects=m,n.push(y)}return n};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(126),g=function(l,h){for(var i={},s=0;s<h.length;s++){var n=h[s];o(l,n)&&(i[n]=l[n])}return i};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(2),l=new o({initialize:function(i){i===void 0&&(i={}),this.name=g(i,"name","object layer"),this.opacity=g(i,"opacity",1),this.properties=g(i,"properties",{}),this.propertyTypes=g(i,"propertytypes",{}),this.type=g(i,"type","objectgroup"),this.visible=g(i,"visible",!0),this.objects=g(i,"objects",[])}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(574),g=e(29),l=e(161),h=e(258),i=e(2),s=e(120),n=e(261),d=e(85),a=function(u,f){for(var p=i(u,"infinite",!1),v=[],m=[],E=l(u);E.i<E.layers.length||m.length>0;){if(E.i>=E.layers.length){if(m.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}E=m.pop();continue}var x=E.layers[E.i];if(E.i++,x.type!=="tilelayer"){if(x.type==="group"){var y=l(u,x,E);m.push(E),E=y}continue}if(x.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+x.name+"'");continue}else if(x.encoding&&x.encoding==="base64"){if(x.chunks)for(var S=0;S<x.chunks.length;S++)x.chunks[S].data=o(x.chunks[S].data);x.data&&(x.data=o(x.data)),delete x.encoding}var C,I,O,M,L=[],P=0;if(p){var b=i(x,"startx",0)+x.x,B=i(x,"starty",0)+x.y;C=new s({name:E.name+x.name,x:E.x+i(x,"offsetx",0)+b*u.tilewidth,y:E.y+i(x,"offsety",0)+B*u.tileheight,width:x.width,height:x.height,tileWidth:u.tilewidth,tileHeight:u.tileheight,alpha:E.opacity*x.opacity,visible:E.visible&&x.visible,properties:i(x,"properties",[]),orientation:h(u.orientation)}),C.orientation===g.HEXAGONAL&&(C.hexSideLength=u.hexsidelength);for(var U=0;U<x.height;U++){L.push([null]);for(var H=0;H<x.width;H++)L[U][H]=null}for(U=0,K=x.chunks.length;U<K;U++)for(var Y=x.chunks[U],j=Y.x-b,_=Y.y-B,w=0,D=0,N=Y.data.length;D<N;D++){var G=P+j,k=w+_;I=n(Y.data[D]),I.gid>0?(O=new d(C,I.gid,G,k,u.tilewidth,u.tileheight),O.rotation=I.rotation,O.flipX=I.flipped,L[k][G]=O):(M=f?null:new d(C,-1,G,k,u.tilewidth,u.tileheight),L[k][G]=M),P++,P===Y.width&&(w++,P=0)}}else{C=new s({name:E.name+x.name,x:E.x+i(x,"offsetx",0)+x.x,y:E.y+i(x,"offsety",0)+x.y,width:x.width,height:x.height,tileWidth:u.tilewidth,tileHeight:u.tileheight,alpha:E.opacity*x.opacity,visible:E.visible&&x.visible,properties:i(x,"properties",[]),orientation:h(u.orientation)}),C.orientation===g.HEXAGONAL&&(C.hexSideLength=u.hexsidelength);for(var V=[],X=0,K=x.data.length;X<K;X++)I=n(x.data[X]),I.gid>0?(O=new d(C,I.gid,P,L.length,u.tilewidth,u.tileheight),O.rotation=I.rotation,O.flipX=I.flipped,V.push(O)):(M=f?null:new d(C,-1,P,L.length,u.tilewidth,u.tileheight),V.push(M)),P++,P===x.width&&(L.push(V),P=0,V=[])}C.data=L,v.push(C)}return v};c.exports=a},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){for(var g=window.atob(o),l=g.length,h=new Array(l/4),i=0;i<l;i+=4)h[i/4]=(g.charCodeAt(i)|g.charCodeAt(i+1)<<8|g.charCodeAt(i+2)<<16|g.charCodeAt(i+3)<<24)>>>0;return h};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(122),g=e(576),l=e(260),h=e(1453),i=function(s){for(var n=[],d=[],a=null,u,f=0;f<s.tilesets.length;f++){var p=s.tilesets[f];if(p.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(p.image){var v=new o(p.name,p.firstgid,p.tilewidth,p.tileheight,p.margin,p.spacing);if(s.version>1){var m=void 0,E=void 0;if(Array.isArray(p.tiles)){m=m||{},E=E||{};for(var x=0;x<p.tiles.length;x++){var y=p.tiles[x];if(y.properties){var S={};y.properties.forEach(function(U){S[U.name]=U.value}),E[y.id]=S}if(y.objectgroup&&((m[y.id]||(m[y.id]={})).objectgroup=y.objectgroup,y.objectgroup.objects)){var C=y.objectgroup.objects.map(function(U){return l(U)});m[y.id].objectgroup.objects=C}y.animation&&((m[y.id]||(m[y.id]={})).animation=y.animation),y.type&&((m[y.id]||(m[y.id]={})).type=y.type)}}Array.isArray(p.wangsets)&&(m=m||{},E=E||{},h(p.wangsets,m)),m&&(v.tileData=m,v.tileProperties=E)}else if(p.tileproperties&&(v.tileProperties=p.tileproperties),p.tiles){v.tileData=p.tiles;for(u in v.tileData){var I=v.tileData[u].objectgroup;if(I&&I.objects){var O=I.objects.map(function(U){return l(U)});v.tileData[u].objectgroup.objects=O}}}v.updateTileData(p.imagewidth,p.imageheight),n.push(v)}else{var M=new g(p.name,p.firstgid,p.tilewidth,p.tileheight,p.margin,p.spacing,p.properties),L=0;for(x=0;x<p.tiles.length;x++){y=p.tiles[x];var P=y.image,b=parseInt(y.id,10),B=p.firstgid+b;M.addImage(B,P),L=Math.max(b,L)}M.maxId=L,d.push(M)}a&&(a.lastgid=p.firstgid-1),a=p}return{tilesets:n,imageCollections:d}};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h,i,s,n,d,a,u){(s===void 0||s<=0)&&(s=32),(n===void 0||n<=0)&&(n=32),d===void 0&&(d=0),a===void 0&&(a=0),this.name=h,this.firstgid=i|0,this.imageWidth=s|0,this.imageHeight=n|0,this.imageMargin=d|0,this.imageSpacing=a|0,this.properties=u||{},this.images=[],this.total=0},containsImageIndex:function(l){return l>=this.firstgid&&l<this.firstgid+this.total},addImage:function(l,h){return this.images.push({gid:l,image:h}),this.total++,this}});c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(40),g=e(121),l=e(578),h=e(579),i=function(s,n,d){if(n.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+s),null;for(var a=0,u=0,f=0;f<n.layer.length;f++)n.layer[f].width>a&&(a=n.layer[f].width),n.layer[f].height>u&&(u=n.layer[f].height);var p=new g({width:a,height:u,name:s,tileWidth:n.layer[0].tilesize,tileHeight:n.layer[0].tilesize,format:o.WELTMEISTER});return p.layers=l(n,d),p.tilesets=h(n),p};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(120),g=e(85),l=function(h,i){for(var s=[],n=0;n<h.layer.length;n++){for(var d=h.layer[n],a=new o({name:d.name,width:d.width,height:d.height,tileWidth:d.tilesize,tileHeight:d.tilesize,visible:d.visible===1}),u=[],f=[],p=0;p<d.data.length;p++){for(var v=0;v<d.data[p].length;v++){var m=d.data[p][v]-1,E;m>-1?E=new g(a,m,v,p,d.tilesize,d.tilesize):E=i?null:new g(a,-1,v,p,d.tilesize,d.tilesize),u.push(E)}f.push(u),u=[]}a.data=f,s.push(a)}return s};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(122),g=function(l){for(var h=[],i=[],s=0;s<l.layer.length;s++){var n=l.layer[s],d=n.tilesetName;d!==""&&i.indexOf(d)===-1&&(i.push(d),h.push(new o(d,0,n.tilesize,n.tilesize,0,0)))}return h};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(36),l=e(40),h=e(2),i=e(120),s=e(29),n=e(362),d=e(74),a=e(73),u=e(85),f=e(251),p=e(581),v=e(122),m=new o({initialize:function(x,y){this.scene=x,this.tileWidth=y.tileWidth,this.tileHeight=y.tileHeight,this.width=y.width,this.height=y.height,this.orientation=y.orientation,this.renderOrder=y.renderOrder,this.format=y.format,this.version=y.version,this.properties=y.properties,this.widthInPixels=y.widthInPixels,this.heightInPixels=y.heightInPixels,this.imageCollections=y.imageCollections,this.images=y.images,this.layers=y.layers,this.tilesets=y.tilesets,this.objects=y.objects,this.currentLayerIndex=0,this.hexSideLength=y.hexSideLength;var S=this.orientation;this._convert={WorldToTileXY:f.GetWorldToTileXYFunction(S),WorldToTileX:f.GetWorldToTileXFunction(S),WorldToTileY:f.GetWorldToTileYFunction(S),TileToWorldXY:f.GetTileToWorldXYFunction(S),TileToWorldX:f.GetTileToWorldXFunction(S),TileToWorldY:f.GetTileToWorldYFunction(S)}},createBlankDynamicLayer:function(E,x,y,S,C,I,O,M){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(E,x,y,S,C,I,O,M)},createDynamicLayer:function(E,x,y,S){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(E,x,y,S)},createStaticLayer:function(E,x,y,S){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(E,x,y,S)},setRenderOrder:function(E){var x=["right-down","left-down","right-up","left-up"];return typeof E=="number"&&(E=x[E]),x.indexOf(E)>-1&&(this.renderOrder=E),this},addTilesetImage:function(E,x,y,S,C,I,O){if(E===void 0)return null;if(x==null&&(x=E),!this.scene.sys.textures.exists(x))return console.warn("Invalid Tileset Image: "+x),null;var M=this.scene.sys.textures.get(x),L=this.getTilesetIndex(E);if(L===null&&this.format===l.TILED_JSON)return console.warn("No data found for Tileset: "+E),null;var P=this.tilesets[L];return P?(P.setTileSize(y,S),P.setSpacing(C,I),P.setImage(M),P):(y===void 0&&(y=this.tileWidth),S===void 0&&(S=this.tileHeight),C===void 0&&(C=0),I===void 0&&(I=0),O===void 0&&(O=0),P=new v(E,O,y,S,C,I),P.setImage(M),this.tilesets.push(P),P)},copy:function(E,x,y,S,C,I,O,M){return M=this.getLayer(M),M!==null?(f.Copy(E,x,y,S,C,I,O,M),this):null},createBlankLayer:function(E,x,y,S,C,I,O,M){y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=this.width),I===void 0&&(I=this.height),O===void 0&&(O=this.tileWidth),M===void 0&&(M=this.tileHeight);var L=this.getLayerIndex(E);if(L!==null)return console.warn("Invalid Tilemap Layer ID: "+E),null;for(var P=new i({name:E,tileWidth:O,tileHeight:M,width:C,height:I,orientation:this.orientation}),b,B=0;B<I;B++){b=[];for(var U=0;U<C;U++)b.push(new u(P,-1,U,B,O,M,this.tileWidth,this.tileHeight));P.data.push(b)}this.layers.push(P),this.currentLayerIndex=this.layers.length-1;var H=new p(this.scene,this,this.currentLayerIndex,x,y,S);return H.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(H),H},createLayer:function(E,x,y,S){var C=this.getLayerIndex(E);if(C===null)return console.warn("Invalid Tilemap Layer ID: "+E),typeof E=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var I=this.layers[C];if(I.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+E),null;this.currentLayerIndex=C,y===void 0&&(y=I.x),S===void 0&&(S=I.y);var O=new p(this.scene,this,C,x,y,S);return O.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(O),O},createFromObjects:function(E,x){var y=[],S=this.getObjectLayer(E);if(!S)return console.warn("createFromObjects: Invalid objectLayerName given: "+E),y;Array.isArray(x)||(x=[x]);for(var C=S.objects,I=0;I<x.length;I++){for(var O=x[I],M=h(O,"id",null),L=h(O,"gid",null),P=h(O,"name",null),b,B=[],U=0;U<C.length;U++)b=C[U],(M===null&&L===null&&P===null||M!==null&&b.id===M||L!==null&&b.gid===L||P!==null&&b.name===P)&&B.push(b);for(var H=h(O,"classType",a),Y=h(O,"scene",this.scene),j=h(O,"container",null),_=h(O,"key",null),w=h(O,"frame",null),D=0;D<B.length;D++){b=B[D];var N=new H(Y);N.setName(b.name),N.setPosition(b.x,b.y),N.setTexture(_,w),b.width&&(N.displayWidth=b.width),b.height&&(N.displayHeight=b.height);var G={x:N.originX*b.width,y:(N.originY-1)*b.height};if(b.rotation){var k=g(b.rotation);n(G,k),N.rotation=k}if(N.x+=G.x,N.y+=G.y,(b.flippedHorizontal!==void 0||b.flippedVertical!==void 0)&&N.setFlip(b.flippedHorizontal,b.flippedVertical),b.visible||(N.visible=!1),Array.isArray(b.properties))b.properties.forEach(function(X){var K=X.name;N[K]!==void 0?N[K]=X.value:N.setData(K,X.value)});else for(var V in b.properties)N[V]!==void 0?N[V]=b.properties[V]:N.setData(V,b.properties[V]);j?j.add(N):Y.add.existing(N),y.push(N)}}return y},createFromTiles:function(E,x,y,S,C,I){return I=this.getLayer(I),I===null?null:f.CreateFromTiles(E,x,y,S,C,I)},fill:function(E,x,y,S,C,I,O){return I===void 0&&(I=!0),O=this.getLayer(O),O===null?null:(f.Fill(E,x,y,S,C,I,O),this)},filterObjects:function(E,x,y){if(typeof E=="string"){var S=E;if(E=this.getObjectLayer(E),!E)return console.warn("No object layer found with the name: "+S),null}return E.objects.filter(x,y)},filterTiles:function(E,x,y,S,C,I,O,M){return M=this.getLayer(M),M===null?null:f.FilterTiles(E,x,y,S,C,I,O,M)},findByIndex:function(E,x,y,S){return S=this.getLayer(S),S===null?null:f.FindByIndex(E,x,y,S)},findObject:function(E,x,y){if(typeof E=="string"){var S=E;if(E=this.getObjectLayer(E),!E)return console.warn("No object layer found with the name: "+S),null}return E.objects.find(x,y)||null},findTile:function(E,x,y,S,C,I,O,M){return M=this.getLayer(M),M===null?null:f.FindTile(E,x,y,S,C,I,O,M)},forEachTile:function(E,x,y,S,C,I,O,M){return M=this.getLayer(M),M===null?null:(f.ForEachTile(E,x,y,S,C,I,O,M),this)},getImageIndex:function(E){return this.getIndex(this.images,E)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(E){return E.name})},getIndex:function(E,x){for(var y=0;y<E.length;y++)if(E[y].name===x)return y;return null},getLayer:function(E){var x=this.getLayerIndex(E);return x!==null?this.layers[x]:null},getObjectLayer:function(E){var x=this.getIndex(this.objects,E);return x!==null?this.objects[x]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(E){return E.name})},getLayerIndex:function(E){return E===void 0?this.currentLayerIndex:typeof E=="string"?this.getLayerIndexByName(E):typeof E=="number"&&E<this.layers.length?E:E instanceof p?E.layerIndex:null},getLayerIndexByName:function(E){return this.getIndex(this.layers,E)},getTileAt:function(E,x,y,S){return S=this.getLayer(S),S===null?null:f.GetTileAt(E,x,y,S)},getTileAtWorldXY:function(E,x,y,S,C){return C=this.getLayer(C),C===null?null:f.GetTileAtWorldXY(E,x,y,S,C)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(E){return E.name})},getTilesWithin:function(E,x,y,S,C,I){return I=this.getLayer(I),I===null?null:f.GetTilesWithin(E,x,y,S,C,I)},getTilesWithinShape:function(E,x,y,S){return S=this.getLayer(S),S===null?null:f.GetTilesWithinShape(E,x,y,S)},getTilesWithinWorldXY:function(E,x,y,S,C,I,O){return O=this.getLayer(O),O===null?null:f.GetTilesWithinWorldXY(E,x,y,S,C,I,O)},getTileset:function(E){var x=this.getIndex(this.tilesets,E);return x!==null?this.tilesets[x]:null},getTilesetIndex:function(E){return this.getIndex(this.tilesets,E)},hasTileAt:function(E,x,y){return y=this.getLayer(y),y===null?null:f.HasTileAt(E,x,y)},hasTileAtWorldXY:function(E,x,y,S){return S=this.getLayer(S),S===null?null:f.HasTileAtWorldXY(E,x,y,S)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(E){this.setLayer(E)}},putTileAt:function(E,x,y,S,C){return S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:f.PutTileAt(E,x,y,S,C)},putTileAtWorldXY:function(E,x,y,S,C,I){return S===void 0&&(S=!0),I=this.getLayer(I),I===null?null:f.PutTileAtWorldXY(E,x,y,S,C,I)},putTilesAt:function(E,x,y,S,C){return S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:(f.PutTilesAt(E,x,y,S,C),this)},randomize:function(E,x,y,S,C,I){return I=this.getLayer(I),I===null?null:(f.Randomize(E,x,y,S,C,I),this)},calculateFacesAt:function(E,x,y){return y=this.getLayer(y),y===null?null:(f.CalculateFacesAt(E,x,y),this)},calculateFacesWithin:function(E,x,y,S,C){return C=this.getLayer(C),C===null?null:(f.CalculateFacesWithin(E,x,y,S,C),this)},removeLayer:function(E){var x=this.getLayerIndex(E);if(x!==null){d(this.layers,x);for(var y=x;y<this.layers.length;y++)this.layers[y].tilemapLayer&&this.layers[y].tilemapLayer.layerIndex--;return this.currentLayerIndex===x&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(E){var x=this.getLayerIndex(E);return x!==null?(E=this.layers[x],E.destroy(),d(this.layers,x),this.currentLayerIndex===x&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var E=this.layers,x=0;x<E.length;x++)E[x].tilemapLayer&&E[x].tilemapLayer.destroy(!1);return E.length=0,this.currentLayerIndex=0,this},removeTile:function(E,x,y){x===void 0&&(x=-1),y===void 0&&(y=!0);var S=[];Array.isArray(E)||(E=[E]);for(var C=0;C<E.length;C++){var I=E[C];S.push(this.removeTileAt(I.x,I.y,!0,y,I.tilemapLayer)),x>-1&&this.putTileAt(x,I.x,I.y,y,I.tilemapLayer)}return S},removeTileAt:function(E,x,y,S,C){return y===void 0&&(y=!0),S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:f.RemoveTileAt(E,x,y,S,C)},removeTileAtWorldXY:function(E,x,y,S,C,I){return y===void 0&&(y=!0),S===void 0&&(S=!0),I=this.getLayer(I),I===null?null:f.RemoveTileAtWorldXY(E,x,y,S,C,I)},renderDebug:function(E,x,y){return y=this.getLayer(y),y===null?null:(this.orientation===s.ORTHOGONAL&&f.RenderDebug(E,x,y),this)},renderDebugFull:function(E,x){for(var y=this.layers,S=0;S<y.length;S++)f.RenderDebug(E,x,y[S]);return this},replaceByIndex:function(E,x,y,S,C,I,O){return O=this.getLayer(O),O===null?null:(f.ReplaceByIndex(E,x,y,S,C,I,O),this)},setCollision:function(E,x,y,S,C){return x===void 0&&(x=!0),y===void 0&&(y=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(f.SetCollision(E,x,y,S,C),this)},setCollisionBetween:function(E,x,y,S,C){return y===void 0&&(y=!0),S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:(f.SetCollisionBetween(E,x,y,S,C),this)},setCollisionByProperty:function(E,x,y,S){return x===void 0&&(x=!0),y===void 0&&(y=!0),S=this.getLayer(S),S===null?null:(f.SetCollisionByProperty(E,x,y,S),this)},setCollisionByExclusion:function(E,x,y,S){return x===void 0&&(x=!0),y===void 0&&(y=!0),S=this.getLayer(S),S===null?null:(f.SetCollisionByExclusion(E,x,y,S),this)},setCollisionFromCollisionGroup:function(E,x,y){return E===void 0&&(E=!0),x===void 0&&(x=!0),y=this.getLayer(y),y===null?null:(f.SetCollisionFromCollisionGroup(E,x,y),this)},setTileIndexCallback:function(E,x,y,S){return S=this.getLayer(S),S===null?null:(f.SetTileIndexCallback(E,x,y,S),this)},setTileLocationCallback:function(E,x,y,S,C,I,O){return O=this.getLayer(O),O===null?null:(f.SetTileLocationCallback(E,x,y,S,C,I,O),this)},setLayer:function(E){var x=this.getLayerIndex(E);return x!==null&&(this.currentLayerIndex=x),this},setBaseTileSize:function(E,x){this.tileWidth=E,this.tileHeight=x,this.widthInPixels=this.width*E,this.heightInPixels=this.height*x;for(var y=0;y<this.layers.length;y++){this.layers[y].baseTileWidth=E,this.layers[y].baseTileHeight=x;for(var S=this.layers[y].data,C=this.layers[y].width,I=this.layers[y].height,O=0;O<I;O++)for(var M=0;M<C;M++){var L=S[O][M];L!==null&&L.setSize(void 0,void 0,E,x)}}return this},setLayerTileSize:function(E,x,y){if(y=this.getLayer(y),y===null)return this;y.tileWidth=E,y.tileHeight=x;for(var S=y.data,C=y.width,I=y.height,O=0;O<I;O++)for(var M=0;M<C;M++){var L=S[O][M];L!==null&&L.setSize(E,x)}return this},shuffle:function(E,x,y,S,C){return C=this.getLayer(C),C===null?null:(f.Shuffle(E,x,y,S,C),this)},swapByIndex:function(E,x,y,S,C,I,O){return O=this.getLayer(O),O===null?null:(f.SwapByIndex(E,x,y,S,C,I,O),this)},tileToWorldX:function(E,x,y){return y=this.getLayer(y),y===null?null:this._convert.TileToWorldX(E,x,y)},tileToWorldY:function(E,x,y){return y=this.getLayer(y),y===null?null:this._convert.TileToWorldY(E,x,y)},tileToWorldXY:function(E,x,y,S,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldXY(E,x,y,S,C)},weightedRandomize:function(E,x,y,S,C,I){return I=this.getLayer(I),I===null?null:(f.WeightedRandomize(x,y,S,C,E,I),this)},worldToTileX:function(E,x,y,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileX(E,x,y,S)},worldToTileY:function(E,x,y,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileY(E,x,y,S)},worldToTileXY:function(E,x,y,S,C,I){return I=this.getLayer(I),I===null?null:this._convert.WorldToTileXY(E,x,y,S,C,I)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});c.exports=m},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(11),l=e(15),h=e(251),i=e(1456),s=new o({Extends:l,Mixins:[g.Alpha,g.BlendMode,g.ComputedSize,g.Depth,g.Flip,g.GetBounds,g.Origin,g.Pipeline,g.Transform,g.Visible,g.ScrollFactor,i],initialize:function(d,a,u,f,p,v){l.call(this,d,"TilemapLayer"),this.isTilemap=!0,this.tilemap=a,this.layerIndex=u,this.layer=a.layers[u],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=h.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(f),this.setAlpha(this.layer.alpha),this.setPosition(p,v),this.setOrigin(),this.setSize(a.tileWidth*this.layer.width,a.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(n){var d=[],a=[],u=this.tilemap;Array.isArray(n)||(n=[n]);for(var f=0;f<n.length;f++){var p=n[f];if(typeof p=="string"&&(p=u.getTileset(p)),p){a.push(p);for(var v=p.firstgid,m=0;m<p.total;m++)d[v+m]=p}}this.gidMap=d,this.tileset=a},setRenderOrder:function(n){var d=["right-down","left-down","right-up","left-up"];return typeof n=="string"&&(n=d.indexOf(n)),n>=0&&n<4&&(this._renderOrder=n),this},calculateFacesAt:function(n,d){return h.CalculateFacesAt(n,d,this.layer),this},calculateFacesWithin:function(n,d,a,u){return h.CalculateFacesWithin(n,d,a,u,this.layer),this},createFromTiles:function(n,d,a,u,f){return h.CreateFromTiles(n,d,a,u,f,this.layer)},cull:function(n){return this.cullCallback(this.layer,n,this.culledTiles,this._renderOrder)},copy:function(n,d,a,u,f,p,v){return h.Copy(n,d,a,u,f,p,v,this.layer),this},fill:function(n,d,a,u,f,p){return h.Fill(n,d,a,u,f,p,this.layer),this},filterTiles:function(n,d,a,u,f,p,v){return h.FilterTiles(n,d,a,u,f,p,v,this.layer)},findByIndex:function(n,d,a){return h.FindByIndex(n,d,a,this.layer)},findTile:function(n,d,a,u,f,p,v){return h.FindTile(n,d,a,u,f,p,v,this.layer)},forEachTile:function(n,d,a,u,f,p,v){return h.ForEachTile(n,d,a,u,f,p,v,this.layer),this},getTileAt:function(n,d,a){return h.GetTileAt(n,d,a,this.layer)},getTileAtWorldXY:function(n,d,a,u){return h.GetTileAtWorldXY(n,d,a,u,this.layer)},getTilesWithin:function(n,d,a,u,f){return h.GetTilesWithin(n,d,a,u,f,this.layer)},getTilesWithinShape:function(n,d,a){return h.GetTilesWithinShape(n,d,a,this.layer)},getTilesWithinWorldXY:function(n,d,a,u,f,p){return h.GetTilesWithinWorldXY(n,d,a,u,f,p,this.layer)},hasTileAt:function(n,d){return h.HasTileAt(n,d,this.layer)},hasTileAtWorldXY:function(n,d,a){return h.HasTileAtWorldXY(n,d,a,this.layer)},putTileAt:function(n,d,a,u){return h.PutTileAt(n,d,a,u,this.layer)},putTileAtWorldXY:function(n,d,a,u,f){return h.PutTileAtWorldXY(n,d,a,u,f,this.layer)},putTilesAt:function(n,d,a,u){return h.PutTilesAt(n,d,a,u,this.layer),this},randomize:function(n,d,a,u,f){return h.Randomize(n,d,a,u,f,this.layer),this},removeTileAt:function(n,d,a,u){return h.RemoveTileAt(n,d,a,u,this.layer)},removeTileAtWorldXY:function(n,d,a,u,f){return h.RemoveTileAtWorldXY(n,d,a,u,f,this.layer)},renderDebug:function(n,d){return h.RenderDebug(n,d,this.layer),this},replaceByIndex:function(n,d,a,u,f,p){return h.ReplaceByIndex(n,d,a,u,f,p,this.layer),this},setSkipCull:function(n){return n===void 0&&(n=!0),this.skipCull=n,this},setCullPadding:function(n,d){return n===void 0&&(n=1),d===void 0&&(d=1),this.cullPaddingX=n,this.cullPaddingY=d,this},setCollision:function(n,d,a,u){return h.SetCollision(n,d,a,this.layer,u),this},setCollisionBetween:function(n,d,a,u){return h.SetCollisionBetween(n,d,a,u,this.layer),this},setCollisionByProperty:function(n,d,a){return h.SetCollisionByProperty(n,d,a,this.layer),this},setCollisionByExclusion:function(n,d,a){return h.SetCollisionByExclusion(n,d,a,this.layer),this},setCollisionFromCollisionGroup:function(n,d){return h.SetCollisionFromCollisionGroup(n,d,this.layer),this},setTileIndexCallback:function(n,d,a){return h.SetTileIndexCallback(n,d,a,this.layer),this},setTileLocationCallback:function(n,d,a,u,f,p){return h.SetTileLocationCallback(n,d,a,u,f,p,this.layer),this},shuffle:function(n,d,a,u){return h.Shuffle(n,d,a,u,this.layer),this},swapByIndex:function(n,d,a,u,f,p){return h.SwapByIndex(n,d,a,u,f,p,this.layer),this},tileToWorldX:function(n,d){return this.tilemap.tileToWorldX(n,d,this)},tileToWorldY:function(n,d){return this.tilemap.tileToWorldY(n,d,this)},tileToWorldXY:function(n,d,a,u){return this.tilemap.tileToWorldXY(n,d,a,u,this)},weightedRandomize:function(n,d,a,u,f){return h.WeightedRandomize(d,a,u,f,n,this.layer),this},worldToTileX:function(n,d,a){return this.tilemap.worldToTileX(n,d,a,this)},worldToTileY:function(n,d,a){return this.tilemap.worldToTileY(n,d,a,this)},worldToTileXY:function(n,d,a,u,f){return this.tilemap.worldToTileXY(n,d,a,u,f,this)},destroy:function(n){n===void 0&&(n=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),n&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],l.prototype.destroy.call(this))}});c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(2),l=new o({initialize:function(i){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(i)},reset:function(h){return this.delay=g(h,"delay",0),this.repeat=g(h,"repeat",0),this.loop=g(h,"loop",!1),this.callback=g(h,"callback",void 0),this.callbackScope=g(h,"callbackScope",this.callback),this.args=g(h,"args",[]),this.timeScale=g(h,"timeScale",1),this.startAt=g(h,"startAt",0),this.paused=g(h,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var h=this.delay+this.delay*this.repeat,i=this.elapsed+this.delay*(this.repeat-this.repeatCount);return i/h}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(h){h===void 0&&(h=!1),this.elapsed=this.delay,this.hasDispatched=!h,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1465),g=function(l){var h,i=[];if(l.hasOwnProperty("props"))for(h in l.props)h.substr(0,1)!=="_"&&i.push({key:h,value:l.props[h]});else for(h in l)o.indexOf(h)===-1&&h.substr(0,1)!=="_"&&i.push({key:h,value:l[h]});return i};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(6),g=function(l){var h=o(l,"tweens",null);return h===null?[]:(typeof h=="function"&&(h=h.call()),Array.isArray(h)||(h=[h]),h)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(265),g=e(13),l=e(99),h=e(80),i=e(162),s=e(6),n=e(264),d=e(266),a=e(268),u=function(f,p,v){v===void 0&&(v=o);var m=s(p,"from",0),E=s(p,"to",1),x=[{value:m}],y=i(p,"delay",v.delay),S=i(p,"duration",v.duration),C=s(p,"easeParams",v.easeParams),I=h(s(p,"ease",v.ease),C),O=i(p,"hold",v.hold),M=i(p,"repeat",v.repeat),L=i(p,"repeatDelay",v.repeatDelay),P=l(p,"yoyo",v.yoyo),b=[],B=n("value",E),U=a(x[0],0,"value",B.getEnd,B.getStart,B.getActive,I,y,S,P,O,M,L,!1,!1);U.start=m,U.current=m,U.to=E,b.push(U);var H=new d(f,b,x);H.offset=g(p,"offset",null),H.completeDelay=g(p,"completeDelay",0),H.loop=Math.round(g(p,"loop",0)),H.loopDelay=Math.round(g(p,"loopDelay",0)),H.paused=l(p,"paused",!1),H.useFrames=l(p,"useFrames",!1);for(var Y=s(p,"callbackScope",H),j=[H,null],_=d.TYPES,w=0;w<_.length;w++){var D=_[w],N=s(p,D,!1);if(N){var G=s(p,D+"Scope",Y),k=s(p,D+"Params",[]);H.setCallback(D,N,j.concat(k),G)}}return H};c.exports=u},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(80),g=e(6),l=e(14),h=function(i,s){s===void 0&&(s={});var n,d=g(s,"start",0),a=g(s,"ease",null),u=g(s,"grid",null),f=g(s,"from",0),p=f==="first",v=f==="center",m=f==="last",E=typeof f=="number",x=Array.isArray(i),y=parseFloat(x?i[0]:i),S=x?parseFloat(i[1]):0,C=Math.max(y,S);if(x&&(d+=y),u){var I=u[0],O=u[1],M=0,L=0,P=0,b=0,B=[];m?(M=I-1,L=O-1):E?(M=f%I,L=Math.floor(f/I)):v&&(M=(I-1)/2,L=(O-1)/2);for(var U=l.MIN_SAFE_INTEGER,H=0;H<O;H++){B[H]=[];for(var Y=0;Y<I;Y++){P=M-Y,b=L-H;var j=Math.sqrt(P*P+b*b);j>U&&(U=j),B[H][Y]=j}}}var _=a?o(a):null;return u?n=function(w,D,N,G){var k=0,V=G%I,X=Math.floor(G/I);V>=0&&V<I&&X>=0&&X<O&&(k=B[X][V]);var K;if(x){var tt=S-y;_?K=k/U*tt*_(k/U):K=k/U*tt}else _?K=k*y*_(k/U):K=k*y;return K+d}:n=function(w,D,N,G,k){k--;var V;p?V=G:v?V=Math.abs(k/2-G):m?V=k-G:E&&(V=Math.abs(f-G));var X;if(x){var K;v?K=(S-y)/k*(V*2):K=(S-y)/k*V,_?X=K*_(V/k):X=K}else _?X=k*C*_(V/k):X=V*y;return X+d},n};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(77),g=e(265),l=e(13),h=e(99),i=e(80),s=e(162),n=e(263),d=e(584),a=e(6),u=e(588),f=e(163),p=function(v,m){var E=new u(v);E.completeDelay=l(m,"completeDelay",0),E.loop=Math.round(l(m,"loop",0)),E.loopDelay=Math.round(l(m,"loopDelay",0)),E.paused=h(m,"paused",!1),E.useFrames=h(m,"useFrames",!1);var x=a(m,"callbackScope",E),y=[E],S=a(m,"onStart",!1);if(S){var C=a(m,"onStartScope",x),I=a(m,"onStartParams",[]);E.setCallback("onStart",S,y.concat(I),C)}var O=a(m,"onUpdate",!1);if(O){var M=a(m,"onUpdateScope",x),L=a(m,"onUpdateParams",[]);E.setCallback("onUpdate",O,y.concat(L),M)}var P=a(m,"onLoop",!1);if(P){var b=a(m,"onLoopScope",x),B=a(m,"onLoopParams",[]);E.setCallback("onLoop",P,y.concat(B),b)}var U=a(m,"onYoyo",!1);if(U){var H=a(m,"onYoyoScope",x),Y=a(m,"onYoyoParams",[]);E.setCallback("onYoyo",U,y.concat(null,Y),H)}var j=a(m,"onComplete",!1);if(j){var _=a(m,"onCompleteScope",x),w=a(m,"onCompleteParams",[]);E.setCallback("onComplete",j,y.concat(w),_)}var D=d(m);if(D.length===0)return E.paused=!0,E;var N=o(g);N.targets=n(m);var G=l(m,"totalDuration",0);G>0?N.duration=Math.floor(G/D.length):N.duration=s(m,"duration",N.duration),N.delay=s(m,"delay",N.delay),N.easeParams=a(m,"easeParams",N.easeParams),N.ease=i(a(m,"ease",N.ease),N.easeParams),N.hold=s(m,"hold",N.hold),N.repeat=s(m,"repeat",N.repeat),N.repeatDelay=s(m,"repeatDelay",N.repeatDelay),N.yoyo=h(m,"yoyo",N.yoyo),N.flipX=h(m,"flipX",N.flipX),N.flipY=h(m,"flipY",N.flipY);for(var k=0;k<D.length;k++)E.queue(f(E,D[k],N));return E};c.exports=p},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(9),l=e(267),h=e(163),i=e(100),s=new o({Extends:g,initialize:function(d){g.call(this),this.manager=d,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=i.PENDING_ADD,this._pausedState=i.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(n,d){this.emit(n,this),d&&d.func.apply(d.scope,d.params)},setTimeScale:function(n){return this.timeScale=n,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===i.ACTIVE},add:function(n){return this.queue(h(this,n))},queue:function(n){return this.isPlaying()||(n.parent=this,n.parentIsTimeline=!0,this.data.push(n),this.totalData=this.data.length),this},hasOffset:function(n){return n.offset!==null},isOffsetAbsolute:function(n){return typeof n=="number"},isOffsetRelative:function(n){var d=typeof n;if(d==="string"){var a=n[0];if(a==="-"||a==="+")return!0}return!1},getRelativeOffset:function(n,d){var a=n[0],u=parseFloat(n.substr(2)),f=d;switch(a){case"+":f+=u;break;case"-":f-=u;break}return Math.max(0,f)},calcDuration:function(){for(var n=0,d=0,a=0,u=0;u<this.totalData;u++){var f=this.data[u];f.init(),this.hasOffset(f)?this.isOffsetAbsolute(f.offset)?(f.calculatedOffset=f.offset,f.offset===0&&(a=0)):this.isOffsetRelative(f.offset)&&(f.calculatedOffset=this.getRelativeOffset(f.offset,n)):f.calculatedOffset=a,n=f.totalDuration+f.calculatedOffset,d+=f.totalDuration,a+=f.totalDuration}this.duration=d,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=i.PAUSED,!1):!0},resetTweens:function(n){for(var d=0;d<this.totalData;d++){var a=this.data[d];a.play(n)}},setCallback:function(n,d,a,u){return s.TYPES.indexOf(n)!==-1&&(this.callbacks[n]={func:d,scope:u,params:a}),this},makeActive:function(n){return this.manager.makeActive(n)},play:function(){if(this.state!==i.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=i.ACTIVE;this.dispatchTimelineEvent(l.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=i.LOOP_DELAY):(this.state=i.ACTIVE,this.dispatchTimelineEvent(l.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=i.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=i.PENDING_REMOVE,this.dispatchTimelineEvent(l.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(n,d){if(this.state!==i.PAUSED){switch(this.useFrames&&(d=1*this.manager.timeScale),d*=this.timeScale,this.elapsed+=d,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=d,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case i.ACTIVE:for(var a=this.totalData,u=0;u<this.totalData;u++){var f=this.data[u];f.update(n,d)&&a--}this.dispatchTimelineEvent(l.TIMELINE_UPDATE,this.callbacks.onUpdate),a===0&&this.nextState();break;case i.LOOP_DELAY:this.countdown-=d,this.countdown<=0&&(this.state=i.ACTIVE,this.dispatchTimelineEvent(l.TIMELINE_LOOP,this.callbacks.onLoop));break;case i.COMPLETE_DELAY:this.countdown-=d,this.countdown<=0&&(this.state=i.PENDING_REMOVE,this.dispatchTimelineEvent(l.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===i.PENDING_REMOVE}},stop:function(){this.state=i.PENDING_REMOVE},pause:function(){if(this.state!==i.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=i.PAUSED,this.emit(l.TIMELINE_PAUSE,this),this},resume:function(){return this.state===i.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(l.TIMELINE_RESUME,this)),this},hasTarget:function(n){for(var d=0;d<this.data.length;d++)if(this.data[d].hasTarget(n))return!0;return!1},destroy:function(){for(var n=0;n<this.data.length;n++)this.data[n].stop()}});s.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],c.exports=s},function(c,R,e){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(86),g=e(41),l=e(32),h=e(2),i=e(64),s={parseBody:function(n,d,a,u){u===void 0&&(u={});for(var f=h(a,"fixtures",[]),p=[],v=0;v<f.length;v++)for(var m=this.parseFixture(f[v]),E=0;E<m.length;E++)p.push(m[E]);var x=l.clone(a,!0);l.extend(x,u,!0),delete x.fixtures,delete x.type;var y=g.create(x);return g.setParts(y,p),g.setPosition(y,{x:n,y:d}),y},parseFixture:function(n){var d=l.extend({},!1,n);delete d.circle,delete d.vertices;var a;if(n.circle){var u=h(n.circle,"x"),f=h(n.circle,"y"),p=h(n.circle,"radius");a=[o.circle(u,f,p,d)]}else n.vertices&&(a=this.parseVertices(n.vertices,d));return a},parseVertices:function(n,d){d===void 0&&(d={});for(var a=[],u=0;u<n.length;u++)i.clockwiseSort(n[u]),a.push(g.create(l.extend({position:i.centre(n[u]),vertices:n[u]},d)));return o.flagCoincidentParts(a)}};c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(86),g=e(41),l={parseBody:function(h,i,s,n){n===void 0&&(n={});var d,a=s.vertices;if(a.length===1)n.vertices=a[0],d=g.create(n),o.flagCoincidentParts(d.parts);else{for(var u=[],f=0;f<a.length;f++){var p=g.create({vertices:a[f]});u.push(p)}o.flagCoincidentParts(u),n.parts=u,d=g.create(n)}return d.label=s.label,g.setPosition(d,{x:h,y:i}),d}};c.exports=l},function(c,R,e){var o={};c.exports=o;var g=e(118),l=e(128),h=e(32),i=e(41),s=e(86);(function(){o.stack=function(n,d,a,u,f,p,v){for(var m=g.create({label:"Stack"}),E=n,x=d,y,S=0,C=0;C<u;C++){for(var I=0,O=0;O<a;O++){var M=v(E,x,O,C,y,S);if(M){var L=M.bounds.max.y-M.bounds.min.y,P=M.bounds.max.x-M.bounds.min.x;L>I&&(I=L),i.translate(M,{x:P*.5,y:L*.5}),E=M.bounds.max.x+f,g.addBody(m,M),y=M,S+=1}else E+=f}x+=I+p,E=n}return m},o.chain=function(n,d,a,u,f,p){for(var v=n.bodies,m=1;m<v.length;m++){var E=v[m-1],x=v[m],y=E.bounds.max.y-E.bounds.min.y,S=E.bounds.max.x-E.bounds.min.x,C=x.bounds.max.y-x.bounds.min.y,I=x.bounds.max.x-x.bounds.min.x,O={bodyA:E,pointA:{x:S*d,y:y*a},bodyB:x,pointB:{x:I*u,y:C*f}},M=h.extend(O,p);g.addConstraint(n,l.create(M))}return n.label+=" Chain",n},o.mesh=function(n,d,a,u,f){var p=n.bodies,v,m,E,x,y;for(v=0;v<a;v++){for(m=1;m<d;m++)E=p[m-1+v*d],x=p[m+v*d],g.addConstraint(n,l.create(h.extend({bodyA:E,bodyB:x},f)));if(v>0)for(m=0;m<d;m++)E=p[m+(v-1)*d],x=p[m+v*d],g.addConstraint(n,l.create(h.extend({bodyA:E,bodyB:x},f))),u&&m>0&&(y=p[m-1+(v-1)*d],g.addConstraint(n,l.create(h.extend({bodyA:y,bodyB:x},f)))),u&&m<d-1&&(y=p[m+1+(v-1)*d],g.addConstraint(n,l.create(h.extend({bodyA:y,bodyB:x},f))))}return n.label+=" Mesh",n},o.pyramid=function(n,d,a,u,f,p,v){return o.stack(n,d,a,u,f,p,function(m,E,x,y,S,C){var I=Math.min(u,Math.ceil(a/2)),O=S?S.bounds.max.x-S.bounds.min.x:0;if(!(y>I)){y=I-y;var M=y,L=a-1-y;if(!(x<M||x>L)){C===1&&i.translate(S,{x:(x+(a%2===1?1:-1))*O,y:0});var P=S?x*O:0;return v(n+P+x*f,E,x,y,S,C)}}})},o.newtonsCradle=function(n,d,a,u,f){for(var p=g.create({label:"Newtons Cradle"}),v=0;v<a;v++){var m=1.9,E=s.circle(n+v*(u*m),d+f,u,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),x=l.create({pointA:{x:n+v*(u*m),y:d},bodyB:E});g.addBody(p,E),g.addConstraint(p,x)}return p},o.car=function(n,d,a,u,f){var p=i.nextGroup(!0),v=20,m=-a*.5+v,E=a*.5-v,x=0,y=g.create({label:"Car"}),S=s.rectangle(n,d,a,u,{collisionFilter:{group:p},chamfer:{radius:u*.5},density:2e-4}),C=s.circle(n+m,d+x,f,{collisionFilter:{group:p},friction:.8}),I=s.circle(n+E,d+x,f,{collisionFilter:{group:p},friction:.8}),O=l.create({bodyB:S,pointB:{x:m,y:x},bodyA:C,stiffness:1,length:0}),M=l.create({bodyB:S,pointB:{x:E,y:x},bodyA:I,stiffness:1,length:0});return g.addBody(y,S),g.addBody(y,C),g.addBody(y,I),g.addConstraint(y,O),g.addConstraint(y,M),y},o.softBody=function(n,d,a,u,f,p,v,m,E,x){E=h.extend({inertia:1/0},E),x=h.extend({stiffness:.2,render:{type:"line",anchors:!1}},x);var y=o.stack(n,d,a,u,f,p,function(S,C){return s.circle(S,C,m,E)});return o.mesh(y,a,u,v,x),y.label="Soft Body",y}})()},function(c,R,e){var o={};c.exports=o,e(84);var g=e(32);(function(){o.pathToVertices=function(l,h){typeof window!="undefined"&&!("SVGPathSeg"in window)&&g.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,s,n,d,a,u,f,p,v,m,E=[],x,y,S=0,C=0,I=0;h=h||15;var O=function(L,P,b){var B=b%2===1&&b>1;if(!v||L!=v.x||P!=v.y){v&&B?(x=v.x,y=v.y):(x=0,y=0);var U={x:x+L,y:y+P};(B||!v)&&(v=U),E.push(U),C=x+L,I=y+P}},M=function(L){var P=L.pathSegTypeAsLetter.toUpperCase();if(P!=="Z"){switch(P){case"M":case"L":case"T":case"C":case"S":case"Q":C=L.x,I=L.y;break;case"H":C=L.x;break;case"V":I=L.y;break}O(C,I,L.pathSegType)}};for(o._svgPathToAbsolute(l),n=l.getTotalLength(),u=[],i=0;i<l.pathSegList.numberOfItems;i+=1)u.push(l.pathSegList.getItem(i));for(f=u.concat();S<n;){if(m=l.getPathSegAtLength(S),a=u[m],a!=p){for(;f.length&&f[0]!=a;)M(f.shift());p=a}switch(a.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=l.getPointAtLength(S),O(d.x,d.y,0);break}S+=h}for(i=0,s=f.length;i<s;++i)M(f[i]);return E},o._svgPathToAbsolute=function(l){for(var h,i,s,n,d,a,u=l.pathSegList,f=0,p=0,v=u.numberOfItems,m=0;m<v;++m){var E=u.getItem(m),x=E.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(x))"x"in E&&(f=E.x),"y"in E&&(p=E.y);else switch("x1"in E&&(s=f+E.x1),"x2"in E&&(d=f+E.x2),"y1"in E&&(n=p+E.y1),"y2"in E&&(a=p+E.y2),"x"in E&&(f+=E.x),"y"in E&&(p+=E.y),x){case"m":u.replaceItem(l.createSVGPathSegMovetoAbs(f,p),m);break;case"l":u.replaceItem(l.createSVGPathSegLinetoAbs(f,p),m);break;case"h":u.replaceItem(l.createSVGPathSegLinetoHorizontalAbs(f),m);break;case"v":u.replaceItem(l.createSVGPathSegLinetoVerticalAbs(p),m);break;case"c":u.replaceItem(l.createSVGPathSegCurvetoCubicAbs(f,p,s,n,d,a),m);break;case"s":u.replaceItem(l.createSVGPathSegCurvetoCubicSmoothAbs(f,p,d,a),m);break;case"q":u.replaceItem(l.createSVGPathSegCurvetoQuadraticAbs(f,p,s,n),m);break;case"t":u.replaceItem(l.createSVGPathSegCurvetoQuadraticSmoothAbs(f,p),m);break;case"a":u.replaceItem(l.createSVGPathSegArcAbs(f,p,E.r1,E.r2,E.angle,E.largeArcFlag,E.sweepFlag),m);break;case"z":case"Z":f=h,p=i;break}(x=="M"||x=="m")&&(h=f,i=p)}}})()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(86),g=e(41),l=e(0),h=e(249),i=e(9),s=e(2),n=e(126),d=e(64),a=new l({Extends:i,Mixins:[h.Bounce,h.Collision,h.Friction,h.Gravity,h.Mass,h.Sensor,h.Sleep,h.Static],initialize:function(f,p,v){i.call(this),this.tile=p,this.world=f,p.physics.matterBody&&p.physics.matterBody.destroy(),p.physics.matterBody=this;var m=s(v,"body",null),E=s(v,"addToWorld",!0);if(m)this.setBody(m,E);else{var x=p.getCollisionGroup(),y=s(x,"objects",[]);y.length>0?this.setFromTileCollision(v):this.setFromTileRectangle(v)}},setFromTileRectangle:function(u){u===void 0&&(u={}),n(u,"isStatic")||(u.isStatic=!0),n(u,"addToWorld")||(u.addToWorld=!0);var f=this.tile.getBounds(),p=f.x+f.width/2,v=f.y+f.height/2,m=o.rectangle(p,v,f.width,f.height,u);return this.setBody(m,u.addToWorld),this},setFromTileCollision:function(u){u===void 0&&(u={}),n(u,"isStatic")||(u.isStatic=!0),n(u,"addToWorld")||(u.addToWorld=!0);for(var f=this.tile.tilemapLayer.scaleX,p=this.tile.tilemapLayer.scaleY,v=this.tile.getLeft(),m=this.tile.getTop(),E=this.tile.getCollisionGroup(),x=s(E,"objects",[]),y=[],S=0;S<x.length;S++){var C=x[S],I=v+C.x*f,O=m+C.y*p,M=C.width*f,L=C.height*p,P=null;if(C.rectangle)P=o.rectangle(I+M/2,O+L/2,M,L,u);else if(C.ellipse)P=o.circle(I+M/2,O+L/2,M/2,u);else if(C.polygon||C.polyline){var b=C.polygon?C.polygon:C.polyline,B=b.map(function(Y){return{x:Y.x*f,y:Y.y*p}}),U=d.create(B),H=d.centre(U);I+=H.x,O+=H.y,P=o.fromVertices(I,O,U,u)}P&&y.push(P)}return y.length===1?this.setBody(y[0],u.addToWorld):y.length>1&&(u.parts=y,this.setBody(g.create(u),u.addToWorld)),this},setBody:function(u,f){return f===void 0&&(f=!0),this.body&&this.removeBody(),this.body=u,this.body.gameObject=this,f&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});c.exports=a},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1399);o.Body=e(41),o.Composite=e(118),o.World=e(596),o.Detector=e(273),o.Grid=e(597),o.Pairs=e(598),o.Pair=e(250),o.Query=e(1400),o.Resolver=e(599),o.SAT=e(274),o.Constraint=e(128),o.Common=e(32),o.Engine=e(1401),o.Events=e(166),o.Sleeping=e(165),o.Plugin=e(595),o.Bodies=e(86),o.Composites=e(591),o.Axes=e(271),o.Bounds=e(84),o.Svg=e(592),o.Vector=e(83),o.Vertices=e(64),o.World.add=o.Composite.add,o.World.remove=o.Composite.remove,o.World.addComposite=o.Composite.addComposite,o.World.addBody=o.Composite.addBody,o.World.addConstraint=o.Composite.addConstraint,o.World.clear=o.Composite.clear,c.exports=o},function(c,R,e){var o={};c.exports=o;var g=e(32);(function(){o._registry={},o.register=function(l){if(o.isPlugin(l)||g.warn("Plugin.register:",o.toString(l),"does not implement all required fields."),l.name in o._registry){var h=o._registry[l.name],i=o.versionParse(l.version).number,s=o.versionParse(h.version).number;i>s?(g.warn("Plugin.register:",o.toString(h),"was upgraded to",o.toString(l)),o._registry[l.name]=l):i<s?g.warn("Plugin.register:",o.toString(h),"can not be downgraded to",o.toString(l)):l!==h&&g.warn("Plugin.register:",o.toString(l),"is already registered to different plugin object")}else o._registry[l.name]=l;return l},o.resolve=function(l){return o._registry[o.dependencyParse(l).name]},o.toString=function(l){return typeof l=="string"?l:(l.name||"anonymous")+"@"+(l.version||l.range||"0.0.0")},o.isPlugin=function(l){return l&&l.name&&l.version&&l.install},o.isUsed=function(l,h){return l.used.indexOf(h)>-1},o.isFor=function(l,h){var i=l.for&&o.dependencyParse(l.for);return!l.for||h.name===i.name&&o.versionSatisfies(h.version,i.range)},o.use=function(l,h){if(l.uses=(l.uses||[]).concat(h||[]),l.uses.length===0){g.warn("Plugin.use:",o.toString(l),"does not specify any dependencies to install.");return}for(var i=o.dependencies(l),s=g.topologicalSort(i),n=[],d=0;d<s.length;d+=1)if(s[d]!==l.name){var a=o.resolve(s[d]);if(!a){n.push("\u274C "+s[d]);continue}o.isUsed(l,a.name)||(o.isFor(a,l)||(g.warn("Plugin.use:",o.toString(a),"is for",a.for,"but installed on",o.toString(l)+"."),a._warned=!0),a.install?a.install(l):(g.warn("Plugin.use:",o.toString(a),"does not specify an install function."),a._warned=!0),a._warned?(n.push("\u{1F536} "+o.toString(a)),delete a._warned):n.push("\u2705 "+o.toString(a)),l.used.push(a.name))}n.length>0&&!a.silent&&g.info(n.join("  "))},o.dependencies=function(l,h){var i=o.dependencyParse(l),s=i.name;if(h=h||{},!(s in h)){l=o.resolve(l)||l,h[s]=g.map(l.uses||[],function(d){o.isPlugin(d)&&o.register(d);var a=o.dependencyParse(d),u=o.resolve(d);return u&&!o.versionSatisfies(u.version,a.range)?(g.warn("Plugin.dependencies:",o.toString(u),"does not satisfy",o.toString(a),"used by",o.toString(i)+"."),u._warned=!0,l._warned=!0):u||(g.warn("Plugin.dependencies:",o.toString(d),"used by",o.toString(i),"could not be resolved."),l._warned=!0),a.name});for(var n=0;n<h[s].length;n+=1)o.dependencies(h[s][n],h);return h}},o.dependencyParse=function(l){if(g.isString(l)){var h=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return h.test(l)||g.warn("Plugin.dependencyParse:",l,"is not a valid dependency string."),{name:l.split("@")[0],range:l.split("@")[1]||"*"}}return{name:l.name,range:l.range||l.version}},o.versionParse=function(l){var h=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;h.test(l)||g.warn("Plugin.versionParse:",l,"is not a valid version or range.");var i=l.split("-");l=i[0];var s=isNaN(Number(l[0])),n=s?l.substr(1):l,d=g.map(n.split("."),function(a){return Number(a)});return{isRange:s,version:n,range:l,operator:s?l[0]:"",parts:d,prerelease:i[1],number:d[0]*1e8+d[1]*1e4+d[2]}},o.versionSatisfies=function(l,h){h=h||"*";var i=o.versionParse(h),s=i.parts,n=o.versionParse(l),d=n.parts;if(i.isRange){if(i.operator==="*"||l==="*")return!0;if(i.operator==="~")return d[0]===s[0]&&d[1]===s[1]&&d[2]>=s[2];if(i.operator==="^")return s[0]>0?d[0]===s[0]&&n.number>=i.number:s[1]>0?d[1]===s[1]&&d[2]>=s[2]:d[2]===s[2]}return l===h||l==="*"}})()},function(c,R,e){var o={};c.exports=o;var g=e(118);e(128);var l=e(32);(function(){o.create=function(h){var i=g.create(),s={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return l.extend(i,s,h)}})()},function(c,R,e){var o={};c.exports=o;var g=e(250),l=e(273),h=e(32);(function(){o.create=function(i){var s={controller:o,detector:l.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return h.extend(s,i)},o.update=function(i,s,n,d){var a,u,f,p=n.world,v=i.buckets,m,E,x=!1,y=n.metrics;for(y.broadphaseTests=0,a=0;a<s.length;a++){var S=s[a];if(!(S.isSleeping&&!d)&&!(S.bounds.max.x<p.bounds.min.x||S.bounds.min.x>p.bounds.max.x||S.bounds.max.y<p.bounds.min.y||S.bounds.min.y>p.bounds.max.y)){var C=o._getRegion(i,S);if(!S.region||C.id!==S.region.id||d){y.broadphaseTests+=1,(!S.region||d)&&(S.region=C);var I=o._regionUnion(C,S.region);for(u=I.startCol;u<=I.endCol;u++)for(f=I.startRow;f<=I.endRow;f++){E=o._getBucketId(u,f),m=v[E];var O=u>=C.startCol&&u<=C.endCol&&f>=C.startRow&&f<=C.endRow,M=u>=S.region.startCol&&u<=S.region.endCol&&f>=S.region.startRow&&f<=S.region.endRow;!O&&M&&M&&m&&o._bucketRemoveBody(i,m,S),(S.region===C||O&&!M||d)&&(m||(m=o._createBucket(v,E)),o._bucketAddBody(i,m,S))}S.region=C,x=!0}}}x&&(i.pairsList=o._createActivePairsList(i))},o.clear=function(i){i.buckets={},i.pairs={},i.pairsList=[]},o._regionUnion=function(i,s){var n=Math.min(i.startCol,s.startCol),d=Math.max(i.endCol,s.endCol),a=Math.min(i.startRow,s.startRow),u=Math.max(i.endRow,s.endRow);return o._createRegion(n,d,a,u)},o._getRegion=function(i,s){var n=s.bounds,d=Math.floor(n.min.x/i.bucketWidth),a=Math.floor(n.max.x/i.bucketWidth),u=Math.floor(n.min.y/i.bucketHeight),f=Math.floor(n.max.y/i.bucketHeight);return o._createRegion(d,a,u,f)},o._createRegion=function(i,s,n,d){return{id:i+","+s+","+n+","+d,startCol:i,endCol:s,startRow:n,endRow:d}},o._getBucketId=function(i,s){return"C"+i+"R"+s},o._createBucket=function(i,s){var n=i[s]=[];return n},o._bucketAddBody=function(i,s,n){for(var d=0;d<s.length;d++){var a=s[d];if(!(n.id===a.id||n.isStatic&&a.isStatic)){var u=g.id(n,a),f=i.pairs[u];f?f[2]+=1:i.pairs[u]=[n,a,1]}}s.push(n)},o._bucketRemoveBody=function(i,s,n){s.splice(s.indexOf(n),1);for(var d=0;d<s.length;d++){var a=s[d],u=g.id(n,a),f=i.pairs[u];f&&(f[2]-=1)}},o._createActivePairsList=function(i){var s,n,d=[];s=h.keys(i.pairs);for(var a=0;a<s.length;a++)n=i.pairs[s[a]],n[2]>0?d.push(n):delete i.pairs[s[a]];return d}})()},function(c,R,e){var o={};c.exports=o;var g=e(250),l=e(32);(function(){o._pairMaxIdleLife=1e3,o.create=function(h){return l.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},h)},o.update=function(h,i,s){var n=h.list,d=h.table,a=h.collisionStart,u=h.collisionEnd,f=h.collisionActive,p,v,m,E;for(a.length=0,u.length=0,f.length=0,E=0;E<n.length;E++)n[E].confirmedActive=!1;for(E=0;E<i.length;E++)p=i[E],p.collided&&(v=g.id(p.bodyA,p.bodyB),m=d[v],m?(m.isActive?f.push(m):a.push(m),g.update(m,p,s),m.confirmedActive=!0):(m=g.create(p,s),d[v]=m,a.push(m),n.push(m)));for(E=0;E<n.length;E++)m=n[E],m.isActive&&!m.confirmedActive&&(g.setActive(m,!1,s),u.push(m))},o.removeOld=function(h,i){var s=h.list,n=h.table,d=[],a,u,f,p;for(p=0;p<s.length;p++){if(a=s[p],u=a.collision,u.bodyA.isSleeping||u.bodyB.isSleeping){a.timeUpdated=i;continue}i-a.timeUpdated>o._pairMaxIdleLife&&d.push(p)}for(p=0;p<d.length;p++)f=d[p]-p,a=s[f],delete n[a.id],s.splice(f,1)},o.clear=function(h){return h.table={},h.list.length=0,h.collisionStart.length=0,h.collisionActive.length=0,h.collisionEnd.length=0,h}})()},function(c,R,e){var o={};c.exports=o;var g=e(64),l=e(83),h=e(32),i=e(84);(function(){o._restingThresh=4,o._restingThreshTangent=6,o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o.preSolvePosition=function(s){var n,d,a;for(n=0;n<s.length;n++)d=s[n],d.isActive&&(a=d.activeContacts.length,d.collision.parentA.totalContacts+=a,d.collision.parentB.totalContacts+=a)},o.solvePosition=function(s,n,d){var a,u,f,p,v,m,E,x,y,S,C,I,O,M,L,P,b=d*o._positionDampen;for(a=0;a<n.length;a++){var B=n[a];B.previousPositionImpulse.x=B.positionImpulse.x,B.previousPositionImpulse.y=B.positionImpulse.y}for(a=0;a<s.length;a++)p=s[a],!(!p.isActive||p.isSensor)&&(v=p.collision,m=v.parentA,E=v.parentB,x=v.normal,C=m.previousPositionImpulse,I=E.previousPositionImpulse,S=v.penetration,M=I.x-C.x+S.x,L=I.y-C.y+S.y,u=x.x,f=x.y,y=u*M+f*L,p.separation=y,P=(y-p.slop)*b,(m.isStatic||E.isStatic)&&(P*=2),m.isStatic||m.isSleeping||(O=P/m.totalContacts,m.positionImpulse.x+=u*O,m.positionImpulse.y+=f*O),E.isStatic||E.isSleeping||(O=P/E.totalContacts,E.positionImpulse.x-=u*O,E.positionImpulse.y-=f*O))},o.postSolvePosition=function(s){for(var n=0;n<s.length;n++){var d=s[n];if(d.totalContacts=0,d.positionImpulse.x!==0||d.positionImpulse.y!==0){for(var a=0;a<d.parts.length;a++){var u=d.parts[a];g.translate(u.vertices,d.positionImpulse),i.update(u.bounds,u.vertices,d.velocity),u.position.x+=d.positionImpulse.x,u.position.y+=d.positionImpulse.y}d.positionPrev.x+=d.positionImpulse.x,d.positionPrev.y+=d.positionImpulse.y,l.dot(d.positionImpulse,d.velocity)<0?(d.positionImpulse.x=0,d.positionImpulse.y=0):(d.positionImpulse.x*=o._positionWarming,d.positionImpulse.y*=o._positionWarming)}}},o.preSolveVelocity=function(s){var n,d,a,u,f,p,v,m,E,x,y,S,C,I,O=l._temp[0],M=l._temp[1];for(n=0;n<s.length;n++)if(a=s[n],!(!a.isActive||a.isSensor))for(u=a.activeContacts,f=a.collision,p=f.parentA,v=f.parentB,m=f.normal,E=f.tangent,d=0;d<u.length;d++)x=u[d],y=x.vertex,S=x.normalImpulse,C=x.tangentImpulse,(S!==0||C!==0)&&(O.x=m.x*S+E.x*C,O.y=m.y*S+E.y*C,p.isStatic||p.isSleeping||(I=l.sub(y,p.position,M),p.positionPrev.x+=O.x*p.inverseMass,p.positionPrev.y+=O.y*p.inverseMass,p.anglePrev+=l.cross(I,O)*p.inverseInertia),v.isStatic||v.isSleeping||(I=l.sub(y,v.position,M),v.positionPrev.x-=O.x*v.inverseMass,v.positionPrev.y-=O.y*v.inverseMass,v.anglePrev-=l.cross(I,O)*v.inverseInertia))},o.solveVelocity=function(s,n){for(var d=n*n,a=l._temp[0],u=l._temp[1],f=l._temp[2],p=l._temp[3],v=l._temp[4],m=l._temp[5],E=0;E<s.length;E++){var x=s[E];if(!(!x.isActive||x.isSensor)){var y=x.collision,S=y.parentA,C=y.parentB,I=y.normal,O=y.tangent,M=x.activeContacts,L=1/M.length;S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,C.velocity.x=C.position.x-C.positionPrev.x,C.velocity.y=C.position.y-C.positionPrev.y,S.angularVelocity=S.angle-S.anglePrev,C.angularVelocity=C.angle-C.anglePrev;for(var P=0;P<M.length;P++){var b=M[P],B=b.vertex,U=l.sub(B,S.position,u),H=l.sub(B,C.position,f),Y=l.add(S.velocity,l.mult(l.perp(U),S.angularVelocity),p),j=l.add(C.velocity,l.mult(l.perp(H),C.angularVelocity),v),_=l.sub(Y,j,m),w=l.dot(I,_),D=l.dot(O,_),N=Math.abs(D),G=h.sign(D),k=(1+x.restitution)*w,V=h.clamp(x.separation+w,0,1)*o._frictionNormalMultiplier,X=D,K=1/0;N>x.friction*x.frictionStatic*V*d&&(K=N,X=h.clamp(x.friction*G*d,-K,K));var tt=l.cross(U,I),st=l.cross(H,I),rt=L/(S.inverseMass+C.inverseMass+S.inverseInertia*tt*tt+C.inverseInertia*st*st);if(k*=rt,X*=rt,w<0&&w*w>o._restingThresh*d)b.normalImpulse=0;else{var ht=b.normalImpulse;b.normalImpulse=Math.min(b.normalImpulse+k,0),k=b.normalImpulse-ht}if(D*D>o._restingThreshTangent*d)b.tangentImpulse=0;else{var ut=b.tangentImpulse;b.tangentImpulse=h.clamp(b.tangentImpulse+X,-K,K),X=b.tangentImpulse-ut}a.x=I.x*k+O.x*X,a.y=I.y*k+O.y*X,S.isStatic||S.isSleeping||(S.positionPrev.x+=a.x*S.inverseMass,S.positionPrev.y+=a.y*S.inverseMass,S.anglePrev+=l.cross(U,a)*S.inverseInertia),C.isStatic||C.isSleeping||(C.positionPrev.x-=a.x*C.inverseMass,C.positionPrev.y-=a.y*C.inverseMass,C.anglePrev-=l.cross(H,a)*C.inverseInertia)}}}}})()},function(c,R){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch{typeof window=="object"&&(e=window)}c.exports=e},function(c,R,e){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(276),g=function(l,h,i,s){for(var n=l[0],d=1;d<l.length;d++){var a=l[d];o(a,n,h,i,s),n=a}return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(46),g=function(l,h,i,s,n){return o(l,"angle",h,i,s,n)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){for(var h=0;h<o.length;h++){var i=o[h];g.call(l,i)}return o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){l===void 0&&(l=0);for(var h=l;h<o.length;h++){var i=o[h],s=!0;for(var n in g)i[n]!==g[n]&&(s=!1);if(s)return i}return null};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){l===void 0&&(l=0);for(var h=l;h<o.length;h++){var i=o[h],s=!0;for(var n in g)i[n]!==g[n]&&(s=!1);if(s)return i}return null};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(289),g=e(123),l=e(2),h=e(1),i=e(129),s=new i({sys:{queueDepthSort:h,events:{once:h}}},0,0,1,1),n=function(d,a){a===void 0&&(a={});var u=a.hasOwnProperty("width"),f=a.hasOwnProperty("height"),p=l(a,"width",-1),v=l(a,"height",-1),m=l(a,"cellWidth",1),E=l(a,"cellHeight",m),x=l(a,"position",g.TOP_LEFT),y=l(a,"x",0),S=l(a,"y",0),C=0,I=0,O=p*m,M=v*E;s.setPosition(y,S),s.setSize(m,E);for(var L=0;L<d.length;L++)if(o(d[L],s,x),u&&p===-1)s.x+=m;else if(f&&v===-1)s.y+=E;else if(f&&!u){if(I+=E,s.y+=E,I===M&&(I=0,C+=m,s.y=S,s.x+=m,C===O))break}else if(C+=m,s.x+=m,C===O&&(C=0,I+=E,s.x=y,s.y+=E,I===M))break;return d};c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(18),g=2,l={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h,i,s,n){return h===void 0&&(h=1),i===void 0?this.alpha=h:(this._alphaTL=o(h,0,1),this._alphaTR=o(i,0,1),this._alphaBL=o(s,0,1),this._alphaBR=o(n,0,1)),this},alpha:{get:function(){return this._alpha},set:function(h){var i=o(h,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,i===0?this.renderFlags&=~g:this.renderFlags|=g}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(h){var i=o(h,0,1);this._alphaTL=i,i!==0&&(this.renderFlags|=g)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(h){var i=o(h,0,1);this._alphaTR=i,i!==0&&(this.renderFlags|=g)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(h){var i=o(h,0,1);this._alphaBL=i,i!==0&&(this.renderFlags|=g)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(h){var i=o(h,0,1);this._alphaBR=i,i!==0&&(this.renderFlags|=g)}}};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(o){this.scaleX=o/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(o){this.scaleY=o/this.height}},setSize:function(o,g){return this.width=o,this.height=g,this},setDisplaySize:function(o,g){return this.displayWidth=o,this.displayHeight=g,this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={texture:null,frame:null,isCropped:!1,setCrop:function(o,g,l,h){if(o===void 0)this.isCropped=!1;else if(this.frame){if(typeof o=="number")this.frame.setCropUVs(this._crop,o,g,l,h,this.flipX,this.flipY);else{var i=o;this.frame.setCropUVs(this._crop,i.x,i.y,i.width,i.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,g){return this.flipX=o,this.flipY=g,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10),g=e(308),l=e(3),h={prepareBoundsOutput:function(i,s){if(s===void 0&&(s=!1),this.rotation!==0&&g(i,this.x,this.y,this.rotation),s&&this.parentContainer){var n=this.parentContainer.getBoundsTransformMatrix();n.transformPoint(i.x,i.y,i)}return i},getCenter:function(i){return i===void 0&&(i=new l),i.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,i},getTopLeft:function(i,s){return i||(i=new l),i.x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,s)},getTopCenter:function(i,s){return i||(i=new l),i.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,s)},getTopRight:function(i,s){return i||(i=new l),i.x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(i,s)},getLeftCenter:function(i,s){return i||(i=new l),i.x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(i,s)},getRightCenter:function(i,s){return i||(i=new l),i.x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(i,s)},getBottomLeft:function(i,s){return i||(i=new l),i.x=this.x-this.displayWidth*this.originX,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,s)},getBottomCenter:function(i,s){return i||(i=new l),i.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,s)},getBottomRight:function(i,s){return i||(i=new l),i.x=this.x-this.displayWidth*this.originX+this.displayWidth,i.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(i,s)},getBounds:function(i){i===void 0&&(i=new o);var s,n,d,a,u,f,p,v;if(this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(i),m.transformPoint(i.x,i.y,i),s=i.x,n=i.y,this.getTopRight(i),m.transformPoint(i.x,i.y,i),d=i.x,a=i.y,this.getBottomLeft(i),m.transformPoint(i.x,i.y,i),u=i.x,f=i.y,this.getBottomRight(i),m.transformPoint(i.x,i.y,i),p=i.x,v=i.y}else this.getTopLeft(i),s=i.x,n=i.y,this.getTopRight(i),d=i.x,a=i.y,this.getBottomLeft(i),u=i.x,f=i.y,this.getBottomRight(i),p=i.x,v=i.y;return i.x=Math.min(s,d,u,p),i.y=Math.min(n,a,f,v),i.width=Math.max(s,d,u,p)-i.x,i.height=Math.max(n,a,f,v)-i.y,i}};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="blur"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="boot"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="contextlost"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="contextrestored"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="destroy"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="focus"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="hidden"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pause"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="postrender"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="poststep"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="prerender"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="prestep"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="ready"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resume"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="step"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="visible"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="postrender"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="prerender"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="render"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resize"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(o){this._displayOriginX=o,this.originX=o/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(o){this._displayOriginY=o,this.originY=o/this.height}},setOrigin:function(o,g){return o===void 0&&(o=.5),g===void 0&&(g=o),this.originX=o,this.originY=g,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(o,g){return o===void 0&&(o=0),g===void 0&&(g=o),this.displayOriginX=o,this.displayOriginY=g,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(36),g=e(99),l=e(6),h=e(100),i=e(3),s={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:h.PLAYING_FORWARD,setPath:function(n,d){d===void 0&&(d=this.pathConfig);var a=this.pathTween;return a&&a.isPlaying()&&a.stop(),this.path=n,d&&this.startFollow(d),this},setRotateToPath:function(n,d){return d===void 0&&(d=0),this.rotateToPath=n,this.pathRotationOffset=d,this},isFollowing:function(){var n=this.pathTween;return n&&n.isPlaying()},startFollow:function(n,d){n===void 0&&(n={}),d===void 0&&(d=0);var a=this.pathTween;a&&a.isPlaying()&&a.stop(),typeof n=="number"&&(n={duration:n}),n.from=l(n,"from",0),n.to=l(n,"to",1);var u=g(n,"positionOnPath",!1);this.rotateToPath=g(n,"rotateToPath",!1),this.pathRotationOffset=l(n,"rotationOffset",0);var f=l(n,"startAt",d);if(f&&(n.onStart=function(v){var m=v.data[0];m.progress=f,m.elapsed=m.duration*f;var E=m.ease(m.progress);m.current=m.start+(m.end-m.start)*E,m.target[m.key]=m.current}),this.pathOffset||(this.pathOffset=new i(this.x,this.y)),this.pathVector||(this.pathVector=new i),this.pathDelta||(this.pathDelta=new i),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(n),this.path.getStartPoint(this.pathOffset),u&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=h.PLAYING_FORWARD,this.rotateToPath){var p=this.path.getPoint(.1);this.rotation=Math.atan2(p.y-this.y,p.x-this.x)+o(this.pathRotationOffset)}return this.pathConfig=n,this},pauseFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.pause(),this},resumeFollow:function(){var n=this.pathTween;return n&&n.isPaused()&&n.resume(),this},stopFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this},pathUpdate:function(){var n=this.pathTween;if(n){var d=n.data[0],a=this.pathDelta,u=this.pathVector;if(a.copy(u).negate(),d.state===h.COMPLETE){this.path.getPoint(1,u),a.add(u),u.add(this.pathOffset),this.setPosition(u.x,u.y);return}else if(d.state!==h.PLAYING_FORWARD&&d.state!==h.PLAYING_BACKWARD)return;this.path.getPoint(n.getValue(),u),a.add(u),u.add(this.pathOffset);var f=this.x,p=this.y;this.setPosition(u.x,u.y);var v=this.x-f,m=this.y-p;if(v===0&&m===0)return;if(d.state!==this._prevDirection){this._prevDirection=d.state;return}this.rotateToPath&&(this.rotation=Math.atan2(m,v)+o(this.pathRotationOffset))}}};c.exports=s},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(o){this.scaleX=o/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(o){this.scaleY=o/this.frame.realHeight}},setSizeToFrame:function(o){return o===void 0&&(o=this.frame),this.width=o.realWidth,this.height=o.realHeight,this},setSize:function(o,g){return this.width=o,this.height=g,this},setDisplaySize:function(o,g){return this.displayWidth=o,this.displayHeight=g,this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=8,o={texture:null,frame:null,isCropped:!1,setTexture:function(g,l){return this.texture=this.scene.sys.textures.get(g),this.setFrame(l)},setFrame:function(g,l,h){return l===void 0&&(l=!0),h===void 0&&(h=!0),this.frame=this.texture.get(g),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~e:this.renderFlags|=e,this._sizeComponent&&l&&this.setSizeToFrame(),this._originComponent&&h&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};c.exports=o},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=8,o={texture:null,frame:null,isCropped:!1,setCrop:function(g,l,h,i){if(g===void 0)this.isCropped=!1;else if(this.frame){if(typeof g=="number")this.frame.setCropUVs(this._crop,g,l,h,i,this.flipX,this.flipY);else{var s=g;this.frame.setCropUVs(this._crop,s.x,s.y,s.width,s.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(g,l){return this.texture=this.scene.sys.textures.get(g),this.setFrame(l)},setFrame:function(g,l,h){return l===void 0&&(l=!0),h===void 0&&(h=!0),this.frame=this.texture.get(g),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~e:this.renderFlags|=e,this._sizeComponent&&l&&this.setSizeToFrame(),this._originComponent&&h&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};c.exports=o},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(o,g,l,h){return o===void 0&&(o=16777215),g===void 0&&(g=o,l=o,h=o),this.tintTopLeft=o,this.tintTopRight=g,this.tintBottomLeft=l,this.tintBottomRight=h,this.tintFill=!1,this},setTintFill:function(o,g,l,h){return this.setTint(o,g,l,h),this.tintFill=!0,this},tint:{set:function(o){this.setTint(o,o,o,o)}},isTinted:{get:function(){var o=16777215;return this.tintFill||this.tintTopLeft!==o||this.tintTopRight!==o||this.tintBottomLeft!==o||this.tintBottomRight!==o}}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="changedata"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="changedata-"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="destroy"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="removedata"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="setdata"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="addedtoscene"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="destroy"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="removedfromscene"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="complete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="created"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="error"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="loop"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="play"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="seeked"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="seeking"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="stop"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="timeout"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="unlocked"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="addedtoscene"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="boot"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="create"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="destroy"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pause"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="postupdate"},function(c,R){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="prerender"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="preupdate"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="ready"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="removedfromscene"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="render"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resume"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="shutdown"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="sleep"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="start"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="transitioncomplete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="transitioninit"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="transitionout"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="transitionstart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="transitionwake"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="update"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="wake"},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(46),g=function(l,h,i,s,n){return o(l,"alpha",h,i,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(46),g=function(l,h,i,s,n){return o(l,"x",h,i,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(46),g=function(l,h,i,s,n,d,a){return i==null&&(i=h),o(l,"x",h,s,d,a),o(l,"y",i,n,d,a)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(46),g=function(l,h,i,s,n){return o(l,"y",h,i,s,n)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){l===void 0&&(l=0),h===void 0&&(h=6.28);for(var i=l,s=(h-l)/o.length,n=0;n<o.length;n++)o[n].x=g.x+g.radius*Math.cos(i),o[n].y=g.y+g.radius*Math.sin(i),i+=s;return o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){l===void 0&&(l=0),h===void 0&&(h=6.28);for(var i=l,s=(h-l)/o.length,n=g.width/2,d=g.height/2,a=0;a<o.length;a++)o[a].x=g.x+n*Math.cos(i),o[a].y=g.y+d*Math.sin(i),i+=s;return o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(172),g=function(l,h){for(var i=o(h,l.length),s=0;s<l.length;s++){var n=l[s],d=i[s];n.x=d.x,n.y=d.y}return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(316),g=e(178),l=e(179),h=function(i,s,n){n===void 0&&(n=0);var d=o(s,!1,i.length);n>0?g(d,n):n<0&&l(d,Math.abs(n));for(var a=0;a<i.length;a++)i[a].x=d[a].x,i[a].y=d[a].y;return i};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(317),g=function(l,h,i){var s=o({x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2},i),n=o({x1:h.x2,y1:h.y2,x2:h.x3,y2:h.y3},i),d=o({x1:h.x3,y1:h.y3,x2:h.x1,y2:h.y1},i);s.pop(),n.pop(),d.pop(),s=s.concat(n,d);for(var a=s.length/l.length,u=0,f=0;f<l.length;f++){var p=l[f],v=s[Math.floor(u)];p.x=v.x,p.y=v.y,u+=a}return l};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){for(var h=0;h<o.length;h++){var i=o[h];i.anims&&i.anims.play(g,l)}return o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(170),g=function(l,h){for(var i=0;i<l.length;i++)o(h,l[i]);return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(180),g=function(l,h){for(var i=0;i<l.length;i++)o(h,l[i]);return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(173),g=function(l,h){for(var i=0;i<l.length;i++)o(h,l[i]);return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(174),g=function(l,h){for(var i=0;i<l.length;i++)o(h,l[i]);return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(181),g=function(l,h){for(var i=0;i<l.length;i++)o(h,l[i]);return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(46),g=function(l,h,i,s,n){return o(l,"rotation",h,i,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(182),g=e(50),l=function(h,i,s){for(var n=i.x,d=i.y,a=0;a<h.length;a++){var u=h[a];o(u,n,d,s,Math.max(1,g(u.x,u.y,n,d)))}return h};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(182),g=function(l,h,i,s){var n=h.x,d=h.y;if(s===0)return l;for(var a=0;a<l.length;a++)o(l[a],n,d,i,s);return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(46),g=function(l,h,i,s,n){return o(l,"scaleX",h,i,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(46),g=function(l,h,i,s,n,d,a){return i==null&&(i=h),o(l,"scaleX",h,s,d,a),o(l,"scaleY",i,n,d,a)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(46),g=function(l,h,i,s,n){return o(l,"scaleY",h,i,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n){return o(l,"alpha",h,i,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s){return o(l,"blendMode",h,0,i,s)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n){return o(l,"depth",h,i,s,n)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){for(var h=0;h<o.length;h++)o[h].setInteractive(g,l);return o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n,d,a){return i==null&&(i=h),o(l,"originX",h,s,d,a),o(l,"originY",i,n,d,a),l.forEach(function(u){u.updateDisplayOrigin()}),l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n){return o(l,"rotation",h,i,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n,d,a){return i==null&&(i=h),o(l,"scaleX",h,s,d,a),o(l,"scaleY",i,n,d,a)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n){return o(l,"scaleX",h,i,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n){return o(l,"scaleY",h,i,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n,d,a){return i==null&&(i=h),o(l,"scrollFactorX",h,s,d,a),o(l,"scrollFactorY",i,n,d,a)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n){return o(l,"scrollFactorX",h,i,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n){return o(l,"scrollFactorY",h,i,s,n)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i){for(var s=0;s<o.length;s++)o[s].setTint(g,l,h,i);return o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s){return o(l,"visible",h,0,i,s)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n){return o(l,"x",h,i,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n,d,a){return i==null&&(i=h),o(l,"x",h,s,d,a),o(l,"y",i,n,d,a)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(27),g=function(l,h,i,s,n){return o(l,"y",h,i,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(3),g=function(l,h,i,s,n){s===void 0&&(s=0),n===void 0&&(n=new o);var d,a;if(l.length>1){var u,f,p,v;if(s===0){var m=l.length-1;for(d=l[m].x,a=l[m].y,u=m-1;u>=0;u--)v=l[u],f=v.x,p=v.y,v.x=d,v.y=a,d=f,a=p;l[m].x=h,l[m].y=i}else{for(d=l[0].x,a=l[0].y,u=1;u<l.length;u++)v=l[u],f=v.x,p=v.y,v.x=d,v.y=a,d=f,a=p;l[0].x=h,l[0].y=i}}else d=l[0].x,a=l[0].y,l[0].x=h,l[0].y=i;return n.x=d,n.y=a,n};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(131),g=function(l){return o(l)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(183),g=function(l,h,i,s,n){n===void 0&&(n=!1);var d=Math.abs(s-i)/l.length,a;if(n)for(a=0;a<l.length;a++)l[a][h]+=o(a*d,i,s);else for(a=0;a<l.length;a++)l[a][h]=o(a*d,i,s);return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(184),g=function(l,h,i,s,n){n===void 0&&(n=!1);var d=Math.abs(s-i)/l.length,a;if(n)for(a=0;a<l.length;a++)l[a][h]+=o(a*d,i,s);else for(a=0;a<l.length;a++)l[a][h]=o(a*d,i,s);return l};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i){i===void 0&&(i=!1);var s=Math.abs(h-l)/o.length,n;if(i)for(n=0;n<o.length;n++)o[n][g]+=n*s+l;else for(n=0;n<o.length;n++)o[n][g]=n*s+l;return o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){for(var g=0;g<o.length;g++)o[g].visible=!o[g].visible;return o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(68),g=function(l,h,i){i===void 0&&(i=0);for(var s=0;s<l.length;s++){var n=l[s];n.x=o(n.x,h.left-i,h.right+i),n.y=o(n.y,h.top-i,h.bottom+i)}return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Animation:e(185),AnimationFrame:e(319),AnimationManager:e(321),AnimationState:e(164),Events:e(132)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="add"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationcomplete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationcomplete-"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationrepeat"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationrestart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationstart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationstop"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationupdate"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pauseall"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="remove"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resumeall"},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BaseCache:e(323),CacheManager:e(325),Events:e(324)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="add"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="remove"},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Controls:e(739),Scene2D:e(742)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={FixedKeyControl:e(740),SmoothedKeyControl:e(741)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(6),l=new o({initialize:function(i){this.camera=g(i,"camera",null),this.left=g(i,"left",null),this.right=g(i,"right",null),this.up=g(i,"up",null),this.down=g(i,"down",null),this.zoomIn=g(i,"zoomIn",null),this.zoomOut=g(i,"zoomOut",null),this.zoomSpeed=g(i,"zoomSpeed",.01),this.minZoom=g(i,"minZoom",.001),this.maxZoom=g(i,"maxZoom",1e3),this.speedX=0,this.speedY=0;var s=g(i,"speed",null);typeof s=="number"?(this.speedX=s,this.speedY=s):(this.speedX=g(i,"speed.x",0),this.speedY=g(i,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(!!this.active){h===void 0&&(h=1);var i=this.camera;this.up&&this.up.isDown?i.scrollY-=this.speedY*h|0:this.down&&this.down.isDown&&(i.scrollY+=this.speedY*h|0),this.left&&this.left.isDown?i.scrollX-=this.speedX*h|0:this.right&&this.right.isDown&&(i.scrollX+=this.speedX*h|0),this.zoomIn&&this.zoomIn.isDown?(i.zoom-=this.zoomSpeed,i.zoom<this.minZoom&&(i.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(i.zoom+=this.zoomSpeed,i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(6),l=new o({initialize:function(i){this.camera=g(i,"camera",null),this.left=g(i,"left",null),this.right=g(i,"right",null),this.up=g(i,"up",null),this.down=g(i,"down",null),this.zoomIn=g(i,"zoomIn",null),this.zoomOut=g(i,"zoomOut",null),this.zoomSpeed=g(i,"zoomSpeed",.01),this.minZoom=g(i,"minZoom",.001),this.maxZoom=g(i,"maxZoom",1e3),this.accelX=0,this.accelY=0;var s=g(i,"acceleration",null);typeof s=="number"?(this.accelX=s,this.accelY=s):(this.accelX=g(i,"acceleration.x",0),this.accelY=g(i,"acceleration.y",0)),this.dragX=0,this.dragY=0;var n=g(i,"drag",null);typeof n=="number"?(this.dragX=n,this.dragY=n):(this.dragX=g(i,"drag.x",0),this.dragY=g(i,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var d=g(i,"maxSpeed",null);typeof d=="number"?(this.maxSpeedX=d,this.maxSpeedY=d):(this.maxSpeedX=g(i,"maxSpeed.x",0),this.maxSpeedY=g(i,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(!!this.active){h===void 0&&(h=1);var i=this.camera;this._speedX>0?(this._speedX-=this.dragX*h,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*h,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*h,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*h,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(i.scrollX-=this._speedX*h|0),this._speedY!==0&&(i.scrollY-=this._speedY*h|0),this._zoom!==0&&(i.zoom+=this._zoom,i.zoom<this.minZoom?i.zoom=this.minZoom:i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Camera:e(326),BaseCamera:e(133),CameraManager:e(799),Effects:e(333),Events:e(37)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="cameradestroy"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerafadeincomplete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerafadeinstart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerafadeoutcomplete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerafadeoutstart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="cameraflashcomplete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="cameraflashstart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="followupdate"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerapancomplete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerapanstart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="postrender"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="prerender"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerarotatecomplete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerarotatestart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerashakecomplete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerashakestart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerazoomcomplete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerazoomstart"},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(18),g=e(0),l=e(37),h=new g({initialize:function(s){this.camera=s,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(i,s,n,d,a,u,f,p){if(i===void 0&&(i=!0),s===void 0&&(s=1e3),n===void 0&&(n=0),d===void 0&&(d=0),a===void 0&&(a=0),u===void 0&&(u=!1),f===void 0&&(f=null),p===void 0&&(p=this.camera.scene),!u&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=s,this.direction=i,this.progress=0,this.red=n,this.green=d,this.blue=a,this.alpha=i?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=f,this._onUpdateScope=p;var v=i?l.FADE_OUT_START:l.FADE_IN_START;return this.camera.emit(v,this.camera,this,s,n,d,a),this.camera},update:function(i,s){!this.isRunning||(this._elapsed+=s,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(i){if(!this.isRunning&&!this.isComplete)return!1;var s=this.camera;return i.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",i.fillRect(s.x,s.y,s.width,s.height),!0},postRenderWebGL:function(i,s){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera,d=this.red/255,a=this.green/255,u=this.blue/255;return i.drawFillRect(n.x,n.y,n.width,n.height,s(u,a,d,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var i=this.direction?l.FADE_OUT_COMPLETE:l.FADE_IN_COMPLETE;this.camera.emit(i,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(18),g=e(0),l=e(37),h=new g({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(i,s,n,d,a,u,f){return i===void 0&&(i=250),s===void 0&&(s=255),n===void 0&&(n=255),d===void 0&&(d=255),a===void 0&&(a=!1),u===void 0&&(u=null),f===void 0&&(f=this.camera.scene),!a&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=i,this.progress=0,this.red=s,this.green=n,this.blue=d,this.alpha=1,this._elapsed=0,this._onUpdate=u,this._onUpdateScope=f,this.camera.emit(l.FLASH_START,this.camera,this,i,s,n,d),this.camera)},update:function(i,s){!this.isRunning||(this._elapsed+=s,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(i){if(!this.isRunning)return!1;var s=this.camera;return i.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",i.fillRect(s.x,s.y,s.width,s.height),!0},postRenderWebGL:function(i,s){if(!this.isRunning)return!1;var n=this.camera,d=this.red/255,a=this.green/255,u=this.blue/255;return i.drawFillRect(n.x,n.y,n.width,n.height,s(u,a,d,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(18),g=e(0),l=e(134),h=e(37),i=e(3),s=new g({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=new i,this.current=new i,this.destination=new i,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,d,a,u,f,p,v){a===void 0&&(a=1e3),u===void 0&&(u=l.Linear),f===void 0&&(f=!1),p===void 0&&(p=null),v===void 0&&(v=this.camera.scene);var m=this.camera;return!f&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,this.source.set(m.scrollX,m.scrollY),this.destination.set(n,d),m.getScroll(n,d,this.current),typeof u=="string"&&l.hasOwnProperty(u)?this.ease=l[u]:typeof u=="function"&&(this.ease=u),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=v,this.camera.emit(h.PAN_START,this.camera,this,a,n,d)),m},update:function(n,d){if(!!this.isRunning){this._elapsed+=d;var a=o(this._elapsed/this.duration,0,1);this.progress=a;var u=this.camera;if(this._elapsed<this.duration){var f=this.ease(a);u.getScroll(this.destination.x,this.destination.y,this.current);var p=this.source.x+(this.current.x-this.source.x)*f,v=this.source.y+(this.current.y-this.source.y)*f;u.setScroll(p,v),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,a,p,v)}else u.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,a,u.scrollX,u.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});c.exports=s},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g===void 0&&(g=1.70158),o*o*((g+1)*o-g)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g===void 0&&(g=1.70158),--o*o*((g+1)*o+g)+1};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){g===void 0&&(g=1.70158);var l=g*1.525;return(o*=2)<1?.5*(o*o*((l+1)*o-l)):.5*((o-=2)*o*((l+1)*o+l)+2)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o=1-o,o<.36363636363636365?1-7.5625*o*o:o<.7272727272727273?1-(7.5625*(o-=.5454545454545454)*o+.75):o<.9090909090909091?1-(7.5625*(o-=.8181818181818182)*o+.9375):1-(7.5625*(o-=.9545454545454546)*o+.984375)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o<.36363636363636365?7.5625*o*o:o<.7272727272727273?7.5625*(o-=.5454545454545454)*o+.75:o<.9090909090909091?7.5625*(o-=.8181818181818182)*o+.9375:7.5625*(o-=.9545454545454546)*o+.984375};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g=!1;return o<.5?(o=1-o*2,g=!0):o=o*2-1,o<.36363636363636365?o=7.5625*o*o:o<.7272727272727273?o=7.5625*(o-=.5454545454545454)*o+.75:o<.9090909090909091?o=7.5625*(o-=.8181818181818182)*o+.9375:o=7.5625*(o-=.9545454545454546)*o+.984375,g?(1-o)*.5:o*.5+.5};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return 1-Math.sqrt(1-o*o)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return Math.sqrt(1- --o*o)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return(o*=2)<1?-.5*(Math.sqrt(1-o*o)-1):.5*(Math.sqrt(1-(o-=2)*o)+1)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o*o*o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return--o*o*o+1};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return(o*=2)<1?.5*o*o*o:.5*((o-=2)*o*o+2)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){if(g===void 0&&(g=.1),l===void 0&&(l=.1),o===0)return 0;if(o===1)return 1;var h=l/4;return g<1?g=1:h=l*Math.asin(1/g)/(2*Math.PI),-(g*Math.pow(2,10*(o-=1))*Math.sin((o-h)*(2*Math.PI)/l))};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){if(g===void 0&&(g=.1),l===void 0&&(l=.1),o===0)return 0;if(o===1)return 1;var h=l/4;return g<1?g=1:h=l*Math.asin(1/g)/(2*Math.PI),g*Math.pow(2,-10*o)*Math.sin((o-h)*(2*Math.PI)/l)+1};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){if(g===void 0&&(g=.1),l===void 0&&(l=.1),o===0)return 0;if(o===1)return 1;var h=l/4;return g<1?g=1:h=l*Math.asin(1/g)/(2*Math.PI),(o*=2)<1?-.5*(g*Math.pow(2,10*(o-=1))*Math.sin((o-h)*(2*Math.PI)/l)):g*Math.pow(2,-10*(o-=1))*Math.sin((o-h)*(2*Math.PI)/l)*.5+1};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return Math.pow(2,10*(o-1))-.001};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return 1-Math.pow(2,-10*o)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return(o*=2)<1?.5*Math.pow(2,10*(o-1)):.5*(2-Math.pow(2,-10*(o-1)))};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o*o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o*(2-o)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return(o*=2)<1?.5*o*o:-.5*(--o*(o-2)-1)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o*o*o*o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return 1- --o*o*o*o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return(o*=2)<1?.5*o*o*o*o:-.5*((o-=2)*o*o*o-2)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o*o*o*o*o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return--o*o*o*o*o+1};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return(o*=2)<1?.5*o*o*o*o*o:.5*((o-=2)*o*o*o*o+2)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o===0?0:o===1?1:1-Math.cos(o*Math.PI/2)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o===0?0:o===1?1:Math.sin(o*Math.PI/2)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o===0?0:o===1?1:.5*(1-Math.cos(Math.PI*o))};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g===void 0&&(g=1),o<=0?0:o>=1?1:((g*o|0)+1)*(1/g)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(18),g=e(0),l=e(37),h=e(3),i=new g({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.intensity=new h,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(s,n,d,a,u){return s===void 0&&(s=100),n===void 0&&(n=.05),d===void 0&&(d=!1),a===void 0&&(a=null),u===void 0&&(u=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=s,this.progress=0,typeof n=="number"?this.intensity.set(n):this.intensity.set(n.x,n.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=a,this._onUpdateScope=u,this.camera.emit(l.SHAKE_START,this.camera,this,s,n),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(s,n){if(!!this.isRunning)if(this._elapsed+=n,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var d=this.intensity,a=this.camera.width,u=this.camera.height,f=this.camera.zoom;this._offsetX=(Math.random()*d.x*a*2-d.x*a)*f,this._offsetY=(Math.random()*d.y*u*2-d.y*u)*f,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});c.exports=i},function(c,R,e){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var o=e(18),g=e(0),l=e(37),h=e(134),i=new g({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(s,n,d,a,u,f,p){d===void 0&&(d=1e3),a===void 0&&(a=h.Linear),u===void 0&&(u=!1),f===void 0&&(f=null),p===void 0&&(p=this.camera.scene),n===void 0&&(n=!1),this.shortestPath=n;var v=s;s<0?(v=-1*s,this.clockwise=!1):this.clockwise=!0;var m=360*Math.PI/180;v=v-Math.floor(v/m)*m;var E=this.camera;if(!u&&this.isRunning)return E;if(this.isRunning=!0,this.duration=d,this.progress=0,this.source=E.rotation,this.destination=v,typeof a=="string"&&h.hasOwnProperty(a)?this.ease=h[a]:typeof a=="function"&&(this.ease=a),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=p,this.shortestPath){var x=0,y=0;this.destination>this.source?x=Math.abs(this.destination-this.source):x=Math.abs(this.destination+m)-this.source,this.source>this.destination?y=Math.abs(this.source-this.destination):y=Math.abs(this.source+m)-this.destination,x<y?this.clockwise=!0:x>y&&(this.clockwise=!1)}return this.camera.emit(l.ROTATE_START,this.camera,this,d,v),E},update:function(s,n){if(!!this.isRunning){this._elapsed+=n;var d=o(this._elapsed/this.duration,0,1);this.progress=d;var a=this.camera;if(this._elapsed<this.duration){var u=this.ease(d);this.current=a.rotation;var f=0,p=360*Math.PI/180,v=this.destination,m=this.current;this.clockwise===!1&&(v=this.current,m=this.destination),v>=m?f=Math.abs(v-m):f=Math.abs(v+p)-m;var E=0;this.clockwise?E=a.rotation+f*u:E=a.rotation-f*u,a.rotation=E,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,d,E)}else a.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,d,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(18),g=e(0),l=e(134),h=e(37),i=new g({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,n,d,a,u,f){n===void 0&&(n=1e3),d===void 0&&(d=l.Linear),a===void 0&&(a=!1),u===void 0&&(u=null),f===void 0&&(f=this.camera.scene);var p=this.camera;return!a&&this.isRunning||(this.isRunning=!0,this.duration=n,this.progress=0,this.source=p.zoom,this.destination=s,typeof d=="string"&&l.hasOwnProperty(d)?this.ease=l[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=u,this._onUpdateScope=f,this.camera.emit(h.ZOOM_START,this.camera,this,n,s)),p},update:function(s,n){!this.isRunning||(this._elapsed+=n,this.progress=o(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(326),g=e(0),l=e(2),h=e(24),i=e(57),s=e(104),n=e(20),d=new g({initialize:function(u){this.scene=u,this.systems=u.sys,this.roundPixels=u.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,u.sys.events.once(n.BOOT,this.boot,this),u.sys.events.on(n.START,this.start,this)},boot:function(){var a=this.systems;a.settings.cameras?this.fromJSON(a.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new o(0,0,a.scale.width,a.scale.height).setScene(this.scene),a.game.scale.on(s.RESIZE,this.onResize,this),this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){if(!this.main){var a=this.systems;a.settings.cameras?this.fromJSON(a.settings.cameras):this.add(),this.main=this.cameras[0]}var u=this.systems.events;u.on(n.UPDATE,this.update,this),u.once(n.SHUTDOWN,this.shutdown,this)},add:function(a,u,f,p,v,m){a===void 0&&(a=0),u===void 0&&(u=0),f===void 0&&(f=this.scene.sys.scale.width),p===void 0&&(p=this.scene.sys.scale.height),v===void 0&&(v=!1),m===void 0&&(m="");var E=new o(a,u,f,p);return E.setName(m),E.setScene(this.scene),E.setRoundPixels(this.roundPixels),E.id=this.getNextID(),this.cameras.push(E),v&&(this.main=E),E},addExisting:function(a,u){u===void 0&&(u=!1);var f=this.cameras.indexOf(a);return f===-1?(a.id=this.getNextID(),a.setRoundPixels(this.roundPixels),this.cameras.push(a),u&&(this.main=a),a):null},getNextID:function(){for(var a=this.cameras,u=1,f=0;f<32;f++){for(var p=!1,v=0;v<a.length;v++){var m=a[v];if(m&&m.id===u){p=!0;continue}}if(p)u=u<<1;else return u}return 0},getTotal:function(a){a===void 0&&(a=!1);for(var u=0,f=this.cameras,p=0;p<f.length;p++){var v=f[p];(!a||a&&v.visible)&&u++}return u},fromJSON:function(a){Array.isArray(a)||(a=[a]);for(var u=this.scene.sys.scale.width,f=this.scene.sys.scale.height,p=0;p<a.length;p++){var v=a[p],m=l(v,"x",0),E=l(v,"y",0),x=l(v,"width",u),y=l(v,"height",f),S=this.add(m,E,x,y);S.name=l(v,"name",""),S.zoom=l(v,"zoom",1),S.rotation=l(v,"rotation",0),S.scrollX=l(v,"scrollX",0),S.scrollY=l(v,"scrollY",0),S.roundPixels=l(v,"roundPixels",!1),S.visible=l(v,"visible",!0);var C=l(v,"backgroundColor",!1);C&&S.setBackgroundColor(C);var I=l(v,"bounds",null);if(I){var O=l(I,"x",0),M=l(I,"y",0),L=l(I,"width",u),P=l(I,"height",f);S.setBounds(O,M,L,P)}}return this},getCamera:function(a){for(var u=this.cameras,f=0;f<u.length;f++)if(u[f].name===a)return u[f];return null},getCamerasBelowPointer:function(a){for(var u=this.cameras,f=a.x,p=a.y,v=[],m=0;m<u.length;m++){var E=u[m];E.visible&&E.inputEnabled&&i(E,f,p)&&v.unshift(E)}return v},remove:function(a,u){u===void 0&&(u=!0),Array.isArray(a)||(a=[a]);for(var f=0,p=this.cameras,v=0;v<a.length;v++){var m=p.indexOf(a[v]);m!==-1&&(u?p[m].destroy():p[m].renderList=[],p.splice(m,1),f++)}return!this.main&&p[0]&&(this.main=p[0]),f},render:function(a,u){for(var f=this.scene,p=this.cameras,v=0;v<this.cameras.length;v++){var m=p[v];if(m.visible&&m.alpha>0){m.preRender();var E=this.getVisibleChildren(u.getChildren(),m);a.render(f,E,m)}}},getVisibleChildren:function(a,u){for(var f=[],p=0;p<a.length;p++){var v=a[p];v.willRender(u)&&f.push(v)}return f},resetAll:function(){for(var a=0;a<this.cameras.length;a++)this.cameras[a].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(a,u){for(var f=0;f<this.cameras.length;f++)this.cameras[f].update(a,u)},onResize:function(a,u,f,p,v){for(var m=0;m<this.cameras.length;m++){var E=this.cameras[m];E._x===0&&E._y===0&&E._width===p&&E._height===v&&E.setSize(u.width,u.height)}},resize:function(a,u){for(var f=0;f<this.cameras.length;f++)this.cameras[f].setSize(a,u)},shutdown:function(){this.main=void 0;for(var a=0;a<this.cameras.length;a++)this.cameras[a].destroy();this.cameras=[];var u=this.systems.events;u.off(n.UPDATE,this.update,this),u.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});h.register("CameraManager",d,"cameras"),c.exports=d},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="enterfullscreen"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="fullscreenfailed"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="fullscreenunsupported"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="leavefullscreen"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="orientationchange"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resize"},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Config:e(346),CreateRenderer:e(366),DebugHeader:e(384),Events:e(22),TimeStep:e(385),VisibilityHandler:e(387)}},function(c,R){var e=c.exports={},o,g;function l(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=l}catch{o=l}try{typeof clearTimeout=="function"?g=clearTimeout:g=h}catch{g=h}})();function i(E){if(o===setTimeout)return setTimeout(E,0);if((o===l||!o)&&setTimeout)return o=setTimeout,setTimeout(E,0);try{return o(E,0)}catch{try{return o.call(null,E,0)}catch{return o.call(this,E,0)}}}function s(E){if(g===clearTimeout)return clearTimeout(E);if((g===h||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(E);try{return g(E)}catch{try{return g.call(null,E)}catch{return g.call(this,E)}}}var n=[],d=!1,a,u=-1;function f(){!d||!a||(d=!1,a.length?n=a.concat(n):u=-1,n.length&&p())}function p(){if(!d){var E=i(f);d=!0;for(var x=n.length;x;){for(a=n,n=[];++u<x;)a&&a[u].run();u=-1,x=n.length}a=null,d=!1,s(E)}}e.nextTick=function(E){var x=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)x[y-1]=arguments[y];n.push(new v(E,x)),n.length===1&&!d&&i(p)};function v(E,x){this.fun=E,this.array=x}v.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function m(){}e.on=m,e.addListener=m,e.once=m,e.off=m,e.removeListener=m,e.removeAllListeners=m,e.emit=m,e.prependListener=m,e.prependOnceListener=m,e.listeners=function(E){return[]},e.binding=function(E){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(E){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(136),g={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function l(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(g.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(g.mspointer=!0),navigator.getGamepads&&(g.gamepads=!0),"onwheel"in window||o.ie&&"WheelEvent"in window?g.wheelEvent="wheel":"onmousewheel"in window?g.wheelEvent="mousewheel":o.firefox&&"MouseScrollEvent"in window&&(g.wheelEvent="DOMMouseScroll")),g}c.exports=l()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(136),g={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function l(){if(typeof importScripts=="function")return g;g.audioData=!!window.Audio,g.webAudio=!!(window.AudioContext||window.webkitAudioContext);var h=document.createElement("audio"),i=!!h.canPlayType;try{if(i&&(h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(g.ogg=!0),(h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||h.canPlayType("audio/opus;").replace(/^no$/,""))&&(g.opus=!0),h.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(g.mp3=!0),h.canPlayType("audio/wav").replace(/^no$/,"")&&(g.wav=!0),(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/aac;").replace(/^no$/,""))&&(g.m4a=!0),h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(g.webm=!0),h.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(o.edge)g.dolby=!0;else if(o.safari&&o.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var s=parseInt(RegExp.$1,10),n=parseInt(RegExp.$2,10);(s===10&&n>=11||s>10)&&(g.dolby=!0)}}}catch{}return g}c.exports=l()},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function o(){if(typeof importScripts=="function")return e;var g=document.createElement("video"),l=!!g.canPlayType;try{l&&(g.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(e.ogg=!0),g.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(e.h264=!0,e.mp4=!0),g.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(e.webm=!0),g.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(e.vp9=!0),g.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(e.hls=!0))}catch{}return e}c.exports=o()},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={available:!1,cancel:"",keyboard:!1,request:""};function o(){if(typeof importScripts=="function")return e;var g,l="Fullscreen",h="FullScreen",i=["request"+l,"request"+h,"webkitRequest"+l,"webkitRequest"+h,"msRequest"+l,"msRequest"+h,"mozRequest"+h,"mozRequest"+l];for(g=0;g<i.length;g++)if(document.documentElement[i[g]]){e.available=!0,e.request=i[g];break}var s=["cancel"+h,"exit"+l,"webkitCancel"+h,"webkitExit"+l,"msCancel"+h,"msExit"+l,"mozCancel"+h,"mozExit"+l];if(e.available){for(g=0;g<s.length;g++)if(document[s[g]]){e.cancel=s[g];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(e.keyboard=!0),Object.defineProperty(e,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),e}c.exports=o()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Between:e(349),BetweenPoints:e(350),BetweenPointsY:e(813),BetweenY:e(814),CounterClockwise:e(815),Normalize:e(351),Random:e(816),RandomDegrees:e(817),Reverse:e(818),RotateTo:e(819),ShortestBetween:e(820),Wrap:e(269),WrapDegrees:e(270)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return Math.atan2(g.x-o.x,g.y-o.y)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){return Math.atan2(l-o,h-g)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(14),g=function(l){return l>Math.PI&&(l-=o.PI2),Math.abs(((l+o.TAU)%o.PI2-o.PI2)%o.PI2)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(137),g=function(){return o(-Math.PI,Math.PI)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(137),g=function(){return o(-180,180)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(351),g=function(l){return o(l+Math.PI)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(14),g=function(l,h,i){return i===void 0&&(i=.05),l===h||(Math.abs(h-l)<=i||Math.abs(h-l)>=o.PI2-i?l=h:(Math.abs(h-l)>Math.PI&&(h<l?h+=o.PI2:h-=o.PI2),h>l?l+=i:h<l&&(l-=i))),l};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=g-o;if(l===0)return 0;var h=Math.floor((l- -180)/360);return l-h*360};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Between:e(50),BetweenPoints:e(352),BetweenPointsSquared:e(822),Chebyshev:e(823),Power:e(824),Snake:e(825),Squared:e(353)}},function(c,R){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.x-g.x,h=o.y-g.y;return l*l+h*h};c.exports=e},function(c,R){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){return Math.max(Math.abs(o-l),Math.abs(g-h))};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i){return i===void 0&&(i=2),Math.sqrt(Math.pow(l-o,i)+Math.pow(h-g,i))};c.exports=e},function(c,R){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){return Math.abs(o-l)+Math.abs(g-h)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Back:e(334),Bounce:e(335),Circular:e(336),Cubic:e(337),Elastic:e(338),Expo:e(339),Linear:e(340),Quadratic:e(341),Quartic:e(342),Quintic:e(343),Sine:e(344),Stepped:e(345)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Ceil:e(828),Equal:e(124),Floor:e(829),GreaterThan:e(354),LessThan:e(355)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g===void 0&&(g=1e-4),Math.ceil(o-g)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g===void 0&&(g=1e-4),Math.floor(o+g)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Bezier:e(831),CatmullRom:e(832),CubicBezier:e(358),Linear:e(833),QuadraticBezier:e(359),SmoothStep:e(360),SmootherStep:e(834)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(356),g=function(l,h){for(var i=0,s=l.length-1,n=0;n<=s;n++)i+=Math.pow(1-h,s-n)*Math.pow(h,n)*l[n]*o(s,n);return i};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(194),g=function(l,h){var i=l.length-1,s=i*h,n=Math.floor(s);return l[0]===l[i]?(h<0&&(n=Math.floor(s=i*(1+h))),o(s-n,l[(n-1+i)%i],l[n],l[(n+1)%i],l[(n+2)%i])):h<0?l[0]-(o(-s,l[0],l[0],l[1],l[1])-l[0]):h>1?l[i]-(o(s-i,l[i],l[i],l[i-1],l[i-1])-l[i]):o(s-n,l[n?n-1:0],l[n],l[i<n+1?i:n+1],l[i<n+2?i:n+2])};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(135),g=function(l,h){var i=l.length-1,s=i*h,n=Math.floor(s);return h<0?o(l[0],l[1],s):h>1?o(l[i],l[i-1],i-s):o(l[n],l[n+1>i?i:n+1],s-n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(183),g=function(l,h,i){return h+(i-h)*o(l,0,1)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={GetNext:e(361),IsSize:e(138),IsValue:e(836)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o>0&&(o&o-1)===0};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Ceil:e(139),Floor:e(76),To:e(838)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){return l===void 0&&(l=0),g===0?o:(o-=l,o=g*Math.round(o/g),h?(l+o)/g:l+o)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=new o({initialize:function(h){h===void 0&&(h=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],h&&this.init(h)},rnd:function(){var l=2091639*this.s0+this.c*23283064365386963e-26;return this.c=l|0,this.s0=this.s1,this.s1=this.s2,this.s2=l-this.c,this.s2},hash:function(l){var h,i=this.n;l=l.toString();for(var s=0;s<l.length;s++)i+=l.charCodeAt(s),h=.02519603282416938*i,i=h>>>0,h-=i,h*=i,i=h>>>0,h-=i,i+=h*4294967296;return this.n=i,(i>>>0)*23283064365386963e-26},init:function(l){typeof l=="string"?this.state(l):this.sow(l)},sow:function(l){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!l)for(var h=0;h<l.length&&l[h]!=null;h++){var i=l[h];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(l,h){return Math.floor(this.realInRange(0,h-l+1)+l)},between:function(l,h){return Math.floor(this.realInRange(0,h-l+1)+l)},realInRange:function(l,h){return this.frac()*(h-l)+l},normal:function(){return 1-2*this.frac()},uuid:function(){var l="",h="";for(h=l="";l++<36;h+=~l%5|l*3&4?(l^15?8^this.frac()*(l^20?16:4):4).toString(16):"-");return h},pick:function(l){return l[this.integerInRange(0,l.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(l){return l[~~(Math.pow(this.frac(),2)*(l.length-1)+.5)]},timestamp:function(l,h){return this.realInRange(l||9466848e5,h||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(l){return typeof l=="string"&&l.match(/^!rnd/)&&(l=l.split(","),this.c=parseFloat(l[1]),this.s0=parseFloat(l[2]),this.s1=parseFloat(l[3]),this.s2=parseFloat(l[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(l){for(var h=l.length-1,i=h;i>0;i--){var s=Math.floor(this.frac()*(i+1)),n=l[s];l[s]=l[i],l[i]=n}return l}});c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){for(var g=0,l=0;l<o.length;l++)g+=+o[l];return g/o.length};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){g===void 0&&(g=0),l===void 0&&(l=10);var h=Math.pow(l,-g);return Math.ceil(o*h)/h};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return Math.abs(o-g)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(18),g=e(0),l=e(69),h=e(1),i=new l,s=new g({initialize:function n(d,a,u,f){d===void 0&&(d=0),a===void 0&&(a=0),u===void 0&&(u=0),f===void 0&&(f=n.DefaultOrder),this._x=d,this._y=a,this._z=u,this._order=f,this.onChangeCallback=h},x:{get:function(){return this._x},set:function(n){this._x=n,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(n){this._y=n,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(n){this._z=n,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(n){this._order=n,this.onChangeCallback(this)}},set:function(n,d,a,u){return u===void 0&&(u=this._order),this._x=n,this._y=d,this._z=a,this._order=u,this.onChangeCallback(this),this},copy:function(n){return this.set(n.x,n.y,n.z,n.order)},setFromQuaternion:function(n,d,a){return d===void 0&&(d=this._order),a===void 0&&(a=!1),i.fromQuat(n),this.setFromRotationMatrix(i,d,a)},setFromRotationMatrix:function(n,d,a){d===void 0&&(d=this._order),a===void 0&&(a=!1);var u=n.val,f=u[0],p=u[4],v=u[8],m=u[1],E=u[5],x=u[9],y=u[2],S=u[6],C=u[10],I=0,O=0,M=0,L=.99999;switch(d){case"XYZ":{O=Math.asin(o(v,-1,1)),Math.abs(v)<L?(I=Math.atan2(-x,C),M=Math.atan2(-p,f)):I=Math.atan2(S,E);break}case"YXZ":{I=Math.asin(-o(x,-1,1)),Math.abs(x)<L?(O=Math.atan2(v,C),M=Math.atan2(m,E)):O=Math.atan2(-y,f);break}case"ZXY":{I=Math.asin(o(S,-1,1)),Math.abs(S)<L?(O=Math.atan2(-y,C),M=Math.atan2(-p,E)):M=Math.atan2(m,f);break}case"ZYX":{O=Math.asin(-o(y,-1,1)),Math.abs(y)<L?(I=Math.atan2(S,C),M=Math.atan2(m,f)):M=Math.atan2(-p,E);break}case"YZX":{M=Math.asin(o(m,-1,1)),Math.abs(m)<L?(I=Math.atan2(-x,E),O=Math.atan2(-y,f)):O=Math.atan2(v,C);break}case"XZY":{M=Math.asin(-o(p,-1,1)),Math.abs(p)<L?(I=Math.atan2(S,E),O=Math.atan2(v,f)):I=Math.atan2(-x,C);break}}return this._x=I,this._y=O,this._z=M,this._order=d,a&&this.onChangeCallback(this),this}});s.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],s.DefaultOrder="XYZ",c.exports=s},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){g===void 0&&(g=0),l===void 0&&(l=10);var h=Math.pow(l,-g);return Math.floor(o*h)/h};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o/g/1e3};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o==parseFloat(o)?!(o%2):void 0};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o===parseFloat(o)?!(o%2):void 0};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return Math.min(o+g,l)};c.exports=e},function(c,R){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g=o.length;if(g===0)return 0;o.sort(function(h,i){return h-i});var l=Math.floor(g/2);return g%2===0?(o[l]+o[l-1])/2:o[l]};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return Math.max(o-g,l)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){l===void 0&&(l=g+1);var i=(o-g)/(l-g);return i>1?h!==void 0?(i=(h-o)/(h-l),i<0&&(i=0)):i=1:i<0&&(i=0),i};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){g===void 0&&(g=1);var l=Math.random()*2*Math.PI;return o.x=Math.cos(l)*g,o.y=Math.sin(l)*g,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){g===void 0&&(g=1);var l=Math.random()*2*Math.PI,h=Math.random()*2-1,i=Math.sqrt(1-h*h)*g;return o.x=Math.cos(l)*i,o.y=Math.sin(l)*i,o.z=h*g,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g===void 0&&(g=1),o.x=(Math.random()*2-1)*g,o.y=(Math.random()*2-1)*g,o.z=(Math.random()*2-1)*g,o.w=(Math.random()*2-1)*g,o};c.exports=e},function(c,R){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i){return o.x=g+i*Math.cos(h),o.y=l+i*Math.sin(h),o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){g===void 0&&(g=0),l===void 0&&(l=10);var h=Math.pow(l,-g);return Math.round(o*h)/h};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){g===void 0&&(g=1),l===void 0&&(l=1),h===void 0&&(h=1),h*=Math.PI/o;for(var i=[],s=[],n=0;n<o;n++)l-=g*h,g+=l*h,i[n]=l,s[n]=g;return{sin:s,cos:i,length:o}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(3),g=function(l,h,i,s){s===void 0&&(s=new o);var n=0,d=0,a=h*i;return l>0&&l<=a&&(l>h-1?(d=Math.floor(l/h),n=l-d*h):n=l),s.set(n,d)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return Math.abs(o-g)<=l};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(39),g=e(69),l=e(365),h=new g,i=new l,s=new o,n=function(d,a,u){return i.setAxisAngle(a,u),h.fromRotationTranslation(i,s.set(0,0,0)),d.transformMat4(h)};c.exports=n},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="addtexture"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="onerror"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="onload"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="ready"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="removetexture"},function(c,R){c.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelineafterflush"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelinebeforeflush"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelinebind"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelineboot"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelinedestroy"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelinerebind"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelineresize"},function(c,R){c.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(c,R){c.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={GenerateTexture:e(388),Palettes:e(889)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ARNE16:e(389),C64:e(890),CGA:e(891),JMP:e(892),MSX:e(893)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Path:e(895),MoveTo:e(393),CubicBezier:e(390),Curve:e(94),Ellipse:e(391),Line:e(392),QuadraticBezier:e(394),Spline:e(395)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(390),l=e(391),h=e(5),i=e(392),s=e(393),n=e(394),d=e(10),a=e(395),u=e(3),f=e(14),p=new o({initialize:function(m,E){m===void 0&&(m=0),E===void 0&&(E=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new u,this._tmpVec2A=new u,this._tmpVec2B=new u,typeof m=="object"?this.fromJSON(m):this.startPoint.set(m,E)},add:function(v){return this.curves.push(v),this},circleTo:function(v,m,E){return m===void 0&&(m=!1),this.ellipseTo(v,v,0,360,m,E)},closePath:function(){var v=this.curves[0].getPoint(0),m=this.curves[this.curves.length-1].getPoint(1);return v.equals(m)||this.curves.push(new i(m,v)),this},cubicBezierTo:function(v,m,E,x,y,S){var C=this.getEndPoint(),I,O,M;return v instanceof u?(I=v,O=m,M=E):(I=new u(E,x),O=new u(y,S),M=new u(v,m)),this.add(new g(C,I,O,M))},quadraticBezierTo:function(v,m,E,x){var y=this.getEndPoint(),S,C;return v instanceof u?(S=v,C=m):(S=new u(E,x),C=new u(v,m)),this.add(new n(y,S,C))},draw:function(v,m){for(var E=0;E<this.curves.length;E++){var x=this.curves[E];!x.active||x.draw(v,m)}return v},ellipseTo:function(v,m,E,x,y,S){var C=new l(0,0,v,m,E,x,y,S),I=this.getEndPoint(this._tmpVec2A),O=C.getStartPoint(this._tmpVec2B);return I.subtract(O),C.x=I.x,C.y=I.y,this.add(C)},fromJSON:function(v){this.curves=[],this.cacheLengths=[],this.startPoint.set(v.x,v.y),this.autoClose=v.autoClose;for(var m=0;m<v.curves.length;m++){var E=v.curves[m];switch(E.type){case"LineCurve":this.add(i.fromJSON(E));break;case"EllipseCurve":this.add(l.fromJSON(E));break;case"SplineCurve":this.add(a.fromJSON(E));break;case"CubicBezierCurve":this.add(g.fromJSON(E));break;case"QuadraticBezierCurve":this.add(n.fromJSON(E));break}}return this},getBounds:function(v,m){v===void 0&&(v=new d),m===void 0&&(m=16),v.x=Number.MAX_VALUE,v.y=Number.MAX_VALUE;for(var E=new d,x=f.MIN_SAFE_INTEGER,y=f.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var C=this.curves[S];!C.active||(C.getBounds(E,m),v.x=Math.min(v.x,E.x),v.y=Math.min(v.y,E.y),x=Math.max(x,E.right),y=Math.max(y,E.bottom))}return v.right=x,v.bottom=y,v},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var v=[],m=0,E=0;E<this.curves.length;E++)m+=this.curves[E].getLength(),v.push(m);return this.cacheLengths=v,v},getEndPoint:function(v){return v===void 0&&(v=new u),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,v):v.copy(this.startPoint),v},getLength:function(){var v=this.getCurveLengths();return v[v.length-1]},getPoint:function(v,m){m===void 0&&(m=new u);for(var E=v*this.getLength(),x=this.getCurveLengths(),y=0;y<x.length;){if(x[y]>=E){var S=x[y]-E,C=this.curves[y],I=C.getLength(),O=I===0?0:1-S/I;return C.getPointAt(O,m)}y++}return null},getPoints:function(v){v===void 0&&(v=12);for(var m=[],E,x=0;x<this.curves.length;x++){var y=this.curves[x];if(!!y.active)for(var S=y.getResolution(v),C=y.getPoints(S),I=0;I<C.length;I++){var O=C[I];E&&E.equals(O)||(m.push(O),E=O)}}return this.autoClose&&m.length>1&&!m[m.length-1].equals(m[0])&&m.push(m[0]),m},getRandomPoint:function(v){return v===void 0&&(v=new u),this.getPoint(Math.random(),v)},getSpacedPoints:function(v){v===void 0&&(v=40);for(var m=[],E=0;E<=v;E++)m.push(this.getPoint(E/v));return this.autoClose&&m.push(m[0]),m},getStartPoint:function(v){return v===void 0&&(v=new u),v.copy(this.startPoint)},getTangent:function(v,m){m===void 0&&(m=new u);for(var E=v*this.getLength(),x=this.getCurveLengths(),y=0;y<x.length;){if(x[y]>=E){var S=x[y]-E,C=this.curves[y],I=C.getLength(),O=I===0?0:1-S/I;return C.getTangentAt(O,m)}y++}return null},lineTo:function(v,m){v instanceof u?this._tmpVec2B.copy(v):this._tmpVec2B.set(v,m);var E=this.getEndPoint(this._tmpVec2A);return this.add(new i([E.x,E.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(v){return v.unshift(this.getEndPoint()),this.add(new a(v))},moveTo:function(v,m){return v instanceof u?this.add(new s(v.x,v.y)):this.add(new s(v,m))},toJSON:function(){for(var v=[],m=0;m<this.curves.length;m++)v.push(this.curves[m].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:v}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});h.register("path",function(v,m){return new p(v,m)}),c.exports=p},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={DataManager:e(101),DataManagerPlugin:e(897),Events:e(315)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(101),l=e(24),h=e(20),i=new o({Extends:g,initialize:function(n){g.call(this,n,n.sys.events),this.scene=n,this.systems=n.sys,n.sys.events.once(h.BOOT,this.boot,this),n.sys.events.on(h.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){g.prototype.destroy.call(this),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});l.register("DataManagerPlugin",i,"data"),c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Align:e(899),BaseShader:e(396),Bounds:e(902),Canvas:e(906),Color:e(397),ColorMatrix:e(198),Masks:e(916),RGB:e(200)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(123),g=e(17),l={In:e(900),To:e(901)};l=g(!1,l,o),c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BottomCenter:e(290),BottomLeft:e(291),BottomRight:e(292),Center:e(293),LeftCenter:e(295),QuickSet:e(289),RightCenter:e(296),TopCenter:e(297),TopLeft:e(298),TopRight:e(299)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BottomCenter:e(277),BottomLeft:e(278),BottomRight:e(279),LeftBottom:e(280),LeftCenter:e(281),LeftTop:e(282),QuickSet:e(276),RightBottom:e(283),RightCenter:e(284),RightTop:e(285),TopCenter:e(286),TopLeft:e(287),TopRight:e(288)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CenterOn:e(294),GetBottom:e(42),GetBounds:e(903),GetCenterX:e(87),GetCenterY:e(89),GetLeft:e(43),GetOffsetX:e(904),GetOffsetY:e(905),GetRight:e(44),GetTop:e(45),SetBottom:e(55),SetCenterX:e(88),SetCenterY:e(90),SetLeft:e(53),SetRight:e(54),SetTop:e(52)}},function(c,R,e){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(42),g=e(43),l=e(44),h=e(45),i=function(s,n){n===void 0&&(n={});var d=g(s),a=h(s);return n.x=d,n.y=a,n.width=l(s)-d,n.height=o(s)-a,n};c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.width*o.originX};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.height*o.originY};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CanvasInterpolation:e(367),CanvasPool:e(31),Smoothing:e(192),TouchAction:e(907),UserSelect:e(908)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g===void 0&&(g="none"),o.style.msTouchAction=g,o.style["ms-touch-action"]=g,o.style["touch-action"]=g,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){g===void 0&&(g="none");var l=["-webkit-","-khtml-","-moz-","-ms-",""];return l.forEach(function(h){o.style[h+"user-select"]=g}),o.style["-webkit-touch-callout"]=g,o.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(103),g=function(l){l===void 0&&(l=1024);var h=[],i=255,s,n=255,d=0,a=0;for(s=0;s<=i;s++)h.push({r:n,g:s,b:a,color:o(n,s,a)});for(d=255,s=i;s>=0;s--)h.push({r:s,g:d,b:a,color:o(s,d,a)});for(n=0,s=0;s<=i;s++,d--)h.push({r:n,g:d,b:s,color:o(n,d,s)});for(d=0,a=255,s=0;s<=i;s++,a--,n++)h.push({r:n,g:d,b:a,color:o(n,d,a)});if(l===1024)return h;var u=[],f=0,p=1024/l;for(s=0;s<l;s++)u.push(h[Math.floor(f)]),f+=p;return u};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g={r:o>>16&255,g:o>>8&255,b:o&255,a:255};return o>16777215&&(g.a=o>>>24),g};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(38),g=e(399),l=function(h,i,s){var n=s,d=s,a=s;if(i!==0){var u=s<.5?s*(1+i):s+i-s*i,f=2*s-u;n=g(f,u,h+1/3),d=g(f,u,h),a=g(f,u,h-1/3)}var p=new o;return p.setGLTo(n,d,a,1)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(188),g=function(l,h){l===void 0&&(l=1),h===void 0&&(h=1);for(var i=[],s=0;s<=359;s++)i.push(o(s/359,l,h));return i};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(135),g=function(i,s,n,d,a,u,f,p){f===void 0&&(f=100),p===void 0&&(p=0);var v=p/f;return{r:o(i,d,v),g:o(s,a,v),b:o(n,u,v)}},l=function(i,s,n,d){return n===void 0&&(n=100),d===void 0&&(d=0),g(i.r,i.g,i.b,s.r,s.g,s.b,n,d)},h=function(i,s,n,d,a,u){return a===void 0&&(a=100),u===void 0&&(u=0),g(i.r,i.g,i.b,s,n,d,a,u)};c.exports={RGBWithRGB:g,ColorWithRGB:h,ColorWithColor:l}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(195),g=e(38),l=function(h,i){return h===void 0&&(h=0),i===void 0&&(i=255),new g(o(h,i),o(h,i),o(h,i))};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(398),g=function(l,h,i,s,n){return s===void 0&&(s=255),n===void 0&&(n="#"),n==="#"?"#"+((1<<24)+(l<<16)+(h<<8)+i).toString(16).slice(1,7):"0x"+o(s)+o(l)+o(h)+o(i)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BitmapMask:e(310),GeometryMask:e(311)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={AddToDOM:e(142),DOMContentLoaded:e(400),GetInnerHeight:e(401),GetScreenOrientation:e(402),GetTarget:e(407),ParseXML:e(408),RemoveFromDOM:e(202),RequestAnimationFrame:e(386)};c.exports=o},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={EventEmitter:e(919)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(9),l=e(24),h=new o({Extends:g,initialize:function(){g.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});l.register("EventEmitter",h,"events"),c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(142),g=e(321),l=e(325),h=e(31),i=e(0),s=e(346),n=e(921),d=e(366),a=e(101),u=e(384),f=e(347),p=e(400),v=e(9),m=e(22),E=e(409),x=e(24),y=e(414),S=e(415),C=e(417),I=e(106),O=e(422),M=e(385),L=e(387),P=e(426),b=new i({initialize:function(U){this.config=new s(U),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new v,this.anims=new g(this),this.textures=new O(this),this.cache=new l(this),this.registry=new a(this),this.input=new E(this,this.config),this.scene=new C(this,this.config.sceneConfig),this.device=f,this.scale=new S(this,this.config),this.sound=null,this.sound=P.create(this),this.loop=new M(this,this.config.fps),this.plugins=new y(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,p(this.boot.bind(this))},boot:function(){if(!x.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),d(this),n(this),u(this),o(this.canvas,this.config.parent),this.textures.once(I.READY,this.texturesReady,this),this.events.emit(m.BOOT)},texturesReady:function(){this.events.emit(m.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),L(this);var B=this.events;B.on(m.HIDDEN,this.onHidden,this),B.on(m.VISIBLE,this.onVisible,this),B.on(m.BLUR,this.onBlur,this),B.on(m.FOCUS,this.onFocus,this)},step:function(B,U){if(this.pendingDestroy)return this.runDestroy();var H=this.events;H.emit(m.PRE_STEP,B,U),H.emit(m.STEP,B,U),this.scene.update(B,U),H.emit(m.POST_STEP,B,U);var Y=this.renderer;Y.preRender(),H.emit(m.PRE_RENDER,Y,B,U),this.scene.render(Y),Y.postRender(),H.emit(m.POST_RENDER,Y,B,U)},headlessStep:function(B,U){if(this.pendingDestroy)return this.runDestroy();var H=this.events;H.emit(m.PRE_STEP,B,U),H.emit(m.STEP,B,U),this.scene.update(B,U),H.emit(m.POST_STEP,B,U),H.emit(m.PRE_RENDER),H.emit(m.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(m.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(m.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,U){U===void 0&&(U=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=U},runDestroy:function(){this.scene.destroy(),this.events.emit(m.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(h.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});c.exports=b},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(142),g=function(l){var h=l.config;if(!(!h.parent||!h.domCreateContainer)){var i=document.createElement("div");i.style.cssText=["display: block;","width: "+l.scale.width+"px;","height: "+l.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+h.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),l.domContainer=i,o(i,h.parent)}};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="boot"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="destroy"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragend"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragenter"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="drag"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragleave"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragover"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragstart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="drop"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameout"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameover"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameobjectdown"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragend"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragenter"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="drag"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragleave"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragover"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragstart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="drop"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameobjectmove"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameobjectout"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameobjectover"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerdown"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointermove"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerout"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerover"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerup"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="wheel"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameobjectup"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameobjectwheel"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="boot"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="process"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="update"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerdown"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerdownoutside"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointermove"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerout"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerover"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerup"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerupoutside"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="wheel"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerlockchange"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="preupdate"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="shutdown"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="start"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="update"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="addfile"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="complete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="filecomplete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="filecomplete-"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="loaderror"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="load"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="fileprogress"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="postprocess"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="progress"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="start"},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};c.exports=o},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){if(!l.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var h=o.source[g];o.add("__BASE",g,0,0,h.width,h.height);for(var i=l.getElementsByTagName("SubTexture"),s,n=0;n<i.length;n++){var d=i[n].attributes,a=d.name.value,u=parseInt(d.x.value,10),f=parseInt(d.y.value,10),p=parseInt(d.width.value,10),v=parseInt(d.height.value,10);if(s=o.add(a,g,u,f,p,v),d.frameX){var m=Math.abs(parseInt(d.frameX.value,10)),E=Math.abs(parseInt(d.frameY.value,10)),x=parseInt(d.frameWidth.value,10),y=parseInt(d.frameHeight.value,10);s.setTrim(p,v,m,E,x,y)}}return o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.source[g];return o.add("__BASE",g,0,0,l.width,l.height),o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.source[g];return o.add("__BASE",g,0,0,l.width,l.height),o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(77),g=function(l,h,i){if(!i.frames&&!i.textures){console.warn("Invalid Texture Atlas JSON Array");return}var s=l.source[h];l.add("__BASE",h,0,0,s.width,s.height);for(var n=Array.isArray(i.textures)?i.textures[h].frames:i.frames,d,a=0;a<n.length;a++){var u=n[a];d=l.add(u.filename,h,u.frame.x,u.frame.y,u.frame.w,u.frame.h),u.trimmed&&d.setTrim(u.sourceSize.w,u.sourceSize.h,u.spriteSourceSize.x,u.spriteSourceSize.y,u.spriteSourceSize.w,u.spriteSourceSize.h),u.rotated&&(d.rotated=!0,d.updateUVsInverted());var f=u.anchor||u.pivot;f&&(d.customPivot=!0,d.pivotX=f.x,d.pivotY=f.y),d.customData=o(u)}for(var p in i)p!=="frames"&&(Array.isArray(i[p])?l.customData[p]=i[p].slice(0):l.customData[p]=i[p]);return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(77),g=function(l,h,i){if(!i.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var s=l.source[h];l.add("__BASE",h,0,0,s.width,s.height);var n=i.frames,d;for(var a in n)if(!!n.hasOwnProperty(a)){var u=n[a];d=l.add(a,h,u.frame.x,u.frame.y,u.frame.w,u.frame.h),u.trimmed&&d.setTrim(u.sourceSize.w,u.sourceSize.h,u.spriteSourceSize.x,u.spriteSourceSize.y,u.spriteSourceSize.w,u.spriteSourceSize.h),u.rotated&&(d.rotated=!0,d.updateUVsInverted());var f=u.anchor||u.pivot;f&&(d.customPivot=!0,d.pivotX=f.x,d.pivotY=f.y),d.customData=o(u)}for(var p in i)p!=="frames"&&(Array.isArray(i[p])?l.customData[p]=i[p].slice(0):l.customData[p]=i[p]);return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(2),g=function(l,h,i,s,n,d,a){var u=o(a,"frameWidth",null),f=o(a,"frameHeight",u);if(u===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var p=l.source[h];l.add("__BASE",h,0,0,p.width,p.height);var v=o(a,"startFrame",0),m=o(a,"endFrame",-1),E=o(a,"margin",0),x=o(a,"spacing",0),y=Math.floor((n-E+x)/(u+x)),S=Math.floor((d-E+x)/(f+x)),C=y*S;C===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",l.key),(v>C||v<-C)&&(v=0),v<0&&(v=C+v),m!==-1&&(C=v+(m+1));for(var I=E,O=E,M=0,L=0,P=0;P<C;P++){M=0,L=0;var b=I+u,B=O+f;b>n&&(M=b-n),B>d&&(L=B-d),l.add(P,h,i+I,s+O,u-M,f-L),I+=u+x,I+u>n&&(I=E,O+=f+x)}return l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(2),g=function(l,h,i){var s=o(i,"frameWidth",null),n=o(i,"frameHeight",s);if(!s)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var d=l.source[0];l.add("__BASE",0,0,0,d.width,d.height),o(i,"startFrame",0),o(i,"endFrame",-1);for(var a=o(i,"margin",0),u=o(i,"spacing",0),f=h.cutX,p=h.cutY,v=h.cutWidth,m=h.cutHeight,E=h.realWidth,x=h.realHeight,y=Math.floor((E-a+u)/(s+u)),S=Math.floor((x-a+u)/(n+u)),C=h.x,I=s-C,O=s-(E-v-C),M=h.y,L=n-M,P=n-(x-m-M),b,B=a,U=a,H=0,Y=h.sourceIndex,j=0;j<S;j++){for(var _=j===0,w=j===S-1,D=0;D<y;D++){var N=D===0,G=D===y-1;if(b=l.add(H,Y,f+B,p+U,s,n),N||_||G||w){var k=N?C:0,V=_?M:0,X=0,K=0;N&&(X+=s-I),G&&(X+=s-O),_&&(K+=n-L),w&&(K+=n-P);var tt=s-X,st=n-K;b.cutWidth=tt,b.cutHeight=st,b.setTrim(s,n,k,V,tt,st)}B+=u,N?B+=I:G?B+=O:B+=s,H++}B=a,U+=u,_?U+=L:w?U+=P:U+=n}return l};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=0,o=function(l,h,i,s){var n=e-s.y-s.height;l.add(i,h,s.x,n,s.width,s.height)},g=function(l,h,i){var s=l.source[h];l.add("__BASE",h,0,0,s.width,s.height),e=s.height;for(var n=i.split(`
`),d=/^[ ]*(- )*(\w+)+[: ]+(.*)/,a="",u="",f={x:0,y:0,width:0,height:0},p=0;p<n.length;p++){var v=n[p].match(d);if(!!v){var m=v[1]==="- ",E=v[2],x=v[3];if(m&&(u!==a&&(o(l,h,u,f),a=u),f={x:0,y:0,width:0,height:0}),E==="name"){u=x;continue}switch(E){case"x":case"y":case"width":case"height":f[E]=parseInt(x,10);break}}}return u!==a&&o(l,h,u,f),l};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="complete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="decoded"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="decodedall"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="destroy"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="detune"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="detune"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="mute"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="rate"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="volume"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="loop"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="looped"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="mute"},function(c,R){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pan"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pauseall"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pause"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="play"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="rate"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resumeall"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resume"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="seek"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="stopall"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="stop"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="unlocked"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="volume"},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={Events:e(75),DisplayList:e(1012),GameObjectCreator:e(16),GameObjectFactory:e(5),UpdateList:e(1040),Components:e(11),GetCalcMatrix:e(19),BuildGameObject:e(28),BuildGameObjectAnimation:e(439),GameObject:e(15),BitmapText:e(148),Blitter:e(213),Bob:e(440),Container:e(214),DOMElement:e(442),DynamicBitmapText:e(215),Extern:e(444),Graphics:e(216),Group:e(113),Image:e(125),Layer:e(219),Particles:e(1074),PathFollower:e(457),RenderTexture:e(221),RetroFont:e(1082),Rope:e(223),Sprite:e(73),Text:e(224),GetTextSize:e(458),MeasureText:e(460),TextStyle:e(459),TileSprite:e(225),Zone:e(129),Video:e(226),Shape:e(34),Arc:e(461),Curve:e(462),Ellipse:e(463),Grid:e(464),IsoBox:e(465),IsoTriangle:e(466),Line:e(467),Polygon:e(468),Rectangle:e(473),Star:e(474),Triangle:e(475),Factories:{Blitter:e(1130),Container:e(1131),DOMElement:e(1132),DynamicBitmapText:e(1133),Extern:e(1134),Graphics:e(1135),Group:e(1136),Image:e(1137),Layer:e(1138),Particles:e(1139),PathFollower:e(1140),RenderTexture:e(1141),Rope:e(1142),Sprite:e(1143),StaticBitmapText:e(1144),Text:e(1145),TileSprite:e(1146),Zone:e(1147),Video:e(1148),Arc:e(1149),Curve:e(1150),Ellipse:e(1151),Grid:e(1152),IsoBox:e(1153),IsoTriangle:e(1154),Line:e(1155),Polygon:e(1156),Rectangle:e(1157),Star:e(1158),Triangle:e(1159)},Creators:{Blitter:e(1160),Container:e(1161),DynamicBitmapText:e(1162),Graphics:e(1163),Group:e(1164),Image:e(1165),Layer:e(1166),Particles:e(1167),RenderTexture:e(1168),Rope:e(1169),Sprite:e(1170),StaticBitmapText:e(1171),Text:e(1172),TileSprite:e(1173),Zone:e(1174),Video:e(1175)}};o.Shader=e(229),o.Mesh=e(230),o.PointLight=e(150),o.Factories.Shader=e(1184),o.Factories.Mesh=e(1185),o.Factories.PointLight=e(1186),o.Creators.Shader=e(1187),o.Creators.Mesh=e(1188),o.Creators.PointLight=e(1189),o.Light=e(481),o.LightsManager=e(482),o.LightsPlugin=e(1190),c.exports=o},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(110),l=e(24),h=e(75),i=e(20),s=e(79),n=new o({Extends:g,initialize:function(a){g.call(this,a),this.sortChildrenFlag=!1,this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(i.BOOT,this.boot,this),this.events.on(i.START,this.start,this)},boot:function(){this.events.once(i.DESTROY,this.destroy,this)},addChildCallback:function(d){d.displayList&&d.displayList!==this&&d.removeFromDisplayList(),d.displayList||(this.queueDepthSort(),d.displayList=this,d.emit(h.ADDED_TO_SCENE,d,this.scene),this.events.emit(i.ADDED_TO_SCENE,d,this.scene))},removeChildCallback:function(d){this.queueDepthSort(),d.displayList=null,d.emit(h.REMOVED_FROM_SCENE,d,this.scene),this.events.emit(i.REMOVED_FROM_SCENE,d,this.scene)},start:function(){this.events.once(i.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(s(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(d,a){return d._depth-a._depth},getChildren:function(){return this.list},shutdown:function(){for(var d=this.list,a=d.length;a--;)d[a].destroy(!0);d.length=0,this.events.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(i.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});l.register("DisplayList",n,"displayList"),c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CheckMatrix:e(209),MatrixToString:e(1014),ReverseColumns:e(1015),ReverseRows:e(1016),Rotate180:e(1017),RotateLeft:e(1018),RotateMatrix:e(147),RotateRight:e(1019),Translate:e(1020),TransposeMatrix:e(435)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(186),g=e(209),l=function(h){var i="";if(!g(h))return i;for(var s=0;s<h.length;s++){for(var n=0;n<h[s].length;n++){var d=h[s][n].toString();d!=="undefined"?i+=o(d,2):i+="?",n<h[s].length-1&&(i+=" |")}if(s<h.length-1){i+=`
`;for(var a=0;a<h[s].length;a++)i+="---",a<h[s].length-1&&(i+="+");i+=`
`}}return i};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.reverse()};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){for(var g=0;g<o.length;g++)o[g].reverse();return o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(147),g=function(l){return o(l,180)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(147),g=function(l){return o(l,90)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(147),g=function(l){return o(l,-90)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(178),g=e(179),l=function(h,i,s){if(i===void 0&&(i=0),s===void 0&&(s=0),s!==0&&(s<0?o(h,Math.abs(s)):g(h,s)),i!==0)for(var n=0;n<h.length;n++){var d=h[n];i<0?o(d,Math.abs(i)):g(d,i)}return h};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i){if(i===void 0&&(i=o),l>0){var s=l-o.length;if(s<=0)return null}if(!Array.isArray(g))return o.indexOf(g)===-1?(o.push(g),h&&h.call(i,g),g):null;for(var n=g.length-1;n>=0;)o.indexOf(g[n])!==-1&&g.splice(n,1),n--;if(n=g.length,n===0)return null;l>0&&n>s&&(g.splice(s),n=s);for(var d=0;d<n;d++){var a=g[d];o.push(a),h&&h.call(i,a)}return g};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i,s){if(l===void 0&&(l=0),s===void 0&&(s=o),h>0){var n=h-o.length;if(n<=0)return null}if(!Array.isArray(g))return o.indexOf(g)===-1?(o.splice(l,0,g),i&&i.call(s,g),g):null;for(var d=g.length-1;d>=0;)o.indexOf(g[d])!==-1&&g.pop(),d--;if(d=g.length,d===0)return null;h>0&&d>n&&(g.splice(n),d=n);for(var a=d-1;a>=0;a--){var u=g[a];o.splice(l,0,u),i&&i.call(s,u)}return g};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.indexOf(g);return l!==-1&&l<o.length&&(o.splice(l,1),o.push(g)),g};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(78),g=function(l,h,i,s,n){s===void 0&&(s=0),n===void 0&&(n=l.length);var d=0;if(o(l,s,n))for(var a=s;a<n;a++){var u=l[a];u[h]===i&&d++}return d};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h,i=[null];for(h=3;h<arguments.length;h++)i.push(arguments[h]);for(h=0;h<o.length;h++)i[0]=o[h],g.apply(l,i);return o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(78),g=function(l,h,i,s,n){if(s===void 0&&(s=0),n===void 0&&(n=l.length),o(l,s,n)){var d,a=[null];for(d=5;d<arguments.length;d++)a.push(arguments[d]);for(d=s;d<n;d++)a[0]=l[d],h.apply(i,a)}return l};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.indexOf(g);if(l>0){var h=o[l-1],i=o.indexOf(h);o[l]=h,o[i]=g}return o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=o.indexOf(g);if(h===-1||l<0||l>=o.length)throw new Error("Supplied index out of bounds");return h!==l&&(o.splice(h,1),o.splice(l,0,g)),g};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.indexOf(g);if(l!==-1&&l<o.length-1){var h=o[l+1],i=o.indexOf(h);o[l]=h,o[i]=g}return o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){if(g===l)return o;var h=o.indexOf(g),i=o.indexOf(l);if(h<0||i<0)throw new Error("Supplied items must be elements of the same array");return h>i||(o.splice(h,1),i===o.length-1?o.push(g):o.splice(i,0,g)),o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){if(g===l)return o;var h=o.indexOf(g),i=o.indexOf(l);if(h<0||i<0)throw new Error("Supplied items must be elements of the same array");return h<i||(o.splice(h,1),i===0?o.unshift(g):o.splice(i,0,g)),o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(363),g=function(l,h,i){l===void 0&&(l=0),h===void 0&&(h=null),i===void 0&&(i=1),h===null&&(h=l,l=0);for(var s=[],n=Math.max(o((h-l)/(i||1)),0),d=0;d<n;d++)s.push(l),l+=i;return s};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(74),g=function(l,h,i,s){if(s===void 0&&(s=l),h<0||h>l.length-1)throw new Error("Index out of bounds");var n=o(l,h);return i&&i.call(s,n),n};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(78),g=function(l,h,i,s,n){if(h===void 0&&(h=0),i===void 0&&(i=l.length),n===void 0&&(n=l),o(l,h,i)){var d=i-h,a=l.splice(h,d);if(s)for(var u=0;u<a.length;u++){var f=a[u];s.call(n,f)}return a}else return[]};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(74),g=function(l,h,i){h===void 0&&(h=0),i===void 0&&(i=l.length);var s=h+Math.floor(Math.random()*i);return o(l,s)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=o.indexOf(g),i=o.indexOf(l);return h!==-1&&i===-1?(o[h]=l,!0):!1};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.indexOf(g);return l!==-1&&l>0&&(o.splice(l,1),o.unshift(g)),g};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(78),g=function(l,h,i,s,n){if(s===void 0&&(s=0),n===void 0&&(n=l.length),o(l,s,n))for(var d=s;d<n;d++){var a=l[d];a.hasOwnProperty(h)&&(a[h]=i)}return l};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){if(g===l)return o;var h=o.indexOf(g),i=o.indexOf(l);if(h<0||i<0)throw new Error("Supplied items must be elements of the same array");return o[h]=l,o[i]=g,o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(211),l=e(24),h=e(20),i=new o({Extends:g,initialize:function(n){g.call(this),this.checkQueue=!0,this.scene=n,this.systems=n.sys,n.sys.events.once(h.BOOT,this.boot,this),n.sys.events.on(h.START,this.start,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){var s=this.systems.events;s.on(h.PRE_UPDATE,this.update,this),s.on(h.UPDATE,this.sceneUpdate,this),s.once(h.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(s,n){for(var d=this._active,a=d.length,u=0;u<a;u++){var f=d[u];f.active&&f.preUpdate.call(f,s,n)}},shutdown:function(){for(var s=this._active.length;s--;)this._active[s].destroy(!0);for(s=this._pending.length;s--;)this._pending[s].destroy(!0);for(s=this._destroy.length;s--;)this._destroy[s].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var n=this.systems.events;n.off(h.PRE_UPDATE,this.update,this),n.off(h.UPDATE,this.sceneUpdate,this),n.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});l.register("UpdateList",i,"updateList"),c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="add"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="remove"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){if(l===void 0&&(l=!1),h===void 0)return h={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},h;var i=o.text,s=i.length,n=o.maxWidth,d=o.wordWrapCharCode,a=Number.MAX_VALUE,u=Number.MAX_VALUE,f=0,p=0,v=o.fontData.chars,m=o.fontData.lineHeight,E=o.letterSpacing,x=0,y=0,S=0,C=null,I=o._align,O=0,M=0,L=o.fontSize/o.fontData.size,P=L*o.scaleX,b=L*o.scaleY,B=null,U=0,H=[],Y=Number.MAX_VALUE,j=0,_=0,w=0,D,N=[],G=[],k=null;if(n>0){for(D=0;D<s;D++){if(S=i.charCodeAt(D),S===10){k!==null&&(N.push({word:k.word,i:k.i,x:k.x*P,y:k.y*b,w:k.w*P,h:k.h*b,cr:!0}),k=null),x=0,y+=m,B=null;continue}if(C=v[S],!!C){if(B!==null)var V=C.kerning[U];S===d?k!==null&&(N.push({word:k.word,i:k.i,x:k.x*P,y:k.y*b,w:k.w*P,h:k.h*b,cr:!1}),k=null):(k===null&&(k={word:"",i:D,x,y,w:0,h:m,cr:!1}),k.word=k.word.concat(i[D]),k.w+=C.xOffset+C.xAdvance+(V!==void 0?V:0)),x+=C.xAdvance+E,B=C,U=S}}k!==null&&N.push({word:k.word,i:k.i,x:k.x*P,y:k.y*b,w:k.w*P,h:k.h*b,cr:!1}),x=0,y=0,B=null,U=0;var X,K=0,tt=[];for(D=0;D<N.length;D++){var st=N[D],rt=st.x,ht=st.x+st.w;if(X){var ut=rt-(X.x+X.w);K=rt-(ut+X.w),X=null}var mt=rt-K,pt=ht-K;mt>n||pt>n?(tt.push(st.i-1),st.cr?(tt.push(st.i+st.word.length),K=0,X=null):X=st):st.cr&&(tt.push(st.i+st.word.length),K=0,X=null)}var Tt=function(ft,ie,ye){return ft.substr(0,ie)+ye+ft.substr(ie+1)};for(D=tt.length-1;D>=0;D--)i=Tt(i,tt[D],`
`);h.wrappedText=i,s=i.length,N=[],k=null}var Nt=0;for(D=0;D<s;D++){if(S=i.charCodeAt(D),S===10){k!==null&&(N.push({word:k.word,i:k.i,x:k.x*P,y:k.y*b,w:k.w*P,h:k.h*b}),k=null),x=0,y+=m,B=null,H[_]=w,w>j&&(j=w),w<Y&&(Y=w),_++,w=0;continue}if(C=v[S],!!C){if(O=x,M=y,B!==null){var Ct=C.kerning[U];O+=Ct!==void 0?Ct:0}a>O&&(a=O),u>M&&(u=M);var $t=O+C.xAdvance,vt=M+m;f<$t&&(f=$t),p<vt&&(p=vt);var Ht=C.xOffset+C.xAdvance+(Ct!==void 0?Ct:0);S===d?k!==null&&(N.push({word:k.word,i:k.i,x:k.x*P,y:k.y*b,w:k.w*P,h:k.h*b}),k=null):(k===null&&(k={word:"",i:Nt,x,y,w:0,h:m}),k.word=k.word.concat(i[D]),k.w+=Ht),G.push({i:Nt,char:i[D],code:S,x:(C.xOffset+x)*L,y:(C.yOffset+y)*L,w:C.width*L,h:C.height*L,t:y*L,r:$t*L,b:m*L,line:_,glyph:C}),x+=C.xAdvance+E,B=C,U=S,w=$t*L,Nt++}}if(k!==null&&N.push({word:k.word,i:k.i,x:k.x*P,y:k.y*b,w:k.w*P,h:k.h*b}),H[_]=w,w>j&&(j=w),w<Y&&(Y=w),I>0)for(var At=0;At<G.length;At++){var Dt=G[At];if(I===1){var se=(j-H[Dt.line])/2;Dt.x+=se,Dt.r+=se}else if(I===2){var $e=j-H[Dt.line];Dt.x+=$e,Dt.r+=$e}}var zt=h.local,Bt=h.global,ee=h.lines;return zt.x=a*L,zt.y=u*L,zt.width=f*L,zt.height=p*L,Bt.x=o.x-o._displayOriginX+a*P,Bt.y=o.y-o._displayOriginY+u*b,Bt.width=f*P,Bt.height=p*b,ee.shortest=Y,ee.longest=j,ee.lengths=H,g&&(zt.x=Math.ceil(zt.x),zt.y=Math.ceil(zt.y),zt.width=Math.ceil(zt.width),zt.height=Math.ceil(zt.height),Bt.x=Math.ceil(Bt.x),Bt.y=Math.ceil(Bt.y),Bt.width=Math.ceil(Bt.width),Bt.height=Math.ceil(Bt.height),ee.shortest=Math.ceil(Y),ee.longest=Math.ceil(j)),l&&(o._displayOriginX=o.originX*zt.width,o._displayOriginY=o.originY*zt.height,Bt.x=o.x-o._displayOriginX*o.scaleX,Bt.y=o.y-o._displayOriginY*o.scaleY,g&&(Bt.x=Math.ceil(Bt.x),Bt.y=Math.ceil(Bt.y))),h.words=N,h.characters=G,h.lines.height=m,h.scale=L,h.scaleX=o.scaleX,h.scaleY=o.scaleY,h};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(212),g=function(l,h,i,s,n,d,a){var u=l.sys.textures.get(i),f=u.get(s),p=l.sys.cache.xml.get(n);if(f&&p){var v=o(p,f,d,a,u);return l.sys.cache.bitmapFont.add(h,{data:v,texture:i,frame:s,fromAtlas:!0}),!0}else return!1};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1046),g=e(1048),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1047),g=e(19),l=e(12),h=function(i,s,n,d){var a=s._text,u=a.length;if(u!==0){n.addToRenderList(s);var f=i.pipelines.set(s.pipeline,s),p=g(s,n,d).calc,v=n.roundPixels,m=n.alpha,E=s.charColors,x=s.tintFill,y=l.getTintAppendFloatAlpha,S=y(s.tintTopLeft,m*s._alphaTL),C=y(s.tintTopRight,m*s._alphaTR),I=y(s.tintBottomLeft,m*s._alphaBL),O=y(s.tintBottomRight,m*s._alphaBR),M=s.frame.glTexture,L=f.setGameObject(s),P=s.getTextBounds(!1),b,B,U,H=P.characters,Y=s.dropShadowX,j=s.dropShadowY,_=Y!==0||j!==0;if(i.pipelines.preBatch(s),_){var w=s.dropShadowColor,D=s.dropShadowAlpha,N=y(w,m*D*s._alphaTL),G=y(w,m*D*s._alphaTR),k=y(w,m*D*s._alphaBL),V=y(w,m*D*s._alphaBR);for(b=0;b<H.length;b++)B=H[b],U=B.glyph,!(B.code===32||U.width===0||U.height===0)&&o(f,s,B,U,Y,j,p,v,N,G,k,V,1,M,L)}for(b=0;b<H.length;b++)if(B=H[b],U=B.glyph,!(B.code===32||U.width===0||U.height===0))if(E[B.i]){var X=E[B.i],K=X.tintEffect,tt=y(X.tintTL,m*s._alphaTL),st=y(X.tintTR,m*s._alphaTR),rt=y(X.tintBL,m*s._alphaBL),ht=y(X.tintBR,m*s._alphaBR);o(f,s,B,U,0,0,p,v,tt,st,rt,ht,K,M,L)}else o(f,s,B,U,0,0,p,v,S,C,I,O,x,M,L);i.pipelines.postBatch(s)}};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i,s,n,d,a,u,f,p,v,m,E){var x=l.x-g.displayOriginX+i,y=l.y-g.displayOriginY+s,S=x+l.w,C=y+l.h,I=n.getXRound(x,y,d),O=n.getYRound(x,y,d),M=n.getXRound(x,C,d),L=n.getYRound(x,C,d),P=n.getXRound(S,C,d),b=n.getYRound(S,C,d),B=n.getXRound(S,y,d),U=n.getYRound(S,y,d);o.batchQuad(g,I,O,M,L,P,b,B,U,h.u0,h.v0,h.u1,h.v1,a,u,f,p,v,m,E)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(30),g=function(l,h,i,s){var n=h._text,d=n.length,a=l.currentContext;if(!(d===0||!o(l,a,h,i,s))){i.addToRenderList(h);var u=h.fromAtlas?h.frame:h.texture.frames.__BASE,f=h.fontData.chars,p=h.fontData.lineHeight,v=h._letterSpacing,m=0,E=0,x=0,y=null,S=0,C=0,I=0,O=0,M=0,L=0,P=null,b=0,B=u.source.image,U=u.cutX,H=u.cutY,Y=h._fontSize/h.fontData.size,j=h._align,_=0,w=0,D=h.getTextBounds(!1);h.maxWidth>0&&(n=D.wrappedText,d=n.length);var N=h._bounds.lines;j===1?w=(N.longest-N.lengths[0])/2:j===2&&(w=N.longest-N.lengths[0]),a.translate(-h.displayOriginX,-h.displayOriginY);for(var G=i.roundPixels,k=0;k<d;k++){if(x=n.charCodeAt(k),x===10){_++,j===1?w=(N.longest-N.lengths[_])/2:j===2&&(w=N.longest-N.lengths[_]),m=0,E+=p,P=null;continue}if(y=f[x],!!y){if(S=U+y.x,C=H+y.y,I=y.width,O=y.height,M=y.xOffset+m,L=y.yOffset+E,P!==null){var V=y.kerning[b];M+=V!==void 0?V:0}M*=Y,L*=Y,M+=w,m+=y.xAdvance+v,P=y,b=x,!(I===0||O===0||x===32)&&(G&&(M=Math.round(M),L=Math.round(L)),a.save(),a.translate(M,L),a.scale(Y,Y),a.drawImage(B,S,C,I,O,0,0,I,O),a.restore())}}a.restore()}};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1050),g=e(1051),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(25),g=e(12),l=new o,h=function(i,s,n,d){var a=s.getRenderList();if(a.length!==0){var u=n.alpha*s.alpha;if(u!==0){n.addToRenderList(s);var f=i.pipelines.set(this.pipeline,s),p=n.scrollX*s.scrollFactorX,v=n.scrollY*s.scrollFactorY,m=l.copyFrom(n.matrix);d&&(m.multiplyWithOffset(d,-p,-v),p=0,v=0);var E=s.x-p,x=s.y-v,y=-1,S=!1,C=n.roundPixels;i.pipelines.preBatch(s);for(var I=0;I<a.length;I++){var O=a[I],M=O.frame,L=O.alpha*u;if(L!==0){var P=M.width,b=M.height,B=E+O.x+M.x,U=x+O.y+M.y;O.flipX&&(P*=-1,B+=M.width),O.flipY&&(b*=-1,U+=M.height);var H=B+P,Y=U+b,j=m.getX(B,U),_=m.getY(B,U),w=m.getX(H,Y),D=m.getY(H,Y),N=g.getTintAppendFloatAlpha(O.tint,L);if(M.sourceIndex!==y){var G=f.setGameObject(s,M);y=M.sourceIndex}C&&(j=Math.round(j),_=Math.round(_),w=Math.round(w),D=Math.round(D)),f.batchQuad(s,j,_,j,D,w,D,w,_,M.u0,M.v0,M.u1,M.v1,N,N,N,N,S,M.glTexture,G)&&(y=-1)}}i.pipelines.postBatch(s)}}};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i=g.getRenderList();if(i.length!==0){var s=o.currentContext,n=l.alpha*g.alpha;if(n!==0){l.addToRenderList(g),s.globalCompositeOperation=o.blendModes[g.blendMode],s.imageSmoothingEnabled=!(!o.antialias||g.frame.source.scaleMode);var d=g.x-l.scrollX*g.scrollFactorX,a=g.y-l.scrollY*g.scrollFactorY;s.save(),h&&h.copyToContext(s);for(var u=l.roundPixels,f=0;f<i.length;f++){var p=i[f],v=p.flipX||p.flipY,m=p.frame,E=m.canvasData,x=m.x,y=m.y,S=1,C=1,I=p.alpha*n;I!==0&&(s.globalAlpha=I,v?(p.flipX&&(S=-1,x-=E.width),p.flipY&&(C=-1,y-=E.height),s.save(),s.translate(p.x+d,p.y+a),s.scale(S,C),s.drawImage(m.source.image,E.x,E.y,E.width,E.height,x,y,E.width,E.height),s.restore()):(u&&(x=Math.round(x),y=Math.round(y)),s.drawImage(m.source.image,E.x,E.y,E.width,E.height,x+p.x+d,y+p.y+a,E.width,E.height)))}s.restore()}}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1053),g=e(1054),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){l.addToRenderList(g);var i=g.list,s=i.length;if(s!==0){var n=g.localTransform;h?(n.loadIdentity(),n.multiply(h),n.translate(g.x,g.y),n.rotate(g.rotation),n.scale(g.scaleX,g.scaleY)):n.applyITRS(g.x,g.y,g.rotation,g.scaleX,g.scaleY),o.pipelines.preBatch(g);var d=g.blendMode!==-1;d||o.setBlendMode(0);for(var a=g.alpha,u=g.scrollFactorX,f=g.scrollFactorY,p=0;p<s;p++){var v=i[p];if(!!v.willRender(l)){var m,E,x,y;if(v.alphaTopLeft!==void 0)m=v.alphaTopLeft,E=v.alphaTopRight,x=v.alphaBottomLeft,y=v.alphaBottomRight;else{var S=v.alpha;m=S,E=S,x=S,y=S}var C=v.scrollFactorX,I=v.scrollFactorY;!d&&v.blendMode!==o.currentBlendMode&&o.setBlendMode(v.blendMode);var O=v.mask;O&&O.preRenderWebGL(o,v,l);var M=v.type;M!==o.currentType&&(o.newType=!0,o.currentType=M),o.nextTypeMatch=p<s-1?i[p+1].type===o.currentType:!1,v.setScrollFactor(C*u,I*f),v.setAlpha(m*a,E*a,x*a,y*a),v.renderWebGL(o,v,l,n),v.setAlpha(m,E,x,y),v.setScrollFactor(C,I),O&&O.postRenderWebGL(o,l),o.newType=!1}}o.pipelines.postBatch(g)}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){l.addToRenderList(g);var i=g.list;if(i.length!==0){var s=g.localTransform;h?(s.loadIdentity(),s.multiply(h),s.translate(g.x,g.y),s.rotate(g.rotation),s.scale(g.scaleX,g.scaleY)):s.applyITRS(g.x,g.y,g.rotation,g.scaleX,g.scaleY);var n=g.blendMode!==-1;n||o.setBlendMode(0);var d=g._alpha,a=g.scrollFactorX,u=g.scrollFactorY;g.mask&&g.mask.preRenderCanvas(o,null,l);for(var f=0;f<i.length;f++){var p=i[f];if(!!p.willRender(l)){var v=p.alpha,m=p.scrollFactorX,E=p.scrollFactorY;!n&&p.blendMode!==o.currentBlendMode&&o.setBlendMode(p.blendMode),p.setScrollFactor(m*a,E*u),p.setAlpha(v*d),p.renderCanvas(o,p,l,s),p.setAlpha(v),p.setScrollFactor(m,E)}}g.mask&&g.mask.postRenderCanvas(o)}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(443),g=e(443),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1058),g=e(1059),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=e(25),l=e(12),h=new g,i=function(s,n,d,a){var u=n.text,f=u.length;if(f!==0){d.addToRenderList(n);var p=s.pipelines.set(n.pipeline,n),v=o(n,d,a),m=v.sprite,E=v.calc,x=h,y=n.cropWidth>0||n.cropHeight>0;y&&(p.flush(),s.pushScissor(E.tx,E.ty,n.cropWidth*E.scaleX,n.cropHeight*E.scaleY));var S=n.frame,C=S.glTexture,I=n.tintFill,O=l.getTintAppendFloatAlpha(n.tintTopLeft,d.alpha*n._alphaTL),M=l.getTintAppendFloatAlpha(n.tintTopRight,d.alpha*n._alphaTR),L=l.getTintAppendFloatAlpha(n.tintBottomLeft,d.alpha*n._alphaBL),P=l.getTintAppendFloatAlpha(n.tintBottomRight,d.alpha*n._alphaBR),b=p.setGameObject(n),B=0,U=0,H=0,Y=0,j=n.letterSpacing,_,w=0,D=0,N,G=n.scrollX,k=n.scrollY,V=n.fontData,X=V.chars,K=V.lineHeight,tt=n.fontSize/V.size,st=0,rt=n._align,ht=0,ut=0,mt=n.getTextBounds(!1);n.maxWidth>0&&(u=mt.wrappedText,f=u.length);var pt=n._bounds.lines;rt===1?ut=(pt.longest-pt.lengths[0])/2:rt===2&&(ut=pt.longest-pt.lengths[0]);var Tt=d.roundPixels,Nt=n.displayCallback,Ct=n.callbackData;s.pipelines.preBatch(n);for(var $t=0;$t<f;$t++){if(H=u.charCodeAt($t),H===10){ht++,rt===1?ut=(pt.longest-pt.lengths[ht])/2:rt===2&&(ut=pt.longest-pt.lengths[ht]),B=0,U+=K,N=null;continue}if(_=X[H],!!_){w=_.width,D=_.height;var vt=_.xOffset+B-G,Ht=_.yOffset+U-k;if(N!==null){var At=_.kerning[Y];vt+=At!==void 0?At:0}if(B+=_.xAdvance+j,N=_,Y=H,!(w===0||D===0||H===32)){if(tt=n.fontSize/n.fontData.size,st=0,Nt){Ct.color=0,Ct.tint.topLeft=O,Ct.tint.topRight=M,Ct.tint.bottomLeft=L,Ct.tint.bottomRight=P,Ct.index=$t,Ct.charCode=H,Ct.x=vt,Ct.y=Ht,Ct.scale=tt,Ct.rotation=st,Ct.data=_.data;var Dt=Nt(Ct);vt=Dt.x,Ht=Dt.y,tt=Dt.scale,st=Dt.rotation,Dt.color?(O=Dt.color,M=Dt.color,L=Dt.color,P=Dt.color):(O=Dt.tint.topLeft,M=Dt.tint.topRight,L=Dt.tint.bottomLeft,P=Dt.tint.bottomRight),O=l.getTintAppendFloatAlpha(O,d.alpha*n._alphaTL),M=l.getTintAppendFloatAlpha(M,d.alpha*n._alphaTR),L=l.getTintAppendFloatAlpha(L,d.alpha*n._alphaBL),P=l.getTintAppendFloatAlpha(P,d.alpha*n._alphaBR)}vt*=tt,Ht*=tt,vt-=n.displayOriginX,Ht-=n.displayOriginY,vt+=ut,x.applyITRS(vt,Ht,st,tt,tt),E.multiply(x,m);var se=_.u0,$e=_.v0,zt=_.u1,Bt=_.v1,ee=w,ft=D,ie=m.e,ye=m.f,Ae=ft*m.c+m.e,He=ft*m.d+m.f,De=ee*m.a+ft*m.c+m.e,ne=ee*m.b+ft*m.d+m.f,W=ee*m.a+m.e,Z=ee*m.b+m.f;Tt&&(ie=Math.round(ie),ye=Math.round(ye),Ae=Math.round(Ae),He=Math.round(He),De=Math.round(De),ne=Math.round(ne),W=Math.round(W),Z=Math.round(Z)),p.batchQuad(n,ie,ye,Ae,He,De,ne,W,Z,se,$e,zt,Bt,O,M,L,P,I,C,b)}}}y&&(p.flush(),s.popScissor()),s.pipelines.postBatch(n)}};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(30),g=function(l,h,i,s){var n=h._text,d=n.length,a=l.currentContext;if(!(d===0||!o(l,a,h,i,s))){i.addToRenderList(h);var u=h.fromAtlas?h.frame:h.texture.frames.__BASE,f=h.displayCallback,p=h.callbackData,v=h.fontData.chars,m=h.fontData.lineHeight,E=h._letterSpacing,x=0,y=0,S=0,C=null,I=0,O=0,M=0,L=0,P=0,b=0,B=null,U=0,H=h.frame.source.image,Y=u.cutX,j=u.cutY,_=0,w=0,D=h._fontSize/h.fontData.size,N=h._align,G=0,k=0;h.getTextBounds(!1);var V=h._bounds.lines;N===1?k=(V.longest-V.lengths[0])/2:N===2&&(k=V.longest-V.lengths[0]),a.translate(-h.displayOriginX,-h.displayOriginY);var X=i.roundPixels;h.cropWidth>0&&h.cropHeight>0&&(a.beginPath(),a.rect(0,0,h.cropWidth,h.cropHeight),a.clip());for(var K=0;K<d;K++){if(w=D,_=0,S=n.charCodeAt(K),S===10){G++,N===1?k=(V.longest-V.lengths[G])/2:N===2&&(k=V.longest-V.lengths[G]),x=0,y+=m,B=null;continue}if(C=v[S],!!C){if(I=Y+C.x,O=j+C.y,M=C.width,L=C.height,P=C.xOffset+x-h.scrollX,b=C.yOffset+y-h.scrollY,B!==null){var tt=C.kerning[U];P+=tt!==void 0?tt:0}if(f){p.index=K,p.charCode=S,p.x=P,p.y=b,p.scale=w,p.rotation=_,p.data=C.data;var st=f(p);P=st.x,b=st.y,w=st.scale,_=st.rotation}P*=w,b*=w,P+=k,x+=C.xAdvance+E,B=C,U=S,!(M===0||L===0||S===32)&&(X&&(P=Math.round(P),b=Math.round(b)),a.save(),a.translate(P,b),a.rotate(_),a.scale(w,w),a.drawImage(H,I,O,M,L,0,0,M,L),a.restore())}}a.restore()}};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1061),g=e(1062),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=function(l,h,i,s){l.pipelines.clear();var n=o(h,i,s).calc;h.render.call(h,l,i,n),l.pipelines.rebind()};c.exports=g},function(c,R){},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1064),g=e(448),g=e(448),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(217),g=e(19),l=e(25),h=e(12),i=function(u,f,p){this.x=u,this.y=f,this.width=p},s=function(u,f,p){this.points=[],this.pointsLength=1,this.points[0]=new i(u,f,p)},n=[],d=new l,a=function(u,f,p,v){if(f.commandBuffer.length!==0){p.addToRenderList(f);var m=u.pipelines.set(f.pipeline,f);u.pipelines.preBatch(f);for(var E=g(f,p,v).calc,x=d.loadIdentity(),y=f.commandBuffer,S=p.alpha*f.alpha,C=1,I=m.fillTint,O=m.strokeTint,M=0,L=0,P=0,b=.01,B=Math.PI*2,U,H=[],Y=0,j=!0,_=null,w=h.getTintAppendFloatAlpha,D=0;D<y.length;D++)switch(U=y[D],U){case o.BEGIN_PATH:{H.length=0,_=null,j=!0;break}case o.CLOSE_PATH:{j=!1,_&&_.points.length&&_.points.push(_.points[0]);break}case o.FILL_PATH:{for(Y=0;Y<H.length;Y++)m.batchFillPath(H[Y].points,x,E);break}case o.STROKE_PATH:{for(Y=0;Y<H.length;Y++)m.batchStrokePath(H[Y].points,C,j,x,E);break}case o.LINE_STYLE:{C=y[++D];var N=y[++D],G=y[++D]*S,k=w(N,G);O.TL=k,O.TR=k,O.BL=k,O.BR=k;break}case o.FILL_STYLE:{var V=y[++D],X=y[++D]*S,K=w(V,X);I.TL=K,I.TR=K,I.BL=K,I.BR=K;break}case o.GRADIENT_FILL_STYLE:{var tt=y[++D]*S,st=y[++D]*S,rt=y[++D]*S,ht=y[++D]*S;I.TL=w(y[++D],tt),I.TR=w(y[++D],st),I.BL=w(y[++D],rt),I.BR=w(y[++D],ht);break}case o.GRADIENT_LINE_STYLE:{C=y[++D];var ut=y[++D]*S;O.TL=w(y[++D],ut),O.TR=w(y[++D],ut),O.BL=w(y[++D],ut),O.BR=w(y[++D],ut);break}case o.ARC:{var mt=0,pt=y[++D],Tt=y[++D],Nt=y[++D],Ct=y[++D],$t=y[++D],vt=y[++D],Ht=y[++D];for($t-=Ct,vt?$t<-B?$t=-B:$t>0&&($t=-B+$t%B):$t>B?$t=B:$t<0&&($t=B+$t%B),_===null&&(_=new s(pt+Math.cos(Ct)*Nt,Tt+Math.sin(Ct)*Nt,C),H.push(_),mt+=b);mt<1+Ht;)P=$t*mt+Ct,M=pt+Math.cos(P)*Nt,L=Tt+Math.sin(P)*Nt,_.points.push(new i(M,L,C)),mt+=b;P=$t+Ct,M=pt+Math.cos(P)*Nt,L=Tt+Math.sin(P)*Nt,_.points.push(new i(M,L,C));break}case o.FILL_RECT:{m.batchFillRect(y[++D],y[++D],y[++D],y[++D],x,E);break}case o.FILL_TRIANGLE:{m.batchFillTriangle(y[++D],y[++D],y[++D],y[++D],y[++D],y[++D],x,E);break}case o.STROKE_TRIANGLE:{m.batchStrokeTriangle(y[++D],y[++D],y[++D],y[++D],y[++D],y[++D],C,x,E);break}case o.LINE_TO:{_!==null?_.points.push(new i(y[++D],y[++D],C)):(_=new s(y[++D],y[++D],C),H.push(_));break}case o.MOVE_TO:{_=new s(y[++D],y[++D],C),H.push(_);break}case o.SAVE:{n.push(x.copyToArray());break}case o.RESTORE:{x.copyFromArray(n.pop());break}case o.TRANSLATE:{pt=y[++D],Tt=y[++D],x.translate(pt,Tt);break}case o.SCALE:{pt=y[++D],Tt=y[++D],x.scale(pt,Tt);break}case o.ROTATE:{x.rotate(y[++D]);break}}u.pipelines.postBatch(f)}};c.exports=a},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1066),g=e(1067),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){l.addToRenderList(g),g.pipeline.batchSprite(g,l,h)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){l.addToRenderList(g),o.batchSprite(g,g.frame,l,h)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1069),g=e(1070),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){l.addToRenderList(g),this.pipeline.batchSprite(g,l,h)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){l.addToRenderList(g),o.batchSprite(g,g.frame,l,h)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1072),g=e(1073),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=g.list,i=h.length;if(i!==0){g.depthSort(),o.pipelines.preBatch(g);var s=g.blendMode!==-1;s||o.setBlendMode(0);for(var n=g.alpha,d=0;d<i;d++){var a=h[d];if(!!a.willRender(l)){var u,f,p,v;if(a.alphaTopLeft!==void 0)u=a.alphaTopLeft,f=a.alphaTopRight,p=a.alphaBottomLeft,v=a.alphaBottomRight;else{var m=a.alpha;u=m,f=m,p=m,v=m}!s&&a.blendMode!==o.currentBlendMode&&o.setBlendMode(a.blendMode);var E=a.mask;E&&E.preRenderWebGL(o,a,l);var x=a.type;x!==o.currentType&&(o.newType=!0,o.currentType=x),o.nextTypeMatch=d<i-1?h[d+1].type===o.currentType:!1,a.setAlpha(u*n,f*n,p*n,v*n),a.renderWebGL(o,a,l),a.setAlpha(u,f,p,v),E&&E.postRenderWebGL(o,l),o.newType=!1}}o.pipelines.postBatch(g)}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=g.list;if(h.length!==0){g.depthSort();var i=g.blendMode!==-1;i||o.setBlendMode(0);var s=g._alpha;g.mask&&g.mask.preRenderCanvas(o,null,l);for(var n=0;n<h.length;n++){var d=h[n];if(!!d.willRender(l)){var a=d.alpha;!i&&d.blendMode!==o.currentBlendMode&&o.setBlendMode(d.blendMode),d.setAlpha(a*s),d.renderCanvas(o,d,l),d.setAlpha(a)}}g.mask&&g.mask.postRenderCanvas(o)}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={EmitterOp:e(449),GravityWell:e(450),Particle:e(451),ParticleEmitter:e(452),ParticleEmitterManager:e(220),Zones:e(1078)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1076),g=e(1077),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(25),g=e(12),l=new o,h=new o,i=new o,s=new o,n=function(d,a,u,f){var p=a.emitters.list,v=p.length;if(v!==0){var m=d.pipelines.set(a.pipeline),E=l,x=h,y=i,S=s;f?(S.loadIdentity(),S.multiply(f),S.translate(a.x,a.y),S.rotate(a.rotation),S.scale(a.scaleX,a.scaleY)):S.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var C=u.roundPixels,I=a.defaultFrame.glTexture,O=g.getTintAppendFloatAlpha,M=m.setGameObject(a,a.defaultFrame);d.pipelines.preBatch(a);for(var L=0;L<v;L++){var P=p[L],b=P.alive,B=b.length;if(!(!P.visible||B===0)){u.addToRenderList(P);var U=P.scrollFactorX,H=P.scrollFactorY;d.setBlendMode(P.blendMode),P.mask&&(P.mask.preRenderWebGL(d,P,u),d.pipelines.set(a.pipeline));for(var Y=0,j=0;j<B;j++){var _=b[j],w=_.alpha*u.alpha;if(!(w<=0)){y.applyITRS(_.x,_.y,_.rotation,_.scaleX,_.scaleY),E.copyFrom(u.matrix),E.multiplyWithOffset(S,-u.scrollX*U,-u.scrollY*H),y.e=_.x,y.f=_.y,E.multiply(y,x);var D=_.frame,N=-D.halfWidth,G=-D.halfHeight,k=N+D.width,V=G+D.height,X=x.getXRound(N,G,C),K=x.getYRound(N,G,C),tt=x.getXRound(N,V,C),st=x.getYRound(N,V,C),rt=x.getXRound(k,V,C),ht=x.getYRound(k,V,C),ut=x.getXRound(k,G,C),mt=x.getYRound(k,G,C),pt=O(_.tint,w);m.batchQuad(P,X,K,tt,st,rt,ht,ut,mt,D.u0,D.v0,D.u1,D.v1,pt,pt,pt,pt,Y,I,M)}}P.mask&&P.mask.postRenderWebGL(d,u)}}d.pipelines.postBatch(a)}};c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(25),g=new o,l=new o,h=new o,i=new o,s=function(n,d,a,u){var f=d.emitters.list,p=f.length;if(p!==0){var v=g.copyFrom(a.matrix),m=l,E=h,x=i;u?(x.loadIdentity(),x.multiply(u),x.translate(d.x,d.y),x.rotate(d.rotation),x.scale(d.scaleX,d.scaleY)):x.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);for(var y=n.currentContext,S=a.roundPixels,C=0;C<p;C++){var I=f[C],O=I.alive,M=O.length;if(!(!I.visible||M===0)){a.addToRenderList(I);var L=I.scrollFactorX,P=I.scrollFactorY;y.save(),y.globalCompositeOperation=n.blendModes[I.blendMode];for(var b=0;b<M;b++){var B=O[b],U=B.alpha*a.alpha;if(!(U<=0)){E.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),v.copyFrom(a.matrix),v.multiplyWithOffset(x,-a.scrollX*L,-a.scrollY*P),E.e=B.x,E.f=B.y,v.multiply(E,m);var H=B.frame,Y=H.canvasData,j=-H.halfWidth,_=-H.halfHeight;y.globalAlpha=U,y.save(),m.setToContext(y),S&&(j=Math.round(j),_=Math.round(_)),y.imageSmoothingEnabled=!(!n.antialias||H.source.scaleMode),y.drawImage(H.source.image,Y.x,Y.y,Y.width,Y.height,j,_,Y.width,Y.height),y.restore()}}y.restore()}}}};c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={DeathZone:e(453),EdgeZone:e(454),RandomZone:e(456)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1080),g=e(1081),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(12),g=function(l,h,i,s){i.addToRenderList(h);var n=i.alpha,d=h.renderTarget,a=d.width,u=d.height,f=o.getTintAppendFloatAlpha,p=l.pipelines.set(h.pipeline),v=p.setTexture2D(d.texture);l.pipelines.preBatch(h),p.batchTexture(h,d.texture,a,u,h.x,h.y,a,u,h.scaleX,h.scaleY,h.rotation,h.flipX,!h.flipY,h.scrollFactorX,h.scrollFactorY,h.displayOriginX,h.displayOriginY,0,0,a,u,f(h.tintTopLeft,n*h._alphaTL),f(h.tintTopRight,n*h._alphaTR),f(h.tintBottomLeft,n*h._alphaBL),f(h.tintBottomRight,n*h._alphaBR),h.tintFill,0,0,i,s,!0,v),l.resetTextures(),l.pipelines.postBatch(h)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){l.addToRenderList(g),o.batchSprite(g,g.frame,l,h)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1083),g=e(17),l={Parse:e(1084)};l=g(!1,l,o),c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(6),g=function(l,h){var i=h.width,s=h.height,n=Math.floor(i/2),d=Math.floor(s/2),a=o(h,"chars","");if(a!==""){var u=o(h,"image",""),f=l.sys.textures.getFrame(u),p=f.cutX,v=f.cutY,m=f.source.width,E=f.source.height,x=o(h,"offset.x",0),y=o(h,"offset.y",0),S=o(h,"spacing.x",0),C=o(h,"spacing.y",0),I=o(h,"lineSpacing",0),O=o(h,"charsPerRow",null);O===null&&(O=m/i,O>a.length&&(O=a.length));for(var M=x,L=y,P={retroFont:!0,font:u,size:i,lineHeight:s+I,chars:{}},b=0,B=0;B<a.length;B++){var U=a.charCodeAt(B),H=(p+M)/m,Y=(v+L)/E,j=(p+M+i)/m,_=(v+L+s)/E;P.chars[U]={x:M,y:L,width:i,height:s,centerX:n,centerY:d,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:H,v0:Y,u1:j,v1:_},b++,b===O?(b=0,M=x,L+=s+C):M+=i+S}var w={data:P,frame:null,texture:u};return w}};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1086),g=e(1087),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=e(12),l=function(h,i,s,n){s.addToRenderList(i);var d=h.pipelines.set(i.pipeline,i),a=o(i,s,n).calc,u=i.vertices,f=i.uv,p=i.colors,v=i.alphas,m=i.alpha,E=g.getTintAppendFloatAlpha,x=s.roundPixels,y=u.length,S=Math.floor(y*.5);d.flush(),h.pipelines.preBatch(i);var C=d.setGameObject(i),I=d.vertexViewF32,O=d.vertexViewU32,M=d.vertexCount*d.currentShader.vertexComponentCount-1,L=0,P=i.tintFill;i.dirty&&i.updateVertices();for(var b=i.debugCallback,B=[],U=0;U<y;U+=2){var H=u[U+0],Y=u[U+1],j=H*a.a+Y*a.c+a.e,_=H*a.b+Y*a.d+a.f;x&&(j=Math.round(j),_=Math.round(_)),I[++M]=j,I[++M]=_,I[++M]=f[U+0],I[++M]=f[U+1],I[++M]=C,I[++M]=P,O[++M]=E(p[L],s.alpha*(v[L]*m)),L++,b&&(B[U+0]=j,B[U+1]=_)}b&&b.call(i,i,y,B),d.vertexCount+=S,h.pipelines.postBatch(i)};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(){};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1089),g=e(1090),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(12),g=function(l,h,i,s){if(!(h.width===0||h.height===0)){i.addToRenderList(h);var n=h.frame,d=n.width,a=n.height,u=o.getTintAppendFloatAlpha,f=l.pipelines.set(h.pipeline,h),p=f.setTexture2D(n.glTexture,h);l.pipelines.preBatch(h),f.batchTexture(h,n.glTexture,d,a,h.x,h.y,d/h.style.resolution,a/h.style.resolution,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.displayOriginX,h.displayOriginY,0,0,d,a,u(h.tintTopLeft,i.alpha*h._alphaTL),u(h.tintTopRight,i.alpha*h._alphaTR),u(h.tintBottomLeft,i.alpha*h._alphaBL),u(h.tintBottomRight,i.alpha*h._alphaBR),h.tintFill,0,0,i,s,!1,p),l.pipelines.postBatch(h)}};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){g.width===0||g.height===0||(l.addToRenderList(g),o.batchSprite(g,g.frame,l,h))};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1092),g=e(1093),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(12),g=function(l,h,i,s){h.updateCanvas();var n=h.width,d=h.height;if(!(n===0||d===0)){i.addToRenderList(h),l.pipelines.preBatch(h);var a=o.getTintAppendFloatAlpha,u=l.pipelines.set(h.pipeline,h),f=u.setTexture2D(h.fillPattern,h);u.batchTexture(h,h.fillPattern,h.displayFrame.width*h.tileScaleX,h.displayFrame.height*h.tileScaleY,h.x,h.y,n,d,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.originX*n,h.originY*d,0,0,n,d,a(h.tintTopLeft,i.alpha*h._alphaTL),a(h.tintTopRight,i.alpha*h._alphaTR),a(h.tintBottomLeft,i.alpha*h._alphaBL),a(h.tintBottomRight,i.alpha*h._alphaBR),h.tintFill,h.tilePositionX%h.displayFrame.width/h.displayFrame.width,h.tilePositionY%h.displayFrame.height/h.displayFrame.height,i,s,!1,f),l.pipelines.postBatch(h)}};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){g.updateCanvas(),l.addToRenderList(g),o.batchSprite(g,g.frame,l,h)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1095),g=e(1096),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){g.videoTexture&&(l.addToRenderList(g),g.pipeline.batchSprite(g,l,h))};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){g.videoTexture&&(l.addToRenderList(g),o.batchSprite(g,g.frame,l,h))};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1098),g=e(1099),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=e(114),l=e(81),h=function(i,s,n,d){n.addToRenderList(s);var a=i.pipelines.set(s.pipeline),u=o(s,n,d),f=a.calcMatrix.copyFrom(u.calc),p=s._displayOriginX,v=s._displayOriginY,m=n.alpha*s.alpha;i.pipelines.preBatch(s),s.isFilled&&g(a,f,s,m,p,v),s.isStroked&&l(a,s,m,p,v),i.pipelines.postBatch(s)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(36),g=e(48),l=e(60),h=e(30),i=function(s,n,d,a){d.addToRenderList(n);var u=s.currentContext;if(h(s,u,n,d,a)){var f=n.radius;u.beginPath(),u.arc(f-n.originX*(f*2),f-n.originY*(f*2),f,o(n._startAngle),o(n._endAngle),n.anticlockwise),n.closePath&&u.closePath(),n.isFilled&&(g(u,n),u.fill()),n.isStroked&&(l(u,n),u.stroke()),u.restore()}};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1101),g=e(1102),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(114),g=e(19),l=e(81),h=function(i,s,n,d){n.addToRenderList(s);var a=i.pipelines.set(s.pipeline),u=g(s,n,d),f=a.calcMatrix.copyFrom(u.calc),p=s._displayOriginX+s._curveBounds.x,v=s._displayOriginY+s._curveBounds.y,m=n.alpha*s.alpha;i.pipelines.preBatch(s),s.isFilled&&o(a,f,s,m,p,v),s.isStroked&&l(a,s,m,p,v),i.pipelines.postBatch(s)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(48),g=e(60),l=e(30),h=function(i,s,n,d){n.addToRenderList(s);var a=i.currentContext;if(l(i,a,s,n,d)){var u=s._displayOriginX+s._curveBounds.x,f=s._displayOriginY+s._curveBounds.y,p=s.pathData,v=p.length-1,m=p[0]-u,E=p[1]-f;a.beginPath(),a.moveTo(m,E),s.closePath||(v-=2);for(var x=2;x<v;x+=2){var y=p[x]-u,S=p[x+1]-f;a.lineTo(y,S)}s.closePath&&a.closePath(),s.isFilled&&(o(a,s),a.fill()),s.isStroked&&(g(a,s),a.stroke()),a.restore()}};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1104),g=e(1105),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(114),g=e(19),l=e(81),h=function(i,s,n,d){n.addToRenderList(s);var a=i.pipelines.set(s.pipeline),u=g(s,n,d),f=a.calcMatrix.copyFrom(u.calc),p=s._displayOriginX,v=s._displayOriginY,m=n.alpha*s.alpha;i.pipelines.preBatch(s),s.isFilled&&o(a,f,s,m,p,v),s.isStroked&&l(a,s,m,p,v),i.pipelines.postBatch(s)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(48),g=e(60),l=e(30),h=function(i,s,n,d){n.addToRenderList(s);var a=i.currentContext;if(l(i,a,s,n,d)){var u=s._displayOriginX,f=s._displayOriginY,p=s.pathData,v=p.length-1,m=p[0]-u,E=p[1]-f;a.beginPath(),a.moveTo(m,E),s.closePath||(v-=2);for(var x=2;x<v;x+=2){var y=p[x]-u,S=p[x+1]-f;a.lineTo(y,S)}a.closePath(),s.isFilled&&(o(a,s),a.fill()),s.isStroked&&(g(a,s),a.stroke()),a.restore()}};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1107),g=e(1108),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=e(12),l=function(h,i,s,n){s.addToRenderList(i);var d=h.pipelines.set(i.pipeline),a=o(i,s,n),u=d.calcMatrix.copyFrom(a.calc);u.translate(-i._displayOriginX,-i._displayOriginY);var f=s.alpha*i.alpha,p=i.width,v=i.height,m=i.cellWidth,E=i.cellHeight,x=Math.ceil(p/m),y=Math.ceil(v/E),S=m,C=E,I=m-(x*m-p),O=E-(y*E-v),M,L,P=i.showCells,b=i.showAltCells,B=i.showOutline,U=0,H=0,Y=0,j=0,_=0;if(B&&(S--,C--,I===m&&I--,O===E&&O--),h.pipelines.preBatch(i),P&&i.fillAlpha>0)for(M=d.fillTint,L=g.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*f),M.TL=L,M.TR=L,M.BL=L,M.BR=L,H=0;H<y;H++)for(b&&(Y=H%2),U=0;U<x;U++){if(b&&Y){Y=0;continue}Y++,j=U<x-1?S:I,_=H<y-1?C:O,d.batchFillRect(U*m,H*E,j,_)}if(b&&i.altFillAlpha>0)for(M=d.fillTint,L=g.getTintAppendFloatAlpha(i.altFillColor,i.altFillAlpha*f),M.TL=L,M.TR=L,M.BL=L,M.BR=L,H=0;H<y;H++)for(b&&(Y=H%2),U=0;U<x;U++){if(b&&!Y){Y=1;continue}Y=0,j=U<x-1?S:I,_=H<y-1?C:O,d.batchFillRect(U*m,H*E,j,_)}if(B&&i.outlineFillAlpha>0){var w=d.strokeTint,D=g.getTintAppendFloatAlpha(i.outlineFillColor,i.outlineFillAlpha*f);for(w.TL=D,w.TR=D,w.BL=D,w.BR=D,U=1;U<x;U++){var N=U*m;d.batchLine(N,0,N,v,1,1,1,0,!1)}for(H=1;H<y;H++){var G=H*E;d.batchLine(0,G,p,G,1,1,1,0,!1)}}h.pipelines.postBatch(i)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(48),g=e(60),l=e(30),h=function(i,s,n,d){n.addToRenderList(s);var a=i.currentContext;if(l(i,a,s,n,d)){var u=-s._displayOriginX,f=-s._displayOriginY,p=n.alpha*s.alpha,v=s.width,m=s.height,E=s.cellWidth,x=s.cellHeight,y=Math.ceil(v/E),S=Math.ceil(m/x),C=E,I=x,O=E-(y*E-v),M=x-(S*x-m),L=s.showCells,P=s.showAltCells,b=s.showOutline,B=0,U=0,H=0,Y=0,j=0;if(b&&(C--,I--,O===E&&O--,M===x&&M--),L&&s.fillAlpha>0)for(o(a,s),U=0;U<S;U++)for(P&&(H=U%2),B=0;B<y;B++){if(P&&H){H=0;continue}H++,Y=B<y-1?C:O,j=U<S-1?I:M,a.fillRect(u+B*E,f+U*x,Y,j)}if(P&&s.altFillAlpha>0)for(o(a,s,s.altFillColor,s.altFillAlpha*p),U=0;U<S;U++)for(P&&(H=U%2),B=0;B<y;B++){if(P&&!H){H=1;continue}H=0,Y=B<y-1?C:O,j=U<S-1?I:M,a.fillRect(u+B*E,f+U*x,Y,j)}if(b&&s.outlineFillAlpha>0){for(g(a,s,s.outlineFillColor,s.outlineFillAlpha*p),B=1;B<y;B++){var _=B*E;a.beginPath(),a.moveTo(_+u,f),a.lineTo(_+u,m+f),a.stroke()}for(U=1;U<S;U++){var w=U*x;a.beginPath(),a.moveTo(u,w+f),a.lineTo(u+v,w+f),a.stroke()}}a.restore()}};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1110),g=e(1111),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=e(12),l=function(h,i,s,n){s.addToRenderList(i);var d=h.pipelines.set(i.pipeline),a=o(i,s,n),u=d.calcMatrix.copyFrom(a.calc),f=i.width,p=i.height,v=f/2,m=f/i.projection,E=s.alpha*i.alpha;if(!!i.isFilled){var x,y,S,C,I,O,M,L,P;h.pipelines.preBatch(i),i.showTop&&(x=g.getTintAppendFloatAlpha(i.fillTop,E),y=u.getX(-v,-p),S=u.getY(-v,-p),C=u.getX(0,-m-p),I=u.getY(0,-m-p),O=u.getX(v,-p),M=u.getY(v,-p),L=u.getX(0,m-p),P=u.getY(0,m-p),d.batchQuad(i,y,S,C,I,O,M,L,P,0,0,1,1,x,x,x,x,2)),i.showLeft&&(x=g.getTintAppendFloatAlpha(i.fillLeft,E),y=u.getX(-v,0),S=u.getY(-v,0),C=u.getX(0,m),I=u.getY(0,m),O=u.getX(0,m-p),M=u.getY(0,m-p),L=u.getX(-v,-p),P=u.getY(-v,-p),d.batchQuad(i,y,S,C,I,O,M,L,P,0,0,1,1,x,x,x,x,2)),i.showRight&&(x=g.getTintAppendFloatAlpha(i.fillRight,E),y=u.getX(v,0),S=u.getY(v,0),C=u.getX(0,m),I=u.getY(0,m),O=u.getX(0,m-p),M=u.getY(0,m-p),L=u.getX(v,-p),P=u.getY(v,-p),d.batchQuad(i,y,S,C,I,O,M,L,P,0,0,1,1,x,x,x,x,2)),h.pipelines.postBatch(i)}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(48),g=e(30),l=function(h,i,s,n){s.addToRenderList(i);var d=h.currentContext;if(g(h,d,i,s,n)&&i.isFilled){var a=i.width,u=i.height,f=a/2,p=a/i.projection;i.showTop&&(o(d,i,i.fillTop),d.beginPath(),d.moveTo(-f,-u),d.lineTo(0,-p-u),d.lineTo(f,-u),d.lineTo(f,-1),d.lineTo(0,p-1),d.lineTo(-f,-1),d.lineTo(-f,-u),d.fill()),i.showLeft&&(o(d,i,i.fillLeft),d.beginPath(),d.moveTo(-f,0),d.lineTo(0,p),d.lineTo(0,p-u),d.lineTo(-f,-u),d.lineTo(-f,0),d.fill()),i.showRight&&(o(d,i,i.fillRight),d.beginPath(),d.moveTo(f,0),d.lineTo(0,p),d.lineTo(0,p-u),d.lineTo(f,-u),d.lineTo(f,0),d.fill()),d.restore()}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1113),g=e(1114),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=e(12),l=function(h,i,s,n){s.addToRenderList(i);var d=h.pipelines.set(i.pipeline),a=o(i,s,n),u=d.calcMatrix.copyFrom(a.calc),f=i.width,p=i.height,v=f/2,m=f/i.projection,E=i.isReversed,x=s.alpha*i.alpha;if(!!i.isFilled){h.pipelines.preBatch(i);var y,S,C,I,O,M,L;if(i.showTop&&E){y=g.getTintAppendFloatAlpha(i.fillTop,x),S=u.getX(-v,-p),C=u.getY(-v,-p),I=u.getX(0,-m-p),O=u.getY(0,-m-p),M=u.getX(v,-p),L=u.getY(v,-p);var P=u.getX(0,m-p),b=u.getY(0,m-p);d.batchQuad(i,S,C,I,O,M,L,P,b,0,0,1,1,y,y,y,y,2)}i.showLeft&&(y=g.getTintAppendFloatAlpha(i.fillLeft,x),E?(S=u.getX(-v,-p),C=u.getY(-v,-p),I=u.getX(0,m),O=u.getY(0,m),M=u.getX(0,m-p),L=u.getY(0,m-p)):(S=u.getX(-v,0),C=u.getY(-v,0),I=u.getX(0,m),O=u.getY(0,m),M=u.getX(0,m-p),L=u.getY(0,m-p)),d.batchTri(i,S,C,I,O,M,L,0,0,1,1,y,y,y,2)),i.showRight&&(y=g.getTintAppendFloatAlpha(i.fillRight,x),E?(S=u.getX(v,-p),C=u.getY(v,-p),I=u.getX(0,m),O=u.getY(0,m),M=u.getX(0,m-p),L=u.getY(0,m-p)):(S=u.getX(v,0),C=u.getY(v,0),I=u.getX(0,m),O=u.getY(0,m),M=u.getX(0,m-p),L=u.getY(0,m-p)),d.batchTri(i,S,C,I,O,M,L,0,0,1,1,y,y,y,2)),h.pipelines.postBatch(i)}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(48),g=e(30),l=function(h,i,s,n){s.addToRenderList(i);var d=h.currentContext;if(g(h,d,i,s,n)&&i.isFilled){var a=i.width,u=i.height,f=a/2,p=a/i.projection,v=i.isReversed;i.showTop&&v&&(o(d,i,i.fillTop),d.beginPath(),d.moveTo(-f,-u),d.lineTo(0,-p-u),d.lineTo(f,-u),d.lineTo(0,p-u),d.fill()),i.showLeft&&(o(d,i,i.fillLeft),d.beginPath(),v?(d.moveTo(-f,-u),d.lineTo(0,p),d.lineTo(0,p-u)):(d.moveTo(-f,0),d.lineTo(0,p),d.lineTo(0,p-u)),d.fill()),i.showRight&&(o(d,i,i.fillRight),d.beginPath(),v?(d.moveTo(f,-u),d.lineTo(0,p),d.lineTo(0,p-u)):(d.moveTo(f,0),d.lineTo(0,p),d.lineTo(0,p-u)),d.fill()),d.restore()}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1116),g=e(1117),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=e(12),l=function(h,i,s,n){s.addToRenderList(i);var d=h.pipelines.set(i.pipeline),a=o(i,s,n);d.calcMatrix.copyFrom(a.calc);var u=i._displayOriginX,f=i._displayOriginY,p=s.alpha*i.alpha;if(h.pipelines.preBatch(i),i.isStroked){var v=d.strokeTint,m=g.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*p);v.TL=m,v.TR=m,v.BL=m,v.BR=m;var E=i._startWidth,x=i._endWidth;d.batchLine(i.geom.x1-u,i.geom.y1-f,i.geom.x2-u,i.geom.y2-f,E,x,1,0,!1,a.sprite,a.camera)}h.pipelines.postBatch(i)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(60),g=e(30),l=function(h,i,s,n){s.addToRenderList(i);var d=h.currentContext;if(g(h,d,i,s,n)){var a=i._displayOriginX,u=i._displayOriginY;i.isStroked&&(o(d,i),d.beginPath(),d.moveTo(i.geom.x1-a,i.geom.y1-u),d.lineTo(i.geom.x2-a,i.geom.y2-u),d.stroke()),d.restore()}};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1119),g=e(1120),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(114),g=e(19),l=e(81),h=function(i,s,n,d){n.addToRenderList(s);var a=i.pipelines.set(s.pipeline),u=g(s,n,d),f=a.calcMatrix.copyFrom(u.calc),p=s._displayOriginX,v=s._displayOriginY,m=n.alpha*s.alpha;i.pipelines.preBatch(s),s.isFilled&&o(a,f,s,m,p,v),s.isStroked&&l(a,s,m,p,v),i.pipelines.postBatch(s)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(48),g=e(60),l=e(30),h=function(i,s,n,d){n.addToRenderList(s);var a=i.currentContext;if(l(i,a,s,n,d)){var u=s._displayOriginX,f=s._displayOriginY,p=s.pathData,v=p.length-1,m=p[0]-u,E=p[1]-f;a.beginPath(),a.moveTo(m,E),s.closePath||(v-=2);for(var x=2;x<v;x+=2){var y=p[x]-u,S=p[x+1]-f;a.lineTo(y,S)}a.closePath(),s.isFilled&&(o(a,s),a.fill()),s.isStroked&&(g(a,s),a.stroke()),a.restore()}};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1122),g=e(1123),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=e(81),l=e(12),h=function(i,s,n,d){n.addToRenderList(s);var a=i.pipelines.set(s.pipeline),u=o(s,n,d);a.calcMatrix.copyFrom(u.calc);var f=s._displayOriginX,p=s._displayOriginY,v=n.alpha*s.alpha;if(i.pipelines.preBatch(s),s.isFilled){var m=a.fillTint,E=l.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*v);m.TL=E,m.TR=E,m.BL=E,m.BR=E,a.batchFillRect(-f,-p,s.width,s.height)}s.isStroked&&g(a,s,v,f,p),i.pipelines.postBatch(s)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(48),g=e(60),l=e(30),h=function(i,s,n,d){n.addToRenderList(s);var a=i.currentContext;if(l(i,a,s,n,d)){var u=s._displayOriginX,f=s._displayOriginY;s.isFilled&&(o(a,s),a.fillRect(-u,-f,s.width,s.height)),s.isStroked&&(g(a,s),a.beginPath(),a.rect(-u,-f,s.width,s.height),a.stroke()),a.restore()}};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1125),g=e(1126),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(114),g=e(19),l=e(81),h=function(i,s,n,d){n.addToRenderList(s);var a=i.pipelines.set(s.pipeline),u=g(s,n,d),f=a.calcMatrix.copyFrom(u.calc),p=s._displayOriginX,v=s._displayOriginY,m=n.alpha*s.alpha;i.pipelines.preBatch(s),s.isFilled&&o(a,f,s,m,p,v),s.isStroked&&l(a,s,m,p,v),i.pipelines.postBatch(s)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(48),g=e(60),l=e(30),h=function(i,s,n,d){n.addToRenderList(s);var a=i.currentContext;if(l(i,a,s,n,d)){var u=s._displayOriginX,f=s._displayOriginY,p=s.pathData,v=p.length-1,m=p[0]-u,E=p[1]-f;a.beginPath(),a.moveTo(m,E),s.closePath||(v-=2);for(var x=2;x<v;x+=2){var y=p[x]-u,S=p[x+1]-f;a.lineTo(y,S)}a.closePath(),s.isFilled&&(o(a,s),a.fill()),s.isStroked&&(g(a,s),a.stroke()),a.restore()}};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1128),g=e(1129),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=e(81),l=e(12),h=function(i,s,n,d){n.addToRenderList(s);var a=i.pipelines.set(s.pipeline),u=o(s,n,d);a.calcMatrix.copyFrom(u.calc);var f=s._displayOriginX,p=s._displayOriginY,v=n.alpha*s.alpha;if(i.pipelines.preBatch(s),s.isFilled){var m=a.fillTint,E=l.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*v);m.TL=E,m.TR=E,m.BL=E,m.BR=E;var x=s.geom.x1-f,y=s.geom.y1-p,S=s.geom.x2-f,C=s.geom.y2-p,I=s.geom.x3-f,O=s.geom.y3-p;a.batchFillTriangle(x,y,S,C,I,O,u.sprite,u.camera)}s.isStroked&&g(a,s,v,f,p),i.pipelines.postBatch(s)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(48),g=e(60),l=e(30),h=function(i,s,n,d){n.addToRenderList(s);var a=i.currentContext;if(l(i,a,s,n,d)){var u=s._displayOriginX,f=s._displayOriginY,p=s.geom.x1-u,v=s.geom.y1-f,m=s.geom.x2-u,E=s.geom.y2-f,x=s.geom.x3-u,y=s.geom.y3-f;a.beginPath(),a.moveTo(p,v),a.lineTo(m,E),a.lineTo(x,y),a.closePath(),s.isFilled&&(o(a,s),a.fill()),s.isStroked&&(g(a,s),a.stroke()),a.restore()}};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(213),g=e(5);g.register("blitter",function(l,h,i,s){return this.displayList.add(new o(this.scene,l,h,i,s))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(214),g=e(5);g.register("container",function(l,h,i){return this.displayList.add(new o(this.scene,l,h,i))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(442),g=e(5);g.register("dom",function(l,h,i,s,n){var d=new o(this.scene,l,h,i,s,n);return this.displayList.add(d),d})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(215),g=e(5);g.register("dynamicBitmapText",function(l,h,i,s,n){return this.displayList.add(new o(this.scene,l,h,i,s,n))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(444),g=e(5);g.register("extern",function(){var l=new o(this.scene);return this.displayList.add(l),l})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(216),g=e(5);g.register("graphics",function(l){return this.displayList.add(new o(this.scene,l))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(113),g=e(5);g.register("group",function(l,h){return this.updateList.add(new o(this.scene,l,h))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(125),g=e(5);g.register("image",function(l,h,i,s){return this.displayList.add(new o(this.scene,l,h,i,s))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(219),g=e(5);g.register("layer",function(l){return this.displayList.add(new o(this.scene,l))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(220);o.register("particles",function(l,h,i){return this.displayList.add(new g(this.scene,l,h,i))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(457);o.register("follower",function(l,h,i,s,n){var d=new g(this.scene,l,h,i,s,n);return this.displayList.add(d),this.updateList.add(d),d})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(221);o.register("renderTexture",function(l,h,i,s,n,d){return this.displayList.add(new g(this.scene,l,h,i,s,n,d))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(223),g=e(5);g.register("rope",function(l,h,i,s,n,d,a,u){return this.displayList.add(new o(this.scene,l,h,i,s,n,d,a,u))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(73);o.register("sprite",function(l,h,i,s){var n=new g(this.scene,l,h,i,s);return this.displayList.add(n),n})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(148),g=e(5);g.register("bitmapText",function(l,h,i,s,n,d){return this.displayList.add(new o(this.scene,l,h,i,s,n,d))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(224),g=e(5);g.register("text",function(l,h,i,s){return this.displayList.add(new o(this.scene,l,h,i,s))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(225),g=e(5);g.register("tileSprite",function(l,h,i,s,n,d){return this.displayList.add(new o(this.scene,l,h,i,s,n,d))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(129),g=e(5);g.register("zone",function(l,h,i,s){return this.displayList.add(new o(this.scene,l,h,i,s))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(226),g=e(5);g.register("video",function(l,h,i){return this.displayList.add(new o(this.scene,l,h,i))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(461),g=e(5);g.register("arc",function(l,h,i,s,n,d,a,u){return this.displayList.add(new o(this.scene,l,h,i,s,n,d,a,u))}),g.register("circle",function(l,h,i,s,n){return this.displayList.add(new o(this.scene,l,h,i,0,360,!1,s,n))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(462);o.register("curve",function(l,h,i,s,n){return this.displayList.add(new g(this.scene,l,h,i,s,n))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(463),g=e(5);g.register("ellipse",function(l,h,i,s,n,d){return this.displayList.add(new o(this.scene,l,h,i,s,n,d))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(464);o.register("grid",function(l,h,i,s,n,d,a,u,f,p){return this.displayList.add(new g(this.scene,l,h,i,s,n,d,a,u,f,p))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(465);o.register("isobox",function(l,h,i,s,n,d,a){return this.displayList.add(new g(this.scene,l,h,i,s,n,d,a))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(466);o.register("isotriangle",function(l,h,i,s,n,d,a,u){return this.displayList.add(new g(this.scene,l,h,i,s,n,d,a,u))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(467);o.register("line",function(l,h,i,s,n,d,a,u){return this.displayList.add(new g(this.scene,l,h,i,s,n,d,a,u))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(468);o.register("polygon",function(l,h,i,s,n){return this.displayList.add(new g(this.scene,l,h,i,s,n))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(473);o.register("rectangle",function(l,h,i,s,n,d){return this.displayList.add(new g(this.scene,l,h,i,s,n,d))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(474),g=e(5);g.register("star",function(l,h,i,s,n,d,a){return this.displayList.add(new o(this.scene,l,h,i,s,n,d,a))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(475);o.register("triangle",function(l,h,i,s,n,d,a,u,f,p){return this.displayList.add(new g(this.scene,l,h,i,s,n,d,a,u,f,p))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(213),g=e(28),l=e(16),h=e(13);l.register("blitter",function(i,s){i===void 0&&(i={});var n=h(i,"key",null),d=h(i,"frame",null),a=new o(this.scene,0,0,n,d);return s!==void 0&&(i.add=s),g(this.scene,a,i),a})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(28),g=e(214),l=e(16),h=e(13);l.register("container",function(i,s){i===void 0&&(i={});var n=h(i,"x",0),d=h(i,"y",0),a=h(i,"children",null),u=new g(this.scene,n,d,a);return s!==void 0&&(i.add=s),o(this.scene,u,i),u})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(215),g=e(28),l=e(16),h=e(13);l.register("dynamicBitmapText",function(i,s){i===void 0&&(i={});var n=h(i,"font",""),d=h(i,"text",""),a=h(i,"size",!1),u=new o(this.scene,0,0,n,d,a);return s!==void 0&&(i.add=s),g(this.scene,u,i),u})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(16),g=e(216);o.register("graphics",function(l,h){l===void 0&&(l={}),h!==void 0&&(l.add=h);var i=new g(this.scene,l);return l.add&&this.scene.sys.displayList.add(i),i})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(16),g=e(113);o.register("group",function(l){return new g(this.scene,null,l)})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(28),g=e(16),l=e(13),h=e(125);g.register("image",function(i,s){i===void 0&&(i={});var n=l(i,"key",null),d=l(i,"frame",null),a=new h(this.scene,0,0,n,d);return s!==void 0&&(i.add=s),o(this.scene,a,i),a})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(28),g=e(219),l=e(16),h=e(13);l.register("layer",function(i,s){i===void 0&&(i={});var n=h(i,"children",null),d=new g(this.scene,n);return s!==void 0&&(i.add=s),o(this.scene,d,i),d})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(16),g=e(13),l=e(2),h=e(220);o.register("particles",function(i,s){i===void 0&&(i={});var n=g(i,"key",null),d=g(i,"frame",null),a=l(i,"emitters",null),u=new h(this.scene,n,d,a);s!==void 0&&(i.add=s);var f=l(i,"add",!1);return f?this.displayList.add(u):this.updateList.add(u),u})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(28),g=e(16),l=e(13),h=e(221);g.register("renderTexture",function(i,s){i===void 0&&(i={});var n=l(i,"x",0),d=l(i,"y",0),a=l(i,"width",32),u=l(i,"height",32),f=l(i,"key",void 0),p=l(i,"frame",void 0),v=new h(this.scene,n,d,a,u,f,p);return s!==void 0&&(i.add=s),o(this.scene,v,i),v})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(28),g=e(16),l=e(13),h=e(6),i=e(223);g.register("rope",function(s,n){s===void 0&&(s={});var d=l(s,"key",null),a=l(s,"frame",null),u=l(s,"horizontal",!0),f=h(s,"points",void 0),p=h(s,"colors",void 0),v=h(s,"alphas",void 0),m=new i(this.scene,0,0,d,a,f,u,p,v);return n!==void 0&&(s.add=n),o(this.scene,m,s),s.add||this.updateList.add(m),m})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(28),g=e(439),l=e(16),h=e(13),i=e(73);l.register("sprite",function(s,n){s===void 0&&(s={});var d=h(s,"key",null),a=h(s,"frame",null),u=new i(this.scene,0,0,d,a);return n!==void 0&&(s.add=n),o(this.scene,u,s),g(u,s),u})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(148),g=e(28),l=e(16),h=e(13),i=e(6);l.register("bitmapText",function(s,n){s===void 0&&(s={});var d=i(s,"font",""),a=h(s,"text",""),u=h(s,"size",!1),f=i(s,"align",0),p=new o(this.scene,0,0,d,a,u,f);return n!==void 0&&(s.add=n),g(this.scene,p,s),p})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(28),g=e(16),l=e(13),h=e(224);g.register("text",function(i,s){i===void 0&&(i={});var n=l(i,"text",""),d=l(i,"style",null),a=l(i,"padding",null);a!==null&&(d.padding=a);var u=new h(this.scene,0,0,n,d);return s!==void 0&&(i.add=s),o(this.scene,u,i),u.autoRound=l(i,"autoRound",!0),u.resolution=l(i,"resolution",1),u})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(28),g=e(16),l=e(13),h=e(225);g.register("tileSprite",function(i,s){i===void 0&&(i={});var n=l(i,"x",0),d=l(i,"y",0),a=l(i,"width",512),u=l(i,"height",512),f=l(i,"key",""),p=l(i,"frame",""),v=new h(this.scene,n,d,a,u,f,p);return s!==void 0&&(i.add=s),o(this.scene,v,i),v})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(16),g=e(13),l=e(129);o.register("zone",function(h){var i=g(h,"x",0),s=g(h,"y",0),n=g(h,"width",1),d=g(h,"height",n);return new l(this.scene,i,s,n,d)})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(28),g=e(16),l=e(13),h=e(226);g.register("video",function(i,s){i===void 0&&(i={});var n=l(i,"key",null),d=new h(this.scene,0,0,n);return s!==void 0&&(i.add=s),o(this.scene,d,i),i.add||this.updateList.add(d),d})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1177),g=e(1178),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=function(l,h,i,s){if(!!h.shader){if(i.addToRenderList(h),l.pipelines.clear(),h.renderToTexture)h.load(),h.flush();else{var n=o(h,i,s).calc;(l.width!==h._rendererWidth||l.height!==h._rendererHeight)&&h.projOrtho(0,l.width,l.height,0),h.load(n.matrix),h.flush()}l.pipelines.rebind()}};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(){};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1180),g=e(1181),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=function(l,h,i,s){var n=h.faces,d=n.length;if(d!==0){i.addToRenderList(h);var a=l.pipelines.set(h.pipeline,h),u=o(h,i,s).calc,f=a.setGameObject(h),p=a.vertexViewF32,v=a.vertexViewU32,m=a.vertexCount*a.currentShader.vertexComponentCount-1,E=h.tintFill,x=[],y=h.debugCallback,S=u.a,C=u.b,I=u.c,O=u.d,M=u.e,L=u.f,P=h.viewPosition.z,b=h.hideCCW,B=i.roundPixels,U=i.alpha*h.alpha,H=0;l.pipelines.preBatch(h);for(var Y=0;Y<d;Y++){var j=n[Y];!j.isInView(i,b,P,U,S,C,I,O,M,L,B)||(a.shouldFlush(3)&&(a.flush(),m=0),m=j.load(p,v,m,f,E),H++,a.vertexCount+=3,y&&x.push(j))}h.totalFrame+=H,y&&y.call(h,h,x),l.pipelines.postBatch(h)}};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(){};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1183),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(19),g=function(l,h,i,s){i.addToRenderList(h);var n=l.pipelines.set(h.pipeline),d=o(h,i,s).calc,a=h.width,u=h.height,f=-h._radius,p=-h._radius,v=f+a,m=p+u,E=d.getX(0,0),x=d.getY(0,0),y=d.getX(f,p),S=d.getY(f,p),C=d.getX(f,m),I=d.getY(f,m),O=d.getX(v,m),M=d.getY(v,m),L=d.getX(v,p),P=d.getY(v,p);l.pipelines.preBatch(h),n.batchPointLight(h,i,y,S,C,I,O,M,L,P,E,x),l.pipelines.postBatch(h)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(229),g=e(5);g.register("shader",function(l,h,i,s,n,d,a){return this.displayList.add(new o(this.scene,l,h,i,s,n,d,a))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(230),g=e(5);g.register("mesh",function(l,h,i,s,n,d,a,u,f,p,v){return this.displayList.add(new o(this.scene,l,h,i,s,n,d,a,u,f,p,v))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(150);o.register("pointlight",function(l,h,i,s,n,d){return this.displayList.add(new g(this.scene,l,h,i,s,n,d))})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(28),g=e(16),l=e(13),h=e(229);g.register("shader",function(i,s){i===void 0&&(i={});var n=l(i,"key",null),d=l(i,"x",0),a=l(i,"y",0),u=l(i,"width",128),f=l(i,"height",128),p=new h(this.scene,n,d,a,u,f);return s!==void 0&&(i.add=s),o(this.scene,p,i),p})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(28),g=e(16),l=e(13),h=e(6),i=e(230);g.register("mesh",function(s,n){s===void 0&&(s={});var d=l(s,"key",null),a=l(s,"frame",null),u=h(s,"vertices",[]),f=h(s,"uvs",[]),p=h(s,"indicies",[]),v=h(s,"containsZ",!1),m=h(s,"normals",[]),E=h(s,"colors",16777215),x=h(s,"alphas",1),y=new i(this.scene,0,0,d,a,u,f,p,v,m,E,x);return n!==void 0&&(s.add=n),o(this.scene,y,s),y})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(28),g=e(16),l=e(13),h=e(150);g.register("pointlight",function(i,s){i===void 0&&(i={});var n=l(i,"color",16777215),d=l(i,"radius",128),a=l(i,"intensity",1),u=l(i,"attenuation",.1),f=new h(this.scene,0,0,n,d,a,u);return s!==void 0&&(i.add=s),o(this.scene,f,i),f})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(482),l=e(24),h=e(20),i=new o({Extends:g,initialize:function(n){this.scene=n,this.systems=n.sys,n.sys.settings.isBooted||n.sys.events.once(h.BOOT,this.boot,this),g.call(this)},boot:function(){var s=this.systems.events;s.on(h.SHUTDOWN,this.shutdown,this),s.on(h.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});l.register("LightsPlugin",i,"lights"),c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(65);o.Area=e(1192),o.Circumference=e(302),o.CircumferencePoint=e(169),o.Clone=e(1193),o.Contains=e(66),o.ContainsPoint=e(1194),o.ContainsRect=e(1195),o.CopyFrom=e(1196),o.Equals=e(1197),o.GetBounds=e(1198),o.GetPoint=e(300),o.GetPoints=e(301),o.Offset=e(1199),o.OffsetPoint=e(1200),o.Random=e(170),c.exports=o},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.radius>0?Math.PI*o.radius*o.radius:0};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(65),g=function(l){return new o(l.x,l.y,l.radius)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(66),g=function(l,h){return o(l,h.x,h.y)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(66),g=function(l,h){return o(l,h.x,h.y)&&o(l,h.right,h.y)&&o(l,h.x,h.bottom)&&o(l,h.right,h.bottom)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g.setTo(o.x,o.y,o.radius)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.x===g.x&&o.y===g.y&&o.radius===g.radius};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10),g=function(l,h){return h===void 0&&(h=new o),h.x=l.left,h.y=l.top,h.width=l.diameter,h.height=l.diameter,h};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return o.x+=g,o.y+=l,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.x+=g.x,o.y+=g.y,o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(111);o.Area=e(1202),o.Circumference=e(447),o.CircumferencePoint=e(218),o.Clone=e(1203),o.Contains=e(112),o.ContainsPoint=e(1204),o.ContainsRect=e(1205),o.CopyFrom=e(1206),o.Equals=e(1207),o.GetBounds=e(1208),o.GetPoint=e(445),o.GetPoints=e(446),o.Offset=e(1209),o.OffsetPoint=e(1210),o.Random=e(180),c.exports=o},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.isEmpty()?0:o.getMajorRadius()*o.getMinorRadius()*Math.PI};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(111),g=function(l){return new o(l.x,l.y,l.width,l.height)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(112),g=function(l,h){return o(l,h.x,h.y)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(112),g=function(l,h){return o(l,h.x,h.y)&&o(l,h.right,h.y)&&o(l,h.x,h.bottom)&&o(l,h.right,h.bottom)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g.setTo(o.x,o.y,o.width,o.height)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.x===g.x&&o.y===g.y&&o.width===g.width&&o.height===g.height};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10),g=function(l,h){return h===void 0&&(h=new o),h.x=l.left,h.y=l.top,h.width=l.width,h.height=l.height,h};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return o.x+=g,o.y+=l,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.x+=g.x,o.y+=g.y,o};c.exports=e},function(c,R,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=e(231),l=function(h,i,s){if(s===void 0&&(s=[]),g(h,i)){var n=h.x,d=h.y,a=h.radius,u=i.x,f=i.y,p=i.radius,v,m,E,x,y;if(d===f)y=(p*p-a*a-u*u+n*n)/(2*(n-u)),v=1,m=-2*f,E=u*u+y*y-2*u*y+f*f-p*p,x=m*m-4*v*E,x===0?s.push(new o(y,-m/(2*v))):x>0&&(s.push(new o(y,(-m+Math.sqrt(x))/(2*v))),s.push(new o(y,(-m-Math.sqrt(x))/(2*v))));else{var S=(n-u)/(d-f),C=(p*p-a*a-u*u+n*n-f*f+d*d)/(2*(d-f));v=S*S+1,m=2*d*S-2*C*S-2*n,E=n*n+d*d+C*C-a*a-2*d*C,x=m*m-4*v*E,x===0?(y=-m/(2*v),s.push(new o(y,C-y*S))):x>0&&(y=(-m+Math.sqrt(x))/(2*v),s.push(new o(y,C-y*S)),y=(-m-Math.sqrt(x))/(2*v),s.push(new o(y,C-y*S)))}}return s};c.exports=l},function(c,R,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(232),g=e(151),l=function(h,i,s){if(s===void 0&&(s=[]),g(h,i)){var n=i.getLineA(),d=i.getLineB(),a=i.getLineC(),u=i.getLineD();o(n,h,s),o(d,h,s),o(a,h,s),o(u,h,s)}return s};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(140),g=e(487),l=e(47),h=new l;function i(d,a,u,f,p){var v=Math.cos(d),m=Math.sin(d);h.setTo(a,u,a+v,u+m);var E=g(h,f);E&&p.push(new o(E.x,E.y,d,E.w))}function s(d,a){return d.z-a.z}var n=function(d,a,u){Array.isArray(u)||(u=[u]);for(var f=[],p=[],v=0;v<u.length;v++)for(var m=u[v].points,E=0;E<m.length;E++){var x=Math.atan2(m[E].y-a,m[E].x-d);p.indexOf(x)===-1&&(i(x,d,a,u,f),i(x-1e-5,d,a,u,f),i(x+1e-5,d,a,u,f),p.push(x))}return f.sort(s)};c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10),g=e(152),l=function(h,i,s){return s===void 0&&(s=new o),g(h,i)&&(s.x=Math.max(h.x,i.x),s.y=Math.max(h.y,i.y),s.width=Math.min(h.right,i.right)-s.x,s.height=Math.min(h.bottom,i.bottom)-s.y),s};c.exports=l},function(c,R,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(234),g=e(152),l=function(h,i,s){if(s===void 0&&(s=[]),g(h,i)){var n=h.getLineA(),d=h.getLineB(),a=h.getLineC(),u=h.getLineD();o(n,i,s),o(d,i,s),o(a,i,s),o(u,i,s)}return s};c.exports=l},function(c,R,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(489),g=e(234),l=function(h,i,s){if(s===void 0&&(s=[]),o(h,i)){var n=i.getLineA(),d=i.getLineB(),a=i.getLineC();g(n,h,s),g(d,h,s),g(a,h,s)}return s};c.exports=l},function(c,R,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(232),g=e(491),l=function(h,i,s){if(s===void 0&&(s=[]),g(h,i)){var n=h.getLineA(),d=h.getLineB(),a=h.getLineC();o(n,i,s),o(d,i,s),o(a,i,s)}return s};c.exports=l},function(c,R,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(494),g=e(492),l=function(h,i,s){if(s===void 0&&(s=[]),o(h,i)){var n=i.getLineA(),d=i.getLineB(),a=i.getLineC();g(h,n,s),g(h,d,s),g(h,a,s)}return s};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(496),g=function(l,h){if(!o(l,h))return!1;var i=Math.min(h.x1,h.x2),s=Math.max(h.x1,h.x2),n=Math.min(h.y1,h.y2),d=Math.max(h.y1,h.y2);return l.x>=i&&l.x<=s&&l.y>=n&&l.y<=d};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i,s){return s===void 0&&(s=0),!(g>o.right+s||l<o.left-s||h>o.bottom+s||i<o.top-s)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(47);o.Angle=e(97),o.BresenhamPoints=e(317),o.CenterOn=e(1222),o.Clone=e(1223),o.CopyFrom=e(1224),o.Equals=e(1225),o.Extend=e(1226),o.GetEasedPoints=e(1227),o.GetMidPoint=e(1228),o.GetNearestPoint=e(1229),o.GetNormal=e(1230),o.GetPoint=e(307),o.GetPoints=e(172),o.GetShortestDistance=e(1231),o.Height=e(1232),o.Length=e(67),o.NormalAngle=e(497),o.NormalX=e(1233),o.NormalY=e(1234),o.Offset=e(1235),o.PerpSlope=e(1236),o.Random=e(173),o.ReflectAngle=e(1237),o.Rotate=e(1238),o.RotateAroundPoint=e(1239),o.RotateAroundXY=e(236),o.SetToAngle=e(1240),o.Slope=e(1241),o.Width=e(1242),c.exports=o},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=g-(o.x1+o.x2)/2,i=l-(o.y1+o.y2)/2;return o.x1+=h,o.y1+=i,o.x2+=h,o.y2+=i,o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(47),g=function(l){return new o(l.x1,l.y1,l.x2,l.y2)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g.setTo(o.x1,o.y1,o.x2,o.y2)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.x1===g.x1&&o.y1===g.y1&&o.x2===g.x2&&o.y2===g.y2};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(67),g=function(l,h,i){i===void 0&&(i=h);var s=o(l),n=l.x2-l.x1,d=l.y2-l.y1;return h&&(l.x1=l.x1-n/s*h,l.y1=l.y1-d/s*h),i&&(l.x2=l.x2+n/s*i,l.y2=l.y2+d/s*i),l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(352),g=e(80),l=e(4),h=function(i,s,n,d,a){d===void 0&&(d=0),a===void 0&&(a=[]);var u=[],f=i.x1,p=i.y1,v=i.x2-f,m=i.y2-p,E=g(s,a),x,y,S=n-1;for(x=0;x<S;x++)y=E(x/S),u.push(new l(f+v*y,p+m*y));if(y=E(1),u.push(new l(f+v*y,p+m*y)),d>0){var C=u[0],I=[C];for(x=1;x<u.length-1;x++){var O=u[x];o(C,O)>=d&&(I.push(O),C=O)}var M=u[u.length-1];return o(C,M)<d&&I.pop(),I.push(M),I}else return u};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h){return h===void 0&&(h=new o),h.x=(l.x1+l.x2)/2,h.y=(l.y1+l.y2)/2,h};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h,i){i===void 0&&(i=new o);var s=l.x1,n=l.y1,d=l.x2,a=l.y2,u=(d-s)*(d-s)+(a-n)*(a-n);if(u===0)return i;var f=((h.x-s)*(d-s)+(h.y-n)*(a-n))/u;return i.x=s+f*(d-s),i.y=n+f*(a-n),i};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(14),g=e(97),l=e(4),h=function(i,s){s===void 0&&(s=new l);var n=g(i)-o.TAU;return s.x=Math.cos(n),s.y=Math.sin(n),s};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=o.x1,h=o.y1,i=o.x2,s=o.y2,n=(i-l)*(i-l)+(s-h)*(s-h);if(n===0)return!1;var d=((h-g.y)*(i-l)-(l-g.x)*(s-h))/n;return Math.abs(d)*Math.sqrt(n)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return Math.abs(o.y1-o.y2)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(14),g=e(97),l=function(h){return Math.cos(g(h)-o.TAU)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(14),g=e(97),l=function(h){return Math.sin(g(h)-o.TAU)};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return o.x1+=g,o.y1+=l,o.x2+=g,o.y2+=l,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return-((o.x2-o.x1)/(o.y2-o.y1))};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(97),g=e(497),l=function(h,i){return 2*g(i)-Math.PI-o(h)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(236),g=function(l,h){var i=(l.x1+l.x2)/2,s=(l.y1+l.y2)/2;return o(l,i,s,h)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(236),g=function(l,h,i){return o(l,h.x,h.y,i)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h,i){return o.x1=g,o.y1=l,o.x2=g+Math.cos(h)*i,o.y2=l+Math.sin(h)*i,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return(o.y2-o.y1)/(o.x2-o.x1)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return Math.abs(o.x1-o.x2)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={Face:e(116),GenerateGridVerts:e(1244),GenerateObjVerts:e(480),GenerateVerts:e(479),ParseObj:e(498),ParseObjMaterial:e(499),RotateFace:e(1245),Vertex:e(117)};c.exports=o},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(116),g=e(2),l=e(69),h=e(39),i=e(117),s=new h,n=new h,d=new l,a=function(u){var f=g(u,"mesh"),p=g(u,"texture",null),v=g(u,"frame"),m=g(u,"width",1),E=g(u,"height",m),x=g(u,"widthSegments",1),y=g(u,"heightSegments",x),S=g(u,"x",0),C=g(u,"y",0),I=g(u,"z",0),O=g(u,"rotateX",0),M=g(u,"rotateY",0),L=g(u,"rotateZ",0),P=g(u,"zIsUp",!0),b=g(u,"isOrtho",f?f.dirtyCache[11]:!1),B=g(u,"colors",[16777215]),U=g(u,"alphas",[1]),H=g(u,"tile",!1),Y=g(u,"flipY",!1),j=g(u,"width",null),_={faces:[],verts:[]};if(s.set(S,C,I),n.set(O,M,L),d.fromRotationXYTranslation(n,s,P),!p&&f)p=f.texture;else if(f&&typeof p=="string")p=f.scene.sys.textures.get(p);else return _;var w=p.get(v);!j&&b&&p&&f&&(m=w.width/f.height,E=w.height/f.height);var D=m/2,N=E/2,G=Math.floor(x),k=Math.floor(y),V=G+1,X=k+1,K=m/G,tt=E/k,st=[],rt=[],ht,ut,mt=0,pt=1,Tt=0,Nt=1;w&&(mt=w.u0,pt=w.u1,Y?(Tt=w.v1,Nt=w.v0):(Tt=w.v0,Nt=w.v1));var Ct=pt-mt,$t=Nt-Tt;for(ut=0;ut<X;ut++){var vt=ut*tt-N;for(ht=0;ht<V;ht++){var Ht=ht*K-D;rt.push(Ht,-vt);var At=mt+Ct*(ht/G),Dt=Tt+$t*(ut/k);st.push(At,Dt)}}Array.isArray(B)||(B=[B]),Array.isArray(U)||(U=[U]);var se=0,$e=0;for(ut=0;ut<k;ut++)for(ht=0;ht<G;ht++){var zt=(ht+V*ut)*2,Bt=(ht+V*(ut+1))*2,ee=(ht+1+V*(ut+1))*2,ft=(ht+1+V*ut)*2,ie=B[$e],ye=U[se],Ae=new i(rt[zt],rt[zt+1],0,st[zt],st[zt+1],ie,ye).transformMat4(d),He=new i(rt[Bt],rt[Bt+1],0,st[Bt],st[Bt+1],ie,ye).transformMat4(d),De=new i(rt[ft],rt[ft+1],0,st[ft],st[ft+1],ie,ye).transformMat4(d),ne=new i(rt[Bt],rt[Bt+1],0,st[Bt],st[Bt+1],ie,ye).transformMat4(d),W=new i(rt[ee],rt[ee+1],0,st[ee],st[ee+1],ie,ye).transformMat4(d),Z=new i(rt[ft],rt[ft+1],0,st[ft],st[ft+1],ie,ye).transformMat4(d);H&&(Ae.setUVs(mt,Nt),He.setUVs(mt,Tt),De.setUVs(pt,Nt),ne.setUVs(mt,Tt),W.setUVs(pt,Tt),Z.setUVs(pt,Nt)),$e++,$e===B.length&&($e=0),se++,se===U.length&&(se=0),_.verts.push(Ae,He,De,ne,W,Z),_.faces.push(new o(Ae,He,De),new o(ne,W,Z))}return f&&(f.faces=f.faces.concat(_.faces),f.vertices=f.vertices.concat(_.verts)),_};c.exports=a},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){var i,s;if(l===void 0&&h===void 0){var n=o.getInCenter();i=n.x,s=n.y}var d=Math.cos(g),a=Math.sin(g),u=o.vertex1,f=o.vertex2,p=o.vertex3,v=u.x-i,m=u.y-s;u.set(v*d-m*a+i,v*a+m*d+s),v=f.x-i,m=f.y-s,f.set(v*d-m*a+i,v*a+m*d+s),v=p.x-i,m=p.y-s,p.set(v*d-m*a+i,v*a+m*d+s)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4);o.Ceil=e(1247),o.Clone=e(1248),o.CopyFrom=e(1249),o.Equals=e(1250),o.Floor=e(1251),o.GetCentroid=e(1252),o.GetMagnitude=e(500),o.GetMagnitudeSq=e(501),o.GetRectangleFromPoints=e(1253),o.Interpolate=e(1254),o.Invert=e(1255),o.Negative=e(1256),o.Project=e(1257),o.ProjectUnit=e(1258),o.SetMagnitude=e(1259),c.exports=o},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.setTo(Math.ceil(o.x),Math.ceil(o.y))};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l){return new o(l.x,l.y)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g.setTo(o.x,o.y)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.x===g.x&&o.y===g.y};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.setTo(Math.floor(o.x),Math.floor(o.y))};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h){if(h===void 0&&(h=new o),!Array.isArray(l))throw new Error("GetCentroid points argument must be an array");var i=l.length;if(i<1)throw new Error("GetCentroid points array must not be empty");if(i===1)h.x=l[0].x,h.y=l[0].y;else{for(var s=0;s<i;s++)h.x+=l[s].x,h.y+=l[s].y;h.x/=i,h.y/=i}return h};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10),g=function(l,h){h===void 0&&(h=new o);for(var i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,a=0;a<l.length;a++){var u=l[a];u.x>i&&(i=u.x),u.x<s&&(s=u.x),u.y>n&&(n=u.y),u.y<d&&(d=u.y)}return h.x=s,h.y=d,h.width=i-s,h.height=n-d,h};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h,i,s){return i===void 0&&(i=0),s===void 0&&(s=new o),s.x=l.x+(h.x-l.x)*i,s.y=l.y+(h.y-l.y)*i,s};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.setTo(o.y,o.x)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h){return h===void 0&&(h=new o),h.setTo(-l.x,-l.y)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=e(501),l=function(h,i,s){s===void 0&&(s=new o);var n=h.x*i.x+h.y*i.y,d=n/g(i);return d!==0&&(s.x=d*i.x,s.y=d*i.y),s};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h,i){i===void 0&&(i=new o);var s=l.x*h.x+l.y*h.y;return s!==0&&(i.x=s*h.x,i.y=s*h.y),i};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(500),g=function(l,h){if(l.x!==0||l.y!==0){var i=o(l);l.x/=i,l.y/=i}return l.x*=h,l.y*=h,l};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(227);o.Clone=e(1261),o.Contains=e(228),o.ContainsPoint=e(1262),o.Earcut=e(59),o.GetAABB=e(469),o.GetNumberArray=e(1263),o.GetPoints=e(470),o.Perimeter=e(471),o.Reverse=e(1264),o.Simplify=e(1265),o.Smooth=e(472),o.Translate=e(1266),c.exports=o},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(227),g=function(l){return new o(l.points)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(228),g=function(l,h){return o(l,h.x,h.y)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){g===void 0&&(g=[]);for(var l=0;l<o.points.length;l++)g.push(o.points[l].x),g.push(o.points[l].y);return g};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.points.reverse(),o};c.exports=e},function(c,R){function e(s,n){var d=s.x-n.x,a=s.y-n.y;return d*d+a*a}function o(s,n,d){var a=n.x,u=n.y,f=d.x-a,p=d.y-u;if(f!==0||p!==0){var v=((s.x-a)*f+(s.y-u)*p)/(f*f+p*p);v>1?(a=d.x,u=d.y):v>0&&(a+=f*v,u+=p*v)}return f=s.x-a,p=s.y-u,f*f+p*p}function g(s,n){for(var d=s[0],a=[d],u,f=1,p=s.length;f<p;f++)u=s[f],e(u,d)>n&&(a.push(u),d=u);return d!==u&&a.push(u),a}function l(s,n,d,a,u){for(var f=a,p,v=n+1;v<d;v++){var m=o(s[v],s[n],s[d]);m>f&&(p=v,f=m)}f>a&&(p-n>1&&l(s,n,p,a,u),u.push(s[p]),d-p>1&&l(s,p,d,a,u))}function h(s,n){var d=s.length-1,a=[s[0]];return l(s,0,d,n,a),a.push(s[d]),a}var i=function(s,n,d){n===void 0&&(n=1),d===void 0&&(d=!1);var a=s.points;if(a.length>2){var u=n*n;d||(a=g(a,u)),s.setTo(h(a,u))}return s};c.exports=i},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){for(var h=o.points,i=0;i<h.length;i++)h[i].x+=g,h[i].y+=l;return o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.width*o.height};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.x=Math.ceil(o.x),o.y=Math.ceil(o.y),o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.x=Math.ceil(o.x),o.y=Math.ceil(o.y),o.width=Math.ceil(o.width),o.height=Math.ceil(o.height),o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10),g=function(l){return new o(l.x,l.y,l.width,l.height)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(57),g=function(l,h){return o(l,h.x,h.y)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g.setTo(o.x,o.y,o.width,o.height)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.x===g.x&&o.y===g.y&&o.width===g.width&&o.height===g.height};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(237),g=function(l,h){var i=o(l);return i<o(h)?l.setSize(h.height*i,h.height):l.setSize(h.width,h.width/i),l.setPosition(h.centerX-l.width/2,h.centerY-l.height/2)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(237),g=function(l,h){var i=o(l);return i>o(h)?l.setSize(h.height*i,h.height):l.setSize(h.width,h.width/i),l.setPosition(h.centerX-l.width/2,h.centerY-l.height/2)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.x=Math.floor(o.x),o.y=Math.floor(o.y),o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.x=Math.floor(o.x),o.y=Math.floor(o.y),o.width=Math.floor(o.width),o.height=Math.floor(o.height),o};c.exports=e},function(c,R,e){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10),g=function(l,h,i,s,n){return n===void 0&&(n=new o),n.setTo(Math.min(l,i),Math.min(h,s),Math.abs(l-i),Math.abs(h-s))};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h){return h===void 0&&(h=new o),h.x=l.centerX,h.y=l.centerY,h};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=function(l,h){return h===void 0&&(h=new o),h.x=l.width,h.y=l.height,h};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(190),g=function(l,h,i){var s=l.centerX,n=l.centerY;return l.setSize(l.width+h*2,l.height+i*2),o(l,s,n)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(10),g=e(152),l=function(h,i,s){return s===void 0&&(s=new o),g(h,i)?(s.x=Math.max(h.x,i.x),s.y=Math.max(h.y,i.y),s.width=Math.min(h.right,i.right)-s.x,s.height=Math.min(h.bottom,i.bottom)-s.y):s.setEmpty(),s};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){for(var l=o.x,h=o.right,i=o.y,s=o.bottom,n=0;n<g.length;n++)l=Math.min(l,g[n].x),h=Math.max(h,g[n].x),i=Math.min(i,g[n].y),s=Math.max(s,g[n].y);return o.x=l,o.y=i,o.width=h-l,o.height=s-i,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){var l=Math.min(o.x,g.x),h=Math.max(o.right,g.right);o.x=l,o.width=h-l;var i=Math.min(o.y,g.y),s=Math.max(o.bottom,g.bottom);return o.y=i,o.height=s-i,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){var h=Math.min(o.x,g),i=Math.max(o.right,g);o.x=h,o.width=i-h;var s=Math.min(o.y,l),n=Math.max(o.bottom,l);return o.y=s,o.height=n-s,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return o.x+=g,o.y+=l,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.x+=g.x,o.y+=g.y,o};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.x<g.right&&o.right>g.x&&o.y<g.bottom&&o.bottom>g.y};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(4),g=e(36),l=function(h,i,s){s===void 0&&(s=new o),i=g(i);var n=Math.sin(i),d=Math.cos(i),a=d>0?h.width/2:h.width/-2,u=n>0?h.height/2:h.height/-2;return Math.abs(a*n)<Math.abs(u*d)?u=a*n/d:a=u*d/n,s.x=a+h.centerX,s.y=u+h.centerY,s};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(195),g=e(503),l=e(4),h=function(i,s,n){if(n===void 0&&(n=new l),g(i,s))switch(o(0,3)){case 0:n.x=i.x+Math.random()*(s.right-i.x),n.y=i.y+Math.random()*(s.top-i.y);break;case 1:n.x=s.x+Math.random()*(i.right-s.x),n.y=s.bottom+Math.random()*(i.bottom-s.bottom);break;case 2:n.x=i.x+Math.random()*(s.x-i.x),n.y=s.y+Math.random()*(i.bottom-s.y);break;case 3:n.x=s.right+Math.random()*(i.right-s.right),n.y=i.y+Math.random()*(s.bottom-i.y);break}return n};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.width===g.width&&o.height===g.height};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l){return l===void 0&&(l=g),o.width*=g,o.height*=l,o};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(82);o.Area=e(1294),o.BuildEquilateral=e(1295),o.BuildFromPolygon=e(1296),o.BuildRight=e(1297),o.CenterOn=e(1298),o.Centroid=e(504),o.CircumCenter=e(1299),o.CircumCircle=e(1300),o.Clone=e(1301),o.Contains=e(115),o.ContainsArray=e(235),o.ContainsPoint=e(1302),o.CopyFrom=e(1303),o.Decompose=e(495),o.Equals=e(1304),o.GetPoint=e(476),o.GetPoints=e(477),o.InCenter=e(506),o.Perimeter=e(1305),o.Offset=e(505),o.Random=e(181),o.Rotate=e(1306),o.RotateAroundPoint=e(1307),o.RotateAroundXY=e(238),c.exports=o},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){var g=o.x1,l=o.y1,h=o.x2,i=o.y2,s=o.x3,n=o.y3;return Math.abs(((s-g)*(i-l)-(h-g)*(n-l))/2)};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(82),g=function(l,h,i){var s=i*(Math.sqrt(3)/2),n=l,d=h,a=l+i/2,u=h+s,f=l-i/2,p=h+s;return new o(n,d,a,u,f,p)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(59),g=e(82),l=function(h,i,s,n,d){i===void 0&&(i=null),s===void 0&&(s=1),n===void 0&&(n=1),d===void 0&&(d=[]);for(var a=o(h,i),u,f,p,v,m,E,x,y,S,C=0;C<a.length;C+=3)u=a[C],f=a[C+1],p=a[C+2],v=h[u*2]*s,m=h[u*2+1]*n,E=h[f*2]*s,x=h[f*2+1]*n,y=h[p*2]*s,S=h[p*2+1]*n,d.push(new g(v,m,E,x,y,S));return d};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(82),g=function(l,h,i,s){s===void 0&&(s=i);var n=l,d=h,a=l,u=h-s,f=l+i,p=h;return new o(n,d,a,u,f,p)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(504),g=e(505),l=function(h,i,s,n){n===void 0&&(n=o);var d=n(h),a=i-d.x,u=s-d.y;return g(h,a,u)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(3);function g(h,i,s,n){return h*n-i*s}var l=function(h,i){i===void 0&&(i=new o);var s=h.x3,n=h.y3,d=h.x1-s,a=h.y1-n,u=h.x2-s,f=h.y2-n,p=2*g(d,a,u,f),v=g(a,d*d+a*a,f,u*u+f*f),m=g(d,d*d+a*a,u,u*u+f*f);return i.x=s-v/p,i.y=n+m/p,i};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(65),g=function(l,h){h===void 0&&(h=new o);var i=l.x1,s=l.y1,n=l.x2,d=l.y2,a=l.x3,u=l.y3,f=n-i,p=d-s,v=a-i,m=u-s,E=f*(i+n)+p*(s+d),x=v*(i+a)+m*(s+u),y=2*(f*(u-d)-p*(a-n)),S,C;if(Math.abs(y)<1e-6){var I=Math.min(i,n,a),O=Math.min(s,d,u);S=(Math.max(i,n,a)-I)*.5,C=(Math.max(s,d,u)-O)*.5,h.x=I+S,h.y=O+C,h.radius=Math.sqrt(S*S+C*C)}else h.x=(m*E-p*x)/y,h.y=(f*x-v*E)/y,S=h.x-i,C=h.y-s,h.radius=Math.sqrt(S*S+C*C);return h};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(82),g=function(l){return new o(l.x1,l.y1,l.x2,l.y2,l.x3,l.y3)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(115),g=function(l,h){return o(l,h.x,h.y)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g.setTo(o.x1,o.y1,o.x2,o.y2,o.x3,o.y3)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.x1===g.x1&&o.y1===g.y1&&o.x2===g.x2&&o.y2===g.y2&&o.x3===g.x3&&o.y3===g.y3};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(67),g=function(l){var h=l.getLineA(),i=l.getLineB(),s=l.getLineC();return o(h)+o(i)+o(s)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(238),g=e(506),l=function(h,i){var s=g(h);return o(h,s.x,s.y,i)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(238),g=function(l,h,i){return o(l,h.x,h.y,i)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(203),g=e(17),l={CreatePixelPerfectHandler:e(507),CreateInteractiveObject:e(508),Events:e(51),Gamepad:e(1309),InputManager:e(409),InputPlugin:e(1321),InputPluginCache:e(153),Keyboard:e(1322),Mouse:e(1336),Pointer:e(412),Touch:e(1337)};l=g(!1,l,o),c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Axis:e(509),Button:e(510),Events:e(239),Gamepad:e(511),GamepadPlugin:e(1316),Configs:e(1317)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="down"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="up"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="connected"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="disconnected"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="down"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="up"},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(9),l=e(239),h=e(511),i=e(6),s=e(153),n=e(51),d=new o({Extends:g,initialize:function(u){g.call(this),this.scene=u.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=u,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,u.pluginEvents.once(n.BOOT,this.boot,this),u.pluginEvents.on(n.START,this.start,this)},boot:function(){var a=this.scene.sys.game,u=this.settings.input,f=a.config;this.enabled=i(u,"gamepad",f.inputGamepad)&&a.device.input.gamepads,this.target=i(u,"gamepad.target",f.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var a=this,u=this.target,f=function(p){p.defaultPrevented||!a.isActive()||(a.refreshPads(),a.queue.push(p))};this.onGamepadHandler=f,u.addEventListener("gamepadconnected",f,!1),u.addEventListener("gamepaddisconnected",f,!1),this.sceneInputPlugin.pluginEvents.on(n.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(n.UPDATE,this.update);for(var a=0;a<this.gamepads.length;a++)this.gamepads[a].removeAllListeners()},disconnectAll:function(){for(var a=0;a<this.gamepads.length;a++)this.gamepads[a].pad.connected=!1},refreshPads:function(){var a=navigator.getGamepads();if(!a)this.disconnectAll();else for(var u=this.gamepads,f=0;f<a.length;f++){var p=a[f];if(!!p){var v=p.id,m=p.index,E=u[m];if(E)E.id!==v?(E.destroy(),u[m]=new h(this,p)):E.update(p);else{var x=new h(this,p);u[m]=x,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=x):this._pad3=x:this._pad2=x:this._pad1=x}}}},getAll:function(){for(var a=[],u=this.gamepads,f=0;f<u.length;f++)u[f]&&a.push(u[f]);return a},getPad:function(a){for(var u=this.gamepads,f=0;f<u.length;f++)if(u[f]&&u[f].index===a)return u[f]},update:function(){if(!!this.enabled){this.refreshPads();var a=this.queue.length;if(a!==0)for(var u=this.queue.splice(0,a),f=0;f<a;f++){var p=u[f],v=this.getPad(p.gamepad.index);p.type==="gamepadconnected"?this.emit(l.CONNECTED,v,p):p.type==="gamepaddisconnected"&&this.emit(l.DISCONNECTED,v,p)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var a=0;a<this.gamepads.length;a++)this.gamepads[a]&&this.gamepads[a].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});s.register("GamepadPlugin",d,"gamepad","gamepad","inputGamepad"),c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={DUALSHOCK_4:e(1318),SNES_USB:e(1319),XBOX_360:e(1320)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(65),g=e(66),l=e(0),h=e(203),i=e(508),s=e(507),n=e(50),d=e(111),a=e(112),u=e(51),f=e(9),p=e(2),v=e(56),m=e(153),E=e(7),x=e(24),y=e(10),S=e(57),C=e(20),I=e(82),O=e(115),M=new l({Extends:f,initialize:function(P){f.call(this),this.scene=P,this.systems=P.sys,this.settings=P.sys.settings,this.manager=P.sys.game.input,this.pluginEvents=new f,this.enabled=!0,this.displayList,this.cameras,m.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var b={cancelled:!1};this._eventContainer={stopPropagation:function(){b.cancelled=!0}},this._eventData=b,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,P.sys.events.once(C.BOOT,this.boot,this),P.sys.events.on(C.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(C.DESTROY,this.destroy,this),this.pluginEvents.emit(u.BOOT)},start:function(){var L=this.systems.events;L.on(C.TRANSITION_START,this.transitionIn,this),L.on(C.TRANSITION_OUT,this.transitionOut,this),L.on(C.TRANSITION_COMPLETE,this.transitionComplete,this),L.on(C.PRE_UPDATE,this.preUpdate,this),L.once(C.SHUTDOWN,this.shutdown,this),this.manager.events.on(u.GAME_OUT,this.onGameOut,this),this.manager.events.on(u.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(u.START)},onGameOver:function(L){this.isActive()&&this.emit(u.GAME_OVER,L.timeStamp,L)},onGameOut:function(L){this.isActive()&&this.emit(u.GAME_OUT,L.timeStamp,L)},preUpdate:function(){this.pluginEvents.emit(u.PRE_UPDATE);var L=this._pendingRemoval,P=this._pendingInsertion,b=L.length,B=P.length;if(!(b===0&&B===0)){for(var U=this._list,H=0;H<b;H++){var Y=L[H],j=U.indexOf(Y);j>-1&&(U.splice(j,1),this.clear(Y,!0))}L.length=0,this._pendingRemoval.length=0,this._list=U.concat(P.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(L,P){if(!this.isActive())return!1;if(this.pluginEvents.emit(u.UPDATE,L,P),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var b,B=this.manager,U=B.pointers,H=B.pointersTotal;for(b=0;b<H;b++)U[b].updateMotion();if(this._list.length===0)return!1;var Y=this.pollRate;if(Y===-1)return!1;if(Y>0)if(this._pollTimer-=P,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var j=!1;for(b=0;b<H;b++){var _=0,w=U[b];this._tempZones=[],this._temp=this.hitTestPointer(w),this.sortGameObjects(this._temp,w),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),_+=this.processOverOutEvents(w),this.getDragState(w)===2&&this.processDragThresholdEvent(w,L),_>0&&(j=!0)}return j},update:function(L,P){if(!this.isActive())return!1;for(var b=P.length,B=!1,U=0;U<b;U++){var H=0,Y=P[U];switch(this._tempZones=[],this._temp=this.hitTestPointer(Y),this.sortGameObjects(this._temp,Y),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),L){case h.MOUSE_DOWN:H+=this.processDragDownEvent(Y),H+=this.processDownEvents(Y),H+=this.processOverOutEvents(Y);break;case h.MOUSE_UP:H+=this.processDragUpEvent(Y),H+=this.processUpEvents(Y),H+=this.processOverOutEvents(Y);break;case h.TOUCH_START:H+=this.processDragDownEvent(Y),H+=this.processDownEvents(Y),H+=this.processOverEvents(Y);break;case h.TOUCH_END:case h.TOUCH_CANCEL:H+=this.processDragUpEvent(Y),H+=this.processUpEvents(Y),H+=this.processOutEvents(Y);break;case h.MOUSE_MOVE:case h.TOUCH_MOVE:H+=this.processDragMoveEvent(Y),H+=this.processMoveEvents(Y),H+=this.processOverOutEvents(Y);break;case h.MOUSE_WHEEL:H+=this.processWheelEvent(Y);break}H>0&&(B=!0)}return this._updatedThisFrame=!0,B},clear:function(L,P){P===void 0&&(P=!1);var b=L.input;if(!!b){P||this.queueForRemoval(L),b.gameObject=void 0,b.target=void 0,b.hitArea=void 0,b.hitAreaCallback=void 0,b.callbackContext=void 0,L.input=null;var B=this._draggable.indexOf(L);return B>-1&&this._draggable.splice(B,1),B=this._drag[0].indexOf(L),B>-1&&this._drag[0].splice(B,1),B=this._over[0].indexOf(L),B>-1&&(this._over[0].splice(B,1),this.manager.resetCursor(b)),L}},disable:function(L){L.input.enabled=!1},enable:function(L,P,b,B){return B===void 0&&(B=!1),L.input?L.input.enabled=!0:this.setHitArea(L,P,b),L.input&&B&&!L.input.dropZone&&(L.input.dropZone=B),this},hitTestPointer:function(L){for(var P=this.cameras.getCamerasBelowPointer(L),b=0;b<P.length;b++){for(var B=P[b],U=this.manager.hitTest(L,this._list,B),H=0;H<U.length;H++){var Y=U[H];Y.input.dropZone&&this._tempZones.push(Y)}if(U.length>0)return L.camera=B,U}return L.camera=P[0],[]},processDownEvents:function(L){var P=0,b=this._temp,B=this._eventData,U=this._eventContainer;B.cancelled=!1;for(var H=!1,Y=0;Y<b.length;Y++){var j=b[Y];if(!!j.input){if(P++,j.emit(u.GAMEOBJECT_POINTER_DOWN,L,j.input.localX,j.input.localY,U),B.cancelled||!j.input){H=!0;break}if(this.emit(u.GAMEOBJECT_DOWN,L,j,U),B.cancelled||!j.input){H=!0;break}}}return!H&&this.manager&&(L.downElement===this.manager.game.canvas?this.emit(u.POINTER_DOWN,L,b):this.emit(u.POINTER_DOWN_OUTSIDE,L)),P},getDragState:function(L){return this._dragState[L.id]},setDragState:function(L,P){this._dragState[L.id]=P},processDragThresholdEvent:function(L,P){var b=!1,B=this.dragTimeThreshold,U=this.dragDistanceThreshold;if((U>0&&n(L.x,L.y,L.downX,L.downY)>=U||B>0&&P>=L.downTime+B)&&(b=!0),b)return this.setDragState(L,3),this.processDragStartList(L)},processDragStartList:function(L){if(this.getDragState(L)!==3)return 0;for(var P=this._drag[L.id],b=0;b<P.length;b++){var B=P[b],U=B.input;U.dragState=2,U.dragStartX=B.x,U.dragStartY=B.y,U.dragStartXGlobal=L.worldX,U.dragStartYGlobal=L.worldY,U.dragX=U.dragStartXGlobal-U.dragStartX,U.dragY=U.dragStartYGlobal-U.dragStartY,B.emit(u.GAMEOBJECT_DRAG_START,L,U.dragX,U.dragY),this.emit(u.DRAG_START,L,B)}return this.setDragState(L,4),P.length},processDragDownEvent:function(L){var P=this._temp;if(this._draggable.length===0||P.length===0||!L.primaryDown||this.getDragState(L)!==0)return 0;this.setDragState(L,1);for(var b=[],B=0;B<P.length;B++){var U=P[B];U.input.draggable&&U.input.dragState===0&&b.push(U)}return b.length===0?(this.setDragState(L,0),0):(b.length>1&&(this.sortGameObjects(b,L),this.topOnly&&b.splice(1)),this._drag[L.id]=b,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(L,3),this.processDragStartList(L)):(this.setDragState(L,2),0))},processDragMoveEvent:function(L){if(this.getDragState(L)===2&&this.processDragThresholdEvent(L,this.manager.game.loop.now),this.getDragState(L)!==4)return 0;for(var P=this._tempZones,b=this._drag[L.id],B=0;B<b.length;B++){var U=b[B],H=U.input,Y=H.target;if(Y){var j=P.indexOf(Y);j===0?(U.emit(u.GAMEOBJECT_DRAG_OVER,L,Y),this.emit(u.DRAG_OVER,L,U,Y)):j>0?(U.emit(u.GAMEOBJECT_DRAG_LEAVE,L,Y),this.emit(u.DRAG_LEAVE,L,U,Y),H.target=P[0],Y=H.target,U.emit(u.GAMEOBJECT_DRAG_ENTER,L,Y),this.emit(u.DRAG_ENTER,L,U,Y)):(U.emit(u.GAMEOBJECT_DRAG_LEAVE,L,Y),this.emit(u.DRAG_LEAVE,L,U,Y),P[0]?(H.target=P[0],Y=H.target,U.emit(u.GAMEOBJECT_DRAG_ENTER,L,Y),this.emit(u.DRAG_ENTER,L,U,Y)):H.target=null)}else!Y&&P[0]&&(H.target=P[0],Y=H.target,U.emit(u.GAMEOBJECT_DRAG_ENTER,L,Y),this.emit(u.DRAG_ENTER,L,U,Y));var _,w;if(!U.parentContainer)_=L.worldX-H.dragX,w=L.worldY-H.dragY;else{var D=L.worldX-H.dragStartXGlobal,N=L.worldY-H.dragStartYGlobal,G=U.getParentRotation(),k=D*Math.cos(G)+N*Math.sin(G),V=N*Math.cos(G)-D*Math.sin(G);k*=1/U.parentContainer.scaleX,V*=1/U.parentContainer.scaleY,_=k+H.dragStartX,w=V+H.dragStartY}U.emit(u.GAMEOBJECT_DRAG,L,_,w),this.emit(u.DRAG,L,U,_,w)}return b.length},processDragUpEvent:function(L){for(var P=this._drag[L.id],b=0;b<P.length;b++){var B=P[b],U=B.input;if(U&&U.dragState===2){U.dragState=0,U.dragX=U.localX-B.displayOriginX,U.dragY=U.localY-B.displayOriginY;var H=!1,Y=U.target;Y&&(B.emit(u.GAMEOBJECT_DROP,L,Y),this.emit(u.DROP,L,B,Y),U.target=null,H=!0),B.input&&(B.emit(u.GAMEOBJECT_DRAG_END,L,U.dragX,U.dragY,H),this.emit(u.DRAG_END,L,B,H))}}return this.setDragState(L,0),P.splice(0),0},processMoveEvents:function(L){var P=0,b=this._temp,B=this._eventData,U=this._eventContainer;B.cancelled=!1;for(var H=!1,Y=0;Y<b.length;Y++){var j=b[Y];if(!!j.input){if(P++,j.emit(u.GAMEOBJECT_POINTER_MOVE,L,j.input.localX,j.input.localY,U),B.cancelled||!j.input){H=!0;break}if(this.emit(u.GAMEOBJECT_MOVE,L,j,U),B.cancelled||!j.input){H=!0;break}if(this.topOnly)break}}return H||this.emit(u.POINTER_MOVE,L,b),P},processWheelEvent:function(L){var P=0,b=this._temp,B=this._eventData,U=this._eventContainer;B.cancelled=!1;for(var H=!1,Y=L.deltaX,j=L.deltaY,_=L.deltaZ,w=0;w<b.length;w++){var D=b[w];if(!!D.input){if(P++,D.emit(u.GAMEOBJECT_POINTER_WHEEL,L,Y,j,_,U),B.cancelled||!D.input){H=!0;break}if(this.emit(u.GAMEOBJECT_WHEEL,L,D,Y,j,_,U),B.cancelled||!D.input){H=!0;break}}}return H||this.emit(u.POINTER_WHEEL,L,b,Y,j,_),P},processOverEvents:function(L){var P=this._temp,b=0,B=P.length,U=[];if(B>0){var H=this.manager,Y=this._eventData,j=this._eventContainer;Y.cancelled=!1;for(var _=!1,w=0;w<B;w++){var D=P[w];if(!!D.input){if(U.push(D),H.setCursor(D.input),D.emit(u.GAMEOBJECT_POINTER_OVER,L,D.input.localX,D.input.localY,j),b++,Y.cancelled||!D.input){_=!0;break}if(this.emit(u.GAMEOBJECT_OVER,L,D,j),Y.cancelled||!D.input){_=!0;break}}}_||this.emit(u.POINTER_OVER,L,U)}return this._over[L.id]=U,b},processOutEvents:function(L){var P=this._over[L.id],b=0,B=P.length;if(B>0){var U=this.manager,H=this._eventData,Y=this._eventContainer;H.cancelled=!1;var j=!1;this.sortGameObjects(P,L);for(var _=0;_<B;_++){var w=P[_];if(w=P[_],!!w.input){if(U.resetCursor(w.input),w.emit(u.GAMEOBJECT_POINTER_OUT,L,Y),b++,H.cancelled||!w.input){j=!0;break}if(this.emit(u.GAMEOBJECT_OUT,L,w,Y),H.cancelled||!w.input){j=!0;break}j||this.emit(u.POINTER_OUT,L,P)}}this._over[L.id]=[]}return b},processOverOutEvents:function(L){var P=this._temp,b,B,U=[],H=[],Y=[],j=this._over[L.id],_=this._drag[L.id],w=this.manager;for(b=0;b<j.length;b++)B=j[b],P.indexOf(B)===-1&&_.indexOf(B)===-1?U.push(B):Y.push(B);for(b=0;b<P.length;b++)B=P[b],j.indexOf(B)===-1&&H.push(B);var D=U.length,N=0,G=this._eventData,k=this._eventContainer;G.cancelled=!1;var V=!1;if(D>0){for(this.sortGameObjects(U,L),b=0;b<D;b++)if(B=U[b],!!B.input){if(w.resetCursor(B.input),B.emit(u.GAMEOBJECT_POINTER_OUT,L,k),N++,G.cancelled||!B.input){V=!0;break}if(this.emit(u.GAMEOBJECT_OUT,L,B,k),G.cancelled||!B.input){V=!0;break}}V||this.emit(u.POINTER_OUT,L,U)}if(D=H.length,G.cancelled=!1,V=!1,D>0){for(this.sortGameObjects(H,L),b=0;b<D;b++)if(B=H[b],!!B.input){if(w.setCursor(B.input),B.emit(u.GAMEOBJECT_POINTER_OVER,L,B.input.localX,B.input.localY,k),N++,G.cancelled||!B.input){V=!0;break}if(this.emit(u.GAMEOBJECT_OVER,L,B,k),G.cancelled||!B.input){V=!0;break}}V||this.emit(u.POINTER_OVER,L,H)}return j=Y.concat(H),this._over[L.id]=this.sortGameObjects(j,L),N},processUpEvents:function(L){var P=this._temp,b=this._eventData,B=this._eventContainer;b.cancelled=!1;for(var U=!1,H=0;H<P.length;H++){var Y=P[H];if(!!Y.input){if(Y.emit(u.GAMEOBJECT_POINTER_UP,L,Y.input.localX,Y.input.localY,B),b.cancelled||!Y.input){U=!0;break}if(this.emit(u.GAMEOBJECT_UP,L,Y,B),b.cancelled||!Y.input){U=!0;break}}}return!U&&this.manager&&(L.upElement===this.manager.game.canvas?this.emit(u.POINTER_UP,L,P):this.emit(u.POINTER_UP_OUTSIDE,L)),P.length},queueForInsertion:function(L){return this._pendingInsertion.indexOf(L)===-1&&this._list.indexOf(L)===-1&&this._pendingInsertion.push(L),this},queueForRemoval:function(L){return this._pendingRemoval.push(L),this},setDraggable:function(L,P){P===void 0&&(P=!0),Array.isArray(L)||(L=[L]);for(var b=0;b<L.length;b++){var B=L[b];B.input.draggable=P;var U=this._draggable.indexOf(B);P&&U===-1?this._draggable.push(B):!P&&U>-1&&this._draggable.splice(U,1)}return this},makePixelPerfect:function(L){L===void 0&&(L=1);var P=this.systems.textures;return s(P,L)},setHitArea:function(L,P,b){if(P===void 0)return this.setHitAreaFromTexture(L);Array.isArray(L)||(L=[L]);var B=!1,U=!1,H=!1,Y=!1,j=!1,_=!0;if(E(P)){var w=P;P=p(w,"hitArea",null),b=p(w,"hitAreaCallback",null),B=p(w,"draggable",!1),U=p(w,"dropZone",!1),H=p(w,"cursor",!1),Y=p(w,"useHandCursor",!1),j=p(w,"pixelPerfect",!1);var D=p(w,"alphaTolerance",1);j&&(P={},b=this.makePixelPerfect(D)),(!P||!b)&&(this.setHitAreaFromTexture(L),_=!1)}else typeof P=="function"&&!b&&(b=P,P={});for(var N=0;N<L.length;N++){var G=L[N];if(j&&G.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var k=G.input?G.input:i(G,P,b);k.customHitArea=_,k.dropZone=U,k.cursor=Y?"pointer":H,G.input=k,B&&this.setDraggable(G),this.queueForInsertion(G)}return this},setHitAreaCircle:function(L,P,b,B,U){U===void 0&&(U=g);var H=new o(P,b,B);return this.setHitArea(L,H,U)},setHitAreaEllipse:function(L,P,b,B,U,H){H===void 0&&(H=a);var Y=new d(P,b,B,U);return this.setHitArea(L,Y,H)},setHitAreaFromTexture:function(L,P){P===void 0&&(P=S),Array.isArray(L)||(L=[L]);for(var b=0;b<L.length;b++){var B=L[b],U=B.frame,H=0,Y=0;if(B.width?(H=B.width,Y=B.height):U&&(H=U.realWidth,Y=U.realHeight),B.type==="Container"&&(H===0||Y===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}H!==0&&Y!==0&&(B.input=i(B,new y(0,0,H,Y),P),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(L,P,b,B,U,H){H===void 0&&(H=S);var Y=new y(P,b,B,U);return this.setHitArea(L,Y,H)},setHitAreaTriangle:function(L,P,b,B,U,H,Y,j){j===void 0&&(j=O);var _=new I(P,b,B,U,H,Y);return this.setHitArea(L,_,j)},enableDebug:function(L,P){P===void 0&&(P=65280);var b=L.input;if(!b||!b.hitArea)return this;var B=b.hitArea,U=B.type,H=b.hitAreaDebug,Y=this.systems.add,j=this.systems.updateList;H&&(j.remove(H),H.destroy(),H=null);var _=0,w=0;switch(U){case v.CIRCLE:H=Y.arc(0,0,B.radius),_=B.x-B.radius,w=B.y-B.radius;break;case v.ELLIPSE:H=Y.ellipse(0,0,B.width,B.height),_=B.x-B.width/2,w=B.y-B.height/2;break;case v.LINE:H=Y.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case v.POLYGON:H=Y.polygon(0,0,B.points);break;case v.RECTANGLE:H=Y.rectangle(0,0,B.width,B.height),_=B.x,w=B.y;break;case v.TRIANGLE:H=Y.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return H&&(H.isFilled=!1,H.preUpdate=function(){H.setStrokeStyle(1/L.scale,P),H.setDisplayOrigin(L.displayOriginX,L.displayOriginY);var D=L.x,N=L.y,G=L.rotation,k=L.scaleX,V=L.scaleY;if(L.parentContainer){var X=L.getWorldTransformMatrix();D=X.tx,N=X.ty,G=X.rotation,k=X.scaleX,V=X.scaleY}H.setRotation(G),H.setScale(k,V),H.setPosition(D+_,N+w),H.setScrollFactor(L.scrollFactorX,L.scrollFactorY),H.setDepth(L.depth)},j.add(H),b.hitAreaDebug=H),this},removeDebug:function(L){var P=L.input;if(P&&P.hitAreaDebug){var b=P.hitAreaDebug;this.systems.updateList.remove(b),b.destroy(),P.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(L){return this.pollRate=L,this._pollTimer=0,this},setGlobalTopOnly:function(L){return this.manager.globalTopOnly=L,this},setTopOnly:function(L){return this.topOnly=L,this},sortGameObjects:function(L,P){if(L.length<2)return L;var b=P.camera.renderList;return L.sort(function(B,U){return b.indexOf(U)-b.indexOf(B)})},sortDropZones:function(L){return L.length<2?L:(this.scene.sys.depthSort(),L.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(L,P){if(!L.parentContainer&&!P.parentContainer)return this.displayList.getIndex(P)-this.displayList.getIndex(L);if(L.parentContainer===P.parentContainer)return P.parentContainer.getIndex(P)-L.parentContainer.getIndex(L);if(L.parentContainer===P)return-1;if(P.parentContainer===L)return 1;for(var b=L.getIndexList(),B=P.getIndexList(),U=Math.min(b.length,B.length),H=0;H<U;H++){var Y=b[H],j=B[H];if(Y!==j)return j-Y}return B.length-b.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(L){return this.manager.addPointer(L)},setDefaultCursor:function(L){return this.manager.setDefaultCursor(L),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(u.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var L=0;L<10;L++)this._drag[L]=[],this._over[L]=[];this.removeAllListeners();var P=this.manager;P.canvas.style.cursor=P.defaultCursor;var b=this.systems.events;b.off(C.TRANSITION_START,this.transitionIn,this),b.off(C.TRANSITION_OUT,this.transitionOut,this),b.off(C.TRANSITION_COMPLETE,this.transitionComplete,this),b.off(C.PRE_UPDATE,this.preUpdate,this),P.events.off(u.GAME_OUT,this.onGameOut,this),P.events.off(u.GAME_OVER,this.onGameOver,this),b.off(C.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(u.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(C.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});x.register("InputPlugin",M,"input"),c.exports=M},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Events:e(154),KeyboardManager:e(410),KeyboardPlugin:e(1330),Key:e(512),KeyCodes:e(143),KeyCombo:e(513),AdvanceKeyCombo:e(515),ProcessKeyCombo:e(514),ResetKeyCombo:e(516),JustDown:e(1332),JustUp:e(1333),DownDuration:e(1334),UpDuration:e(1335)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="keydown"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="keyup"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="keycombomatch"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="down"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="keydown-"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="keyup-"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="up"},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(9),l=e(154),h=e(22),i=e(6),s=e(51),n=e(153),d=e(512),a=e(143),u=e(513),f=e(1331),p=e(20),v=e(76),m=new o({Extends:g,initialize:function(x){g.call(this),this.game=x.systems.game,this.scene=x.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=x,this.manager=x.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,x.pluginEvents.once(s.BOOT,this.boot,this),x.pluginEvents.on(s.START,this.start,this)},boot:function(){var E=this.settings.input;this.enabled=i(E,"keyboard",!0);var x=i(E,"keyboard.capture",null);x&&this.addCaptures(x),this.sceneInputPlugin.pluginEvents.once(s.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(s.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(s.SHUTDOWN,this.shutdown,this),this.game.events.on(h.BLUR,this.resetKeys,this),this.scene.sys.events.on(p.PAUSE,this.resetKeys,this),this.scene.sys.events.on(p.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(E){return this.manager.addCapture(E),this},removeCapture:function(E){return this.manager.removeCapture(E),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:a.UP,down:a.DOWN,left:a.LEFT,right:a.RIGHT,space:a.SPACE,shift:a.SHIFT})},addKeys:function(E,x,y){x===void 0&&(x=!0),y===void 0&&(y=!1);var S={};if(typeof E=="string"){E=E.split(",");for(var C=0;C<E.length;C++){var I=E[C].trim();I&&(S[I]=this.addKey(I,x,y))}}else for(var O in E)S[O]=this.addKey(E[O],x,y);return S},addKey:function(E,x,y){x===void 0&&(x=!0),y===void 0&&(y=!1);var S=this.keys;if(E instanceof d){var C=S.indexOf(E);return C>-1?S[C]=E:S[E.keyCode]=E,x&&this.addCapture(E.keyCode),E.setEmitOnRepeat(y),E}return typeof E=="string"&&(E=a[E.toUpperCase()]),S[E]||(S[E]=new d(this,E),x&&this.addCapture(E),S[E].setEmitOnRepeat(y)),S[E]},removeKey:function(E,x){x===void 0&&(x=!1);var y=this.keys,S;if(E instanceof d){var C=y.indexOf(E);C>-1&&(S=this.keys[C],this.keys[C]=void 0)}else typeof E=="string"&&(E=a[E.toUpperCase()]);return y[E]&&(S=y[E],y[E]=void 0),S&&(S.plugin=null,x&&S.destroy()),this},removeAllKeys:function(E){for(var x=this.keys,y=0;y<x.length;y++){var S=x[y];S&&(x[y]=void 0,E&&S.destroy())}return this},createCombo:function(E,x){return new u(this,E,x)},checkDown:function(E,x){if(x===void 0&&(x=0),this.enabled&&E.isDown){var y=v(this.time-E.timeDown,x);if(y>E._tick)return E._tick=y,!0}return!1},update:function(){var E=this.manager.queue,x=E.length;if(!(!this.isActive()||x===0))for(var y=this.keys,S=0;S<x;S++){var C=E[S],I=C.keyCode,O=y[I],M=!1;C.cancelled===void 0&&(C.cancelled=0,C.stopImmediatePropagation=function(){C.cancelled=1},C.stopPropagation=function(){C.cancelled=-1}),C.cancelled!==-1&&(I===this.prevCode&&C.timeStamp===this.prevTime&&C.type===this.prevType||(this.prevCode=I,this.prevTime=C.timeStamp,this.prevType=C.type,C.type==="keydown"?(O&&(M=O.isDown,O.onDown(C)),!C.cancelled&&(!O||!M)&&(f[I]&&this.emit(l.KEY_DOWN+f[I],C),C.cancelled||this.emit(l.ANY_KEY_DOWN,C))):(O&&O.onUp(C),C.cancelled||(f[I]&&this.emit(l.KEY_UP+f[I],C),C.cancelled||this.emit(l.ANY_KEY_UP,C))),C.cancelled===1&&(C.cancelled=0)))}},resetKeys:function(){for(var E=this.keys,x=0;x<E.length;x++)E[x]&&E[x].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(s.MANAGER_PROCESS,this.update,this),this.game.events.off(h.BLUR,this.resetKeys),this.scene.sys.events.off(p.PAUSE,this.resetKeys,this),this.scene.sys.events.off(p.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var E=this.keys,x=0;x<E.length;x++)E[x]&&E[x].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});n.register("KeyboardPlugin",m,"keyboard","keyboard","inputKeyboard"),c.exports=m},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(143),g={};for(var l in o)g[o[l]]=l;c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o._justDown?(o._justDown=!1,!0):!1};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o._justUp?(o._justUp=!1,!0):!1};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){g===void 0&&(g=50);var l=o.plugin.game.loop.time-o.timeDown;return o.isDown&&l<g};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){g===void 0&&(g=50);var l=o.plugin.game.loop.time-o.timeUp;return o.isUp&&l<g};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={MouseManager:e(411)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={TouchManager:e(413)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(21),g=e(17),l={Events:e(95),FileTypes:e(1339),File:e(23),FileTypesManager:e(8),GetURL:e(155),LoaderPlugin:e(1365),MergeXHRSettings:e(240),MultiFile:e(49),XHRLoader:e(517),XHRSettings:e(156)};l=g(!1,l,o),c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AnimationJSONFile:e(1340),AsepriteFile:e(1341),AtlasJSONFile:e(1342),AtlasXMLFile:e(1343),AudioFile:e(518),AudioSpriteFile:e(1344),BinaryFile:e(1345),BitmapFontFile:e(1346),CSSFile:e(1347),GLSLFile:e(1348),HTML5AudioFile:e(519),HTMLFile:e(1349),HTMLTextureFile:e(1350),ImageFile:e(71),JSONFile:e(61),MultiAtlasFile:e(1351),MultiScriptFile:e(1352),OBJFile:e(1353),PackFile:e(1354),PluginFile:e(1355),SceneFile:e(1356),ScenePluginFile:e(1357),ScriptFile:e(520),SpriteSheetFile:e(1358),SVGFile:e(1359),TextFile:e(242),TilemapCSVFile:e(1360),TilemapImpactFile:e(1361),TilemapJSONFile:e(1362),UnityAtlasFile:e(1363),VideoFile:e(1364),XMLFile:e(241)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(8),l=e(61),h=e(95),i=new o({Extends:l,initialize:function(n,d,a,u,f){l.call(this,n,d,a,u,f),this.type="animationJSON"},onProcess:function(){this.loader.once(h.POST_PROCESS,this.onLoadComplete,this),l.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});g.register("animation",function(s,n,d,a){if(Array.isArray(s))for(var u=0;u<s.length;u++)this.addFile(new i(this,s[u]));else this.addFile(new i(this,s,n,a,d));return this}),c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(8),l=e(2),h=e(71),i=e(7),s=e(61),n=e(49),d=new o({Extends:n,initialize:function(u,f,p,v,m,E){var x,y;if(i(f)){var S=f;f=l(S,"key"),x=new h(u,{key:f,url:l(S,"textureURL"),extension:l(S,"textureExtension","png"),normalMap:l(S,"normalMap"),xhrSettings:l(S,"textureXhrSettings")}),y=new s(u,{key:f,url:l(S,"atlasURL"),extension:l(S,"atlasExtension","json"),xhrSettings:l(S,"atlasXhrSettings")})}else x=new h(u,f,p,m),y=new s(u,f,v,E);x.linkFile?n.call(this,u,"atlasjson",f,[x,y,x.linkFile]):n.call(this,u,"atlasjson",f,[x,y])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],u=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(a.key,a.data,u.data,f),u.addToCache(),this.complete=!0}}});g.register("aseprite",function(a,u,f,p,v){var m;if(Array.isArray(a))for(var E=0;E<a.length;E++)m=new d(this,a[E]),this.addFile(m.files);else m=new d(this,a,u,f,p,v),this.addFile(m.files);return this}),c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(8),l=e(2),h=e(71),i=e(7),s=e(61),n=e(49),d=new o({Extends:n,initialize:function(u,f,p,v,m,E){var x,y;if(i(f)){var S=f;f=l(S,"key"),x=new h(u,{key:f,url:l(S,"textureURL"),extension:l(S,"textureExtension","png"),normalMap:l(S,"normalMap"),xhrSettings:l(S,"textureXhrSettings")}),y=new s(u,{key:f,url:l(S,"atlasURL"),extension:l(S,"atlasExtension","json"),xhrSettings:l(S,"atlasXhrSettings")})}else x=new h(u,f,p,m),y=new s(u,f,v,E);x.linkFile?n.call(this,u,"atlasjson",f,[x,y,x.linkFile]):n.call(this,u,"atlasjson",f,[x,y])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],u=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(a.key,a.data,u.data,f),u.pendingDestroy(),this.complete=!0}}});g.register("atlas",function(a,u,f,p,v){var m;if(Array.isArray(a))for(var E=0;E<a.length;E++)m=new d(this,a[E]),this.addFile(m.files);else m=new d(this,a,u,f,p,v),this.addFile(m.files);return this}),c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(8),l=e(2),h=e(71),i=e(7),s=e(49),n=e(241),d=new o({Extends:s,initialize:function(u,f,p,v,m,E){var x,y;if(i(f)){var S=f;f=l(S,"key"),x=new h(u,{key:f,url:l(S,"textureURL"),extension:l(S,"textureExtension","png"),normalMap:l(S,"normalMap"),xhrSettings:l(S,"textureXhrSettings")}),y=new n(u,{key:f,url:l(S,"atlasURL"),extension:l(S,"atlasExtension","xml"),xhrSettings:l(S,"atlasXhrSettings")})}else x=new h(u,f,p,m),y=new n(u,f,v,E);x.linkFile?s.call(this,u,"atlasxml",f,[x,y,x.linkFile]):s.call(this,u,"atlasxml",f,[x,y])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],u=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(a.key,a.data,u.data,f),u.pendingDestroy(),this.complete=!0}}});g.register("atlasXML",function(a,u,f,p,v){var m;if(Array.isArray(a))for(var E=0;E<a.length;E++)m=new d(this,a[E]),this.addFile(m.files);else m=new d(this,a,u,f,p,v),this.addFile(m.files);return this}),c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(518),g=e(0),l=e(8),h=e(2),i=e(7),s=e(61),n=e(49),d=new g({Extends:n,initialize:function(u,f,p,v,m,E,x){if(i(f)){var y=f;f=h(y,"key"),p=h(y,"jsonURL"),v=h(y,"audioURL"),m=h(y,"audioConfig"),E=h(y,"audioXhrSettings"),x=h(y,"jsonXhrSettings")}var S;if(!v)S=new s(u,f,p,x),n.call(this,u,"audiosprite",f,[S]),this.config.resourceLoad=!0,this.config.audioConfig=m,this.config.audioXhrSettings=E;else{var C=o.create(u,f,v,m,E);C&&(S=new s(u,f,p,x),n.call(this,u,"audiosprite",f,[C,S]),this.config.resourceLoad=!1)}},onFileComplete:function(a){var u=this.files.indexOf(a);if(u!==-1&&(this.pending--,this.config.resourceLoad&&a.type==="json"&&a.data.hasOwnProperty("resources"))){var f=a.data.resources,p=h(this.config,"audioConfig"),v=h(this.config,"audioXhrSettings"),m=o.create(this.loader,a.key,f,p,v);m&&(this.addToMultiFile(m),this.loader.addFile(m))}},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],u=this.files[1];a.addToCache(),u.addToCache(),this.complete=!0}}});l.register("audioSprite",function(a,u,f,p,v,m){var E=this.systems.game,x=E.config.audio,y=E.device.audio;if(x&&x.noAudio||!y.webAudio&&!y.audioData)return this;var S;if(Array.isArray(a))for(var C=0;C<a.length;C++)S=new d(this,a[C]),S.files&&this.addFile(S.files);else S=new d(this,a,u,f,p,v,m),S.files&&this.addFile(S.files);return this})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=new o({Extends:l,initialize:function(a,u,f,p,v){var m="bin";if(s(u)){var E=u;u=i(E,"key"),f=i(E,"url"),p=i(E,"xhrSettings"),m=i(E,"extension",m),v=i(E,"dataType",v)}var x={type:"binary",cache:a.cacheManager.binary,extension:m,responseType:"arraybuffer",key:u,url:f,xhrSettings:p,config:{dataType:v}};l.call(this,a,x)},onProcess:function(){this.state=g.FILE_PROCESSING;var d=this.config.dataType;this.data=d?new d(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});h.register("binary",function(d,a,u,f){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new n(this,d[p]));else this.addFile(new n(this,d,a,f,u));return this}),c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(8),l=e(2),h=e(71),i=e(7),s=e(49),n=e(212),d=e(241),a=new o({Extends:s,initialize:function(f,p,v,m,E,x){var y,S;if(i(p)){var C=p;p=l(C,"key"),y=new h(f,{key:p,url:l(C,"textureURL"),extension:l(C,"textureExtension","png"),normalMap:l(C,"normalMap"),xhrSettings:l(C,"textureXhrSettings")}),S=new d(f,{key:p,url:l(C,"fontDataURL"),extension:l(C,"fontDataExtension","xml"),xhrSettings:l(C,"fontDataXhrSettings")})}else y=new h(f,p,v,E),S=new d(f,p,m,x);y.linkFile?s.call(this,f,"bitmapfont",p,[y,S,y.linkFile]):s.call(this,f,"bitmapfont",p,[y,S])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],f=this.files[1];u.addToCache(),f.pendingDestroy();var p=u.cache.get(u.key),v=n(f.data,u.cache.getFrame(u.key),0,0,p);this.loader.cacheManager.bitmapFont.add(u.key,{data:v,texture:u.key,frame:null}),this.complete=!0}}});g.register("bitmapFont",function(u,f,p,v,m){var E;if(Array.isArray(u))for(var x=0;x<u.length;x++)E=new a(this,u[x]),this.addFile(E.files);else E=new a(this,u,f,p,v,m),this.addFile(E.files);return this}),c.exports=a},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=new o({Extends:l,initialize:function(a,u,f,p){var v="css";if(s(u)){var m=u;u=i(m,"key"),f=i(m,"url"),p=i(m,"xhrSettings"),v=i(m,"extension",v)}var E={type:"script",cache:!1,extension:v,responseType:"text",key:u,url:f,xhrSettings:p};l.call(this,a,E)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("css",function(d,a,u){if(Array.isArray(d))for(var f=0;f<d.length;f++)this.addFile(new n(this,d[f]));else this.addFile(new n(this,d,a,u));return this}),c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=e(396),d=new o({Extends:l,initialize:function(u,f,p,v,m){var E="glsl";if(s(f)){var x=f;f=i(x,"key"),p=i(x,"url"),v=i(x,"shaderType","fragment"),m=i(x,"xhrSettings"),E=i(x,"extension",E)}else v===void 0&&(v="fragment");var y={type:"glsl",cache:u.cacheManager.shader,extension:E,responseType:"text",key:f,url:p,config:{shaderType:v},xhrSettings:m};l.call(this,u,y)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var a=this.data.split(`
`),u=this.extractBlock(a,0);if(u)for(;u;){var f=this.getShaderName(u.header),p=this.getShaderType(u.header),v=this.getShaderUniforms(u.header),m=u.shader;if(this.cache.has(f)){var E=this.cache.get(f);p==="fragment"?E.fragmentSrc=m:E.vertexSrc=m,E.uniforms||(E.uniforms=v)}else p==="fragment"?this.cache.add(f,new n(f,m,"",v)):this.cache.add(f,new n(f,"",m,v));u=this.extractBlock(a,u.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new n(this.key,this.data)):this.cache.add(this.key,new n(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(a){for(var u=0;u<a.length;u++){var f=a[u].trim();if(f.substring(0,5)==="name:")return f.substring(5).trim()}return this.key},getShaderType:function(a){for(var u=0;u<a.length;u++){var f=a[u].trim();if(f.substring(0,5)==="type:")return f.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(a){for(var u={},f=0;f<a.length;f++){var p=a[f].trim();if(p.substring(0,8)==="uniform."){var v=p.indexOf(":");if(v){var m=p.substring(8,v);try{u[m]=JSON.parse(p.substring(v+1))}catch{console.warn("Invalid uniform JSON: "+m)}}}}return u},extractBlock:function(a,u){for(var f=-1,p=-1,v=-1,m=!1,E=!1,x=[],y=[],S=u;S<a.length;S++){var C=a[S].trim();if(C==="---")if(f===-1)f=S,m=!0;else if(m)p=S,m=!1,E=!0;else{E=!1;break}else m?x.push(C):E&&(y.push(C),v=S)}return!m&&p!==-1?{header:x,shader:y.join(`
`),offset:v}:null}});h.register("glsl",function(a,u,f,p){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new d(this,a[v]));else this.addFile(new d(this,a,u,f,p));return this}),c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=new o({Extends:l,initialize:function(a,u,f,p){var v="html";if(s(u)){var m=u;u=i(m,"key"),f=i(m,"url"),p=i(m,"xhrSettings"),v=i(m,"extension",v)}var E={type:"text",cache:a.cacheManager.html,extension:v,responseType:"text",key:u,url:f,xhrSettings:p};l.call(this,a,E)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("html",function(d,a,u){if(Array.isArray(d))for(var f=0;f<d.length;f++)this.addFile(new n(this,d[f]));else this.addFile(new n(this,d,a,u));return this}),c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=new o({Extends:l,initialize:function(a,u,f,p,v,m){p===void 0&&(p=512),v===void 0&&(v=512);var E="html";if(s(u)){var x=u;u=i(x,"key"),f=i(x,"url"),m=i(x,"xhrSettings"),E=i(x,"extension",E),p=i(x,"width",p),v=i(x,"height",v)}var y={type:"html",cache:a.textureManager,extension:E,responseType:"text",key:u,url:f,xhrSettings:m,config:{width:p,height:v}};l.call(this,a,y)},onProcess:function(){this.state=g.FILE_PROCESSING;var d=this.config.width,a=this.config.height,u=[];u.push('<svg width="'+d+'px" height="'+a+'px" viewBox="0 0 '+d+" "+a+'" xmlns="http://www.w3.org/2000/svg">'),u.push('<foreignObject width="100%" height="100%">'),u.push('<body xmlns="http://www.w3.org/1999/xhtml">'),u.push(this.xhrLoader.responseText),u.push("</body>"),u.push("</foreignObject>"),u.push("</svg>");var f=[u.join(`
`)],p=this;try{var v=new window.Blob(f,{type:"image/svg+xml;charset=utf-8"})}catch{p.state=g.FILE_ERRORED,p.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){l.revokeObjectURL(p.data),p.onProcessComplete()},this.data.onerror=function(){l.revokeObjectURL(p.data),p.onProcessError()},l.createObjectURL(this.data,v,"image/svg+xml")},addToCache:function(){var d=this.cache.addImage(this.key,this.data);this.pendingDestroy(d)}});h.register("htmlTexture",function(d,a,u,f,p){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new n(this,d[v]));else this.addFile(new n(this,d,a,u,f,p));return this}),c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(8),l=e(2),h=e(71),i=e(7),s=e(61),n=e(49),d=new o({Extends:n,initialize:function(u,f,p,v,m,E,x){if(i(f)){var y=f;f=l(y,"key"),l(y,"url",!1)?p=l(y,"url"):p=l(y,"atlasURL"),E=l(y,"xhrSettings"),v=l(y,"path"),m=l(y,"baseURL"),x=l(y,"textureXhrSettings")}var S=new s(u,f,p,E);n.call(this,u,"multiatlas",f,[S]),this.config.path=v,this.config.baseURL=m,this.config.textureXhrSettings=x},onFileComplete:function(a){var u=this.files.indexOf(a);if(u!==-1&&(this.pending--,a.type==="json"&&a.data.hasOwnProperty("textures"))){var f=a.data.textures,p=this.config,v=this.loader,m=v.baseURL,E=v.path,x=v.prefix,y=l(p,"baseURL",this.baseURL),S=l(p,"path",this.path),C=l(p,"prefix",this.prefix),I=l(p,"textureXhrSettings");v.setBaseURL(y),v.setPath(S),v.setPrefix(C);for(var O=0;O<f.length;O++){var M=f[O].image,L="MA"+this.multiKeyIndex+"_"+M,P=new h(v,L,M,I);if(this.addToMultiFile(P),v.addFile(P),f[O].normalMap){var b=new h(v,L,f[O].normalMap,I);b.type="normalMap",P.setLink(b),this.addToMultiFile(b),v.addFile(b)}}v.setBaseURL(m),v.setPath(E),v.setPrefix(x)}},addToCache:function(){if(this.isReadyToProcess()){for(var a=this.files[0],u=[],f=[],p=[],v=1;v<this.files.length;v++){var m=this.files[v];if(m.type!=="normalMap")for(var E=m.key.indexOf("_"),x=m.key.substr(E+1),y=m.data,S=0;S<a.data.textures.length;S++){var C=a.data.textures[S];if(C.image===x){f.push(y),u.push(C),m.linkFile&&p.push(m.linkFile.data);break}}}for(p.length===0&&(p=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,f,u,p),this.complete=!0,v=0;v<this.files.length;v++)this.files[v].pendingDestroy()}}});g.register("multiatlas",function(a,u,f,p,v){var m;if(Array.isArray(a))for(var E=0;E<a.length;E++)m=new d(this,a[E]),this.addFile(m.files);else m=new d(this,a,u,f,p,v),this.addFile(m.files);return this}),c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(8),l=e(2),h=e(7),i=e(49),s=e(520),n=new o({Extends:i,initialize:function(a,u,f,p){var v="js",m=[];if(h(u)){var E=u;u=l(E,"key"),f=l(E,"url"),p=l(E,"xhrSettings"),v=l(E,"extension",v)}Array.isArray(f)||(f=[f]);for(var x=0;x<f.length;x++){var y=new s(a,{key:u+"_"+x.toString(),url:f[x],extension:v,xhrSettings:p});y.onProcess=function(){this.onProcessComplete()},m.push(y)}i.call(this,a,"scripts",u,m)},addToCache:function(){if(this.isReadyToProcess()){for(var d=0;d<this.files.length;d++){var a=this.files[d];a.data=document.createElement("script"),a.data.language="javascript",a.data.type="text/javascript",a.data.defer=!1,a.data.text=a.xhrLoader.responseText,document.head.appendChild(a.data)}this.complete=!0}}});g.register("scripts",function(d,a,u){var f;if(Array.isArray(d))for(var p=0;p<d.length;p++)f=new n(this,d[p]),this.addFile(f.files);else f=new n(this,d,a,u),this.addFile(f.files);return this}),c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(8),l=e(2),h=e(7),i=e(49),s=e(498),n=e(499),d=e(242),a=new o({Extends:i,initialize:function(f,p,v,m,E,x){var y,S,C=f.cacheManager.obj;if(h(p)){var I=p;p=l(I,"key"),y=new d(f,{key:p,type:"obj",cache:C,url:l(I,"url"),extension:l(I,"extension","obj"),xhrSettings:l(I,"xhrSettings"),config:{flipUV:l(I,"flipUV",E)}}),m=l(I,"matURL"),m&&(S=new d(f,{key:p,type:"mat",cache:C,url:m,extension:l(I,"matExtension","mat"),xhrSettings:l(I,"xhrSettings")}))}else y=new d(f,{key:p,url:v,type:"obj",cache:C,extension:"obj",xhrSettings:x,config:{flipUV:E}}),m&&(S=new d(f,{key:p,url:m,type:"mat",cache:C,extension:"mat",xhrSettings:x}));i.call(this,f,"obj",p,[y,S])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],f=this.files[1],p=s(u.data,u.config.flipUV);f&&(p.materials=n(f.data)),u.cache.add(u.key,p),this.complete=!0}}});g.register("obj",function(u,f,p,v,m){var E;if(Array.isArray(u))for(var x=0;x<u.length;x++)E=new a(this,u[x]),this.addFile(E.files);else E=new a(this,u,f,p,v,m),this.addFile(E.files);return this}),c.exports=a},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(8),h=e(61),i=new o({Extends:h,initialize:function(n,d,a,u,f){h.call(this,n,d,a,u,f),this.type="packfile"},onProcess:function(){this.state!==g.FILE_POPULATED&&(this.state=g.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});l.register("pack",function(s,n,d,a){if(Array.isArray(s))for(var u=0;u<s.length;u++)this.addFile(new i(this,s[u]));else this.addFile(new i(this,s,n,a,d));return this}),c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=new o({Extends:l,initialize:function(a,u,f,p,v,m){var E="js";if(s(u)){var x=u;u=i(x,"key"),f=i(x,"url"),m=i(x,"xhrSettings"),E=i(x,"extension",E),p=i(x,"start"),v=i(x,"mapping")}var y={type:"plugin",cache:!1,extension:E,responseType:"text",key:u,url:f,xhrSettings:m,config:{start:p,mapping:v}};l.call(this,a,y),typeof f=="function"&&(this.data=f,this.state=g.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,a=this.config,u=i(a,"start",!1),f=i(a,"mapping",null);if(this.state===g.FILE_POPULATED)d.install(this.key,this.data,u,f);else{this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var p=d.install(this.key,window[this.key],u,f);(u||f)&&(this.loader.systems[f]=p,this.loader.scene[f]=p)}this.onProcessComplete()}});h.register("plugin",function(d,a,u,f,p){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new n(this,d[v]));else this.addFile(new n(this,d,a,u,f,p));return this}),c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=new o({Extends:l,initialize:function(a,u,f,p){var v="js";if(s(u)){var m=u;u=i(m,"key"),f=i(m,"url"),p=i(m,"xhrSettings"),v=i(m,"extension",v)}var E={type:"text",extension:v,responseType:"text",key:u,url:f,xhrSettings:p};l.call(this,a,E)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),a=eval;this.loader.sceneManager.add(this.key,a(d)),this.complete=!0}});h.register("sceneFile",function(d,a,u){if(Array.isArray(d))for(var f=0;f<d.length;f++)this.addFile(new n(this,d[f]));else this.addFile(new n(this,d,a,u));return this}),c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=new o({Extends:l,initialize:function(a,u,f,p,v,m){var E="js";if(s(u)){var x=u;u=i(x,"key"),f=i(x,"url"),m=i(x,"xhrSettings"),E=i(x,"extension",E),p=i(x,"systemKey"),v=i(x,"sceneKey")}var y={type:"scenePlugin",cache:!1,extension:E,responseType:"text",key:u,url:f,xhrSettings:m,config:{systemKey:p,sceneKey:v}};l.call(this,a,y),typeof f=="function"&&(this.data=f,this.state=g.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,a=this.config,u=this.key,f=i(a,"systemKey",u),p=i(a,"sceneKey",u);this.state===g.FILE_POPULATED?d.installScenePlugin(f,this.data,p,this.loader.scene,!0):(this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),d.installScenePlugin(f,window[this.key],p,this.loader.scene,!0)),this.onProcessComplete()}});h.register("scenePlugin",function(d,a,u,f,p){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new n(this,d[v]));else this.addFile(new n(this,d,a,u,f,p));return this}),c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(8),l=e(71),h=new o({Extends:l,initialize:function(s,n,d,a,u){l.call(this,s,n,d,u,a),this.type="spritesheet"},addToCache:function(){var i=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(i)}});g.register("spritesheet",function(i,s,n,d){if(Array.isArray(i))for(var a=0;a<i.length;a++)this.addFile(new h(this,i[a]));else this.addFile(new h(this,i,s,n,d));return this}),c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=new o({Extends:l,initialize:function(a,u,f,p,v){var m="svg";if(s(u)){var E=u;u=i(E,"key"),f=i(E,"url"),p=i(E,"svgConfig",{}),v=i(E,"xhrSettings"),m=i(E,"extension",m)}var x={type:"svg",cache:a.textureManager,extension:m,responseType:"text",key:u,url:f,xhrSettings:v,config:{width:i(p,"width"),height:i(p,"height"),scale:i(p,"scale")}};l.call(this,a,x)},onProcess:function(){this.state=g.FILE_PROCESSING;var d=this.xhrLoader.responseText,a=[d],u=this.config.width,f=this.config.height,p=this.config.scale;t:if(u&&f||p){var v=null,m=new DOMParser;v=m.parseFromString(d,"text/xml");var E=v.getElementsByTagName("svg")[0],x=E.hasAttribute("viewBox"),y=parseFloat(E.getAttribute("width")),S=parseFloat(E.getAttribute("height"));if(!x&&y&&S)E.setAttribute("viewBox","0  0 "+y+" "+S);else if(x&&!y&&!S){var C=E.getAttribute("viewBox").split(/\s+|,/);y=C[2],S=C[3]}if(p)if(y&&S)u=y*p,f=S*p;else break t;E.setAttribute("width",u.toString()+"px"),E.setAttribute("height",f.toString()+"px"),a=[new XMLSerializer().serializeToString(E)]}try{var I=new window.Blob(a,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var O=this,M=!1;this.data.onload=function(){M||l.revokeObjectURL(O.data),O.onProcessComplete()},this.data.onerror=function(){M?O.onProcessError():(M=!0,l.revokeObjectURL(O.data),O.data.src="data:image/svg+xml,"+encodeURIComponent(a.join("")))},l.createObjectURL(this.data,I,"image/svg+xml")},addToCache:function(){var d=this.cache.addImage(this.key,this.data);this.pendingDestroy(d)}});h.register("svg",function(d,a,u,f){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new n(this,d[p]));else this.addFile(new n(this,d,a,u,f));return this}),c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(2),s=e(7),n=e(40),d=new o({Extends:l,initialize:function(u,f,p,v){var m="csv";if(s(f)){var E=f;f=i(E,"key"),p=i(E,"url"),v=i(E,"xhrSettings"),m=i(E,"extension",m)}var x={type:"tilemapCSV",cache:u.cacheManager.tilemap,extension:m,responseType:"text",key:f,url:p,xhrSettings:v};l.call(this,u,x),this.tilemapFormat=n.CSV},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var a={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,a),this.pendingDestroy(a)}});h.register("tilemapCSV",function(a,u,f){if(Array.isArray(a))for(var p=0;p<a.length;p++)this.addFile(new d(this,a[p]));else this.addFile(new d(this,a,u,f));return this}),c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(8),l=e(61),h=e(40),i=new o({Extends:l,initialize:function(n,d,a,u){l.call(this,n,d,a,u),this.type="tilemapJSON",this.cache=n.cacheManager.tilemap},addToCache:function(){var s={format:h.WELTMEISTER,data:this.data};this.cache.add(this.key,s),this.pendingDestroy(s)}});g.register("tilemapImpact",function(s,n,d){if(Array.isArray(s))for(var a=0;a<s.length;a++)this.addFile(new i(this,s[a]));else this.addFile(new i(this,s,n,d));return this}),c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(8),l=e(61),h=e(40),i=new o({Extends:l,initialize:function(n,d,a,u){l.call(this,n,d,a,u),this.type="tilemapJSON",this.cache=n.cacheManager.tilemap},addToCache:function(){var s={format:h.TILED_JSON,data:this.data};this.cache.add(this.key,s),this.pendingDestroy(s)}});g.register("tilemapTiledJSON",function(s,n,d){if(Array.isArray(s))for(var a=0;a<s.length;a++)this.addFile(new i(this,s[a]));else this.addFile(new i(this,s,n,d));return this}),c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(8),l=e(2),h=e(71),i=e(7),s=e(49),n=e(242),d=new o({Extends:s,initialize:function(u,f,p,v,m,E){var x,y;if(i(f)){var S=f;f=l(S,"key"),x=new h(u,{key:f,url:l(S,"textureURL"),extension:l(S,"textureExtension","png"),normalMap:l(S,"normalMap"),xhrSettings:l(S,"textureXhrSettings")}),y=new n(u,{key:f,url:l(S,"atlasURL"),extension:l(S,"atlasExtension","txt"),xhrSettings:l(S,"atlasXhrSettings")})}else x=new h(u,f,p,m),y=new n(u,f,v,E);x.linkFile?s.call(this,u,"unityatlas",f,[x,y,x.linkFile]):s.call(this,u,"unityatlas",f,[x,y])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],u=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(a.key,a.data,u.data,f),u.pendingDestroy(),this.complete=!0}}});g.register("unityAtlas",function(a,u,f,p,v){var m;if(Array.isArray(a))for(var E=0;E<a.length;E++)m=new d(this,a[E]),this.addFile(m.files);else m=new d(this,a,u,f,p,v),this.addFile(m.files);return this}),c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(23),h=e(8),i=e(155),s=e(2),n=e(7),d=new o({Extends:l,initialize:function(u,f,p,v,m,E,x){v===void 0&&(v="loadeddata"),m===void 0&&(m=!1),E===void 0&&(E=!1),v!=="loadeddata"&&v!=="canplay"&&v!=="canplaythrough"&&(v="loadeddata");var y={type:"video",cache:u.cacheManager.video,extension:p.type,responseType:"blob",key:f,url:p.url,xhrSettings:x,config:{loadEvent:v,asBlob:m,noAudio:E}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),l.call(this,u,y)},onProcess:function(){if(this.state=g.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var a=this.createVideoElement();this.data=a;var u=this;this.data.onloadeddata=function(){u.onProcessComplete()},this.data.onerror=function(){l.revokeObjectURL(u.data),u.onProcessError()},l.createObjectURL(a,this.xhrLoader.response,""),a.load()},createVideoElement:function(){var a=document.createElement("video");return a.controls=!1,a.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(a.muted=!0,a.defaultMuted=!0,a.setAttribute("autoplay","autoplay")),a.setAttribute("playsinline","playsinline"),a.setAttribute("preload","auto"),a},onVideoLoadHandler:function(a){var u=a.target;u.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),u.removeEventListener("error",this.onErrorCallback,!0),this.data=u,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(a){var u=a.target;u&&(u.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),u.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var a=this.config.loadEvent;if(this.config.asBlob)l.prototype.load.call(this);else{this.percentComplete=0;var u=this.createVideoElement();u.addEventListener(a,this.onLoadCallback,!0),u.addEventListener("error",this.onErrorCallback,!0),u.src=i(this,this.loader.baseURL),u.load()}}});d.create=function(a,u,f,p,v,m,E){var x=a.systems.game;n(u)&&(f=s(u,"url",[]),p=s(u,"loadEvent","loadeddata"),v=s(u,"asBlob",!1),m=s(u,"noAudio",!1),E=s(u,"xhrSettings"),u=s(u,"key"));var y=d.getVideoURL(x,f);if(y)return new d(a,u,y,p,v,m,E)},d.getVideoURL=function(a,u){Array.isArray(u)||(u=[u]);for(var f=0;f<u.length;f++){var p=s(u[f],"url",u[f]);if(p.indexOf("blob:")===0)return{url:p,type:""};var v;if(p.indexOf("data:")===0?v=p.split(",")[0].match(/\/(.*?);/):v=p.match(/\.([a-zA-Z0-9]+)($|\?)/),v=s(u[f],"type",v?v[1]:"").toLowerCase(),a.device.video[v])return{url:p,type:v}}return null},h.register("video",function(a,u,f,p,v,m){var E;if(Array.isArray(a))for(var x=0;x<a.length;x++)E=d.create(this,a[x]),E&&this.addFile(E);else E=d.create(this,a,u,f,p,v,m),E&&this.addFile(E);return this}),c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(21),l=e(149),h=e(9),i=e(95),s=e(8),n=e(2),d=e(24),a=e(20),u=e(156),f=new o({Extends:h,initialize:function(v){h.call(this);var m=v.sys.game.config,E=v.sys.settings.loader;this.scene=v,this.systems=v.sys,this.cacheManager=v.sys.cache,this.textureManager=v.sys.textures,this.sceneManager=v.sys.game.scene,s.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(n(E,"baseURL",m.loaderBaseURL)),this.setPath(n(E,"path",m.loaderPath)),this.setPrefix(n(E,"prefix",m.loaderPrefix)),this.maxParallelDownloads=n(E,"maxParallelDownloads",m.loaderMaxParallelDownloads),this.xhr=u(n(E,"responseType",m.loaderResponseType),n(E,"async",m.loaderAsync),n(E,"user",m.loaderUser),n(E,"password",m.loaderPassword),n(E,"timeout",m.loaderTimeout),n(E,"withCredentials",m.loaderWithCredentials)),this.crossOrigin=n(E,"crossOrigin",m.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new l,this.inflight=new l,this.queue=new l,this._deleteQueue=new l,this.totalFailed=0,this.totalComplete=0,this.state=g.LOADER_IDLE,this.multiKeyIndex=0,v.sys.events.once(a.BOOT,this.boot,this),v.sys.events.on(a.START,this.pluginStart,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(a.SHUTDOWN,this.shutdown,this)},setBaseURL:function(p){return p===void 0&&(p=""),p!==""&&p.substr(-1)!=="/"&&(p=p.concat("/")),this.baseURL=p,this},setPath:function(p){return p===void 0&&(p=""),p!==""&&p.substr(-1)!=="/"&&(p=p.concat("/")),this.path=p,this},setPrefix:function(p){return p===void 0&&(p=""),this.prefix=p,this},setCORS:function(p){return this.crossOrigin=p,this},addFile:function(p){Array.isArray(p)||(p=[p]);for(var v=0;v<p.length;v++){var m=p[v];this.keyExists(m)||(this.list.set(m),this.emit(i.ADD,m.key,m.type,this,m),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(p){var v=p.hasCacheConflict();return v||this.list.iterate(function(m){if(m.type===p.type&&m.key===p.key)return v=!0,!1}),!v&&this.isLoading()&&(this.inflight.iterate(function(m){if(m.type===p.type&&m.key===p.key)return v=!0,!1}),this.queue.iterate(function(m){if(m.type===p.type&&m.key===p.key)return v=!0,!1})),v},addPack:function(p,v){v&&p.hasOwnProperty(v)&&(p={packKey:p[v]});var m=0,E=this.baseURL,x=this.path,y=this.prefix;for(var S in p)if(!!Object.prototype.hasOwnProperty.call(p,S)){var C=p[S],I=n(C,"baseURL",E),O=n(C,"path",x),M=n(C,"prefix",y),L=n(C,"files",null),P=n(C,"defaultType","void");if(Array.isArray(L)){this.setBaseURL(I),this.setPath(O),this.setPrefix(M);for(var b=0;b<L.length;b++){var B=L[b],U=B.hasOwnProperty("type")?B.type:P;this[U]&&(this[U](B),m++)}}}return this.setBaseURL(E),this.setPath(x),this.setPrefix(y),m>0},isLoading:function(){return this.state===g.LOADER_LOADING||this.state===g.LOADER_PROCESSING},isReady:function(){return this.state===g.LOADER_IDLE||this.state===g.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(i.START,this),this.list.size===0?this.loadComplete():(this.state=g.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(a.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(i.PROGRESS,this.progress)},update:function(){this.state===g.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(p){if((p.state===g.FILE_POPULATED||p.state===g.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(p),this.list.delete(p),p.crossOrigin||(p.crossOrigin=this.crossOrigin),p.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(p,v){!this.inflight||(this.inflight.delete(p),this.updateProgress(),v?(this.totalComplete++,this.queue.set(p),this.emit(i.FILE_LOAD,p),p.onProcess()):(this.totalFailed++,this._deleteQueue.set(p),this.emit(i.FILE_LOAD_ERROR,p),this.fileProcessComplete(p)))},fileProcessComplete:function(p){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(p.state===g.FILE_ERRORED?p.multiFile&&p.multiFile.onFileFailed(p):p.state===g.FILE_COMPLETE&&(p.multiFile?p.multiFile.isReadyToProcess()&&p.multiFile.addToCache():p.addToCache()),this.queue.delete(p),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(i.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=g.LOADER_COMPLETE,this.systems.events.off(a.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(i.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(p){this._deleteQueue.set(p)},saveJSON:function(p,v){return this.save(JSON.stringify(p),v)},save:function(p,v,m){v===void 0&&(v="file.json"),m===void 0&&(m="application/json");var E=new Blob([p],{type:m}),x=URL.createObjectURL(E),y=document.createElement("a");return y.download=v,y.textContent="Download "+v,y.href=x,y.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var p=this.systems.game.config,v=this.systems.settings.loader;this.setBaseURL(n(v,"baseURL",p.loaderBaseURL)),this.setPath(n(v,"path",p.loaderPath)),this.setPrefix(n(v,"prefix",p.loaderPrefix)),this.state=g.LOADER_IDLE},shutdown:function(){this.reset(),this.state=g.LOADER_SHUTDOWN,this.systems.events.off(a.UPDATE,this.update,this),this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=g.LOADER_DESTROYED,this.systems.events.off(a.UPDATE,this.update,this),this.systems.events.off(a.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});d.register("Loader",f,"load"),c.exports=f},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(62),g=e(17),l={ArcadePhysics:e(1367),Body:e(527),Collider:e(528),Components:e(243),Events:e(245),Factory:e(521),GetOverlapX:e(246),GetOverlapY:e(247),SeparateX:e(537),SeparateY:e(538),Group:e(524),Image:e(522),Sprite:e(157),StaticBody:e(539),StaticGroup:e(525),Tilemap:e(1391),World:e(526)};l=g(!1,l,o),c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(36),l=e(50),h=e(353),i=e(521),s=e(2),n=e(127),d=e(523),a=e(244),u=e(24),f=e(20),p=e(3),v=e(526),m=new o({initialize:function(x){this.scene=x,this.systems=x.sys,this.config=this.getConfig(),this.world,this.add,x.sys.events.once(f.BOOT,this.boot,this),x.sys.events.on(f.START,this.start,this)},boot:function(){this.world=new v(this.scene,this.config),this.add=new i(this.world),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new v(this.scene,this.config),this.add=new i(this.world));var E=this.systems.events;s(this.config,"customUpdate",!1)||E.on(f.UPDATE,this.world.update,this.world),E.on(f.POST_UPDATE,this.world.postUpdate,this.world),E.once(f.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(f.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(f.UPDATE,this.world.update,this.world)},getConfig:function(){var E=this.systems.game.config.physics,x=this.systems.settings.physics,y=n(s(x,"arcade",{}),s(E,"arcade",{}));return y},overlap:function(E,x,y,S,C){return y===void 0&&(y=null),S===void 0&&(S=null),C===void 0&&(C=y),this.world.collideObjects(E,x,y,S,C,!0)},collide:function(E,x,y,S,C){return y===void 0&&(y=null),S===void 0&&(S=null),C===void 0&&(C=y),this.world.collideObjects(E,x,y,S,C,!1)},collideTiles:function(E,x,y,S,C){return this.world.collideTiles(E,x,y,S,C)},overlapTiles:function(E,x,y,S,C){return this.world.overlapTiles(E,x,y,S,C)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(E,x,y,S,C,I){S===void 0&&(S=60);var O=Math.atan2(y-E.y,x-E.x);return E.body.acceleration.setToPolar(O,S),C!==void 0&&I!==void 0&&E.body.maxVelocity.set(C,I),O},accelerateToObject:function(E,x,y,S,C){return this.accelerateTo(E,x.x,x.y,y,S,C)},closest:function(E,x){x||(x=this.world.bodies.entries);for(var y=Number.MAX_VALUE,S=null,C=E.x,I=E.y,O=x.length,M=0;M<O;M++){var L=x[M],P=L.body||L;if(!(E===L||E===P||E===P.gameObject||E===P.center)){var b=h(C,I,P.center.x,P.center.y);b<y&&(S=L,y=b)}}return S},furthest:function(E,x){x||(x=this.world.bodies.entries);for(var y=-1,S=null,C=E.x,I=E.y,O=x.length,M=0;M<O;M++){var L=x[M],P=L.body||L;if(!(E===L||E===P||E===P.gameObject||E===P.center)){var b=h(C,I,P.center.x,P.center.y);b>y&&(S=L,y=b)}}return S},moveTo:function(E,x,y,S,C){S===void 0&&(S=60),C===void 0&&(C=0);var I=Math.atan2(y-E.y,x-E.x);return C>0&&(S=l(E.x,E.y,x,y)/(C/1e3)),E.body.velocity.setToPolar(I,S),I},moveToObject:function(E,x,y,S){return this.moveTo(E,x.x,x.y,y,S)},velocityFromAngle:function(E,x,y){return x===void 0&&(x=60),y===void 0&&(y=new p),y.setToPolar(g(E),x)},velocityFromRotation:function(E,x,y){return x===void 0&&(x=60),y===void 0&&(y=new p),y.setToPolar(E,x)},overlapRect:function(E,x,y,S,C,I){return a(this.world,E,x,y,S,C,I)},overlapCirc:function(E,x,y,S,C){return d(this.world,E,x,y,S,C)},shutdown:function(){if(!!this.world){var E=this.systems.events;E.off(f.UPDATE,this.world.update,this.world),E.off(f.POST_UPDATE,this.world.postUpdate,this.world),E.off(f.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});u.register("ArcadePhysics",m,"arcadePhysics"),c.exports=m},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setAcceleration:function(o,g){return this.body.acceleration.set(o,g),this},setAccelerationX:function(o){return this.body.acceleration.x=o,this},setAccelerationY:function(o){return this.body.acceleration.y=o,this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setAngularVelocity:function(o){return this.body.angularVelocity=o,this},setAngularAcceleration:function(o){return this.body.angularAcceleration=o,this},setAngularDrag:function(o){return this.body.angularDrag=o,this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setBounce:function(o,g){return this.body.bounce.set(o,g),this},setBounceX:function(o){return this.body.bounce.x=o,this},setBounceY:function(o){return this.body.bounce.y=o,this},setCollideWorldBounds:function(o,g,l){return this.body.setCollideWorldBounds(o,g,l),this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setDebug:function(o,g,l){return this.debugShowBody=o,this.debugShowVelocity=g,this.debugBodyColor=l,this},setDebugBodyColor:function(o){return this.body.debugBodyColor=o,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(o){this.body.debugShowBody=o}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(o){this.body.debugShowVelocity=o}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(o){this.body.debugBodyColor=o}}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setDrag:function(o,g){return this.body.drag.set(o,g),this},setDragX:function(o){return this.body.drag.x=o,this},setDragY:function(o){return this.body.drag.y=o,this},setDamping:function(o){return this.body.useDamping=o,this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={enableBody:function(o,g,l,h,i){return o&&this.body.reset(g,l),h&&(this.body.gameObject.active=!0),i&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(o,g){return o===void 0&&(o=!1),g===void 0&&(g=!1),this.body.stop(),this.body.enable=!1,o&&(this.body.gameObject.active=!1),g&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setFriction:function(o,g){return this.body.friction.set(o,g),this},setFrictionX:function(o){return this.body.friction.x=o,this},setFrictionY:function(o){return this.body.friction.y=o,this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setGravity:function(o,g){return this.body.gravity.set(o,g),this},setGravityX:function(o){return this.body.gravity.x=o,this},setGravityY:function(o){return this.body.gravity.y=o,this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setImmovable:function(o){return o===void 0&&(o=!0),this.body.immovable=o,this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setMass:function(o){return this.body.mass=o,this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setPushable:function(o){return o===void 0&&(o=!0),this.body.pushable=o,this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setOffset:function(o,g){return this.body.setOffset(o,g),this},setSize:function(o,g,l){return this.body.setSize(o,g,l),this},setBodySize:function(o,g,l){return this.body.setSize(o,g,l),this},setCircle:function(o,g,l){return this.body.setCircle(o,g,l),this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setVelocity:function(o,g){return this.body.setVelocity(o,g),this},setVelocityX:function(o){return this.body.setVelocityX(o),this},setVelocityY:function(o){return this.body.setVelocityY(o),this},setMaxVelocity:function(o,g){return this.body.maxVelocity.set(o,g),this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="collide"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="overlap"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pause"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resume"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="tilecollide"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="tileoverlap"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="worldbounds"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="worldstep"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e,o,g,l,h,i,s,n,d,a,u,f,p,v,m,E,x,y=function(L,P,b){e=L,o=P;var B=e.velocity.x,U=o.velocity.x;return g=e.pushable,d=e._dx<0,a=e._dx>0,u=e._dx===0,m=Math.abs(e.right-o.x)<=Math.abs(o.right-e.x),s=U-B*e.bounce.x,l=o.pushable,f=o._dx<0,p=o._dx>0,v=o._dx===0,E=!m,n=B-U*o.bounce.x,x=Math.abs(b),S()},S=function(){return a&&m&&o.blocked.right?(e.processX(-x,s,!1,!0),1):d&&E&&o.blocked.left?(e.processX(x,s,!0),1):p&&E&&e.blocked.right?(o.processX(-x,n,!1,!0),2):f&&m&&e.blocked.left?(o.processX(x,n,!0),2):0},C=function(){var L=e.velocity.x,P=o.velocity.x,b=Math.sqrt(P*P*o.mass/e.mass)*(P>0?1:-1),B=Math.sqrt(L*L*e.mass/o.mass)*(L>0?1:-1),U=(b+B)*.5;return b-=U,B-=U,h=U+b*e.bounce.x,i=U+B*o.bounce.x,d&&E?I(0):f&&m?I(1):a&&m?I(2):p&&E?I(3):!1},I=function(L){if(g&&l)x*=.5,L===0||L===3?(e.processX(x,h),o.processX(-x,i)):(e.processX(-x,h),o.processX(x,i));else if(g&&!l)L===0||L===3?e.processX(x,s,!0):e.processX(-x,s,!1,!0);else if(!g&&l)L===0||L===3?o.processX(-x,n,!1,!0):o.processX(x,n,!0);else{var P=x*.5;L===0?v?(e.processX(x,0,!0),o.processX(0,null,!1,!0)):p?(e.processX(P,0,!0),o.processX(-P,0,!1,!0)):(e.processX(P,o.velocity.x,!0),o.processX(-P,null,!1,!0)):L===1?u?(e.processX(0,null,!1,!0),o.processX(x,0,!0)):a?(e.processX(-P,0,!1,!0),o.processX(P,0,!0)):(e.processX(-P,null,!1,!0),o.processX(P,e.velocity.x,!0)):L===2?v?(e.processX(-x,0,!1,!0),o.processX(0,null,!0)):f?(e.processX(-P,0,!1,!0),o.processX(P,0,!0)):(e.processX(-P,o.velocity.x,!1,!0),o.processX(P,null,!0)):L===3&&(u?(e.processX(0,null,!0),o.processX(-x,0,!1,!0)):d?(e.processX(P,0,!0),o.processX(-P,0,!1,!0)):(e.processX(P,o.velocity.y,!0),o.processX(-P,null,!1,!0)))}return!0},O=function(L){L===1?o.velocity.x=0:m?o.processX(x,n,!0):o.processX(-x,n,!1,!0),e.moves&&(o.y+=(e.y-e.prev.y)*e.friction.y,o._dy=o.y-o.prev.y)},M=function(L){L===2?e.velocity.x=0:E?e.processX(x,s,!0):e.processX(-x,s,!1,!0),o.moves&&(e.y+=(o.y-o.prev.y)*o.friction.y,e._dy=e.y-e.prev.y)};c.exports={BlockCheck:S,Check:C,Set:y,Run:I,RunImmovableBody1:O,RunImmovableBody2:M}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e,o,g,l,h,i,s,n,d,a,u,f,p,v,m,E,x,y=function(L,P,b){e=L,o=P;var B=e.velocity.y,U=o.velocity.y;return g=e.pushable,d=e._dy<0,a=e._dy>0,u=e._dy===0,m=Math.abs(e.bottom-o.y)<=Math.abs(o.bottom-e.y),s=U-B*e.bounce.y,l=o.pushable,f=o._dy<0,p=o._dy>0,v=o._dy===0,E=!m,n=B-U*o.bounce.y,x=Math.abs(b),S()},S=function(){return a&&m&&o.blocked.down?(e.processY(-x,s,!1,!0),1):d&&E&&o.blocked.up?(e.processY(x,s,!0),1):p&&E&&e.blocked.down?(o.processY(-x,n,!1,!0),2):f&&m&&e.blocked.up?(o.processY(x,n,!0),2):0},C=function(){var L=e.velocity.y,P=o.velocity.y,b=Math.sqrt(P*P*o.mass/e.mass)*(P>0?1:-1),B=Math.sqrt(L*L*e.mass/o.mass)*(L>0?1:-1),U=(b+B)*.5;return b-=U,B-=U,h=U+b*e.bounce.y,i=U+B*o.bounce.y,d&&E?I(0):f&&m?I(1):a&&m?I(2):p&&E?I(3):!1},I=function(L){if(g&&l)x*=.5,L===0||L===3?(e.processY(x,h),o.processY(-x,i)):(e.processY(-x,h),o.processY(x,i));else if(g&&!l)L===0||L===3?e.processY(x,s,!0):e.processY(-x,s,!1,!0);else if(!g&&l)L===0||L===3?o.processY(-x,n,!1,!0):o.processY(x,n,!0);else{var P=x*.5;L===0?v?(e.processY(x,0,!0),o.processY(0,null,!1,!0)):p?(e.processY(P,0,!0),o.processY(-P,0,!1,!0)):(e.processY(P,o.velocity.y,!0),o.processY(-P,null,!1,!0)):L===1?u?(e.processY(0,null,!1,!0),o.processY(x,0,!0)):a?(e.processY(-P,0,!1,!0),o.processY(P,0,!0)):(e.processY(-P,null,!1,!0),o.processY(P,e.velocity.y,!0)):L===2?v?(e.processY(-x,0,!1,!0),o.processY(0,null,!0)):f?(e.processY(-P,0,!1,!0),o.processY(P,0,!0)):(e.processY(-P,o.velocity.y,!1,!0),o.processY(P,null,!0)):L===3&&(u?(e.processY(0,null,!0),o.processY(-x,0,!1,!0)):d?(e.processY(P,0,!0),o.processY(-P,0,!1,!0)):(e.processY(P,o.velocity.y,!0),o.processY(-P,null,!1,!0)))}return!0},O=function(L){L===1?o.velocity.y=0:m?o.processY(x,n,!0):o.processY(-x,n,!1,!0),e.moves&&(o.x+=(e.x-e.prev.x)*e.friction.x,o._dx=o.x-o.prev.x)},M=function(L){L===2?e.velocity.y=0:E?e.processY(x,s,!0):e.processY(-x,s,!1,!0),o.moves&&(e.x+=(o.x-o.prev.x)*o.friction.x,e._dx=e.x-e.prev.x)};c.exports={BlockCheck:S,Check:C,Set:y,Run:I,RunImmovableBody1:O,RunImmovableBody2:M}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={ProcessTileCallbacks:e(530),ProcessTileSeparationX:e(534),ProcessTileSeparationY:e(536),SeparateTile:e(532),TileCheckX:e(533),TileCheckY:e(535),TileIntersectsBody:e(248)};c.exports=o},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(3),l=new o({initialize:function(){this.boundsCenter=new g,this.centerDiff=new g},parseBody:function(h){if(h=h.hasOwnProperty("body")?h.body:h,!h.hasOwnProperty("bounds")||!h.hasOwnProperty("centerOfMass"))return!1;var i=this.boundsCenter,s=this.centerDiff,n=h.bounds.max.x-h.bounds.min.x,d=h.bounds.max.y-h.bounds.min.y,a=n*h.centerOfMass.x,u=d*h.centerOfMass.y;return i.set(n/2,d/2),s.set(a-i.x,u-i.y),!0},getTopLeft:function(h,i,s){if(i===void 0&&(i=0),s===void 0&&(s=0),this.parseBody(h)){var n=this.boundsCenter,d=this.centerDiff;return new g(i+n.x+d.x,s+n.y+d.y)}return!1},getTopCenter:function(h,i,s){if(i===void 0&&(i=0),s===void 0&&(s=0),this.parseBody(h)){var n=this.boundsCenter,d=this.centerDiff;return new g(i+d.x,s+n.y+d.y)}return!1},getTopRight:function(h,i,s){if(i===void 0&&(i=0),s===void 0&&(s=0),this.parseBody(h)){var n=this.boundsCenter,d=this.centerDiff;return new g(i-(n.x-d.x),s+n.y+d.y)}return!1},getLeftCenter:function(h,i,s){if(i===void 0&&(i=0),s===void 0&&(s=0),this.parseBody(h)){var n=this.boundsCenter,d=this.centerDiff;return new g(i+n.x+d.x,s+d.y)}return!1},getCenter:function(h,i,s){if(i===void 0&&(i=0),s===void 0&&(s=0),this.parseBody(h)){var n=this.centerDiff;return new g(i+n.x,s+n.y)}return!1},getRightCenter:function(h,i,s){if(i===void 0&&(i=0),s===void 0&&(s=0),this.parseBody(h)){var n=this.boundsCenter,d=this.centerDiff;return new g(i-(n.x-d.x),s+d.y)}return!1},getBottomLeft:function(h,i,s){if(i===void 0&&(i=0),s===void 0&&(s=0),this.parseBody(h)){var n=this.boundsCenter,d=this.centerDiff;return new g(i+n.x+d.x,s-(n.y-d.y))}return!1},getBottomCenter:function(h,i,s){if(i===void 0&&(i=0),s===void 0&&(s=0),this.parseBody(h)){var n=this.boundsCenter,d=this.centerDiff;return new g(i+d.x,s-(n.y-d.y))}return!1},getBottomRight:function(h,i,s){if(i===void 0&&(i=0),s===void 0&&(s=0),this.parseBody(h)){var n=this.boundsCenter,d=this.centerDiff;return new g(i-(n.x-d.x),s-(n.y-d.y))}return!1}});c.exports=l},function(c,R){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={decomp:L,quickDecomp:U,isSimple:b,removeCollinearPoints:H,removeDuplicatePoints:Y,makeCCW:m};function e(w,D,N){N=N||0;var G=[0,0],k,V,X,K,tt,st,rt;return k=w[1][1]-w[0][1],V=w[0][0]-w[1][0],X=k*w[0][0]+V*w[0][1],K=D[1][1]-D[0][1],tt=D[0][0]-D[1][0],st=K*D[0][0]+tt*D[0][1],rt=k*tt-K*V,j(rt,0,N)||(G[0]=(tt*X-V*st)/rt,G[1]=(k*st-K*X)/rt),G}function o(w,D,N,G){var k=D[0]-w[0],V=D[1]-w[1],X=G[0]-N[0],K=G[1]-N[1];if(X*V-K*k===0)return!1;var tt=(k*(N[1]-w[1])+V*(w[0]-N[0]))/(X*V-K*k),st=(X*(w[1]-N[1])+K*(N[0]-w[0]))/(K*k-X*V);return tt>=0&&tt<=1&&st>=0&&st<=1}function g(w,D,N){return(D[0]-w[0])*(N[1]-w[1])-(N[0]-w[0])*(D[1]-w[1])}function l(w,D,N){return g(w,D,N)>0}function h(w,D,N){return g(w,D,N)>=0}function i(w,D,N){return g(w,D,N)<0}function s(w,D,N){return g(w,D,N)<=0}var n=[],d=[];function a(w,D,N,G){if(G){var k=n,V=d;k[0]=D[0]-w[0],k[1]=D[1]-w[1],V[0]=N[0]-D[0],V[1]=N[1]-D[1];var X=k[0]*V[0]+k[1]*V[1],K=Math.sqrt(k[0]*k[0]+k[1]*k[1]),tt=Math.sqrt(V[0]*V[0]+V[1]*V[1]),st=Math.acos(X/(K*tt));return st<G}else return g(w,D,N)===0}function u(w,D){var N=D[0]-w[0],G=D[1]-w[1];return N*N+G*G}function f(w,D){var N=w.length;return w[D<0?D%N+N:D%N]}function p(w){w.length=0}function v(w,D,N,G){for(var k=N;k<G;k++)w.push(D[k])}function m(w){for(var D=0,N=w,G=1;G<w.length;++G)(N[G][1]<N[D][1]||N[G][1]===N[D][1]&&N[G][0]>N[D][0])&&(D=G);return l(f(w,D-1),f(w,D),f(w,D+1))?!1:(E(w),!0)}function E(w){for(var D=[],N=w.length,G=0;G!==N;G++)D.push(w.pop());for(var G=0;G!==N;G++)w[G]=D[G]}function x(w,D){return i(f(w,D-1),f(w,D),f(w,D+1))}var y=[],S=[];function C(w,D,N){var G,k,V=y,X=S;if(h(f(w,D+1),f(w,D),f(w,N))&&s(f(w,D-1),f(w,D),f(w,N)))return!1;k=u(f(w,D),f(w,N));for(var K=0;K!==w.length;++K)if(!((K+1)%w.length===D||K===D)&&h(f(w,D),f(w,N),f(w,K+1))&&s(f(w,D),f(w,N),f(w,K))&&(V[0]=f(w,D),V[1]=f(w,N),X[0]=f(w,K),X[1]=f(w,K+1),G=e(V,X),u(f(w,D),G)<k))return!1;return!0}function I(w,D,N){for(var G=0;G!==w.length;++G)if(!(G===D||G===N||(G+1)%w.length===D||(G+1)%w.length===N)&&o(f(w,D),f(w,N),f(w,G),f(w,G+1)))return!1;return!0}function O(w,D,N,G){var k=G||[];if(p(k),D<N)for(var V=D;V<=N;V++)k.push(w[V]);else{for(var V=0;V<=N;V++)k.push(w[V]);for(var V=D;V<w.length;V++)k.push(w[V])}return k}function M(w){for(var D=[],N=[],G=[],k=[],V=Number.MAX_VALUE,X=0;X<w.length;++X)if(x(w,X)){for(var K=0;K<w.length;++K)if(C(w,X,K)){N=M(O(w,X,K,k)),G=M(O(w,K,X,k));for(var tt=0;tt<G.length;tt++)N.push(G[tt]);N.length<V&&(D=N,V=N.length,D.push([f(w,X),f(w,K)]))}}return D}function L(w){var D=M(w);return D.length>0?P(w,D):[w]}function P(w,D){if(D.length===0)return[w];if(D instanceof Array&&D.length&&D[0]instanceof Array&&D[0].length===2&&D[0][0]instanceof Array){for(var N=[w],G=0;G<D.length;G++)for(var k=D[G],V=0;V<N.length;V++){var X=N[V],K=P(X,k);if(K){N.splice(V,1),N.push(K[0],K[1]);break}}return N}else{var k=D,G=w.indexOf(k[0]),V=w.indexOf(k[1]);return G!==-1&&V!==-1?[O(w,G,V),O(w,V,G)]:!1}}function b(w){var D=w,N;for(N=0;N<D.length-1;N++)for(var G=0;G<N-1;G++)if(o(D[N],D[N+1],D[G],D[G+1]))return!1;for(N=1;N<D.length-2;N++)if(o(D[0],D[D.length-1],D[N],D[N+1]))return!1;return!0}function B(w,D,N,G,k){k=k||0;var V=D[1]-w[1],X=w[0]-D[0],K=V*w[0]+X*w[1],tt=G[1]-N[1],st=N[0]-G[0],rt=tt*N[0]+st*N[1],ht=V*st-tt*X;return j(ht,0,k)?[0,0]:[(st*K-X*rt)/ht,(V*rt-tt*K)/ht]}function U(w,D,N,G,k,V,X){V=V||100,X=X||0,k=k||25,D=typeof D!="undefined"?D:[],N=N||[],G=G||[];var K=[0,0],tt=[0,0],st=[0,0],rt=0,ht=0,ut=0,mt=0,pt=0,Tt=0,Nt=0,Ct=[],$t=[],vt=w,Ht=w;if(Ht.length<3)return D;if(X++,X>V)return console.warn("quickDecomp: max level ("+V+") reached."),D;for(var At=0;At<w.length;++At)if(x(vt,At)){N.push(vt[At]),rt=ht=Number.MAX_VALUE;for(var Dt=0;Dt<w.length;++Dt)l(f(vt,At-1),f(vt,At),f(vt,Dt))&&s(f(vt,At-1),f(vt,At),f(vt,Dt-1))&&(st=B(f(vt,At-1),f(vt,At),f(vt,Dt),f(vt,Dt-1)),i(f(vt,At+1),f(vt,At),st)&&(ut=u(vt[At],st),ut<ht&&(ht=ut,tt=st,Tt=Dt))),l(f(vt,At+1),f(vt,At),f(vt,Dt+1))&&s(f(vt,At+1),f(vt,At),f(vt,Dt))&&(st=B(f(vt,At+1),f(vt,At),f(vt,Dt),f(vt,Dt+1)),l(f(vt,At-1),f(vt,At),st)&&(ut=u(vt[At],st),ut<rt&&(rt=ut,K=st,pt=Dt)));if(Tt===(pt+1)%w.length)st[0]=(tt[0]+K[0])/2,st[1]=(tt[1]+K[1])/2,G.push(st),At<pt?(v(Ct,vt,At,pt+1),Ct.push(st),$t.push(st),Tt!==0&&v($t,vt,Tt,vt.length),v($t,vt,0,At+1)):(At!==0&&v(Ct,vt,At,vt.length),v(Ct,vt,0,pt+1),Ct.push(st),$t.push(st),v($t,vt,Tt,At+1));else{if(Tt>pt&&(pt+=w.length),mt=Number.MAX_VALUE,pt<Tt)return D;for(var Dt=Tt;Dt<=pt;++Dt)h(f(vt,At-1),f(vt,At),f(vt,Dt))&&s(f(vt,At+1),f(vt,At),f(vt,Dt))&&(ut=u(f(vt,At),f(vt,Dt)),ut<mt&&I(vt,At,Dt)&&(mt=ut,Nt=Dt%w.length));At<Nt?(v(Ct,vt,At,Nt+1),Nt!==0&&v($t,vt,Nt,Ht.length),v($t,vt,0,At+1)):(At!==0&&v(Ct,vt,At,Ht.length),v(Ct,vt,0,Nt+1),v($t,vt,Nt,At+1))}return Ct.length<$t.length?(U(Ct,D,N,G,k,V,X),U($t,D,N,G,k,V,X)):(U($t,D,N,G,k,V,X),U(Ct,D,N,G,k,V,X)),D}return D.push(w),D}function H(w,D){for(var N=0,G=w.length-1;w.length>3&&G>=0;--G)a(f(w,G-1),f(w,G),f(w,G+1),D)&&(w.splice(G%w.length,1),N++);return N}function Y(w,D){for(var N=w.length-1;N>=1;--N)for(var G=w[N],k=N-1;k>=0;--k)if(_(G,w[k],D)){w.splice(N,1);continue}}function j(w,D,N){return N=N||0,Math.abs(w-D)<=N}function _(w,D,N){return j(w[0],D[0],N)&&j(w[1],D[1],N)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(86),g=e(0),l=e(591),h=e(128),i=e(592),s=e(1395),n=e(1396),d=e(1397),a=e(593),u=e(589),f=e(590),p=e(1398),v=e(64),m=new g({initialize:function(x){this.world=x,this.scene=x.scene,this.sys=x.scene.sys},rectangle:function(E,x,y,S,C){var I=o.rectangle(E,x,y,S,C);return this.world.add(I),I},trapezoid:function(E,x,y,S,C,I){var O=o.trapezoid(E,x,y,S,C,I);return this.world.add(O),O},circle:function(E,x,y,S,C){var I=o.circle(E,x,y,S,C);return this.world.add(I),I},polygon:function(E,x,y,S,C){var I=o.polygon(E,x,y,S,C);return this.world.add(I),I},fromVertices:function(E,x,y,S,C,I,O){typeof y=="string"&&(y=v.fromPath(y));var M=o.fromVertices(E,x,y,S,C,I,O);return this.world.add(M),M},fromPhysicsEditor:function(E,x,y,S,C){C===void 0&&(C=!0);var I=u.parseBody(E,x,y,S);return C&&!this.world.has(I)&&this.world.add(I),I},fromSVG:function(E,x,y,S,C,I){S===void 0&&(S=1),C===void 0&&(C={}),I===void 0&&(I=!0);for(var O=y.getElementsByTagName("path"),M=[],L=0;L<O.length;L++){var P=i.pathToVertices(O[L],30);S!==1&&v.scale(P,S,S),M.push(P)}var b=o.fromVertices(E,x,M,C);return I&&this.world.add(b),b},fromJSON:function(E,x,y,S,C){S===void 0&&(S={}),C===void 0&&(C=!0);var I=f.parseBody(E,x,y,S);return I&&C&&this.world.add(I),I},imageStack:function(E,x,y,S,C,I,O,M,L){O===void 0&&(O=0),M===void 0&&(M=0),L===void 0&&(L={});var P=this.world,b=this.sys.displayList;L.addToWorld=!1;var B=l.stack(y,S,C,I,O,M,function(U,H){var Y=new n(P,U,H,E,x,L);return b.add(Y),Y.body});return P.add(B),B},stack:function(E,x,y,S,C,I,O){var M=l.stack(E,x,y,S,C,I,O);return this.world.add(M),M},pyramid:function(E,x,y,S,C,I,O){var M=l.pyramid(E,x,y,S,C,I,O);return this.world.add(M),M},chain:function(E,x,y,S,C,I){return l.chain(E,x,y,S,C,I)},mesh:function(E,x,y,S,C){return l.mesh(E,x,y,S,C)},newtonsCradle:function(E,x,y,S,C){var I=l.newtonsCradle(E,x,y,S,C);return this.world.add(I),I},car:function(E,x,y,S,C){var I=l.car(E,x,y,S,C);return this.world.add(I),I},softBody:function(E,x,y,S,C,I,O,M,L,P){var b=l.softBody(E,x,y,S,C,I,O,M,L,P);return this.world.add(b),b},joint:function(E,x,y,S,C){return this.constraint(E,x,y,S,C)},spring:function(E,x,y,S,C){return this.constraint(E,x,y,S,C)},constraint:function(E,x,y,S,C){S===void 0&&(S=1),C===void 0&&(C={}),C.bodyA=E.type==="body"?E:E.body,C.bodyB=x.type==="body"?x:x.body,isNaN(y)||(C.length=y),C.stiffness=S;var I=h.create(C);return this.world.add(I),I},worldConstraint:function(E,x,y,S){y===void 0&&(y=1),S===void 0&&(S={}),S.bodyB=E.type==="body"?E:E.body,isNaN(x)||(S.length=x),S.stiffness=y;var C=h.create(S);return this.world.add(C),C},mouseSpring:function(E){return this.pointerConstraint(E)},pointerConstraint:function(E){E===void 0&&(E={}),E.hasOwnProperty("render")||(E.render={visible:!1});var x=new p(this.scene,this.world,E);return this.world.add(x.constraint),x},image:function(E,x,y,S,C){var I=new n(this.world,E,x,y,S,C);return this.sys.displayList.add(I),I},tileBody:function(E,x){return new a(this.world,E,x)},sprite:function(E,x,y,S,C){var I=new d(this.world,E,x,y,S,C);return this.sys.displayList.add(I),this.sys.updateList.add(I),I},gameObject:function(E,x,y){return s(this.world,E,x,y)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});c.exports=m},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(249),g=e(2),l=e(3);function h(s){return!!s.get&&typeof s.get=="function"||!!s.set&&typeof s.set=="function"}var i=function(s,n,d,a){d===void 0&&(d={}),a===void 0&&(a=!0);var u=n.x,f=n.y;n.body={temp:!0,position:{x:u,y:f}};var p=[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity];if(p.forEach(function(m){for(var E in m)h(m[E])?Object.defineProperty(n,E,{get:m[E].get,set:m[E].set}):Object.defineProperty(n,E,{value:m[E]})}),n.world=s,n._tempVec2=new l(u,f),d.hasOwnProperty("type")&&d.type==="body")n.setExistingBody(d,a);else{var v=g(d,"shape",null);v||(v="rectangle"),d.addToWorld=a,n.setBody(v,d)}return n};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(249),l=e(15),h=e(2),i=e(125),s=e(167),n=e(3),d=new o({Extends:i,Mixins:[g.Bounce,g.Collision,g.Force,g.Friction,g.Gravity,g.Mass,g.Sensor,g.SetBody,g.Sleep,g.Static,g.Transform,g.Velocity,s],initialize:function(u,f,p,v,m,E){l.call(this,u.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(v,m),this.setSizeToFrame(),this.setOrigin(),this.world=u,this._tempVec2=new n(f,p);var x=h(E,"shape",null);x?this.setBody(x,E):this.setRectangle(this.width,this.height,E),this.setPosition(f,p),this.initPipeline()}});c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(164),g=e(0),l=e(249),h=e(15),i=e(2),s=e(167),n=e(73),d=e(3),a=new g({Extends:n,Mixins:[l.Bounce,l.Collision,l.Force,l.Friction,l.Gravity,l.Mass,l.Sensor,l.SetBody,l.Sleep,l.Static,l.Transform,l.Velocity,s],initialize:function(f,p,v,m,E,x){h.call(this,f.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(m,E),this.setSizeToFrame(),this.setOrigin(),this.world=f,this._tempVec2=new d(p,v);var y=i(x,"shape",null);y?this.setBody(y,x):this.setRectangle(this.width,this.height,x),this.setPosition(p,v),this.initPipeline()}});c.exports=a},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(84),g=e(0),l=e(118),h=e(128),i=e(273),s=e(272),n=e(51),d=e(127),a=e(165),u=e(3),f=e(64),p=new g({initialize:function(m,E,x){x===void 0&&(x={});var y={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=m,this.world=E,this.camera=null,this.pointer=null,this.active=!0,this.position=new u,this.body=null,this.part=null,this.constraint=h.create(d(x,y)),this.world.on(s.BEFORE_UPDATE,this.update,this),m.sys.input.on(n.POINTER_DOWN,this.onDown,this),m.sys.input.on(n.POINTER_UP,this.onUp,this)},onDown:function(v){this.pointer||(this.pointer=v,this.camera=v.camera)},onUp:function(v){v===this.pointer&&(this.pointer=null)},getBody:function(v){var m=this.position,E=this.constraint;this.camera.getWorldPoint(v.x,v.y,m);for(var x=l.allBodies(this.world.localWorld),y=0;y<x.length;y++){var S=x[y];if(!S.ignorePointer&&o.contains(S.bounds,m)&&i.canCollide(S.collisionFilter,E.collisionFilter)&&this.hitTestBody(S,m))return this.world.emit(s.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(v,m){for(var E=this.constraint,x=v.parts.length,y=x>1?1:0,S=y;S<x;S++){var C=v.parts[S];if(f.contains(C.vertices,m))return E.pointA=m,E.pointB={x:m.x-v.position.x,y:m.y-v.position.y},E.bodyB=v,E.angleB=v.angle,a.set(v,!1),this.part=C,this.body=v,!0}return!1},update:function(){var v=this.pointer,m=this.body;if(!this.active||!v){m&&this.stopDrag();return}if(!v.isDown&&m){this.stopDrag();return}else if(v.isDown){if(!m&&!this.getBody(v))return;m=this.body;var E=this.position,x=this.constraint;this.camera.getWorldPoint(v.x,v.y,E),x.pointA.x=E.x,x.pointA.y=E.y,a.set(m,!1),this.world.emit(s.DRAG,m,this)}},stopDrag:function(){var v=this.body,m=this.constraint;m.bodyB=null,m.pointB=null,this.pointer=null,this.body=null,this.part=null,v&&this.world.emit(s.DRAG_END,v,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(s.BEFORE_UPDATE,this.update),this.scene.sys.input.off(n.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(n.POINTER_UP,this.onUp,this)}});c.exports=p},function(c,R,e){var o={};c.exports=o;var g=e(595),l=e(32);(function(){o.name="matter-js",o.version="0.14.2",o.uses=[],o.used=[],o.use=function(){g.use(o,Array.prototype.slice.call(arguments))},o.before=function(h,i){return h=h.replace(/^Matter./,""),l.chainPathBefore(o,h,i)},o.after=function(h,i){return h=h.replace(/^Matter./,""),l.chainPathAfter(o,h,i)}})()},function(c,R,e){var o={};c.exports=o;var g=e(83),l=e(274),h=e(84),i=e(86),s=e(64);(function(){o.collides=function(n,d){for(var a=[],u=0;u<d.length;u++){var f=d[u];if(n!==f&&h.overlaps(f.bounds,n.bounds))for(var p=f.parts.length===1?0:1;p<f.parts.length;p++){var v=f.parts[p];if(h.overlaps(v.bounds,n.bounds)){var m=l.collides(v,n);if(m.collided){a.push(m);break}}}}return a},o.ray=function(n,d,a,u){u=u||1e-100;for(var f=g.angle(d,a),p=g.magnitude(g.sub(d,a)),v=(a.x+d.x)*.5,m=(a.y+d.y)*.5,E=i.rectangle(v,m,p,u,{angle:f}),x=o.collides(E,n),y=0;y<x.length;y+=1){var S=x[y];S.body=S.bodyB=S.bodyA}return x},o.region=function(n,d,a){for(var u=[],f=0;f<n.length;f++){var p=n[f],v=h.overlaps(p.bounds,d);(v&&!a||!v&&a)&&u.push(p)}return u},o.point=function(n,d){for(var a=[],u=0;u<n.length;u++){var f=n[u];if(h.contains(f.bounds,d))for(var p=f.parts.length===1?0:1;p<f.parts.length;p++){var v=f.parts[p];if(h.contains(v.bounds,d)&&s.contains(v.vertices,d)){a.push(f);break}}}return a}})()},function(c,R,e){var o={};c.exports=o;var g=e(596),l=e(165),h=e(599),i=e(598),s=e(1523),n=e(597),d=e(166),a=e(118),u=e(128),f=e(32),p=e(41);(function(){o.create=function(v,m){m=f.isElement(v)?m:v,v=f.isElement(v)?v:null,m=m||{},(v||m.render)&&f.warn("Engine.create: engine.render is deprecated (see docs)");var E={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:n}},x=f.extend(E,m);return x.world=m.world||g.create(x.world),x.pairs=i.create(),x.broadphase=x.broadphase.controller.create(x.broadphase),x.metrics=x.metrics||{extended:!1},x.metrics=s.create(x.metrics),x},o.update=function(v,m,E){m=m||1e3/60,E=E||1;var x=v.world,y=v.timing,S=v.broadphase,C=[],I;y.timestamp+=m*y.timeScale;var O={timestamp:y.timestamp};d.trigger(v,"beforeUpdate",O);var M=a.allBodies(x),L=a.allConstraints(x);for(s.reset(v.metrics),v.enableSleeping&&l.update(M,y.timeScale),o._bodiesApplyGravity(M,x.gravity),o._bodiesUpdate(M,m,y.timeScale,E,x.bounds),u.preSolveAll(M),I=0;I<v.constraintIterations;I++)u.solveAll(L,y.timeScale);u.postSolveAll(M),S.controller?(x.isModified&&S.controller.clear(S),S.controller.update(S,M,v,x.isModified),C=S.pairsList):C=M,x.isModified&&a.setModified(x,!1,!1,!0);var P=S.detector(C,v),b=v.pairs,B=y.timestamp;for(i.update(b,P,B),i.removeOld(b,B),v.enableSleeping&&l.afterCollisions(b.list,y.timeScale),b.collisionStart.length>0&&d.trigger(v,"collisionStart",{pairs:b.collisionStart}),h.preSolvePosition(b.list),I=0;I<v.positionIterations;I++)h.solvePosition(b.list,M,y.timeScale);for(h.postSolvePosition(M),u.preSolveAll(M),I=0;I<v.constraintIterations;I++)u.solveAll(L,y.timeScale);for(u.postSolveAll(M),h.preSolveVelocity(b.list),I=0;I<v.velocityIterations;I++)h.solveVelocity(b.list,y.timeScale);return b.collisionActive.length>0&&d.trigger(v,"collisionActive",{pairs:b.collisionActive}),b.collisionEnd.length>0&&d.trigger(v,"collisionEnd",{pairs:b.collisionEnd}),s.update(v.metrics,v),o._bodiesClearForces(M),d.trigger(v,"afterUpdate",O),v},o.merge=function(v,m){if(f.extend(v,m),m.world){v.world=m.world,o.clear(v);for(var E=a.allBodies(v.world),x=0;x<E.length;x++){var y=E[x];l.set(y,!1),y.id=f.nextId()}}},o.clear=function(v){var m=v.world;i.clear(v.pairs);var E=v.broadphase;if(E.controller){var x=a.allBodies(m);E.controller.clear(E),E.controller.update(E,x,v,!0)}},o._bodiesClearForces=function(v){for(var m=0;m<v.length;m++){var E=v[m];E.force.x=0,E.force.y=0,E.torque=0}},o._bodiesApplyGravity=function(v,m){var E=typeof m.scale!="undefined"?m.scale:.001;if(!(m.x===0&&m.y===0||E===0))for(var x=0;x<v.length;x++){var y=v[x];y.ignoreGravity||y.isStatic||y.isSleeping||(y.force.x+=y.mass*m.x*E*y.gravityScale.x,y.force.y+=y.mass*m.y*E*y.gravityScale.y)}},o._bodiesUpdate=function(v,m,E,x,y){for(var S=0;S<v.length;S++){var C=v[S];C.isStatic||C.isSleeping||p.update(C,m,E,x)}}})()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(86),g=e(41),l=e(0),h=e(32),i=e(118),s=e(1401),n=e(9),d=e(272),a=e(2),u=e(6),f=e(41),p=e(166),v=e(593),m=e(596),E=e(83),x=new l({Extends:n,initialize:function(S,C){n.call(this),this.scene=S,this.engine=s.create(C),this.localWorld=this.engine.world;var I=u(C,"gravity",null);I?this.setGravity(I.x,I.y,I.scale):I===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=u(C,"enabled",!0),this.correction=u(C,"correction",1),this.getDelta=u(C,"getDelta",this.update60Hz);var O=a(C,"runner",{}),M=a(O,"fps",!1),L=a(O,"fps",60),P=a(O,"delta",1e3/L),b=a(O,"deltaMin",1e3/L),B=a(O,"deltaMax",1e3/(L*.5));M||(L=1e3/P),this.runner={fps:L,correction:a(O,"correction",1),deltaSampleSize:a(O,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:a(O,"isFixed",!1),delta:P,deltaMin:b,deltaMax:B},this.autoUpdate=u(C,"autoUpdate",!0);var U=u(C,"debug",!1);if(this.drawDebug=typeof U=="object"?!0:U,this.debugGraphic,this.debugConfig={showAxes:a(U,"showAxes",!1),showAngleIndicator:a(U,"showAngleIndicator",!1),angleColor:a(U,"angleColor",15208787),showBroadphase:a(U,"showBroadphase",!1),broadphaseColor:a(U,"broadphaseColor",16757760),showBounds:a(U,"showBounds",!1),boundsColor:a(U,"boundsColor",16777215),showVelocity:a(U,"showVelocity",!1),velocityColor:a(U,"velocityColor",44783),showCollisions:a(U,"showCollisions",!1),collisionColor:a(U,"collisionColor",16094476),showSeparations:a(U,"showSeparations",!1),separationColor:a(U,"separationColor",16753920),showBody:a(U,"showBody",!0),showStaticBody:a(U,"showStaticBody",!0),showInternalEdges:a(U,"showInternalEdges",!1),renderFill:a(U,"renderFill",!1),renderLine:a(U,"renderLine",!0),fillColor:a(U,"fillColor",1075465),fillOpacity:a(U,"fillOpacity",1),lineColor:a(U,"lineColor",2678297),lineOpacity:a(U,"lineOpacity",1),lineThickness:a(U,"lineThickness",1),staticFillColor:a(U,"staticFillColor",857979),staticLineColor:a(U,"staticLineColor",1255396),showSleeping:a(U,"showSleeping",!1),staticBodySleepOpacity:a(U,"staticBodySleepOpacity",.7),sleepFillColor:a(U,"sleepFillColor",4605510),sleepLineColor:a(U,"sleepLineColor",10066585),showSensors:a(U,"showSensors",!0),sensorFillColor:a(U,"sensorFillColor",857979),sensorLineColor:a(U,"sensorLineColor",1255396),showPositions:a(U,"showPositions",!0),positionSize:a(U,"positionSize",4),positionColor:a(U,"positionColor",14697178),showJoint:a(U,"showJoint",!0),jointColor:a(U,"jointColor",14737474),jointLineOpacity:a(U,"jointLineOpacity",1),jointLineThickness:a(U,"jointLineThickness",2),pinSize:a(U,"pinSize",4),pinColor:a(U,"pinColor",4382944),springColor:a(U,"springColor",14697184),anchorColor:a(U,"anchorColor",15724527),anchorSize:a(U,"anchorSize",4),showConvexHulls:a(U,"showConvexHulls",!1),hullColor:a(U,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),a(C,"setBounds",!1)){var H=C.setBounds;if(typeof H=="boolean")this.setBounds();else{var Y=a(H,"x",0),j=a(H,"y",0),_=a(H,"width",S.sys.scale.width),w=a(H,"height",S.sys.scale.height),D=a(H,"thickness",64),N=a(H,"left",!0),G=a(H,"right",!0),k=a(H,"top",!0),V=a(H,"bottom",!0);this.setBounds(Y,j,_,w,D,N,G,k,V)}}},setCompositeRenderStyle:function(y){var S=y.bodies,C=y.constraints,I=y.composites,O,M,L;for(O=0;O<S.length;O++)M=S[O],L=M.render,this.setBodyRenderStyle(M,L.lineColor,L.lineOpacity,L.lineThickness,L.fillColor,L.fillOpacity);for(O=0;O<C.length;O++)M=C[O],L=M.render,this.setConstraintRenderStyle(M,L.lineColor,L.lineOpacity,L.lineThickness,L.pinSize,L.anchorColor,L.anchorSize);for(O=0;O<I.length;O++)M=I[O],this.setCompositeRenderStyle(M);return this},setBodyRenderStyle:function(y,S,C,I,O,M){var L=y.render,P=this.debugConfig;return L?(S==null&&(S=y.isStatic?P.staticLineColor:P.lineColor),C==null&&(C=P.lineOpacity),I==null&&(I=P.lineThickness),O==null&&(O=y.isStatic?P.staticFillColor:P.fillColor),M==null&&(M=P.fillOpacity),S!==!1&&(L.lineColor=S),C!==!1&&(L.lineOpacity=C),I!==!1&&(L.lineThickness=I),O!==!1&&(L.fillColor=O),M!==!1&&(L.fillOpacity=M),this):this},setConstraintRenderStyle:function(y,S,C,I,O,M,L){var P=y.render,b=this.debugConfig;if(!P)return this;if(S==null){var B=P.type;B==="line"?S=b.jointColor:B==="pin"?S=b.pinColor:B==="spring"&&(S=b.springColor)}return C==null&&(C=b.jointLineOpacity),I==null&&(I=b.jointLineThickness),O==null&&(O=b.pinSize),M==null&&(M=b.anchorColor),L==null&&(L=b.anchorSize),S!==!1&&(P.lineColor=S),C!==!1&&(P.lineOpacity=C),I!==!1&&(P.lineThickness=I),O!==!1&&(P.pinSize=O),M!==!1&&(P.anchorColor=M),L!==!1&&(P.anchorSize=L),this},setEventsProxy:function(){var y=this,S=this.engine,C=this.localWorld;this.drawDebug&&(p.on(C,"compositeModified",function(I){y.setCompositeRenderStyle(I)}),p.on(C,"beforeAdd",function(I){for(var O=[].concat(I.object),M=0;M<O.length;M++){var L=O[M],P=L.render;L.type==="body"?y.setBodyRenderStyle(L,P.lineColor,P.lineOpacity,P.lineThickness,P.fillColor,P.fillOpacity):L.type==="composite"?y.setCompositeRenderStyle(L):L.type==="constraint"&&y.setConstraintRenderStyle(L,P.lineColor,P.lineOpacity,P.lineThickness,P.pinSize,P.anchorColor,P.anchorSize)}})),p.on(C,"beforeAdd",function(I){y.emit(d.BEFORE_ADD,I)}),p.on(C,"afterAdd",function(I){y.emit(d.AFTER_ADD,I)}),p.on(C,"beforeRemove",function(I){y.emit(d.BEFORE_REMOVE,I)}),p.on(C,"afterRemove",function(I){y.emit(d.AFTER_REMOVE,I)}),p.on(S,"beforeUpdate",function(I){y.emit(d.BEFORE_UPDATE,I)}),p.on(S,"afterUpdate",function(I){y.emit(d.AFTER_UPDATE,I)}),p.on(S,"collisionStart",function(I){var O=I.pairs,M,L;O.length>0&&(M=O[0].bodyA,L=O[0].bodyB),y.emit(d.COLLISION_START,I,M,L)}),p.on(S,"collisionActive",function(I){var O=I.pairs,M,L;O.length>0&&(M=O[0].bodyA,L=O[0].bodyB),y.emit(d.COLLISION_ACTIVE,I,M,L)}),p.on(S,"collisionEnd",function(I){var O=I.pairs,M,L;O.length>0&&(M=O[0].bodyA,L=O[0].bodyB),y.emit(d.COLLISION_END,I,M,L)})},setBounds:function(y,S,C,I,O,M,L,P,b){return y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=this.scene.sys.scale.width),I===void 0&&(I=this.scene.sys.scale.height),O===void 0&&(O=64),M===void 0&&(M=!0),L===void 0&&(L=!0),P===void 0&&(P=!0),b===void 0&&(b=!0),this.updateWall(M,"left",y-O,S-O,O,I+O*2),this.updateWall(L,"right",y+C,S-O,O,I+O*2),this.updateWall(P,"top",y,S-O,C,O),this.updateWall(b,"bottom",y,S+I,C,O),this},updateWall:function(y,S,C,I,O,M){var L=this.walls[S];y?(L&&m.remove(this.localWorld,L),C+=O/2,I+=M/2,this.walls[S]=this.create(C,I,O,M,{isStatic:!0,friction:0,frictionStatic:0})):(L&&m.remove(this.localWorld,L),this.walls[S]=null)},createDebugGraphic:function(){var y=this.scene.sys.add.graphics({x:0,y:0});return y.setDepth(Number.MAX_VALUE),this.debugGraphic=y,this.drawDebug=!0,y},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(y,S,C){return y===void 0&&(y=0),S===void 0&&(S=1),this.localWorld.gravity.x=y,this.localWorld.gravity.y=S,C!==void 0&&(this.localWorld.gravity.scale=C),this},create:function(y,S,C,I,O){var M=o.rectangle(y,S,C,I,O);return m.add(this.localWorld,M),M},add:function(y){return m.add(this.localWorld,y),this},remove:function(y,S){Array.isArray(y)||(y=[y]);for(var C=0;C<y.length;C++){var I=y[C],O=I.body?I.body:I;i.remove(this.localWorld,O,S)}return this},removeConstraint:function(y,S){return i.remove(this.localWorld,y,S),this},convertTilemapLayer:function(y,S){var C=y.layer,I=y.getTilesWithin(0,0,C.width,C.height,{isColliding:!0});return this.convertTiles(I,S),this},convertTiles:function(y,S){if(y.length===0)return this;for(var C=0;C<y.length;C++)new v(this,y[C],S);return this},nextGroup:function(y){return f.nextGroup(y)},nextCategory:function(){return f.nextCategory()},pause:function(){return this.enabled=!1,this.emit(d.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(d.RESUME),this},update:function(y,S){if(!(!this.enabled||!this.autoUpdate)){var C=this.engine,I=this.runner,O=C.timing,M=this.correction;I.isFixed?S=this.getDelta(y,S):(S=y-I.timePrev||I.delta,I.timePrev=y,I.deltaHistory.push(S),I.deltaHistory=I.deltaHistory.slice(-I.deltaSampleSize),S=Math.min.apply(null,I.deltaHistory),S=S<I.deltaMin?I.deltaMin:S,S=S>I.deltaMax?I.deltaMax:S,M=S/I.delta,I.delta=S),I.timeScalePrev!==0&&(M*=O.timeScale/I.timeScalePrev),O.timeScale===0&&(M=0),I.timeScalePrev=O.timeScale,I.correction=M,I.frameCounter+=1,y-I.counterTimestamp>=1e3&&(I.fps=I.frameCounter*((y-I.counterTimestamp)/1e3),I.counterTimestamp=y,I.frameCounter=0),s.update(C,S,M)}},step:function(y,S){s.update(this.engine,y,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(y){var S=y.hasOwnProperty("body")?y.body:y;return i.get(this.localWorld,S.id,S.type)!==null},getAllBodies:function(){return i.allBodies(this.localWorld)},getAllConstraints:function(){return i.allConstraints(this.localWorld)},getAllComposites:function(){return i.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var y=this.debugConfig,S=this.engine,C=this.debugGraphic,I=i.allBodies(this.localWorld);this.debugGraphic.clear(),y.showBroadphase&&S.broadphase.controller&&this.renderGrid(S.broadphase,C,y.broadphaseColor,.5),y.showBounds&&this.renderBodyBounds(I,C,y.boundsColor,.5),(y.showBody||y.showStaticBody)&&this.renderBodies(I),y.showJoint&&this.renderJoints(),(y.showAxes||y.showAngleIndicator)&&this.renderBodyAxes(I,C,y.showAxes,y.angleColor,.5),y.showVelocity&&this.renderBodyVelocity(I,C,y.velocityColor,1,2),y.showSeparations&&this.renderSeparations(S.pairs.list,C,y.separationColor),y.showCollisions&&this.renderCollisions(S.pairs.list,C,y.collisionColor)}},renderGrid:function(y,S,C,I){S.lineStyle(1,C,I);for(var O=h.keys(y.buckets),M=0;M<O.length;M++){var L=O[M];if(!(y.buckets[L].length<2)){var P=L.split(/C|R/);S.strokeRect(parseInt(P[1],10)*y.bucketWidth,parseInt(P[2],10)*y.bucketHeight,y.bucketWidth,y.bucketHeight)}}return this},renderSeparations:function(y,S,C){S.lineStyle(1,C,1);for(var I=0;I<y.length;I++){var O=y[I];if(!!O.isActive){var M=O.collision,L=M.bodyA,P=M.bodyB,b=L.position,B=P.position,U=M.penetration,H=!L.isStatic&&!P.isStatic?4:1;P.isStatic&&(H=0),S.lineBetween(B.x,B.y,B.x-U.x*H,B.y-U.y*H),H=!L.isStatic&&!P.isStatic?4:1,L.isStatic&&(H=0),S.lineBetween(b.x,b.y,b.x-U.x*H,b.y-U.y*H)}}return this},renderCollisions:function(y,S,C){S.lineStyle(1,C,.5),S.fillStyle(C,1);var I,O;for(I=0;I<y.length;I++)if(O=y[I],!!O.isActive)for(var M=0;M<O.activeContacts.length;M++){var L=O.activeContacts[M],P=L.vertex;S.fillRect(P.x-2,P.y-2,5,5)}for(I=0;I<y.length;I++)if(O=y[I],!!O.isActive){var b=O.collision,B=O.activeContacts;if(B.length>0){var U=B[0].vertex.x,H=B[0].vertex.y;B.length===2&&(U=(B[0].vertex.x+B[1].vertex.x)/2,H=(B[0].vertex.y+B[1].vertex.y)/2),b.bodyB===b.supports[0].body||b.bodyA.isStatic?S.lineBetween(U-b.normal.x*8,H-b.normal.y*8,U,H):S.lineBetween(U+b.normal.x*8,H+b.normal.y*8,U,H)}}return this},renderBodyBounds:function(y,S,C,I){S.lineStyle(1,C,I);for(var O=0;O<y.length;O++){var M=y[O];if(!!M.render.visible){var L=M.bounds;if(L)S.strokeRect(L.min.x,L.min.y,L.max.x-L.min.x,L.max.y-L.min.y);else for(var P=M.parts,b=P.length>1?1:0;b<P.length;b++){var B=P[b];S.strokeRect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}}return this},renderBodyAxes:function(y,S,C,I,O){S.lineStyle(1,I,O);for(var M=0;M<y.length;M++){var L=y[M],P=L.parts;if(!!L.render.visible){var b,B,U;if(C)for(B=P.length>1?1:0;B<P.length;B++)for(b=P[B],U=0;U<b.axes.length;U++){var H=b.axes[U];S.lineBetween(b.position.x,b.position.y,b.position.x+H.x*20,b.position.y+H.y*20)}else for(B=P.length>1?1:0;B<P.length;B++)for(b=P[B],U=0;U<b.axes.length;U++)S.lineBetween(b.position.x,b.position.y,(b.vertices[0].x+b.vertices[b.vertices.length-1].x)/2,(b.vertices[0].y+b.vertices[b.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(y,S,C,I,O){S.lineStyle(O,C,I);for(var M=0;M<y.length;M++){var L=y[M];!L.render.visible||S.lineBetween(L.position.x,L.position.y,L.position.x+(L.position.x-L.positionPrev.x)*2,L.position.y+(L.position.y-L.positionPrev.y)*2)}return this},renderBodies:function(y){for(var S=this.debugGraphic,C=this.debugConfig,I=C.showBody,O=C.showStaticBody,M=C.showSleeping,L=C.showInternalEdges,P=C.showConvexHulls,b=C.renderFill,B=C.renderLine,U=C.staticBodySleepOpacity,H=C.sleepFillColor,Y=C.sleepLineColor,j=C.hullColor,_=0;_<y.length;_++){var w=y[_];if(!!w.render.visible&&!(!O&&w.isStatic||!I&&!w.isStatic)){var D=w.render.lineColor,N=w.render.lineOpacity,G=w.render.lineThickness,k=w.render.fillColor,V=w.render.fillOpacity;M&&w.isSleeping&&(w.isStatic?(N*=U,V*=U):(D=Y,k=H)),b||(k=null),B||(D=null),this.renderBody(w,S,L,D,N,G,k,V);var X=w.parts.length;P&&X>1&&this.renderConvexHull(w,S,j,G)}}},renderBody:function(y,S,C,I,O,M,L,P){I===void 0&&(I=null),O===void 0&&(O=null),M===void 0&&(M=1),L===void 0&&(L=null),P===void 0&&(P=null);for(var b=this.debugConfig,B=b.sensorFillColor,U=b.sensorLineColor,H=y.parts,Y=H.length,j=Y>1?1:0;j<Y;j++){var _=H[j],w=_.render,D=w.opacity;if(!(!w.visible||D===0||_.isSensor&&!b.showSensors)){var N=_.circleRadius;if(S.beginPath(),_.isSensor?(L!==null&&S.fillStyle(B,P*D),I!==null&&S.lineStyle(M,U,O*D)):(L!==null&&S.fillStyle(L,P*D),I!==null&&S.lineStyle(M,I,O*D)),N)S.arc(_.position.x,_.position.y,N,0,2*Math.PI);else{var G=_.vertices,k=G.length;S.moveTo(G[0].x,G[0].y);for(var V=1;V<k;V++){var X=G[V];if(!G[V-1].isInternal||C?S.lineTo(X.x,X.y):S.moveTo(X.x,X.y),V<k&&X.isInternal&&!C){var K=(V+1)%k;S.moveTo(G[K].x,G[K].y)}}S.closePath()}L!==null&&S.fillPath(),I!==null&&S.strokePath()}}if(b.showPositions&&!y.isStatic){var tt=y.position.x,st=y.position.y,rt=Math.ceil(b.positionSize/2);S.fillStyle(b.positionColor,1),S.fillRect(tt-rt,st-rt,b.positionSize,b.positionSize)}return this},renderConvexHull:function(y,S,C,I){I===void 0&&(I=1);var O=y.parts,M=O.length;if(M>1){var L=y.vertices;S.lineStyle(I,C),S.beginPath(),S.moveTo(L[0].x,L[0].y);for(var P=1;P<L.length;P++)S.lineTo(L[P].x,L[P].y);S.lineTo(L[0].x,L[0].y),S.strokePath()}return this},renderJoints:function(){for(var y=this.debugGraphic,S=i.allConstraints(this.localWorld),C=0;C<S.length;C++){var I=S[C].render,O=I.lineColor,M=I.lineOpacity,L=I.lineThickness,P=I.pinSize,b=I.anchorColor,B=I.anchorSize;this.renderConstraint(S[C],y,O,M,L,P,b,B)}},renderConstraint:function(y,S,C,I,O,M,L,P){var b=y.render;if(!b.visible||!y.pointA||!y.pointB)return this;S.lineStyle(O,C,I);var B=y.bodyA,U=y.bodyB,H,Y;if(B?H=E.add(B.position,y.pointA):H=y.pointA,b.type==="pin")S.strokeCircle(H.x,H.y,M);else{if(U?Y=E.add(U.position,y.pointB):Y=y.pointB,S.beginPath(),S.moveTo(H.x,H.y),b.type==="spring")for(var j=E.sub(Y,H),_=E.perp(E.normalise(j)),w=Math.ceil(h.clamp(y.length/5,12,20)),D,N=1;N<w;N+=1)D=N%2===0?1:-1,S.lineTo(H.x+j.x*(N/w)+_.x*D*4,H.y+j.y*(N/w)+_.y*D*4);S.lineTo(Y.x,Y.y)}return S.strokePath(),b.anchors&&P>0&&(S.fillStyle(L),S.fillCircle(H.x,H.y,P),S.fillCircle(Y.x,Y.y,P)),this},resetCollisionIDs:function(){return g._nextCollidingGroupId=1,g._nextNonCollidingGroupId=-1,g._nextCategory=1,this},shutdown:function(){p.off(this.engine),this.removeAllListeners(),m.clear(this.localWorld,!1),s.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});c.exports=x},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BasePlugin:e(540),DefaultPlugins:e(197),PluginCache:e(24),PluginManager:e(414),ScenePlugin:e(1404)}},function(c,R,e){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var o=e(540),g=e(0),l=e(20),h=new g({Extends:o,initialize:function(s,n,d){o.call(this,n),this.scene=s,this.systems=s.sys,this.pluginKey=d,s.sys.events.once(l.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Canvas:e(1406),Events:e(91),Snapshot:e(1407),WebGL:e(1408)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CanvasRenderer:e(368),GetBlendModes:e(370),SetTransform:e(30)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Canvas:e(369),WebGL:e(383)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(107),g=e(17),l={PipelineManager:e(372),Pipelines:e(1409),RenderTarget:e(141),Utils:e(12),WebGLPipeline:e(58),WebGLRenderer:e(371),WebGLShader:e(375)};l=g(!1,l,o),c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(92),g=e(17),l={BitmapMaskPipeline:e(373),Events:e(374),GraphicsPipeline:e(376),LightPipeline:e(377),MultiPipeline:e(108),PointLightPipeline:e(378),PostFXPipeline:e(1410),RopePipeline:e(379),SinglePipeline:e(380),UtilityPipeline:e(381)};l=g(!1,l,o),c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(198),l=e(2),h=e(1411),i=e(382),s=e(58),n=new o({Extends:s,initialize:function(a){a.renderTarget=l(a,"renderTarget",1),a.fragShader=l(a,"fragShader",h),a.vertShader=l(a,"vertShader",i),a.attributes=l(a,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),a.batchSize=1,a.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],s.call(this,a),this.isPostFX=!0,this.gameObject,this.colorMatrix=new g,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){s.prototype.boot.call(this);var d=this.manager.UTILITY_PIPELINE;this.fullFrame1=d.fullFrame1,this.fullFrame2=d.fullFrame2,this.halfFrame1=d.halfFrame1,this.halfFrame2=d.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(d){this.bindAndDraw(d)},copyFrame:function(d,a,u,f,p){this.manager.copyFrame(d,a,u,f,p)},copyToGame:function(d){this.manager.copyToGame(d)},drawFrame:function(d,a,u){this.manager.drawFrame(d,a,u,this.colorMatrix)},blendFrames:function(d,a,u,f,p){this.manager.blendFrames(d,a,u,f,p)},blendFramesAdditive:function(d,a,u,f,p){this.manager.blendFramesAdditive(d,a,u,f,p)},clearFrame:function(d,a){this.manager.clearFrame(d,a)},blitFrame:function(d,a,u,f,p,v){this.manager.blitFrame(d,a,u,f,p,v)},copyFrameRect:function(d,a,u,f,p,v,m,E){this.manager.copyFrameRect(d,a,u,f,p,v,m,E)},bindAndDraw:function(d,a,u,f,p){u===void 0&&(u=!0),f===void 0&&(f=!0);var v=this.gl,m=this.renderer;this.bind(p),this.set1i("uMainSampler",0),a?(v.viewport(0,0,a.width,a.height),v.bindFramebuffer(v.FRAMEBUFFER,a.framebuffer),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,a.texture,0),u&&(f?v.clearColor(0,0,0,0):v.clearColor(0,0,0,1),v.clear(v.COLOR_BUFFER_BIT))):(m.popFramebuffer(!1,!1,!1),m.currentFramebuffer||v.viewport(0,0,m.width,m.height)),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,d.texture),v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.STATIC_DRAW),v.drawArrays(v.TRIANGLES,0,6),a?(v.bindTexture(v.TEXTURE_2D,null),v.bindFramebuffer(v.FRAMEBUFFER,null)):m.resetTextures()}});c.exports=n},function(c,R){c.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(17),g=e(201),l={Center:e(403),Events:e(104),Orientation:e(404),ScaleManager:e(415),ScaleModes:e(405),Zoom:e(406)};l=o(!1,l,g.CENTER),l=o(!1,l,g.ORIENTATION),l=o(!1,l,g.SCALE_MODE),l=o(!1,l,g.ZOOM),c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(144),g=e(17),l={Events:e(20),GetPhysicsPlugins:e(419),GetScenePlugins:e(420),SceneManager:e(417),ScenePlugin:e(1414),Settings:e(421),Systems:e(204)};l=g(!1,l,o),c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(18),g=e(0),l=e(20),h=e(2),i=e(24),s=new g({initialize:function(d){this.scene=d,this.systems=d.sys,this.settings=d.sys.settings,this.key=d.sys.settings.key,this.manager=d.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,d.sys.events.once(l.BOOT,this.boot,this),d.sys.events.on(l.START,this.pluginStart,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(l.SHUTDOWN,this.shutdown,this)},start:function(n,d){return n===void 0&&(n=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",n,d),this},restart:function(n){var d=this.key;return this.manager.queueOp("stop",d),this.manager.queueOp("start",d,n),this},transition:function(n){n===void 0&&(n={});var d=h(n,"target",!1),a=this.manager.getScene(d);if(!d||!this.checkValidTransition(a))return!1;var u=h(n,"duration",1e3);this._elapsed=0,this._target=a,this._duration=u,this._willSleep=h(n,"sleep",!1),this._willRemove=h(n,"remove",!1);var f=h(n,"onUpdate",null);f&&(this._onUpdate=f,this._onUpdateScope=h(n,"onUpdateScope",this.scene));var p=h(n,"allowInput",!1);this.settings.transitionAllowInput=p;var v=a.sys.settings;return v.isTransition=!0,v.transitionFrom=this.scene,v.transitionDuration=u,v.transitionAllowInput=p,h(n,"moveAbove",!1)?this.manager.moveAbove(this.key,d):h(n,"moveBelow",!1)&&this.manager.moveBelow(this.key,d),a.sys.isSleeping()?a.sys.wake(h(n,"data")):this.manager.start(d,h(n,"data")),this.systems.events.emit(l.TRANSITION_OUT,a,u),this.systems.events.on(l.UPDATE,this.step,this),!0},checkValidTransition:function(n){return!(!n||n.sys.isActive()||n.sys.isTransitioning()||n===this.scene||this.systems.isTransitioning())},step:function(n,d){this._elapsed+=d,this.transitionProgress=o(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var n=this._target.sys,d=this._target.sys.settings;this.systems.events.off(l.UPDATE,this.step,this),n.events.emit(l.TRANSITION_COMPLETE,this.scene),d.isTransition=!1,d.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(n,d,a,u){return this.manager.add(n,d,a,u)},launch:function(n,d){return n&&n!==this.key&&this.manager.queueOp("start",n,d),this},run:function(n,d){return n&&n!==this.key&&this.manager.queueOp("run",n,d),this},pause:function(n,d){return n===void 0&&(n=this.key),this.manager.queueOp("pause",n,d),this},resume:function(n,d){return n===void 0&&(n=this.key),this.manager.queueOp("resume",n,d),this},sleep:function(n,d){return n===void 0&&(n=this.key),this.manager.queueOp("sleep",n,d),this},wake:function(n,d){return n===void 0&&(n=this.key),this.manager.queueOp("wake",n,d),this},switch:function(n){return n!==this.key&&this.manager.queueOp("switch",this.key,n),this},stop:function(n,d){return n===void 0&&(n=this.key),this.manager.queueOp("stop",n,d),this},setActive:function(n,d,a){d===void 0&&(d=this.key);var u=this.manager.getScene(d);return u&&u.sys.setActive(n,a),this},setVisible:function(n,d){d===void 0&&(d=this.key);var a=this.manager.getScene(d);return a&&a.sys.setVisible(n),this},isSleeping:function(n){return n===void 0&&(n=this.key),this.manager.isSleeping(n)},isActive:function(n){return n===void 0&&(n=this.key),this.manager.isActive(n)},isPaused:function(n){return n===void 0&&(n=this.key),this.manager.isPaused(n)},isVisible:function(n){return n===void 0&&(n=this.key),this.manager.isVisible(n)},swapPosition:function(n,d){return d===void 0&&(d=this.key),n!==d&&this.manager.swapPosition(n,d),this},moveAbove:function(n,d){return d===void 0&&(d=this.key),n!==d&&this.manager.moveAbove(n,d),this},moveBelow:function(n,d){return d===void 0&&(d=this.key),n!==d&&this.manager.moveBelow(n,d),this},remove:function(n){return n===void 0&&(n=this.key),this.manager.remove(n),this},moveUp:function(n){return n===void 0&&(n=this.key),this.manager.moveUp(n),this},moveDown:function(n){return n===void 0&&(n=this.key),this.manager.moveDown(n),this},bringToTop:function(n){return n===void 0&&(n=this.key),this.manager.bringToTop(n),this},sendToBack:function(n){return n===void 0&&(n=this.key),this.manager.sendToBack(n),this},get:function(n){return this.manager.getScene(n)},getIndex:function(n){return n===void 0&&(n=this.key),this.manager.getIndex(n)},shutdown:function(){var n=this.systems.events;n.off(l.SHUTDOWN,this.shutdown,this),n.off(l.POST_UPDATE,this.step,this),n.off(l.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});i.register("ScenePlugin",s,"scenePlugin"),c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Events:e(438),List:e(110),Map:e(102),ProcessQueue:e(211),RTree:e(531),Set:e(149),Size:e(416)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(17),g=e(1417),l={CanvasTexture:e(423),Events:e(106),FilterMode:g,Frame:e(109),Parsers:e(425),Texture:e(206),TextureManager:e(422),TextureSource:e(424)};l=o(!1,l,g),c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={LINEAR:0,NEAREST:1};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(17),g=e(1419),l={Components:e(251),Parsers:e(1452),Formats:e(40),ImageCollection:e(576),ParseToTilemap:e(262),Tile:e(85),Tilemap:e(580),TilemapCreator:e(1459),TilemapFactory:e(1460),Tileset:e(122),TilemapLayer:e(581),Orientation:e(29),LayerData:e(120),MapData:e(121),ObjectLayer:e(572)};l=o(!1,l,g.ORIENTATION),c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={ORIENTATION:e(29)};c.exports=o},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=e(63),l=function(h,i,s,n,d,a,u,f){u===void 0&&(u=!0),h<0&&(h=0),i<0&&(i=0);for(var p=o(h,i,s,n,null,f),v=d-h,m=a-i,E=0;E<p.length;E++){var x=p[E].x+v,y=p[E].y+m;x>=0&&x<f.width&&y>=0&&y<f.height&&f.data[y][x]&&f.data[y][x].copy(p[E])}u&&g(d-1,a-1,s+2,n+2,f)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=e(542),l=function(h,i,s,n,d,a){s||(s={}),Array.isArray(h)||(h=[h]);var u=a.tilemapLayer;n||(n=u.scene),d||(d=n.cameras.main);var f=o(0,0,a.width,a.height,null,a),p=[],v;for(v=0;v<f.length;v++){var m=f[v];if(h.indexOf(m.index)!==-1){var E=u.tileToWorldXY(m.x,m.y,void 0,d,a);s.x=E.x,s.y=E.y,p.push(n.make.sprite(s))}}if(typeof i=="number")for(v=0;v<h.length;v++)g(h[v],i,0,0,a.width,a.height,a);else if(Array.isArray(i))for(v=0;v<h.length;v++)g(h[v],i[v],0,0,a.width,a.height,a);return p};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=e(63),l=e(72),h=function(i,s,n,d,a,u,f){for(var p=f.collideIndexes.indexOf(i)!==-1,v=o(s,n,d,a,null,f),m=0;m<v.length;m++)v[m].index=i,l(v[m],p);u&&g(s-1,n-1,d+2,a+2,f)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=function(l,h,i,s,n,d,a,u){var f=o(i,s,n,d,a,u);return f.filter(l,h)};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){g===void 0&&(g=0),l===void 0&&(l=!1);var i=0,s,n,d;if(l){for(n=h.height-1;n>=0;n--)for(s=h.width-1;s>=0;s--)if(d=h.data[n][s],d&&d.index===o){if(i===g)return d;i+=1}}else for(n=0;n<h.height;n++)for(s=0;s<h.width;s++)if(d=h.data[n][s],d&&d.index===o){if(i===g)return d;i+=1}return null};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=function(l,h,i,s,n,d,a,u){var f=o(i,s,n,d,a,u);return f.find(l,h)||null};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=function(l,h,i,s,n,d,a,u){var f=o(i,s,n,d,a,u);f.forEach(l,h)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(29),g=e(544),l=e(545),h=e(547),i=e(1),s=e(548),n=function(d){return d===o.ORTHOGONAL?g:d===o.HEXAGONAL?l:d===o.STAGGERED?s:d===o.ISOMETRIC?h:i};c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(158),g=e(3),l=new g,h=function(i,s,n,d,a){return a.tilemapLayer.worldToTileXY(i,s,!0,l,d),o(l.x,l.y,n,a)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(483),g=e(26),l=e(484),h=e(1),i=e(3),s=function(f,p){return l.RectangleToTriangle(p,f)},n=new i,d=new i,a=new i,u=function(f,p,v,m){if(f===void 0)return[];var E=h;f instanceof o.Circle?E=l.CircleToRectangle:f instanceof o.Rectangle?E=l.RectangleToRectangle:f instanceof o.Triangle?E=s:f instanceof o.Line&&(E=l.LineToRectangle),m.tilemapLayer.worldToTileXY(f.left,f.top,!0,d,v);var x=d.x,y=d.y;m.tilemapLayer.worldToTileXY(f.right,f.bottom,!0,a,v);var S=Math.ceil(a.x),C=Math.ceil(a.y),I=Math.max(S-x,1),O=Math.max(C-y,1),M=g(x,y,I,O,p,m),L=m.tileWidth,P=m.tileHeight;m.tilemapLayer&&(L*=m.tilemapLayer.scaleX,P*=m.tilemapLayer.scaleY);for(var b=[],B=new o.Rectangle(0,0,L,P),U=0;U<M.length;U++){var H=M[U];m.tilemapLayer.tileToWorldXY(H.x,H.y,n,v),B.x=n.x,B.y=n.y,E(f,B)&&b.push(H)}return b};c.exports=u},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(29),g=e(1),l=e(253),h=function(i){return i===o.ORTHOGONAL?l:g};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(29),g=e(550),l=e(551),h=e(1),i=e(552),s=e(553),n=function(d){return d===o.ORTHOGONAL?s:d===o.ISOMETRIC?l:d===o.HEXAGONAL?g:d===o.STAGGERED?i:h};c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(29),g=e(554),l=e(1),h=e(555),i=e(254),s=function(n){return n===o.ORTHOGONAL?i:n===o.HEXAGONAL?g:n===o.STAGGERED?h:l};c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(29),g=e(1),l=e(255),h=function(i){return i===o.ORTHOGONAL?l:g};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(29),g=e(556),l=e(557),h=e(1),i=e(558),s=e(559),n=function(d){return d===o.ORTHOGONAL?s:d===o.ISOMETRIC?l:d===o.HEXAGONAL?g:d===o.STAGGERED?i:h};c.exports=n},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(29),g=e(560),l=e(1),h=e(561),i=e(256),s=function(n){return n===o.ORTHOGONAL?i:n===o.HEXAGONAL?g:n===o.STAGGERED?h:l};c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(562),g=e(3),l=new g,h=function(i,s,n,d){d.tilemapLayer.worldToTileXY(i,s,!0,l,n);var a=l.x,u=l.y;return o(a,u,d)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(257),g=e(3),l=new g,h=function(i,s,n,d,a,u){return u.tilemapLayer.worldToTileXY(s,n,!0,l,a,u),o(i,l.x,l.y,d,u)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(63),g=e(257),l=function(h,i,s,n,d){if(n===void 0&&(n=!0),!Array.isArray(h))return null;Array.isArray(h[0])||(h=[h]);for(var a=h.length,u=h[0].length,f=0;f<a;f++)for(var p=0;p<u;p++){var v=h[f][p];g(v,i+p,s+f,!1,d)}n&&o(i-1,s-1,u+2,a+2,d)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=e(210),l=function(h,i,s,n,d,a){var u,f=o(h,i,s,n,{},a);if(!d)for(d=[],u=0;u<f.length;u++)d.indexOf(f[u].index)===-1&&d.push(f[u].index);for(u=0;u<f.length;u++)f[u].index=g(d)};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(563),g=e(3),l=new g,h=function(i,s,n,d,a,u){return u.tilemapLayer.worldToTileXY(i,s,!0,l,a,u),o(l.x,l.y,n,d,u)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=e(397),l=new g(105,210,231,150),h=new g(243,134,48,200),i=new g(40,39,37,150),s=function(n,d,a){d===void 0&&(d={});var u=d.tileColor!==void 0?d.tileColor:l,f=d.collidingTileColor!==void 0?d.collidingTileColor:h,p=d.faceColor!==void 0?d.faceColor:i,v=o(0,0,a.width,a.height,null,a);n.translateCanvas(a.tilemapLayer.x,a.tilemapLayer.y),n.scaleCanvas(a.tilemapLayer.scaleX,a.tilemapLayer.scaleY);for(var m=0;m<v.length;m++){var E=v[m],x=E.width,y=E.height,S=E.pixelX,C=E.pixelY,I=E.collides?f:u;I!==null&&(n.fillStyle(I.color,I.alpha/255),n.fillRect(S,C,x,y)),S+=1,C+=1,x-=2,y-=2,p!==null&&(n.lineStyle(1,p.color,p.alpha/255),E.faceTop&&n.lineBetween(S,C,S+x,C),E.faceRight&&n.lineBetween(S+x,C,S+x,C+y),E.faceBottom&&n.lineBetween(S,C+y,S+x,C+y),E.faceLeft&&n.lineBetween(S,C,S,C+y))}};c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(72),g=e(63),l=e(160),h=function(i,s,n,d,a){s===void 0&&(s=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),Array.isArray(i)||(i=[i]);for(var u=0;u<i.length;u++)l(i[u],s,d);if(a)for(var f=0;f<d.height;f++)for(var p=0;p<d.width;p++){var v=d.data[f][p];v&&i.indexOf(v.index)!==-1&&o(v,s)}n&&g(0,0,d.width,d.height,d)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(72),g=e(63),l=e(160),h=function(i,s,n,d,a,u){if(n===void 0&&(n=!0),d===void 0&&(d=!0),u===void 0&&(u=!0),!(i>s)){for(var f=i;f<=s;f++)l(f,n,a);if(u)for(var p=0;p<a.height;p++)for(var v=0;v<a.width;v++){var m=a.data[p][v];m&&m.index>=i&&m.index<=s&&o(m,n)}d&&g(0,0,a.width,a.height,a)}};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(72),g=e(63),l=e(160),h=function(i,s,n,d){s===void 0&&(s=!0),n===void 0&&(n=!0),Array.isArray(i)||(i=[i]);for(var a=0;a<d.height;a++)for(var u=0;u<d.width;u++){var f=d.data[a][u];f&&i.indexOf(f.index)===-1&&(o(f,s),l(f.index,s,d))}n&&g(0,0,d.width,d.height,d)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(72),g=e(63),l=e(126),h=function(i,s,n,d){s===void 0&&(s=!0),n===void 0&&(n=!0);for(var a=0;a<d.height;a++)for(var u=0;u<d.width;u++){var f=d.data[a][u];if(!!f){for(var p in i)if(!!l(f.properties,p)){var v=i[p];Array.isArray(v)||(v=[v]);for(var m=0;m<v.length;m++)f.properties[p]===v[m]&&o(f,s)}}}n&&g(0,0,d.width,d.height,d)};c.exports=h},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(72),g=e(63),l=function(h,i,s){h===void 0&&(h=!0),i===void 0&&(i=!0);for(var n=0;n<s.height;n++)for(var d=0;d<s.width;d++){var a=s.data[n][d];if(!!a){var u=a.getCollisionGroup();u&&u.objects&&u.objects.length>0&&o(a,h)}}i&&g(0,0,s.width,s.height,s)};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g,l,h){if(typeof o=="number")h.callbacks[o]=g!==null?{callback:g,callbackContext:l}:void 0;else for(var i=0,s=o.length;i<s;i++)h.callbacks[o[i]]=g!==null?{callback:g,callbackContext:l}:void 0};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=function(l,h,i,s,n,d,a){for(var u=o(l,h,i,s,null,a),f=0;f<u.length;f++)u[f].setCollisionCallback(n,d)};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=e(131),l=function(h,i,s,n,d){var a=o(h,i,s,n,null,d),u=a.map(function(p){return p.index});g(u);for(var f=0;f<a.length;f++)a[f].index=u[f]};c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=function(l,h,i,s,n,d,a){for(var u=o(i,s,n,d,null,a),f=0;f<u.length;f++)u[f]&&(u[f].index===l?u[f].index=h:u[f].index===h&&(u[f].index=l))};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(26),g=function(l,h,i,s,n,d){if(!!n){var a,u=o(l,h,i,s,null,d),f=0;for(a=0;a<n.length;a++)f+=n[a].weight;if(!(f<=0))for(a=0;a<u.length;a++){for(var p=Math.random()*f,v=0,m=-1,E=0;E<n.length;E++)if(v+=n[E].weight,p<=v){var x=n[E].index;m=Array.isArray(x)?x[Math.floor(Math.random()*x.length)]:x;break}u[a].index=m}}};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={FromOrientationString:e(258),Parse:e(564),Parse2DArray:e(259),ParseCSV:e(565),Impact:e(1454),Tiled:e(1455)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){for(var l=0;l<o.length;l++){var h=o[l],i=l;if(h.name&&h.name!==""&&(i=h.name),Array.isArray(h.wangtiles)&&h.wangtiles.length>0){var s={},n={},d,a,u;if(Array.isArray(h.edgecolors))for(d=0;d<h.edgecolors.length;d++)u=1+d,a=h.edgecolors[d],a.name!==""&&(s[u]=a.name);if(Array.isArray(h.cornercolors))for(d=0;d<h.cornercolors.length;d++)u=1+d,a=h.cornercolors[d],a.name!==""&&(n[u]=a.name);if(Array.isArray(h.colors))for(d=0;d<h.colors.length;d++)a=h.colors[d],u=1+d,a.name!==""&&(s[u]=n[u]=a.name);for(var f=[s,n,s,n,s,n,s,n],p=0;p<h.wangtiles.length;p++){var v=h.wangtiles[p],m=g[v.tileid]||(g[v.tileid]={});m=m.wangid||(m.wangid={});for(var E=[],x=0;x<Math.min(f.length,v.wangid.length);x++){if(a=v.wangid[x],a===0){E.push(void 0);continue}var y=f[x][a];if(y!==void 0){E.push(y);continue}E.push(a)}m[i]=E}}}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ParseTileLayers:e(578),ParseTilesets:e(579),ParseWeltmeister:e(577)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AssignTileProperties:e(567),Base64Decode:e(574),BuildTilesetIndex:e(568),CreateGroupLayer:e(161),ParseGID:e(261),ParseImageLayers:e(569),ParseJSONTiled:e(566),ParseObject:e(260),ParseObjectLayers:e(570),ParseTileLayers:e(573),ParseTilesets:e(575)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(1),g=e(1);o=e(1457),g=e(1458),c.exports={renderWebGL:o,renderCanvas:g}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(12),g=function(l,h,i){var s=h.cull(i),n=s.length,d=i.alpha*h.alpha;if(!(n===0||d<=0)){var a=h.gidMap,u=l.pipelines.set(h.pipeline,h),f=o.getTintAppendFloatAlpha,p=h.scrollFactorX,v=h.scrollFactorY,m=h.x,E=h.y,x=h.scaleX,y=h.scaleY;l.pipelines.preBatch(h);for(var S=0;S<n;S++){var C=s[S],I=a[C.index];if(!!I){var O=I.getTileTextureCoordinates(C.index);if(O!==null){var M=I.glTexture,L=u.setTexture2D(M,h),P=I.tileWidth,b=I.tileHeight,B=O.x,U=O.y,H=I.tileWidth*.5,Y=I.tileHeight*.5,j=f(C.tint,d*C.alpha);u.batchTexture(h,M,M.width,M.height,m+(H+C.pixelX)*x,E+(Y+C.pixelY)*y,C.width,C.height,x,y,C.rotation,C.flipX,C.flipY,p,v,H,Y,B,U,P,b,j,j,j,j,!1,0,0,i,null,!0,L)}}}l.pipelines.postBatch(h)}};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(25),g=new o,l=new o,h=new o,i=function(s,n,d,a){var u=n.cull(d),f=u.length,p=d.alpha*n.alpha;if(!(f===0||p<=0)){var v=g,m=l,E=h;m.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),v.copyFrom(d.matrix);var x=s.currentContext,y=n.gidMap;x.save(),a?(v.multiplyWithOffset(a,-d.scrollX*n.scrollFactorX,-d.scrollY*n.scrollFactorY),m.e=n.x,m.f=n.y,v.multiply(m,E),E.copyToContext(x)):(m.e-=d.scrollX*n.scrollFactorX,m.f-=d.scrollY*n.scrollFactorY,m.copyToContext(x)),(!s.antialias||n.scaleX>1||n.scaleY>1)&&(x.imageSmoothingEnabled=!1);for(var S=0;S<f;S++){var C=u[S],I=y[C.index];if(!!I){var O=I.image.getSourceImage(),M=I.getTileTextureCoordinates(C.index);if(M!==null){var L=I.tileWidth,P=I.tileHeight,b=L*.5,B=P*.5;x.save(),x.translate(C.pixelX+b,C.pixelY+B),C.rotation!==0&&x.rotate(C.rotation),(C.flipX||C.flipY)&&x.scale(C.flipX?-1:1,C.flipY?-1:1),x.globalAlpha=p*C.alpha,x.drawImage(O,M.x,M.y,L,P,-b,-B,L,P),x.restore()}}}x.restore()}};c.exports=i},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(16),g=e(262);o.register("tilemap",function(l){var h=l!==void 0?l:{};return g(this.scene,h.key,h.tileWidth,h.tileHeight,h.width,h.height,h.data,h.insertNull)})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(5),g=e(262);o.register("tilemap",function(l,h,i,s,n,d,a){return l===null&&(l=void 0),h===null&&(h=void 0),i===null&&(i=void 0),s===null&&(s=void 0),n===null&&(n=void 0),g(this.scene,l,h,i,s,n,d,a)})},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Clock:e(1462),TimerEvent:e(582)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(0),g=e(24),l=e(20),h=e(582),i=e(93),s=new o({initialize:function(d){this.scene=d,this.systems=d.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],d.sys.events.once(l.BOOT,this.boot,this),d.sys.events.on(l.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var n=this.systems.events;n.on(l.PRE_UPDATE,this.preUpdate,this),n.on(l.UPDATE,this.update,this),n.once(l.SHUTDOWN,this.shutdown,this)},addEvent:function(n){var d;return n instanceof h?(d=n,this.removeEvent(d),d.elapsed=d.startAt,d.hasDispatched=!1,d.repeatCount=d.repeat===-1||d.loop?999999999999:d.repeat):d=new h(n),this._pendingInsertion.push(d),d},delayedCall:function(n,d,a,u){return this.addEvent({delay:n,callback:d,args:a,callbackScope:u})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(n){Array.isArray(n)||(n=[n]);for(var d=0;d<n.length;d++){var a=n[d];i(this._pendingRemoval,a),i(this._pendingInsertion,a),i(this._active,a)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var n=this._pendingRemoval.length,d=this._pendingInsertion.length;if(!(n===0&&d===0)){var a,u;for(a=0;a<n;a++){u=this._pendingRemoval[a];var f=this._active.indexOf(u);f>-1&&this._active.splice(f,1),u.destroy()}for(a=0;a<d;a++)u=this._pendingInsertion[a],this._active.push(u);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(n,d){if(this.now=n,!this.paused){d*=this.timeScale;for(var a=0;a<this._active.length;a++){var u=this._active[a];if(!u.paused&&(u.elapsed+=d*u.timeScale,u.elapsed>=u.delay)){var f=u.elapsed-u.delay;u.elapsed=u.delay,!u.hasDispatched&&u.callback&&(u.hasDispatched=!0,u.callback.apply(u.callbackScope,u.args)),u.repeatCount>0?(u.repeatCount--,u.elapsed=f,u.hasDispatched=!1):this._pendingRemoval.push(u)}}}},shutdown:function(){var n;for(n=0;n<this._pendingInsertion.length;n++)this._pendingInsertion[n].destroy();for(n=0;n<this._active.length;n++)this._active[n].destroy();for(n=0;n<this._pendingRemoval.length;n++)this._pendingRemoval[n].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var d=this.systems.events;d.off(l.PRE_UPDATE,this.preUpdate,this),d.off(l.UPDATE,this.update,this),d.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});g.register("Clock",s,"time"),c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(100),g=e(17),l={Builders:e(1464),Events:e(267),TweenManager:e(1480),Tween:e(266),TweenData:e(268),Timeline:e(588)};l=g(!1,l,o),c.exports=l},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={GetBoolean:e(99),GetEaseFunction:e(80),GetNewValue:e(162),GetProps:e(583),GetTargets:e(263),GetTweens:e(584),GetValueOp:e(264),NumberTweenBuilder:e(585),StaggerBuilder:e(586),TimelineBuilder:e(587),TweenBuilder:e(163)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="complete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="loop"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pause"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resume"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="start"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="update"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="active"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="complete"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="loop"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="repeat"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="start"},function(c,R){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="stop"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="update"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="yoyo"},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(93),g=e(0),l=e(585),h=e(24),i=e(20),s=e(586),n=e(587),d=e(100),a=e(163),u=new g({initialize:function(p){this.scene=p,this.systems=p.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,p.sys.events.once(i.BOOT,this.boot,this),p.sys.events.on(i.START,this.start,this)},boot:function(){this.systems.events.once(i.DESTROY,this.destroy,this)},start:function(){var f=this.systems.events;f.on(i.PRE_UPDATE,this.preUpdate,this),f.on(i.UPDATE,this.update,this),f.once(i.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(f){return n(this,f)},timeline:function(f){var p=n(this,f);return p.paused||(this._add.push(p),this._toProcess++),p},create:function(f){return a(this,f)},add:function(f){var p=a(this,f);return this._add.push(p),this._toProcess++,p},existing:function(f){return this._add.push(f),this._toProcess++,this},addCounter:function(f){var p=l(this,f);return this._add.push(p),this._toProcess++,p},stagger:function(f,p){return s(f,p)},preUpdate:function(){if(this._toProcess!==0){var f=this._destroy,p=this._active,v=this._pending,m,E;for(m=0;m<f.length;m++){E=f[m];var x=p.indexOf(E);x===-1?(x=v.indexOf(E),x>-1&&(E.state=d.REMOVED,v.splice(x,1))):(E.state=d.REMOVED,p.splice(x,1))}for(f.length=0,f=this._add,m=0;m<f.length;m++)E=f[m],E.state===d.PENDING_ADD&&(E.init()?(E.play(),this._active.push(E)):this._pending.push(E));f.length=0,this._toProcess=0}},update:function(f,p){var v=this._active,m;p*=this.timeScale;for(var E=0;E<v.length;E++)m=v[E],m.update(f,p)&&(this._destroy.push(m),this._toProcess++)},remove:function(f){return o(this._add,f),o(this._pending,f),o(this._active,f),o(this._destroy,f),f.state=d.REMOVED,this},makeActive:function(f){if(this._add.indexOf(f)!==-1||this._active.indexOf(f)!==-1)return this;var p=this._pending.indexOf(f);return p!==-1&&this._pending.splice(p,1),this._add.push(f),f.state=d.PENDING_ADD,this._toProcess++,this},each:function(f,p){for(var v=[null],m=1;m<arguments.length;m++)v.push(arguments[m]);for(var E in this.list)v[0]=this.list[E],f.apply(p,v)},getAllTweens:function(){for(var f=this._active,p=[],v=0;v<f.length;v++)p.push(f[v]);return p},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(f,p){p===void 0&&(p=!1);var v=this._active,m,E=[],x,y;for(Array.isArray(f)||(f=[f]),x=0;x<v.length;x++)for(m=v[x],y=0;y<f.length;y++)m.hasTarget(f[y])&&E.push(m);if(p)for(v=this._pending,x=0;x<v.length;x++)for(m=v[x],y=0;y<f.length;y++)m.hasTarget(f[y])&&E.push(m);return E},isTweening:function(f){for(var p=this._active,v,m=0;m<p.length;m++)if(v=p[m],v.hasTarget(f)&&v.isPlaying())return!0;return!1},killAll:function(){for(var f=this.getAllTweens(),p=0;p<f.length;p++)f[p].stop();return this},killTweensOf:function(f){for(var p=this.getTweensOf(f),v=0;v<p.length;v++)p[v].stop();return this},pauseAll:function(){for(var f=this._active,p=0;p<f.length;p++)f[p].pause();return this},resumeAll:function(){for(var f=this._active,p=0;p<f.length;p++)f[p].resume();return this},setGlobalTimeScale:function(f){return this.timeScale=f,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var f=this.systems.events;f.off(i.PRE_UPDATE,this.preUpdate,this),f.off(i.UPDATE,this.update,this),f.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(i.START,this.start,this),this.scene=null,this.systems=null}});h.register("TweenManager",u,"tweens"),c.exports=u},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Array:e(208),Base64:e(1482),Objects:e(1484),String:e(1488),NOOP:e(1)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ArrayBufferToBase64:e(1483),Base64ToArrayBuffer:e(433)}},function(c,R){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(g,l){for(var h=new Uint8Array(g),i=h.length,s=l?"data:"+l+";base64,":"",n=0;n<i;n+=3)s+=e[h[n]>>2],s+=e[(h[n]&3)<<4|h[n+1]>>4],s+=e[(h[n+1]&15)<<2|h[n+2]>>6],s+=e[h[n+2]&63];return i%3===2?s=s.substring(0,s.length-1)+"=":i%3===1&&(s=s.substring(0,s.length-2)+"=="),s};c.exports=o},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Clone:e(77),DeepCopy:e(175),Extend:e(17),GetAdvancedValue:e(13),GetFastValue:e(2),GetMinMaxValue:e(1485),GetValue:e(6),HasAll:e(1486),HasAny:e(455),HasValue:e(126),IsPlainObject:e(7),Merge:e(127),MergeRight:e(1487),Pick:e(571),SetValue:e(478)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(6),g=e(18),l=function(h,i,s,n,d){d===void 0&&(d=s);var a=o(h,i,d);return g(a,s,n)};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){for(var l=0;l<g.length;l++)if(!o.hasOwnProperty(g[l]))return!1;return!0};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(77),g=function(l,h){var i=o(l);for(var s in h)i.hasOwnProperty(s)&&(i[s]=h[s]);return i};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Format:e(1489),Pad:e(186),RemoveAt:e(1490),Reverse:e(1491),UppercaseFirst:e(205),UUID:e(222)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return o.replace(/%([0-9]+)/g,function(l,h){return g[Number(h)-1]})};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o,g){return g===0?o.slice(1):o.slice(0,g-1)+o.slice(g)};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(o){return o.split("").reverse().join("")};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={SoundManagerCreator:e(426),Events:e(70),BaseSound:e(146),BaseSoundManager:e(145),WebAudioSound:e(434),WebAudioSoundManager:e(432),HTML5AudioSound:e(429),HTML5AudioSoundManager:e(427),NoAudioSound:e(431),NoAudioSoundManager:e(430)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Arcade:e(1366),Matter:e(1494)}},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BodyBounds:e(1392),Components:e(249),Events:e(272),Factory:e(1394),MatterGameObject:e(1395),Image:e(1396),Matter:e(594),MatterPhysics:e(1524),PolyDecomp:e(1393),Sprite:e(1397),TileBody:e(593),PhysicsEditorParser:e(589),PhysicsJSONParser:e(590),PointerConstraint:e(1398),World:e(1402)}},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setBounce:function(o){return this.body.restitution=o,this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setCollisionCategory:function(o){return this.body.collisionFilter.category=o,this},setCollisionGroup:function(o){return this.body.collisionFilter.group=o,this},setCollidesWith:function(o){var g=0;if(!Array.isArray(o))g=o;else for(var l=0;l<o.length;l++)g|=o[l];return this.body.collisionFilter.mask=g,this},setOnCollide:function(o){return this.body.onCollideCallback=o,this},setOnCollideEnd:function(o){return this.body.onCollideEndCallback=o,this},setOnCollideActive:function(o){return this.body.onCollideActiveCallback=o,this},setOnCollideWith:function(o,g){Array.isArray(o)||(o=[o]);for(var l=0;l<o.length;l++){var h=o[l].hasOwnProperty("body")?o[l].body:o[l];this.body.setOnCollideWith(h,g)}return this}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(41),g={applyForce:function(l){return this._tempVec2.set(this.body.position.x,this.body.position.y),o.applyForce(this.body,this._tempVec2,l),this},applyForceFrom:function(l,h){return o.applyForce(this.body,l,h),this},thrust:function(l){var h=this.body.angle;return this._tempVec2.set(l*Math.cos(h),l*Math.sin(h)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(l){var h=this.body.angle-Math.PI/2;return this._tempVec2.set(l*Math.cos(h),l*Math.sin(h)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(l){var h=this.body.angle+Math.PI/2;return this._tempVec2.set(l*Math.cos(h),l*Math.sin(h)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(l){var h=this.body.angle-Math.PI;return this._tempVec2.set(l*Math.cos(h),l*Math.sin(h)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};c.exports=g},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setFriction:function(o,g,l){return this.body.friction=o,g!==void 0&&(this.body.frictionAir=g),l!==void 0&&(this.body.frictionStatic=l),this},setFrictionAir:function(o){return this.body.frictionAir=o,this},setFrictionStatic:function(o){return this.body.frictionStatic=o,this}};c.exports=e},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setIgnoreGravity:function(o){return this.body.ignoreGravity=o,this}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(41),g=e(3),l={setMass:function(h){return o.setMass(this.body,h),this},setDensity:function(h){return o.setDensity(this.body,h),this},centerOfMass:{get:function(){return new g(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};c.exports=l},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setSensor:function(o){return this.body.isSensor=o,this},isSensor:function(){return this.body.isSensor}};c.exports=e},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(86),g=e(41),l=e(124),h=e(2),i=e(589),s=e(590),n=e(64),d={setRectangle:function(a,u,f){return this.setBody({type:"rectangle",width:a,height:u},f)},setCircle:function(a,u){return this.setBody({type:"circle",radius:a},u)},setPolygon:function(a,u,f){return this.setBody({type:"polygon",sides:u,radius:a},f)},setTrapezoid:function(a,u,f,p){return this.setBody({type:"trapezoid",width:a,height:u,slope:f},p)},setExistingBody:function(a,u){u===void 0&&(u=!0),this.body&&this.world.remove(this.body,!0),this.body=a;for(var f=0;f<a.parts.length;f++)a.parts[f].gameObject=this;var p=this;if(a.destroy=function(){p.world.remove(p.body,!0),p.body.gameObject=null},u&&(this.world.has(a)&&this.world.remove(a,!0),this.world.add(a)),this._originComponent){var v=a.render.sprite.xOffset,m=a.render.sprite.yOffset,E=a.centerOfMass.x,x=a.centerOfMass.y;if(l(E,.5)&&l(x,.5))this.setOrigin(v+.5,m+.5);else{var y=a.centerOffset.x,S=a.centerOffset.y;this.setOrigin(v+y/this.displayWidth,m+S/this.displayHeight)}}return this},setBody:function(a,u){if(!a)return this;var f;typeof a=="string"&&(a={type:a});var p=h(a,"type","rectangle"),v=h(a,"x",this._tempVec2.x),m=h(a,"y",this._tempVec2.y),E=h(a,"width",this.width),x=h(a,"height",this.height);switch(p){case"rectangle":f=o.rectangle(v,m,E,x,u);break;case"circle":var y=h(a,"radius",Math.max(E,x)/2),S=h(a,"maxSides",25);f=o.circle(v,m,y,u,S);break;case"trapezoid":var C=h(a,"slope",.5);f=o.trapezoid(v,m,E,x,C,u);break;case"polygon":var I=h(a,"sides",5),O=h(a,"radius",Math.max(E,x)/2);f=o.polygon(v,m,I,O,u);break;case"fromVertices":case"fromVerts":var M=h(a,"verts",null);if(M)if(typeof M=="string"&&(M=n.fromPath(M)),this.body&&!this.body.hasOwnProperty("temp"))g.setVertices(this.body,M),f=this.body;else{var L=h(a,"flagInternal",!1),P=h(a,"removeCollinear",.01),b=h(a,"minimumArea",10);f=o.fromVertices(v,m,M,u,L,P,b)}break;case"fromPhysicsEditor":f=i.parseBody(v,m,a,u);break;case"fromPhysicsTracer":f=s.parseBody(v,m,a,u);break}return f&&this.setExistingBody(f,a.addToWorld),this}};c.exports=d},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(272),g=e(165),l=e(166),h={setToSleep:function(){return g.set(this.body,!0),this},setAwake:function(){return g.set(this.body,!1),this},setSleepThreshold:function(i){return i===void 0&&(i=60),this.body.sleepThreshold=i,this},setSleepEvents:function(i,s){return this.setSleepStartEvent(i),this.setSleepEndEvent(s),this},setSleepStartEvent:function(i){if(i){var s=this.world;l.on(this.body,"sleepStart",function(n){s.emit(o.SLEEP_START,n,this)})}else l.off(this.body,"sleepStart");return this},setSleepEndEvent:function(i){if(i){var s=this.world;l.on(this.body,"sleepEnd",function(n){s.emit(o.SLEEP_END,n,this)})}else l.off(this.body,"sleepEnd");return this}};c.exports=h},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="afteradd"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="afterremove"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="afterupdate"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="beforeadd"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="beforeremove"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="beforeupdate"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="collisionactive"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="collisionend"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="collisionstart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragend"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="drag"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragstart"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pause"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resume"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="sleepend"},function(c,R){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="sleepstart"},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(41),g={setStatic:function(l){return o.setStatic(this.body,l),this},isStatic:function(){return this.body.isStatic}};c.exports=g},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(41),g=e(14),l=e(269),h=e(270),i=4,s={x:{get:function(){return this.body.position.x},set:function(n){this._tempVec2.set(n,this.y),o.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(n){this._tempVec2.set(this.x,n),o.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(n){var d=1/this._scaleX,a=1/this._scaleY;this._scaleX=n,this._scaleX===0?this.renderFlags&=~i:this.renderFlags|=i,o.scale(this.body,d,a),o.scale(this.body,n,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(n){var d=1/this._scaleX,a=1/this._scaleY;this._scaleY=n,this._scaleY===0?this.renderFlags&=~i:this.renderFlags|=i,o.scale(this.body,d,a),o.scale(this.body,this._scaleX,n)}},angle:{get:function(){return h(this.body.angle*g.RAD_TO_DEG)},set:function(n){this.rotation=h(n)*g.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(n){this._rotation=l(n),o.setAngle(this.body,this._rotation)}},setPosition:function(n,d){return n===void 0&&(n=0),d===void 0&&(d=n),this._tempVec2.set(n,d),o.setPosition(this.body,this._tempVec2),this},setRotation:function(n){return n===void 0&&(n=0),this._rotation=l(n),o.setAngle(this.body,n),this},setFixedRotation:function(){return o.setInertia(this.body,1/0),this},setAngle:function(n){return n===void 0&&(n=0),this.angle=n,o.setAngle(this.body,this.rotation),this},setScale:function(n,d,a){n===void 0&&(n=1),d===void 0&&(d=n);var u=1/this._scaleX,f=1/this._scaleY;return this._scaleX=n,this._scaleY=d,o.scale(this.body,u,f,a),o.scale(this.body,n,d,a),this}};c.exports=s},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(41),g={setAngularVelocity:function(l){return o.setAngularVelocity(this.body,l),this},setVelocityX:function(l){return this._tempVec2.set(l,this.body.velocity.y),o.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(l){return this._tempVec2.set(this.body.velocity.x,l),o.setVelocity(this.body,this._tempVec2),this},setVelocity:function(l,h){return this._tempVec2.set(l,h),o.setVelocity(this.body,this._tempVec2),this}};c.exports=g},function(c,R,e){var o={};c.exports=o;var g=e(118),l=e(32);(function(){o.create=function(h){var i={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return l.extend(i,!1,h)},o.reset=function(h){h.extended&&(h.narrowDetections=0,h.narrowphaseTests=0,h.narrowReuse=0,h.narrowReuseCount=0,h.midphaseTests=0,h.broadphaseTests=0,h.narrowEff=0,h.midEff=0,h.broadEff=0,h.collisions=0,h.buckets=0,h.pairs=0,h.bodies=0)},o.update=function(h,i){if(h.extended){var s=i.world,n=g.allBodies(s);h.collisions=h.narrowDetections,h.pairs=i.pairs.list.length,h.bodies=n.length,h.midEff=(h.narrowDetections/(h.midphaseTests||1)).toFixed(2),h.narrowEff=(h.narrowDetections/(h.narrowphaseTests||1)).toFixed(2),h.broadEff=(1-h.broadphaseTests/(n.length||1)).toFixed(2),h.narrowReuse=(h.narrowReuseCount/(h.narrowphaseTests||1)).toFixed(2)}}})()},function(c,R,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=e(123),g=e(271),l=e(86),h=e(41),i=e(1392),s=e(84),n=e(0),d=e(118),a=e(591),u=e(128),f=e(273),p=e(50),v=e(1394),m=e(2),E=e(6),x=e(597),y=e(1525),S=e(1526),C=e(1399),I=e(1527),O=e(127),M=e(250),L=e(598),P=e(595),b=e(24),B=e(1400),U=e(599),H=e(274),Y=e(20),j=e(592),_=e(83),w=e(64),D=e(1402),N=new n({initialize:function(k){this.scene=k,this.systems=k.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=h,this.composite=d,this.detector=f,this.grid=x,this.pair=M,this.pairs=L,this.query=B,this.resolver=U,this.sat=H,this.constraint=u,this.bodies=l,this.composites=a,this.axes=g,this.bounds=s,this.svg=j,this.vector=_,this.vertices=w,this.verts=w,this._tempVec2=_.create(),E(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),E(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),E(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),U._restingThresh=E(this.config,"restingThresh",4),U._restingThreshTangent=E(this.config,"restingThreshTangent",6),U._positionDampen=E(this.config,"positionDampen",.9),U._positionWarming=E(this.config,"positionWarming",.8),U._frictionNormalMultiplier=E(this.config,"frictionNormalMultiplier",5),k.sys.events.once(Y.BOOT,this.boot,this),k.sys.events.on(Y.START,this.start,this)},boot:function(){this.world=new D(this.scene,this.config),this.add=new v(this.world),this.bodyBounds=new i,this.systems.events.once(Y.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new D(this.scene,this.config),this.add=new v(this.world));var G=this.systems.events;G.on(Y.UPDATE,this.world.update,this.world),G.on(Y.POST_UPDATE,this.world.postUpdate,this.world),G.once(Y.SHUTDOWN,this.shutdown,this)},getConfig:function(){var G=this.systems.game.config.physics,k=this.systems.settings.physics,V=O(m(k,"matter",{}),m(G,"matter",{}));return V},enableAttractorPlugin:function(){return P.register(y),P.use(C,y),this},enableWrapPlugin:function(){return P.register(I),P.use(C,I),this},enableCollisionEventsPlugin:function(){return P.register(S),P.use(C,S),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(G,k){this.world.step(G,k)},containsPoint:function(G,k,V){G=this.getMatterBodies(G);var X=_.create(k,V),K=B.point(G,X);return K.length>0},intersectPoint:function(G,k,V){V=this.getMatterBodies(V);var X=_.create(G,k),K=[],tt=B.point(V,X);return tt.forEach(function(st){K.indexOf(st)===-1&&K.push(st)}),K},intersectRect:function(G,k,V,X,K,tt){K===void 0&&(K=!1),tt=this.getMatterBodies(tt);var st={min:{x:G,y:k},max:{x:G+V,y:k+X}},rt=[],ht=B.region(tt,st,K);return ht.forEach(function(ut){rt.indexOf(ut)===-1&&rt.push(ut)}),rt},intersectRay:function(G,k,V,X,K,tt){K===void 0&&(K=1),tt=this.getMatterBodies(tt);for(var st=[],rt=B.ray(tt,_.create(G,k),_.create(V,X),K),ht=0;ht<rt.length;ht++)st.push(rt[ht].body);return st},intersectBody:function(G,k){k=this.getMatterBodies(k);for(var V=[],X=B.collides(G,k),K=0;K<X.length;K++){var tt=X[K];tt.bodyA===G?V.push(tt.bodyB):V.push(tt.bodyA)}return V},overlap:function(G,k,V,X,K){V===void 0&&(V=null),X===void 0&&(X=null),K===void 0&&(K=V),Array.isArray(G)||(G=[G]),G=this.getMatterBodies(G),k=this.getMatterBodies(k);for(var tt=!1,st=0;st<G.length;st++)for(var rt=G[st],ht=B.collides(rt,k),ut=0;ut<ht.length;ut++){var mt=ht[ut],pt=mt.bodyA.id===rt.id?mt.bodyB:mt.bodyA;if(!X||X.call(K,rt,pt,mt)){if(tt=!0,V)V.call(K,rt,pt,mt);else if(!X)return!0}}return tt},setCollisionCategory:function(G,k){return G=this.getMatterBodies(G),G.forEach(function(V){V.collisionFilter.category=k}),this},setCollisionGroup:function(G,k){return G=this.getMatterBodies(G),G.forEach(function(V){V.collisionFilter.group=k}),this},setCollidesWith:function(G,k){G=this.getMatterBodies(G);var V=0;if(!Array.isArray(k))V=k;else for(var X=0;X<k.length;X++)V|=k[X];return G.forEach(function(K){K.collisionFilter.mask=V}),this},getMatterBodies:function(G){if(!G)return this.world.getAllBodies();Array.isArray(G)||(G=[G]);for(var k=[],V=0;V<G.length;V++){var X=G[V].hasOwnProperty("body")?G[V].body:G[V];k.push(X)}return k},setVelocity:function(G,k,V){G=this.getMatterBodies(G);var X=this._tempVec2;return X.x=k,X.y=V,G.forEach(function(K){h.setVelocity(K,X)}),this},setVelocityX:function(G,k){G=this.getMatterBodies(G);var V=this._tempVec2;return V.x=k,G.forEach(function(X){V.y=X.velocity.y,h.setVelocity(X,V)}),this},setVelocityY:function(G,k){G=this.getMatterBodies(G);var V=this._tempVec2;return V.y=k,G.forEach(function(X){V.x=X.velocity.x,h.setVelocity(X,V)}),this},setAngularVelocity:function(G,k){return G=this.getMatterBodies(G),G.forEach(function(V){h.setAngularVelocity(V,k)}),this},applyForce:function(G,k){G=this.getMatterBodies(G);var V=this._tempVec2;return G.forEach(function(X){V.x=X.position.x,V.y=X.position.y,h.applyForce(X,V,k)}),this},applyForceFromPosition:function(G,k,V,X){G=this.getMatterBodies(G);var K=this._tempVec2;return G.forEach(function(tt){X===void 0&&(X=tt.angle),K.x=V*Math.cos(X),K.y=V*Math.sin(X),h.applyForce(tt,k,K)}),this},applyForceFromAngle:function(G,k,V){G=this.getMatterBodies(G);var X=this._tempVec2;return G.forEach(function(K){V===void 0&&(V=K.angle),X.x=k*Math.cos(V),X.y=k*Math.sin(V),h.applyForce(K,{x:K.position.x,y:K.position.y},X)}),this},getConstraintLength:function(G){var k=G.pointA.x,V=G.pointA.y,X=G.pointB.x,K=G.pointB.y;return G.bodyA&&(k+=G.bodyA.position.x,V+=G.bodyA.position.y),G.bodyB&&(X+=G.bodyB.position.x,K+=G.bodyB.position.y),p(k,V,X,K)},alignBody:function(G,k,V,X){G=G.hasOwnProperty("body")?G.body:G;var K;switch(X){case o.TOP_LEFT:case o.LEFT_TOP:K=this.bodyBounds.getTopLeft(G,k,V);break;case o.TOP_CENTER:K=this.bodyBounds.getTopCenter(G,k,V);break;case o.TOP_RIGHT:case o.RIGHT_TOP:K=this.bodyBounds.getTopRight(G,k,V);break;case o.LEFT_CENTER:K=this.bodyBounds.getLeftCenter(G,k,V);break;case o.CENTER:K=this.bodyBounds.getCenter(G,k,V);break;case o.RIGHT_CENTER:K=this.bodyBounds.getRightCenter(G,k,V);break;case o.LEFT_BOTTOM:case o.BOTTOM_LEFT:K=this.bodyBounds.getBottomLeft(G,k,V);break;case o.BOTTOM_CENTER:K=this.bodyBounds.getBottomCenter(G,k,V);break;case o.BOTTOM_RIGHT:case o.RIGHT_BOTTOM:K=this.bodyBounds.getBottomRight(G,k,V);break}return K&&h.setPosition(G,K),this},shutdown:function(){var G=this.systems.events;this.world&&(G.off(Y.UPDATE,this.world.update,this.world),G.off(Y.POST_UPDATE,this.world.postUpdate,this.world)),G.off(Y.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(Y.START,this.start,this),this.scene=null,this.systems=null}});b.register("MatterPhysics",N,"matterPhysics"),c.exports=N},function(c,R,e){var o=e(594),g={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(l){l.after("Body.create",function(){g.Body.init(this)}),l.before("Engine.update",function(h){g.Engine.update(h)})},Body:{init:function(l){l.plugin.attractors=l.plugin.attractors||[]}},Engine:{update:function(l){for(var h=o.Composite.allBodies(l.world),i=0;i<h.length;i++){var s=h[i],n=s.plugin.attractors;if(n&&n.length>0)for(var d=0;d<h.length;d++){var a=h[d];if(i!==d)for(var u=0;u<n.length;u++){var f=n[u],p=f;o.Common.isFunction(f)&&(p=f(s,a)),p&&o.Body.applyForce(a,a.position,p)}}}}},Attractors:{gravityConstant:.001,gravity:function(l,h){var i=o.Vector.sub(h.position,l.position),s=o.Vector.magnitudeSquared(i)||1e-4,n=o.Vector.normalise(i),d=-g.Attractors.gravityConstant*(l.mass*h.mass/s),a=o.Vector.mult(n,d);o.Body.applyForce(l,l.position,o.Vector.neg(a)),o.Body.applyForce(h,h.position,a)}}};c.exports=g},function(c,R){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(o){o.after("Engine.create",function(){o.Events.on(this,"collisionStart",function(g){g.pairs.map(function(l){var h=l.bodyA,i=l.bodyB;h.gameObject&&h.gameObject.emit("collide",h,i,l),i.gameObject&&i.gameObject.emit("collide",i,h,l),o.Events.trigger(h,"onCollide",{pair:l}),o.Events.trigger(i,"onCollide",{pair:l}),h.onCollideCallback&&h.onCollideCallback(l),i.onCollideCallback&&i.onCollideCallback(l),h.onCollideWith[i.id]&&h.onCollideWith[i.id](i,l),i.onCollideWith[h.id]&&i.onCollideWith[h.id](h,l)})}),o.Events.on(this,"collisionActive",function(g){g.pairs.map(function(l){var h=l.bodyA,i=l.bodyB;h.gameObject&&h.gameObject.emit("collideActive",h,i,l),i.gameObject&&i.gameObject.emit("collideActive",i,h,l),o.Events.trigger(h,"onCollideActive",{pair:l}),o.Events.trigger(i,"onCollideActive",{pair:l}),h.onCollideActiveCallback&&h.onCollideActiveCallback(l),i.onCollideActiveCallback&&i.onCollideActiveCallback(l)})}),o.Events.on(this,"collisionEnd",function(g){g.pairs.map(function(l){var h=l.bodyA,i=l.bodyB;h.gameObject&&h.gameObject.emit("collideEnd",h,i,l),i.gameObject&&i.gameObject.emit("collideEnd",i,h,l),o.Events.trigger(h,"onCollideEnd",{pair:l}),o.Events.trigger(i,"onCollideEnd",{pair:l}),h.onCollideEndCallback&&h.onCollideEndCallback(l),i.onCollideEndCallback&&i.onCollideEndCallback(l)})})})}};c.exports=e},function(c,R,e){var o=e(594),g={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(l){l.after("Engine.update",function(){g.Engine.update(this)})},Engine:{update:function(l){for(var h=l.world,i=o.Composite.allBodies(h),s=o.Composite.allComposites(h),n=0;n<i.length;n+=1){var d=i[n];d.plugin.wrap&&g.Body.wrap(d,d.plugin.wrap)}for(n=0;n<s.length;n+=1){var a=s[n];a.plugin.wrap&&g.Composite.wrap(a,a.plugin.wrap)}}},Bounds:{wrap:function(l,h){var i=null,s=null;if(typeof h.min.x!="undefined"&&typeof h.max.x!="undefined"&&(l.min.x>h.max.x?i=h.min.x-l.max.x:l.max.x<h.min.x&&(i=h.max.x-l.min.x)),typeof h.min.y!="undefined"&&typeof h.max.y!="undefined"&&(l.min.y>h.max.y?s=h.min.y-l.max.y:l.max.y<h.min.y&&(s=h.max.y-l.min.y)),i!==null||s!==null)return{x:i||0,y:s||0}}},Body:{wrap:function(l,h){var i=g.Bounds.wrap(l.bounds,h);return i&&o.Body.translate(l,i),i}},Composite:{bounds:function(l){for(var h=o.Composite.allBodies(l),i=[],s=0;s<h.length;s+=1){var n=h[s];i.push(n.bounds.min,n.bounds.max)}return o.Bounds.create(i)},wrap:function(l,h){var i=g.Bounds.wrap(g.Composite.bounds(l),h);return i&&o.Composite.translate(l,i),i}}};c.exports=g},function(c,R,e){(function(o){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var g=e(33),l=e(17),h={Actions:e(275),Animations:e(723),BlendModes:e(35),Cache:e(735),Cameras:e(738),Core:e(806),Class:e(0),Create:e(888),Curves:e(894),Data:e(896),Display:e(898),DOM:e(917),Events:e(918),Game:e(920),GameObjects:e(1011),Geom:e(483),Input:e(1308),Loader:e(1338),Math:e(193),Physics:e(1493),Plugins:e(1403),Renderer:e(1405),Scale:e(1412),ScaleModes:e(168),Scene:e(418),Scenes:e(1413),Structs:e(1415),Textures:e(1416),Tilemaps:e(1418),Time:e(1461),Tweens:e(1463),Utils:e(1481)};h.Sound=e(1492),h=l(!1,h,g),c.exports=h,o.Phaser=h}).call(this,e(600))}])})})(vp);var jt=tT(vp.exports);const wT="Walk",BT="Idle",FT=100,Gi=[{name:"N",coords:{x:0,y:-1}},{name:"L",coords:{x:1,y:0}},{name:"S",coords:{x:0,y:1}},{name:"O",coords:{x:-1,y:0}}],Tr=64,Pe=128,ds=64,En=96,Ho=[{key:"grama",tileCount:10,background:4491485},{key:"terra",tileCount:14,background:5588019},{key:"mar",tileCount:10,background:6728447}];function mn(J,Q){const c=new Phaser.Math.Vector2;return c.x=J-Q,c.y=(J+Q)/2,c}const wh=class extends jt.Scene{constructor(){super(wh.SCENE_KEY),this.finished=!1,this.subscriptions=[]}init(J){this.sceneData=J,this.mapData=this.getRandomMap(J.pathSize),this.params=this.game.registry.get("params");const Q=this.game.registry.get("lives");Q&&(this.lives=Q,this.maxLives=Q,this.limitedTries=!0)}create(){this.tilemap=this.buildTilemap(this.mapData),this.mapGrid=this.createGrid(this.mapData),this.reward=this.buildReward(),this.corners=this.calculateTilemapCorners(this.mapData),this.character=this.add.sprite(0,0,"character").setOrigin(.5,.83),this.deathAnim=this.createRespawnAnimation(),this.particles=this.createParticleEmitter(),this.resetCharacter(),this.putCameraOnCorners(this.corners),this.scale.on(jt.Scale.Events.RESIZE,this.onResizeHandler,this),this.listenEvents(),IT(Q=>{let c=0;return Q==="left"?c=-1:Q==="right"&&(c=1),this.canMoveTo(c)});const J=document.getElementById("code");this.events.once(jt.Scenes.Events.SHUTDOWN,()=>{this.scale.off(jt.Scale.Events.RESIZE,this.onResizeHandler,this),J.style.width="0",J.style.minWidth="0",this.unlistenEvents(),OT(),this.cleanScene()}),J.style.width="40%",J.style.minWidth="650px",gT(),kf()}update(J,Q){const c=Q/1e3;this.walking&&this.runWalk(c)}createRespawnAnimation(){return this.add.sprite(0,0,"death",7).setScale(.8).setOrigin(.5,.75).setVisible(!1)}buildReward(){const J=this.getTileCenter(this.mapData.end.x,this.mapData.end.y),Q=mn(J.x,J.y),c=this.add.image(Q.x,Q.y,"star").setScale(.35).setOrigin(.5,.6);return this.add.tween({targets:c,y:"-=10",scale:.4,yoyo:!0,ease:jt.Math.Easing.Cubic.Out,duration:1e3,repeat:-1}),c}createParticleEmitter(){var J=this.add.particles("star");return J.createEmitter({lifespan:{min:0,max:750},speed:{min:0,max:400},radial:!0,angle:{min:0,max:360},scale:{min:0,max:.5},alpha:{start:1,end:0},quantity:100,rotate:{min:0,max:360},blendMode:"SCREEN",on:!1})}listenEvents(){this.subscriptions.push(RT().subscribe(()=>{this.walk()})),this.subscriptions.push(CT().subscribe(J=>{if(J==="left"){this.turnLeft();return}J==="right"&&this.turnRight()})),this.subscriptions.push(up().subscribe(()=>{this.walking=!1,this.finished||this.lose()}))}unlistenEvents(){this.subscriptions.forEach(J=>J.unsubscribe())}cleanScene(){this.sceneData=void 0,this.mapData=void 0,this.tilemap=void 0,this.mapGrid=void 0,this.corners=void 0,this.reward=void 0,this.particles=void 0,this.character=void 0,this.deathAnim=void 0,this.currCartPos=void 0,this.currMapPos=void 0,this.currDirIndex=void 0,this.walking=void 0,this.distWalked=void 0,this.finished=!1,this.subscriptions=[],this.params=void 0,this.lives=void 0,this.maxLives=void 0,this.limitedTries=void 0}canMoveTo(J){let Q=this.currDirIndex+J;Q<0?Q=Gi.length-1:Q===Gi.length&&(Q=0);const c=Gi[Q].coords,R={x:this.currMapPos.x+c.x,y:this.currMapPos.y+c.y};return!!this.mapData.path.find(o=>o.x===R.x&&o.y===R.y)}buildTilemap(J){const Q=new jt.Tilemaps.MapData({width:J.width,height:J.height,tileWidth:Pe,tileHeight:ds,orientation:jt.Tilemaps.Orientation.ISOMETRIC,version:1}),c=new jt.Tilemaps.Tilemap(this,Q),R=Ho[jt.Math.Between(0,Ho.length-1)];this.cameras.main.setBackgroundColor(R.background);const e=c.addTilesetImage("largada","largada",Pe,En),o=c.addTilesetImage("tileset",R.key,Pe,En,0,0,1),g=c.createBlankLayer("layer",[e,o],-Pe/2,-16);return c.setLayerTileSize(Pe,En,g),J.path.forEach(l=>{g.putTileAt(jt.Math.Between(o.firstgid,o.firstgid+R.tileCount-1),l.x,l.y)}),g.putTileAt(0,J.start.x,J.start.y),g.putTileAt(0,J.end.x,J.end.y),c}getTileCenter(J,Q){return{x:J*Tr+Tr/2,y:Q*Tr+Tr/2}}onResizeHandler(){this.putCameraOnCorners(this.corners)}calculateTilemapCorners(J){const Q=new jt.Math.Vector2(0,0),c=new jt.Math.Vector2(Pe/2*J.width,ds/2*J.width),R=new jt.Math.Vector2(c.x-Pe/2*J.height,c.y+ds/2*J.height),e=new jt.Math.Vector2(-(Pe/2)*J.height,ds/2*J.height);return{top:Q,left:e,bottom:R,right:c}}putCameraOnCorners(J){const Q=(J.right.x+J.left.x)/2,c=(J.bottom.y+J.top.y-100)/2,R=J.right.x-J.left.x,e=J.bottom.y-J.top.y+150,o=this.scale.gameSize.width/R,g=this.scale.gameSize.height/e,l=Math.min(o,g);this.cameras.main.centerOn(Q,c),this.cameras.main.setZoom(l*.97)}createGrid(J){const Q=this.add.graphics({lineStyle:{color:16777215,alpha:.3,width:1}}),c=J.width*Pe/2,R=J.height*ds;Q.beginPath();for(let e=0;e<=J.width;e++){const o=e*Pe/2,g=mn(o,0),l=mn(o,R);Q.moveTo(g.x,g.y).lineTo(l.x,l.y)}for(let e=0;e<=J.height;e++){const o=e*ds,g=mn(0,o),l=mn(c,o);Q.moveTo(g.x,g.y).lineTo(l.x,l.y)}return Q.closePath().stroke(),Q}playAnimation(J,Q){Q.play(J),Q.flipX=J.indexOf("_S")!==-1||J.indexOf("_O")!==-1}resetCharacter(){this.currCartPos=this.getTileCenter(this.mapData.start.x,this.mapData.start.y),this.currMapPos={x:this.mapData.start.x,y:this.mapData.start.y},this.updateCharacterPos();const J=this.mapData.path[1].x-this.mapData.path[0].x,Q=this.mapData.path[1].y-this.mapData.path[0].y,c=this.getDir(J,Q);!c||(this.currDirIndex=Gi.indexOf(c),this.updateAnimation())}makeAnimName(J,Q){return`${J}_${Q}`}getDir(J,Q){return Gi.find(c=>c.coords.x===J&&c.coords.y===Q)}turnLeft(){this.walking||(this.currDirIndex--,this.currDirIndex<0&&(this.currDirIndex=Gi.length-1),this.updateAnimation(),Ah(),this.time.addEvent({delay:100,callback:()=>Oh()}))}turnRight(){this.walking||(this.currDirIndex++,this.currDirIndex===Gi.length&&(this.currDirIndex=0),this.updateAnimation(),Ah(),this.time.addEvent({delay:100,callback:()=>Oh()}))}walk(){if(this.walking)return;this.walking=!0,this.updateAnimation(),this.distWalked=0;const J=Gi[this.currDirIndex].coords;this.currMapPos.x+=J.x,this.currMapPos.y+=J.y,Ah()}stopWalking(){if(!!this.walking){if(this.walking=!1,this.updateAnimation(),this.currCartPos=this.getTileCenter(this.currMapPos.x,this.currMapPos.y),this.updateCharacterPos(),!this.checkIfValidPos()||this.checkIfWon()){kh();return}Oh()}}runWalk(J){const Q=FT*J,c=Gi[this.currDirIndex].coords,R=c.x*Q,e=c.y*Q;this.currCartPos.x+=R,this.currCartPos.y+=e,this.updateCharacterPos(),this.distWalked+=Q,this.distWalked>=Tr&&this.stopWalking()}checkIfWon(){return this.finished=this.currMapPos.x===this.mapData.end.x&&this.currMapPos.y===this.mapData.end.y,this.finished&&this.win(),this.finished}checkIfValidPos(){const Q=!!this.mapData.path.find(c=>c.x===this.currMapPos.x&&c.y===this.currMapPos.y);return this.finished=!Q,Q||this.lose(),Q}updateCharacterPos(){const J=mn(this.currCartPos.x,this.currCartPos.y);this.character.setPosition(J.x,J.y)}updateAnimation(){const J=Gi[this.currDirIndex],Q=this.makeAnimName(this.walking?wT:BT,J.name);this.playAnimation(Q,this.character)}win(){this.particles.emitParticleAt(this.character.x,this.character.y),this.reward.setVisible(!1),this.game.events.emit("addScore",this.sceneData.points),Uf(),this.time.addEvent({callback:()=>{var J,Q;if((J=this.params)!=null&&J.needResult){const c=this.lives/this.maxLives*100;(Q=window.top)==null||Q.postMessage(`{ performance: ${c} }`,"*");return}this.scene.start(wh.SCENE_KEY,this.sceneData)},delay:2e3})}lose(){Uf(),this.lives&&(this.lives--,this.game.registry.set("lives",this.lives)),this.deathAnim.setPosition(this.character.x,this.character.y).setVisible(!0).play("DeathUp"),this.deathAnim.once(jt.Animations.Events.ANIMATION_COMPLETE_KEY+"DeathUp",()=>{this.character.setVisible(!1),this.resetCharacter(),this.deathAnim.play("DeathDown")}),this.deathAnim.once(jt.Animations.Events.ANIMATION_COMPLETE_KEY+"DeathDown",()=>{this.deathAnim.setPosition(this.character.x,this.character.y).play("RespawnUp")}),this.deathAnim.once(jt.Animations.Events.ANIMATION_COMPLETE_KEY+"RespawnUp",()=>{this.character.setVisible(!0),this.deathAnim.play("RespawnDown")}),this.deathAnim.once(jt.Animations.Events.ANIMATION_COMPLETE_KEY+"RespawnDown",()=>{var J;if(this.deathAnim.setVisible(!1),this.limitedTries&&!this.lives){(J=window.top)==null||J.postMessage("{ performance: 0 }","*");return}this.finished=!1,kf()})}getRandomMap(J){let Q=this.createRandomPath(J);for(;!Q;)Q=this.createRandomPath(J);const c=Q.map(n=>n.x),R=Math.max(...c),e=Math.min(...c),o=1+R-e,g=Q.map(n=>n.y),l=Math.max(...g),h=Math.min(...g),i=1+l-h;return e<0&&Q.forEach(n=>{n.x-=e}),h<0&&Q.forEach(n=>{n.y-=h}),{start:Q[0],end:Q[Q.length-1],width:o,height:i,path:Q}}createRandomPath(J){const Q=[{x:0,y:0}],c=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}];for(;Q.length<J;){const R=[...c],e=Q[Q.length-1];for(;R.length;){const o=R.splice(jt.Math.Between(0,R.length-1),1)[0],g={x:e.x+o.x,y:e.y+o.y};if(Q.find(i=>i.x===g.x&&i.y===g.y))continue;let h=0;if(c.forEach(i=>{Q.find(n=>n.x===g.x+i.x&&n.y===g.y+i.y)&&h++}),h===1){Q.push(g);break}if(!R.length)return}}return Q}};let qi=wh;qi.SCENE_KEY="game-scene";const gp=class extends jt.Scene{constructor(){super(gp.SCENE_KEY)}preload(){}create(){const J={pathSize:1,points:1};this.tilemap=this.buildTilemap(),this.character=this.add.sprite(0,0,"character").play("Walk_L").setScale(1.5).setOrigin(.5,.8),this.easyText=this.add.text(0,0,"F\xC1CIL",{fontSize:40,color:"#FFFFFF"}).setOrigin(.5).setInteractive().on("pointerover",()=>{this.easyText.setColor("#FFDDDD")}).on("pointerout",()=>{this.easyText.setColor("#FFFFFF")}).on("pointerdown",()=>{J.pathSize=8,J.points=1,this.scene.start(qi.SCENE_KEY,J)}),this.normalText=this.add.text(0,0,"M\xC9DIO",{fontSize:40,color:"#FFFFFF"}).setOrigin(.5).setInteractive().on("pointerover",()=>{this.normalText.setColor("#FFDDDD")}).on("pointerout",()=>{this.normalText.setColor("#FFFFFF")}).on("pointerdown",()=>{J.pathSize=14,J.points=2,this.scene.start(qi.SCENE_KEY,J)}),this.hardText=this.add.text(0,0,"DIF\xCDCIL",{fontSize:40,color:"#FFFFFF"}).setOrigin(.5).setInteractive().on("pointerover",()=>{this.hardText.setColor("#FFDDDD")}).on("pointerout",()=>{this.hardText.setColor("#FFFFFF")}).on("pointerdown",()=>{J.pathSize=20,J.points=3,this.scene.start(qi.SCENE_KEY,J)}),this.titleText=this.add.text(0,0,"ROTA PROGRAMADA",{fontSize:80,color:"#FFFFFF"}),this.scale.on(jt.Scale.Events.RESIZE,this.onResizeHandler,this),this.events.once(jt.Scenes.Events.SHUTDOWN,()=>{this.scale.off(jt.Scale.Events.RESIZE,this.onResizeHandler,this)}),this.setupHUD(),this.setupAnimations()}update(){if(this.tilemap.layer.tilemapLayer.x-=1.5,this.tilemap.layer.tilemapLayer.y-=.75,this.tilemap.layer.tilemapLayer.x<-Pe*2){this.tilemap.layer.tilemapLayer.x+=Pe/2,this.tilemap.layer.tilemapLayer.y+=ds/2;const J=this.tilemap.getTileAt(0,0);for(let Q=0;Q<this.tilemap.layer.width-1;Q++){const c=this.tilemap.getTileAt(Q+1,0);this.tilemap.putTileAt(c.index,Q,0)}this.tilemap.putTileAt(J.index,49,0)}}buildTilemap(){const J=new jt.Tilemaps.MapData({width:50,height:1,tileWidth:Pe,tileHeight:ds,orientation:jt.Tilemaps.Orientation.ISOMETRIC,version:1}),Q=new jt.Tilemaps.Tilemap(this,J),c=Ho[jt.Math.Between(0,Ho.length-1)];this.cameras.main.setBackgroundColor(c.background);const R=Q.addTilesetImage("largada","largada",Pe,En),e=Q.addTilesetImage("tileset",c.key,Pe,En,0,0,1),o=Q.createBlankLayer("layer",[R,e],-Pe/2,100);Q.setLayerTileSize(Pe,En,o);for(let g=0;g<50;g++)o.putTileAt(jt.Math.Between(e.firstgid,e.firstgid+c.tileCount-1),g,0);return Q}onResizeHandler(){this.setupHUD()}setupHUD(){const J=this.scale.gameSize;this.character.setPosition(J.width*.5,J.height*.5),this.easyText.setPosition(J.width*.07,J.height*.4).setOrigin(0),this.normalText.setPosition(J.width*.07,J.height*.5).setOrigin(0),this.hardText.setPosition(J.width*.07,J.height*.6).setOrigin(0),this.titleText.setPosition(J.width*.07,J.height*.85).setOrigin(0),this.tilemap.layers[0].tilemapLayer.x=J.width*.5,this.tilemap.layers[0].tilemapLayer.y=J.height*.5}setupAnimations(){this.add.tween({targets:[this.easyText,this.normalText,this.hardText],scale:1.025,angle:2,yoyo:!0,ease:jt.Math.Easing.Quadratic.Out,repeat:-1,duration:1500})}};let Ko=gp;Ko.SCENE_KEY="menu-scene";const mp=class extends jt.Scene{constructor(){super(mp.SCENE_KEY),this.score=0}preload(){}create(){var e;const J=window.location.href;if(!((e=new URL(J).searchParams.get("diff"))==null?void 0:e.toLowerCase())){const o=this.add.text(10,10,"<",{fontSize:50,color:"#FFFFFF",padding:8});o.setScrollFactor(0).setOrigin(0).setInteractive().on("pointerover",()=>{o.setColor("#FFDDDD")}).on("pointerout",()=>{o.setColor("#FFFFFF")}).on("pointerdown",()=>{this.scene.launch(Ko.SCENE_KEY),this.scene.stop(qi.SCENE_KEY)})}const R=localStorage.getItem("score");R&&(this.score=Number(R)),this.scoreImage=this.add.image(120,42,"star").setScrollFactor(0).setOrigin(.5).setScale(.5),this.scoreText=this.add.text(200,45,`${this.score}`,{fontSize:40,color:"#FFFFFF",padding:8}).setScrollFactor(0).setOrigin(.5),this.buildLives(),this.game.events.on("addScore",o=>this.addScore(o))}buildLives(){const J=this.game.registry.get("lives");J&&(this.livesImage=this.add.image(290,42,"heart").setScrollFactor(0).setOrigin(.5).setScale(.95),this.livesText=this.add.text(340,42,J,{fontSize:40,color:"#FFFFFF",padding:8}).setScrollFactor(0).setOrigin(.5)),this.game.registry.events.on("changedata-lives",()=>{this.updateLives()})}addScore(J){this.score+=J,localStorage.setItem("score",`${this.score}`),this.scoreText.setText(`${this.score}`),this.add.tween({targets:this.scoreText,scale:2,yoyo:!0,duration:400}),this.add.tween({targets:this.scoreImage,angle:{from:-10,to:10},yoyo:!0,repeat:3,duration:250})}updateLives(){const J=this.game.registry.get("lives");J!==void 0&&(this.livesText.setText(J),this.add.tween({targets:this.livesText,scale:2,yoyo:!0,duration:400}),this.add.tween({targets:this.livesImage,angle:{from:-10,to:10},yoyo:!0,repeat:3,duration:250}))}};let Vh=mp;Vh.SCENE_KEY="hud-scene";const Tp=class extends jt.Scene{constructor(){super(Tp.SCENE_KEY)}preload(){this.cameras.main.setBackgroundColor(0),this.add.text(this.scale.gameSize.width/2,this.scale.gameSize.height/2,"CARREGANDO",{color:"#ffffff",fontSize:50}).setOrigin(.5),this.load.spritesheet("character","animation.png",{frameWidth:150,frameHeight:220}),this.load.spritesheet("tornado","death_animation.png",{frameWidth:230,frameHeight:288}),this.load.image("grama","tileset_grama.png"),this.load.image("terra","tileset_terra.png"),this.load.image("mar","tileset_mar.png"),this.load.image("largada","largada.png"),this.load.image("star","star.png"),this.load.image("heart","heart.png"),this.load.image("particle","particle.png")}create(){var o,g;const J=window.location.href,Q=new URL(J),c=(o=Q.searchParams.get("diff"))==null?void 0:o.toLowerCase(),R=(g=Q.searchParams.get("lives"))==null?void 0:g.toLowerCase(),e=Number(R);e&&this.game.registry.set("lives",e),this.buildAnimations(),this.scene.launch(Vh.SCENE_KEY),c?this.startWithDifficulty(c):this.scene.start(Ko.SCENE_KEY)}startWithDifficulty(J){const Q={pathSize:1,points:1};switch(this.game.registry.set("params",{needResult:!0}),J){case"hard":Q.pathSize=20,Q.points=3,this.scene.start(qi.SCENE_KEY,Q);break;case"medium":Q.pathSize=14,Q.points=2,this.scene.start(qi.SCENE_KEY,Q);break;default:Q.pathSize=3,Q.points=1,this.scene.start(qi.SCENE_KEY,Q)}}buildAnimations(){this.anims.create({key:"Walk_N",frames:this.anims.generateFrameNames("character",{start:8,end:15}),frameRate:8,repeat:-1}),this.anims.create({key:"Walk_L",frames:this.anims.generateFrameNames("character",{start:24,end:31}),frameRate:8,repeat:-1}),this.anims.create({key:"Walk_S",frames:this.anims.generateFrameNames("character",{start:24,end:31}),frameRate:8,repeat:-1}),this.anims.create({key:"Walk_O",frames:this.anims.generateFrameNames("character",{start:8,end:15}),frameRate:8,repeat:-1}),this.anims.create({key:"Idle_N",frames:this.anims.generateFrameNames("character",{start:48,end:55}),yoyo:!0,frameRate:8,repeat:-1}),this.anims.create({key:"Idle_L",frames:this.anims.generateFrameNames("character",{start:64,end:71}),frameRate:8,yoyo:!0,repeat:-1}),this.anims.create({key:"Idle_S",frames:this.anims.generateFrameNames("character",{start:64,end:71}),yoyo:!0,frameRate:8,repeat:-1}),this.anims.create({key:"Idle_O",frames:this.anims.generateFrameNames("character",{start:48,end:55}),yoyo:!0,frameRate:8,repeat:-1}),this.anims.create({key:"DeathUp",frames:this.anims.generateFrameNumbers("tornado",{frames:[0,1,2,3,4,5,6,7]}),duration:375}),this.anims.create({key:"DeathDown",frames:this.anims.generateFrameNumbers("tornado",{frames:[7,6,5,4,3,2,1]}),duration:375}),this.anims.create({key:"RespawnUp",frames:this.anims.generateFrameNumbers("tornado",{frames:[0,1,2,3,4,5,6,7]}),duration:375}),this.anims.create({key:"RespawnDown",frames:this.anims.generateFrameNumbers("tornado",{frames:[7,6,5,4,3,2,1]}),duration:375})}};let Ep=Tp;Ep.SCENE_KEY="preload-scene";function GT(){new jt.Game({type:jt.AUTO,parent:"phaser",backgroundColor:5592405,scale:{mode:jt.Scale.RESIZE,autoCenter:jt.Scale.CENTER_BOTH},scene:[Ep,Ko,qi,Vh]})}GT();bT();
